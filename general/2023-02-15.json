[
    {
        "user": "U04M1BY1FRR",
        "type": "message",
        "ts": "1676474242.880499",
        "client_msg_id": "261e03ae-9baa-4c40-9b22-ea962ac329f7",
        "text": "Hi guys, when using the betfair lightweight package after creating a stream as below, how can I check if all the markets of the stream have been completed (the event is complete)\n\n```self.stream = self.client.streaming.create_stream(\n    unique_id=self.streaming_unique_id, listener=self.listener\n)```\nI would like to use this to close the thread running the stream, since there is no longer any incoming data to listen to.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "086a17ff0ee5",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-01-29\/4712580647589_086a17ff0ee5f9664c27_72.png",
            "first_name": "Charaka",
            "real_name": "Charaka Abeywickrama",
            "display_name": "Charaka A",
            "team": "T4G9NBD2M",
            "name": "charaka.abeywickrama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676474242.880499",
        "reply_count": 2,
        "reply_users_count": 2,
        "latest_reply": "1676480933.963979",
        "reply_users": [
            "U4H19D1D2",
            "U04M1BY1FRR"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1676474631.902389"
            },
            {
                "user": "U04M1BY1FRR",
                "ts": "1676480933.963979"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1676480933.963979",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6CnYU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi guys, when using the betfair lightweight package after creating a stream as below, how can I check if all the markets of the stream have been completed (the event is complete)\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "self.stream = self.client.streaming.create_stream(\n    unique_id=self.streaming_unique_id, listener=self.listener\n)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nI would like to use this to close the thread running the stream, since there is no longer any incoming data to listen to."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676474631.902389",
        "client_msg_id": "acfef73d-20f1-42a2-bed0-84f0813fbcc8",
        "text": "Nothing public but you can see how many markets are currently open with:\n\n```len([i for i in listener.stream._caches.values() if not i.closed])```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676474242.880499",
        "parent_user_id": "U04M1BY1FRR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9J74a",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Nothing public but you can see how many markets are currently open with:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "len([i for i in listener.stream._caches.values() if not i.closed])"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U04M1BY1FRR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U04M1BY1FRR",
        "type": "message",
        "ts": "1676480933.963979",
        "client_msg_id": "1d5cc0d4-546c-43c8-b492-3507c16d604e",
        "text": "Got it thanks Liam will try that",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "086a17ff0ee5",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-01-29\/4712580647589_086a17ff0ee5f9664c27_72.png",
            "first_name": "Charaka",
            "real_name": "Charaka Abeywickrama",
            "display_name": "Charaka A",
            "team": "T4G9NBD2M",
            "name": "charaka.abeywickrama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676474242.880499",
        "parent_user_id": "U04M1BY1FRR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "i=MD6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Got it thanks Liam will try that"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676515996.750179",
        "edited": {
            "user": "U04980ZT6UX",
            "ts": "1676518997.000000"
        },
        "client_msg_id": "866d88d6-5f77-4e3b-ae2a-2e7f364e35eb",
        "text": "I think I might have narrowed down the error.\n\nTo be more precise, when debugging, the code stops at line 34 (in FlumineSimulation.run() on `with self:`) <https:\/\/github.com\/betcode-org\/flumine\/blob\/aaf2e1a027a19e1bb2209a77015e16eb8c689040\/flumine\/simulation\/simulation.py#L34>, with no errors, but never ends.\n\nI think the reason for the error is that I have created a Child class of Flumine BaseStrategy, and thus I am not reaching BaseFlumine.__exit__.\n\nWill try to produce a minimal example tomorrow",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676434126.311199",
        "parent_user_id": "U04980ZT6UX",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/aaf2e1a027a19e1bb2209a77015e16eb8c689040\/flumine\/simulation\/simulation.py#L34",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/aaf2e1a027a19e1bb2209a77015e16eb8c689040\/flumine\/simulation\/simulation.py | simulation.py>",
                "text": "```\n        with self:\n```",
                "title": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/aaf2e1a027a19e1bb2209a77015e16eb8c689040\/flumine\/simulation\/simulation.py | simulation.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Oy7wc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think I might have narrowed down the error.\n\nTo be more precise, when debugging, the code stops at line 34 (in FlumineSimulation.run() on "
                            },
                            {
                                "type": "text",
                                "text": "with self:",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ") "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/aaf2e1a027a19e1bb2209a77015e16eb8c689040\/flumine\/simulation\/simulation.py#L34"
                            },
                            {
                                "type": "text",
                                "text": ", with no errors, but never ends.\n\nI think the reason for the error is that I have created a Child class of Flumine BaseStrategy, and thus I am not reaching BaseFlumine.__exit__.\n\nWill try to produce a minimal example tomorrow"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03QLPZQBLM",
        "type": "message",
        "ts": "1676519227.500689",
        "client_msg_id": "013055d2-3a74-4843-92fa-fb1cdb0ce1a0",
        "text": "with Flumine, is there a way to see what position your order is in on a specific price in the ladder?\n\neg If I put out an offer to bet at 2-1 and there is *£*500 on the offer can I see how many individual orders are part of that *£500 ?*",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gee4caf4e81f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/ee4caf4e81ff96058a7d4a3efdf1a260.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png",
            "first_name": "Johnny",
            "real_name": "Johnny Boston",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "mike.breen.bbb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676519227.500689",
        "reply_count": 1,
        "reply_users_count": 1,
        "latest_reply": "1676528527.193809",
        "reply_users": [
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1676528527.193809"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1676528527.193809",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0wVDq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "with Flumine, is there a way to see what position your order is in on a specific price in the ladder?\n\neg If I put out an offer to bet at 2-1 and there is "
                            },
                            {
                                "type": "text",
                                "text": "£",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "500 on the offer can I see how many individual orders are part of that "
                            },
                            {
                                "type": "text",
                                "text": "£500 ?",
                                "style": {
                                    "bold": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676528527.193809",
        "client_msg_id": "8594b64a-be85-416e-b51d-34a550191bcb",
        "text": "No, with the simulation middleware however you can see an estimate of how much is ahead or 'on top'",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676519227.500689",
        "parent_user_id": "U03QLPZQBLM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1PX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "No, with the simulation middleware however you can see an estimate of how much is ahead or 'on top'"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U03QLPZQBLM"
                ],
                "count": 1
            }
        ]
    }
]