[
    {
        "user": "U0128E7BEHW",
        "type": "message",
        "ts": "1713105962.660909",
        "client_msg_id": "eb3cfd63-81f3-4a8f-87df-f3437ae53405",
        "text": "Looking at optimizing some of my market stream subscriptions. Suppose I have two strategies, one trades AU WIN horse markets, and the other trades GB WIN horse markets. If I call add_strategy twice with each of these market filters, presumably that will use two connections.\n\nIf I call add_strategy twice but each time with the filter [(AU, GB), 7, WIN] - presumably it will only use 1 connection, but presumably I'd have to add logic to discard AU ticks in my GB strategy and visa versa. Is this correct? Does anyone have any intuition of whether this brings any benefits other than just freeing up a connection?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb57a2bdd15a",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b57a2bdd15acccdb845ce257f38940cc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "Dave",
            "real_name": "Dave R",
            "display_name": "Dave",
            "team": "T4G9NBD2M",
            "name": "d7m",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "reply_count": 14,
        "reply_users_count": 6,
        "latest_reply": "1713213353.087559",
        "reply_users": [
            "U4H19D1D2",
            "UEA14GBRR",
            "U0128E7BEHW",
            "U01PJ5YMFBJ",
            "UPMUFSGCR",
            "UQL0QDEKA"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1713115080.949109"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1713116596.119899"
            },
            {
                "user": "U0128E7BEHW",
                "ts": "1713117242.093439"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1713118693.459829"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1713118706.879759"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1713118741.140589"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1713120966.425769"
            },
            {
                "user": "UPMUFSGCR",
                "ts": "1713125468.880859"
            },
            {
                "user": "UPMUFSGCR",
                "ts": "1713125739.287959"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1713128121.202239"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1713128832.559429"
            },
            {
                "user": "U0128E7BEHW",
                "ts": "1713196537.253609"
            },
            {
                "user": "UQL0QDEKA",
                "ts": "1713197119.969349"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1713213353.087559"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1713374232.250839",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JtydF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Looking at optimizing some of my market stream subscriptions. Suppose I have two strategies, one trades AU WIN horse markets, and the other trades GB WIN horse markets. If I call add_strategy twice with each of these market filters, presumably that will use two connections.\n\nIf I call add_strategy twice but each time with the filter [(AU, GB), 7, WIN] - presumably it will only use 1 connection, but presumably I'd have to add logic to discard AU ticks in my GB strategy and visa versa. Is this correct? Does anyone have any intuition of whether this brings any benefits other than just freeing up a connection?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1713115080.949109",
        "client_msg_id": "94D17696-87AE-4908-90DB-73B195ADA09E",
        "text": "Depends on the context of ‘optimising’ ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LGNBs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Depends on the context of ‘optimising’ "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1713116596.119899",
        "client_msg_id": "00a7d991-4a64-40c3-afc0-9d1799112230",
        "text": "Most of the year they don't overlap, or by much. Schedule them to start up and shutdown seperately as required. But combining your sub into Aus and UK together probably won't make any performance difference  because when one is busy the other isn't.  You'll be checking a tick is one you want anyway regardless of subscription, as you don't assume a data source that's out of your control is as expected, as part of defensive coding good practice.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CzVps",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Most of the year they don't overlap, or by much. Schedule them to start up and shutdown seperately as required. But combining your sub into Aus and UK together probably won't make any performance difference  because when one is busy the other isn't.  You'll be checking a tick is one you want anyway regardless of subscription, as you don't assume a data source that's out of your control is as expected, as part of defensive coding good practice."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0128E7BEHW",
        "type": "message",
        "ts": "1713117242.093439",
        "client_msg_id": "0ecf2ab5-57f1-48fa-9869-15f6f74f7a3a",
        "text": "The context is that I want to free up some connections to launch additional markets. But I'm worried that if I \"merge streams\" in this way, ticks may arrive \"slower\", (e.g. in this case GB ticks and AU ticks will be interleaved on the same stream rather than receiving them independently on two streams), or maybe even subject to forced conflation. Obviously you're still at the mercy of the GIL + the fact that flumine is single process, but still. I am imaging a scenario where stream throughput is always the same on Betfair's side, so subscribing to GB+AU on one stream may result in suboptimal delivery of ticks vs 2 streams with GB + AU independently. (just using GB + AU for example sake btw, obviously more concerned about markets that tick heavily in paralell).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb57a2bdd15a",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b57a2bdd15acccdb845ce257f38940cc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "Dave",
            "real_name": "Dave R",
            "display_name": "Dave",
            "team": "T4G9NBD2M",
            "name": "d7m",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nC+cm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The context is that I want to free up some connections to launch additional markets. But I'm worried that if I \"merge streams\" in this way, ticks may arrive \"slower\", (e.g. in this case GB ticks and AU ticks will be interleaved on the same stream rather than receiving them independently on two streams), or maybe even subject to forced conflation. Obviously you're still at the mercy of the GIL + the fact that flumine is single process, but still. I am imaging a scenario where stream throughput is always the same on Betfair's side, so subscribing to GB+AU on one stream may result in suboptimal delivery of ticks vs 2 streams with GB + AU independently. (just using GB + AU for example sake btw, obviously more concerned about markets that tick heavily in paralell)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1713118693.459829",
        "client_msg_id": "74946f00-ba48-4c0b-8686-ac4850056547",
        "text": "<@U0128E7BEHW> this is absolutley what I do, I was consuming all my 10 connections, but I combined my US, GB and AU horse racing under 1 Flumine instance, with 3 add_strategy's, the first thing each strategy check_market_book does is return False if market not for it....\nI am now running with 6 connections :slightly_smiling_face:\nJust wish I could find a new profitable strategy for the remaining 4 now :man-shrugging: !",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "RtRKX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U0128E7BEHW"
                            },
                            {
                                "type": "text",
                                "text": " this is absolutley what I do, I was consuming all my 10 connections, but I combined my US, GB and AU horse racing under 1 Flumine instance, with 3 add_strategy's, the first thing each strategy check_market_book does is return False if market not for it....\nI am now running with 6 connections "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            },
                            {
                                "type": "text",
                                "text": "\nJust wish I could find a new profitable strategy for the remaining 4 now "
                            },
                            {
                                "type": "emoji",
                                "name": "man-shrugging",
                                "unicode": "1f937-200d-2642-fe0f"
                            },
                            {
                                "type": "text",
                                "text": " !"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1713118706.879759",
        "client_msg_id": "9A76700D-95B5-499D-96E7-6D1048CE7903",
        "text": "Are your strategies that latency sensitive?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "A1Jgj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Are your strategies that latency sensitive?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1713118741.140589",
        "client_msg_id": "0C360EEF-A6BD-4DAC-B606-B27407CAC588",
        "text": "Because I can guarantee the stream will be the quickest part ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Bkp2t",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Because I can guarantee the stream will be the quickest part "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "If you can run win and place together, or match odds, CS and OU as one sub, you can certain run markets that aren't even active at the same time. \n\nBut I run each market\/strategy combo in its own parallel process so mixed feeds aren't as much as an issue as high update rates on one.  You just need to move your hoppers to after the sorter if you can't keep up with the input.. :wink:",
        "files": [
            {
                "id": "F06U1C6E39U",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "UEA14GBRR",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7x7WY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If you can run win and place together, or match odds, CS and OU as one sub, you can certain run markets that aren't even active at the same time. \n\nBut I run each market\/strategy combo in its own parallel process so mixed feeds aren't as much as an issue as high update rates on one.  You just need to move your hoppers to after the sorter if you can't keep up with the input.. "
                            },
                            {
                                "type": "emoji",
                                "name": "wink",
                                "unicode": "1f609"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1713120966.425769",
        "client_msg_id": "9e35f44f-536b-4b94-b555-41f8375033ee",
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW"
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1713125468.880859",
        "client_msg_id": "cd86ab5f-3d3f-4975-9875-520c0363d892",
        "text": "I do horses and dogs for all countries on a cheap single core cloud machine. It's fine.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "U3BW+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I do horses and dogs for all countries on a cheap single core cloud machine. It's fine."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1713125739.287959",
        "client_msg_id": "a8969442-24d5-440c-8ed4-7a03148d0821",
        "text": "<@UEA14GBRR> do you need to have a certain number of CPU cores to run your setup optimally?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nXPpI",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UEA14GBRR"
                            },
                            {
                                "type": "text",
                                "text": " do you need to have a certain number of CPU cores to run your setup optimally?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1713128121.202239",
        "client_msg_id": "82ee428e-4364-4de0-84e6-b86758fd150e",
        "text": "I've just got 2 cores, I guess I mean own thread rather than own process in the traditional sense. C# and the OS takes care of all that anyway, I'm just spawning delegates.  Not that I need to, I'm sat waiting for the next api message for ages anyway. Simple stuff though, I'm not having to go and do anything fancy with each one.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vI3yF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I've just got 2 cores, I guess I mean own thread rather than own process in the traditional sense. C# and the OS takes care of all that anyway, I'm just spawning delegates.  Not that I need to, I'm sat waiting for the next api message for ages anyway. Simple stuff though, I'm not having to go and do anything fancy with each one."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1713128832.559429",
        "client_msg_id": "3966d286-bc0b-47ad-8975-c975cfafee7a",
        "text": "on a typical busy Saturday my AWS instance peaks about 4% CPU ....",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713105962.660909",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HLouk",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "on a typical busy Saturday my AWS instance peaks about 4% CPU ...."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]