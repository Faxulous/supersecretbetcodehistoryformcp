[
    {
        "text": "Hello, I'm new to simulating bets with Flumine and am having problems with a LAY bet at SP. Here's my code:\n\n```client = clients.SimulatedClient()\nframework = FlumineSimulation(client=client)\n\n...\n\norder = trade.create_order(\n    side = \"LAY\",\n    order_type = LimitOrder(price=2, size=10, persistence_type=\"MARKET_ON_CLOSE\"),\n)\nmarket.place_order(order)```\nAs you can see my stake is £10. In my test market the runner BSP is 4.00. Let's say the runner wins, I expect to lose £30. But Flumine says I lost £3.29, treating £10 as the liability.\n\nBased on the attached Betfair docs, this would be correct with a *MarketOnCloseOrder*. But not with a *LimitOrder*: Betfair treats the latter's stake as the stake and not liability.\n\nIs my understanding incorrect?",
        "files": [
            {
                "id": "F06N1NGLZED",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "USWDY5P7G",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "C5xrZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hello, I'm new to simulating bets with Flumine and am having problems with a LAY bet at SP. Here's my code:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "client = clients.SimulatedClient()\nframework = FlumineSimulation(client=client)\n\n...\n\norder = trade.create_order(\n    side = \"LAY\",\n    order_type = LimitOrder(price=2, size=10, persistence_type=\"MARKET_ON_CLOSE\"),\n)\nmarket.place_order(order)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nAs you can see my stake is £10. In my test market the runner BSP is 4.00. Let's say the runner wins, I expect to lose £30. But Flumine says I lost £3.29, treating £10 as the liability.\n\nBased on the attached Betfair docs, this would be correct with a "
                            },
                            {
                                "type": "text",
                                "text": "MarketOnCloseOrder",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". But not with a "
                            },
                            {
                                "type": "text",
                                "text": "LimitOrder",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ": Betfair treats the latter's stake as the stake and not liability.\n\nIs my understanding incorrect?"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1709506739.995599",
        "client_msg_id": "0a856fd7-60c7-40f9-94de-9be6bcf89404",
        "thread_ts": "1709506739.995599",
        "reply_count": 12,
        "reply_users_count": 5,
        "latest_reply": "1709906571.009059",
        "reply_users": [
            "U012XF5CNPN",
            "USWDY5P7G",
            "U02RN7YDRQ9",
            "UUE6E1LA1",
            "UEA14GBRR"
        ],
        "replies": [
            {
                "user": "U012XF5CNPN",
                "ts": "1709535406.816749"
            },
            {
                "user": "USWDY5P7G",
                "ts": "1709536606.932339"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1709560178.400489"
            },
            {
                "user": "USWDY5P7G",
                "ts": "1709561271.498799"
            },
            {
                "user": "U012XF5CNPN",
                "ts": "1709578677.895649"
            },
            {
                "user": "U012XF5CNPN",
                "ts": "1709578962.796909"
            },
            {
                "user": "USWDY5P7G",
                "ts": "1709585450.722369"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1709719646.269199"
            },
            {
                "user": "U012XF5CNPN",
                "ts": "1709720035.683269"
            },
            {
                "user": "U012XF5CNPN",
                "ts": "1709720077.681609"
            },
            {
                "user": "U012XF5CNPN",
                "ts": "1709720123.747539"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1709906571.009059"
            }
        ],
        "is_locked": false,
        "subscribed": false
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1709535406.816749",
        "client_msg_id": "B59EA197-4956-4E36-BE83-0732AFEB082B",
        "text": "Do you want a market order or a limit order that defers to market on close?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1709506739.995599",
        "parent_user_id": "USWDY5P7G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "u90\/A",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Do you want a market order or a limit order that defers to market on close?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "USWDY5P7G",
        "type": "message",
        "ts": "1709536606.932339",
        "client_msg_id": "43D9B7F4-A7C3-4D5A-9CF0-A758D5DBDCE9",
        "text": "My objective is to sumbit a lay order that will get matched at SP, specifying stake and not liability.\n\nSo a limit order, at way lower than current odds, that defers to market on close (i.e. gets matched at SP).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "693b14d0cc42",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-08-29\/2425858826214_693b14d0cc42bdbfb86a_72.jpg",
            "first_name": "Fab",
            "real_name": "Fab",
            "display_name": "Fab",
            "team": "T4G9NBD2M",
            "name": "me1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1709506739.995599",
        "parent_user_id": "USWDY5P7G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HwJLp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "My objective is to sumbit a lay order that will get matched at SP, specifying stake and not liability.\n\nSo a limit order, at way lower than current odds, that defers to market on close (i.e. gets matched at SP)."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]