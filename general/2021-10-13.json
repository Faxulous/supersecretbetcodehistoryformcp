[
    {
        "text": "",
        "files": [
            {
                "id": "F02H5TQ3BK9",
                "created": 1634114586,
                "timestamp": 1634114586,
                "name": "Sin título.py",
                "title": "Sin título",
                "mimetype": "text\/plain",
                "filetype": "python",
                "pretty_type": "Python",
                "user": "U026WRD7SHE",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 4606,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F02H5TQ3BK9\/sin_t__tulo.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F02H5TQ3BK9\/download\/sin_t__tulo.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/U026WRD7SHE\/F02H5TQ3BK9\/sin_t__tulo.py",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F02H5TQ3BK9-b7a425e86f",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/U026WRD7SHE\/F02H5TQ3BK9\/sin_t__tulo.py\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": true,
        "user": "U026WRD7SHE",
        "display_as_bot": false,
        "type": "message",
        "ts": "1634114587.281800",
        "client_msg_id": "277a04f4-1b04-481e-b2c3-5a74d27282af"
    },
    {
        "user": "U026WRD7SHE",
        "type": "message",
        "ts": "1634114692.283400",
        "client_msg_id": "a4ccd37a-fa4e-41d8-ba62-6385e55f2e85",
        "text": "As you can see I have used the \"examplestreaming\" and adapted it to get a snap of the odds for my use. Probably an odd use of the streaming too but seems to do the job other than that difficulty to stop the stream after checking the odds.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "3c4e10ed518c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-10-12\/2597120880820_3c4e10ed518c393d1372_72.jpg",
            "first_name": "",
            "real_name": "Javier Martín Pérez",
            "display_name": "Javier Martín Pérez",
            "team": "T4G9NBD2M",
            "name": "jmartinperez416",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "J7dPj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "As you can see I have used the \"examplestreaming\" and adapted it to get a snap of the odds for my use. Probably an odd use of the streaming too but seems to do the job other than that difficulty to stop the stream after checking the odds."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1634114718.283600",
        "client_msg_id": "276bd538-5cf2-475f-b9db-ec8b4a46d2ae",
        "text": "dont use streaming for this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "n6+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "dont use streaming for this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U026WRD7SHE",
        "type": "message",
        "ts": "1634114945.283800",
        "client_msg_id": "4d9d327e-6954-4617-bde1-6d87bcd32d75",
        "text": "Thanks, I will look for another way",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "3c4e10ed518c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-10-12\/2597120880820_3c4e10ed518c393d1372_72.jpg",
            "first_name": "",
            "real_name": "Javier Martín Pérez",
            "display_name": "Javier Martín Pérez",
            "team": "T4G9NBD2M",
            "name": "jmartinperez416",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fzw",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks, I will look for another way"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1634115333.284700",
        "client_msg_id": "3a3f276f-6d57-40c2-9681-f1d0142bbde3",
        "text": "```for j in datos:\n    market_book = trading.betting.list_market_book(market_filter=..\n    ...```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hZAF",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "for j in datos:\n    market_book = trading.betting.list_market_book(market_filter=..\n    ..."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "white_check_mark",
                "users": [
                    "U026WRD7SHE"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U0154JA98TH",
        "type": "message",
        "ts": "1634133522.299800",
        "client_msg_id": "ae41d311-fe89-4a07-a3a8-99488e816d18",
        "text": "Related to a flumine based question i asked a while back, ive recently got the streamable market limit increased from 200 to 1000 and off the back off advice from <@ULDAVFDRP> kept my market filter wide for my startegy. I then work out which markets to place on using logic inside check_market_book, and in middleware etc beyond the initial strategy set up which specifies the only the event_type=1 and market_type=MATCH_ODDS. I was wondering the best way to manually stop market books being streamed from markets i am not interested in, after framework.run() and prior to them closing automatically at market close. At the moment i am capping the number markets desired for placing to a fixed number currently 20 and then using\n\nself.remove_market(market.market_id)\n\ninside check_market_book to halt the streaming information correlating to these excess markets. However i can still see in a background worker using len(flumine.markets) that there still remains ~600 markets and so I was wondering if im actually correctly removing them, and if im not what is the best way to do so? and best location ie inside middleware, worker, etc as opposed to in check_market_book? Furthermore if i wanted to start up streaming a new market post run() how would i go about this?\n\nThank you!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g04d857ee3ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/04d857ee3ad168a8451932c84c7d0d6d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonathan",
            "real_name": "Jonathan Wadsworth",
            "display_name": "Jono",
            "team": "T4G9NBD2M",
            "name": "jonowads",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Bhf3d",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Related to a flumine based question i asked a while back, ive recently got the streamable market limit increased from 200 to 1000 and off the back off advice from "
                            },
                            {
                                "type": "user",
                                "user_id": "ULDAVFDRP"
                            },
                            {
                                "type": "text",
                                "text": " kept my market filter wide for my startegy. I then work out which markets to place on using logic inside check_market_book, and in middleware etc beyond the initial strategy set up which specifies the only the event_type=1 and market_type=MATCH_ODDS. I was wondering the best way to manually stop market books being streamed from markets i am not interested in, after framework.run() and prior to them closing automatically at market close. At the moment i am capping the number markets desired for placing to a fixed number currently 20 and then using\n\nself.remove_market(market.market_id)\n\ninside check_market_book to halt the streaming information correlating to these excess markets. However i can still see in a background worker using len(flumine.markets) that there still remains ~600 markets and so I was wondering if im actually correctly removing them, and if im not what is the best way to do so? and best location ie inside middleware, worker, etc as opposed to in check_market_book? Furthermore if i wanted to start up streaming a new market post run() how would i go about this?\n\nThank you!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1634133603.300000",
        "client_msg_id": "1ec05aa3-5656-4b92-98b6-15e8b805b2d9",
        "text": "don't?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1634133603.300000",
        "reply_count": 1,
        "reply_users_count": 1,
        "latest_reply": "1634133654.300300",
        "reply_users": [
            "UBS7QANF3"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1634133654.300300"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1634133654.300300",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "88OCw",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "don't?"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "100",
                "users": [
                    "UBS7QANF3",
                    "U9JHLMZB4"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1634133654.300300",
        "bot_id": "B024J50BUCC",
        "text": "correct",
        "team": "T4G9NBD2M",
        "bot_profile": {
            "id": "B024J50BUCC",
            "app_id": "A0F827J2C",
            "name": "giphy",
            "icons": {
                "image_36": "https:\/\/a.slack-edge.com\/dc483\/img\/plugins\/giphy\/service_72.png",
                "image_48": "https:\/\/a.slack-edge.com\/dc483\/img\/plugins\/giphy\/service_48.png",
                "image_72": "https:\/\/a.slack-edge.com\/dc483\/img\/plugins\/giphy\/service_72.png"
            },
            "deleted": false,
            "updated": 1623151074,
            "team_id": "T4G9NBD2M"
        },
        "thread_ts": "1634133603.300000",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "image",
                "block_id": "Rx4vQ",
                "image_url": "https:\/\/media0.giphy.com\/media\/26tknCqiJrBQG6bxC\/giphy.gif?cid=6104955e643c0dd3202826878573fe52fcb8d79d094cf159&rid=giphy.gif&ct=g",
                "alt_text": "correct",
                "title": {
                    "type": "plain_text",
                    "text": "correct",
                    "emoji": true
                },
                "fallback": "480x446px image",
                "image_width": 480,
                "image_height": 446,
                "image_bytes": 1735537,
                "is_animated": true
            },
            {
                "type": "context",
                "block_id": "D=ij",
                "elements": [
                    {
                        "type": "image",
                        "image_url": "https:\/\/a.slack-edge.com\/dc483\/img\/plugins\/giphy\/service_32.png",
                        "alt_text": "giphy logo"
                    },
                    {
                        "type": "mrkdwn",
                        "text": "Posted using \/giphy | GIF by <https:\/\/giphy.com\/election2016\/|Election 2016>",
                        "verbatim": false
                    }
                ]
            }
        ]
    },
    {
        "user": "U0154JA98TH",
        "type": "message",
        "ts": "1634134638.301100",
        "client_msg_id": "f4f33084-c679-4855-a276-3620bc6c13f7",
        "text": "should streaming ~1000 markets but only actively running pmb on 20 have any noticeable effect on the performance of the strat on these 20? I know <@U4H19D1D2> you have mentioned before that number of markets shouldnt noticebly effect performance but now i am streaming 2 orders of magnitude more markets than last month i wanted to be certain since im still wrestling with latency issues ~0.5-1 seconds, even when all that is occurring in process_market_book is a log message",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g04d857ee3ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/04d857ee3ad168a8451932c84c7d0d6d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonathan",
            "real_name": "Jonathan Wadsworth",
            "display_name": "Jono",
            "team": "T4G9NBD2M",
            "name": "jonowads",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "BZb8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "should streaming ~1000 markets but only actively running pmb on 20 have any noticeable effect on the performance of the strat on these 20? I know "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " you have mentioned before that number of markets shouldnt noticebly effect performance but now i am streaming 2 orders of magnitude more markets than last month i wanted to be certain since im still wrestling with latency issues ~0.5-1 seconds, even when all that is occurring in process_market_book is a log message"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1634135107.302100",
        "client_msg_id": "69e4880c-f642-44ed-884a-376a753c3b7e",
        "text": "the heavy CPU is done in bflw so removing from flumine doesn't do much and as you are finding out anything remove gets re-added as it gets pushed from bflw. The latency issues will probably be due to some lazy code?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "RDH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the heavy CPU is done in bflw so removing from flumine doesn't do much and as you are finding out anything remove gets re-added as it gets pushed from bflw. The latency issues will probably be due to some lazy code?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "channel_join",
        "user": "U02HPTBLCJY",
        "text": "<@U02HPTBLCJY> has joined the channel",
        "type": "message",
        "ts": "1634135190.302200"
    },
    {
        "subtype": "channel_join",
        "user": "U02HL9WC9NZ",
        "text": "<@U02HL9WC9NZ> has joined the channel",
        "type": "message",
        "ts": "1634149060.303300"
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1634193438.310400",
        "client_msg_id": "beebbcc1-23be-4c83-a3a0-0ffcf599512d",
        "text": "What's the expected behaviour of\n`lookup = (market.market_id, runner.selection_id, runner.handicap)\nexposure = market.blotter.selection_exposure(self, lookup)`?\nI've only just realised that where I have bets on multiple runners, the exposures don't reduce. i.e. if I've layed 2 runners £5 @ 2.0, the exposures are £5 on each runner rather than £0. I presume that is intended, but just wanted to clarify? Presumably, to get the actual exposure at market level, I'd need to calculate it myself from the blotter?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JMaSz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What's the expected behaviour of\n"
                            },
                            {
                                "type": "text",
                                "text": "lookup = (market.market_id, runner.selection_id, runner.handicap)\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "exposure = market.blotter.selection_exposure(self, lookup)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "?\nI've only just realised that where I have bets on multiple runners, the exposures don't reduce. i.e. if I've layed 2 runners £5 @ 2.0, the exposures are £5 on each runner rather than £0. I presume that is intended, but just wanted to clarify? Presumably, to get the actual exposure at market level, I'd need to calculate it myself from the blotter?"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]