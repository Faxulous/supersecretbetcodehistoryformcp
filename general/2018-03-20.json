[
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1521530461.000231",
        "client_msg_id": "A5180E56-111D-4B53-A6B8-07122BECD142",
        "text": "<@U8RT48D8X> when using the stream you can’t just thread it off and forgot about it, you need to handle any errors and resubscribe or subscribe again if required ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6k=O",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U8RT48D8X"
                            },
                            {
                                "type": "text",
                                "text": " when using the stream you can’t just thread it off and forgot about it, you need to handle any errors and resubscribe or subscribe again if required"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1521530582.000009",
        "client_msg_id": "1E769CB6-D5BA-4ED7-B82F-CEC4E8AD28A5",
        "text": "Here is an example of one pattern <https:\/\/betfairlightweight.slack.com\/archives\/C4HL6EZTQ\/p1505305250000059>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "from_url": "https:\/\/betfairlightweight.slack.com\/archives\/C4HL6EZTQ\/p1496411076282793",
                "fallback": "[June 2nd, 2017 6:44 AM] agberk: The main read loop is in my own thread\n```\ndef betfair_stream_run(config, order_queue):\n    betfair_api = betfairlightweight.APIClient(\n        config['betfair_username'],\n        config['betfair_password'],\n        config['betfair_application_key'],\n        config['betfair_certificate_dir'])\n\n    while True:\n        try:\n            betfair_api.login()\n            betfair_stream_socket = betfair_api.streaming.create_stream(\n                unique_id=1,\n                description=config['description'],\n                listener=StreamListener(output_queue=order_queue)\n            )\n            betfair_stream_socket.subscribe_to_orders(\n                unique_id=12345,\n            )\n            betfair_stream_socket.start()\n        except betfairlightweight.exceptions.SocketError:\n            logger.warning('SocketError in betfair stream thread.')\n            time.sleep(5.0)\n        except betfairlightweight.exceptions.APIError as e:\n            logger.error(e, exc_info=True)\n            time.sleep(5.0)\n```",
                "ts": "1496411076.282793",
                "author_id": "U4H3EEV45",
                "author_subname": "Aaron Berk",
                "channel_id": "C4HL6EZTQ",
                "is_msg_unfurl": true,
                "text": "The main read loop is in my own thread\n```\ndef betfair_stream_run(config, order_queue):\n    betfair_api = betfairlightweight.APIClient(\n        config['betfair_username'],\n        config['betfair_password'],\n        config['betfair_application_key'],\n        config['betfair_certificate_dir'])\n\n    while True:\n        try:\n            betfair_api.login()\n            betfair_stream_socket = betfair_api.streaming.create_stream(\n                unique_id=1,\n                description=config['description'],\n                listener=StreamListener(output_queue=order_queue)\n            )\n            betfair_stream_socket.subscribe_to_orders(\n                unique_id=12345,\n            )\n            betfair_stream_socket.start()\n        except betfairlightweight.exceptions.SocketError:\n            logger.warning('SocketError in betfair stream thread.')\n            time.sleep(5.0)\n        except betfairlightweight.exceptions.APIError as e:\n            logger.error(e, exc_info=True)\n            time.sleep(5.0)\n```",
                "author_name": "Aaron Berk",
                "author_link": "https:\/\/betfairlightweight.slack.com\/team\/U4H3EEV45",
                "author_icon": "https:\/\/secure.gravatar.com\/avatar\/ea8143e60fb603cad63a14bfd181f72d.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0025-48.png",
                "mrkdwn_in": [
                    "text"
                ],
                "id": 1,
                "footer": "Slack conversation"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "o1A",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Here is an example of one pattern "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/betfairlightweight.slack.com\/archives\/C4HL6EZTQ\/p1505305250000059"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1521530658.000123",
        "client_msg_id": "9A9ECE3E-B55B-48C0-86BC-DF55263B5CBF",
        "text": "Or to resubscribe instead: <https:\/\/github.com\/liampauling\/flumine\/blob\/master\/flumine\/flumine.py#L77>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "liampauling\/flumine",
                "title_link": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/flumine\/flumine.py#L77",
                "text": "flumine - flūmine - Betfair data record framework utilising streaming to create a simple data recorder",
                "fallback": "GitHub: liampauling\/flumine",
                "from_url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/flumine\/flumine.py#L77",
                "thumb_url": "https:\/\/avatars2.githubusercontent.com\/u\/12016537?s=400&v=4",
                "thumb_width": 250,
                "thumb_height": 250,
                "service_icon": "https:\/\/a.slack-edge.com\/bfaba\/img\/unfurl_icons\/github.png",
                "id": 1
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+xJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Or to resubscribe instead: "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/flumine\/flumine.py#L77"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1521530816.000262",
        "client_msg_id": "EC6A2703-8CAC-44B1-BE2C-4CC70B273343",
        "text": "<@U7RFUGUJG> I think that is the only way, they added race type recently but that only tells you if it’s a Flat\/Jumps\/NHF ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EtL6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U7RFUGUJG"
                            },
                            {
                                "type": "text",
                                "text": " I think that is the only way, they added race type recently but that only tells you if it’s a Flat\/Jumps\/NHF"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U7RFUGUJG",
        "type": "message",
        "ts": "1521552550.000580",
        "text": "cheers <@U4H19D1D2>. That's a pitty.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g526d4cbf860",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/0526d4cbf860475b0e16268d3042ab13.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png",
            "first_name": "",
            "real_name": "Geall Cliste",
            "display_name": "GC",
            "team": "T4G9NBD2M",
            "name": "geallcliste",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WsWWu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "cheers "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": ". That's a pitty."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U7RFUGUJG",
        "type": "message",
        "ts": "1521552575.000211",
        "text": "Yeah - had been checking out raceType and noticed that.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g526d4cbf860",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/0526d4cbf860475b0e16268d3042ab13.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png",
            "first_name": "",
            "real_name": "Geall Cliste",
            "display_name": "GC",
            "team": "T4G9NBD2M",
            "name": "geallcliste",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Kw+QO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah - had been checking out raceType and noticed that."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U92CASP1B",
        "type": "message",
        "ts": "1521553647.000116",
        "text": "I used the historical api and  can get last_price_traded from there, but not when doing live stream, same code, am I missing somehitng?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g374352c822f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a374352c822fa856c4cfdd782bbb8669.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonatan",
            "real_name": "Jonatan",
            "display_name": "Jonatan (skyw)",
            "team": "T4G9NBD2M",
            "name": "almen.jonatan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vNwH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I used the historical api and  can get last_price_traded from there, but not when doing live stream, same code, am I missing somehitng?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U92CASP1B",
        "type": "message",
        "ts": "1521553899.000255",
        "text": "Saw the filtering option in the docs!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g374352c822f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a374352c822fa856c4cfdd782bbb8669.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonatan",
            "real_name": "Jonatan",
            "display_name": "Jonatan (skyw)",
            "team": "T4G9NBD2M",
            "name": "almen.jonatan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=3h7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Saw the filtering option in the docs!"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]