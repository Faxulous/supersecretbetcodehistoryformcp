[
    {
        "user": "U03TJKFLE8K",
        "type": "message",
        "ts": "1666780069.687559",
        "client_msg_id": "80859a47-8c14-4a89-acdf-4055e829f7c0",
        "text": "<@U9JHLMZB4> i definitley need to use node so i'll probably have to incorporate sockets or something to communicate between the two processes",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4f9b48155f69",
            "image_72": "https:\/\/avatars.slack-edge.com\/2022-08-13\/3936662198499_4f9b48155f6979e10ed0_72.png",
            "first_name": "pos",
            "real_name": "pos",
            "display_name": "Pos",
            "team": "T4G9NBD2M",
            "name": "posbets",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1665276033.691569",
        "parent_user_id": "U03TJKFLE8K",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WAr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U9JHLMZB4"
                            },
                            {
                                "type": "text",
                                "text": " i definitley need to use node so i'll probably have to incorporate sockets or something to communicate between the two processes"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0155J92A7Q",
        "type": "message",
        "ts": "1666796383.576319",
        "edited": {
            "user": "U0155J92A7Q",
            "ts": "1666797429.000000"
        },
        "client_msg_id": "1cb81fe0-b759-4b57-8d44-87b0d74e1119",
        "text": "Hi all. I'm trying to separate results from 2 strategies that bet in the same markets. How do you deal with commission?\n\nI find that when calling `list_cleared_orders` with different `customer_strategy_refs`, the `profit` column is correct but the `commission` column considers commission taking into account bets placed by other strategy_refs.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gde8c5d51af5",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/de8c5d51af54a5ac7b501f416ddb262c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png",
            "first_name": "",
            "real_name": "Jorge",
            "display_name": "Jorge",
            "team": "T4G9NBD2M",
            "name": "jgarciam95",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "T1i",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi all. I'm trying to separate results from 2 strategies that bet in the same markets. How do you deal with commission?\n\nI find that when calling "
                            },
                            {
                                "type": "text",
                                "text": "list_cleared_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " with different "
                            },
                            {
                                "type": "text",
                                "text": "customer_strategy_refs",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", the "
                            },
                            {
                                "type": "text",
                                "text": "profit",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " column is correct but the "
                            },
                            {
                                "type": "text",
                                "text": "commission",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " column considers commission taking into account bets placed by other strategy_refs."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0155J92A7Q",
        "type": "message",
        "ts": "1666797606.941999",
        "client_msg_id": "f11dcab4-2013-4140-95a8-8b11bf944a30",
        "text": "For example, in the same market:\n• Calling `list_cleared_orders`  with strategy A gives profit=32.35, commission=0.06\n• Calling `list_cleared_orders`  with strategy B gives profit=-29.46, commission=0.06. But here commission should be equal to 0?\nIs there any way of separating them or do I have to calculate the commission myself?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gde8c5d51af5",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/de8c5d51af54a5ac7b501f416ddb262c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png",
            "first_name": "",
            "real_name": "Jorge",
            "display_name": "Jorge",
            "team": "T4G9NBD2M",
            "name": "jgarciam95",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=rM3Y",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "For example, in the same market:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "Calling "
                                    },
                                    {
                                        "type": "text",
                                        "text": "list_cleared_orders",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": "  with strategy A gives profit=32.35, commission=0.06"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "Calling "
                                    },
                                    {
                                        "type": "text",
                                        "text": "list_cleared_orders",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": "  with strategy B gives profit=-29.46, commission=0.06. But here commission should be equal to 0?"
                                    }
                                ]
                            }
                        ],
                        "style": "bullet",
                        "indent": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nIs there any way of separating them or do I have to calculate the commission myself?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1666801235.803279",
        "edited": {
            "user": "U9JHLMZB4",
            "ts": "1666801285.000000"
        },
        "client_msg_id": "e7b12d35-298b-47ae-9561-0c97bf2a9995",
        "text": "You will have to calculate it yourself, as Betfair calculates it only at market level and has no interest in the strategies you used under the hood.\n\nFrom earlier conversations here though I suspect that most people would calculate the commission for strategy A as 0.65 and record the other 0.59 as bonus profit from running the two strategies together rather than implicitly adding it into the profit for strategy A.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "sj1l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You will have to calculate it yourself, as Betfair calculates it only at market level and has no interest in the strategies you used under the hood.\n\nFrom earlier conversations here though I suspect that most people would calculate the commission for strategy A as 0.65 and record the other 0.59 as bonus profit from running the two strategies together rather than implicitly adding it into the profit for strategy A."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0155J92A7Q",
        "type": "message",
        "ts": "1666802847.679929",
        "client_msg_id": "9dd0cb74-9339-4d25-bc09-77e9b48b5e27",
        "text": "Okay, thanks, luckily the calculation is simple :smile:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gde8c5d51af5",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/de8c5d51af54a5ac7b501f416ddb262c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png",
            "first_name": "",
            "real_name": "Jorge",
            "display_name": "Jorge",
            "team": "T4G9NBD2M",
            "name": "jgarciam95",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lTgE8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Okay, thanks, luckily the calculation is simple "
                            },
                            {
                                "type": "emoji",
                                "name": "smile",
                                "unicode": "1f604"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0155J92A7Q",
        "type": "message",
        "ts": "1666803056.236339",
        "client_msg_id": "93abfc7f-576b-4aef-9865-89bd0d51991e",
        "text": "That's interesting, I could not find those conversations. But it makes sense that the more strategies you have, the less you have to worry about commission",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gde8c5d51af5",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/de8c5d51af54a5ac7b501f416ddb262c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png",
            "first_name": "",
            "real_name": "Jorge",
            "display_name": "Jorge",
            "team": "T4G9NBD2M",
            "name": "jgarciam95",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "YBzE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That's interesting, I could not find those conversations. But it makes sense that the more strategies you have, the less you have to worry about commission"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]