[
    {
        "user": "U03FVSE9R9V",
        "type": "message",
        "ts": "1696850267.603579",
        "client_msg_id": "b56d8ecc-b534-48df-9da9-dbd524883565",
        "text": "<@UEA14GBRR> I think, traded volume per price would be more useful. How do I get it? Tried to find that in the docs but couldn't exactly find it.\n<@U4H19D1D2> Should I call `market.blotter.live_orders` ? and in which method `process_market_book` or `process_orders` . `market` object is available in both methods. Moreover, `process_market_book` is called once `check_market_book` returns `True` and for any subsequent changes to the market. However, I am unsure what triggers the `process_orders`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "acd1200842ce",
            "image_72": "https:\/\/avatars.slack-edge.com\/2022-05-20\/3551586695061_acd1200842ce80574543_72.png",
            "first_name": "Muhammad",
            "real_name": "Muhammad Adeel Zahid",
            "display_name": "Muhammad Adeel Zahid",
            "team": "T4G9NBD2M",
            "name": "zahidmadeel",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Gtff1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UEA14GBRR"
                            },
                            {
                                "type": "text",
                                "text": " I think, traded volume per price would be more useful. How do I get it? Tried to find that in the docs but couldn't exactly find it.\n"
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " Should I call "
                            },
                            {
                                "type": "text",
                                "text": "market.blotter.live_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " ? and in which method "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " or "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " . "
                            },
                            {
                                "type": "text",
                                "text": "market",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " object is available in both methods. Moreover, "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is called once "
                            },
                            {
                                "type": "text",
                                "text": "check_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " returns "
                            },
                            {
                                "type": "text",
                                "text": "True",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and for any subsequent changes to the market. However, I am unsure what triggers the "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1696850680.126119",
        "client_msg_id": "c02441ac-0be6-4c8b-bda5-59cda672938b",
        "text": "`process_orders` is triggered on any order update through the stream or every 0.25s if there are live orders.\n\nThe <https:\/\/betcode-org.github.io\/flumine\/markets\/|blotter> is in the `Market` object and you can use whenever you want",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.github.io\/flumine\/markets\/",
                "service_icon": "https:\/\/betcode-org.github.io\/flumine\/images\/logo.png",
                "id": 1,
                "original_url": "https:\/\/betcode-org.github.io\/flumine\/markets\/",
                "fallback": "Markets - flumine",
                "text": "Betting trading framework",
                "title": "Markets - flumine",
                "title_link": "https:\/\/betcode-org.github.io\/flumine\/markets\/",
                "service_name": "betcode-org.github.io"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jotKZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is triggered on any order update through the stream or every 0.25s if there are live orders.\n\nThe "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.github.io\/flumine\/markets\/",
                                "text": "blotter"
                            },
                            {
                                "type": "text",
                                "text": " is in the "
                            },
                            {
                                "type": "text",
                                "text": "Market",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " object and you can use whenever you want"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03FVSE9R9V",
        "type": "message",
        "ts": "1696857011.610939",
        "client_msg_id": "d167b5ba-5d9d-4c70-a069-df63849eb8d1",
        "text": "Ok. Below are my strategy parameters\n```strategy = LayStrategy(\n    market_filter=streaming_market_filter(\n        event_type_ids=[\"7\"], # Horse racing\n        country_codes=[\"GB\", 'IE'],\n        market_types=[\"WIN\"], # Win Markets\n    )\n)\n\nframework.add_strategy(strategy)\n\nframework.run()```\nand this is my `process_orders` function in `LayStrategy`\n```def process_orders(self, market: Market, orders: list) -&gt; None:\n    print('process orders')\n    if orders:\n        print(orders)\n    aorders = [o for o in market.blotter.live_orders]\n    if aorders:\n        print('process order')\n        print(aorders)\n    for order in orders:\n        print(order)```\nBut not even the first statement is being called (`print('process orders')`. I don't know what is wrong with this code.  Nothing shows up related to orders",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "acd1200842ce",
            "image_72": "https:\/\/avatars.slack-edge.com\/2022-05-20\/3551586695061_acd1200842ce80574543_72.png",
            "first_name": "Muhammad",
            "real_name": "Muhammad Adeel Zahid",
            "display_name": "Muhammad Adeel Zahid",
            "team": "T4G9NBD2M",
            "name": "zahidmadeel",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pScCx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ok. Below are my strategy parameters\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "strategy = LayStrategy(\n    market_filter=streaming_market_filter(\n        event_type_ids=[\"7\"], # Horse racing\n        country_codes=[\"GB\", 'IE'],\n        market_types=[\"WIN\"], # Win Markets\n    )\n)\n\nframework.add_strategy(strategy)\n\nframework.run()"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "and this is my "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " function in "
                            },
                            {
                                "type": "text",
                                "text": "LayStrategy",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def process_orders(self, market: Market, orders: list) -> None:\n    print('process orders')\n    if orders:\n        print(orders)\n    aorders = [o for o in market.blotter.live_orders]\n    if aorders:\n        print('process order')\n        print(aorders)\n    for order in orders:\n        print(order)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "But not even the first statement is being called ("
                            },
                            {
                                "type": "text",
                                "text": "print('process orders')",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". I don't know what is wrong with this code.  Nothing shows up related to orders"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1696857873.906469",
        "client_msg_id": "570b6706-c5f9-4d66-8d5b-67cdf2b4516a",
        "text": "Have you actually placed any orders since starting the instance?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Wvnv3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Have you actually placed any orders since starting the instance?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03FVSE9R9V",
        "type": "message",
        "ts": "1696858297.695539",
        "client_msg_id": "ca5643ac-9d18-49c5-b4b0-f4a7e86220e6",
        "text": "No. I am trying to first analyze the orders placed in the market. I was going through <https:\/\/github.com\/betcode-org\/flumine\/tree\/master\/examples|examples> and it appears that `process_orders` will only be called for my own orders. However, I tried to get the overall orders or trades as suggested by <@UEA14GBRR> in `process_market_book` but did not succeed.\n```def process_market_book(self, market: Market, market_book: MarketBook) -&gt; None:\n\n    orders = [o for o in market.blotter.live_orders]\n    if orders:\n        print('Process market book')\n        print(orders)\n    for runner in market_book.runners:\n        r_context = self.get_runner_context(market.market_id, runner.selection_id, runner.handicap)\n        trades = [t for t in r_context.trades]\n        live_trads = r_context.live_trades\n        if trades or live_trads:\n            print(\"Trades = \", trades)\n            print(\"Live Trades = \", live_trads)```\nNothing shows up here either",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "acd1200842ce",
            "image_72": "https:\/\/avatars.slack-edge.com\/2022-05-20\/3551586695061_acd1200842ce80574543_72.png",
            "first_name": "Muhammad",
            "real_name": "Muhammad Adeel Zahid",
            "display_name": "Muhammad Adeel Zahid",
            "team": "T4G9NBD2M",
            "name": "zahidmadeel",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ttHO7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "No. I am trying to first analyze the orders placed in the market. I was going through "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/tree\/master\/examples",
                                "text": "examples"
                            },
                            {
                                "type": "text",
                                "text": " and it appears that "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " will only be called for my own orders. However, I tried to get the overall orders or trades as suggested by "
                            },
                            {
                                "type": "user",
                                "user_id": "UEA14GBRR"
                            },
                            {
                                "type": "text",
                                "text": " in "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " but did not succeed.\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def process_market_book(self, market: Market, market_book: MarketBook) -> None:\n\n    orders = [o for o in market.blotter.live_orders]\n    if orders:\n        print('Process market book')\n        print(orders)\n    for runner in market_book.runners:\n        r_context = self.get_runner_context(market.market_id, runner.selection_id, runner.handicap)\n        trades = [t for t in r_context.trades]\n        live_trads = r_context.live_trades\n        if trades or live_trads:\n            print(\"Trades = \", trades)\n            print(\"Live Trades = \", live_trads)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Nothing shows up here either"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1696858569.650199",
        "client_msg_id": "a8021343-a962-4080-96da-50c1b666ff12",
        "text": "So have you read any of the betfair docs in terms of the data that is supplied within the MarketBook?\n\nFor example traded volume is in `runner.ex.traded_volume`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VAIwc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So have you read any of the betfair docs in terms of the data that is supplied within the MarketBook?\n\nFor example traded volume is in "
                            },
                            {
                                "type": "text",
                                "text": "runner.ex.traded_volume",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U03FVSE9R9V"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U03FVSE9R9V",
        "type": "message",
        "ts": "1696861320.651059",
        "client_msg_id": "b7727f9c-e2e0-41e8-bc10-1726feb7f793",
        "text": "Honestly, no. I was just going through the flumine code and seeing if I could access what I needed.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "acd1200842ce",
            "image_72": "https:\/\/avatars.slack-edge.com\/2022-05-20\/3551586695061_acd1200842ce80574543_72.png",
            "first_name": "Muhammad",
            "real_name": "Muhammad Adeel Zahid",
            "display_name": "Muhammad Adeel Zahid",
            "team": "T4G9NBD2M",
            "name": "zahidmadeel",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PSG6p",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Honestly, no. I was just going through the flumine code and seeing if I could access what I needed."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1696861692.681939",
        "client_msg_id": "ee4e783f-8eb0-42d7-a926-7138d8a8e8bf",
        "text": "Run it under debug with some breakpoints and explore the structure and field contents of `market` and `market_book` - it makes a lot more sense when populated with real data than trying to unravel the sources. Step it through and see what happens with different packets as well.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "qV7iW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Run it under debug with some breakpoints and explore the structure and field contents of "
                            },
                            {
                                "type": "text",
                                "text": "market ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "and "
                            },
                            {
                                "type": "text",
                                "text": "market_book ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "- it makes a lot more sense when populated with real data than trying to unravel the sources. Step it through and see what happens with different packets as well."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2",
                    "U03FVSE9R9V"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "U03FVSE9R9V",
        "type": "message",
        "ts": "1696863935.670279",
        "client_msg_id": "da76b5f7-f410-4421-9b1a-8a74879a3e3d",
        "text": "Ok. I was going through the Betfair streaming API and it appears that it is not possible to get orders as they are placed on the market. However, traded data is available with price and size. Can someone confirm\/deny this conjecture, please? And yes, I was able to access the traded volume through `runner.ex.traded_volume` as suggested by <@U4H19D1D2>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "acd1200842ce",
            "image_72": "https:\/\/avatars.slack-edge.com\/2022-05-20\/3551586695061_acd1200842ce80574543_72.png",
            "first_name": "Muhammad",
            "real_name": "Muhammad Adeel Zahid",
            "display_name": "Muhammad Adeel Zahid",
            "team": "T4G9NBD2M",
            "name": "zahidmadeel",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1696578021.313699",
        "parent_user_id": "U03FVSE9R9V",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "aL5GJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ok. I was going through the Betfair streaming API and it appears that it is not possible to get orders as they are placed on the market. However, traded data is available with price and size. Can someone confirm\/deny this conjecture, please? And yes, I was able to access the traded volume through "
                            },
                            {
                                "type": "text",
                                "text": "runner.ex.traded_volume",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as suggested by "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]