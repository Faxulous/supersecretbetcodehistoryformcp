[
    {
        "user": "U0322P0CK0E",
        "type": "message",
        "ts": "1668085771.760809",
        "client_msg_id": "b5f43b5f-1448-458d-93ec-1a37b4d64ab9",
        "text": "Hi guys, I'm trying to run a strategy where after an order is matched u would like to update a value e.g. if my back bet gets matched then update my probability. What's the best way to do this? I will have multiple limit orders at once so I just want a code of chunk to execute when one of the orders get matched I've been looking at\n `_process_market_orders`\nBut not sure if it's the right way to go",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ab1918814707",
            "image_72": "https:\/\/avatars.slack-edge.com\/2022-07-31\/3867647231206_ab191881470773932048_72.jpg",
            "first_name": "Vincent",
            "real_name": "Vincent Lim",
            "display_name": "Guy Incognito",
            "team": "T4G9NBD2M",
            "name": "nelsonmathsspecialist",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1668085771.760809",
        "reply_count": 2,
        "reply_users_count": 1,
        "latest_reply": "1668086036.749189",
        "reply_users": [
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1668086007.949029"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1668086036.749189"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1668086036.749189",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iXzA1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi guys, I'm trying to run a strategy where after an order is matched u would like to update a value e.g. if my back bet gets matched then update my probability. What's the best way to do this? I will have multiple limit orders at once so I just want a code of chunk to execute when one of the orders get matched I've been looking at\n "
                            },
                            {
                                "type": "text",
                                "text": "_process_market_orders\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "But not sure if it's the right way to go"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1668086007.949029",
        "client_msg_id": "69b4b464-16be-4ef2-a586-eddfb95ae730",
        "text": "Some people use `process_market_book` and some use `process_orders` I am not sure what `_process_market_orders` is tbh but best practice is not to touch private methods",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1668085771.760809",
        "parent_user_id": "U0322P0CK0E",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NBQL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Some people use "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and some use "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " I am not sure what "
                            },
                            {
                                "type": "text",
                                "text": "_process_market_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is tbh but best practice is not to touch private methods"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1668086036.749189",
        "client_msg_id": "ac9cea55-7059-4022-a171-e1113da6420e",
        "text": "in your case `process_orders` is the most logical and store any data in `Strategy.context` or `Market.context`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1668085771.760809",
        "parent_user_id": "U0322P0CK0E",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "v3G9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "in your case "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is the most logical and store any data in "
                            },
                            {
                                "type": "text",
                                "text": "Strategy.context",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " or "
                            },
                            {
                                "type": "text",
                                "text": "Market.context",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03T739JSTZ",
        "type": "message",
        "ts": "1668091362.354849",
        "client_msg_id": "3b1e230a-a1c4-43f4-9bdf-911b468adc94",
        "text": "Hi Liam, another question if I may: is it possible to get the countryCode too? Thanks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g4e9a37b8c27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/4e9a37b8c271459be2dfd823961ccab6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Andy",
            "real_name": "Andy Bason",
            "display_name": "Andy Bason",
            "team": "T4G9NBD2M",
            "name": "andybason8",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1667900386.841049",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "k2nu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi Liam, another question if I may: is it possible to get the countryCode too? Thanks"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1668093062.811239",
        "client_msg_id": "36939183-488f-46b1-81aa-bd57a2dc1e1d",
        "text": "```market_def.country_code```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1667900386.841049",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "C9Dr",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "market_def.country_code"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U03T739JSTZ"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U03T739JSTZ",
        "type": "message",
        "ts": "1668097748.573829",
        "client_msg_id": "718ac953-438e-4a42-bad7-693fa2db3b27",
        "text": "Thanks again Liam",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g4e9a37b8c27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/4e9a37b8c271459be2dfd823961ccab6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Andy",
            "real_name": "Andy Bason",
            "display_name": "Andy Bason",
            "team": "T4G9NBD2M",
            "name": "andybason8",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1667900386.841049",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "W5vP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks again Liam"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1668134587.493229",
        "edited": {
            "user": "U04980ZT6UX",
            "ts": "1668135073.000000"
        },
        "client_msg_id": "a5dc321b-e1fe-460c-a2d2-c7f420ace54e",
        "text": "*AVOID DUPLICATED ORDERS*\nHow does flumine deals with avoiding duplicated orders? Say that my strategy always keeps a single bid and lay on the best levels of the orderbook. If I implement this logic (target orders generation and placement) in `process_market_book` , what will happen if I get a new market_update before betfair sends a message with my open orders to the websocket acknowledging that the orders have been placed? Example: I place both back and lays at the top of the orderbook at time T0, I receive another book update at time T1 and at time T2 my open orders are updated once the websocket receives my orders from betfair. Is is possible that in between T1 and T2 I place duplicated orders? As in this interval (T1-T2) I will not have acknowledged the open orders that I submitted at T0 just yet? Any help is enormously appreciated.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1668134587.493229",
        "reply_count": 3,
        "reply_users_count": 2,
        "latest_reply": "1668394429.132469",
        "reply_users": [
            "U04980ZT6UX",
            "U016TGY3676"
        ],
        "replies": [
            {
                "user": "U04980ZT6UX",
                "ts": "1668134667.525139"
            },
            {
                "user": "U016TGY3676",
                "ts": "1668205596.963199"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1668394429.132469"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0d=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "AVOID DUPLICATED ORDERS",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nHow does flumine deals with avoiding duplicated orders? Say that my strategy always keeps a single bid and lay on the best levels of the orderbook. If I implement this logic (target orders generation and placement) in "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , what will happen if I get a new market_update before betfair sends a message with my open orders to the websocket acknowledging that the orders have been placed? Example: I place both back and lays at the top of the orderbook at time T0, I receive another book update at time T1 and at time T2 my open orders are updated once the websocket receives my orders from betfair. Is is possible that in between T1 and T2 I place duplicated orders? As in this interval (T1-T2) I will not have acknowledged the open orders that I submitted at T0 just yet? Any help is enormously appreciated."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1668134667.525139",
        "client_msg_id": "8e8f6331-0d60-42a4-bfe4-3691ce0afd9f",
        "text": "I couldn't find any logic in the library either waiting for the order to be received or updating the open orders internally (instead of waiting for the exchange to send it through the websockets)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1668134587.493229",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Yx+2p",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I couldn't find any logic in the library either waiting for the order to be received or updating the open orders internally (instead of waiting for the exchange to send it through the websockets)"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]