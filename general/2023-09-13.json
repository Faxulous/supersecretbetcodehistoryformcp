[
    {
        "user": "U02TVNZQDPV",
        "type": "message",
        "ts": "1694612767.286409",
        "client_msg_id": "d929333b-eecd-41d9-b585-3c39a4c21844",
        "text": "This is a basic question but I'm a self-taught beginner and can't work it out. I moved my scripts to a vps and they worked as normal for the first few days before returning a \"ConnectionResetError: [WinError 10054] An existing connection was forcibly closed by the remote host\" error at login. Betfair's support have asked me for the json request and the response. This is where I'm stuck. I'm using trading.login_interactive() to login. How do I get the json request\/response? Thanks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge82f91f3690",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e82f91f36900aec46a2097987592769d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0020-72.png",
            "first_name": "rob",
            "real_name": "rob smith",
            "display_name": "rob smith",
            "team": "T4G9NBD2M",
            "name": "rob51852",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1694612767.286409",
        "reply_count": 2,
        "reply_users_count": 2,
        "latest_reply": "1694613453.391359",
        "reply_users": [
            "U4H19D1D2",
            "U02TVNZQDPV"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1694613152.107529"
            },
            {
                "user": "U02TVNZQDPV",
                "ts": "1694613453.391359"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1694613453.391359",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "RuCw",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This is a basic question but I'm a self-taught beginner and can't work it out. I moved my scripts to a vps and they worked as normal for the first few days before returning a \"ConnectionResetError: [WinError 10054] An existing connection was forcibly closed by the remote host\" error at login. Betfair's support have asked me for the json request and the response. This is where I'm stuck. I'm using trading.login_interactive() to login. How do I get the json request\/response? Thanks"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1694613152.107529",
        "client_msg_id": "2c809ad2-cf9b-46df-9b4c-bea90a0bb4d4",
        "text": "Add this to the top of your script and you will get lots\n\n```import logging\nfrom http.client import HTTPConnection\n\nHTTPConnection.debuglevel = 1\nlogging.basicConfig()\nlogging.getLogger().setLevel(logging.DEBUG)\nrequests_log = logging.getLogger(\"requests.packages.urllib3\")\nrequests_log.setLevel(logging.DEBUG)```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1694612767.286409",
        "parent_user_id": "U02TVNZQDPV",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "OC3i",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Add this to the top of your script and you will get lots\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "import logging\nfrom http.client import HTTPConnection\n\nHTTPConnection.debuglevel = 1\nlogging.basicConfig()\nlogging.getLogger().setLevel(logging.DEBUG)\nrequests_log = logging.getLogger(\"requests.packages.urllib3\")\nrequests_log.setLevel(logging.DEBUG)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "U02TVNZQDPV",
        "type": "message",
        "ts": "1694613453.391359",
        "client_msg_id": "e1bcd121-beff-4683-9ec1-b1dfc38a14e0",
        "text": "Thanks Liam",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge82f91f3690",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e82f91f36900aec46a2097987592769d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0020-72.png",
            "first_name": "rob",
            "real_name": "rob smith",
            "display_name": "rob smith",
            "team": "T4G9NBD2M",
            "name": "rob51852",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1694612767.286409",
        "parent_user_id": "U02TVNZQDPV",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1TO8m",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks Liam"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "I'm using flumine loggingControl to log live orders to CSV. Attached is the main lump of my code minus <http:\/\/logging.info|logging.info>() calls. The main idea is to add BSP's to my CSV data for preplay strategies. The CSV file is missing most (but not all) of the markets I participated in and looking at my logs, it seems that there is some sort of race condition between `_process_cleared_orders_meta()` and `_process_closed_market()`. The weird thing is that my variable `self.csv_data` gets populated as expected via `_process_cleared_orders_meta(),` _however_ the `_process_closed_market()` call often fails to find the market_id in `self.csv_data` and I can see that there are currently 30+ markets sat in there waiting to be written to CSV long after the markets have closed. I suspect that closed_orders is getting called before cleared_orders_meta.\n\nCan someone please explain:\na) the difference between `_process_cleared_orders()` and  `_process_cleared_orders_meta()`\nb) if `_process_closed_market()` is the only event in loggingControl that exposes the marketBook\/BSP\nc) if\/why my logic is flawed",
        "files": [
            {
                "id": "F05SMGBKU81",
                "created": 1694642047,
                "timestamp": 1694642047,
                "name": "betloggingcontrol.txt",
                "title": "betloggingcontrol.txt",
                "mimetype": "text\/plain",
                "filetype": "cpp",
                "pretty_type": "C++",
                "user": "U016TGY3676",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 2629,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F05SMGBKU81\/betloggingcontrol.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F05SMGBKU81\/download\/betloggingcontrol.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/U016TGY3676\/F05SMGBKU81\/betloggingcontrol.txt",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F05SMGBKU81-8e3777b882",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/U016TGY3676\/F05SMGBKU81\/betloggingcontrol.txt\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "U016TGY3676",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/HSdh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm using flumine loggingControl to log live orders to CSV. Attached is the main lump of my code minus "
                            },
                            {
                                "type": "link",
                                "url": "http:\/\/logging.info",
                                "text": "logging.info"
                            },
                            {
                                "type": "text",
                                "text": "() calls. The main idea is to add BSP's to my CSV data for preplay strategies. The CSV file is missing most (but not all) of the markets I participated in and looking at my logs, it seems that there is some sort of race condition between "
                            },
                            {
                                "type": "text",
                                "text": "_process_cleared_orders_meta()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "_process_closed_market()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". The weird thing is that my variable "
                            },
                            {
                                "type": "text",
                                "text": "self.csv_data",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " gets populated as expected via "
                            },
                            {
                                "type": "text",
                                "text": "_process_cleared_orders_meta(),",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " "
                            },
                            {
                                "type": "text",
                                "text": "however ",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "the "
                            },
                            {
                                "type": "text",
                                "text": "_process_closed_market()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " call often fails to find the market_id in "
                            },
                            {
                                "type": "text",
                                "text": "self.csv_data",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and I can see that there are currently 30+ markets sat in there waiting to be written to CSV long after the markets have closed. I suspect that closed_orders is getting called before cleared_orders_meta.\n\nCan someone please explain:\na) the difference between "
                            },
                            {
                                "type": "text",
                                "text": "_process_cleared_orders()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and  "
                            },
                            {
                                "type": "text",
                                "text": "_process_cleared_orders_meta()\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "b) if "
                            },
                            {
                                "type": "text",
                                "text": "_process_closed_market()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is the only event in loggingControl that exposes the marketBook\/BSP\nc) if\/why my logic is flawed"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1694645799.888409",
        "client_msg_id": "394735e9-7727-420a-9aa7-aff3e047f5ee",
        "thread_ts": "1694645799.888409",
        "reply_count": 17,
        "reply_users_count": 4,
        "latest_reply": "1694863816.013309",
        "reply_users": [
            "U4H19D1D2",
            "U016TGY3676",
            "U02RN7YDRQ9",
            "U01PJ5YMFBJ"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1694677064.019229"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694694154.394889"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1694694242.338499"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694694280.475999"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1694694349.407259"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694694560.078409"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1694707464.119879"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694709416.725319"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1694714094.955109"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694714428.556929"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694714484.526669"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1694714573.581539"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1694714668.363359"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694814689.118089"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1694845169.944279"
            },
            {
                "user": "U016TGY3676",
                "ts": "1694859010.338479"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1694863816.013309"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1694863816.013309"
    }
]