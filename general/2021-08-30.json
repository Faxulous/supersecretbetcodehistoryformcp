[
    {
        "user": "UK55EGNLA",
        "type": "message",
        "ts": "1630316455.080500",
        "edited": {
            "user": "UK55EGNLA",
            "ts": "1630317130.000000"
        },
        "client_msg_id": "024e232d-60f1-4b48-8fd2-05f2f787a6fb",
        "text": "hey all, betfair volumes \/total matched for horse racing declined massively over the last year or so.  Presumably related to lockdowns.  Does anyone know anything more about this?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gdfe07d47541",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/edfe07d47541581fd47335de627fc2b1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Robert",
            "real_name": "Robert",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "robert",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630316455.080500",
        "reply_count": 8,
        "reply_users_count": 6,
        "latest_reply": "1630504519.115800",
        "reply_users": [
            "USDCJS1CK",
            "U027B2PHRD0",
            "UEA14GBRR",
            "UV6F64HPG",
            "U01S1VB9X9P",
            "UK55EGNLA"
        ],
        "replies": [
            {
                "user": "USDCJS1CK",
                "ts": "1630332503.088400"
            },
            {
                "user": "U027B2PHRD0",
                "ts": "1630333393.088600"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1630357741.093200"
            },
            {
                "user": "UV6F64HPG",
                "ts": "1630410596.105600"
            },
            {
                "user": "USDCJS1CK",
                "ts": "1630420210.105800"
            },
            {
                "user": "U01S1VB9X9P",
                "ts": "1630456990.106300"
            },
            {
                "user": "UK55EGNLA",
                "ts": "1630504490.115000"
            },
            {
                "user": "UK55EGNLA",
                "ts": "1630504519.115800"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KuSgY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "hey all, betfair volumes \/total matched for horse racing declined massively over the last year or so.  Presumably related to lockdowns.  Does anyone know anything more about this?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UT6593JBH",
        "type": "message",
        "ts": "1630321649.088000",
        "client_msg_id": "3268f493-493a-425e-8b86-465a74fa9d14",
        "text": "Just a 3 quick questions to clarify how the flumine queue works. Firstly, it seems that both the order stream and market stream fill the same handler_queue - so if I get an order update arrive just before a market update the order update will need to be processed before the process_market_book function starts processing the market stream update? Is that right? Or can orders and a marketbook be processed asynchronously? Secondly, is the best way to check if a backlog of updates is building up in the queue just to check with handler_queue.qsize() - or do I just have to rely on looking for a True conflation flag in streamingupdates? Finally, if a market_definition update is received. When will it be reflect in the attributes of the Market object in flumine - when that information is first received - or when that marketbook gets to the front of the handler_queue and is processed?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gcc4ebad3a58",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/cc4ebad3a580698a264d16101dc48253.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0025-72.png",
            "first_name": "",
            "real_name": "Steve",
            "display_name": "Steve",
            "team": "T4G9NBD2M",
            "name": "flegg.stephen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630321649.088000",
        "reply_count": 2,
        "reply_users_count": 1,
        "latest_reply": "1630393992.101700",
        "reply_users": [
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1630393658.101300"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1630393992.101700"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1630393992.101700",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7vr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Just a 3 quick questions to clarify how the flumine queue works. Firstly, it seems that both the order stream and market stream fill the same handler_queue - so if I get an order update arrive just before a market update the order update will need to be processed before the process_market_book function starts processing the market stream update? Is that right? Or can orders and a marketbook be processed asynchronously? Secondly, is the best way to check if a backlog of updates is building up in the queue just to check with handler_queue.qsize() - or do I just have to rely on looking for a True conflation flag in streamingupdates? Finally, if a market_definition update is received. When will it be reflect in the attributes of the Market object in flumine - when that information is first received - or when that marketbook gets to the front of the handler_queue and is processed?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "USDCJS1CK",
        "type": "message",
        "ts": "1630332503.088400",
        "client_msg_id": "2bd68d16-734f-41b2-8ae8-7cc4a212d5e1",
        "text": "It actually rose during lockdown, but has tailed off quite a bit since then. I have raised this with Betfair, but they didn't offer any insight and just sort of shrugged their shoulders. It 'feels' to me that they are doing a good job of driving volume off the exchange and into the sportsbook which is higher margin for them.\n\nOther sports are down as well, Euro's, footy etc. So it's a quite a broad based decline but more noticable on racing due to the frequency I guess.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "5ffdc310ffc1",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-04-22\/2003482097649_5ffdc310ffc1078af34a_72.png",
            "first_name": "Peter",
            "real_name": "Peter Webb",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter.webb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630316455.080500",
        "parent_user_id": "UK55EGNLA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ISVh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It actually rose during lockdown, but has tailed off quite a bit since then. I have raised this with Betfair, but they didn't offer any insight and just sort of shrugged their shoulders. It 'feels' to me that they are doing a good job of driving volume off the exchange and into the sportsbook which is higher margin for them.\n\nOther sports are down as well, Euro's, footy etc. So it's a quite a broad based decline but more noticable on racing due to the frequency I guess."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U027B2PHRD0",
        "type": "message",
        "ts": "1630333393.088600",
        "client_msg_id": "039bd248-2700-4188-9c56-8319b80000f5",
        "text": "A broad customer base is fundamental for any exchange. If a certain threshold is surpassed, the exchange would collapse into a dry desert pretty quickly. I think the problem is that betfair has little to no motive to push the exchange and the marketing campaigns from bookmakers are way bigger. Also some of main the advantages just can not be advertised by betfair itself. Get better odds? Kinda implies bad odds on the sportsbook, but sure this one goes. Dont actually get banned when winning? Well, this is a big advantage of the exchange, but no way betfair would say that :smile: I think its partially up to the players to showcase the exchanges advantages. As much as ppl like Caan (at least before his vids got a slightly negative touch towards betfair) and that guy selling courses and posing with his big winnings are doubted here, those guys are doing the big players a big favor with how many ppl they attract",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gc8906125a4c",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/c8906125a4c34382939cf4bf340bc457.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Mons___das",
            "display_name": "Mons___das",
            "team": "T4G9NBD2M",
            "name": "monsterdas",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630316455.080500",
        "parent_user_id": "UK55EGNLA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rD0t",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "A broad customer base is fundamental for any exchange. If a certain threshold is surpassed, the exchange would collapse into a dry desert pretty quickly. I think the problem is that betfair has little to no motive to push the exchange and the marketing campaigns from bookmakers are way bigger. Also some of main the advantages just can not be advertised by betfair itself. Get better odds? Kinda implies bad odds on the sportsbook, but sure this one goes. Dont actually get banned when winning? Well, this is a big advantage of the exchange, but no way betfair would say that "
                            },
                            {
                                "type": "emoji",
                                "name": "smile",
                                "unicode": "1f604"
                            },
                            {
                                "type": "text",
                                "text": " I think its partially up to the players to showcase the exchanges advantages. As much as ppl like Caan (at least before his vids got a slightly negative touch towards betfair) and that guy selling courses and posing with his big winnings are doubted here, those guys are doing the big players a big favor with how many ppl they attract"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PNBCPSKT",
        "type": "message",
        "ts": "1630357264.093000",
        "client_msg_id": "9010FB24-5783-412D-BA16-57120C7DED0E",
        "text": "Ok. Out of curiosity, say your strategy relied on knowing the state of the ladder in real time. How would you maintain that data? I’m thinking , each time a streaming record arrived, a process added it to the end of the ladder. Looks like flumine would struggle with this. Is there something else?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "dd487a1a3898",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-02-25\/1797934283412_dd487a1a3898ed0b4ec6_72.png",
            "first_name": "Steve",
            "real_name": "Steve Roach",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "steve_roach",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630041956.052000",
        "parent_user_id": "U01PNBCPSKT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UgTq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ok. Out of curiosity, say your strategy relied on knowing the state of the ladder in real time. How would you maintain that data? I’m thinking , each time a streaming record arrived, a process added it to the end of the ladder. Looks like flumine would struggle with this. Is there something else?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1630357741.093200",
        "edited": {
            "user": "UEA14GBRR",
            "ts": "1630357980.000000"
        },
        "client_msg_id": "bf9f1a1e-af01-46f5-a7b0-35ffdb9bd105",
        "text": "It's harder to think of a reason why it wouldn't be down.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630316455.080500",
        "parent_user_id": "UK55EGNLA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0R6tB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It's harder to think of a reason why it wouldn't be down."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1630361777.094100",
        "client_msg_id": "5C7D5D16-B92E-4F0E-868E-DD776E4BF085",
        "text": "I think you need to clarify exactly what you mean by ladder at this stage",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630041956.052000",
        "parent_user_id": "U01PNBCPSKT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ILh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think you need to clarify exactly what you mean by ladder at this stage"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PNBCPSKT",
        "type": "message",
        "ts": "1630368015.098400",
        "edited": {
            "user": "U01PNBCPSKT",
            "ts": "1630368164.000000"
        },
        "client_msg_id": "C69B6A48-951C-497A-B392-0995024F2102",
        "text": "Like this from Bet Angel. Not sure it would be practical to feed this in its entirety into a strategy every second or so, but certainly an extract of features from something like this.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "dd487a1a3898",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-02-25\/1797934283412_dd487a1a3898ed0b4ec6_72.png",
            "first_name": "Steve",
            "real_name": "Steve Roach",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "steve_roach",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630041956.052000",
        "parent_user_id": "U01PNBCPSKT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GsR0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Like this from Bet Angel. Not sure it would be practical to feed this in its entirety into a strategy every second or so, but certainly an extract of features from something like this."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "",
        "files": [
            {
                "id": "F02CED5U1K9",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U01PNBCPSKT",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tLS",
                "elements": []
            }
        ],
        "type": "message",
        "ts": "1630368021.098600",
        "client_msg_id": "05940A6F-D3BF-4133-9D62-BCDEFE78DFCE",
        "thread_ts": "1630041956.052000",
        "parent_user_id": "U01PNBCPSKT"
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1630384562.100600",
        "client_msg_id": "82C5A33B-575F-46ED-8E29-FFA54233D908",
        "text": "This is what is in the market book",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630041956.052000",
        "parent_user_id": "U01PNBCPSKT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "h+gTr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This is what is in the market book"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PNBCPSKT",
        "type": "message",
        "ts": "1630389643.100800",
        "client_msg_id": "ffb49dd7-beb3-474b-934e-4dc0b5f2534a",
        "text": "I'm trying to find my way around the landscape here and some of the terminology is a bit unfamiliar. Please excuse me for asking a lot of dim questions.\n\nThe function you gave me (prices_file_to_data_frame) works very well; it takes a historic file and outputs a ladder to a flat file. It needs a bit of processing but it's close enough to do the job, so thanks for that. The next hurdle for me is to build the same ladder (which you call a market book) in real time and use that against any strategy I may have come up with. So, how do I get this market book? You have indicated that Flumine is not the thing for very good reasons, so where do I go for the market book? I have seen some bflw programs that mention it but the documentation is fairly sparse. Are you able to point me to an example program that converts the streaming data in real time in this way?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "dd487a1a3898",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-02-25\/1797934283412_dd487a1a3898ed0b4ec6_72.png",
            "first_name": "Steve",
            "real_name": "Steve Roach",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "steve_roach",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630041956.052000",
        "parent_user_id": "U01PNBCPSKT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "2jwrM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm trying to find my way around the landscape here and some of the terminology is a bit unfamiliar. Please excuse me for asking a lot of dim questions.\n\nThe function you gave me (prices_file_to_data_frame) works very well; it takes a historic file and outputs a ladder to a flat file. It needs a bit of processing but it's close enough to do the job, so thanks for that. The next hurdle for me is to build the same ladder (which you call a market book) in real time and use that against any strategy I may have come up with. So, how do I get this market book? You have indicated that Flumine is not the thing for very good reasons, so where do I go for the market book? I have seen some bflw programs that mention it but the documentation is fairly sparse. Are you able to point me to an example program that converts the streaming data in real time in this way?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1630390083.101000",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1630390116.000000"
        },
        "client_msg_id": "e09a6fca-d5d8-4857-90e0-e02ca2af168b",
        "text": "You seem to be missing something here. The market book is the fundamental collection of data that any strategy works off so of course flumine gives you access to that. I'm not a flumine user but a quick look at the examples shows that to write a strategy you overload functions like `check_market_book` and `process_market_book`. Everything revolves around it. The only reason you might want to convert it to a data frame is if you want to perform operations on it that are easier to do in pandas or more generally with the data in a tabular format",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1630041956.052000",
        "parent_user_id": "U01PNBCPSKT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1HD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You seem to be missing something here. The market book is the fundamental collection of data that any strategy works off so of course flumine gives you access to that. I'm not a flumine user but a quick look at the examples shows that to write a strategy you overload functions like "
                            },
                            {
                                "type": "text",
                                "text": "check_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". Everything revolves around it. The only reason you might want to convert it to a data frame is if you want to perform operations on it that are easier to do in pandas or more generally with the data in a tabular format"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]