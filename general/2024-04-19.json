[
    {
        "user": "U05N9773A23",
        "type": "message",
        "ts": "1713510776.822849",
        "client_msg_id": "1605bf3c-6825-40d8-854d-c330bf71c42b",
        "text": "<@U4H19D1D2> Would you recommend saving the market catalogue data to an entirely separate file? My current file hierarchy looks like this: sport -&gt; year -&gt; month -&gt; day -&gt; {market_id}-{time}-{venue}.gz",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g9a60fb53f27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/9a60fb53f27a5eefe4207d5f5b9ce4bc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Justice",
            "real_name": "Justice",
            "display_name": "Justice",
            "team": "T4G9NBD2M",
            "name": "bkwdev",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713378069.969709",
        "parent_user_id": "U05N9773A23",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "yNB9R",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " Would you recommend saving the market catalogue data to an entirely separate file? My current file hierarchy looks like this: sport -> year -> month -> day -> {market_id}-{time}-{venue}.gz"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1713510830.755129",
        "client_msg_id": "dfbbeaf2-df50-4f51-93b7-739379943783",
        "text": "Yes, two folders `markets` \/ `marketCatalogues` with a single table as a lookup containing some parsed data for querying to get the ids, why make things complicated?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713378069.969709",
        "parent_user_id": "U05N9773A23",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Z0+OK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes, two folders "
                            },
                            {
                                "type": "text",
                                "text": "markets",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " \/ "
                            },
                            {
                                "type": "text",
                                "text": "marketCatalogues",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " with a single table as a lookup containing some parsed data for querying to get the ids, why make things complicated?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06C1FU1HM4",
        "type": "message",
        "ts": "1713521894.069809",
        "client_msg_id": "ce43cef3-c6c7-4b47-bab7-2a0316a162ef",
        "text": "Hello, Need a help.\n\nI have been facing this issue were my account keeps getting blocked and shows up this error `LoginError: API login: ACCOUNT_PENDING_PASSWORD_CHANGE`. I am using the account on one instance. I got it reset more than 4 times now. But still it is getting blocked on second successful login attempt. Double checked the password is correct and username is also correct along with the app key. Earlier it was working fine with multiple login at multiple places but once i faced this error it is not going away now.\n\nThanks.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "075594f6db0e",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-01-02\/6438956467104_075594f6db0e3260e2b4_72.png",
            "first_name": "Tarang",
            "real_name": "Tarang Ambaliya",
            "display_name": "Tarang Ambaliya",
            "team": "T4G9NBD2M",
            "name": "taranga",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713521894.069809",
        "reply_count": 3,
        "reply_users_count": 3,
        "latest_reply": "1713525772.162189",
        "reply_users": [
            "UBS7QANF3",
            "U06C1FU1HM4",
            "U06PDHLH3PZ"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1713522828.686769"
            },
            {
                "user": "U06C1FU1HM4",
                "ts": "1713525222.226739"
            },
            {
                "user": "U06PDHLH3PZ",
                "ts": "1713525772.162189"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vF46u",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hello, Need a help.\n\nI have been facing this issue were my account keeps getting blocked and shows up this error "
                            },
                            {
                                "type": "text",
                                "text": "LoginError: API login: ACCOUNT_PENDING_PASSWORD_CHANGE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". I am using the account on one instance. I got it reset more than 4 times now. But still it is getting blocked on second successful login attempt. Double checked the password is correct and username is also correct along with the app key. Earlier it was working fine with multiple login at multiple places but once i faced this error it is not going away now.\n\nThanks."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03N4QBJ0TV",
        "type": "message",
        "ts": "1713522555.851169",
        "client_msg_id": "221cf116-f4d7-45ae-af5d-b50ef8a70483",
        "text": "Hey all, when using a simple market filter such as the one below for filtering by market_ids is there a way to update  all_selections (which is the list of market_ids) without having to restart the flumine instance?\n```standard_filter = betfairlightweight.filters.streaming_market_filter(\n        market_ids=all_selections\n    )```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2c8538b47ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2c8538b47ad4bed6facbb148134bb486.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0020-72.png",
            "first_name": "Trex44",
            "real_name": "Trex44",
            "display_name": "Trex44",
            "team": "T4G9NBD2M",
            "name": "c.s.mpharm",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713522555.851169",
        "reply_count": 2,
        "reply_users_count": 2,
        "latest_reply": "1713783338.578589",
        "reply_users": [
            "U03N4QBJ0TV",
            "U01FJN59B52"
        ],
        "replies": [
            {
                "user": "U03N4QBJ0TV",
                "ts": "1713526038.499779"
            },
            {
                "user": "U01FJN59B52",
                "ts": "1713783338.578589"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Dwck8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hey all, when using a simple market filter such as the one below for filtering by market_ids is there a way to update  all_selections (which is the list of market_ids) without having to restart the flumine instance?\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "standard_filter = betfairlightweight.filters.streaming_market_filter(\n        market_ids=all_selections\n    )"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "man-facepalming",
                "users": [
                    "UBS7QANF3"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1713522737.820149",
        "client_msg_id": "2d94ba5d-bbf5-4695-99d7-56c9e9b97f5f",
        "text": "yeah, don't filter by market ids",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713522737.820149",
        "reply_count": 6,
        "reply_users_count": 4,
        "latest_reply": "1713787819.844999",
        "reply_users": [
            "U03N4QBJ0TV",
            "U4H19D1D2",
            "U06R7GCC26B",
            "UC70576CB"
        ],
        "replies": [
            {
                "user": "U03N4QBJ0TV",
                "ts": "1713526260.981079"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1713526385.798279"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1713530921.943239"
            },
            {
                "user": "UC70576CB",
                "ts": "1713735514.904009"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1713770253.216179"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1713787819.844999"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1713787819.844999",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ehPu\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yeah, don't filter by market ids"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1713522828.686769",
        "client_msg_id": "cf3b6f04-88d9-4dff-a168-134a857ff3d3",
        "text": "You're going to have to speak to Betfair about this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713521894.069809",
        "parent_user_id": "U06C1FU1HM4",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "i5rPp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You're going to have to speak to Betfair about this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06C1FU1HM4",
        "type": "message",
        "ts": "1713525222.226739",
        "client_msg_id": "b1c64bd6-c413-4343-8407-c1c2700225cd",
        "text": "okay thanks <@UBS7QANF3>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "075594f6db0e",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-01-02\/6438956467104_075594f6db0e3260e2b4_72.png",
            "first_name": "Tarang",
            "real_name": "Tarang Ambaliya",
            "display_name": "Tarang Ambaliya",
            "team": "T4G9NBD2M",
            "name": "taranga",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713521894.069809",
        "parent_user_id": "U06C1FU1HM4",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mVd3z",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "okay thanks "
                            },
                            {
                                "type": "user",
                                "user_id": "UBS7QANF3"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06PDHLH3PZ",
        "type": "message",
        "ts": "1713525772.162189",
        "client_msg_id": "2F0438D3-E552-4B93-A427-05559EE363CC",
        "text": "It could be that someone is trying to hack your account. Have a look in your account on the bf site to see if there are any failed login attempts that weren't you. If that's the case then ask betfair if you can change your username",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d3d0e1b16af0",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6810161706994_d3d0e1b16af0b1f4d487_72.png",
            "first_name": "johnnb",
            "real_name": "johnnb",
            "display_name": "Johnnb",
            "team": "T4G9NBD2M",
            "name": "ewelchlogistics",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713521894.069809",
        "parent_user_id": "U06C1FU1HM4",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Fx3v9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It could be that someone is trying to hack your account. Have a look in your account on the bf site to see if there are any failed login attempts that weren't you. If that's the case then ask betfair if you can change your username"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03N4QBJ0TV",
        "type": "message",
        "ts": "1713526038.499779",
        "client_msg_id": "de016527-4bfb-45ed-8983-96ed9f73e549",
        "text": "Facepalm must mean I am doing something incredibly stupid here.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2c8538b47ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2c8538b47ad4bed6facbb148134bb486.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0020-72.png",
            "first_name": "Trex44",
            "real_name": "Trex44",
            "display_name": "Trex44",
            "team": "T4G9NBD2M",
            "name": "c.s.mpharm",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713522555.851169",
        "parent_user_id": "U03N4QBJ0TV",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "cXhi0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Facepalm must mean I am doing something incredibly stupid here."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "thread_broadcast",
        "user": "U03N4QBJ0TV",
        "thread_ts": "1713522737.820149",
        "root": {
            "user": "U4H19D1D2",
            "type": "message",
            "ts": "1713522737.820149",
            "client_msg_id": "2d94ba5d-bbf5-4695-99d7-56c9e9b97f5f",
            "text": "yeah, don't filter by market ids",
            "team": "T4G9NBD2M",
            "thread_ts": "1713522737.820149",
            "reply_count": 6,
            "reply_users_count": 4,
            "latest_reply": "1713787819.844999",
            "reply_users": [
                "U03N4QBJ0TV",
                "U4H19D1D2",
                "U06R7GCC26B",
                "UC70576CB"
            ],
            "replies": [
                {
                    "user": "U03N4QBJ0TV",
                    "ts": "1713526260.981079"
                },
                {
                    "user": "U4H19D1D2",
                    "ts": "1713526385.798279"
                },
                {
                    "user": "U06R7GCC26B",
                    "ts": "1713530921.943239"
                },
                {
                    "user": "UC70576CB",
                    "ts": "1713735514.904009"
                },
                {
                    "user": "U4H19D1D2",
                    "ts": "1713770253.216179"
                },
                {
                    "user": "U06R7GCC26B",
                    "ts": "1713787819.844999"
                }
            ],
            "is_locked": false,
            "subscribed": true,
            "last_read": "1713787819.844999",
            "blocks": [
                {
                    "type": "rich_text",
                    "block_id": "ehPu\/",
                    "elements": [
                        {
                            "type": "rich_text_section",
                            "elements": [
                                {
                                    "type": "text",
                                    "text": "yeah, don't filter by market ids"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "type": "message",
        "ts": "1713526260.981079",
        "edited": {
            "user": "U03N4QBJ0TV",
            "ts": "1713526337.000000"
        },
        "client_msg_id": "e686edd3-08d8-4e39-b79d-de7cdfebc6a1",
        "text": "I wasn't filtering by market ids but then I was getting told I was trying to subscribe to over the 1000 markets which is above the limit BF allows me. Seeing as I have the market ids for the markets my strategies will consider already logged I just changed the filter to focus only on those markets and that seems to have done the job. I just don't want to have to reboot it each few days when I have new markets to consider.",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "brmfk",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I wasn't filtering by market ids but then I was getting told I was trying to subscribe to over the 1000 markets which is above the limit BF allows me. Seeing as I have the market ids for the markets my strategies will consider already logged I just changed the filter to focus only on those markets and that seems to have done the job. I just don't want to have to reboot it each few days when I have new markets to consider."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1713526385.798279",
        "client_msg_id": "417e79b8-309a-462e-90a0-bbb4baa9afd3",
        "text": "flumine accepts a list for `market_filter`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713522737.820149",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Rw8w6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "flumine accepts a list for "
                            },
                            {
                                "type": "text",
                                "text": "market_filter",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1713530921.943239",
        "client_msg_id": "a89a0c30-f1bf-4598-a997-2b896688064d",
        "text": "^ this is exactly the sort of thing I was trying to solve for as well here:\n<https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1713342170278479>\n\n\nadvice I got (incl via DM’s) was to:\n\n• don’t add markets and don’t add strategies when running (i.e. no change to filters)\n• use a broader filter into betfair (e.g. all soccer markets in the UK)\n• connect when there’s a smaller number of markets, as the stream limit is enforced at connection time apparently\n• use `check_market_book` to drop stuff I don’t care about\n\nthere’s probably still some hygiene around overall management for processes to get into, but I’ve not personally had time to consider that as yet",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713522737.820149",
        "parent_user_id": "U4H19D1D2",
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1713342170278479",
                "ts": "1713342170.278479",
                "author_id": "U06R7GCC26B",
                "channel_id": "C4H05ML2E",
                "channel_team": "T4G9NBD2M",
                "is_msg_unfurl": true,
                "is_thread_root_unfurl": true,
                "message_blocks": [
                    {
                        "team": "T4G9NBD2M",
                        "channel": "C4H05ML2E",
                        "ts": "1713342170.278479",
                        "message": {
                            "blocks": [
                                {
                                    "type": "rich_text",
                                    "block_id": "TeLuv",
                                    "elements": [
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "maybe a silly q (and hopefully I’ve not missed something in docs); but can you add strategies after flumine has started running, or does it have to be done before the "
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "run()",
                                                    "style": {
                                                        "code": true
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "text": " call?\n\nthis works as usual:\n"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "rich_text_preformatted",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "# main thread only\nfor s in strategies:\n    framework.add_strategy(s)\n\nframework.run()"
                                                }
                                            ],
                                            "border": 0
                                        },
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "\n\ndoesn’t seem to work - debug logging isn’t showing files being written to (but it’s just been a quick spike this morning)\n"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "rich_text_preformatted",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "# run() on background thread\nframework_thread = threading.Thread(\n    name=\"Flumine Main\",\n    target=framework.run,\n)\nframework_thread.start()\n\n# add strategy via main thread\nfor s in strategies:\n    framework.add_strategy(s)"
                                                }
                                            ],
                                            "border": 0
                                        },
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "\n(the strategies are just MarketRecorder from the examples with custom market filters based on relevant events, countrycodes and market_types to avoid hitting the 200 makret subscription limit which betfair seem to have)\n\nI’ve not tried adding strategies from a background thread yet, but will do that later today.\n\nreason for this is that I want to have one flumine instance running on my ec2, with a trickling in of football events as they are 2hours from start.\n\nso I’ll have the events stored in RDS (which are periodically refreshed) and then have a loop which grabs relevant event_id’s to construct the market_filter going into flumine\n\nis there a better pattern to use for something like this?"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                ],
                "id": 1,
                "original_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1713342170278479",
                "fallback": "[April 17th, 2024 1:22 AM] ammarorama: maybe a silly q (and hopefully I’ve not missed something in docs); but can you add strategies after flumine has started running, or does it have to be done before the `run()` call?\n\nthis works as usual:\n```# main thread only\nfor s in strategies:\n    framework.add_strategy(s)\n\nframework.run()```\n\ndoesn’t seem to work - debug logging isn’t showing files being written to (but it’s just been a quick spike this morning)\n```# run() on background thread\nframework_thread = threading.Thread(\n    name=\"Flumine Main\",\n    target=framework.run,\n)\nframework_thread.start()\n\n# add strategy via main thread\nfor s in strategies:\n    framework.add_strategy(s)```\n(the strategies are just MarketRecorder from the examples with custom market filters based on relevant events, countrycodes and market_types to avoid hitting the 200 makret subscription limit which betfair seem to have)\n\nI’ve not tried adding strategies from a background thread yet, but will do that later today.\n\nreason for this is that I want to have one flumine instance running on my ec2, with a trickling in of football events as they are 2hours from start.\n\nso I’ll have the events stored in RDS (which are periodically refreshed) and then have a loop which grabs relevant event_id’s to construct the market_filter going into flumine\n\nis there a better pattern to use for something like this?",
                "text": "maybe a silly q (and hopefully I’ve not missed something in docs); but can you add strategies after flumine has started running, or does it have to be done before the `run()` call?\n\nthis works as usual:\n```# main thread only\nfor s in strategies:\n    framework.add_strategy(s)\n\nframework.run()```\n\ndoesn’t seem to work - debug logging isn’t showing files being written to (but it’s just been a quick spike this morning)\n```# run() on background thread\nframework_thread = threading.Thread(\n    name=\"Flumine Main\",\n    target=framework.run,\n)\nframework_thread.start()\n\n# add strategy via main thread\nfor s in strategies:\n    framework.add_strategy(s)```\n(the strategies are just MarketRecorder from the examples with custom market filters based on relevant events, countrycodes and market_types to avoid hitting the 200 makret subscription limit which betfair seem to have)\n\nI’ve not tried adding strategies from a background thread yet, but will do that later today.\n\nreason for this is that I want to have one flumine instance running on my ec2, with a trickling in of football events as they are 2hours from start.\n\nso I’ll have the events stored in RDS (which are periodically refreshed) and then have a loop which grabs relevant event_id’s to construct the market_filter going into flumine\n\nis there a better pattern to use for something like this?",
                "author_name": "Ammar",
                "author_link": "https:\/\/betcode-org.slack.com\/team\/U06R7GCC26B",
                "author_icon": "https:\/\/avatars.slack-edge.com\/2024-03-27\/6869200857189_3f20d6bcced9078f3eba_48.jpg",
                "author_subname": "Ammar",
                "mrkdwn_in": [
                    "text"
                ],
                "footer": "Thread in Slack conversation"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tFGei",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "^ this is exactly the sort of thing I was trying to solve for as well here:\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1713342170278479"
                            },
                            {
                                "type": "text",
                                "text": "\n\n\nadvice I got (incl via DM’s) was to:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "don’t add markets and don’t add strategies when running (i.e. no change to filters)"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "use a broader filter into betfair (e.g. all soccer markets in the UK)"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "connect when there’s a smaller number of markets, as the stream limit is enforced at connection time apparently"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "use "
                                    },
                                    {
                                        "type": "text",
                                        "text": "check_market_book",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": " to drop stuff I don’t care about"
                                    }
                                ]
                            }
                        ],
                        "style": "bullet",
                        "indent": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nthere’s probably still some hygiene around overall management for processes to get into, but I’ve not personally had time to consider that as yet"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U03N4QBJ0TV"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "USWDY5P7G",
        "type": "message",
        "ts": "1713563867.511479",
        "client_msg_id": "76b87a39-984e-4bc8-b5b2-43bf9b92b905",
        "text": "Liam was right, default *max_order_exposure* was set to 10, that was the issue. Thanks guys.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "693b14d0cc42",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-08-29\/2425858826214_693b14d0cc42bdbfb86a_72.jpg",
            "first_name": "Fab",
            "real_name": "Fab",
            "display_name": "Fab",
            "team": "T4G9NBD2M",
            "name": "me1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713475742.378269",
        "parent_user_id": "USWDY5P7G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6sygr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Liam was right, default "
                            },
                            {
                                "type": "text",
                                "text": "max_order_exposure",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " was set to 10, that was the issue. Thanks guys."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    }
]