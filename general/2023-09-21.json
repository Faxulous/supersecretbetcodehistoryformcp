[
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1695281795.491109",
        "client_msg_id": "2866e39f-1128-4e94-8638-78dff1f9a343",
        "text": "No, all strategy execution is within the main thread, have you profiled your code? You must be doing something very inefficient",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695228020.807289",
        "parent_user_id": "U0415903NVB",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WEbC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "No, all strategy execution is within the main thread, have you profiled your code? You must be doing something very inefficient"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "Am I reading this correctly? On any MarketBook event, Flumine will call all strategies, irrespective of whether that strategy is subscribed to that particular market? So if I have one strategy subscribed to football markets and one subscribed to horse racing, both of them will get called on both football and horse racing market updates?",
        "files": [
            {
                "id": "F05TBJV65MY",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U013PLN93AT",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jObn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Am I reading this correctly? On any MarketBook event, Flumine will call all strategies, irrespective of whether that strategy is subscribed to that particular market? So if I have one strategy subscribed to football markets and one subscribed to horse racing, both of them will get called on both football and horse racing market updates?"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1695299645.135359",
        "client_msg_id": "3a6f8ad0-bb0b-4ba6-ad88-1229d706c17d",
        "thread_ts": "1695299645.135359",
        "reply_count": 2,
        "reply_users_count": 2,
        "latest_reply": "1695303693.506739",
        "reply_users": [
            "U4H19D1D2",
            "U013PLN93AT"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1695301967.683189"
            },
            {
                "user": "U013PLN93AT",
                "ts": "1695303693.506739"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1695303693.506739"
    },
    {
        "user": "U05U0NHNU8G",
        "type": "message",
        "ts": "1695301807.291509",
        "client_msg_id": "e0cb471e-d26c-4d1c-a025-1b9d67e04c44",
        "text": "Is anyone experiencing Flumine not handling market book event at all? All seemed fine this morning until this very moment. handle_output in OrderStream seems to be hanging in a forever loop with no exit. Weird enough as market to address are open now.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g7a62afc4f8f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/7a62afc4f8fdb18bb9969bc2fe734dd9.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "EGr",
            "real_name": "EGr",
            "display_name": "Emze_93",
            "team": "T4G9NBD2M",
            "name": "emagruppi",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695301807.291509",
        "reply_count": 5,
        "reply_users_count": 2,
        "latest_reply": "1695314271.522839",
        "reply_users": [
            "U4H19D1D2",
            "U05U0NHNU8G"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1695305057.379839"
            },
            {
                "user": "U05U0NHNU8G",
                "ts": "1695305599.555309"
            },
            {
                "user": "U05U0NHNU8G",
                "ts": "1695306783.992279"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1695311589.898259"
            },
            {
                "user": "U05U0NHNU8G",
                "ts": "1695314271.522839"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1695314271.522839",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3ZjLE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is anyone experiencing Flumine not handling market book event at all? All seemed fine this morning until this very moment. handle_output in OrderStream seems to be hanging in a forever loop with no exit. Weird enough as market to address are open now."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1695301967.683189",
        "client_msg_id": "E8A45A4C-0E68-4029-BCAA-93A109011954",
        "text": "No it will check if the strategy is subscribed to that particular stream",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695299645.135359",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pHCb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "No it will check if the strategy is subscribed to that particular stream"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1695303693.506739",
        "client_msg_id": "ce640b85-3e30-4d2a-83dc-5e7bc1483a19",
        "text": "Thanks, I see where I went wrong now. It calls `strategy.check_market` , not `check_market_book` , which does what I'd expect it does.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695299645.135359",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GtW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks, I see where I went wrong now. It calls "
                            },
                            {
                                "type": "text",
                                "text": "strategy.check_market",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , not "
                            },
                            {
                                "type": "text",
                                "text": "check_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , which does what I'd expect it does."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1695305057.379839",
        "client_msg_id": "E4657948-7DA4-4FA5-BF51-99B52D03C1B2",
        "text": "Orjson user?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695301807.291509",
        "parent_user_id": "U05U0NHNU8G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "eB9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Orjson user?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05U0NHNU8G",
        "type": "message",
        "ts": "1695305599.555309",
        "client_msg_id": "28b13d4f-4b01-4d61-88e1-09e52ce38881",
        "text": "Not using orjson.\n\nDigged in a little and it seems there are no open markets.\n\nthe handle_output method from OrderStream class in orderstream.py when calling self.flumine.markets simply does not return any open market. The filer I am using allows a huge availability at the moment (horse racing in UK and Ireland).\n\nIs it a limit I am given from using delayed API keys? I have no clue of why I am seeing an empty market list.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g7a62afc4f8f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/7a62afc4f8fdb18bb9969bc2fe734dd9.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "EGr",
            "real_name": "EGr",
            "display_name": "Emze_93",
            "team": "T4G9NBD2M",
            "name": "emagruppi",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695301807.291509",
        "parent_user_id": "U05U0NHNU8G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WA1O",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not using orjson.\n\nDigged in a little and it seems there are no open markets.\n\nthe handle_output method from OrderStream class in orderstream.py when calling self.flumine.markets simply does not return any open market. The filer I am using allows a huge availability at the moment (horse racing in UK and Ireland).\n\nIs it a limit I am given from using delayed API keys? I have no clue of why I am seeing an empty market list."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0415903NVB",
        "type": "message",
        "ts": "1695305879.635019",
        "client_msg_id": "84df23c7-8656-4b3d-8436-a7d1b8578a02",
        "text": "Hi thanks, I haven't profiled it yet, but did a simple profiling on `process_market_book` function after I removed the writing of the structure data into csv, the whole function takes less than tenths of a second to execute, the high latency issue still persists, is this still not efficient enough",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6654e60cc5f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6654e60cc5f18fd479d64ee0ec772d62.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Mona",
            "real_name": "Mona",
            "display_name": "Mona",
            "team": "T4G9NBD2M",
            "name": "lixianzhe0112",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695228020.807289",
        "parent_user_id": "U0415903NVB",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XCaZs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi thanks, I haven't profiled it yet, but did a simple profiling on "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " function after I removed the writing of the structure data into csv, the whole function takes less than tenths of a second to execute, the high latency issue still persists, is this still not efficient enough"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0415903NVB",
        "type": "message",
        "ts": "1695306043.220629",
        "client_msg_id": "e39c004b-e288-48eb-8bfa-426adf9cf305",
        "text": "also, is there a way to filter incoming market books before `check_market_book` , I tried manually mark the market book when I no longer need it using `market.close()` it seems it reopens everytime.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6654e60cc5f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6654e60cc5f18fd479d64ee0ec772d62.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Mona",
            "real_name": "Mona",
            "display_name": "Mona",
            "team": "T4G9NBD2M",
            "name": "lixianzhe0112",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695228020.807289",
        "parent_user_id": "U0415903NVB",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+6W",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "also, is there a way to filter incoming market books before "
                            },
                            {
                                "type": "text",
                                "text": "check_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , I tried manually mark the market book when I no longer need it using "
                            },
                            {
                                "type": "text",
                                "text": "market.close()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " it seems it reopens everytime."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05U0NHNU8G",
        "type": "message",
        "ts": "1695306783.992279",
        "client_msg_id": "c338cca3-41bc-40fa-beba-c16cd4605f5d",
        "text": "It now finds open markets and working as it should. No line of code has been touched.\n\nI would love to dig deeper into this issue to find the reason why this happens. It is not the first time.\n\nthanks for your time.\n\nIn case you have suggestions on the above please let me know!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g7a62afc4f8f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/7a62afc4f8fdb18bb9969bc2fe734dd9.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "EGr",
            "real_name": "EGr",
            "display_name": "Emze_93",
            "team": "T4G9NBD2M",
            "name": "emagruppi",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695301807.291509",
        "parent_user_id": "U05U0NHNU8G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fzy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It now finds open markets and working as it should. No line of code has been touched.\n\nI would love to dig deeper into this issue to find the reason why this happens. It is not the first time.\n\nthanks for your time.\n\nIn case you have suggestions on the above please let me know!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0415903NVB",
        "type": "message",
        "ts": "1695308333.762739",
        "client_msg_id": "6296390a-bd92-4eab-866d-46dd62445094",
        "text": "I also noticed there is about 10 seconds between market_book published time and the time where it gets called in the `check_market_book` function, could this be the issue",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6654e60cc5f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6654e60cc5f18fd479d64ee0ec772d62.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Mona",
            "real_name": "Mona",
            "display_name": "Mona",
            "team": "T4G9NBD2M",
            "name": "lixianzhe0112",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695228020.807289",
        "parent_user_id": "U0415903NVB",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kds",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I also noticed there is about 10 seconds between market_book published time and the time where it gets called in the "
                            },
                            {
                                "type": "text",
                                "text": "check_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " function, could this be the issue"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0415903NVB",
        "type": "message",
        "ts": "1695308648.024489",
        "client_msg_id": "b22d9435-315b-4971-a208-2072a5fb145d",
        "text": "The `check_market_book` itself takes nearly half a second, this might be the issue....",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6654e60cc5f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6654e60cc5f18fd479d64ee0ec772d62.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Mona",
            "real_name": "Mona",
            "display_name": "Mona",
            "team": "T4G9NBD2M",
            "name": "lixianzhe0112",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695228020.807289",
        "parent_user_id": "U0415903NVB",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1zy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The "
                            },
                            {
                                "type": "text",
                                "text": "check_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " itself takes nearly half a second, this might be the issue...."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1695311589.898259",
        "client_msg_id": "CFCD3383-16AA-434F-AC22-88943EFCA8C1",
        "text": "All delayed key questions and use is banned here, it’s a huge waste of everyone’s time ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695301807.291509",
        "parent_user_id": "U05U0NHNU8G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HZh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "All delayed key questions and use is banned here, "
                            },
                            {
                                "type": "text",
                                "text": "it’s"
                            },
                            {
                                "type": "text",
                                "text": " a huge waste of "
                            },
                            {
                                "type": "text",
                                "text": "everyone’s"
                            },
                            {
                                "type": "text",
                                "text": " time "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05U0NHNU8G",
        "type": "message",
        "ts": "1695314271.522839",
        "client_msg_id": "6f97dfcb-9b68-44a4-bb73-d94d2ea0fff0",
        "text": "I am not even sure this is the case tbh, it was just a guess",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g7a62afc4f8f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/7a62afc4f8fdb18bb9969bc2fe734dd9.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "EGr",
            "real_name": "EGr",
            "display_name": "Emze_93",
            "team": "T4G9NBD2M",
            "name": "emagruppi",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1695301807.291509",
        "parent_user_id": "U05U0NHNU8G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "o28F",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I am not even sure this is the case tbh, it was just a guess"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]