[
    {
        "user": "U05N9773A23",
        "type": "message",
        "ts": "1699955606.130859",
        "client_msg_id": "cac207e0-a065-4d4b-abd5-0ed04e150e73",
        "text": "Hi all. I'm recording some Betfair price data for horse racing. I am only recording data when the market status is both open and in-play. However, I was wondering if there was a way to also filter out updates when the market has reopened for a photograph\/stewards enquiry. To my knowledge, when there is a photograph, the market is still considered in-play.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g9a60fb53f27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/9a60fb53f27a5eefe4207d5f5b9ce4bc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Justice",
            "real_name": "Justice",
            "display_name": "Justice",
            "team": "T4G9NBD2M",
            "name": "bkwdev",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699955606.130859",
        "reply_count": 4,
        "reply_users_count": 3,
        "latest_reply": "1699963141.317809",
        "reply_users": [
            "UUE6E1LA1",
            "UBS7QANF3",
            "U05N9773A23"
        ],
        "replies": [
            {
                "user": "UUE6E1LA1",
                "ts": "1699958224.804299"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1699962846.832959"
            },
            {
                "user": "U05N9773A23",
                "ts": "1699963073.928669"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1699963141.317809"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KpP1D",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi all. I'm recording some Betfair price data for horse racing. I am only recording data when the market status is both open and in-play. However, I was wondering if there was a way to also filter out updates when the market has reopened for a photograph\/stewards enquiry. To my knowledge, when there is a photograph, the market is still considered in-play."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05N9773A23",
        "type": "message",
        "ts": "1699955764.503989",
        "client_msg_id": "4e0adf54-7464-4134-a9f2-61a2d1490f7e",
        "text": "<@U028Z5T4AF6> Do you use the `RacingpostRating` in your model? The historical ratings I have scraped are retrospectively revised (collateral handicapping etc.) and so I can't use them for machine learning without leaking data into my model.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g9a60fb53f27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/9a60fb53f27a5eefe4207d5f5b9ce4bc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Justice",
            "real_name": "Justice",
            "display_name": "Justice",
            "team": "T4G9NBD2M",
            "name": "bkwdev",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699454962.384739",
        "parent_user_id": "U028Z5T4AF6",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PGClh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U028Z5T4AF6"
                            },
                            {
                                "type": "text",
                                "text": " Do you use the `RacingpostRating` in your model? The historical ratings I have scraped are retrospectively revised (collateral handicapping etc.) and so I can't use them for machine learning without leaking data into my model."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "<@U05N9773A23> I use horse previous RP only, so toDate...",
        "files": [
            {
                "id": "F065Q0HKH60",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U028Z5T4AF6",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pmCtT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U05N9773A23"
                            },
                            {
                                "type": "text",
                                "text": " I use horse previous RP only, so toDate..."
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1699957403.264159",
        "client_msg_id": "e8c076dc-7460-44f2-835c-2576c32d56e7",
        "thread_ts": "1699454962.384739",
        "parent_user_id": "U028Z5T4AF6"
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1699958224.804299",
        "client_msg_id": "9674515b-f3d7-4410-9a91-4ee2dc99eaff",
        "text": "Assuming you are streaming, If you really want to do this I can't see any other option than you would need to manually detect the first inplay suspension when the race starts and store the market version, then stop recording on subsequent change in the market version (or detection of further suspension). Premature and incorrect setting of market inplay is not unheard of though, so no method will be 100% effective. Personally, if this is purely for recording of data as you say, then I'd just record everything and extract the portions you are interested in later as it would  be easier, and I might find further down the road that I actually DO want that data for some reason.\n\nIf you are polling using listMarketBook then depending on your poll interval you always run the risk of missing a small portion of data, or getting some non inplay portion included in your data. I used to do this years ago and it is full of shortcomings, so if you are not streaming, I would strongly suggest you switch.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699955606.130859",
        "parent_user_id": "U05N9773A23",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "opOVd",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Assuming you are streaming, If you really want to do this I can't see any other option than you would need to manually detect the first inplay suspension when the race starts and store the market version, then stop recording on subsequent change in the market version (or detection of further suspension). Premature and incorrect setting of market inplay is not unheard of though, so no method will be 100% effective. Personally, if this is purely for recording of data as you say, then I'd just record everything and extract the portions you are interested in later as it would  be easier, and I might find further down the road that I actually DO want that data for some reason.\n\nIf you are polling using listMarketBook then depending on your poll interval you always run the risk of missing a small portion of data, or getting some non inplay portion included in your data. I used to do this years ago and it is full of shortcomings, so if you are not streaming, I would strongly suggest you switch."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1699962846.832959",
        "client_msg_id": "5422fa4b-f831-4a6f-be68-424120d2e500",
        "text": "Utter madness not recording the full stream and then processing it after the fact",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699955606.130859",
        "parent_user_id": "U05N9773A23",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kAcrz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Utter madness not recording the full stream and then processing it after the fact"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "100",
                "users": [
                    "UUE6E1LA1",
                    "U9JHLMZB4"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "U05N9773A23",
        "type": "message",
        "ts": "1699963073.928669",
        "client_msg_id": "2637a736-aa87-4d51-b933-ccc16e823eff",
        "text": "<@UUE6E1LA1> Yes, I am streaming with no conflation set so I can get tick data. I think I will take your suggestion and leave my code as is. I'll filter out anything else later.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g9a60fb53f27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/9a60fb53f27a5eefe4207d5f5b9ce4bc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Justice",
            "real_name": "Justice",
            "display_name": "Justice",
            "team": "T4G9NBD2M",
            "name": "bkwdev",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699955606.130859",
        "parent_user_id": "U05N9773A23",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QA4Xo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UUE6E1LA1"
                            },
                            {
                                "type": "text",
                                "text": " Yes, I am streaming with no conflation set so I can get tick data. I think I will take your suggestion and leave my code as is. I'll filter out anything else later."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1699963141.317809",
        "client_msg_id": "dc955050-b4e8-46db-8457-471c91127815",
        "text": "For the best. Better to have it and not need it than need it and not have it.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699955606.130859",
        "parent_user_id": "U05N9773A23",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hgRLm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "For the best. Better to have it and not need it than need it and not have it."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]