[
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1651215718.807529",
        "client_msg_id": "813116c3-72e9-470b-ac8d-0344b56d12ac",
        "text": "<https:\/\/betcode-org.slack.com\/archives\/C4H05KKMY\/p1629713342304500?thread_ts=1625302265.285700&amp;cid=C4H05KKMY>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1651214885.629909",
        "parent_user_id": "U01665WFPD3",
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05KKMY\/p1629713342304500?thread_ts=1625302265.285700&amp;cid=C4H05KKMY",
                "ts": "1629713342.304500",
                "author_id": "U02BG9NUJF6",
                "channel_team": "T4G9NBD2M",
                "channel_id": "C4H05KKMY",
                "is_msg_unfurl": true,
                "is_reply_unfurl": true,
                "message_blocks": [
                    {
                        "team": "T4G9NBD2M",
                        "channel": "C4H05KKMY",
                        "ts": "1629713342.304500",
                        "message": {
                            "blocks": [
                                {
                                    "type": "rich_text",
                                    "block_id": "Q8aL",
                                    "elements": [
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "BookList: "
                                                },
                                                {
                                                    "type": "link",
                                                    "url": "https:\/\/pastebin.com\/3h4tb5TA"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                ],
                "id": 1,
                "original_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05KKMY\/p1629713342304500?thread_ts=1625302265.285700&amp;cid=C4H05KKMY",
                "fallback": "[August 23rd, 2021 3:09 AM] vanush: BookList: <https:\/\/pastebin.com\/3h4tb5TA>",
                "text": "BookList: <https:\/\/pastebin.com\/3h4tb5TA>",
                "author_name": "Van",
                "author_link": "https:\/\/betcode-org.slack.com\/team\/U02BG9NUJF6",
                "author_icon": "https:\/\/avatars.slack-edge.com\/2021-08-16\/2396750885265_9d5a68244f112cfe8bfa_48.png",
                "author_subname": "Van",
                "mrkdwn_in": [
                    "text"
                ],
                "footer": "Thread in Slack conversation"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ev4l3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/archives\/C4H05KKMY\/p1629713342304500?thread_ts=1625302265.285700&cid=C4H05KKMY"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "<https:\/\/betcode-org.slack.com\/files\/UBS7QANF3\/F010NTJJK88\/dixoncoles.pdf>",
        "files": [
            {
                "id": "F010NTJJK88",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "UBS7QANF3",
        "display_as_bot": false,
        "x_files": [
            "F010NTJJK88"
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "c6NuU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/files\/UBS7QANF3\/F010NTJJK88\/dixoncoles.pdf"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1651215851.668739",
        "client_msg_id": "20c856f2-185d-4e53-a605-516cef444a9b",
        "thread_ts": "1651214885.629909",
        "parent_user_id": "U01665WFPD3",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U013ZS16QJZ"
                ],
                "count": 1
            }
        ]
    },
    {
        "text": "<https:\/\/betcode-org.slack.com\/files\/UBS7QANF3\/FV582N4CE\/lessmann2010.pdf>",
        "files": [
            {
                "id": "FV582N4CE",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "UBS7QANF3",
        "display_as_bot": false,
        "x_files": [
            "FV582N4CE"
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Dfpy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/files\/UBS7QANF3\/FV582N4CE\/lessmann2010.pdf"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1651215859.141569",
        "client_msg_id": "b3a865ab-44ac-4692-ba38-3ca81e556af8",
        "thread_ts": "1651214885.629909",
        "parent_user_id": "U01665WFPD3"
    },
    {
        "text": "<https:\/\/betcode-org.slack.com\/files\/UBS7QANF3\/F010A4MK9MY\/dixon1998.pdf>",
        "files": [
            {
                "id": "F010A4MK9MY",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "UBS7QANF3",
        "display_as_bot": false,
        "x_files": [
            "F010A4MK9MY"
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SUz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/files\/UBS7QANF3\/F010A4MK9MY\/dixon1998.pdf"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1651215879.346329",
        "client_msg_id": "0ed44164-42ce-4b6d-a4e9-e082b14d369d",
        "thread_ts": "1651214885.629909",
        "parent_user_id": "U01665WFPD3"
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1651217682.448939",
        "client_msg_id": "c75d1e2f-c11a-4dcf-bbb4-a05f7be006fd",
        "text": "Yeah, was talking to Rob about adding a getattr to allow `market_book.market_id` and `market_book[\"marketId\"]`\n\nThere is then the question of how its added, does it become the default? Or used when installed? Or do we drop down into bflw as the default for processing historical data?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649422787.301949",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lsP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah, was talking to Rob about adding a getattr to allow "
                            },
                            {
                                "type": "text",
                                "text": "market_book.market_id",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "market_book[\"marketId\"]",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\nThere is then the question of how its added, does it become the default? Or used when installed? Or do we drop down into bflw as the default for processing historical data?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1651218006.034459",
        "client_msg_id": "5a050bfb-f581-413d-888d-21a3ca60cc13",
        "text": "nice yer I wasnt sure were we where at. I guess the one thing I can see slip ups on if its a default install vs todays versions, is people playing around with \/ changing the market book. Also would comparisons like isinstance \/type() work (i.e. in betfairutil uses an if else structure to determine lightweight or not)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649422787.301949",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "upO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "nice yer I wasnt sure were we where at. I guess the one thing I can see slip ups on if its a default install vs todays versions, is people playing around with \/ changing the market book. Also would comparisons like isinstance \/type() work (i.e. in betfairutil uses an if else structure to determine lightweight or not)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01665WFPD3",
        "type": "message",
        "ts": "1651218413.328869",
        "client_msg_id": "1BCA160E-B47E-4E18-BDDF-730CD2C320B2",
        "text": ":thumbsup: :thumbsup: ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb726aecd29f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b726aecd29f68f282238da16946ebb06.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png",
            "first_name": "",
            "real_name": "Kunal Maneck",
            "display_name": "Kunal Maneck",
            "team": "T4G9NBD2M",
            "name": "kdmaneck",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1651214885.629909",
        "parent_user_id": "U01665WFPD3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NWn1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "emoji",
                                "name": "thumbsup",
                                "unicode": "1f44d"
                            },
                            {
                                "type": "text",
                                "text": " "
                            },
                            {
                                "type": "emoji",
                                "name": "thumbsup",
                                "unicode": "1f44d"
                            },
                            {
                                "type": "text",
                                "text": " "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1651218615.925619",
        "client_msg_id": "4406c4ee-c2bb-447e-94ea-b596dc912563",
        "text": "I think the intention is to remove the requirement for a check as this `market_book[\"marketId\"]` would always work, the simulation middleware gets a bit fiddly as well without this change",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649422787.301949",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tNyy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think the intention is to remove the requirement for a check as this "
                            },
                            {
                                "type": "text",
                                "text": "market_book[\"marketId\"]",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " would always work, the simulation middleware gets a bit fiddly as well without this change"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1651218631.857189",
        "client_msg_id": "02ff6c5d-31e0-40f1-b8ed-0c4decfa09f2",
        "text": "FYI <@UBS7QANF3>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649422787.301949",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ir8y",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "FYI "
                            },
                            {
                                "type": "user",
                                "user_id": "UBS7QANF3"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1651219470.557939",
        "client_msg_id": "435a0d32-8675-4254-8542-368788bdf5cb",
        "text": "Yeah <@U4H19D1D2> is exactly right, the only reason for the type checks in `betfairutil` is to work out whether to use key or attribute syntax. I've been discussing with <@U4H19D1D2> and <@UUX1L88MC> about having both bflw and betfair_data MarketBook objects support `__getitem__`. If that's done then the dictionary lookup syntax will work regardless of type",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649422787.301949",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QxI=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " is exactly right, the only reason for the type checks in "
                            },
                            {
                                "type": "text",
                                "text": "betfairutil",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is to work out whether to use key or attribute syntax. I've been discussing with "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "user",
                                "user_id": "UUX1L88MC"
                            },
                            {
                                "type": "text",
                                "text": " about having both bflw and betfair_data MarketBook objects support "
                            },
                            {
                                "type": "text",
                                "text": "__getitem__",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". If that's done then the dictionary lookup syntax will work regardless of type"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "ULDAVFDRP",
                    "U4H19D1D2"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "U847PLYN6",
        "type": "message",
        "ts": "1651270340.131149",
        "edited": {
            "user": "U847PLYN6",
            "ts": "1651270621.000000"
        },
        "client_msg_id": "51a984cf-bda4-4778-b95f-7dc9f8de9345",
        "text": "```from matchbook.apiclient import APIClient\nfrom matchbook.exceptions import AuthError, PasswordError, ApiError, MBError\n\nimport logging\nimport os\nlogger = logging.getLogger(__name__)\nMATCHBOOK_PW = os.environ.get('MATCHBOOK_PW')\nMATCHBOOK_USR = os.environ.get('MATCHBOOK_PW')\napi = APIClient(MATCHBOOK_USR, MATCHBOOK_PW)\n\ndef get_client():\n\n    try:\n        if not api.session_token or api.session_token is None:\n            api.login()\n            logger.warn(f'this is the {api.session_token}')\n    except (AuthError,ApiError,MBError):\n            api.login()\n    return api\n\ndef get_orders():\n    api = get_client()\n    r = api.betting.get_orders(runner_ids=None, market_ids=None, offer_id=None, offset=0, per_page=500,\n                    interval=None, side=Side.Default, status=Status.All, session=None)\n    print(r)\n    print(api.session_token)```\nHi there, I was wondering if anyone is using this repo for matchbook <https:\/\/github.com\/rozzac90\/>\nI cannot log in again after 6 hours to refresh the token. For some reason I can't run the except block to create a new token when ApiError occurs. Does anyone know how best to handle logging in to refresh the session? My get orders function polls indefinitely so I need to be able to handle the logging in again when the token expires. Thanks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ga58efe77b66",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/0a58efe77b6653b9d62b909203366db6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png",
            "first_name": "",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tomirl2008",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "id": 1,
                "thumb_height": 420,
                "thumb_width": 420,
                "thumb_url": "https:\/\/avatars.githubusercontent.com\/u\/25259981?v&#x3D;4",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/rozzac90\/",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "Rory Cole",
                "title": "Rory Cole",
                "fields": [
                    {
                        "value": "London",
                        "title": "Location",
                        "short": true
                    },
                    {
                        "value": "13",
                        "title": "Repositories",
                        "short": true
                    },
                    {
                        "value": "28",
                        "title": "Followers",
                        "short": true
                    }
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NxD",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "from matchbook.apiclient import APIClient\nfrom matchbook.exceptions import AuthError, PasswordError, ApiError, MBError\n\nimport logging\nimport os\nlogger = logging.getLogger(__name__)\nMATCHBOOK_PW = os.environ.get('MATCHBOOK_PW')\nMATCHBOOK_USR = os.environ.get('MATCHBOOK_PW')\napi = APIClient(MATCHBOOK_USR, MATCHBOOK_PW)\n\ndef get_client():\n\n    try:\n        if not api.session_token or api.session_token is None:\n            api.login()\n            logger.warn(f'this is the {api.session_token}')\n    except (AuthError,ApiError,MBError):\n            api.login()\n    return api\n\ndef get_orders():\n    api = get_client()\n    r = api.betting.get_orders(runner_ids=None, market_ids=None, offer_id=None, offset=0, per_page=500,\n                    interval=None, side=Side.Default, status=Status.All, session=None)\n    print(r)\n    print(api.session_token)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi there, I was wondering if anyone is using this repo for matchbook "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/rozzac90\/"
                            },
                            {
                                "type": "text",
                                "text": "\nI cannot log in again after 6 hours to refresh the token. For some reason I can't run the except block to create a new token when ApiError occurs. Does anyone know how best to handle logging in to refresh the session? My get orders function polls indefinitely so I need to be able to handle the logging in again when the token expires. Thanks"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]