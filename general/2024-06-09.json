[
    {
        "user": "U053KV09FKP",
        "type": "message",
        "ts": "1717916701.614409",
        "client_msg_id": "279059ce-d870-41f1-89f4-efd3c01bdfb0",
        "text": "Is the best way to track the results of your different strategies by saving the log files? Or is there some kind of handy code i can put into process closed market?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge686f0ebeb0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e686f0ebeb0b76b2f1e9e3cd9758e4eb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "Shado",
            "real_name": "Shado",
            "display_name": "Adrian",
            "team": "T4G9NBD2M",
            "name": "dualitynonduality_171",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1717916701.614409",
        "reply_count": 10,
        "reply_users_count": 3,
        "latest_reply": "1718879780.947999",
        "reply_users": [
            "U01FJN59B52",
            "U4H19D1D2",
            "U053KV09FKP"
        ],
        "replies": [
            {
                "user": "U01FJN59B52",
                "ts": "1717921571.785779"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1717927390.741809"
            },
            {
                "user": "U053KV09FKP",
                "ts": "1717931090.390589"
            },
            {
                "user": "U053KV09FKP",
                "ts": "1717931718.138839"
            },
            {
                "user": "U053KV09FKP",
                "ts": "1717973723.990559"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1718003911.515289"
            },
            {
                "user": "U053KV09FKP",
                "ts": "1718235634.647259"
            },
            {
                "user": "U053KV09FKP",
                "ts": "1718839391.349139"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1718857379.301859"
            },
            {
                "user": "U053KV09FKP",
                "ts": "1718879780.947999"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1718886484.177766",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "J8IJ4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is the best way to track the results of your different strategies by saving the log files? Or is there some kind of handy code i can put into process closed market?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01FJN59B52",
        "type": "message",
        "ts": "1717921571.785779",
        "client_msg_id": "6b881c39-ea79-46dc-bfda-4cf59f60d9b8",
        "text": "Yeah `process_closed_market` works well. Depends on your system I suppose, but my code writes results to the DB.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ec27c9e723af",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-11-26\/1537761741556_ec27c9e723af59f09f68_72.png",
            "first_name": "A",
            "real_name": "A",
            "display_name": "A",
            "team": "T4G9NBD2M",
            "name": "adam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1717916701.614409",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "r53MM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah "
                            },
                            {
                                "type": "text",
                                "text": "process_closed_market",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " works well. Depends on your system I suppose, but my code writes results to the DB."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1717927390.741809",
        "client_msg_id": "3B6F1353-ACB9-4C86-B18B-723E310818E7",
        "text": "You seen the example logging controls?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1717916701.614409",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5s96r",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You seen the example logging controls?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U053KV09FKP",
        "type": "message",
        "ts": "1717931090.390589",
        "client_msg_id": "73125803-648F-4BEE-BC69-CE10F77E2933",
        "text": "I butchered the jupyterloggingcontrol so it would run after framework.run. I don’t know how to make it work on a live strategy",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge686f0ebeb0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e686f0ebeb0b76b2f1e9e3cd9758e4eb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "Shado",
            "real_name": "Shado",
            "display_name": "Adrian",
            "team": "T4G9NBD2M",
            "name": "dualitynonduality_171",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1717916701.614409",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8MnYt",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I butchered the jupyterloggingcontrol so it would run after framework.run. I "
                            },
                            {
                                "type": "text",
                                "text": "don’t"
                            },
                            {
                                "type": "text",
                                "text": " know how to make it work on a live strategy"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U053KV09FKP",
        "type": "message",
        "ts": "1717931718.138839",
        "client_msg_id": "6C5DDF45-52B0-4EDC-B7E9-3AA358EFE584",
        "text": "Gonna try adding the backtestlogging control and see how it goes ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge686f0ebeb0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e686f0ebeb0b76b2f1e9e3cd9758e4eb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "Shado",
            "real_name": "Shado",
            "display_name": "Adrian",
            "team": "T4G9NBD2M",
            "name": "dualitynonduality_171",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1717916701.614409",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "51hcz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Gonna try adding the backtestlogging control and see how it goes "
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U053KV09FKP",
        "type": "message",
        "ts": "1717973723.990559",
        "edited": {
            "user": "U053KV09FKP",
            "ts": "1717974901.000000"
        },
        "client_msg_id": "8b026b3e-7cbd-4bed-a4f1-1f2b36871676",
        "text": "Ok, so thanks for the suggestions. I tried using the backtestloggingcontrol example. A couple of things about the orders.txt output:\n• It only recorded one of my bets in the first market when I had two\n• It seems like `_process_cleared_markets` isn't running at all as I am not seeing any of those 'extra' fields appear\nThe logs are recording these things just fine, however, so it's just an issue with how the example is writing to orders.txt\nHere is the code I'm running. the logging control is unchanged from the example. Any ideas?\n```# Logger setup\nlogger = logging.getLogger()\ncustom_format = \"%(asctime)s %(levelname) %(message)s\"\nformatter = jsonlogger.JsonFormatter(custom_format)\nformatter.converter = time.gmtime\n# Adding StreamHandler to output to sys.stderr\nlog_handler_stream = logging.StreamHandler()\nlog_handler_stream.setFormatter(formatter)\nlogger.addHandler(log_handler_stream)\n# Adding FileHandler to output to a specified file\nlog_file_path = '\/Users\/adrian\/Data\/logs\/betting.log'\nlog_handler_file = logging.FileHandler(log_file_path)\nlog_handler_file.setFormatter(formatter)\nlogger.addHandler(log_handler_file)\nlogger.setLevel(logging.INFO)\n...\ncontrol = backtestloggingcontrol.BacktestLoggingControl()\nframework.add_logging_control(control)\nframework.run()```\nHere is the output in the log file (correct and complete):\n```{\"asctime\": \"2024-06-09 11:24:35,566\", \"levelname\": \"INFO\", \"message\": \"Market level cleared\", \"taskName\": null, \"market_id\": \"1.229732924\", \"profit\": -3.01, \"bet_count\": 2}\n{\"asctime\": \"2024-06-09 11:24:35,567\", \"levelname\": \"INFO\", \"message\": \"Cleared market\", \"taskName\": null, \"market_id\": \"1.229732924\", \"bet_count\": 2, \"profit\": -3.01, \"commission\": 0.0}```\nAnd here is the output from the backtestlogging control's orders.txt (incomplete):\n```bet_id,strategy_name,market_id,selection_id,trade_id,date_time_placed,price,price_matched,size,size_matched,profit,side,elapsed_seconds_executable,order_status,market_note,trade_notes,order_notes\n351219139942,take_bsp,1.229732924,9541871,8902a6e5-5745-4fbf-85ab-f68b02de316d,2024-06-09 11:21:00.429400,3.0,2.761065519504482,2.0,2,-2.0,BACK,54.478439,Execution complete,\"2.68,2.74,2.68\",,\"2.507662997872342,2.0\"```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge686f0ebeb0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e686f0ebeb0b76b2f1e9e3cd9758e4eb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "Shado",
            "real_name": "Shado",
            "display_name": "Adrian",
            "team": "T4G9NBD2M",
            "name": "dualitynonduality_171",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1717916701.614409",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/IiI5",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ok, so thanks for the suggestions. I tried using the backtestloggingcontrol example. A couple of things about the orders.txt output:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "It only recorded one of my bets in the first market when I had two"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "It seems like "
                                    },
                                    {
                                        "type": "text",
                                        "text": "_process_cleared_markets",
                                        "style": {
                                            "code": true
                                        }
                                    },
                                    {
                                        "type": "text",
                                        "text": " isn't running at all as I am not seeing any of those 'extra' fields appear"
                                    }
                                ]
                            }
                        ],
                        "style": "bullet",
                        "indent": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The logs are recording these things just fine, however, so it's just an issue with how the example is writing to orders.txt\nHere is the code I'm running. the logging control is unchanged from the example. Any ideas?\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# Logger setup\nlogger = logging.getLogger()\ncustom_format = \"%(asctime)s %(levelname) %(message)s\"\nformatter = jsonlogger.JsonFormatter(custom_format)\nformatter.converter = time.gmtime\n# Adding StreamHandler to output to sys.stderr\nlog_handler_stream = logging.StreamHandler()\nlog_handler_stream.setFormatter(formatter)\nlogger.addHandler(log_handler_stream)\n# Adding FileHandler to output to a specified file\nlog_file_path = '\/Users\/adrian\/Data\/logs\/betting.log'\nlog_handler_file = logging.FileHandler(log_file_path)\nlog_handler_file.setFormatter(formatter)\nlogger.addHandler(log_handler_file)\nlogger.setLevel(logging.INFO)\n...\ncontrol = backtestloggingcontrol.BacktestLoggingControl()\nframework.add_logging_control(control)\nframework.run()"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Here is the output in the log file (correct and complete):\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{\"asctime\": \"2024-06-09 11:24:35,566\", \"levelname\": \"INFO\", \"message\": \"Market level cleared\", \"taskName\": null, \"market_id\": \"1.229732924\", \"profit\": -3.01, \"bet_count\": 2}\n{\"asctime\": \"2024-06-09 11:24:35,567\", \"levelname\": \"INFO\", \"message\": \"Cleared market\", \"taskName\": null, \"market_id\": \"1.229732924\", \"bet_count\": 2, \"profit\": -3.01, \"commission\": 0.0}"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "And here is the output from the backtestlogging control's orders.txt (incomplete):\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "bet_id,strategy_name,market_id,selection_id,trade_id,date_time_placed,price,price_matched,size,size_matched,profit,side,elapsed_seconds_executable,order_status,market_note,trade_notes,order_notes\n351219139942,take_bsp,1.229732924,9541871,8902a6e5-5745-4fbf-85ab-f68b02de316d,2024-06-09 11:21:00.429400,3.0,2.761065519504482,2.0,2,-2.0,BACK,54.478439,Execution complete,\"2.68,2.74,2.68\",,\"2.507662997872342,2.0\""
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    }
]