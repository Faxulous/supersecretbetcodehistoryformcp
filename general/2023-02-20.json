[
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676899189.900359",
        "client_msg_id": "5c364bdd-6050-4b50-8adc-35cef19cbce1",
        "text": "Sounds like you have a thread that isn't stopping, would need to see your code",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676434126.311199",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lYK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Sounds like you have a thread that isn't stopping, would need to see your code"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U04980ZT6UX"
                ],
                "count": 1
            }
        ]
    },
    {
        "text": "A nice one for the inplay boys just now :money_mouth_face:",
        "files": [
            {
                "id": "F04Q7DEELP8",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "UQL0QDEKA",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UFmX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "A nice one for the inplay boys just now "
                            },
                            {
                                "type": "emoji",
                                "name": "money_mouth_face",
                                "unicode": "1f911"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1676903093.994419",
        "client_msg_id": "2af1f311-d011-4209-9711-1349cdbf772b"
    },
    {
        "text": "*Backtester*\nHi guys,\nI have spent a lot of time reconciling my self-developed backtester against Flumine backtester. I am noticing big inconsistencies that I would appreciate someone helping me to understand.\n\nIn many examples, I have a limit order sitting on the queue with a certain piq (according to Flumine), and I see many trades happening at the same price of my order, and my position in the queue only gets reduced by a fraction of these trades.\n\nA complete example follows below:\nAt timestamp t0,  I have a limit order of size 10 at 3.55 sitting in the book with piq 27.89 (from Flumine).\nIn the first screenshot (taken at t0), we can see that 33.52 $ have been traded at the price of 3.55.\n\nA few moments later,  at timestamp t1, (second screenshot), we can see that $62.25 have been traded at the price of 3.55, that is, a difference of 28.73$, which I interpret as trades happening at that price.\nSurprisingly, my position in the queue (piq) according to Flumine is now 13 and I haven't filled anything. I would have expected to fill in 28.73 - 27.89 = 0.84, which is the difference between the trades happening and my piq of my order, and now have a position in the queue of 0 (which would mean I am at the top of the queue).\n\nMy main assumption here is that the difference (in different timestamps) of the traded volume for a given price is the amount traded on that price, and that this amount should either reduce my piq by the exact traded amount or fill my order in case the traded amount is bigger than my piq. Am I missing anything here?",
        "files": [
            {
                "id": "F04QHD34U04",
                "mode": "hidden_by_limit"
            },
            {
                "id": "F04QERSF34K",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "e7f",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Backtester",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nHi guys,\nI have spent a lot of time reconciling my self-developed backtester against Flumine backtester. I am noticing big inconsistencies that I would appreciate someone helping me to understand.\n\nIn many examples, I have a limit order sitting on the queue with a certain piq (according to Flumine), and I see many trades happening at the same price of my order, and my position in the queue only gets reduced by a fraction of these trades.\n\nA complete example follows below:\nAt timestamp t0,  I have a limit order of size 10 at 3.55 sitting in the book with piq 27.89 (from Flumine).\nIn the first screenshot (taken at t0), we can see that 33.52 $ have been traded at the price of 3.55.\n\nA few moments later,  at timestamp t1, (second screenshot), we can see that $62.25 have been traded at the price of 3.55, that is, a difference of 28.73$, which I interpret as trades happening at that price.\nSurprisingly, my position in the queue (piq) according to Flumine is now 13 and I haven't filled anything. I would have expected to fill in 28.73 - 27.89 = 0.84, which is the difference between the trades happening and my piq of my order, and now have a position in the queue of 0 (which would mean I am at the top of the queue).\n\nMy main assumption here is that the difference (in different timestamps) of the traded volume for a given price is the amount traded on that price, and that this amount should either reduce my piq by the exact traded amount or fill my order in case the traded amount is bigger than my piq. Am I missing anything here?"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1676914640.844969",
        "client_msg_id": "3b8df152-48fb-4128-b06e-e1d345e98d26",
        "thread_ts": "1676914640.844969",
        "reply_count": 11,
        "reply_users_count": 3,
        "latest_reply": "1676923888.941879",
        "reply_users": [
            "U04980ZT6UX",
            "U4H19D1D2",
            "U016TGY3676"
        ],
        "replies": [
            {
                "user": "U04980ZT6UX",
                "ts": "1676919528.994449"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1676919704.187129"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1676920059.557509"
            },
            {
                "user": "U016TGY3676",
                "ts": "1676920167.511649"
            },
            {
                "user": "U016TGY3676",
                "ts": "1676920454.730869"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1676920456.266949"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1676923522.058419"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1676923687.837989"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1676923827.917789"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1676923866.816899"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1676923888.941879"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1676923888.941879",
        "reactions": [
            {
                "name": "white_check_mark",
                "users": [
                    "U04980ZT6UX"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676915568.423419",
        "client_msg_id": "e990e0f6-fbbe-408c-9c35-baba36a13880",
        "text": "Thanks <@U9JHLMZB4>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676758025.919229",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fuAG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks "
                            },
                            {
                                "type": "user",
                                "user_id": "U9JHLMZB4"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676919528.994449",
        "client_msg_id": "9e770bd5-bd61-4d2e-92b7-657a001ed070",
        "text": "Diving deeper in on Flumine, it seems to me that the inconsistency with respect to my own backtester is cause by this function:\n\n\n```def _calculate_process_traded(self, publish_time: int, traded_size: float) -&gt; float:\n    _traded_size = traded_size \/ 2\n    if self._piq - _traded_size &lt; 0:\n        size = _traded_size - self._piq\n        size = round(min(self.size_remaining, size), 2)\n        if size:\n            self._update_matched(\n                [\n                    publish_time,\n                    self.order.order_type.price,\n                    size,\n                ]\n            )\n        _matched = (self._piq + size) * 2\n        self._piq = 0\n        return _matched\n    else:\n        self._piq -= _traded_size\n        if logger.isEnabledFor(logging.DEBUG):\n            logger.debug(\n                \"Simulated order {0} PIQ: {1}\".format(self.order.id, self._piq)\n            )\n        return traded_size```\nIf I understand correctly, we only assume execution if the traded amount is greater than 2 times my piq, and every time there is a trade, my piq only gets reduced by half the traded amount. If this is correct, could someone explain why you decided to make these hypotheses? <@U4H19D1D2>, I understand that might have been done to be conservative on the execution, at the same time, this leads to further inconsistencies such as having a piq that is higher than the volume on the top of the orderbook (which is impossible).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vwn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Diving deeper in on Flumine, it seems to me that the inconsistency with respect to my own backtester is cause by this function:\n\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def _calculate_process_traded(self, publish_time: int, traded_size: float) -> float:\n    _traded_size = traded_size \/ 2\n    if self._piq - _traded_size < 0:\n        size = _traded_size - self._piq\n        size = round(min(self.size_remaining, size), 2)\n        if size:\n            self._update_matched(\n                [\n                    publish_time,\n                    self.order.order_type.price,\n                    size,\n                ]\n            )\n        _matched = (self._piq + size) * 2\n        self._piq = 0\n        return _matched\n    else:\n        self._piq -= _traded_size\n        if logger.isEnabledFor(logging.DEBUG):\n            logger.debug(\n                \"Simulated order {0} PIQ: {1}\".format(self.order.id, self._piq)\n            )\n        return traded_size"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nIf I understand correctly, we only assume execution if the traded amount is greater than 2 times my piq, and every time there is a trade, my piq only gets reduced by half the traded amount. If this is correct, could someone explain why you decided to make these hypotheses? "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": ", I understand that might have been done to be conservative on the execution, at the same time, this leads to further inconsistencies such as having a piq that is higher than the volume on the top of the orderbook (which is impossible)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676919704.187129",
        "client_msg_id": "3B1AC6F5-D121-44F2-8079-C355C574DD7F",
        "text": "Because traded volume is double what is actually matched, flumine is correct ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TTdgw",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Because traded volume is double what is actually matched, flumine is correct "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676920059.557509",
        "client_msg_id": "a8289602-a29d-48ff-bb9e-7fa8dc186e49",
        "text": "Why is traded volume double of what is actually matched <@U4H19D1D2>?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ewoa",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Why is traded volume double of what is actually matched "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": "?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1676920167.511649",
        "client_msg_id": "9dfc84ea-4b9b-475c-ba50-35f9d1f93365",
        "text": "As I was reading the first message, my immediate thought was somebody didn't realise that betfair \"matched\" volume is actually 2x what was available. They basically say that both parties get matched, therefore £10 of bets is £20 matched.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+A0yb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "As I was reading the first message, my immediate thought was somebody didn't realise that betfair \"matched\" volume is actually 2x what was available. They basically say that both parties get matched, therefore £10 of bets is £20 matched."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1676920454.730869",
        "client_msg_id": "c071e7d5-af14-46a4-b380-b6d41a80200d",
        "text": "<https:\/\/caanberry.com\/using-matched-volumes\/#:~:text=The%20calculation%20for%20matched%20volume,be%20%C2%A320%20at%202.0|https:\/\/caanberry.com\/using-matched-volumes\/#:~:text=The%20calculation%20for%20matched%20volume,be%20%C2%A320%20at%202.0>.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "attachments": [
            {
                "image_url": "https:\/\/i0.wp.com\/caanberry.com\/wp-content\/uploads\/2018\/09\/Matched-Volumes-on-Betfair.jpg",
                "image_width": 928,
                "image_height": 616,
                "image_bytes": 123071,
                "from_url": "https:\/\/caanberry.com\/using-matched-volumes\/#:~:text=The%20calculation%20for%20matched%20volume,be%20%C2%A320%20at%202.0",
                "service_icon": "https:\/\/i0.wp.com\/caanberry.com\/wp-content\/uploads\/2019\/06\/cropped-Logo2-230x230.jpg",
                "ts": 1538897469,
                "id": 1,
                "original_url": "https:\/\/caanberry.com\/using-matched-volumes\/#:~:text=The%20calculation%20for%20matched%20volume,be%20%C2%A320%20at%202.0",
                "fallback": "Using Matched Volumes to Your Advantage (on Betfair) -",
                "text": "Do you use matched volumes to select your trades? If not, you certainly should be taking a look at this post. It explains why this metric is so important...",
                "title": "Using Matched Volumes to Your Advantage (on Betfair) -",
                "title_link": "https:\/\/caanberry.com\/using-matched-volumes\/#:~:text=The%20calculation%20for%20matched%20volume,be%20%C2%A320%20at%202.0",
                "service_name": "caanberry.com",
                "fields": [
                    {
                        "value": "Caan",
                        "title": "Written by",
                        "short": true
                    },
                    {
                        "value": "4 minutes",
                        "title": "Est. reading time",
                        "short": true
                    }
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DxYh1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/caanberry.com\/using-matched-volumes\/#:~:text=The%20calculation%20for%20matched%20volume,be%20%C2%A320%20at%202.0",
                                "text": "https:\/\/caanberry.com\/using-matched-volumes\/#:~:text=The%20calculation%20for%20matched%20volume,be%20%C2%A320%20at%202.0"
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676920456.266949",
        "client_msg_id": "6f67ac58-b4f2-4b66-8c07-a819f0164636",
        "text": "Thanks a lot guys. Could you share a reference where this is exaplined? I have traded many different asset classes and this is the first time I encounter this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pcc1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks a lot guys. Could you share a reference where this is exaplined? I have traded many different asset classes and this is the first time I encounter this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "<@U4H19D1D2>\nA separate inconsistency I have found:\nThe best available to lay (price 3.55) has a size of 11.99 (see screenshot)\nAt this same timestamp, my open limit order at 3.55 has a piq of 13.54 (see screenshot)\n\nI think it should not be possible to have a piq that is higher than the available size in that level of the book.",
        "files": [
            {
                "id": "F04QFCJQ4D9",
                "mode": "hidden_by_limit"
            },
            {
                "id": "F04Q8TZKRBQ",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7Xko",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": "\nA separate inconsistency I have found:\nThe best available to lay (price 3.55) has a size of 11.99 (see screenshot)\nAt this same timestamp, my open limit order at 3.55 has a piq of 13.54 (see screenshot)\n\nI think it should not be possible to have a piq that is higher than the available size in that level of the book."
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1676923522.058419",
        "client_msg_id": "873e6414-17fa-442a-a070-bd75369c47ce",
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX"
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676923687.837989",
        "client_msg_id": "5A1F6424-740A-4910-81A7-B3CCEE045957",
        "text": "That sounds like a bug \/limitation ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LGwj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That sounds like a "
                            },
                            {
                                "type": "text",
                                "text": "b"
                            },
                            {
                                "type": "text",
                                "text": "ug \/limitation "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676923827.917789",
        "client_msg_id": "6f2e6304-fd7c-494f-aae2-89600ee22dc0",
        "text": "Do you have any ideas where the bug\/limitation could be coming from?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "E1J=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Do you have any ideas where the bug\/limitation could be coming from?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676923866.816899",
        "client_msg_id": "3593C6F4-5170-4C39-A360-F14081B7CCB2",
        "text": "Cancellations, one of the limitations listed in the docs ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Uun",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Cancellation"
                            },
                            {
                                "type": "text",
                                "text": "s, one of the "
                            },
                            {
                                "type": "text",
                                "text": "limitation"
                            },
                            {
                                "type": "text",
                                "text": "s listed in the docs "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676923888.941879",
        "client_msg_id": "f4527367-d8b9-4c2e-a051-ffe39eb0a4da",
        "text": "That makes sense! Tks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676914640.844969",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ciSu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That makes sense! Tks"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "*Data collected using Flumine*\nHey there, I'm using Flumine's data recorder to collect streaming data. During my exploratory data analysis, I noticed some potential inconsistencies in the data and would appreciate any thoughts or insights.\n\nTo analyze the data, I've organized it into a sorted timestamp dataframe that includes both trades and the orderbook. To account for double-counting, I've divided the size of the trades by two, which has resulted in some interesting observations.\n\nFor example, in the screenshot, just before a trade occurred, the best available price to lay at level 0 was 3.55, and the size was 11.9$. At the time of the trade, the trade price was 3.55$  with a size of  5.995 * 2 = 11.99$ (in my table, I display this as 5.995$ after dividing by two, as previously mentioned). The entire level 0 was consumed by this trade, as indicated by the fact that the level with a price of 3.55 no longer existed in the timestamp just after the trade. Based on this, I believe that the actual traded amount was $11.9, and not 0.5 * $11.9 as I initially thought.\n\nHowever, I've also noticed that in the majority of cases, the volume consumed from the orderbook is only half of the traded amount, which suggests that dividing by two is necessary.\n\n\nThis leads to the strange behavior that sometimes I need to divide the traded size by two, while other times I do not. Do you have any ideas to explain this?",
        "files": [
            {
                "id": "F04QFJ1JQPL",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U04980ZT6UX",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SNcE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Data collected using Flumine",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nHey there, I'm using Flumine's data recorder to collect streaming data. During my exploratory data analysis, I noticed some potential inconsistencies in the data and would appreciate any thoughts or insights.\n\nTo analyze the data, I've organized it into a sorted timestamp dataframe that includes both trades and the orderbook. To account for double-counting, I've divided the size of the trades by two, which has resulted in some interesting observations.\n\nFor example, in the screenshot, just before a trade occurred, the best available price to lay at level 0 was 3.55, and the size was 11.9$. At the time of the trade, the trade price was 3.55$  with a size of  5.995 * 2 = 11.99$ (in my table, I display this as 5.995$ after dividing by two, as previously mentioned). The entire level 0 was consumed by this trade, as indicated by the fact that the level with a price of 3.55 no longer existed in the timestamp just after the trade. Based on this, I believe that the actual traded amount was $11.9, and not 0.5 * $11.9 as I initially thought.\n\nHowever, I've also noticed that in the majority of cases, the volume consumed from the orderbook is only half of the traded amount, which suggests that dividing by two is necessary.\n\n\nThis leads to the strange behavior that sometimes I need to divide the traded size by two, while other times I do not. Do you have any ideas to explain this?"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1676925528.530759",
        "edited": {
            "user": "U04980ZT6UX",
            "ts": "1676925647.000000"
        },
        "client_msg_id": "c2988757-5dc8-4fab-9d11-d32bcaf3826a",
        "thread_ts": "1676925528.530759",
        "reply_count": 1,
        "reply_users_count": 1,
        "latest_reply": "1676966714.212449",
        "reply_users": [
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1676966714.212449"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1676966714.212449"
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676927940.214809",
        "client_msg_id": "00bd6b42-0874-4202-8a18-3de7de974cce",
        "text": "*Conflate logic*\nAnother question guys,\nFor the Flumine simulation, I am trying to check wether the conflate_ms is working or not, and it seems to me that it is not.\nI have added a print of the timestamps (market_book.publish_timestemp_epoch) in the *process_market_book* , and no matter what conflate_ms I use (here I am using 10_000 ms), it always receives the same updates (which seems to be the most granular possible).\nIs there anything extra required to make conflate_ms work in simulation mode?\n\nBelow is how I am instantiating the FlumineStrategy.\n```flumine_strategy = FlumineStrategy(\n    strategy = strategy,\n    client=client,\n    name=\"bt\",\n    market_filter={\"markets\": [market_file]},\n    conflate_ms=10_000,\n    max_live_trade_count=1000,\n    max_selection_exposure=1000,\n    max_order_exposure=1000\n)```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676927940.214809",
        "reply_count": 8,
        "reply_users_count": 4,
        "latest_reply": "1676966600.494159",
        "reply_users": [
            "UUE6E1LA1",
            "U4H19D1D2",
            "U04980ZT6UX",
            "U016TGY3676"
        ],
        "replies": [
            {
                "user": "UUE6E1LA1",
                "ts": "1676928108.211119"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1676928122.020409"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1676928129.957329"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1676929896.163219"
            },
            {
                "user": "U016TGY3676",
                "ts": "1676934445.587769"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1676936281.251379"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1676966569.663289"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1676966600.494159"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1676966600.494159",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "4Pu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Conflate logic",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nAnother question guys,\nFor the Flumine simulation, I am trying to check wether the conflate_ms is working or not, and it seems to me that it is not.\nI have added a print of the timestamps (market_book.publish_timestemp_epoch) in the "
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , and no matter what conflate_ms I use (here I am using 10_000 ms), it always receives the same updates (which seems to be the most granular possible).\nIs there anything extra required to make conflate_ms work in simulation mode?\n\nBelow is how I am instantiating the FlumineStrategy.\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "flumine_strategy = FlumineStrategy(\n    strategy = strategy,\n    client=client,\n    name=\"bt\",\n    market_filter={\"markets\": [market_file]},\n    conflate_ms=10_000,\n    max_live_trade_count=1000,\n    max_selection_exposure=1000,\n    max_order_exposure=1000\n)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1676928108.211119",
        "client_msg_id": "31653599-7a2b-4ce4-8e24-f3ca65c4887b",
        "text": "Is 10_000 a flumine thing (as opposed to 10000) ?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676927940.214809",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "qb\/V8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is 10_000 a flumine thing (as opposed to 10000) ?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676928122.020409",
        "client_msg_id": "742C18EA-891A-4869-ACEA-2FB3E958003A",
        "text": "Live only",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676927940.214809",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "f9rb8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Live only"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1676928129.957329",
        "client_msg_id": "A067D489-771A-4087-9F5F-07646EB664E3",
        "text": "Python thing ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676927940.214809",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Cn1tS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Python thing "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676929896.163219",
        "client_msg_id": "1cf5d525-0b26-4e54-80fc-f1daf1f8d327",
        "text": "So conflate only works in Live mode? Any way to make it work on simulation ?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676927940.214809",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fWfqd",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So conflate only works in Live mode? Any way to make it work on simulation ?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1676934445.587769",
        "client_msg_id": "a697ac5c-7575-4fcc-9453-52dbdc4a9391",
        "text": "I may be missing something here, but _why_ would you want to conflate? You can do your own conflation using the publish time.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676927940.214809",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "2OV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I may be missing something here, but "
                            },
                            {
                                "type": "text",
                                "text": "why",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " would you want to conflate? You can do your own conflation using the publish time."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1676936281.251379",
        "client_msg_id": "a5ca451b-93f6-44e3-8ea6-45c92a3be9bb",
        "text": "Yes, that's the solution I came up with. Thanks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1676927940.214809",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "r=70C",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes, that's the solution I came up with. Thanks"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]