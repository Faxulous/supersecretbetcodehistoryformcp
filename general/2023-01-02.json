[
    {
        "user": "USWDY5P7G",
        "type": "message",
        "ts": "1672675956.462259",
        "edited": {
            "user": "USWDY5P7G",
            "ts": "1672676074.000000"
        },
        "client_msg_id": "26ad2ff2-2e72-4344-8203-003568ff6c28",
        "text": "Here's a question for Flumine experts, related to the code below, executed on real-time Betfair markets (no backtesting).\n\nI need to capture the winner of a market, but it looks like execution never gets to the `# DO SOMETHING` line.\n\nFor the record, the code is definitely reachable: putting a `print(runner.status)` statement just below the `for` line, always prints `ACTIVE` when the market is still open.\n\n*Question: does Flumine trigger `process_market_book` even on the very last message received by Betfair streamer? (market status == CLOSED)*\n\n```def process_market_book(self, market: Market, market_book: MarketBook) -&gt; None:\n    for runner in market_book.runners:\n        if runner.status == \"WINNER\":\n            # DO SOMETHING```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "693b14d0cc42",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-08-29\/2425858826214_693b14d0cc42bdbfb86a_72.jpg",
            "first_name": "Fab",
            "real_name": "Fab",
            "display_name": "Fab",
            "team": "T4G9NBD2M",
            "name": "me1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1672675956.462259",
        "reply_count": 2,
        "reply_users_count": 2,
        "latest_reply": "1672676918.165159",
        "reply_users": [
            "U01DVUAE2G1",
            "USWDY5P7G"
        ],
        "replies": [
            {
                "user": "U01DVUAE2G1",
                "ts": "1672676253.789489"
            },
            {
                "user": "USWDY5P7G",
                "ts": "1672676918.165159"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "x7yv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Here's a question for Flumine experts, related to the code below, executed on real-time Betfair markets (no backtesting).\n\nI need to capture the winner of a market, but it looks like execution never gets to the "
                            },
                            {
                                "type": "text",
                                "text": "# DO SOMETHING",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " line.\n\nFor the record, the code is definitely reachable: putting a "
                            },
                            {
                                "type": "text",
                                "text": "print(runner.status)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " statement just below the "
                            },
                            {
                                "type": "text",
                                "text": "for",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " line, always prints "
                            },
                            {
                                "type": "text",
                                "text": "ACTIVE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " when the market is still open.\n\n"
                            },
                            {
                                "type": "text",
                                "text": "Question: does Flumine trigger ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "process_market_book",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " even on the very last message received by Betfair streamer? (market status == CLOSED)",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def process_market_book(self, market: Market, market_book: MarketBook) -> None:\n    for runner in market_book.runners:\n        if runner.status == \"WINNER\":\n            # DO SOMETHING"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1672676253.789489",
        "client_msg_id": "ba94f704-f4fc-4699-b13f-af012b844464",
        "text": "probably should use \"process_closed_market\" instead",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1672675956.462259",
        "parent_user_id": "USWDY5P7G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "apwT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "probably should use \"process_closed_market\" instead"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "heavy_plus_sign",
                "users": [
                    "URMM9463X",
                    "U4H19D1D2",
                    "U016TGY3676"
                ],
                "count": 3
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1672676330.776529",
        "edited": {
            "user": "U04980ZT6UX",
            "ts": "1672676599.000000"
        },
        "client_msg_id": "d6e4e28e-6b52-4075-be99-5804c4c1d405",
        "text": "*FLUMINE BACKTETER* \nGuys, I wanted to ask a couple of questions regarding the backtester.\n\n1 - How does the backtester decide if an order would be executed? Is it only based on traded_volume? Or it also considers orders executed if the prices in the orderbook would have crossed your odd (even though there was 0 traded volume in the meantime) ?\nExample: I put a BACK order at odd 1.4 when the prices in the book are: (best available to back = 1.2 and best available to lay = 1.3). After 10 minutes there have been no trades, but the odds in the orderbook shifted to : best available to back = 1.5 and best available to lay = 1.6 with 0 traded volume in the period.\nAssuming the backtester would consider any execution in this scenario,  what are the assumptions regarding the executed volume ? Of course, if I had put 100 million dollars in this order, it wouldn't be completely filled, but would certainly be partially filled in real life.\n\n2 - What are the assumptions on the priority queue? Does the backtester only execute your order if the traded volume crosses your price (meaning if you have a BACK open order at odd 1.4, and there is a trade at 1.4, how does the backtester handle the priority queue? Will it execute anything? Or only executed if there is a trade with odd greater than 1.4?\n\nThe reason I am asking is because it seems that the backtester shows way less execution than what I get in reality. Any personal experiences regarding this would be very much appreciated",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1672676330.776529",
        "reply_count": 4,
        "reply_users_count": 3,
        "latest_reply": "1672738430.996149",
        "reply_users": [
            "U4H19D1D2",
            "U04980ZT6UX",
            "U01D23DDMTQ"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1672688411.176209"
            },
            {
                "user": "U04980ZT6UX",
                "ts": "1672714181.567339"
            },
            {
                "user": "U01D23DDMTQ",
                "ts": "1672714232.447919"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1672738430.996149"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1672738430.996149",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "yF1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "FLUMINE BACKTETER ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nGuys, I wanted to ask a couple of questions regarding the backtester.\n\n1 - How does the backtester decide if an order would be executed? Is it only based on traded_volume? Or it also considers orders executed if the prices in the orderbook would have crossed your odd (even though there was 0 traded volume in the meantime) ?\nExample: I put a BACK order at odd 1.4 when the prices in the book are: (best available to back = 1.2 and best available to lay = 1.3). After 10 minutes there have been no trades, but the odds in the orderbook shifted to : best available to back = 1.5 and best available to lay = 1.6 with 0 traded volume in the period.\nAssuming the backtester would consider any execution in this scenario,  what are the assumptions regarding the executed volume ? Of course, if I had put 100 million dollars in this order, it wouldn't be completely filled, but would certainly be partially filled in real life.\n\n2 - What are the assumptions on the priority queue? Does the backtester only execute your order if the traded volume crosses your price (meaning if you have a BACK open order at odd 1.4, and there is a trade at 1.4, how does the backtester handle the priority queue? Will it execute anything? Or only executed if there is a trade with odd greater than 1.4?\n\nThe reason I am asking is because it seems that the backtester shows way less execution than what I get in reality. Any personal experiences regarding this would be very much appreciated"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "USWDY5P7G",
        "type": "message",
        "ts": "1672676918.165159",
        "client_msg_id": "362d11a1-d570-4c68-91ef-e100ddf20a68",
        "text": "Thanks Aaron, it now works",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "693b14d0cc42",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-08-29\/2425858826214_693b14d0cc42bdbfb86a_72.jpg",
            "first_name": "Fab",
            "real_name": "Fab",
            "display_name": "Fab",
            "team": "T4G9NBD2M",
            "name": "me1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1672675956.462259",
        "parent_user_id": "USWDY5P7G",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xPcE7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks Aaron, it now works"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1672688411.176209",
        "edited": {
            "user": "U4H19D1D2",
            "ts": "1672738465.000000"
        },
        "client_msg_id": "C74419A6-A60C-4347-B6EF-7937192D293E",
        "text": "1) On execution it will check available and then yes it uses traded volume only, so limitation will be what you describe. There has been discussions around adding this functionality but it is limited to mostly low liquidity markets which simulation has trouble with anyway (market impact) so has purposely been left.\n\n2) Your order will get placed at the back of the queue and will be matched once all liquidity ahead has been matched, limitation here is that we can’t handle cancellations in front.\n\nAs you mention it is common for the simulation to under match what happens in live, this is intentional as thoughts are the latter being more dangerous",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1672676330.776529",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "cHN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "1) On execution it will check available and then yes it uses traded volume only, so limitation will be what you describe. There has been discussions around adding this functionality but it is limited to mostly low liquidity markets which simulation has trouble with anyway (market impact) so has purposely been left.\n\n2) Your order will get placed at the back of the queue and will be matched once all liquidity ahead has been matched, limitation here is that we can’t handle cancellations in front.\n\nAs you mention it is common for the simulation to under match what happens in live, this is intentional as thoughts are the latter being more dangerous"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "white_check_mark",
                "users": [
                    "U04980ZT6UX",
                    "U01D23DDMTQ"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "U04980ZT6UX",
        "type": "message",
        "ts": "1672714181.567339",
        "client_msg_id": "F681C5A3-2A4E-4026-8DB3-BD890D366770",
        "text": "This is extremely helpful to understand <@U4H19D1D2>  thank you so much ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb1b2f82a1a4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b1b2f82a1a49a547cbc7487b48805187.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "AI",
            "real_name": "AI Trader",
            "display_name": "AI Trader",
            "team": "T4G9NBD2M",
            "name": "menocineto",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1672676330.776529",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ke7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This is extremely helpful to understand "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": "  thank you so much "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01D23DDMTQ",
        "type": "message",
        "ts": "1672714232.447919",
        "client_msg_id": "DF2D054B-D7E5-4AE9-8781-FF3EB71B7489",
        "text": "I was just searching this chat for the same question :+1::skin-tone-2: :blush: ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "5d6a9e5a85c0",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-06-26\/2219792322468_5d6a9e5a85c01e3abc9e_72.png",
            "first_name": "Andrew",
            "real_name": "Andrew",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "agruskin",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1672676330.776529",
        "parent_user_id": "U04980ZT6UX",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rGe",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I was just searching this chat for the same question "
                            },
                            {
                                "type": "emoji",
                                "name": "thumbsup",
                                "unicode": "1f44d-1f3fb",
                                "skin_tone": 2
                            },
                            {
                                "type": "text",
                                "text": " "
                            },
                            {
                                "type": "emoji",
                                "name": "blush",
                                "unicode": "1f60a"
                            },
                            {
                                "type": "text",
                                "text": " "
                            }
                        ]
                    }
                ]
            }
        ]
    }
]