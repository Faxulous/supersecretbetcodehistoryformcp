[
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1692255608.642699",
        "client_msg_id": "000cb250-8759-4188-b48b-9b6b6f90ae23",
        "text": "Its really not an issue and if it is your doing well",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692199878.358389",
        "parent_user_id": "UCQB6S222",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "oQcE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Its really not an issue and if it is your doing well"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1692256440.704629",
        "client_msg_id": "4cee4323-4d28-48f9-aaae-143844dbef33",
        "text": "I don't think it's silly to think about putting an s3 upload at the end of process_cleared_orders_meta. If I'd done that I would have overwritten all my log files. So it could have been an issue!\n\nIn general I find logging the most confusing part of the whole coding universe. It doesn't help that python's logging module is very weird.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692199878.358389",
        "parent_user_id": "UCQB6S222",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZGZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I don't think it's silly to think about putting an s3 upload at the end of process_cleared_orders_meta. If I'd done that I would have overwritten all my log files. So it could have been an issue!\n\nIn general I find logging the most confusing part of the whole coding universe. It doesn't help that python's logging module is very weird."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05M15DJHRP",
        "type": "message",
        "ts": "1692256764.220019",
        "client_msg_id": "165305f9-55ae-4d22-b25e-fe3cfebd37c4",
        "text": "got it, thanks for your help",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "c3d5c2bcd7f8",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-08-07\/5699622300437_c3d5c2bcd7f8e990e94e_72.jpg",
            "first_name": "Ishan",
            "real_name": "Ishan Shandilya",
            "display_name": "Frenkie",
            "team": "T4G9NBD2M",
            "name": "aishwarshandilya1994",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "uGO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "got it, thanks for your help"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1692257029.882849",
        "client_msg_id": "4BCC222E-EA3B-4AA6-BE33-841424762575",
        "text": "I think we have our wires crossed, if you are using AWS then you want to be using cloudwatch, there a few plug and play python modules that literally stream the logs straight to CW. For example I use docker, few lines of code and it does it all.\n\nNot sure why you would be overwriting, just updating with the latest surely? Often results get changed. ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692199878.358389",
        "parent_user_id": "UCQB6S222",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "APbu=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think we have our wires crossed, if you are using AWS then you want to be using cloudwatch, there a few plug and play python modules that literally stream the logs straight to CW. For example I use docker, few lines of code and it does it all.\n\nNot sure why you would be overwriting, just updating with the latest surely? Often results get changed. "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1692257185.563069",
        "client_msg_id": "09d5d0bd-69c0-4aaa-85f1-e3b3637e4adc",
        "text": "by default if you do an s3 upload with a file of the same name, it will overwrite the existing one.\n\ni haven't used cloudwatch before but that sounds like the perfect solution. will check it out - thanks!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692199878.358389",
        "parent_user_id": "UCQB6S222",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TjR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "by default if you do an s3 upload with a file of the same name, it will overwrite the existing one.\n\ni haven't used cloudwatch before but that sounds like the perfect solution. will check it out - thanks!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1692271642.569159",
        "edited": {
            "user": "U9JHLMZB4",
            "ts": "1692271836.000000"
        },
        "client_msg_id": "60cd921f-9ecf-4fe8-b770-d1f88906540c",
        "text": "Slightly different take.\n\nThe blotter contains a selection_exposure method that calculates the worst case for you across all possible outcomes for a given selection taking account of whether you're backing or laying or some combination of the two.\n\nThere's also a market_exposure method that assesses your worst possible outcome across all selections, so taking account of the conflicting effects of having bets on multiple selections (full disclosure: I wrote it so have skin in the game).\n\nBoth methods provide what would normally be meant by selection or market exposure respectively and although necessarily a little CPU heavy, are optimised so that the market_exposure increases only linearly with the number of selections in an event (most of the homegrown attempts that I've seen for this purpose increase exponentially and are way slower even for small numbers of selections).\n\nSo I'm really not understanding why <@UCQB6S222> is recommending that you do it yourself.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7sHe",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Slightly different take.\n\nThe blotter contains a selection_exposure method that calculates the worst case for you across all possible outcomes for a given selection taking account of whether you're backing or laying or some combination of the two.\n\nThere's also a market_exposure method that assesses your worst possible outcome across all selections, so taking account of the conflicting effects of having bets on multiple selections (full disclosure: I wrote it so have skin in the game).\n\nBoth methods provide what would normally be meant by selection or market exposure respectively and although necessarily a little CPU heavy, are optimised so that the market_exposure increases only linearly with the number of selections in an event (most of the homegrown attempts that I've seen for this purpose increase exponentially and are way slower even for small numbers of selections).\n\nSo I'm really not understanding why "
                            },
                            {
                                "type": "user",
                                "user_id": "UCQB6S222"
                            },
                            {
                                "type": "text",
                                "text": " is recommending that you do it yourself."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1692271960.288589",
        "client_msg_id": "b705936f-4acf-4b7a-b76e-0f2288030647",
        "text": "It depends on the definition of exposure. As far as I could see there is no function to return the green \/ red values that you see on the website.\n\nI think if I recall correctly the selection exposure does not look at exposures from orders placed on other selections in the same market which made it unusable for my needs personally.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nBT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It depends on the definition of exposure. As far as I could see there is no function to return the green \/ red values that you see on the website.\n\nI think if I recall correctly the selection exposure does not look at exposures from orders placed on other selections in the same market which made it unusable for my needs personally."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1692273495.110599",
        "edited": {
            "user": "U9JHLMZB4",
            "ts": "1692273523.000000"
        },
        "client_msg_id": "35ec04b4-d5ed-4b6e-8dd1-a447752f42c3",
        "text": "I seem to remember people having a similar discussion a while back. I agree that the functions in the blotter don't provide the red \/ green figures on the website. This is because they were written for exposure management only, whereas the red \/ green figures conflate exposures and returns.\n\nHowever, they do provide an efficient starting point for calculating them. Do you have code to do this? If so I'm sure that a pull request would be welcomed?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=R66",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I seem to remember people having a similar discussion a while back. I agree that the functions in the blotter don't provide the red \/ green figures on the website. This is because they were written for exposure management only, whereas the red \/ green figures conflate exposures and returns.\n\nHowever, they do provide an efficient starting point for calculating them. Do you have code to do this? If so I'm sure that a pull request would be welcomed?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1692276269.861189",
        "client_msg_id": "010372ed-53bf-4327-bde8-c5398658632a",
        "text": "Yes though I'm still in development mode. And what I wrote certainly is not optimised for speed. But once I'm done I'll be happy to go through my code and see what might be useful for the community to share.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jemk2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes though I'm still in development mode. And what I wrote certainly is not optimised for speed. But once I'm done I'll be happy to go through my code and see what might be useful for the community to share."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1692276438.139799",
        "client_msg_id": "5b76ca1d-954e-43db-af4f-362dd14ee4b0",
        "text": "I think the bigger issue with the current exposure function is like this:\nLet's say we back runner 1 for £25 and lay runner 2 for £10 @ 1.5\nNow let's say we want to know our exposure on runner 2.\nThe function will return £5 because of the lay order only.\nI would argue the correct value is £30 and therefore the exposure management in flumine is not applied correctly.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "K9h4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think the bigger issue with the current exposure function is like this:\nLet's say we back runner 1 for £25 and lay runner 2 for £10 @ 1.5\nNow let's say we want to know our exposure on runner 2.\nThe function will return £5 because of the lay order only.\nI would argue the correct value is £30 and therefore the exposure management in flumine is not applied correctly."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1692288956.007449",
        "client_msg_id": "aff954de-84f6-4650-aeb2-31399ff26a31",
        "text": "There isn't a single exposure function.\n\nThere is a `selection_exposure` function which calculates the exposure for a given selection in isolation from all others in the event. In the example that you give it would indeed return £5, because that is your exposure to that specific selection.\n\nBut if you want to know your exposure taking account of your bets on other selections, then you would use the `market_exposure` function, which, in the example that you've given, would return £30.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jDueD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "There isn't a single exposure function.\n\nThere is a "
                            },
                            {
                                "type": "text",
                                "text": "selection_exposure",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " function which calculates the exposure for a given selection in isolation from all others in the event. In the example that you give it would indeed return £5, because that is your exposure to that specific selection.\n\nBut if you want to know your exposure taking account of your bets on other selections, then you would use the "
                            },
                            {
                                "type": "text",
                                "text": "market_exposure",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " function, which, in the example that you've given, would return £30."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1692289780.227339",
        "client_msg_id": "85eeb0b8-a0de-4f98-8f63-1bc0549b0588",
        "text": "That's got to create opportunies for the guys who know their horses.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692130158.901369",
        "parent_user_id": "U05F3D8PB5F",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "v+eT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That's got to create opportunies for the guys who know their horses."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1692290465.337049",
        "edited": {
            "user": "UCQB6S222",
            "ts": "1692290555.000000"
        },
        "client_msg_id": "de96a55c-bd51-4680-be60-f5a29ee2be5c",
        "text": "Not necessarily - if you had also put a lay on runner 3 for for £1 @ 100 then market_exposure would return £99 regardless of what was going on with runners 1 and 2. In that scenario neither of the functions returns £30 (or now £29 in this updated case) exposure even though that is a possible outcome.\n\nAnyway, I will definitely share what I've done once on this once I am finished, as I think it could be a useful addition.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692209370.691709",
        "parent_user_id": "U05M15DJHRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mB6T",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not necessarily - if you had also put a lay on runner 3 for for £1 @ 100 then market_exposure would return £99 regardless of what was going on with runners 1 and 2. In that scenario neither of the functions returns £30 (or now £29 in this updated case) exposure even though that is a possible outcome.\n\nAnyway, I will definitely share what I've done once on this once I am finished, as I think it could be a useful addition."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]