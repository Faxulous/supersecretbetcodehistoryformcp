[
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1692106615.335149",
        "edited": {
            "user": "UUE6E1LA1",
            "ts": "1692107872.000000"
        },
        "client_msg_id": "fe5d5630-d7b8-4b2f-81ee-84f74ef3b01e",
        "text": "Surely for fill or kill, the order status should go straight from \"pending\" to \"execution_complete\" ? And would you not only get \"pending\" if placing it with the async flag? I'm assuming here you are talking about pure bet operations and that \"pending\" refers to bet status and is not artificially set by flumine of course?\nEdit: Or \"Pending\" to \"Expired\" in case of failure to match.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zlSSI",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Surely for fill or kill, the order status should go straight from \"pending\" to \"execution_complete\" ? And would you not only get \"pending\" if placing it with the async flag? I'm assuming here you are talking about pure bet operations and that \"pending\" refers to bet status and is not artificially set by flumine of course?\nEdit: Or \"Pending\" to \"Expired\" in case of failure to match."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1692128489.351579",
        "client_msg_id": "d64c246a-3acf-4a17-821f-213780a8c5b5",
        "text": "<@UUE6E1LA1> That is what I think as well. In this PR <https:\/\/github.com\/betcode-org\/flumine\/pull\/655>  I assumed that they all go PENDING -&gt; EXECUTION_COMPLETE, but it seems they can also go to EXPIRED as well. It would be good to capture raw responses of the Betfair order stream with bflw and check.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "ts": 1680815567,
                "color": "6f42c1",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/pull\/655",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "#655 Bugfix\/fill or kill lapsing",
                "text": "Fixes issue <https:\/\/github.com\/betcode-org\/flumine\/issues\/654|#654>.",
                "title": "#655 Bugfix\/fill or kill lapsing",
                "title_link": "https:\/\/github.com\/betcode-org\/flumine\/pull\/655",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "N94l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UUE6E1LA1"
                            },
                            {
                                "type": "text",
                                "text": " That is what I think as well. In this PR "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/pull\/655"
                            },
                            {
                                "type": "text",
                                "text": "  I assumed that they all go PENDING -> EXECUTION_COMPLETE, but it seems they can also go to EXPIRED as well. It would be good to capture raw responses of the Betfair order stream with bflw and check."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05F3D8PB5F",
        "type": "message",
        "ts": "1692130158.901369",
        "client_msg_id": "f05a5486-e88d-4cc1-8aa4-5add60f8f18a",
        "text": "are horse racing EACH_WAY markets special in some way?\n\nwhenever I try to take a price there it's almost always gone by the time my bet gets there, which is not true of WIN market\n\nmaybe it's just much less liquid? or is it just some Frankenstein auto combination of win\/place markets behind the scenes?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g13d71714b4b",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/13d71714b4baa7a31dbe6f843272fbca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png",
            "first_name": "Joe",
            "real_name": "Joe Bloggs",
            "display_name": "Joe Bloggs",
            "team": "T4G9NBD2M",
            "name": "jilog23790",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692130158.901369",
        "reply_count": 4,
        "reply_users_count": 2,
        "latest_reply": "1692289780.227339",
        "reply_users": [
            "UBS7QANF3",
            "UEA14GBRR"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1692130244.313239"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1692219607.801349"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1692250546.070229"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1692289780.227339"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iedx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "are horse racing EACH_WAY markets special in some way?\n\nwhenever I try to take a price there it's almost always gone by the time my bet gets there, which is not true of WIN market\n\nmaybe it's just much less liquid? or is it just some Frankenstein auto combination of win\/place markets behind the scenes?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1692130244.313239",
        "client_msg_id": "668ef4ab-62b3-4363-bd76-cdc733878d21",
        "text": "Well they will definitely be cross matched with the win and place markets",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692130158.901369",
        "parent_user_id": "U05F3D8PB5F",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "J+1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Well they will definitely be cross matched with the win and place markets"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "white_check_mark",
                "users": [
                    "U05F3D8PB5F"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1692131417.012999",
        "client_msg_id": "5cefb075-24e6-4914-86a5-71ae1acc284e",
        "text": "Maybe it is some interaction with placing fill or kill via async flag. I used to place FOK bets a lot but never since going async. If you read the docs on order stream OCM it states that the only possible values of status are \"E\" (executable) or \"EC\" (execution complete) so it would appear that there is no space for EXPIRED on the order stream.\n\nMaybe you would need to call listCurrentOrders using the customerRefString for the order or place anything FOK without the async flag ??? It would seem that the OS lacks the mechanism to inform of an expired FOK bet unless I've read it wrong.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "G68A",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Maybe it is some interaction with placing fill or kill via async flag. I used to place FOK bets a lot but never since going async. If you read the docs on order stream OCM it states that the only possible values of status are \"E\" (executable) or \"EC\" (execution complete) so it would appear that there is no space for EXPIRED on the order stream.\n\nMaybe you would need to call listCurrentOrders using the customerRefString for the order or place anything FOK without the async flag ??? It would seem that the OS lacks the mechanism to inform of an expired FOK bet unless I've read it wrong."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1692132307.552079",
        "client_msg_id": "0843bee3-329a-456a-ae0c-3ece51d99e11",
        "text": "Calling listCurrentOrders will do no good because it'll miss any intermediate states, I've read the docs and you are right, there is no mention of EXPIRED anywhere. However, I do wonder if the documentation is perhaps not up to date.\n\nI have not been placing the orders with the async flag. Don't really see a point in doing it because the orders are submitted to the thread pool anyway, so from Flumine's perspective it's all asynchronous anyway.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9P1a5",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Calling listCurrentOrders will do no good because it'll miss any intermediate states, I've read the docs and you are right, there is no mention of EXPIRED anywhere. However, I do wonder if the documentation is perhaps not up to date.\n\nI have not been placing the orders with the async flag. Don't really see a point in doing it because the orders are submitted to the thread pool anyway, so from Flumine's perspective it's all asynchronous anyway."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUCD6P13J",
        "type": "message",
        "ts": "1692132685.077079",
        "client_msg_id": "76F519D9-E47F-47EC-89B5-7201D28DCF81",
        "text": "You’ll find it here <https:\/\/docs.developer.betfair.com\/plugins\/servlet\/mobile?contentId=3833930#content\/view\/3833930|https:\/\/docs.developer.betfair.com\/plugins\/servlet\/mobile?contentId=3833930#content\/view\/3833930>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6898272ab81",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6898272ab810e419c2c9ca9af1e53da8.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png",
            "first_name": "Lee",
            "real_name": "Lee U",
            "display_name": "Lee",
            "team": "T4G9NBD2M",
            "name": "lunswor",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "E\/Cc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You’ll"
                            },
                            {
                                "type": "text",
                                "text": " find it here "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/docs.developer.betfair.com\/plugins\/servlet\/mobile?contentId=3833930#content\/view\/3833930",
                                "text": "https:\/\/docs.developer.betfair.com\/plugins\/servlet\/mobile?contentId=3833930#content\/view\/3833930"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1692133938.405419",
        "client_msg_id": "c20d1d67-afc7-4ba5-a1c2-ec17e0efecad",
        "text": "I wonder where that EXPIRED comes from... AFAIK, Flumine uses order streaming and not poling to retrieve bet states. I have just done an experiment with placing FOK bets and they go to EXECUTION_COMPLETE regardless of whether they are matched or not. Here is the data. The first order is matched, the second is cancelled (\"sm\"\/\"sc\"). They both go straight to \"EC\" for status, which stands for EXECUTION_COMPLETE.\n```{'id': '1.216407624',\n 'orc': [{'id': 39674645,\n          'uo': [{'id': '317109322476',\n                  'p': 1.94,\n                  's': 1,\n                  'side': 'L',\n                  'status': 'EC',\n                  'pt': 'L',\n                  'ot': 'L',\n                  'pd': 1692133287000,\n                  'md': 1692133287000,\n                  'avp': 1.94,\n                  'sm': 1,\n                  'sr': 0,\n                  'sl': 0,\n                  'sc': 0,\n                  'sv': 0,\n                  'rac': '',\n                  'rc': 'REG_GGC',\n                  'rfo': '',\n                  'rfs': ''}],\n          'ml': [[1.94, 1]]}]}\n{'id': '1.216407624',\n 'orc': [{'id': 39674645,\n          'uo': [{'id': '317109323812',\n                  'p': 1000,\n                  's': 1,\n                  'side': 'B',\n                  'status': 'EC',\n                  'pt': 'L',\n                  'ot': 'L',\n                  'pd': 1692133289000,\n                  'sm': 0,\n                  'sr': 0,\n                  'sl': 0,\n                  'sc': 1,\n                  'sv': 0,\n                  'rac': '',\n                  'rc': 'REG_GGC',\n                  'rfo': '',\n                  'rfs': '',\n                  'cd': 1692133289000}]}]}```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "oebN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I wonder where that EXPIRED comes from... AFAIK, Flumine uses order streaming and not poling to retrieve bet states. I have just done an experiment with placing FOK bets and they go to EXECUTION_COMPLETE regardless of whether they are matched or not. Here is the data. The first order is matched, the second is cancelled (\"sm\"\/\"sc\"). They both go straight to \"EC\" for status, which stands for EXECUTION_COMPLETE.\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{'id': '1.216407624',\n 'orc': [{'id': 39674645,\n          'uo': [{'id': '317109322476',\n                  'p': 1.94,\n                  's': 1,\n                  'side': 'L',\n                  'status': 'EC',\n                  'pt': 'L',\n                  'ot': 'L',\n                  'pd': 1692133287000,\n                  'md': 1692133287000,\n                  'avp': 1.94,\n                  'sm': 1,\n                  'sr': 0,\n                  'sl': 0,\n                  'sc': 0,\n                  'sv': 0,\n                  'rac': '',\n                  'rc': 'REG_GGC',\n                  'rfo': '',\n                  'rfs': ''}],\n          'ml': [[1.94, 1]]}]}\n{'id': '1.216407624',\n 'orc': [{'id': 39674645,\n          'uo': [{'id': '317109323812',\n                  'p': 1000,\n                  's': 1,\n                  'side': 'B',\n                  'status': 'EC',\n                  'pt': 'L',\n                  'ot': 'L',\n                  'pd': 1692133289000,\n                  'sm': 0,\n                  'sr': 0,\n                  'sl': 0,\n                  'sc': 1,\n                  'sv': 0,\n                  'rac': '',\n                  'rc': 'REG_GGC',\n                  'rfo': '',\n                  'rfs': '',\n                  'cd': 1692133289000}]}]}"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1692134513.871379",
        "client_msg_id": "d35f81be-4a8f-44b7-aabb-4a22025669ef",
        "text": "Ok, nvm, I figured it out. EXPIRED appears in the order reports:\n```{'status': 'SUCCESS',\n 'marketId': '1.216407624',\n 'instructionReports': [{'status': 'SUCCESS',\n                         'instruction': {'selectionId': 39674645,\n                                         'limitOrder': {'size': 1.0,\n                                                        'price': 1.94,\n                                                        'minFillSize': 0.0,\n                                                        'timeInForce': 'FILL_OR_KILL'},\n                                         'orderType': 'LIMIT',\n                                         'side': 'LAY'},\n                         'betId': '317109322476',\n                         'placedDate': '2023-08-15T21:01:27.000Z',\n                         'averagePriceMatched': 1.94,\n                         'sizeMatched': 1.0,\n                         'orderStatus': 'EXECUTION_COMPLETE'}]}\n{'status': 'SUCCESS',\n 'marketId': '1.216407624',\n 'instructionReports': [{'status': 'SUCCESS',\n                         'instruction': {'selectionId': 39674645,\n                                         'limitOrder': {'size': 1.0,\n                                                        'price': 1000.0,\n                                                        'minFillSize': 0.0,\n                                                        'timeInForce': 'FILL_OR_KILL'},\n                                         'orderType': 'LIMIT',\n                                         'side': 'BACK'},\n                         'betId': '317109323812',\n                         'placedDate': '2023-08-15T21:01:29.000Z',\n                         'averagePriceMatched': 0.0,\n                         'sizeMatched': 0.0,\n                         'orderStatus': 'EXPIRED'}]}```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vw1W",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ok, nvm, I figured it out. EXPIRED appears in the order reports:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{'status': 'SUCCESS',\n 'marketId': '1.216407624',\n 'instructionReports': [{'status': 'SUCCESS',\n                         'instruction': {'selectionId': 39674645,\n                                         'limitOrder': {'size': 1.0,\n                                                        'price': 1.94,\n                                                        'minFillSize': 0.0,\n                                                        'timeInForce': 'FILL_OR_KILL'},\n                                         'orderType': 'LIMIT',\n                                         'side': 'LAY'},\n                         'betId': '317109322476',\n                         'placedDate': '2023-08-15T21:01:27.000Z',\n                         'averagePriceMatched': 1.94,\n                         'sizeMatched': 1.0,\n                         'orderStatus': 'EXECUTION_COMPLETE'}]}\n{'status': 'SUCCESS',\n 'marketId': '1.216407624',\n 'instructionReports': [{'status': 'SUCCESS',\n                         'instruction': {'selectionId': 39674645,\n                                         'limitOrder': {'size': 1.0,\n                                                        'price': 1000.0,\n                                                        'minFillSize': 0.0,\n                                                        'timeInForce': 'FILL_OR_KILL'},\n                                         'orderType': 'LIMIT',\n                                         'side': 'BACK'},\n                         'betId': '317109323812',\n                         'placedDate': '2023-08-15T21:01:29.000Z',\n                         'averagePriceMatched': 0.0,\n                         'sizeMatched': 0.0,\n                         'orderStatus': 'EXPIRED'}]}"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1692134819.819239",
        "client_msg_id": "8a9ce61b-746f-4978-bc7c-3d6ce6b72fc8",
        "text": "So if you never place with async flag, how did you ever manage to get a PENDING orderStatus? Is that a placeholder status put in artificially  until the placeOrders call returns, or the order stream pushes the order info. I remember when I first implemented the order stream things had to be done carefully because you never knew if the order stream or the placeOrders response would arrive first.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Qdvjp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So if you never place with async flag, how did you ever manage to get a PENDING orderStatus? Is that a placeholder status put in artificially  until the placeOrders call returns, or the order stream pushes the order info. I remember when I first implemented the order stream things had to be done carefully because you never knew if the order stream or the placeOrders response would arrive first."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1692134963.137299",
        "client_msg_id": "ac0a19be-2aa5-4679-bb3c-f9aca8ce5da0",
        "text": "I assume it is a state Flumine internally assigns to all orders which have been sent to the thread pool for execution. One needs to register a bet as soon as it's been submitted because otherwise the bot will go haywire and place hundreds of them in a second.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "s4kj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I assume it is a state Flumine internally assigns to all orders which have been sent to the thread pool for execution. One needs to register a bet as soon as it's been submitted because otherwise the bot will go haywire and place hundreds of them in a second."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1692135065.164209",
        "client_msg_id": "fc3c6210-ca03-4e1b-bd72-4e202ab15c7a",
        "text": "Knowing that FOK bets go straight to either EXECUTION_COMPLETE or EXPIRED, under no circumstances should the orders from my original post ever reach EXECUTABLE state.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "g=i",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Knowing that FOK bets go straight to either EXECUTION_COMPLETE or EXPIRED, under no circumstances should the orders from my original post ever reach EXECUTABLE state."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1692135249.221209",
        "client_msg_id": "068f8aee-dd0a-473d-b724-175d893d9e66",
        "text": "I guess you either simply have to take state from the placeOrders response then, or infer a failed FOK on the order stream by EC status and zero matched volume? And if the former arrives first, you don't overwrite EXPIRED with EC when the order stream catches up?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+X=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I guess you either simply have to take state from the placeOrders response then, or infer a failed FOK on the order stream by EC status and zero matched volume? And if the former arrives first, you don't overwrite EXPIRED with EC when the order stream catches up?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "Any ideas on what actually happened here? I had c.150 markets and I was writing to a db, most of them got written to the db but then it suddenly just spiralled (and killed my instance). Currently I am writing to db on close market, are people handling this differently i.e. passing off to a worker \/ middleware?",
        "files": [
            {
                "id": "F05MY75MZNF",
                "created": 1692135512,
                "timestamp": 1692135512,
                "name": "log.txt",
                "title": "log.txt",
                "mimetype": "text\/plain",
                "filetype": "text",
                "pretty_type": "Plain Text",
                "user": "U027P3N2WMQ",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 17340,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F05MY75MZNF\/log.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F05MY75MZNF\/download\/log.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/U027P3N2WMQ\/F05MY75MZNF\/log.txt",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F05MY75MZNF-6008b6df24",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/U027P3N2WMQ\/F05MY75MZNF\/log.txt\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            },
            {
                "id": "F05MHPPMJ31",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U027P3N2WMQ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LBh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Any ideas on what actually happened here? I had c.150 markets and I was writing to a db, most of them got written to the db but then it suddenly just spiralled (and killed my instance). Currently I am writing to db on close market, are people handling this differently i.e. passing off to a worker \/ middleware?"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1692135644.158579",
        "client_msg_id": "260ac10b-e42b-48d3-8cda-a1e60689d4ef",
        "thread_ts": "1692135644.158579",
        "reply_count": 5,
        "reply_users_count": 2,
        "latest_reply": "1692224741.252009",
        "reply_users": [
            "U4H19D1D2",
            "U027P3N2WMQ"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1692162010.422809"
            },
            {
                "user": "U027P3N2WMQ",
                "ts": "1692177154.383249"
            },
            {
                "user": "U027P3N2WMQ",
                "ts": "1692177230.216419"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1692178646.172539"
            },
            {
                "user": "U027P3N2WMQ",
                "ts": "1692224741.252009"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1692224741.252009"
    },
    {
        "user": "U013PLN93AT",
        "type": "message",
        "ts": "1692135898.503199",
        "client_msg_id": "63a60226-1549-4d05-9b6c-c99335a2dc8a",
        "text": "<@UUE6E1LA1> The PENDING status I am getting is Flumine's PENDING status, not Betfair's. Flumine puts the order into PENDING as soon as it's submitted for execution, for the reasons I explained about. I guess that is what the confusion was about. Those states displayed in the original post are Flumine's internal bet states, not Betfair's.\n```\nclass OrderStatus(Enum):\n    # Pending exchange processing\n    PENDING = \"Pending\"\n    CANCELLING = \"Cancelling\"\n    UPDATING = \"Updating\"\n    REPLACING = \"Replacing\"\n    # Completed\n    EXECUTABLE = \"Executable\"  # an order that has a remaining unmatched portion\n    EXECUTION_COMPLETE = \"Execution complete\"  # an order that does not have any remaining unmatched portion\n    EXPIRED = \"Expired\"  # order is no longer available for execution due to its time in force constraint\n    VIOLATION = \"Violation\"  # order never placed due to failing controls```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1e2aa0b687e",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1e2aa0b687e3d4f68c7123a0791e9b2a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "mzaja",
            "display_name": "mzaja",
            "team": "T4G9NBD2M",
            "name": "mzaja0",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692011467.979179",
        "parent_user_id": "U013PLN93AT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=9F",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UUE6E1LA1"
                            },
                            {
                                "type": "text",
                                "text": " The PENDING status I am getting is Flumine's PENDING status, not Betfair's. Flumine puts the order into PENDING as soon as it's submitted for execution, for the reasons I explained about. I guess that is what the confusion was about. Those states displayed in the original post are Flumine's internal bet states, not Betfair's.\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nclass OrderStatus(Enum):\n    # Pending exchange processing\n    PENDING = \"Pending\"\n    CANCELLING = \"Cancelling\"\n    UPDATING = \"Updating\"\n    REPLACING = \"Replacing\"\n    # Completed\n    EXECUTABLE = \"Executable\"  # an order that has a remaining unmatched portion\n    EXECUTION_COMPLETE = \"Execution complete\"  # an order that does not have any remaining unmatched portion\n    EXPIRED = \"Expired\"  # order is no longer available for execution due to its time in force constraint\n    VIOLATION = \"Violation\"  # order never placed due to failing controls"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U05KECSV68N",
        "type": "message",
        "ts": "1692139118.420129",
        "client_msg_id": "eb02e4fc-d274-4547-933c-438ad2419265",
        "text": "order_type=LimitOrder(price=runner.ex.available_to_back[5]['price'], size=12.0) is there any restrictions on size? my strategy in simulation works fine when size is small but doesn't execute with a big size(not able to place orders). Any clue?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gc2bc41d6054",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/c2bc41d60540ec3895c1d64cf560d276.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "Rishab",
            "real_name": "Rishab",
            "display_name": "Rishab",
            "team": "T4G9NBD2M",
            "name": "ris499",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692139118.420129",
        "reply_count": 2,
        "reply_users_count": 2,
        "latest_reply": "1692139953.299919",
        "reply_users": [
            "UUCD6P13J",
            "U05KECSV68N"
        ],
        "replies": [
            {
                "user": "UUCD6P13J",
                "ts": "1692139156.907399"
            },
            {
                "user": "U05KECSV68N",
                "ts": "1692139953.299919"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SxC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "order_type=LimitOrder(price=runner.ex.available_to_back[5]['price'], size=12.0) is there any restrictions on size? my strategy in simulation works fine when size is small but doesn't execute with a big size(not able to place orders). Any clue?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUCD6P13J",
        "type": "message",
        "ts": "1692139156.907399",
        "client_msg_id": "26e39bdd-195b-401c-ada0-aeebf5f7df84",
        "text": "logs?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6898272ab81",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6898272ab810e419c2c9ca9af1e53da8.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png",
            "first_name": "Lee",
            "real_name": "Lee U",
            "display_name": "Lee",
            "team": "T4G9NBD2M",
            "name": "lunswor",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692139118.420129",
        "parent_user_id": "U05KECSV68N",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Oj3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "logs?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05KECSV68N",
        "type": "message",
        "ts": "1692139953.299919",
        "edited": {
            "user": "U05KECSV68N",
            "ts": "1692139961.000000"
        },
        "client_msg_id": "a47f21e9-7e49-4d18-a30d-fd7f69f63374",
        "text": "Wasn't generating it earlier. Logs solved the issue, had to change the max_order_exposure. Thanls",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gc2bc41d6054",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/c2bc41d60540ec3895c1d64cf560d276.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "Rishab",
            "real_name": "Rishab",
            "display_name": "Rishab",
            "team": "T4G9NBD2M",
            "name": "ris499",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692139118.420129",
        "parent_user_id": "U05KECSV68N",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0pg",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Wasn't generating it earlier. Logs solved the issue, had to change the max_order_exposure. Thanls"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1692162010.422809",
        "client_msg_id": "2C7AA106-036A-4000-A921-C7A078189D2B",
        "text": "How are you writing to the db? Within a strategy?\n\nCommon process is to store raw data using the market recorder and then process to db\/csv etc ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692135644.158579",
        "parent_user_id": "U027P3N2WMQ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Na\/0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "How are you writing to the db? Within a strategy?\n\nCommon process is to store raw data using the market recorder and then process to db\/csv etc "
                            }
                        ]
                    }
                ]
            }
        ]
    }
]