[
    {
        "user": "U042NB80A1X",
        "type": "message",
        "ts": "1679393463.612649",
        "client_msg_id": "972cd17e-280d-4b05-889e-175e7867d3ac",
        "text": "Hey guys, I was around about 6 months ago looking at a betfair bot. Since then have done CS50, CS50p, some data-science, maths and half a dozen udemy courses and am now building the bot.  Between betfairlightweight and flumine it just blows my mind how this stuff is out there (not to mention the type of statistical libraries and things that are out there).  Can already see a use for betfairutil as well so cheers <@UBS7QANF3> and <@U4H19D1D2>.\n\n It seems like flumine is the quickest way to login to the API and start streaming, although I'd done it all in betfairlight in the past. Is there any wisdom on the best way to use combinations of these to get what you want from it? I'd say my strategy is most like market-making (in horseraces) in terms of how it executes",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3ab37102618",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3ab37102618df1ba57a0e6b5c8538c66.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Tom",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tkuhnau",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393463.612649",
        "reply_count": 7,
        "reply_users_count": 5,
        "latest_reply": "1679645116.968449",
        "reply_users": [
            "U9JHLMZB4",
            "U042NB80A1X",
            "UBS7QANF3",
            "U016TGY3676",
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U9JHLMZB4",
                "ts": "1679394821.770339"
            },
            {
                "user": "U042NB80A1X",
                "ts": "1679453537.295049"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1679464316.641689"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1679464449.289529"
            },
            {
                "user": "U016TGY3676",
                "ts": "1679490202.852369"
            },
            {
                "user": "U042NB80A1X",
                "ts": "1679621030.481029"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1679645116.968449"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1679645116.968449",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7J1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hey guys, I was around about 6 months ago looking at a betfair bot. Since then have done CS50, CS50p, some data-science, maths and half a dozen udemy courses and am now building the bot.  Between betfairlightweight and flumine it just blows my mind how this stuff is out there (not to mention the type of statistical libraries and things that are out there).  Can already see a use for betfairutil as well so cheers "
                            },
                            {
                                "type": "user",
                                "user_id": "UBS7QANF3"
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": ".\n\n It seems like flumine is the quickest way to login to the API and start streaming, although I'd done it all in betfairlight in the past. Is there any wisdom on the best way to use combinations of these to get what you want from it? I'd say my strategy is most like market-making (in horseraces) in terms of how it executes"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U042NB80A1X",
        "type": "message",
        "ts": "1679393652.669029",
        "client_msg_id": "cf1ce214-5261-4dc2-889a-315b7a29af6a",
        "text": "I can also get markets e.t.c. from the API, but run into this trying to execute stream.start()\n\nbetfairlightweight.exceptions.ListenerError: connection_id: 107-210323101234-6265894, data: {\"op\":\"status\",\"id\":2,\"statusCode\":\"FAILURE\",\"errorCode\":\"NOT_AUTHORIZED\",\"errorMessage\":\"AppKey is not configured for service\",\"connectionClosed\":true,\"connectionId\":\"107-210323101234-6265894\"}\n\nI've contacted betfair about it and just waiting but thought there could be some wisdom here on it",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3ab37102618",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3ab37102618df1ba57a0e6b5c8538c66.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Tom",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tkuhnau",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393652.669029",
        "reply_count": 2,
        "reply_users_count": 2,
        "latest_reply": "1679394423.345519",
        "reply_users": [
            "UUE6E1LA1",
            "U042NB80A1X"
        ],
        "replies": [
            {
                "user": "UUE6E1LA1",
                "ts": "1679394386.573059"
            },
            {
                "user": "U042NB80A1X",
                "ts": "1679394423.345519"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7hj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I can also get markets e.t.c. from the API, but run into this trying to execute stream.start()\n\nbetfairlightweight.exceptions.ListenerError: connection_id: 107-210323101234-6265894, data: {\"op\":\"status\",\"id\":2,\"statusCode\":\"FAILURE\",\"errorCode\":\"NOT_AUTHORIZED\",\"errorMessage\":\"AppKey is not configured for service\",\"connectionClosed\":true,\"connectionId\":\"107-210323101234-6265894\"}\n\nI've contacted betfair about it and just waiting but thought there could be some wisdom here on it"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1679394386.573059",
        "client_msg_id": "30a5fd20-385a-42e6-a2b2-a9586ba3e21b",
        "text": "When I wanted to use stream API I had to make an application for it - even though I had been using the SOAP and NG API for years. They may have changed things and made streaming accessible by default but based on your error message it is probably not the case so if you have been in touch with Betfair about it you probably just need to wait for approval.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393652.669029",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kaci",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "When I wanted to use stream API I had to make an application for it - even though I had been using the SOAP and NG API for years. They may have changed things and made streaming accessible by default but based on your error message it is probably not the case so if you have been in touch with Betfair about it you probably just need to wait for approval."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U042NB80A1X",
        "type": "message",
        "ts": "1679394423.345519",
        "client_msg_id": "2c0155c9-1c1d-44c2-8d92-45621de164c4",
        "text": "roger that",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3ab37102618",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3ab37102618df1ba57a0e6b5c8538c66.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Tom",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tkuhnau",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393652.669029",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rGivp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "roger that"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1679394821.770339",
        "client_msg_id": "fbf6fe47-bdf6-49a9-9630-9d13a8e2cbc1",
        "text": "Flumine wraps around Betfairlightweight. It provides a trading framework with BFLW providing the connection to Betfair in the background. So the the best way to combine them is simply to work in Flumine.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393463.612649",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "uxc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Flumine wraps around Betfairlightweight. It provides a trading framework with BFLW providing the connection to Betfair in the background. So the the best way to combine them is simply to work in Flumine."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "100",
                "users": [
                    "U4H19D1D2",
                    "U016TGY3676"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "U042NB80A1X",
        "type": "message",
        "ts": "1679453537.295049",
        "client_msg_id": "8698f6ff-5924-4f66-a873-26a1e3351f07",
        "text": "What's the best way to familiarise oneself with all the different functionalities and options? I'm looking on GitHub and the docs but I'm running myself in circles - I'm sure that a lot of what I want to do are the classic problems that have been overcome in the libraries - but where do you find and understand all the functionality?\n\ngetting market_percentage for example, I'm trying to use betfairutil (and I'm sure this is straightforward), but I'm having trouble going from the dataframe I've created to what's needed\n\n```market_books = betfairutil.read_prices_file(path_to_prices_file)```\nare prices_files standardised outputs from betfair?\n\nI thought market_books themselves were betfair objects?\n\nI seem to be confusing myself chasing different ideas of how it works without really sitting down and trying to understand the libraries first - I have a clear idea of the strategy e.t.c. but in terms of structuring software it's tricky because I can't conceptualise the end result (which parts to make modular, how to structure the different working bits and pieces etc)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3ab37102618",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3ab37102618df1ba57a0e6b5c8538c66.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Tom",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tkuhnau",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393463.612649",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jm0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What's the best way to familiarise oneself with all the different functionalities and options? I'm looking on GitHub and the docs but I'm running myself in circles - I'm sure that a lot of what I want to do are the classic problems that have been overcome in the libraries - but where do you find and understand all the functionality?\n\ngetting market_percentage for example, I'm trying to use betfairutil (and I'm sure this is straightforward), but I'm having trouble going from the dataframe I've created to what's needed\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "market_books = betfairutil.read_prices_file(path_to_prices_file)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nare prices_files standardised outputs from betfair?\n\nI thought market_books themselves were betfair objects?\n\nI seem to be confusing myself chasing different ideas of how it works without really sitting down and trying to understand the libraries first - I have a clear idea of the strategy e.t.c. but in terms of structuring software it's tricky because I can't conceptualise the end result (which parts to make modular, how to structure the different working bits and pieces etc)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1679464316.641689",
        "client_msg_id": "796184ce-b53c-46f7-970e-93b74ac37d90",
        "text": "1. Prices files could be self recorded or purchased from Betfair. The format is the same\n2. It's not entirely clear what you mean by market books being \"betfair objects\" but the answer is probably yes. The Betfair API defines what a MarketBook object is <https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Betting+Type+Definitions#BettingTypeDefinitions-MarketBook>\n3. betfairutil has a calculate_book_percentage function <https:\/\/github.com\/mberk\/betfairutil\/blob\/525dc4dc9d87bc9438e72c24fd024d9bcab29b6c\/betfairutil\/__init__.py#L1518-L1540>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393463.612649",
        "parent_user_id": "U042NB80A1X",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/mberk\/betfairutil\/blob\/525dc4dc9d87bc9438e72c24fd024d9bcab29b6c\/betfairutil\/__init__.py#L1518-L1540",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/mberk\/betfairutil\/blob\/525dc4dc9d87bc9438e72c24fd024d9bcab29b6c\/betfairutil\/__init__.py | __init__.py>",
                "text": "```\ndef calculate_book_percentage(\n    market_book: Union[Dict[str, Any], MarketBook], side: Side\n) -> float:\n    implied_probabilities = []\n    for runner in iterate_active_runners(market_book):\n        best_price_size = get_best_price_size(runner, side)\n        if best_price_size is not None:\n            if isinstance(best_price_size, PriceSize):\n                best_price = best_price_size.price\n            else:\n                best_price = best_price_size[\"price\"]\n        else:\n            best_price = None\n\n        if best_price is not None:\n            implied_probabilities.append(1.0 \/ best_price)\n        else:\n            if side is Side.BACK:\n                other_best_price_size = get_best_price_size(runner, side.other_side)\n                if other_best_price_size is not None:\n                    implied_probabilities.append(1.0)\n\n    return sum(implied_probabilities)\n```",
                "title": "<https:\/\/github.com\/mberk\/betfairutil\/blob\/525dc4dc9d87bc9438e72c24fd024d9bcab29b6c\/betfairutil\/__init__.py | __init__.py>",
                "footer": "<https:\/\/github.com\/mberk\/betfairutil|mberk\/betfairutil>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mnSK=",
                "elements": [
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "Prices files could be self recorded or purchased from Betfair. The format is the same"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "It's not entirely clear what you mean by market books being \"betfair objects\" but the answer is probably yes. The Betfair API defines what a MarketBook object is "
                                    },
                                    {
                                        "type": "link",
                                        "url": "https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Betting+Type+Definitions#BettingTypeDefinitions-MarketBook"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "betfairutil has a calculate_book_percentage function "
                                    },
                                    {
                                        "type": "link",
                                        "url": "https:\/\/github.com\/mberk\/betfairutil\/blob\/525dc4dc9d87bc9438e72c24fd024d9bcab29b6c\/betfairutil\/__init__.py#L1518-L1540"
                                    }
                                ]
                            }
                        ],
                        "style": "ordered",
                        "indent": 0,
                        "border": 0
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U042NB80A1X"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1679464449.289529",
        "client_msg_id": "1b7bddde-1945-4a17-8a41-983d63d658fe",
        "text": "If you have a clear idea of your strategy then suggest you start with the flumine examples - <https:\/\/github.com\/betcode-org\/flumine\/tree\/master\/examples\/strategies> - and adapt for your needs",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1679393463.612649",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fZE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If you have a clear idea of your strategy then suggest you start with the flumine examples - "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/tree\/master\/examples\/strategies"
                            },
                            {
                                "type": "text",
                                "text": " - and adapt for your needs"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "100",
                "users": [
                    "U016TGY3676"
                ],
                "count": 1
            },
            {
                "name": "+1",
                "users": [
                    "U042NB80A1X"
                ],
                "count": 1
            }
        ]
    }
]