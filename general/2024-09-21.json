[
    {
        "user": "U01LD3EU8B0",
        "type": "message",
        "ts": "1726920263.407969",
        "client_msg_id": "cad425ef-91d2-4aaf-a857-6e706a9f5bcc",
        "text": "How do people typically go about logging\/monitoring latency? In particular the latency between betfair's publish time and the clock time when the update is received?\n\nI can think of a couple of ways of doing it:\n1. In the market recorder you could log it on each update <https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/strategies\/marketrecorder.py#L69|here>. (Might be a bit overkill for each update but it would be complete.)\n2. Have a background worker log the latency metric to Cloudwatch Metrics\/Prometheus etc every x seconds.\nIts not something I've been recording but if you want to optimise it (by moving aws region\/vps etc) then its important to start tracking it.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "91f0ca4990b2",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-02-01\/1685122555351_91f0ca4990b2be2e385b_72.png",
            "first_name": "TT",
            "real_name": "TT",
            "display_name": "TT",
            "team": "T4G9NBD2M",
            "name": "timtaylor.uk1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1726920263.407969",
        "reply_count": 4,
        "reply_users_count": 3,
        "latest_reply": "1726939059.996949",
        "reply_users": [
            "U03FS7KM2NL",
            "U05V9E7JA58",
            "U01LD3EU8B0"
        ],
        "replies": [
            {
                "user": "U03FS7KM2NL",
                "ts": "1726931216.789949"
            },
            {
                "user": "U05V9E7JA58",
                "ts": "1726931399.578889"
            },
            {
                "user": "U05V9E7JA58",
                "ts": "1726931565.513199"
            },
            {
                "user": "U01LD3EU8B0",
                "ts": "1726939059.996949"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/strategies\/marketrecorder.py#L69",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/strategies\/marketrecorder.py | marketrecorder.py>",
                "text": "```\n                    {\"op\": \"mcm\", \"clk\": clk, \"pt\": publish_time, \"mc\": [data]},\n```",
                "title": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/strategies\/marketrecorder.py | marketrecorder.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Otvuh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "How do people typically go about logging\/monitoring latency? In particular the latency between betfair's publish time and the clock time when the update is received?\n\nI can think of a couple of ways of doing it:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "In the market recorder you could log it on each update "
                                    },
                                    {
                                        "type": "link",
                                        "url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/strategies\/marketrecorder.py#L69",
                                        "text": "here"
                                    },
                                    {
                                        "type": "text",
                                        "text": ". (Might be a bit overkill for each update but it would be complete.)"
                                    }
                                ]
                            },
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "Have a background worker log the latency metric to Cloudwatch Metrics\/Prometheus etc every x seconds."
                                    }
                                ]
                            }
                        ],
                        "style": "ordered",
                        "indent": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nIts not something I've been recording but if you want to optimise it (by moving aws region\/vps etc) then its important to start tracking it."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03FS7KM2NL",
        "type": "message",
        "ts": "1726931216.789949",
        "client_msg_id": "582296DE-0F12-4C18-83F4-95122DCC80AA",
        "text": "When I receive a message I log it with the time that it was received ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g160a197a059",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/160a197a059d9b97aabdd95ca66dc341.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Ralegh",
            "real_name": "Ralegh",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "ralegh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1726920263.407969",
        "parent_user_id": "U01LD3EU8B0",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "e5msj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "When I receive a message I log it with the time that it was received "
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U01LD3EU8B0"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U05V9E7JA58",
        "type": "message",
        "ts": "1726931399.578889",
        "client_msg_id": "5b0d9422-8278-4486-bc47-c5e8d57ea8fe",
        "text": "I do your first option: {\"op\": \"mcm\", \"clk\": clk, \"pt\": publish_time, keyval: [data], \"it\": impact_time}.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "cc7dc83644f0",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-10-05\/5995483702786_cc7dc83644f0419b2460_72.png",
            "first_name": "Tony",
            "real_name": "Tony Holder",
            "display_name": "tone",
            "team": "T4G9NBD2M",
            "name": "tjwhold",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1726920263.407969",
        "parent_user_id": "U01LD3EU8B0",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "MzsA7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I do your first option: {\"op\": \"mcm\", \"clk\": clk, \"pt\": publish_time, keyval: [data], \"it\": impact_time}."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U01LD3EU8B0"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U05V9E7JA58",
        "type": "message",
        "ts": "1726931565.513199",
        "client_msg_id": "a7ca2ab7-41ce-4860-bc10-8df16bde3b1c",
        "text": "If you take this approach, then it may be necessary to remove the new timestamp before using bflw to parse the files",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "cc7dc83644f0",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-10-05\/5995483702786_cc7dc83644f0419b2460_72.png",
            "first_name": "Tony",
            "real_name": "Tony Holder",
            "display_name": "tone",
            "team": "T4G9NBD2M",
            "name": "tjwhold",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1726920263.407969",
        "parent_user_id": "U01LD3EU8B0",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xAm9b",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If you take this approach, then it may be necessary to remove the new timestamp before using bflw to parse the files"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01LD3EU8B0",
        "type": "message",
        "ts": "1726939059.996949",
        "client_msg_id": "07a728df-080c-47cd-b442-724ed0be3d27",
        "text": "Yeah I did think about that - from what I can tell I think it will get ignored by bflw\/flumine backtests so would need to patch it to make use of it.\n\nBut even outside of those tools it might just be worth logging to keep an eye on it over time.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "91f0ca4990b2",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-02-01\/1685122555351_91f0ca4990b2be2e385b_72.png",
            "first_name": "TT",
            "real_name": "TT",
            "display_name": "TT",
            "team": "T4G9NBD2M",
            "name": "timtaylor.uk1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1726920263.407969",
        "parent_user_id": "U01LD3EU8B0",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "clCuD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah I did think about that - from what I can tell I think it will get ignored by bflw\/flumine backtests so would need to patch it to make use of it.\n\nBut even outside of those tools it might just be worth logging to keep an eye on it over time."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]