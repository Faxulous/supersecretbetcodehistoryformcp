[
    {
        "user": "U03T739JSTZ",
        "type": "message",
        "ts": "1663253952.281699",
        "client_msg_id": "9a68184d-1eb3-4613-9012-62b8f1d00504",
        "text": "Hi guys, I want to search for events using market_start_time. I thought the below would work but It throws this error: `Full Response: {'jsonrpc': '2.0', 'error': {'code': -32602, 'message': 'DSC-0018'}, 'id': 1}`\n```        \ngame_time = '2022-09-15 14:49:41.209270'\ngame_filter = betfairlightweight.filters.market_filter(\n            event_type_ids=[1],\n            market_start_time={\n                'from': (game_time - timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\"),\n                'to': (game_time + timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\")\n            },\n        )```\nCan anyone see what the problem is? Thanks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g4e9a37b8c27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/4e9a37b8c271459be2dfd823961ccab6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Andy",
            "real_name": "Andy Bason",
            "display_name": "Andy Bason",
            "team": "T4G9NBD2M",
            "name": "andybason8",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663253952.281699",
        "reply_count": 6,
        "reply_users_count": 3,
        "latest_reply": "1663267751.729519",
        "reply_users": [
            "UBS7QANF3",
            "U03T739JSTZ",
            "U9JHLMZB4"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1663254261.786369"
            },
            {
                "user": "U03T739JSTZ",
                "ts": "1663254502.986399"
            },
            {
                "user": "U9JHLMZB4",
                "ts": "1663259507.556159"
            },
            {
                "user": "U03T739JSTZ",
                "ts": "1663264347.159049"
            },
            {
                "user": "U03T739JSTZ",
                "ts": "1663264387.186799"
            },
            {
                "user": "U9JHLMZB4",
                "ts": "1663267751.729519"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GBFY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi guys, I want to search for events using market_start_time. I thought the below would work but It throws this error: "
                            },
                            {
                                "type": "text",
                                "text": "Full Response: {'jsonrpc': '2.0', 'error': {'code': -32602, 'message': 'DSC-0018'}, 'id': 1}",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "        \ngame_time = '2022-09-15 14:49:41.209270'\ngame_filter = betfairlightweight.filters.market_filter(\n            event_type_ids=[1],\n            market_start_time={\n                'from': (game_time - timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\"),\n                'to': (game_time + timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\")\n            },\n        )"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Can anyone see what the problem is? Thanks"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1663254261.786369",
        "client_msg_id": "68cf240b-a131-4e19-9ba7-e8fae4431dfc",
        "text": "Where's the code where you actually use the filter?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663253952.281699",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "w7ZV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Where's the code where you actually use the filter?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03T739JSTZ",
        "type": "message",
        "ts": "1663254502.986399",
        "client_msg_id": "d4ac0e8c-4147-4889-8d72-cce9fab6f3c9",
        "text": "Hi Mo, here it is:\n```games = trading.betting.list_events(\n            filter=game_filter\n        )```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g4e9a37b8c27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/4e9a37b8c271459be2dfd823961ccab6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Andy",
            "real_name": "Andy Bason",
            "display_name": "Andy Bason",
            "team": "T4G9NBD2M",
            "name": "andybason8",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663253952.281699",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iSv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi Mo, here it is:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "games = trading.betting.list_events(\n            filter=game_filter\n        )"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1663259507.556159",
        "edited": {
            "user": "U9JHLMZB4",
            "ts": "1663260069.000000"
        },
        "client_msg_id": "746cdcee-e3c2-4156-bb2d-62a3d8dad7cc",
        "text": "Is that the actual code you're running? Asking because it shouldn't get as far as the API call. Instead it should throw an error when you try to perform arithmetic on the game_time string and the timedelta object.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663253952.281699",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KvJcR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is that the actual code you're running? Asking because it shouldn't get as far as the API call. Instead it should throw an error when you try to perform arithmetic on the game_time string and the timedelta object."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "raised_hands",
                "users": [
                    "U01C12ZEADQ"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U03T739JSTZ",
        "type": "message",
        "ts": "1663264347.159049",
        "client_msg_id": "9cfa0c3d-67db-4468-8e62-387ea18177ad",
        "text": "Hi Peter, game_time is actually derived from a string like this: `game_time = datetime.strptime(bet_details['Start Time'], \"%d %B %Y %H:%M\")`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g4e9a37b8c27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/4e9a37b8c271459be2dfd823961ccab6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Andy",
            "real_name": "Andy Bason",
            "display_name": "Andy Bason",
            "team": "T4G9NBD2M",
            "name": "andybason8",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663253952.281699",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DKGy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi Peter, game_time is actually derived from a string like this: "
                            },
                            {
                                "type": "text",
                                "text": "game_time = datetime.strptime(bet_details['Start Time'], \"%d %B %Y %H:%M\")",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03T739JSTZ",
        "type": "message",
        "ts": "1663264387.186799",
        "client_msg_id": "c47ec21f-dae2-4181-a080-39ffd7fa15f6",
        "text": "The strings are in this format: 17 September 2022 11:00",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g4e9a37b8c27",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/4e9a37b8c271459be2dfd823961ccab6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Andy",
            "real_name": "Andy Bason",
            "display_name": "Andy Bason",
            "team": "T4G9NBD2M",
            "name": "andybason8",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663253952.281699",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Qq1pm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The strings are in this format: 17 September 2022 11:00"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1663267751.729519",
        "client_msg_id": "4a20589a-ee19-4b7b-bd4d-5ffc17db9ed7",
        "text": "Putting those snippets together works, i.e. this works:\n```start_time = \"17 September 2022 11:00\"\ngame_time = datetime.strptime(start_time, \"%d %B %Y %H:%M\")\ngame_filter = betfairlightweight.filters.market_filter(\n    event_type_ids=[1],\n    market_start_time={\n        'from': (game_time - timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\"),\n        'to': (game_time + timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\")\n    },\n)\ngames = trading.betting.list_events(\n    filter=game_filter\n)```\nreturning (currently) a list of 57 EventResult objects.\n\nLooking at the specific error you're getting though, it's telling you that your request is missing a mandatory parameter. Since listEvents only has one mandatory parameter, the filter. This means that you're either not actually attaching it, or that the market filter method is returning None, so it's still feeling like we're not quite seeing the actual code that you're using.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663253952.281699",
        "parent_user_id": "U03T739JSTZ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lbKD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Putting those snippets together works, i.e. this works:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "start_time = \"17 September 2022 11:00\"\ngame_time = datetime.strptime(start_time, \"%d %B %Y %H:%M\")\ngame_filter = betfairlightweight.filters.market_filter(\n    event_type_ids=[1],\n    market_start_time={\n        'from': (game_time - timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\"),\n        'to': (game_time + timedelta(hours=2)).strftime(\"%Y-%m-%dT%TZ\")\n    },\n)\ngames = trading.betting.list_events(\n    filter=game_filter\n)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "returning (currently) a list of 57 EventResult objects.\n\nLooking at the specific error you're getting though, it's telling you that your request is missing a mandatory parameter. Since listEvents only has one mandatory parameter, the filter. This means that you're either not actually attaching it, or that the market filter method is returning None, so it's still feeling like we're not quite seeing the actual code that you're using."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "100",
                "users": [
                    "UBS7QANF3"
                ],
                "count": 1
            }
        ]
    }
]