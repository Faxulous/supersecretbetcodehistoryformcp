[
    {
        "user": "UT6593JBH",
        "type": "message",
        "ts": "1626509146.464100",
        "client_msg_id": "60121818-930f-44e5-9a8b-b4ab64132b28",
        "text": "With flumine if I reference the pricesize attribute of a current order which has a status such \"REPLACING\" or \"UPDATING\" do I get the exist price and size - or what it is changing to? In other words do the attributes of an order object in flumine change when I send the instruction to replace\/update or do they change when the exchange confirms that the change has been made?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gcc4ebad3a58",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/cc4ebad3a580698a264d16101dc48253.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0025-72.png",
            "first_name": "",
            "real_name": "Steve",
            "display_name": "Steve",
            "team": "T4G9NBD2M",
            "name": "flegg.stephen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "uTtOA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "With flumine if I reference the pricesize attribute of a current order which has a status such \"REPLACING\" or \"UPDATING\" do I get the exist price and size - or what it is changing to? In other words do the attributes of an order object in flumine change when I send the instruction to replace\/update or do they change when the exchange confirms that the change has been made?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UT6593JBH",
        "type": "message",
        "ts": "1626509651.469000",
        "edited": {
            "user": "UT6593JBH",
            "ts": "1626509698.000000"
        },
        "client_msg_id": "36bf20fb-cd2d-439e-a282-bb27ff9c68bc",
        "text": "Also does anyone else have issues handling the max_selection_exposure parameter ?  Following on from my previous question - can I just confirm if this calculation is based on the orders.status has confirm by the BF. I keep finding my replacing orders (when I cancel and place simalteanously) violate this safeguard.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gcc4ebad3a58",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/cc4ebad3a580698a264d16101dc48253.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0025-72.png",
            "first_name": "",
            "real_name": "Steve",
            "display_name": "Steve",
            "team": "T4G9NBD2M",
            "name": "flegg.stephen",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8sJDH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Also does anyone else have issues handling the max_selection_exposure parameter ?  Following on from my previous question - can I just confirm if this calculation is based on the orders.status has confirm by the BF. I keep finding my replacing orders (when I cancel and place simalteanously) violate this safeguard."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1626511132.471400",
        "client_msg_id": "643729c2-2a19-4280-82bf-9c39b60d47c0",
        "text": "If the place is sent before the cancel is confirmed, could there be a chance that both get filled? If so, that could be the cause.\n\nThere used to be a bug in exposure calculation when backing and then laying, but it was fixed a few months ago.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GjdO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If the place is sent before the cancel is confirmed, could there be a chance that both get filled? If so, that could be the cause.\n\nThere used to be a bug in exposure calculation when backing and then laying, but it was fixed a few months ago."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0154JA98TH",
        "type": "message",
        "ts": "1626511750.473200",
        "client_msg_id": "3679d0c9-71b2-4cec-bfee-00b9f14ea4cb",
        "text": "what would be the proper way to terminate a flumine session ie stop all strategies? say after 10 seconds of run time following the flumine.run() i wanted to halt and review the logs?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g04d857ee3ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/04d857ee3ad168a8451932c84c7d0d6d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonathan",
            "real_name": "Jonathan Wadsworth",
            "display_name": "Jono",
            "team": "T4G9NBD2M",
            "name": "jonowads",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7Fd=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "what would be the proper way to terminate a flumine session ie stop all strategies? say after 10 seconds of run time following the flumine.run() i wanted to halt and review the logs?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1626511844.473700",
        "client_msg_id": "480A6A78-4557-473F-B4EC-EF099FCACAF6",
        "text": "<https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/terminate.py|https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/terminate.py>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "text": "```\nimport logging\nimport datetime\nfrom flumine.events.events import TerminationEvent\n\nlogger = logging.getLogger(__name__)\n\n\"\"\"\nWorker can be used as followed:\n\n    framework.add_worker(\n        BackgroundWorker(\n            framework,\n            terminate,\n            func_kwargs={\"today_only\": True, \"seconds_closed\": 1200},\n            interval=60,\n            start_delay=60,\n        )\n    )\n\nThis will run every 60s and will terminate \nthe framework if all markets starting 'today' \nhave been closed for at least 1200s\n\"\"\"\n\n\ndef terminate(\n    context: dict, flumine, today_only: bool = True, seconds_closed: int = 600\n) -&gt; None:\n    \"\"\"terminate framework if no markets\n    live today.\n    \"\"\"\n    markets = list(flumine.markets.markets.values())\n    markets_today = [\n        m\n        for m in markets\n        if m.market_start_datetime.date() == datetime.datetime.utcnow().date()\n        and (\n            m.elapsed_seconds_closed is None\n            or (m.elapsed_seconds_closed and m.elapsed_seconds_closed &lt; seconds_closed)\n        )\n    ]\n    if today_only:\n        market_count = len(markets_today)\n    else:\n        market_count = len(markets)\n    if market_count == 0:\n        <http:\/\/logger.info|logger.info>(\"No more markets available, terminating framework\")\n        flumine.handler_queue.put(TerminationEvent(flumine))\n\n```",
                "title": "<https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/terminate.py | terminate.py>",
                "footer": "<https:\/\/github.com\/liampauling\/flumine|liampauling\/flumine>",
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "mrkdwn_in": [
                    "text"
                ],
                "fallback": "<https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/terminate.py | terminate.py>",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/terminate.py",
                "is_app_unfurl": true
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rES",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/terminate.py",
                                "text": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/terminate.py"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0154JA98TH",
        "type": "message",
        "ts": "1626511857.474100",
        "client_msg_id": "0f47734f-248e-448e-b76f-5370ca30f468",
        "text": "thank you!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g04d857ee3ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/04d857ee3ad168a8451932c84c7d0d6d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonathan",
            "real_name": "Jonathan Wadsworth",
            "display_name": "Jono",
            "team": "T4G9NBD2M",
            "name": "jonowads",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pd43",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thank you!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1626511877.474300",
        "edited": {
            "user": "ULDAVFDRP",
            "ts": "1626511898.000000"
        },
        "client_msg_id": "4b3290f8-9530-4cbd-b7eb-e6f8a1f49cb5",
        "text": "could you not run it in debug mode and just stick breakpoints in if your looking to review the current state (whilst testing)?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1zhgB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "could you not run it in debug mode and just stick breakpoints in if your looking to review the current state (whilst testing)?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1626512139.475300",
        "edited": {
            "user": "ULDAVFDRP",
            "ts": "1626512199.000000"
        },
        "client_msg_id": "ff4b9c64-3593-4a59-8777-12ceb14b5c42",
        "text": "not sure that worker will have the desired effect unless I misunderstand the code (it terminates when no markets are left). your just looking to terminate the code aren't you?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1626512139.475300",
        "reply_count": 6,
        "reply_users_count": 2,
        "latest_reply": "1626512991.477700",
        "reply_users": [
            "U0154JA98TH",
            "ULDAVFDRP"
        ],
        "replies": [
            {
                "user": "U0154JA98TH",
                "ts": "1626512564.476700"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1626512746.476900"
            },
            {
                "user": "U0154JA98TH",
                "ts": "1626512874.477100"
            },
            {
                "user": "U0154JA98TH",
                "ts": "1626512877.477300"
            },
            {
                "user": "U0154JA98TH",
                "ts": "1626512887.477500"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1626512991.477700"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1626512991.477700",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "916zu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "not sure that worker will have the desired effect unless I misunderstand the code (it terminates when no markets are left). your just looking to terminate the code aren't you?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0154JA98TH",
        "type": "message",
        "ts": "1626512564.476700",
        "client_msg_id": "730dccd8-c568-429e-ba53-fb3548b73a40",
        "text": "yes but i was thinking i could just remove some of the logic and just have it run the \"flumine.handler_queue.put(TerminationEvent(flumine))\" line in order to halt the code. I would also alter the parameters in the BackgroundWorker to execute after 10s. Does this seem plausible or did you have something else in mind for the termination of the code?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g04d857ee3ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/04d857ee3ad168a8451932c84c7d0d6d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonathan",
            "real_name": "Jonathan Wadsworth",
            "display_name": "Jono",
            "team": "T4G9NBD2M",
            "name": "jonowads",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1626512139.475300",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gSKun",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yes but i was thinking i could just remove some of the logic and just have it run the \"flumine.handler_queue.put(TerminationEvent(flumine))\" line in order to halt the code. I would also alter the parameters in the BackgroundWorker to execute after 10s. Does this seem plausible or did you have something else in mind for the termination of the code?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1626512746.476900",
        "client_msg_id": "b07aa367-6b8a-4a5a-befe-2bc4f5dcd7a9",
        "text": "Think that should work yes :+1:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1626512139.475300",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VrrY2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Think that should work yes "
                            },
                            {
                                "type": "emoji",
                                "name": "+1",
                                "unicode": "1f44d"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0154JA98TH",
        "type": "message",
        "ts": "1626512874.477100",
        "client_msg_id": "12a2ec72-ad5c-4c79-bf4c-64e14650139c",
        "text": "Result :grin:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g04d857ee3ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/04d857ee3ad168a8451932c84c7d0d6d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonathan",
            "real_name": "Jonathan Wadsworth",
            "display_name": "Jono",
            "team": "T4G9NBD2M",
            "name": "jonowads",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1626512139.475300",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dmC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Result "
                            },
                            {
                                "type": "emoji",
                                "name": "grin",
                                "unicode": "1f601"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "",
        "files": [
            {
                "id": "F028D6WCY74",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U0154JA98TH",
        "display_as_bot": false,
        "type": "message",
        "ts": "1626512877.477300",
        "thread_ts": "1626512139.475300",
        "parent_user_id": "ULDAVFDRP"
    },
    {
        "user": "U0154JA98TH",
        "type": "message",
        "ts": "1626512887.477500",
        "client_msg_id": "e1fe0062-a72c-45ff-84ef-c7f0feac19d0",
        "text": "thank you for your help",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g04d857ee3ad",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/04d857ee3ad168a8451932c84c7d0d6d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonathan",
            "real_name": "Jonathan Wadsworth",
            "display_name": "Jono",
            "team": "T4G9NBD2M",
            "name": "jonowads",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1626512139.475300",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "cVSK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thank you for your help"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1626512991.477700",
        "edited": {
            "user": "ULDAVFDRP",
            "ts": "1626513343.000000"
        },
        "client_msg_id": "6b644d75-ff0c-4c20-8c71-68f7c0041373",
        "text": "nw, <@U4H19D1D2> great design with flumine has thought of most things :+1:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1626512139.475300",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ziH8p",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "nw, "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " great design with flumine has thought of most things "
                            },
                            {
                                "type": "emoji",
                                "name": "+1",
                                "unicode": "1f44d"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]