[
    {
        "text": "Morning All,\nI thought Id take a look at one of my existing profitable long term strats to see if i could improve it with ML\nThese are the basic steps that the ML took ;\n\nloading data Set into dataframe....\nCreating Histogram and Density plot....\nCreating Correlation Matrix considering only numeric columns....\nSelecting features and target....\nSplit the data....\nTrain Random Forest....\nMaking Predictions....\nCalculating Random Forest Accuracy....\nValidation Accuracy: 0.7990462572417981\nTest Set predictions accuracy....\nTest Accuracy: 0.7989358028340348\nCalculating the feature importance....\nCalculating SHAP values for model interpretability...\nAnalyzing overall feature contributions...\n\nBased on 3 months of inplay data (Circa 35m rows of CSV)\n\nThe ML model was significantly better than my simple model and I though it was a good idea to use SHAP to try and understand what the model was doing ...(Now I know next to nothing about ML so not sure if those who work in this field use SHAP or whether it is any good??)\n\nThe output of SHAP is shown in the attached illustration.\n(Ive removed the descriptions of the features for now)\n\nFrom Top down, Im only using features 1, 4 and 5 in my day to day strat, but it seems to suggest that these three features have a negative impact on the P\/L? So that has confused me :grinning:\nShould I really be focusing on features 6 and 7 that have a high positive impact?  (Incidentally use feature 6 in a separate strat successfully)\n\nHow would you ML guys delve down deeper? (I though that maybe I could use Pandas to look at each feature independently, although I realise that it wouldn't give a complete picture as it maybe dependent on the values of other features, if that makes sense)\nOr maybe I could run SHAP again but on selected features?\nMy head thinks just use pandas (as the ML stuff takes ages to run). The more I play around with ML, the more I think the simple methods of data interpretation are much quicker and provides good enough insight\/indicative ie good enough == good enough\nI just thought it may be an interesting topic for discussion, thanks for any thoughts",
        "files": [
            {
                "id": "F0689C3FE4W",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "UQL0QDEKA",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hBsTZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Morning All,\nI thought Id take a look at one of my existing profitable long term strats to see if i could improve it with ML\nThese are the basic steps that the ML took ;\n\nloading data Set into dataframe....\nCreating Histogram and Density plot....\nCreating Correlation Matrix considering only numeric columns....\nSelecting features and target....\nSplit the data....\nTrain Random Forest....\nMaking Predictions....\nCalculating Random Forest Accuracy....\nValidation Accuracy: 0.7990462572417981\nTest Set predictions accuracy....\nTest Accuracy: 0.7989358028340348\nCalculating the feature importance....\nCalculating SHAP values for model interpretability...\nAnalyzing overall feature contributions...\n\nBased on 3 months of inplay data (Circa 35m rows of CSV)\n\nThe ML model was significantly better than my simple model and I though it was a good idea to use SHAP to try and understand what the model was doing ...(Now I know next to nothing about ML so not sure if those who work in this field use SHAP or whether it is any good??)\n\nThe output of SHAP is shown in the attached illustration.\n(Ive removed the descriptions of the features for now)\n\nFrom Top down, Im only using features 1, 4 and 5 in my day to day strat, but it seems to suggest that these three features have a negative impact on the P\/L? So that has confused me "
                            },
                            {
                                "type": "emoji",
                                "name": "grinning",
                                "unicode": "1f600"
                            },
                            {
                                "type": "text",
                                "text": "\nShould I really be focusing on features 6 and 7 that have a high positive impact?  (Incidentally use feature 6 in a separate strat successfully)\n\nHow would you ML guys delve down deeper? (I though that maybe I could use Pandas to look at each feature independently, although I realise that it wouldn't give a complete picture as it maybe dependent on the values of other features, if that makes sense)\nOr maybe I could run SHAP again but on selected features?\nMy head thinks just use pandas (as the ML stuff takes ages to run). The more I play around with ML, the more I think the simple methods of data interpretation are much quicker and provides good enough insight\/indicative ie good enough == good enough\nI just thought it may be an interesting topic for discussion, thanks for any thoughts"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1701682639.944229",
        "client_msg_id": "db198726-7cc3-442d-ae13-b96a236d096c",
        "thread_ts": "1701682639.944229",
        "reply_count": 14,
        "reply_users_count": 5,
        "latest_reply": "1708446113.060799",
        "reply_users": [
            "U4H19D1D2",
            "U04NWADNCFR",
            "UQL0QDEKA",
            "U016TGY3676",
            "U06KP54CEMR"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1701685172.650939"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1701709737.673139"
            },
            {
                "user": "UQL0QDEKA",
                "ts": "1701710500.348939"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1701710862.560199"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1701711626.278009"
            },
            {
                "user": "UQL0QDEKA",
                "ts": "1701711873.031919"
            },
            {
                "user": "U016TGY3676",
                "ts": "1701722677.832099"
            },
            {
                "user": "UQL0QDEKA",
                "ts": "1701765991.092709"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1701770211.530439"
            },
            {
                "user": "UQL0QDEKA",
                "ts": "1701771091.620919"
            },
            {
                "user": "U016TGY3676",
                "ts": "1701780570.487209"
            },
            {
                "user": "U06KP54CEMR",
                "ts": "1708443237.933959"
            },
            {
                "user": "U06KP54CEMR",
                "ts": "1708443441.802889"
            },
            {
                "user": "UQL0QDEKA",
                "ts": "1708446113.060799"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1708446113.060799"
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1701685172.650939",
        "client_msg_id": "e883ad70-75f9-4acc-8ffd-8b123a39228f",
        "text": "For us mere mortals I think your last paragraph sums it up for me. So far for me the biggest insight has been its ability to quantify \/ visualise relationships between pnl and variables which aren't always linear.\n\nHowever I have then taken the value out and updated my models \/ if statements to cater for the non linear relationship. In my case I have been keeping some features static and literally plugging in values to graph the change in outcome from the model, its dirty and could probably be replicated using regression but it works. Simply using the ML model was just matching or falling short of my previous strategies but using ML to advance things is a process that works well on my current strategies.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1701682639.944229",
        "parent_user_id": "UQL0QDEKA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "51PmK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "For us mere mortals I think your last paragraph sums it up for me. So far for me the biggest insight has been its ability to quantify \/ visualise relationships between pnl and variables which aren't always linear.\n\nHowever I have then taken the value out and updated my models \/ if statements to cater for the non linear relationship. In my case I have been keeping some features static and literally plugging in values to graph the change in outcome from the model, its dirty and could probably be replicated using regression but it works. Simply using the ML model was just matching or falling short of my previous strategies but using ML to advance things is a process that works well on my current strategies."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "UQL0QDEKA"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1701709737.673139",
        "edited": {
            "user": "U04NWADNCFR",
            "ts": "1701710204.000000"
        },
        "client_msg_id": "788a2d0d-b144-488e-8141-9fa685fb6eda",
        "text": "Hi <@UQL0QDEKA>, thanks for posting this. Is the model predicting win\/lose\/(draw) or is it predicting a price?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1701682639.944229",
        "parent_user_id": "UQL0QDEKA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "S3BAC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi "
                            },
                            {
                                "type": "user",
                                "user_id": "UQL0QDEKA"
                            },
                            {
                                "type": "text",
                                "text": ", thanks for posting this. Is the model predicting win\/lose\/(draw) or is it predicting a price?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UQL0QDEKA",
        "type": "message",
        "ts": "1701710500.348939",
        "client_msg_id": "731BA066-A07F-4369-AA8F-E23C06C742AB",
        "text": "It is uk horse racing predicting the winner (in my case I’m laying)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g444d10128c0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/444d10128c0aaf094041a52a76796602.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Peter",
            "real_name": "Peter Lenagh",
            "display_name": "PeterLe",
            "team": "T4G9NBD2M",
            "name": "lenagh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1701682639.944229",
        "parent_user_id": "UQL0QDEKA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0vrxY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It is uk horse racing predicting the winner (in my case I’m laying)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1701710862.560199",
        "client_msg_id": "2b4a7e88-fe8b-4bdf-8a10-9c6a9561b5e8",
        "text": "Does the 80% accuracy mean it was correct for 80% of the rows in the input data set, or correct for 80% of the markets? Reason I ask is that I found the precision measure more useful in my modelling - predicting the wrong result when LAYing is more expensive than missed opportunities :grimacing:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1701682639.944229",
        "parent_user_id": "UQL0QDEKA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "P0Fxh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Does the 80% accuracy mean it was correct for 80% of the rows in the input data set, or correct for 80% of the markets? Reason I ask is that I found the precision measure more useful in my modelling - predicting the wrong result when LAYing is more expensive than missed opportunities "
                            },
                            {
                                "type": "emoji",
                                "name": "grimacing",
                                "unicode": "1f62c"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1701711626.278009",
        "client_msg_id": "42109723-e5db-4568-81f3-292d96ca646f",
        "text": "As for the SHAP results, I had to look it up to refresh my memory but I think this graph is showing most useful features from top to bottom. Feature 1 predicts a winner when it has a low value, as does 2 &amp; 3 (all the red dots are clustered together). I think feature 7 isn't very predictive - both high and low values are mostly red. That is my understanding but happy to be corrected. <https:\/\/datascience.stackexchange.com\/questions\/65307\/how-to-interpret-shapley-value-plot-for-a-model>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1701682639.944229",
        "parent_user_id": "UQL0QDEKA",
        "attachments": [
            {
                "from_url": "https:\/\/datascience.stackexchange.com\/questions\/65307\/how-to-interpret-shapley-value-plot-for-a-model",
                "service_icon": "https:\/\/cdn.sstatic.net\/Sites\/datascience\/Img\/apple-touch-icon.png?v=5e1a482deef9",
                "thumb_url": "https:\/\/cdn.sstatic.net\/Sites\/datascience\/Img\/apple-touch-icon@2.png?v=04de5a808425",
                "thumb_width": 316,
                "thumb_height": 316,
                "id": 1,
                "original_url": "https:\/\/datascience.stackexchange.com\/questions\/65307\/how-to-interpret-shapley-value-plot-for-a-model",
                "fallback": "Data Science Stack Exchange: How to interpret Shapley value plot for a model?",
                "text": "I was trying to use Shapley value approach for understanding the model predictions. I am trying this on a Xgboost model. My plot looks like as below\nCan someone help me interpret this? Or confirm my",
                "title": "How to interpret Shapley value plot for a model?",
                "title_link": "https:\/\/datascience.stackexchange.com\/questions\/65307\/how-to-interpret-shapley-value-plot-for-a-model",
                "service_name": "Data Science Stack Exchange"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9tm2v",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "As for the SHAP results, I had to look it up to refresh my memory but I think this graph is showing most useful features from top to bottom. Feature 1 predicts a winner when it has a low value, as does 2 & 3 (all the red dots are clustered together). I think feature 7 isn't very predictive - both high and low values are mostly red. That is my understanding but happy to be corrected. "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/datascience.stackexchange.com\/questions\/65307\/how-to-interpret-shapley-value-plot-for-a-model"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UQL0QDEKA",
        "type": "message",
        "ts": "1701711873.031919",
        "edited": {
            "user": "UQL0QDEKA",
            "ts": "1701712719.000000"
        },
        "client_msg_id": "ce5828fd-3a8a-4d0b-b075-dcfcf440428d",
        "text": "Yes the 80% Accuracy, is a measure of how accurate the model is making predictions on both the validation and test data (the fact that they are very similar  is a good indicator\nThanks for the link, Ill have a read of that",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g444d10128c0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/444d10128c0aaf094041a52a76796602.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Peter",
            "real_name": "Peter Lenagh",
            "display_name": "PeterLe",
            "team": "T4G9NBD2M",
            "name": "lenagh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1701682639.944229",
        "parent_user_id": "UQL0QDEKA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kfAZp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes the 80% Accuracy, is a measure of how accurate the model is making predictions on both the validation and test data (the fact that they are very similar  is a good indicator\nThanks for the link, Ill have a read of that"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U04NWADNCFR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1701722677.832099",
        "client_msg_id": "0281fd0d-a370-40e1-88c2-1b48b88c5048",
        "text": "<@UQL0QDEKA> have you looked at the feature importances? They can sometimes be useful to view good\/bad features of your model",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1701682639.944229",
        "parent_user_id": "UQL0QDEKA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1B5Z\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UQL0QDEKA"
                            },
                            {
                                "type": "text",
                                "text": " have you looked at the feature importances? They can sometimes be useful to view good\/bad features of your model"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]