[
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1706276095.612319",
        "client_msg_id": "018434df-7430-4fd3-880b-20641911c989",
        "text": "When using Flumine simulation, what's the best practice for _taking_ prices where the strategy could be potentially taking the same size multiple times because the available size hasn't been reduced accordingly?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "reply_count": 16,
        "reply_users_count": 5,
        "latest_reply": "1706355437.453729",
        "reply_users": [
            "UBS7QANF3",
            "UUE6E1LA1",
            "UEA14GBRR",
            "U016TGY3676",
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1706276584.550329"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1706277525.403369"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1706278674.401119"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1706279007.747349"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1706279500.735199"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1706279879.340899"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1706279909.958999"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1706280086.081069"
            },
            {
                "user": "UEA14GBRR",
                "ts": "1706280141.449519"
            },
            {
                "user": "U016TGY3676",
                "ts": "1706315303.994669"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1706350114.261039"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1706350481.489509"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1706350792.980669"
            },
            {
                "user": "U016TGY3676",
                "ts": "1706354426.788989"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1706354735.108849"
            },
            {
                "user": "U016TGY3676",
                "ts": "1706355437.453729"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1706355437.453729",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JhkRJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "When using Flumine simulation, what's the best practice for "
                            },
                            {
                                "type": "text",
                                "text": "taking",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " prices where the strategy could be potentially taking the same size multiple times because the available size hasn't been reduced accordingly?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1706276584.550329",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1706277599.000000"
        },
        "client_msg_id": "c63fc9dc-a735-42f1-861c-db8a002be814",
        "text": "Not flumine specific but use a cooldown per selection per side during which time you're not allowed to place another bet. In the extreme case, you only allow one bet per selection per side per market. i.e. infinite cooldown\n\nIf you are OK with simulating with best price execution turned off then you could further key the cooldown by price to allow you to take different prices on the same selection\/side combo",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9\/hz6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not flumine specific but use a cooldown per selection per side during which time you're not allowed to place another bet. In the extreme case, you only allow one bet per selection per side per market. i.e. infinite cooldown\n\nIf you are OK with simulating with best price execution turned off then you could further key the cooldown by price to allow you to take different prices on the same selection\/side combo"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1706277525.403369",
        "client_msg_id": "4f00d57b-b43f-4e1c-bffc-6e75ebe34570",
        "text": "Cheers <@U016TGY3676> . With this question you've just made me realise I've a massive bug in my own simulator code.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "00raD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Cheers "
                            },
                            {
                                "type": "user",
                                "user_id": "U016TGY3676"
                            },
                            {
                                "type": "text",
                                "text": " . With this question you've just made me realise I've a massive bug in my own simulator code."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "scream",
                "users": [
                    "UBS7QANF3",
                    "U016TGY3676"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1706278674.401119",
        "client_msg_id": "4404485c-cc5d-4b65-96e6-2a2f8ffe5b1d",
        "text": "I use a pending bets queue, which I deduct from the availble. When an order is allocated a reference number (ARRI) then I drop it from pending.  The queue is also used to prevent rapid duplicates ie if the queue already contains an order for the same selection, price, stake.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ONZHG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I use a pending bets queue, which I deduct from the availble. When an order is allocated a reference number (ARRI) then I drop it from pending.  The queue is also used to prevent rapid duplicates ie if the queue already contains an order for the same selection, price, stake."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U016TGY3676"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1706279007.747349",
        "edited": {
            "user": "UUE6E1LA1",
            "ts": "1706279043.000000"
        },
        "client_msg_id": "54d12acf-54d7-4623-934e-34b713dfd8e6",
        "text": "Is that per update <@UEA14GBRR>? I also do this on a per update basis. But I've just realised that any deductions I make from the \"current\" available money will get overwritten on the next update that contains that price. Because ladder price updates are absolute (when something changes) rather than actual deltas (as with traded volumes) I then overwrite the current available with the new amount - in doing so I am (possibly) undoing the liquidity removal I made previously.\nDoes this make sense, and if so what do you do to counter that?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Of7Yk",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is that per update "
                            },
                            {
                                "type": "user",
                                "user_id": "UEA14GBRR"
                            },
                            {
                                "type": "text",
                                "text": "? I also do this on a per update basis. But I've just realised that any deductions I make from the \"current\" available money will get overwritten on the next update that contains that price. Because ladder price updates are absolute (when something changes) rather than actual deltas (as with traded volumes) I then overwrite the current available with the new amount - in doing so I am (possibly) undoing the liquidity removal I made previously.\nDoes this make sense, and if so what do you do to counter that?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1706279500.735199",
        "client_msg_id": "4b7d2f74-b0f0-465e-871c-6dfbe541f978",
        "text": "Per update, the position being theirs less anything of mine in the pipeline. Ie assuming the 'worse case?' that my order fully matches on arrival.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SCC1n",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Per update, the position being theirs less anything of mine in the pipeline. Ie assuming the 'worse case?' that my order fully matches on arrival."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1706279879.340899",
        "client_msg_id": "e03f8be4-3546-42b8-a88a-a74b499b7182",
        "text": "I say per update, but it's only when I'm considering a bet. No point in doing the calc if I'm out of timeframe or other conditions.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WJXBR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I say per update, but it's only when I'm considering a bet. No point in doing the calc if I'm out of timeframe or other conditions."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1706279909.958999",
        "client_msg_id": "ed34681b-3f13-4297-aa8c-522466ddbc22",
        "text": "OK, so let's say your pending bet is asking to back a runner at 3.0 for £20. At time you simulate the bet hitting the market, there is £25 available at 3.0 so you have a full match and £5 remains at 3.0.  In reality though,  nothing WAS matched. 2 seconds later, the volume available comes in at £30 at 3.0. This overwrites the simulated adjustment of £5 available to £30. So for later bets, you could be recounting that as excess money available. You've only removed it in the sense of matching pending bets at the time they enter the market.\nIs there actually a way to accurately counter this problem?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "oKtjx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "OK, so let's say your pending bet is asking to back a runner at 3.0 for £20. At time you simulate the bet hitting the market, there is £25 available at 3.0 so you have a full match and £5 remains at 3.0.  In reality though,  nothing WAS matched. 2 seconds later, the volume available comes in at £30 at 3.0. This overwrites the simulated adjustment of £5 available to £30. So for later bets, you could be recounting that as excess money available. You've only removed it in the sense of matching pending bets at the time they enter the market.\nIs there actually a way to accurately counter this problem?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1706280086.081069",
        "edited": {
            "user": "UEA14GBRR",
            "ts": "1706280104.000000"
        },
        "client_msg_id": "12af2e31-75d0-42f9-8865-9821dcb1d5bb",
        "text": "Can't remember <@UUE6E1LA1> I haven't looked at that code for years. It seems pretty fundamental so (not being a flumine user) I'd imagine it's functionality that's already catered for somehow. You couldn't backtest without it.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "OD0NJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Can't remember "
                            },
                            {
                                "type": "user",
                                "user_id": "UUE6E1LA1"
                            },
                            {
                                "type": "text",
                                "text": " I haven't looked at that code for years. It seems pretty fundamental so (not being a flumine user) I'd imagine it's functionality that's already catered for somehow. You couldn't backtest without it."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UEA14GBRR",
        "type": "message",
        "ts": "1706280141.449519",
        "client_msg_id": "c83423d8-96ca-468f-881d-fc4235529193",
        "text": "... I thought you were talking about live.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "889680f46fe7",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-06\/6774538588752_889680f46fe773047cb9_72.jpg",
            "first_name": "",
            "real_name": "Shaun White",
            "display_name": "ShaunW",
            "team": "T4G9NBD2M",
            "name": "shaunwhite",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "P7sCs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "... I thought you were talking about live."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1706315303.994669",
        "edited": {
            "user": "U016TGY3676",
            "ts": "1706316164.000000"
        },
        "client_msg_id": "fb5813cb-3ead-4c04-bd9e-89d3e75518a0",
        "text": "<@UUE6E1LA1> you described the issue perfectly. <@UBS7QANF3> so all of my simulation stuff assumes bpe is off as I've not (yet) found a single strategy that is better with it enabled. I used to keep track of the previous price and only checked my signals if the price had changed in the current update. That has an issue where: if the price was adjusted but the size available remains the same, then I'm still taking more money than is available.\nI also tried various delays and also forcing my bets to be passive, where I enter at 1 tick away from where I want to be but then the strategy is no longer executing at the desired price.\nThe main issue is simulating strategies which are operating on market movement where missing the target price affects profit. I've currently settled for one bet per price\/side\/selection but that significantly reduces the hit rate. Testing these strategies live, I'm seeing different matches vs simulation of the same markets. My best live strategy (which has been running for several years) would of been binned if I had simulated it before going live and still performs poorly in simulation, so I guess I'm operating within XM\/market impact territory and live testing with small stakes is probably the way forth.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706276095.612319",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QMccn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UUE6E1LA1"
                            },
                            {
                                "type": "text",
                                "text": " you described the issue perfectly. "
                            },
                            {
                                "type": "user",
                                "user_id": "UBS7QANF3"
                            },
                            {
                                "type": "text",
                                "text": " so all of my simulation stuff assumes bpe is off as I've not (yet) found a single strategy that is better with it enabled. I used to keep track of the previous price and only checked my signals if the price had changed in the current update. That has an issue where: if the price was adjusted but the size available remains the same, then I'm still taking more money than is available.\nI also tried various delays and also forcing my bets to be passive, where I enter at 1 tick away from where I want to be but then the strategy is no longer executing at the desired price.\nThe main issue is simulating strategies which are operating on market movement where missing the target price affects profit. I've currently settled for one bet per price\/side\/selection but that significantly reduces the hit rate. Testing these strategies live, I'm seeing different matches vs simulation of the same markets. My best live strategy (which has been running for several years) would of been binned if I had simulated it before going live and still performs poorly in simulation, so I guess I'm operating within XM\/market impact territory and live testing with small stakes is probably the way forth."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "US2RWCWKY",
        "type": "message",
        "ts": "1706329251.419409",
        "client_msg_id": "500c6b90-847c-4088-a81f-0bd6d2b64001",
        "text": "I like the wonky graphs.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf934fece8db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f934fece8db401123296fc3e9f70453a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-72.png",
            "first_name": "",
            "real_name": "Alex A",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "alexander.abboud",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1706000289.243149",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "teozl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I like the wonky graphs."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]