[
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1694162435.477199",
        "client_msg_id": "65c8045a-a9e5-4e08-b00b-dcbdf6d6b7ea",
        "text": "8-10 ms latency? Wow - I just looked at august and the lowest latency I had was 1045 milliseconds (inplay horses). However, I measure mine from time the order is created by a strategy, to the time that I receive the bet on the order stream. I place with the async flag and the lowest latency I have on the placement is 20ms. My SQL is quite basic and I am not familiar with how to extract the median.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693944743.379259",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "03msU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "8-10 ms latency? Wow - I just looked at august and the lowest latency I had was 1045 milliseconds (inplay horses). However, I measure mine from time the order is created by a strategy, to the time that I receive the bet on the order stream. I place with the async flag and the lowest latency I have on the placement is 20ms. My SQL is quite basic and I am not familiar with how to extract the median."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1694162554.471039",
        "client_msg_id": "a3aef189-abfc-4e86-bfc3-6362a7d80aca",
        "text": "I assumed it was tick to trade, ie the time an order is sent - `market_publish_time` that was used to trigger the order",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693944743.379259",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "FzCnA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I assumed it was tick to trade, ie the time an order is sent - "
                            },
                            {
                                "type": "text",
                                "text": "market_publish_time",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " that was used to trigger the order"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1694163512.448109",
        "client_msg_id": "8b0b011a-ba9f-445f-8c0e-54a0c8ee8bb3",
        "text": "Yeah I probably have lower latency in reality as I use an async component so I log transmission time as the time that the non-blocking write call returns - it doesn't mean that is when the write actually happened. Although I log the publish time I don't actually use that in the database but I can see that does reduce it further. Even with all that taken intou account though I am nowhere near single figure latencies.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693944743.379259",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+NU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah I probably have lower latency in reality as I use an async component so I log transmission time as the time that the non-blocking write call returns - it doesn't mean that is when the write actually happened. Although I log the publish time I don't actually use that in the database but I can see that does reduce it further. Even with all that taken intou account though I am nowhere near single figure latencies."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0128E7BEHW",
        "type": "message",
        "ts": "1694202940.777449",
        "edited": {
            "user": "U0128E7BEHW",
            "ts": "1694202994.000000"
        },
        "client_msg_id": "03ad5fb9-15cb-49f2-bfda-3c6ef8699ce8",
        "text": "That's correct Liam, I am computing as (time.time()*1e3 - book.publish_time_epoch). I'll double check my clock and make sure it's not behind for some reason. I am sure I am trading on fewer events though which could explain it (and possibly simpler logic). Possible dumb question: I assume you have n flumine instances running a number of strategies each - even though your machine's CPU may not be saturated, have you looked at latency impact of just splitting one of those instances across two boxes (i.e. cheap way to truly parallelize with no GIL in the way)?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb57a2bdd15a",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b57a2bdd15acccdb845ce257f38940cc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "Dave",
            "real_name": "Dave R",
            "display_name": "Dave",
            "team": "T4G9NBD2M",
            "name": "d7m",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693944743.379259",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9Ra9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That's correct Liam, I am computing as (time.time()*1e3 - book.publish_time_epoch). I'll double check my clock and make sure it's not behind for some reason. I am sure I am trading on fewer events though which could explain it (and possibly simpler logic). Possible dumb question: I assume you have n flumine instances running a number of strategies each - even though your machine's CPU may not be saturated, have you looked at latency impact of just splitting one of those instances across two boxes (i.e. cheap way to truly parallelize with no GIL in the way)?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0128E7BEHW",
        "type": "message",
        "ts": "1694203124.306149",
        "client_msg_id": "24008e12-6951-434e-ad67-4b305b8e5a35",
        "text": "DC I appreciate your input as well, thanks. 1045ms tick to trade in play seems like a lot, given a matching cycle of 50ms? You're basically submitting once the book has changed many times over?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb57a2bdd15a",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b57a2bdd15acccdb845ce257f38940cc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "Dave",
            "real_name": "Dave R",
            "display_name": "Dave",
            "team": "T4G9NBD2M",
            "name": "d7m",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693944743.379259",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "e4b",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "DC I appreciate your input as well, thanks. 1045ms tick to trade in play seems like a lot, given a matching cycle of 50ms? You're basically submitting once the book has changed many times over?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1694204862.281039",
        "client_msg_id": "f4e78060-d403-4bb2-80e9-1eef98414ba5",
        "text": "Well, I see that as just 45ms latency given 1000 for the inplay delay. I was actually pretty happy with my mean latency times which are around the 1150 mark until I saw your post. I suspect that most of this is down to the asynchronous component I use. I'm moving to a connection pool implementation so will be interesting to review things after that.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693944743.379259",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Wnw",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Well, I see that as just 45ms latency given 1000 for the inplay delay. I was actually pretty happy with my mean latency times which are around the 1150 mark until I saw your post. I suspect that most of this is down to the asynchronous component I use. I'm moving to a connection pool implementation so will be interesting to review things after that."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0128E7BEHW",
        "type": "message",
        "ts": "1694205223.363519",
        "edited": {
            "user": "U0128E7BEHW",
            "ts": "1694205789.000000"
        },
        "client_msg_id": "9438d2a7-b757-4cb8-a61a-d847ceea6038",
        "text": "ahh okay, your 1045ms is total roundtrip, with 1000 being in-play delay, so 45ms includes: (book recv latency + trading logic latency + order submission latency + ack latency), so your actual reaction time to the market book tick may well be single digit ms (which is what I am measuring, i.e. how long between book publish time and triggering an order to Betfair).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb57a2bdd15a",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b57a2bdd15acccdb845ce257f38940cc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "Dave",
            "real_name": "Dave R",
            "display_name": "Dave",
            "team": "T4G9NBD2M",
            "name": "d7m",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693944743.379259",
        "parent_user_id": "U0128E7BEHW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/4r",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ahh okay, your 1045ms is total roundtrip, with 1000 being in-play delay, so 45ms includes: (book recv latency + trading logic latency + order submission latency + ack latency), so your actual reaction time to the market book tick may well be single digit ms (which is what I am measuring, i.e. how long between book publish time and triggering an order to Betfair)."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]