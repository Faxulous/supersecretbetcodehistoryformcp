[
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1691826039.532909",
        "client_msg_id": "c0c584ae-1018-46c1-b5c1-9d9848536bd1",
        "text": "You arrive at the standard Kelly formula by writing down your log expected wealth assuming you are placing a new back bet on one of the outcomes, then differentiate the log expected wealth with respect to the stake, set it to zero and solve for stake. Which is, in other words, finding the stake that maximises your log expected wealth\n\nI'm doing exactly the same thing in this package. I am maximising the log expected wealth except handling more than 2 outcomes and both backing and laying. Partly for convenience and partly for necessity I'm doing it numerically rather than analytically. As a minor point I am minimising the negative log expected wealth which is obviously the same as maximising the log expected wealth\n\nThe intention is to add the closed form calculations for when there are two outcomes. You'll call the same function in the package and it will automatically skip the numerical optimisation in this case\n\nIn fact, there is a closed form solution for 3 outcomes which I am already using in Python but I found that numerically optimising in Rust is 3 times faster which blew my mind. Again, I will ultimately add the closed form solution for 3 outcomes to the package\n\nFor 3 outcomes, if you differentiate the log expected wealth and set it to zero you end up with a quadratic equation to solve. For 4 outcomes, you would end up with a cubic. For 5 outcomes, a quartic and so on. There are explicit formulas for solving cubics and quartics but no such formula exists for higher degree polynomials. Hence the need for numerical optimisation if you want to handle an arbitrary number of outcomes\n\nI have thought about using a Taylor series approximation in the higher degree cases to avoid the numerical optimisation but I'm not sure if this would work or what the loss in accuracy would be like\n\nAll of this is assuming you are placing a bet on only one of the outcomes. Once you start thinking about placing bets on multiple outcomes simultaneously then you pretty much have to use a numerical method although there are specific \"solvers\" like <https:\/\/en.wikipedia.org\/wiki\/Kelly_criterion#Multiple_outcomes|the method described in the multiple outcomes section of the Wikipedia article>\n\nI am surprised there is not a lot in the literature about closed form solutions for Kelly staking with \"large\" numbers of outcomes that you see in almost all horse races. It seems that the general philosophy is to throw a numerical solver at it which I think reflects academics' lack of real world experience. If you aspire to be doing these calculations on every market book update you need to be fast",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pWs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You arrive at the standard Kelly formula by writing down your log expected wealth assuming you are placing a new back bet on one of the outcomes, then differentiate the log expected wealth with respect to the stake, set it to zero and solve for stake. Which is, in other words, finding the stake that maximises your log expected wealth\n\nI'm doing exactly the same thing in this package. I am maximising the log expected wealth except handling more than 2 outcomes and both backing and laying. Partly for convenience and partly for necessity I'm doing it numerically rather than analytically. As a minor point I am minimising the negative log expected wealth which is obviously the same as maximising the log expected wealth\n\nThe intention is to add the closed form calculations for when there are two outcomes. You'll call the same function in the package and it will automatically skip the numerical optimisation in this case\n\nIn fact, there is a closed form solution for 3 outcomes which I am already using in Python but I found that numerically optimising in Rust is 3 times faster which blew my mind. Again, I will ultimately add the closed form solution for 3 outcomes to the package\n\nFor 3 outcomes, if you differentiate the log expected wealth and set it to zero you end up with a quadratic equation to solve. For 4 outcomes, you would end up with a cubic. For 5 outcomes, a quartic and so on. There are explicit formulas for solving cubics and quartics but no such formula exists for higher degree polynomials. Hence the need for numerical optimisation if you want to handle an arbitrary number of outcomes\n\nI have thought about using a Taylor series approximation in the higher degree cases to avoid the numerical optimisation but I'm not sure if this would work or what the loss in accuracy would be like\n\nAll of this is assuming you are placing a bet on only one of the outcomes. Once you start thinking about placing bets on multiple outcomes simultaneously then you pretty much have to use a numerical method although there are specific \"solvers\" like "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/en.wikipedia.org\/wiki\/Kelly_criterion#Multiple_outcomes",
                                "text": "the method described in the multiple outcomes section of the Wikipedia article"
                            },
                            {
                                "type": "text",
                                "text": "\n\nI am surprised there is not a lot in the literature about closed form solutions for Kelly staking with \"large\" numbers of outcomes that you see in almost all horse races. It seems that the general philosophy is to throw a numerical solver at it which I think reflects academics' lack of real world experience. If you aspire to be doing these calculations on every market book update you need to be fast"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1691829045.709139",
        "client_msg_id": "15f23533-baaa-450e-978b-d815f1068fd9",
        "text": "I found this nice short article on the three outcome case: <https:\/\/elliotnoma.wordpress.com\/2013\/04\/21\/the-kelly-criterion-for-three-outcome-gambles\/>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "attachments": [
            {
                "image_url": "https:\/\/elliotnoma.files.wordpress.com\/2013\/04\/kellythree2013-04-18-13_34_29.png?w=450",
                "image_width": 450,
                "image_height": 225,
                "image_bytes": 24627,
                "from_url": "https:\/\/elliotnoma.wordpress.com\/2013\/04\/21\/the-kelly-criterion-for-three-outcome-gambles\/",
                "service_icon": "https:\/\/s2.wp.com\/i\/webclip.png",
                "ts": 1366560008,
                "id": 1,
                "original_url": "https:\/\/elliotnoma.wordpress.com\/2013\/04\/21\/the-kelly-criterion-for-three-outcome-gambles\/",
                "fallback": "Elliot Noma: The Kelly criterion for three-outcome gambles",
                "text": "By Elliot Noma, Yu Bai Optimal bet sizing for a three outcome gamble can an be solved using an extensions of the two-outcome analysis for the Kelly criterion. We assume that gambles have three outcâ€¦",
                "title": "The Kelly criterion for three-outcome gambles",
                "title_link": "https:\/\/elliotnoma.wordpress.com\/2013\/04\/21\/the-kelly-criterion-for-three-outcome-gambles\/",
                "service_name": "Elliot Noma"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dqqK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I found this nice short article on the three outcome case: "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/elliotnoma.wordpress.com\/2013\/04\/21\/the-kelly-criterion-for-three-outcome-gambles\/"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1691829094.888039",
        "client_msg_id": "207d128d-84eb-4a02-80cc-d3effd284cd0",
        "text": "Thanks Mo. That will be my bedtime reading tonight",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HKy4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks Mo. That will be my bedtime reading tonight"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1691841520.280539",
        "client_msg_id": "3aa7b16b-5b28-4550-8a5b-cebcf9244a9f",
        "text": "I really need to create myself a \"pricing model\", seems all you clever guys are into this...?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "olX7l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I really need to create myself a \"pricing model\", seems all you clever guys are into this...?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1691841701.047229",
        "client_msg_id": "14F981B6-DC6B-4B07-A9C9-920F463D98C5",
        "text": "Not sure how you are supposed to identify value without one",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tROV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "N"
                            },
                            {
                                "type": "text",
                                "text": "ot sure how you are supposed to identify value without one"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1691844391.137529",
        "client_msg_id": "7e0069db-5c12-4b76-8801-994c4aa00e9b",
        "text": "What about technical analysis?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bNH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What about technical analysis?"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "face_vomiting",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            },
            {
                "name": "white_check_mark",
                "users": [
                    "U03EW75HC74"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1691844771.248359",
        "client_msg_id": "ec1e095e-6e73-4d6a-8237-3fc120b4afe7",
        "text": "What's your definition of technical analysis?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0bxE1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What's your definition of technical analysis?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1691854496.092899",
        "client_msg_id": "a958ffc6-53f5-4457-bdf9-883853ef46ef",
        "text": "It's a broad area. But in general it's predicting future moves using historical data.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vvK6Z",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It's a broad area. But in general it's predicting future moves using historical data."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1691867389.774799",
        "client_msg_id": "2A337564-7AFF-42CC-B360-A49F32C1ED51",
        "text": "Witchcraft ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1691766939.851989",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WWGl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Witchcraft "
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "thinking_face",
                "users": [
                    "UPMUFSGCR"
                ],
                "count": 1
            },
            {
                "name": "joy",
                "users": [
                    "U053A382VFX"
                ],
                "count": 1
            }
        ]
    }
]