# General Technical - Community Knowledge

*7481 relevant conversations from across all channels*

---

## 2025-01-27 08:33:04 - random channel

**Mo**

Define "spare"? I have 64 GB in total but - naive question - isn't it about the GPU?

---

## 2025-01-27 07:01:33 - random channel

**Mo**

Any recommendations on how to run DeepSeek-V3 locally?

---

## 2025-01-26 09:09:59 - strategies channel

**AndyL**

Glad to be of help :grinning:

---

## 2025-01-25 00:11:39 - general channel

**Unknown**

Well, after 20+ years, I never expected this. Have had 2 accounts for the same period. Changed the email address on my other one (which is still active) earlier this evening. Nothing untoward going on, so I can only assume an over zealous CS agent? My accounts have been linked internally for many years, which I've discussed with [@UNW8Q88EL](@UNW8Q88EL) in the past and he said it wasn't an issue as I wasn't trying to hide anything. Bit annoying TBH. Hope it gets resolved...

---

## 2025-01-24 22:06:00 - betfair-news channel

**liam**

I recommend having a play with one of these markets, a bet will skip the delay either at initial placement if passive when it reaches the matcher or during the delay if it becomes passive.



Maybe I have misunderstood your question though as how would the matcher know the price you are reacting to? 

---

## 2025-01-23 19:01:07 - strategies channel

**Mo**

Can you be more specific about how the distribution of prices could be a problem?

---

## 2025-01-23 18:54:16 - strategies channel

**thambie1**

The distribution of prices could also be problematic for calculating the p-value. Without your dataset it's hard to dig further. But I'd bet a pretty large amount that graph and that p-value don't go together.

---

## 2025-01-23 18:17:00 - strategies channel

**ShaunW**

That's the $64,000 question.

---

## 2025-01-23 10:09:01 - random channel

**river_shah**

[@U012XF5CNPN](@U012XF5CNPN) Just asking programming / quant queries mostly. It also helps quite a bit with legal / finance / accounting questions which I have no expertise in

---

## 2025-01-22 18:22:26 - random channel

**PeterLe**

[@U05N9773A23](@U05N9773A23) I recall you saying that you get the feed direct? I take it you have the warn field in there to show if there is a problem with the data?

---

## 2025-01-22 18:13:55 - random channel

**Justice**

It isn't a problem per se... It just really wasn't a good bet in this case :joy: ~£5 but very frequently.

---

## 2025-01-22 18:12:20 - random channel

**liam**

Justice, out of interest what is your average bet size? Struggling to understand why a bet matching at 1000 is a problem

---

## 2025-01-22 18:07:52 - random channel

**D C**

???? Why is getting matched at 1000 a problem? I get matched at 1000 all the time?

---

## 2025-01-20 11:52:39 - random channel

**D C**

Right I see, you have to go to "My Betfair Account" to get to accountsummary to get the page that has the Expert Fee link. All other options off that "My Account" seem to provide a base page without it. Thanks chaps at least I know how to get to it now!!

---

## 2025-01-20 09:51:06 - strategies channel

**jp**

"It really helps to step away from the computer. All of my big breakthroughs in thinking came from taking a shower or cooking dinner or walking the dog"



I can really relate to this—I experience the exact same thing myself.

---

## 2025-01-19 12:30:16 - random channel

**PeterLe**

Yes I saw it on the betangel forum initially (Liam probably saw it there too)

Would you mind send me the documentation please rather than me ask Neil?

---

## 2025-01-19 12:26:58 - random channel

**D C**

I only became aware of this change because Liam posted here the details (probably lost on the slack history). Not sure if you are/were in the same boat as me but I was not on the "update" emailing list so I contacted Neil and he added me and sent the up to date documentation

---

## 2025-01-18 17:48:17 - random channel

**Mo**

Would be lovely to see you. Three big factors you've completely ignored:



1. How to apply margin

2. What about stake sizing

3. How do you manage inventory

---

## 2025-01-18 13:42:05 - random channel

**Paul**

There’s a section in Art of Legging I’ll share later which describes what you’re suggesting [@U01PJ5YMFBJ](@U01PJ5YMFBJ) - leaves a few open questions as an exercise for the reader… :)

---

## 2025-01-18 13:36:11 - random channel

**Paul**

Obvious questions are: what variable, (or variables)? How well does that method perform? And given we are no longer constrained to ledger book entries noting the takeout in pounds, shillings, and pence, but are armed with a magical device that can do billions of calculations a second, is there a better way?

---

## 2025-01-18 10:26:18 - issues channel

**D C**

Have you asked customer services? Did you ask why you were asked to submit documents? Sounds more like affordability nonsense or AML checks. Can't see why you'd need to submit any documentation for adding a Paypal account unless your paypal email or addres are different to those of your BF account

---

## 2025-01-17 07:48:03 - general channel

**D C**

Has it become less valuable that you will consider dropping your direct from TPD feed subscription? What's your basis for coming to this conclusion? I've not noticed any drop in profit since it was made available in BA (although I did worry that it would cause problems). Have you any metrics so suggest the ARC track inplay markets are tightening up recently?

---

## 2025-01-16 09:37:03 - general channel

**D C**

FWIW [@U07SPFFN010](@U07SPFFN010) I've found in the past that when I feel that I am getting nowhere in terms of "cracking" the real problem at hand, I focus on something else that I CAN do in a vain attempt to make myself feel less stupid. I'd kid myself that an unnecessary rewrite or prettification or "optimisation" of code was a good thing to do just because psychologically it made me feel I had achieved something (when in real terms, I had not). I'm still a bit guilty of it at times but I've learned to recognise it for what it is now and use it to change direction. For some it might be a good thing, but I now take a complete break and step back when I'm getting nowhere on problem of the month/week/day - but we all work in different ways. Managing the disappointment/failure/isolation of doing this kind of thing is important to recognise though.



Not saying that this is what you are doing here BTW - for all I know you might love this kind of problem in which case dig in.

---

## 2025-01-16 08:25:18 - general channel

**Jhonny**

Noted [@U4H19D1D2](@U4H19D1D2)! I guess it's better to start simple regardless of perceived complexity of the problem domain. Thanks

---

## 2025-01-15 20:12:33 - general channel

**Gooat**

Playing around with data types can help slightly with size but what's the worse case total size right now plus x years?

---

## 2025-01-14 16:14:51 - strategies channel

**D C**

The conceptual problem I have I think is that if BSP for dogs is any good then I want my prices to be close to the BSP. Therefore is there any value in measuring profit based on deviation from it?

---

## 2025-01-14 16:08:58 - strategies channel

**Mo**

Calculate EROI using BSP then bucket into ten equally sized bins and check realised ROIs. Does the pattern look sensible? ie when you think you have higher margin, do you? If your margin is too high, is this a problem? ie does it indicate you have missed something the market has not

---

## 2025-01-14 15:50:50 - strategies channel

**John Foley**

your questions:

1. looks like enough to keep trying imo

2. i'd probably pick a time e.g. 30mins from off (but try several) and full backtest

3. hard to know off this alone but generally yes adding meaningful variables should help



things id be trying next:

- normalise predictions per race and repeat backtest

- try to find probablility range where it performs best (maybe short price favs its shit, bigger prices its good)

- repeat your calibration step splitting by equal bin sizes instead of arbitrary 10% intervals

---

## 2025-01-13 14:31:13 - general channel

**Zana Chen**

Can't see my Premium Charges this morning, anyone else having this problem&gt;

---

## 2025-01-12 13:30:24 - random channel

**Mo**

I created a new 24.04 instance recently for my personal strategies which are run through flumine and no issues

---

## 2025-01-12 11:43:56 - random channel

**D C**

Might be wise to see what a flumine user says though as I have no idea how compatible that is going to be?? I'm sure you'll be fine but I have no knowledge in that area.

---

## 2025-01-12 11:43:21 - random channel

**PeterLe**

Thanks DC all that makes sense, Ill go with the latest

thanks for the help

---

## 2025-01-11 11:20:56 - strategies channel

**Jonjonjon**

[@UBS7QANF3](@UBS7QANF3) the reason for my question is that if 2 run it and you make double, then you could scale more. I know it's unlikely, which leads me to ask how much people settled on my current staking?

For my staking I tend to use your A/B code.

---

## 2025-01-11 08:01:58 - strategies channel

**Unknown**

Is the concept that beating BSP = Profit based on the assumption that the BSP in question is actually performing as expected. I`m struggling to see how a Back bet beating BSP 2.3 would work if the underlying trend is that it loses more than expected. Same if you were beating BSP 5.5 as it wins more than expected.

---

## 2025-01-10 18:32:26 - random channel

**liam**

But flumine does all the hard work for you 

---

## 2025-01-10 18:24:43 - random channel

**liam**

I thought you were using flumine for this?

---

## 2025-01-10 18:22:26 - random channel

**Unknown**

Quick Question please..(Sorry a simple question to those who know :grinning:)

Horseracing GPS feed...If i look at the marketstream like so (first image):

and want to match it to the racestream for the same race, I take it it uses the 'mid' field from the racestream?

(Appreciate that in the images they are different marketids, just trying to undertand the principle so i can edit my code)

Thanks in advance

---

## 2025-01-10 12:23:29 - strategies channel

**Mo**

Answer to my question appears to be: yes

---

## 2025-01-09 11:35:13 - strategies channel

**D C**

Reminds me of a bloke on twitter I used to talk to. Now I don't actually believe this story but IIRC said he'd made about 750k over lifetime and was part of a group of other players who used to bribe hotel staff at hotels that football players stayed in to provide a list of players who turned up to stay for a scheduled match so that they could bet if a critical player was missing.

It doesn't sound right to me, as I thought teams just coached down to the opposition when they play away (but I could be completely wrong on that and it could all be completely true). The problem I have is that my brain can only really come up with this kind of "idea" when it comes to "thinking outside the box". I try to change the way I think but it's easier said than done!!

---

## 2025-01-07 19:17:50 - strategies channel

**Jonjonjon**

Is prize money in the streaming data? As a mere mortal part-timer my data is limited to what I've recorded.

---

## 2025-01-07 18:33:53 - strategies channel

**D C**

OK maybe seeing a concrete analysis will help me get to grips with this. Just seems odd to me - we are talking about things are individually unknowable and unmeasurable. And all things have some degree of natural variation. I mean fair play to you if you can find some way of doing the numbers and using the results to your advantage.

---

## 2025-01-07 18:33:14 - strategies channel

**Paul**

The question then if that's a useful data point: is it actionable? Or is it just something that happens, and if you try and take action you're over-fitting? Depends on the strat, obvs

---

## 2025-01-07 18:11:02 - strategies channel

**Paul**

The problem is we think "horse racing" or "cricket" or "greyhounds" and smooth out. We might spot obvious differences like country or clear liquidity changes, but there absolutely 100% is a different set of people on the other side of the screen on different days and different hours of the day, and that manifests in how the market moves and develops.

---

## 2025-01-07 15:57:06 - issues channel

**Unknown**

[@U07AK2APF2B](@U07AK2APF2B) But I think this problem is with me :pensive:

---

## 2025-01-06 18:45:27 - strategies channel

**Mo**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) yeah but it’s not just about EROI, the other question is what is the capacity. Probably not very much for these strategies

---

## 2025-01-06 18:41:34 - strategies channel

**lorenzo**

&gt; equity curve all day long...

Does this mean you backtest in flumine every day and compare it to make sure it's the same? And then if it is you are confident that it will behave like the rest of your backtest?

---

## 2025-01-06 15:29:14 - general channel

**Jhonny**

Hi everyone, 2 questions please:

1. Are all parts of a segmented message guaranteed to be sent? e.g. if SEG_START arrives immediately I switch subscription, is there a guarantee that SEG_END would still eventually be sent before/after the start of the new subscription?

2. Where can I find sample of segmented messages?

---

## 2025-01-06 14:12:14 - issues channel

**Ralegh**

Dumb question but can’t you combine some of the market streams?

---

## 2025-01-06 10:57:23 - issues channel

**D C**

I've emailed Neil so I'll see how it goes. NO idea why I've posted this question in "issues" channel either :thinking_face:

---

## 2025-01-06 10:42:39 - issues channel

**liam**

aka blue square, purchased by betfair, 10 years ago? they transferred accounts so lots of us ended up with two betfair accounts, I used before I got an MSA to get around your current problem

---

## 2025-01-06 10:40:27 - issues channel

**D C**

Don't apologise - you've potentially saved me wasting time on this as a viable solution to the problem

---

## 2025-01-06 10:36:44 - issues channel

**D C**

I've not seen any explicit reference saying not  - but as I've never attempted to implement it, there may well be things that surface that make it impossible. Part of the reason I'm asking the question really

---

## 2025-01-05 16:00:30 - strategies channel

**Dave**

AHH don't get me wrong - NNs won't solve your problem. Robust hypothesis testing + hygiene with out-of-sample testing is where you'll find patterns that are real. And your hypothesis testing can be done either via simple regression, or fitting something more complex like trees / NNs.

---

## 2025-01-04 13:58:30 - issues channel

**JL**

How would one identify if a greyhound race is handicap or not from flumine?

---

## 2025-01-02 21:28:19 - strategies channel

**liam**

Simple is good, the problem is liquidity and adverse selection in the scenario you describe. You need a high enough edge / signal to be able to profit in inplay racing 

---

## 2025-01-02 21:16:10 - strategies channel

**liam**

You are asking the wrong questions 

---

## 2025-01-02 15:46:33 - general channel

**Brøndby IF**

Guys, another topic:



Could someone who has an account with [http://betfair.com|betfair.com](http://betfair.com|betfair.com) please confirm the volume traded in `currency_code="GBP"` specifically for this runner:



"event_id": "33907483"

"market_id": "1.237786775"

"selection_id": 23278850



→ Betfair in Brazil now has a specific website for our country (.[http://bet.br|bet.br](http://bet.br|bet.br)) and I need to confirm if the volume traded that I am receiving through the API is general or if it has been limited to only the volume traded in Brazil. Thank you very much for your help!

---

## 2025-01-02 13:56:18 - general channel

**Mo**

[@U02GGCCLTKM](@U02GGCCLTKM) - I won't be reducing any time allocated to the syndicates as I have very modest "contractual" weekly hours to work for them which leaves plenty of time for my own strategies. For one of the syndicates, we went through a quite painful process several years ago now to get to the point where we could agree on terms to allow us to work on outside projects. For the other, we've struggled for a couple of years to make any kind of meaningful profit and the other members are my brother and best friend so they are understanding of my desire to branch out on my own, and I'm much more willing to dedicate more hours to working than they are. If more details would be helpful for your situation feel free to DM me

---

## 2025-01-02 12:10:37 - general channel

**Ankit Aggarwal**

Amateur question, does the exchange double count all Trade Quantities, so basically divide by 2?

---

## 2025-01-01 22:56:39 - general channel

**Paul**

I’ve had a profit every day since the 26th Dec until today, which is my longest run in a while. I want to try and figure out how to get consistently daily profits and then scale them gently. I’ll be doing a lot of blogging on the way too.

---

## 2025-01-01 21:05:32 - issues channel

**liam**

No, just read the code 



[https://github.com/betcode-org/betfair/blob/5bd97eaac20a06188f59e6128249134187717d6b/betfairlightweight/baseclient.py#L87|https://github.com/betcode-org/betfair/blob/5bd97eaac20a06188f59e6128249134187717d6b/betfairlightweight/baseclient.py#L87](https://github.com/betcode-org/betfair/blob/5bd97eaac20a06188f59e6128249134187717d6b/betfairlightweight/baseclient.py#L87|https://github.com/betcode-org/betfair/blob/5bd97eaac20a06188f59e6128249134187717d6b/betfairlightweight/baseclient.py#L87)

---

## 2025-01-01 20:50:39 - issues channel

**Brøndby IF**

[@U07AK2APF2B](@U07AK2APF2B) I have several projects that have been running for a long time, but at the moment I had to deactivate everything, because I created them all on betfairlighiweight and my knowledge is very limited and I have no idea how I would be able to change this on my own.



I'm hoping [@U4H19D1D2](@U4H19D1D2) can help us with this.

---

## 2025-01-01 20:43:36 - issues channel

**Gabriel Mocan**

Sadly I don’t use betfairlightweight. But I think it’s an easy task, right? [@U4H19D1D2](@U4H19D1D2)

---

## 2025-01-01 20:42:20 - issues channel

**Brøndby IF**

[@U07AK2APF2B](@U07AK2APF2B) hi! How did you do this on betfairlightweight? Did you copy the entire library manually to your computer or is there another way?

---

## 2025-01-01 15:50:26 - issues channel

**Brøndby IF**

I hope that some of the Brazilian users who see this chat have the necessary knowledge to perform these tests and help us more accurately, my knowledge is considerably limited.

---

## 2025-01-01 15:18:57 - issues channel

**Lee**

If you want to test adding the tlds that can be done [https://github.com/betcode-org/betfair/blob/master/betfairlightweight/baseclient.py|here](https://github.com/betcode-org/betfair/blob/master/betfairlightweight/baseclient.py|here) 

---

## 2025-01-01 15:15:22 - issues channel

**Brøndby IF**

[@UUE6E1LA1](@UUE6E1LA1) and [@UUCD6P13J](@UUCD6P13J) I think they changed their mind, because the keys are all active and through the API-NG Visualiser the requests are working perfectly, but using Python they are not working at all (at least not for now).



Add: [@UUCD6P13J](@UUCD6P13J) thanks a lot to share!

---

## 2025-01-01 11:24:46 - issues channel

**Brøndby IF**

I'm facing this same scenario (at least with this change we didn't lose the App Key like we did when we changed from Dollar to BRL), I hope they can help us because I'm completely lost and don't know what to do.

---

## 2025-01-01 11:13:19 - issues channel

**Victor Hugo Oliveira**

good morning guys and happy new year!

the url to login into betfair in brazil has changed, now the new one is [https://www.betfair.bet.br](https://www.betfair.bet.br) how can i update it to request on the API betfairlightweight? I saw that some countries as italy and australia have an option to add "locale="

---

## 2024-12-31 10:26:06 - random channel

**Jonjonjon**

Ah I looked into Barclays and they have free Apple TV. Guess I'll have to apply for that later. Thanks Liam. Do people here think it's likely to be a problem if I open a Barclays account just to receive Betfair income and then deposit it into Vanguard? I've had a Barclays SIPP for over 10 years.

---

## 2024-12-30 23:57:19 - random channel

**Jonjonjon**

Has anyone had problems withdrawing from Betfair to a Revolut card?

---

## 2024-12-30 16:11:59 - random channel

**Paul**

In the same issue there is a tragic letters page contribution from a woman whose son committed suicide after being preyed on by US books "VIP'ing" him into a $10k NHL bet that he chased. Having red misted myself years ago, I honestly think it's all about trying to buy happiness, and so I don't have a problem with spending limits myself. All part of the same mix.

---

## 2024-12-30 12:55:39 - random channel

**Dave**

What questions did Monzo ask?

---

## 2024-12-30 12:36:51 - random channel

**Mo**

Never had a problem with NatWest 

---

## 2024-12-30 12:20:51 - random channel

**Jonjonjon**

Have people had problems with the more traditional banks? I've been withdrawing for years to a well known high street bank and have had no issues.

---

## 2024-12-30 10:55:22 - random channel

**Alex A**

Monzo have just decided to close my account I use to withdraw my winnings, after asking me some questions. Can anyone recommend a bank who aren’t bothered by frequent deposits from Betfair?

---

## 2024-12-30 10:38:32 - issues channel

**Paul**

flumine handles this automatically, but perhaps in your scenario it isn't for some reason. Doing anything funky?

---

## 2024-12-27 18:02:28 - strategies channel

**liam**

flumine will playback whatever you give it 

---

## 2024-12-27 15:27:04 - strategies channel

**AndyL**

[@U4H19D1D2](@U4H19D1D2) If I play back a recorded XM market through Flumine, can it tell virtual bets, or does it just playback "raw"/real offers ?

---

## 2024-12-27 14:53:54 - strategies channel

**liam**

Was XM actually on for that market?



flumine doesn’t do any XM replication 

---

## 2024-12-27 14:06:22 - strategies channel

**D C**

Does flumine not have facility to recreate virtual prices without requesting them? Sure I've seen people talk about doing this but perhaps this is within code that people like to keep closed source. If you can get access to such code you can see for yourself how it is calculated.

---

## 2024-12-27 10:28:40 - strategies channel

**liam**

To answer your question, the straightness of that initial bet pnl is directly related to the ev. You can replicate this by only including bets if ev above x 

---

## 2024-12-24 19:06:38 - strategies channel

**liam**

But you can try and answer some of these questions, has your roi dropped? EV? Is it match rate? Less opportunities? Simulate with full match etc. 

---

## 2024-12-24 17:11:23 - strategies channel

**AndyL**

I need to grow a brain to work out how to find bigger edges, but im probably a bit old for that…!

---

## 2024-12-22 11:55:38 - strategies channel

**PeterLe**

That's the crux of the problem isn't it; how to cut out the -ev by acting on a better signal. Sounds easy but not so! :grinning:

---

## 2024-12-21 22:21:05 - strategies channel

**Jonjonjon**

It's a tough problem. Not sure if this is the answer, but doesn't the type of race change in September?

---

## 2024-12-21 19:07:40 - strategies channel

**liam**

What is the ev telling you? Bad run or edge has gone? Question for both looking at that graph…

---

## 2024-12-20 23:56:11 - random channel

**Paul**

I ~know~ strongly suspect that they're over-fitting a bit to ARC-AGI and AIME style problems. The coding capabilities are trained on competitive programming problems which aren't really like real world problems you and I care about.

---

## 2024-12-20 23:27:52 - random channel

**birchy**

I haven't scraped bookies in recent years, but it was often easier to look at mobile/app/lightweight versions of the websites, e.g. [https://mobile.bet365.com|https://mobile.bet365.com](https://mobile.bet365.com|https://mobile.bet365.com). Spoofing a 'dumb' or older user agent often helped as it changed the content format. Also worth considering none-uk versions of the site.

As a general question, how delayed are aggregation sites like oddschecker, etc?

---

## 2024-12-20 20:30:29 - random channel

**D C**

You're a 50% PC payer. Caan Berry should be paying you to teach him how to make money.

---

## 2024-12-20 20:29:52 - random channel

**D C**

I was only joking [@UPMUFSGCR](@UPMUFSGCR) - I can't help myself with these things I am afraid. I loathe the course/ebook sellers

---

## 2024-12-20 19:26:20 - random channel

**Johnnb**

I've been working my way through the python version of the ISL book for a while and found it pretty useful.

[https://www.statlearning.com/](https://www.statlearning.com/)

---

## 2024-12-20 14:21:49 - random channel

**liam**

Can you ask the question without the context? I do this a lot and is normally a very simple question but always starts an interesting discussion 

---

## 2024-12-20 13:52:57 - random channel

**D C**

Just for clarity I suspect my question will fall into slot a) - me appearing an imbecile. It is actually something I can do a little bit of digging into first though so I will do that first.

---

## 2024-12-20 13:32:58 - random channel

**Paul**

If you're super cautious, ask someone you trust via dm, and instead of asking the question, ask them how to ask the question better...

---

## 2024-12-20 13:32:51 - random channel

**Paul**

We are all idiots at some stuff, and expert at others. If this place isn't to help everyone get better at the bigger picture, it's just a place for people to post stack traces and for [@UBS7QANF3](@UBS7QANF3) and [@U4H19D1D2](@U4H19D1D2) to ask for sample code before it's pointed out they're missing a dependency. Fuck that.

---

## 2024-12-20 13:19:05 - random channel

**Mo**

Ask the question and to hell with the consequences

---

## 2024-12-20 13:18:07 - random channel

**D C**

What is best practice here for the following situation:

You have thought of something that you want to discuss and ask a question. You wish to neither appear like an imbecile, nor accidently "leak alpha", nor piss on someone's parade by highlighting something that might be profitable already for others here. How do you proceed?

---

## 2024-12-20 12:39:25 - random channel

**Paul**

Berry's book reminds me a bit of Patrick Veitch's book. When Veitch appeared on Luck on Sunday a year or two back he was squirming in his seat as he talked about it. Too much "lifestyle" and showing off, not enough about showing he was actually a hard working analyst who had to make his own way because nobody else was going to help him. I wonder if Caan Berry will ever either a) get to Nick Luck's Sunday morning sofa or b) show anywhere near the same level of self-awareness

---

## 2024-12-20 12:06:20 - random channel

**D C**

I have this problem with Taleb [@U012XF5CNPN](@U012XF5CNPN). The bloke is an absolute c*** and I refuse to read anything he writes or has written. I might miss out on some useful stuff but I absolutely loathe him. Arrogance is the worst human trait there is IMO and he reeks of it. I REALLY struggle to separate the artist from the art - which is definitely a shortcoming of mine.

---

## 2024-12-19 17:23:34 - strategies channel

**Ankit Aggarwal**

Noob question, whats the Y axis of the graph?

---

## 2024-12-19 14:41:33 - general channel

**Paul**

Everyone needs counter-parties. Liquidity is dripping away, so long-term they need more smart money talking at each other with different takes on how to be smart (there's likely more than one or two ways to make money in highly volatile 102%/98% offer/bid spreads). By saying "OK, let's gear everything around BA Pro manual traders" - and that's what I'm trying to understand, if _*that*_ is the main audience they're working backwards from - they're taking quite a punchy move on how to get liquidity back into markets.

---

## 2024-12-19 12:44:19 - random channel

**Michael**

I think the shorthand that probability "quantifies the likelihood of X event" is unhelpful and confusing to a lot of people.

---

## 2024-12-19 09:55:48 - issues channel

**Unknown**

Streaming filter

---

## 2024-12-19 09:54:35 - issues channel

**liam**

you have literally shown everything but the streaming filter

---

## 2024-12-19 09:11:56 - issues channel

**moseley82**

Hey guys hoping this will be a super simple one, I'm trying to add total_matched into my streaming output but I'm just getting 0's for everything... is there something I'm missing?

---

## 2024-12-18 19:51:48 - general channel

**Dave**

Someone mentioned they wanted maker-taker differentiation, it actually wouldn't help. Give makers a discount = markets get tighter = lower margins and increased competition for making, while hoping volume picks up..

---

## 2024-12-18 19:21:39 - general channel

**Jonjonjon**

Is there any documentation on how this is going to affect "My Betfair Rewards"? The page appears to be offline now

---

## 2024-12-18 16:44:51 - random channel

**liam**

I assumed it was just a click bait title but questionable claims 

---

## 2024-12-18 15:23:19 - general channel

**D C**

Lots of links to premium charge documentation now appear to be dead.

---

## 2024-12-16 20:36:29 - strategies channel

**Gooat**

Cheers, I'll start with the clear question next time.

---

## 2024-12-16 20:31:49 - strategies channel

**liam**

Right, you have the order placed date time right? I would have thought just processing the files through bflw and logging the price x seconds after would be the quickest / easiest way of doing this 

---

## 2024-12-16 19:59:17 - strategies channel

**liam**

Still don’t understand the question 

---

## 2024-12-16 09:52:18 - random channel

**Michael**

Just to return to the original question for a moment - I need a response stronger than :100: for [@U4H19D1D2](@U4H19D1D2)'s comment above (with the hand drawn diagram). I couldn't agree more with the summation:

_"any sort of drawdown that is outside of ‘normal’ should immediately make you question the impact you are having on the market"_ Outsized drawdown or increased volatility is always a bad sign and usually indicates over-staking.



Just to add something: Is a 10X increase realistic? That's really asking for trouble, especially for someone who's been playing for a long time.

---

## 2024-12-16 08:25:11 - strategies channel

**Unknown**

EV Middleware



Whilst I have it open a few flumine users might find this useful, it calculates an ev for each order using a future price (seconds) Allows you to visualise ev against signals and/or analysis on signals where data sample is small, for example not just relying on profit.



```import logging

from collections import defaultdict

from flumine.markets.middleware import Middleware



logger = logging.getLogger(__name__)



DEFAULT_SECONDS = 5





class EVMiddleware(Middleware):

    """

    Store all LPT and calculate ev based on `seconds`

    since order `execution_complete`

    """



    def __init__(self, seconds=DEFAULT_SECONDS, notes_name="ev", record=True):

        self.seconds = seconds

        self.notes_name = notes_name

        self.record = record



    def add_market(self, market) -&gt; None:

        market.context["ev"] = defaultdict()



    def __call__(self, market) -&gt; None:

        if self.record and market.blotter:

            ev = market.context["ev"]

            for runner in market.market_book.runners:

                if runner.selection_id not in ev:

                    ev[runner.selection_id] = []

                ev[runner.selection_id].append(

                    (market.market_book.publish_time, runner.last_price_traded)

                )



    def remove_market(self, market) -&gt; None:

        if "ev" in market.context:

            ev = market.context["ev"]

            for order in market.blotter:

                ev_data = ev[order.selection_id]

                price = order.average_price_matched

                pt = order.date_time_execution_complete

                if not price or not pt:

                    continue



                final_price = None

                for _pt, _price in ev_data:

                    pt_delta = (_pt - pt).total_seconds()

                    if pt_delta &gt;= self.seconds:

                        final_price = _price

                        break

                if final_price and order.side == "BACK":

                    order.notes[self.notes_name] = (1 / final_price) - (1 / price)

                elif final_price and order.side == "LAY":

                    order.notes[self.notes_name] = (1 / price) - (1 / final_price)```

---

## 2024-12-14 18:57:51 - random channel

**Jonjonjon**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) the scenario in your chart is what always scares me and makes me scale back. So far things have ironed themselves out but I wonder whether or not I should have just held on. There's always a chance that scaling back helped it to recover.

---

## 2024-12-14 18:17:56 - random channel

**AndyL**

When you say backtester what do you mean, a python plot class?

---

## 2024-12-13 08:43:32 - general channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/tests/test_integration.py](https://github.com/betcode-org/flumine/blob/master/tests/test_integration.py)

---

## 2024-12-12 21:06:54 - issues channel

**liam**

Python 3.13 is not supported, was this not discussed last time?

---

## 2024-12-12 13:47:02 - general channel

**liam**

eexxxaaammmmpplllleeesssss



[https://github.com/betcode-org/flumine/blob/a9cd71befc6062b52ce65ca695b50a56a2e81344/examples/strategies/lowestlayer.py#L65](https://github.com/betcode-org/flumine/blob/a9cd71befc6062b52ce65ca695b50a56a2e81344/examples/strategies/lowestlayer.py#L65)

---

## 2024-12-05 14:19:50 - strategies channel

**Jonjonjon**

Is the Betconnect functionality in Flumine just for arbing?

---

## 2024-12-03 12:42:49 - general channel

**liam**

The latter, flumine doesn't try to estimate market impact on BSP or limit orders

---

## 2024-12-03 10:07:18 - general channel

**Mo**

Does flumine simulate the BSP auction?

---

## 2024-12-02 18:42:41 - issues channel

**NT**

Quick update: strangely, at $0.01, there was no clear pattern on which bets were filled or not (occasionally lower price bets were filled and higher price bets were not). Updating the bet size to $0.03 seems to have eliminated the problem, although it has only been running for 7.5 hours now so the issue could potentially re-emerge over a longer run period.

---

## 2024-12-02 16:51:21 - strategies channel

**Paul**

I'll come back to that in a post later this month, perhaps. It's a good question.

---

## 2024-12-02 10:53:43 - issues channel

**tone**

I think that's the problem. Accidentally upgraded outside the venv

---

## 2024-12-02 10:49:17 - issues channel

**tone**

in the code bflw is 2.19.1!

---

## 2024-12-02 10:44:52 - issues channel

**liam**

print the bflw version in the same code you are asking for the key

---

## 2024-12-02 10:42:57 - issues channel

**tone**

betfairlightweight==2.20.4

---

## 2024-12-02 10:42:39 - issues channel

**liam**

bflw version?

---

## 2024-12-02 09:44:57 - issues channel

**liam**

[https://github.com/betcode-org/betfair/blob/master/HISTORY.rst#2203-2024-09-03|Upgrade](https://github.com/betcode-org/betfair/blob/master/HISTORY.rst#2203-2024-09-03|Upgrade)

---

## 2024-11-30 14:51:26 - strategies channel

**Mo**

[@UPMUFSGCR](@UPMUFSGCR), [@UGV299K6H](@UGV299K6H) - writing up notes is something I don't do nearly enough of. It's so helpful for clarifying thoughts

---

## 2024-11-30 13:41:33 - strategies channel

**liam**

It’s this part that has stuck with me



&gt; Even if you start with something simple and apparently useless like WOM you can just push and push until you either get to the point where it works or you learn enough to move your understanding on.

Which sort of answers Mo question in regards to what I do, keep pushing and then move on but building on what I have learnt works / doesn’t work 

---

## 2024-11-30 13:02:14 - strategies channel

**AndyL**

I do think a lot of my problem in finding new strategies is I am "blinded" by the methodology of my existing strategies

---

## 2024-11-30 10:52:05 - strategies channel

**Mo**

Original question inspired by an outstanding message [@UGV299K6H](@UGV299K6H) once wrote which sadly seems to have been lost to the mists of time

---

## 2024-11-30 10:46:00 - strategies channel

**PeterLe**

Where there is no 100% right answer a gut feel always helps :smile: if you have that niggling feeling “this may just work” it’s worth pursuing 

---

## 2024-11-29 01:14:51 - issues channel

**anomaly**

ok well consider this solved. i have no clue what happened but it's just working now:thinking_face:

---

## 2024-11-28 11:16:05 - general channel

**birchy**

Does flumine have a flag for a change of market version (i.e. withdrawals, etc)? I'm currently saving the selection IDs to the market context and checking if they change but it's not ideal. I guess I could monitor market.market_version instead?

---

## 2024-11-28 01:05:10 - issues channel

**anomaly**

Quick question, i've got my marketbook stream working on bflw



```self.streaming_unique_id = self.stream.subscribe_to_markets(

    market_filter=self.market_filter,

    market_data_filter=self.market_data_filter,

    conflate_ms=self.conflate_ms,

    initial_clk=self.listener.initial_clk,  # supplying these two values allows a reconnect

    clk=self.listener.clk,  # supplying these two values allows a reconnect

)```

where



```self.market_data_filter = filters.streaming_market_data_filter(fields=self.price_projection_filters,

                                                               ladder_levels=3

                                                               )```

and



```self.price_projection_filters = ['EX_BEST_OFFERS',

                                 'EX_MARKET_DEF',

                                 'EX_TRADED_VOL',

                                 ]```

however when i check a specific runner (or market) which i can see on the exchange has got traded volume, i always get a value of 0



mb.total_matched = 0

mb.total_available = None

mb.runners[7].ex.traded_volume = [] # e.g. looking at the exchange now it has a value of 42

mb.runners[7].total_matched = 0



all other exchange price/sizes are there so not quite sure what i'm missing

---

## 2024-11-27 21:50:34 - issues channel

**Tom**

That's just rude. OrdersMiddleware is from Flumine/Examples. There's just not a clear sign of what it is. I am going to look at libraries/dependencies.

---

## 2024-11-27 18:56:55 - general channel

**liam**

as above, my most valuable tests are a simulation on a set market/strategies and then confirm orders/profit etc.



Changes listed [https://github.com/betcode-org/flumine/blob/master/HISTORY.rst|here](https://github.com/betcode-org/flumine/blob/master/HISTORY.rst|here)

---

## 2024-11-27 16:48:55 - strategies channel

**birchy**

Yes, I often discover the answer while writing the question. I believe it's called the 'rubber duck effect' or something similar.

---

## 2024-11-27 16:20:52 - strategies channel

**Peter**

Hi, I have a question about simulated match rates using a flumine backtest.

I'm submitting back orders into a racing market pre-off, at the best available back price, with a stake smaller than currently available. The backtest suggests my matching rate is about  ~10% - why is this? I would expect a significant amount of these orders to be matched in full.

---

## 2024-11-27 09:17:33 - issues channel

**liam**

where are the flumine logs?

---

## 2024-11-27 08:53:40 - issues channel

**Tom**

Right. Sorry, not trying to be tricky or anything. I'll remove them all and let you know if I see the problem again. I've had this problem a long time now.



There's nothing really to share in the way of code, it's not clearly from anywhere in particular.



Today I put a try except block around storing my order in a trade object; and after just didn't recognise the event and started spitting out multiple orders of the same trade (didn't recognise it already had one)



Are you supposed to return the object in OOP, or just run the method and assume the change has been made universally?



It could also be the try, except plus also returning something incorrectly (?) I'm obviously speculating heavily here I have no idea

---

## 2024-11-27 08:50:34 - issues channel

**liam**

:man-shrugging: your hinting at some dodgy stuff but without seeing code to replicate I have no idea and its impossible for anyone to help

---

## 2024-11-27 08:49:38 - issues channel

**Tom**

I'm going to remove all the try except blocks. Do you guys use them? There is definitely a problem with them for me.



Like it's creating copies of things and referring back to the wrong copy later

---

## 2024-11-27 08:39:24 - issues channel

**Tom**

Remember we were discussing the cross-market orders a while back? I just started using the cross market prices anyway. But this is the same problem.

---

## 2024-11-27 08:39:00 - issues channel

**Tom**

Something like this has been going on for a while and I've checked it then. I'll take another look. It's sending BSP orders now which doesn't happen when this problem occurs. It'll literally hold onto a 10+min old book.



What are the chances it's a try except loop retaining some old book and never letting go of it? I've noticed they are horrible with random erros.

---

## 2024-11-27 08:34:27 - issues channel

**liam**

i am 100% sure flumine code is good

---

## 2024-11-27 08:24:56 - issues channel

**Tom**

python(?) (Flumine)

Win markets Australian Horseracing.



I think it's linked to some of my order placing behaviour, because there are some cancel/place loops with another algo I've been trying to sort out

---

## 2024-11-27 05:10:53 - issues channel

**Tom**

Hi Guys. I've got a problem here I can't solve but instead of trying to describe it I'll try be more direct.

1. Does market_book.is_market_data_delayed work? (If Betfair have delayed my data will it show up here?)

2. Is it appropriate to compare market_book.publish_time with current utc time and call anything more than 2 minutes delayed? 

3. Do you have any suggestions on how to manage this?

---

## 2024-11-26 17:50:04 - general channel

**Jhonny**

problem solved tho. I had hard-coded filter for GB markets some weeks back, and forgot to remove it

---

## 2024-11-26 10:36:10 - strategies channel

**Unknown**

[@UBS7QANF3](@UBS7QANF3) I went this way to implement binary format for market data what gave me possibility to analyze data and backtest different strategies quicker than always go through processing raw json streaming data.

---

## 2024-11-25 10:01:29 - strategies channel

**Paul**

Some immediate and random thoughts:



1. The problem with optimisation is that you end up going down the route of specialisation, in essence over-fitting a solution to what you need right now. It feels though, like once you step back a bit you're just saying "we should make backtests faster, and the ability to snapshot state and key metrics like total volume matched, much faster". Is that right?

2. There's a lot of thought that has gone into time series data storage from other industries, much of it open source, that might yield great results with minimal work. The downside of those stacks is that they introduce another dependency that might be horrid to deal with practically. Most of the uplift from that work is likely getting you away from dealing with files on disk, and building in-RAM data structures that yield well to the algorithms the creators were interested in. Stealing that idea while keeping your on-disk formats is worth considering (fewer dependencies, easier to iterate, more adaptable down the line as you're not re-writing files, just in-RAM data structures).

3. If you want Flumine backtest integration (your number 6), my instinct is improving the Rust wrapper and then extending it to serialise in-RAM into different optimal structures is probably easier in the _long_ run, although there is a lot of upfront work with little immediate upside before you're ready to do the interesting bit, so I don't blame anyone for ducking it. 

As Kent Beck once wrote:



&gt; For each desired change, make the change easy (warning: this may be hard), then make the easy change

---

## 2024-11-25 06:46:58 - general channel

**thambie1**

I expect the fee is intentional friction. They've probably had a problem of freeloading API users popping up with new accounts every time one gets shutdown. This would also explain why they're willing to let known users 'vouch' for someone new and forgo the fee

---

## 2024-11-24 23:37:22 - strategies channel

**Alex A**

My bot is in C++, and running on my laptop using 16 threads I can process six weeks of horse racing in 90 seconds and spit out the answers to your first five questions, so doing it for a year of data would only take about fifteen minutes.

---

## 2024-11-24 23:32:58 - strategies channel

**Alex A**

If you’re familiar with a systems language like Rust or C++, you can solve your requirements 1 through 5 by just having a pretty minimal program in a systems language that processes the streams files into an orderbook, and doesn’t have to integrate with flumine or anything.

---

## 2024-11-24 17:39:41 - general channel

**Elie Couttet**

I have tried putting everything in plain text with no avail.

Apparently there is an email address from betfair for support with API. Any chance they'd be able to help?

---

## 2024-11-24 14:31:55 - strategies channel

**Mo**

[@U03FS7KM2NL](@U03FS7KM2NL) sure, easy enough to do these when you know you want them. The problem is when you come up with a new requirement and need to process the market again

---

## 2024-11-24 11:12:59 - strategies channel

**Mo**

Thanks for the replies guys, has definitely given me something to think about. While I can see the advantages to converting to a tabular format, what I really have in mind is something capable of producing the standard MarketBook dicts/objects that betfairlightweight, betfairutil, betfairviz, and flumine work with so it can slot into existing workflows with minimal effort

---

## 2024-11-23 17:29:30 - strategies channel

**D C**

Yeah me too but that's just based on prior jobs. I did make some good old fashined pen and paper notes on some ideas I had about it. Might see if I can dig them up. Not that I'd ever be using it for a task like this but Is it easy in python to do things like bit twiddling?

---

## 2024-11-23 14:32:10 - general channel

**D C**

If you want to get into this stuff, I would use flumine or betfairlightweight as there are a lot of people who will be able to help. Not many use nodejs (as far as I know)

---

## 2024-11-23 14:31:35 - general channel

**D C**

No, the norm here is definitely Python

---

## 2024-11-23 14:30:12 - general channel

**D C**

Ah ok - then I won't be able to help. I use nodejs for some stuff and I will dump my http options below just on the offchance it might help you

---

## 2024-11-22 15:30:46 - random channel

**D C**

On the Betfair mobile app, is anyone else unable to view their current bets (android app) ? I can see settled orders and multiples but current placed bets tab just hangs indefinitely. Had this problem for about a week now - anyone else?

---

## 2024-11-21 09:07:20 - general channel

**D C**

It's definitely worth the effort to convert to streaming [@U05ULP711T7](@U05ULP711T7). Wish I had done so a long time before I eventually did (especially converting to using order stream as opposed to polling listCurrentOrders).

---

## 2024-11-21 08:15:40 - general channel

**liam**

Yeah flumine isn't really designed for this although you could be clever and change things via a config/api however if you have the logic / correct abstractions already I imagine converting to streaming isn't that tricky

---

## 2024-11-20 22:23:38 - general channel

**Unknown**

[@U4H19D1D2](@U4H19D1D2)  I'm in the process of converting my program to use streaming as opposed to REST API calls.  I thought about going with Flumine as well ( I use your betfairlightweight) but will drop that idea for now because I have a number of systems I select to edit, stop, start and remove within the GUI, I'm unsure how to work around this requirement with Flumine which seems to require strategies added before running the framework.

---

## 2024-11-20 09:20:04 - general channel

**liam**

I have no idea what problem you are trying to solve here

---

## 2024-11-20 08:26:46 - general channel

**D C**

I'm not the person whose opinion matters but I find it hard to consider that NOT using conflation would be considered excessive data usage. If you've got concerns, email BDP about it. I can only think it might be a problem if you are not placing any bets (but that would be a problem for most API usage anyway).

---

## 2024-11-20 07:51:00 - general channel

**Nita Suos**

Just wondering what others do regarding conflate_time with streaming.  I am tossing up between stopping and restarting a stream, or have a few steams with different conflate times and dynamically update the markets within them.

---

## 2024-11-19 20:17:25 - random channel

**liam**

Yeah it uses a mutex / thread lock, I imagine the code would look very similar in c if not cleaner 



[https://github.com/python/cpython/blob/1c0a104eca189a932e0b44ca9bef46cce3d0b801/Lib/queue.py#L40|https://github.com/python/cpython/blob/1c0a104eca189a932e0b44ca9bef46cce3d0b801/Lib/queue.py#L40](https://github.com/python/cpython/blob/1c0a104eca189a932e0b44ca9bef46cce3d0b801/Lib/queue.py#L40|https://github.com/python/cpython/blob/1c0a104eca189a932e0b44ca9bef46cce3d0b801/Lib/queue.py#L40)

---

## 2024-11-19 20:10:19 - random channel

**liam**

flumine is using bflw for the socket handling so you can read that code as it’s relatively simple python, this runs in a single thread and the data is pushed straight into the flumine main queue. flumine then picks this up and writes to disk. 



As you describe I/O has the potential to block, especially in python so the data is pushed straight into a FIFO queue as soon as possible. 

---

## 2024-11-19 20:04:28 - random channel

**D C**

A generic question about flumine (probably for [@U4H19D1D2](@U4H19D1D2)) - in terms of if you ran it just to record market data, what is the design behind the data flow? Is it blocking socket inside a thread? If so, are file writes threaded out or batched in some way? Just asking as I'm thinking of porting my nodejs stuff (all asynchronous JS event handlers) to C++ and use threading. Really wondering what is best from a design POV. My first instinct is blocking socket and thread safe queue of strings that are periodically written to file to avoid the socket listener code getting blocked with file I/O.

---

## 2024-11-19 15:47:01 - betfair-news channel

**Michael**

Massive props to Befair for finally getting onto this. Thanks [@U02GSMUSG56](@U02GSMUSG56), [@UNW8Q88EL](@UNW8Q88EL) and others.



I just bloody love it when something new happens. I loved it when streaming happened, I had a ball when TPD arrived and whatever the outcome of this the early stages will be a blast. Finally something fun. Hallelujah!

---

## 2024-11-19 14:53:16 - betfair-news channel

**D C**

[@U02GSMUSG56](@U02GSMUSG56) does this mean that currently when you place a bet (inplay) your bet is "paired" with other bet(s) at the point of first being received and is then held back until the delay is over and would then appear as matched at placement (assuming the other bet is not cancelled). Sorry if this is a dumb take, but your first sentence kind of suggests this. On the assumption that the above is true, how then does BPE get implemented? If a better price becomes available, does my bets "pair" get replaced with the better offer while the delay is still in action?

I'd always assumed that your bet was received, and queued at time of receipt and that once the delay was over the matching took place based on the market state. Is there anywhere we can get more details on how the matching engine operates currently with the inplay delay?



Sorry for all the questions but I've confused myself trying to run this through my head.

---

## 2024-11-19 10:38:36 - betfair-news channel

**liam**

I imagine its a big change to the matching engine, no idea how I am going to get flumine to simulate it accurately :sweat_smile:

---

## 2024-11-18 13:10:13 - general channel

**liam**

Hmm, if things are down it will 95% time tell you which services are down. I tried to automate a watcher on the page but you also get a lot of FP’s which is very frustrating so tbh it’s not that helpful other than confirming what you already know 

---

## 2024-11-18 11:39:35 - general channel

**Mo**

This is a hot take but maybe you should try reading the API documentation?

---

## 2024-11-18 08:51:19 - general channel

**D C**

No problem here

---

## 2024-11-18 08:32:38 - general channel

**JC**

Hi, I've just updated my S3MarketRecorder and am having INVALID_SESSION_INFORMATION issues with also saving market catalogue via poll_market_catalogue and the tennis scores endpoint. The streaming files are still being recorded successfully though. What's the recommended way to record the catalogues and scores without getting logged out using flumine? Cheers

---

## 2024-11-18 07:36:44 - general channel

**Mo**

They are `None` because you haven't requested them:



```market_data_filter = streaming_market_data_filter(

    fields=["EX_BEST_OFFERS", "EX_MARKET_DEF"],

    ladder_levels=10

)```

---

## 2024-11-17 20:19:33 - random channel

**James**

Nah, the plugins might help but it’s not needed. I just use the CLI.  Feel free to fire through any questions if you get stuck. 

---

## 2024-11-17 15:48:07 - random channel

**Jonjonjon**

Would Flumine use P cores or E cores or both, on an Intel chip?

---

## 2024-11-17 15:14:03 - random channel

**Lee**

It sounds like you are looking for some rough numbers so can give you my comparisons just to get an idea.

I have a very old 4 core 8 thread i7 and a fairly old 12 core 24 thread ryzen. The ryzen is around 5-6x faster for me running the same flumine backtest.

---

## 2024-11-17 14:41:20 - random channel

**thambie1**

P.S. I'm not using flumine. So my experience is based on my own code base. But I will say, very happy I made the switch.

---

## 2024-11-17 10:47:25 - general channel

**Nita Suos**

Thanks Mo.  With adding strategies to Flumine (imagine having a number of different ones being selectable within a gui), would the framework be run, and add strategies/remove strategies from the framework?

---

## 2024-11-15 23:23:21 - random channel

**Jonjonjon**

If I wanted to start using docker with Flumine, is there a base image I should start from?

---

## 2024-11-15 15:33:59 - strategies channel

**Ralegh**

Working streamlit dashboard so I don’t have to paste lines into a python repl every time I check todays stats :)

---

## 2024-11-15 14:05:47 - general channel

**Michael**

Well we were having tonnes of problems recently and now we're not. Or I'm not anyway.

---

## 2024-11-15 12:06:51 - strategies channel

**Jonjonjon**

Did you use Chatgpt to help?

---

## 2024-11-13 21:51:58 - random channel

**Jonjonjon**

It could help to add liquidity. Some of the P&amp;L screenshots people post on the WSB reddit are crazy. Would be nice if some of them could throw some of their spare cash into the racing markets.

---

## 2024-11-13 15:20:19 - general channel

**D C**

Strangely enough if all you want is sectional timings, I've just received an email in my inbox from proform (I'm a previous subscriber) about some deal with TPD (and others) to get the sectional timings as part of the profotm database. Seems like they are looking for an initial group of subs who are willing to pay for a year upfront (about £600). I realise this is totally different to a full GPS history, but thought I'd mention it anyway.

---

## 2024-11-12 11:18:20 - betfair-news channel

**liam**

I imagine it was on the betfair dev forum but I have no idea how to login into that anymore

---

## 2024-11-10 02:20:00 - strategies channel

**thambie1**

sounds like a question for a backtest

---

## 2024-11-09 21:23:39 - strategies channel

**Jonjonjon**

Does Flumine simulate that behaviour when backtesting?

---

## 2024-11-09 16:59:47 - issues channel

**D C**

Yeah I'm cutting stakes right back until this is resolved as it's close to unusable. On the plus side this will force me to concentrate on other areas.

---

## 2024-11-08 21:34:40 - issues channel

**Brøndby IF**

[@U4H19D1D2](@U4H19D1D2) Thank you very much for your help, I already set it to False and it perfectly removed a event that managed to get through the kick-off hour filter. Battle completed successfully!

---

## 2024-11-08 20:55:52 - issues channel

**liam**

What endpoint or you referring to streaming?

---

## 2024-11-08 20:53:26 - issues channel

**Unknown**

Good afternoon, everyone. One question:



In `betfairlightweight` we have the `filters.market_filter` options for `inplay_only` where we define whether we want only inplay events or all of them.



I noticed that in the API-NG Visualizer you can choose the `NO` option to only get events that are not yet inplay.



Is it also possible to do this in betfairlightweight?



I've already tried using `market_start_time` but in Tennis several games daily escape this option because the matches change their kick-off hour a lot.

---

## 2024-11-07 16:10:02 - strategies channel

**Ankit Aggarwal**

Ok that's great could you help with what the variation is called?

---

## 2024-11-07 14:25:36 - issues channel

**tone**

Oh dear. The rollback obviously didn't help!

---

## 2024-11-06 16:25:33 - random channel

**Gooat**

I should probably come to the next drinks to ask these questions

---

## 2024-11-06 13:42:38 - random channel

**Gooat**

Yeah that's my problem with him or just generally, I'd like to know I was wrong rather than just variance

---

## 2024-11-06 13:36:46 - random channel

**Paul**

As to wider ramifications, if I did fiscals I’d now start to think about:



• Short US interest rates and the dollar - they’re gonna need to drop interest rates in the next few years to counter the tariff hit, and I think Euro will take a stronger roll as a reserve currency in next couple of years as the 2025 project picks up steam

• Go long oil - ME war will now escalate under US diplomatic cover of “not our problem, you lot figure it out”, which likely leads to Israel, Iran and Saudi all side eyeing each other with nukes by 2030

• Short anything touching Eastern Europe - or “Russia” as it’ll be known in 5 years

• Go long anything that helps EU biz/public sector get away from US tech - they’ve been paranoid for years, it’ll now accelerate, fast.

I’ve seen a lot of bad take reactions to a lot of elections, and mine might be one in itself, but I don’t see a realistic scenario as to how this doesn’t end up in a US economy fucked by import tariffs, genocide in Gaza &amp; West Bank spilling into Lebanon (and dragging Iran and Saudi in), and Russia pushing a mountain of North Korean bullet fodder towards Kyiv and Warsaw… 

---

## 2024-11-04 14:26:32 - general channel

**Daniel**

Not sure how pedantic you are with docstrings and associated optional types, as I haven't touched those



[https://github.com/betcode-org/betfair/pull/589](https://github.com/betcode-org/betfair/pull/589)

---

## 2024-11-04 10:56:03 - issues channel

**liam**

We have been complaining since the 28th when it started to get really bad, [@UUE6E1LA1](@UUE6E1LA1) has been complaining for a few years, maybe they will admit they have a problem 

---

## 2024-11-03 18:00:44 - random channel

**D C**

Anyone having serious stream problems?

---

## 2024-11-02 12:44:25 - general channel

**liam**

Yeah same here, I don’t think the other providers go through betfair, I want to get on a call with these devs as I just don’t believe they have a handle on the problem 

---

## 2024-11-02 10:49:08 - general channel

**Daniel**

Hi all, tyvm for the work that's been done on the Python API layer



I was using it and I was going to make some modifications for myself, just wanting to guage whether these might be wanted upstream?

---

## 2024-11-01 19:56:44 - issues channel

**Gooat**

Python version?

---

## 2024-11-01 13:15:00 - general channel

**liam**

subscribe to them all and forget about it



[https://betcode-org.github.io/betfair/streaming/](https://betcode-org.github.io/betfair/streaming/)

---

## 2024-10-31 16:47:16 - issues channel

**WilliamR**

thank you that's resolved!

---

## 2024-10-31 16:27:05 - issues channel

**liam**

damn that is wrong, use the real examples



[https://github.com/betcode-org/flumine/tree/master/examples](https://github.com/betcode-org/flumine/tree/master/examples)

---

## 2024-10-31 16:26:28 - issues channel

**WilliamR**

[https://betcode-org.github.io/flumine/](https://betcode-org.github.io/flumine/)

---

## 2024-10-31 16:21:10 - issues channel

**WilliamR**

I'm getting this exact issue with flumine Version: 2.6.6 sample code and betfairlightweight Version: 2.20.4 any tips on how I can resolve would be gratefully received!

---

## 2024-10-30 20:59:12 - general channel

**AndyL**

[@U07G3MG1X6U](@U07G3MG1X6U) put it on your xmas list :-)

It’s fun but hard this game but Flumine takes a huge amount of the hastle out, so just get going and enjoy it but don’t expect to make too much



---

## 2024-10-30 09:37:34 - strategies channel

**liam**

no the flumine logs will tell you everything

---

## 2024-10-30 09:30:13 - strategies channel

**liam**

the logs would have given you a warning describing exactly the problem btw, did they not?

---

## 2024-10-30 09:25:21 - strategies channel

**liam**

`max_trade_count=1,` that is your problem

---

## 2024-10-29 16:03:35 - issues channel

**Mo**

I think it would be helpful if you gave details on what these markets are

---

## 2024-10-29 11:24:22 - random channel

**Mo**

You ask the weirdest questions 

---

## 2024-10-28 14:35:47 - general channel

**D C**

I did mean BSP specifically. I suppose the same might apply to bookies closing lines but you've got the margin removal to consider then but this was not really the focus of my question. Specifically what motivated the question is the money traded - football matches for a lot more money than horses, which in turn match for a lot more than dog races. But are BSP considered the benchmark regardless of volumes traded?

---

## 2024-10-28 14:30:46 - general channel

**D C**

When talking about BSP as being a good benchmark to use when calculating your expective EV, do people who accept this as reality consider it to be the case across all markets or just horse win markets? Same question again - for all countries or just UK and IRE ?

---

## 2024-10-24 20:06:47 - general channel

**AndyL**

[@U01MPC0GUK1](@U01MPC0GUK1) thanks, you're spot on this works:

```market_filter=betfairlightweight.filters.streaming_market_filter(

        event_type_ids=["1"],

        country_codes=["GB", None],

        market_types=["MATCH_ODDS"],

    )```

---

## 2024-10-23 19:47:01 - random channel

**liam**

Yeah that just leaves lots of questions 

---

## 2024-10-22 17:38:40 - random channel

**D C**

But once market is closed listMarketBook is not useable? Sorry if I'm being thick - I've become over-reliant on the stream and forgetting how to do it the old fashioned way.

---

## 2024-10-22 17:08:13 - general channel

**Ralegh**

I have the same problem, on the plus side taking a bet at BSP is cheap in EV terms so is just manifesting as higher variance 

---

## 2024-10-22 15:52:08 - random channel

**D C**

If you place a large back bet on an inplay market with a largeish inplay delay (question motivated by cricket markets specifically), market moves against you (BPE is active) and you get fully matched at a higher price than asked for . Is there any way to get hold of the individual price portions that you get matched at? Stream only returns an average price matched and the size. I've not used listCurrentOrders for a long time but does that have some option that would allow you see the breakdown in matched portions at each price band?

---

## 2024-10-20 20:23:39 - random channel

**liam**

Tbh I don’t personally don’t have an opinion because I have no idea how to accurately price a market like this however the fact the price hasn’t been ‘corrected’ certainly says something 

---

## 2024-10-20 15:13:13 - general channel

**Michael**

Welcome to the Slack. Yes the fee can usually be waived, [@U4H19D1D2](@U4H19D1D2) will probably help you out whenever he logs back in.

---

## 2024-10-19 15:10:10 - general channel

**John**

Thanks for your help. Is there a link to a full guide on using BetfairLightweight? I've seen a basic version.

---

## 2024-10-19 14:41:36 - general channel

**Mo**

Eh? This is `betfairlightweight` not `requests`

---

## 2024-10-18 19:13:23 - general channel

**Jonas JN**

Thanks, I took a look but I don't think it helps much.



We are trying to create an environment to simulate entries in past games, as if it were a player that you can fast forward and rewind the time of the match, so we would need to add more information in addition to the odds, the most essential thing would be the score at that moment in which the user is .

---

## 2024-10-18 15:21:39 - general channel

**Lee**

This might help you for the mappings [https://github.com/mberk/betfairmappings|https://github.com/mberk/betfairmappings](https://github.com/mberk/betfairmappings|https://github.com/mberk/betfairmappings)

---

## 2024-10-17 11:44:15 - issues channel

**NT**

I simply just hadn't figured out how to yet. I'll have a look at this reference as it looks very detailed, and hopefully should be able to explain it. Getting streaming to work would be a huge help. Thanks for sharing this reference.

---

## 2024-10-17 11:33:30 - issues channel

**liam**

Ok, might be time to step back, why are you not [https://betcode-org.github.io/betfair/streaming/|streaming](https://betcode-org.github.io/betfair/streaming/|streaming)?

---

## 2024-10-17 11:00:31 - issues channel

**liam**

Have you found [https://github.com/betcode-org/flumine|flumine](https://github.com/betcode-org/flumine|flumine) yet NT?

---

## 2024-10-17 09:32:02 - issues channel

**D C**

I mean it's not compulsory as flumine/bflw does the hard work for you. Never hurts to understand what's going on at the betfair interface though.

---

## 2024-10-17 09:27:25 - issues channel

**D C**

No worries. If you become familiar with the actual API operations that the flumine/bflw calls are a wrapper for, you can directly look up info for that within the BF docs or elsewhere.

---

## 2024-10-17 09:24:34 - issues channel

**NT**

Perfect, thank you. I think my issue was calling it much more frequently than that. I really appreciate the help (and the incredibly fast reply!)

---

## 2024-10-15 09:52:58 - random channel

**river_shah**

Peter Cotton hosts informal "office" hours every week. You can just drop onto a video call and talk about quant problems. There is typically no set agenda.

---

## 2024-10-15 00:33:27 - random channel

**Paul**

Given that online slots players are six times more likely to be problem gamblers than sports bettors though, I suspect government want to be quite targeted about impact.

---

## 2024-10-14 14:07:00 - random channel

**ShaunW**

Sharing is a way to make you examine what you're thinking (nobody wants to recommend something stupid) and only a fraction of people who look at an idea will make anything, the rest add to the pool. And if you help someone to be a winner, they'll be more likely to recommend the game to other people and most of those will be losers.   Aaaand the more you give, the more you get in return.

---

## 2024-10-14 12:26:26 - random channel

**Paul**

Let me just drag this back to the original book that [@UBS7QANF3](@UBS7QANF3) referenced.

&gt; In an engaging, colloquial style, Cotton argues that market-inspired “superminds” are likely to be very effective compared with other orchestration mechanisms in the domain of microprediction. He presents an ambitious yet practical alternative to the expensive “artisan” data science that currently drains money from firms. Challenging the machine learning revolution and exposing a contradiction at its heart, he offers engineers a new liberty: no longer reliant on quantitative experts, they are free to create intelligent applications using general-purpose application programming interfaces (APIs) and libraries. He describes work underway to encourage this approach, one that he says might someday prove to be as valuable to businesses—and society at large—as the internet.

That is one _hell_ of a claim It also sounds quite philosophical, but I note the [https://github.com/microprediction/home|GH repo](https://github.com/microprediction/home|GH repo) has pointers to code implementations. How practical is it [@UBS7QANF3](@UBS7QANF3)? How hand wavey?

---

## 2024-10-14 11:57:18 - random channel

**Paul**

HK is special, that’s true. And there is value in proprietary data, but I suspect lots of value in just creating 2nd or 3rd order derivatives of the data that is publicly available, you don’t need horsemen watching tape for hours on end. Most people do not - and actually do not know how to - use basic form book data properly. Some people make money regardless. To expand on this point might tread into an idea I have for sharing some ideas December I’ve been thinking about. I’ll leave it there for now… :) 

---

## 2024-10-14 10:27:54 - random channel

**Jonjonjon**

As I mentioned, some comments you ([@U012XF5CNPN](@U012XF5CNPN)) made a couple of years helped me. [@U010GM77S4W](@U010GM77S4W) has also made some good comments that have push cash in my bank. And of course none of us would be here without Liam's framework.

---

## 2024-10-14 10:27:37 - random channel

**Paul**

It isn't. It's sincere. Example: I trade a little pre-off horses. I know horses well as somebody who watches _a lot_ of racing. If somebody said to me "what ideas do you have for inplay?" I could happily list (and have listed in pubs, ask [@UBS7QANF3](@UBS7QANF3)!), ideas about how I'd break that problem down. I don't see the problem: I'm never going to implement it, they're just ideas.

---

## 2024-10-14 10:25:48 - random channel

**Paul**

I get that the FAQ on the betcode site says "please don't ask people to give away their trade secrets", but there is _so much material some of us will never, ever implement_ I don't see a problem with throwing it on here gratis.

---

## 2024-10-11 13:00:08 - general channel

**Jorge**

Hi guys! I'm using the in_play_service to determine when the half-time starts and ends for Soccer games. The event_status can be "KickOff", "FirstHalfEnd", "SecondHalfKickOff". For most of the cases it seems to be working well. But in many cases it stays in `Event minute=45. Event status=KickOff`  for too long even when the half-time started, and then jumps directly to "SecondHalfKickOff". Anyone is succesfully using the in_play_service for something similar? Or what are other alternatives?



```bflw_client = betfairlightweight.APIClient('a', 'a', app_key='a')

while True:

    timeline = bflw_client.in_play_service.get_event_timeline(event_id=bot.market.event_id)

    minute = timeline.elapsed_regular_time

    status = timeline.in_play_match_status

    log_info(f'Event minute={minute}. Event status={status}')```

---

## 2024-10-11 06:34:28 - general channel

**Tom**

[@UBS7QANF3](@UBS7QANF3) I've had this question for a while and tried to understand the math a bit better to do it myself but am failing miserably - do you know what it would take to get a shins type method to increase overround proportionately (rather than normalise to 1, set it from 1.05 to say 1.10)

---

## 2024-10-10 14:10:56 - random channel

**ShaunW**

The issue isn't the source of funds it's the likelihood it will be a sustainable.  Hence a cash purchase is no problem with your Betfair proof letter, but asking for credit might not be.

---

## 2024-10-10 09:28:29 - random channel

**Prime**

mortgage out of the question of course. in the end, after endless paperwork and the solicitor definitely having a suspicion I was a heroin dealer, I got the fancy london lawyers we use for regulatory&tax to write them a "comfort letter". basically imagine giving your PE teacher a (real) letter from Ronaldo to let you off your lessons cos you needed to save your legs for him at the weekend. PE teacher rolls over and just signs off.

---

## 2024-10-09 21:19:28 - random channel

**Clive**

KDB is great for huge volume streaming data - think multiple equity exchanges. Mainly used by financial institutions. It’s fantastic for massive aggregations over that data, but it has a very steep learning curve, and probably licensing costs. For betfair data I doubt you need it. 

---

## 2024-10-08 10:43:14 - random channel

**JL**

I wrote my own scraper for gbgb, wasn't very difficult and is ~60 lines of python code

---

## 2024-10-07 21:23:09 - general channel

**Brøndby IF**

Oh perfect [@U4H19D1D2](@U4H19D1D2), thank you very much for the information, it's more or less how we found the information regarding the stream of each event that we talked about a few months ago with the intention of adding such information to betfairlightweight!

---

## 2024-10-07 21:19:28 - general channel

**Brøndby IF**

Hi [@U4H19D1D2](@U4H19D1D2) I didn't know about the existence of the graph api, I tried to recreate the charts using the runner's `totalMatched`. I'm searching here in the documentation about the graph api, but I'm not finding it. Could you help me? (I'm sorry if I might be confusing things)

---

## 2024-10-07 21:08:18 - general channel

**Brøndby IF**

[@UUE6E1LA1](@UUE6E1LA1) Yes, there are several packages to help create graphs, but when collecting the values ​​and trying to reproduce the value loads in them, my graphs look very different. It's just a lack of knowledge to be able to combine the API values ​​and generate the graphs. I intend to try again in the future, *including sending the finished code here so that in the future whoever needs it already has it*, but at the moment I'm stuck due to a lack of knowledge.

---

## 2024-10-07 21:04:55 - general channel

**D C**

I don't use Python myself much but is there really no charting package available? What about ggplot or matplotlib? Is it important to emulate the charts precisely in the way Betfair do?

---

## 2024-10-07 20:45:53 - general channel

**Brøndby IF**

I didn't even put this page online, it only works together with my Python locally, keeping the graphs according to a CSV file that I have registered the investments that are currently placed on the market.

---

## 2024-10-07 18:23:23 - random channel

**Jonjonjon**

For people who bought property using Betfair income, was it a problem showing source of funds as Betfair?



I'm asking as a friend bought a property from employment income and had to show bank statements detailing the income to the solicitors. I'm wondering what they would say if I just had a load of "refunds" from Betfair.

---

## 2024-10-07 10:54:22 - random channel

**D C**

He has been around for years to be fair. Give it some time and they will be selling courses on how to manually trade using the GPS. Grifters have to keep up with the times after all.

---

## 2024-10-05 10:43:46 - strategies channel

**Jonjonjon**

[@U012XF5CNPN](@U012XF5CNPN) are you saying that 90% of Devs don't have test coverage? I used to work on a Python platform at an investment bank, and there were automated tools for tracking testi coverage of commits.



Having said that, I haven't seen it since. I use Pycharm CE and there wasn't test coverage in that the last time I checked.

---

## 2024-10-04 19:24:26 - general channel

**Lee**

[@UNW8Q88EL](@UNW8Q88EL) I have a connection ID if that helps investigate

---

## 2024-10-04 08:57:54 - issues channel

**A**

This was my thought too.



You’ll probably want the certs path to be relative using `os` and ensure that the directory is somewhere relative in your flumine project and added in the container.

---

## 2024-10-03 20:07:19 - issues channel

**Derek C**

Hi Matthew, I don't know the answer to your problem, but if you shared the code you use to login and the dockerfile I think you'd have more chance of getting a response.

---

## 2024-10-03 17:19:29 - random channel

**Paul**

Autogluon is superb for a bunch of other tasks though, its first thing I reach for when facing a classic ML problem, as it knows a lot more about what makes sense than I do.

---

## 2024-10-03 15:17:26 - general channel

**liam**

yeah so you need to update to `def start(self, flumine)`

---

## 2024-10-03 13:37:50 - general channel

**liam**

Umm all I can do is repeat what I have said



&gt; Its the same, [https://github.com/betcode-org/flumine/blob/cd5b228a412dc6e55d55051ca2be98ce5a0152b5/flumine/markets/middleware.py#L86|flumine code](https://github.com/betcode-org/flumine/blob/cd5b228a412dc6e55d55051ca2be98ce5a0152b5/flumine/markets/middleware.py#L86|flumine code)

---

## 2024-10-03 13:22:50 - general channel

**liam**

Its the same, [https://github.com/betcode-org/flumine/blob/cd5b228a412dc6e55d55051ca2be98ce5a0152b5/flumine/markets/middleware.py#L86|flumine code](https://github.com/betcode-org/flumine/blob/cd5b228a412dc6e55d55051ca2be98ce5a0152b5/flumine/markets/middleware.py#L86|flumine code)

---

## 2024-10-02 12:52:47 - random channel

**Joe**

DTW is useful for this if I understand your question

---

## 2024-09-26 16:42:50 - random channel

**PeterLe**

by the way, you only get to ask 50 message per WEEK on the preview for time being, so I found it better to ask like so...

• write the code to achieve XYZ, test it, then make suggestions on how to ...etc (ie as one question rather than 3 questions)

Makes you wonder how much better this will be in six months time

---

## 2024-09-25 20:55:32 - random channel

**Rob**

I imagine this is something stupid I'm doing, but the `event_id` values in the historic data I just scraped have 9-digits and those obtained from `market_book.market_definition.event_id` in flumine have 8-digits, so if anyone could point out the obvious flaw....

---

## 2024-09-24 11:17:47 - general channel

**Qais Qadri**

Hello team. got a question.

Working on betfair data for horse racing, we see in runners metadata, COLOURS_FILENAME field which is the race icon for each runner. I was wondering what is the right way of using this image, serve from betfair directly (eg `[http://content.betfair.com/feeds_images/Horses/SilkColours/c20240923-Canberra|content.betfair.com/feeds_images/Horses/SilkColours/c20240923-Canberra](http://content.betfair.com/feeds_images/Horses/SilkColours/c20240923-Canberra|content.betfair.com/feeds_images/Horses/SilkColours/c20240923-Canberra) (AUS)-H/1686208.png`) or fetch the image and serve ourselves? pls suggest here.

---

## 2024-09-21 18:17:39 - general channel

**TT**

Yeah I did think about that - from what I can tell I think it will get ignored by bflw/flumine backtests so would need to patch it to make use of it.



But even outside of those tools it might just be worth logging to keep an eye on it over time.

---

## 2024-09-21 16:12:45 - general channel

**tone**

If you take this approach, then it may be necessary to remove the new timestamp before using bflw to parse the files

---

## 2024-09-21 15:26:56 - random channel

**Mo**

I think the term microservices is overused but one advantage of separating out different parts of the system to individual components unlike flumine’s monolithic architecture is that restarting specific components to pick up new config can be a lot less painful than restarting the entire system 



I have considered config file watching in the past; you could alternatively implement an API that lets you modify your internal state (as well as read it - facilitates monitoring and other GUI applications)

---

## 2024-09-21 11:04:27 - issues channel

**Phydeaux**

£1k apparently… and that was the problem [@UUE6E1LA1](@UUE6E1LA1)! Thank you!



Don’t recall that setting existing, let alone setting it to such a figure! :woman-shrugging:  

---

## 2024-09-19 19:37:04 - random channel

**Joe**

Anyway the principle was always to void out false futures to avoid all these problems with expo, so if it is really happening we need to tell BF.

---

## 2024-09-18 20:43:54 - strategies channel

**liam**

Ignoring the fact it’s a google sheet this has *lots* of ideas / papers / tutorials in it that would certainly help get started in new sports 



[https://docs.google.com/spreadsheets/u/0/d/1LPe8xYduoep9qCrNzBGdJHaHZ8dnmdHNnu7UXZKzawU/htmlview#|https://docs.google.com/spreadsheets/u/0/d/1LPe8xYduoep9qCrNzBGdJHaHZ8dnmdHNnu7UXZKzawU/htmlview#](https://docs.google.com/spreadsheets/u/0/d/1LPe8xYduoep9qCrNzBGdJHaHZ8dnmdHNnu7UXZKzawU/htmlview#|https://docs.google.com/spreadsheets/u/0/d/1LPe8xYduoep9qCrNzBGdJHaHZ8dnmdHNnu7UXZKzawU/htmlview#)

---

## 2024-09-18 15:27:46 - issues channel

**liam**

[https://github.com/betcode-org/betfair/blob/master/examples/exampleone.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleone.py)

---

## 2024-09-17 18:36:26 - random channel

**D C**

Anyone having problems with GPS at Newcastle tonight? 2 races in and I've not placed a bet yet.

---

## 2024-09-17 14:40:57 - general channel

**D C**

Hence the question. Say I bet on 10% rate region markets - does that full extra 8% commission on top of my base go towards my PC offsetting or does it get swallowed up somewhere else and I only get offset by the 2%.

---

## 2024-09-17 08:23:38 - general channel

**Shahid Tariq**

Actually, I have the whole thing wrapped in a while True loop. If any case my streaming gets stopped while loop will iterate again and create a new connection.

---

## 2024-09-17 07:27:51 - issues channel

**Thomas Conti**

Awesome. Thank you for clearing that up.

Thanks for your help again :+1:

---

## 2024-09-17 07:04:27 - issues channel

**Thomas Conti**

Thank you for your help. I will try this.

---

## 2024-09-17 07:03:21 - issues channel

**Mo**

Alternatively, use 2 separate filters. For example:



```market_filter=[

    streaming_market_filter(

        event_type_ids=["4339"],  # Greyhounds

        country_codes=["AU", "NZ"],  # Australia and New Zealand

        market_types=["WIN"],  # Win markets

    ),

    streaming_market_filter(

        event_type_ids=["7"],  # Horse Racing

        country_codes=["AU", "NZ"],  # Australia and New Zealand

        market_types=["WIN"],  # Win markets

    ),

]```

---

## 2024-09-17 07:01:25 - issues channel

**Mo**

Ask Betfair to increase your streaming limit to 1000 markets

---

## 2024-09-17 06:21:05 - general channel

**Shahid Tariq**

Hi Team,

We have integrated Betfair market streaming and noticed that, at times, the streaming stops sending updates even though the connection remains active. Has anyone else encountered a similar issue?

---

## 2024-09-17 05:58:22 - issues channel

**Mo**

That's not how streaming works. Use an appropriate filter, not specific market IDs

---

## 2024-09-16 15:56:05 - issues channel

**liam**

One message is probably enough



Yeah looks like a listMarketBook issue which shouldn't be a problem for most :wink:



[https://status.developer.betfair.com/](https://status.developer.betfair.com/)

---

## 2024-09-16 15:55:03 - issues channel

**Jemima Cecil**

Anyone have any issues with the Betfair API today?

---

## 2024-09-16 15:55:00 - betfair-news channel

**Jemima Cecil**

Anyone have any issues with the Betfair API today?

---

## 2024-09-16 15:54:56 - general channel

**Jemima Cecil**

Anyone have any issues with the Betfair API today?

---

## 2024-09-16 09:07:25 - random channel

**D C**

[@U05N9773A23](@U05N9773A23) to echo the advice I was given by someone on here when I first signed up: "you don't need machine learning".

---

## 2024-09-16 09:03:20 - issues channel

**liam**

[@UBS7QANF3](@UBS7QANF3) are you now a flumine user? (looking into this PR now)

---

## 2024-09-16 09:00:14 - random channel

**Justice**

[@U4H19D1D2](@U4H19D1D2) Sadly I knew nothing about automation or machine learning back then so didn't make use of it- opportunity missed for sure

---

## 2024-09-16 08:55:43 - random channel

**D C**

Biggest problem for me [@UGV299K6H](@UGV299K6H) is the dropout issue. It's not an issue in a money loss sense, more of missed opportunity sense.

---

## 2024-09-15 23:06:47 - random channel

**PeterLe**

Well I guess I should comment as I posted the image..

My experience is that recent times are different than in previous times (ie 5-15 years ago), in previous times you could get matched easier and for larger stakes.

These days, there is usually at least one a day, I merely post them to show that they are happening. I would expect there to be at least one or two over the next couple of days. So we _know_ they will happen, but catching one is something completely different. (Although Liam did ok :money_mouth_face:)

I haven't checked all my accounts, but fairly certain I didn't get matched at high odds.

The thing that intrigued me about this one is that TPD was present and you may have thought that there was some indication, who knows.

I've always had an interest in these big priced winners...at what point does something become a 1000/1 shot?



This was one of the first wins for me :



[https://www.youtube.com/watch?v=hjb9EVY1S60](https://www.youtube.com/watch?v=hjb9EVY1S60)

I think i got matched for +£4

So to answer your question And, Yes there is value backing at 1000, but there is also value laying at 1000 too



(*edit: I may be wrong about the £4 matched on the above, I think it was on the 15:30 at Leicester 28 may 2013 )

---

## 2024-09-15 18:29:29 - general channel

**liam**

Who knows with windows but flumine uses the hostname to separate orders (strategies) so you will get this when running multiple flumine instances on the same host 

---

## 2024-09-15 14:22:38 - random channel

**D C**

I kind of have it, and in truth, I think that the affordability check stuff would help. I keep a larger (and fairly constant) bank than I really need, but if that disappears, I won't be depositing again. I'd like to think that if I even lost half of it I'd cash out but in truth would probable let it ride. I'd never get away with depositing the funds to claw that bank back.

---

## 2024-09-15 14:22:13 - random channel

**ShaunW**

Automation is the antidote to problem gambling imo. Once you've found out how hard it is to find an edge using serious data/analysis etc it makes it virtually impossible to have a casual bet without seeing how futile that is.

---

## 2024-09-15 14:13:14 - random channel

**D C**

I'd actually speculate that it might be just as big a problem for those who are profitable, get used to it, lose the edge in some way and then start chasing things.

---

## 2024-09-15 14:09:01 - random channel

**Jonjonjon**

But at that point it just becomes a question of whether or not the individual finds it enjoyable.

---

## 2024-09-15 11:54:21 - random channel

**Michael**

Sure, it's a question of balance.

---

## 2024-09-13 20:06:39 - general channel

**Justice**

[@U02RN7YDRQ9](@U02RN7YDRQ9) Interesting approach. I personally can't stand python on Windows so I use WSL. Git is definitely a must, I've learnt that. So many times I've made changes then forget how to revert back to what I had before

---

## 2024-09-12 17:55:22 - strategies channel

**liam**

Stake using liability as a first step, I thought you were a flumine user?

---

## 2024-09-12 17:13:43 - strategies channel

**Justice**

I am happy with my execution (when to bet) but I am using a simple level stake and can't help but feeling I'm leaving profits on the table

---

## 2024-09-12 13:58:11 - general channel

**D C**

Intellectual challenge? Lack of tax? Ease of access (to a bookie anyway)? Lower starting bankroll (as [@UPMUFSGCR](@UPMUFSGCR) points out). No financial fees to cough up on losing bets/trades (I know jack shit about financials but you have to pay fees per trade/stock purchase don't you?).

---

## 2024-09-10 10:17:54 - general channel

**D C**

It's ok - it was the problem in my other thread that was the issue. Market filter with a typo resulted in getting a coarse resolution and loads of unwanted shite

---

## 2024-09-09 22:21:00 - general channel

**Lee**

The limit is at time of subscription. The problem will be if you get disconnected / reconnecting again during busy times.

---

## 2024-09-09 22:16:06 - general channel

**D C**

I'm trying to make more efficient use of my available streaming connections. My limit is 1000. If I subscribe and at time of subscription is not kicked out because the limit is currently acceptable, will that connection persist even if the number of markets later exceeds that limit? I'm sure this has been asked before but I can't remember the outcome. Currently trying to pull cricket and tennis match odds matkets but it's currently just over the 1000 so need to know if it's worth waiting and trying again intermittently or to split into 2 connections.

---

## 2024-09-06 18:29:49 - general channel

**Mo**

Clone [https://github.com/betcode-org/flumine|flumine](https://github.com/betcode-org/flumine|flumine) and start running the examples

---

## 2024-09-06 18:26:46 - general channel

**Sam G**

Is there a “bible” or “course” (i know the word course is cliched) that I can do to get started, I am not newbie into such systems design - i know what is bid offer, spreads, how matching engine works etc - but want to understand specifics of this market and maybe someone has a course? Or maybe someone does a consultancy for a fee



I like the gym trainer analogy. I can learn from youtube and lot of resources on how to lift weights best, but i will lose say 12 months before I start to figure out what works for me. Having a good gym trainer helps me short circuit and get to a good level faster (for a fee of course), Is there anyone i can approach?

---

## 2024-09-06 05:15:07 - general channel

**James**

Is it possible to set a "fill or kill" condition when placing an order using Flumine?

---

## 2024-09-05 20:01:19 - general channel

**liam**

Yeah that is the problem with conflation, you need to record with it to simulate.

---

## 2024-09-05 19:41:59 - general channel

**liam**

Yeah this is where a worker can be used to call an api and inject predictions into context etc.



However first question is do you need every update or can you conflate?



Paper trade it first as that will tell you how bad things could be without risking any money. 

---

## 2024-09-04 13:29:03 - random channel

**Michael**

Obviously it's up to you ([@UUE6E1LA1](@UUE6E1LA1)) to frame the problem you had in whatever way you find most helpful. That said; I think it's possible to adopt a middle ground which both accepts personal responsibility and recognises that people (including oneself) are subject to manipulation by others. I certainly don't absolve the gambling industry of the harm it causes, nor even wholly myself.

---

## 2024-09-04 12:06:24 - random channel

**D C**

I have done this and if I ever turn up to one of these meets I can tell you of my own horror story with these RNG money drainers. Never had what I'd describe as a rock bottom problem but they did very negatively impact on my life and finances. I say "they did" but the reality of it is that it was me that was the problem. In truth, if they didn't exist I would not have HAD a problem but I refuse to blame anyone other than myself for my problems and that is where I deviate from the philosophy of the anti-gambling grifters out there.

---

## 2024-09-03 10:42:06 - strategies channel

**Aryan Kapoor**

my logging code is essentially identical to the example code here [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2024-09-03 09:37:41 - strategies channel

**Aryan Kapoor**

Okay sure I get what the above meant theoretically though so I’ll try solve it myself I think I need to wrap my head around flumine more haha. If still struggling I’ll give you a message :smiling_face_with_tear: 

---

## 2024-09-03 09:16:03 - strategies channel

**Aryan Kapoor**

It seems like when the exchange rematches the trades it gets recorded as new trades in flumine - will look into it but do you have any suggestions im definitely not as across the workings for flumine

---

## 2024-09-03 09:00:07 - strategies channel

**Aryan Kapoor**

Running some flumine simulations and stumbled upon a market where I am getting this exchange message: "Order adjusted due to non runner 64796820".  Uncertain exactly the mechanics of this (which I will dive into later) but what i do know is that all the order data is getting saved again and it is messing up a bit of preliminary jupyter analysis I am doing. I was wondering if there was anyway to flag something like this so I could filter it out of my orders dataset.

---

## 2024-09-02 15:08:37 - general channel

**liam**

How have you recorded this TPD data? I am guessing you changed some things in the marketrecorder as opposed to following the [https://betcode-org.github.io/flumine/sportsdata/#race-recorder|docs](https://betcode-org.github.io/flumine/sportsdata/#race-recorder|docs)

---

## 2024-09-02 11:42:20 - general channel

**tone**

I thought you needed client = clients.SimulatedClient() &amp; framework = FlumineSimulation(client=client) to run simulation?

---

## 2024-09-02 10:57:41 - random channel

**D C**

Can anybody please explain to me the value of placing BSP bets. I recognise it may come across as a stupid question, but what value do people get from using it? You don't know what it will be so it appears that you can't use it for fundamental based approaches. It seems to be overall 0EV (from what I hear - correct if wrong) so can't see much value there.

At a push I can only think of 2 useful situations:



1. People with large positions pre-off using it as a last resort hedge in case of internet outage etc.

2. Because it is 0EV using it to churn turnover to reduce PC

Can anyone explain to me in easy to understand terms what I am missing here and how it is conceivable theoretically to obtain any value from it?

---

## 2024-09-01 17:14:39 - issues channel

**Dave**

all good - misinterpretation of behaviour on my part. Didn't check closely enough so it looked like I had an order in Pending for many seconds, but actually I had just replaced at the same price and I was now inspecting an entirely new order. No issue with flumine :ok_hand:

---

## 2024-09-01 13:18:08 - issues channel

**Dave**

[@UPMUFSGCR](@UPMUFSGCR) good point, even though the simulation enters _process_market_book multiple times following placement of the order, the order.elapsed_seconds remains None and order state remains in Pending. Maybe there is some quirk in the recording such that flumine didn't consider placing the order into the book.



[@U4H19D1D2](@U4H19D1D2) yes I am, in this case setting a value for seconds_to_start and inplay=False.



I'll check how much the market has evolved between me placing an order, and e.g. 10s later when order is still "Pending"

---

## 2024-09-01 09:49:12 - issues channel

**Dave**

Seeing some instances in flumine simulation where order remains "stuck" in Pending and eventually gets matched by the simulation engine. pending for > 60s of simulated time in some cases. Is this a known issue? Will try and dig deeper to see why but thought I'd ask first...



update: all good - misinterpretation of behaviour on my part. Didn't check closely enough so it looked like I had an order in Pending for many seconds, but actually I had just replaced at the same price and I was now inspecting an entirely new order. No issue with flumine :ok_hand:

---

## 2024-08-30 19:26:02 - issues channel

**Lee**

you are running different versions of flumine 

---

## 2024-08-30 15:37:55 - general channel

**liam**

Huh, isn't the problem knowing who the favourite is?

---

## 2024-08-29 14:23:03 - issues channel

**Brøndby IF**

Hi [@U4H19D1D2](@U4H19D1D2) → Python 3.10.4 ||| requests==2.32.3 ||| urllib3==2.2.2

---

## 2024-08-29 12:54:44 - general channel

**liam**

Yeah I keep meaning to remove it but its just betconnect



[https://github.com/betcode-org/flumine/blob/master/examples/example-sportsdata.py](https://github.com/betcode-org/flumine/blob/master/examples/example-sportsdata.py)

---

## 2024-08-29 11:36:55 - strategies channel

**liam**

easy answer is use flumine and it handles everything for you if you are doing it your own way then you want something similar to this example to handle a reconnection



[https://github.com/betcode-org/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/betcode-org/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2024-08-29 11:35:58 - strategies channel

**Bassam Ismail**

bflw marketstream

---

## 2024-08-29 11:35:29 - strategies channel

**liam**

bflw? flumine? streaming?

---

## 2024-08-29 11:18:24 - general channel

**liam**

flumine/examples

---

## 2024-08-29 11:15:57 - general channel

**tone**

Python. I've been using Flumine

---

## 2024-08-29 11:09:58 - general channel

**D C**

Have Betfair not given you any documentation for it?

---

## 2024-08-29 10:58:18 - general channel

**tone**

Hi, would someone be able to give me a steer re how to handle the Betfair TPD stream? Any code examples would be really helpful!

---

## 2024-08-28 15:07:59 - general channel

**Justice**

[@UEA14GBRR](@UEA14GBRR) Agreed, problem is with people nowadays, it's always someone else's fault

---

## 2024-08-28 15:07:09 - general channel

**ShaunW**

You should be able to spend/gamble your own money freely, and I think most of us here do. It's when they're spending other people's that the problems start hence the funds source check.

---

## 2024-08-28 14:11:06 - general channel

**D C**

There is a huge anti-gambling lobby [@UEA14GBRR](@UEA14GBRR) - basically ex-punters onto a good grift who took a bit of a beating at the bookie and cant take responsibility for their actions and now blame the bookies. I agree that the sector could to a LOT more for problem gamblers but these people (including academics) are onto a good thing with their funding so they are not going to disappear anytime soon.

---

## 2024-08-28 14:09:13 - general channel

**D C**

Yeah that makes sense [@U4H19D1D2](@U4H19D1D2). Coinbase introduced a questionnaire that UK customers had to complete in order to carry on using it (based on some FCA recommendation) but it basically asks if you realise that your money can vanish overnight due to the exit scams about. A lot easier than submitting wage slips and bank statements to a bookie. I know more people who have money in shitcoins than I do placing any kind of bet.

---

## 2024-08-28 14:01:14 - strategies channel

**Aryan Kapoor**

thanks so much for all this helped a lot

---

## 2024-08-28 13:28:55 - strategies channel

**Aryan Kapoor**

I understand this is a very elementary problem so do appreciate all the help

---

## 2024-08-28 13:21:30 - strategies channel

**Aryan Kapoor**

Ive got a folder together with the problem

---

## 2024-08-28 12:47:39 - strategies channel

**liam**

the problem will be in what you aren't sharing

---

## 2024-08-28 12:41:25 - strategies channel

**Aryan Kapoor**

Appreciate the help on this super basic issue will get something cleaner for you

---

## 2024-08-28 12:40:45 - strategies channel

**liam**

I can help if you give me a single file which replicates your issue

---

## 2024-08-28 09:01:47 - issues channel

**liam**

python version / what versions of requests/urllib3?

---

## 2024-08-24 17:34:22 - general channel

**Unknown**

[@UUE6E1LA1](@UUE6E1LA1) They do not report that on status page, so have problem there

---

## 2024-08-24 17:30:37 - general channel

**Štefan**

Betfair api is back, but almost no activity on markets

---

## 2024-08-23 12:05:13 - issues channel

**James**

I didn't use a key for the simulation. This is all I used to login:



client = clients.SimulatedClient()

framework = FlumineSimulation(client=client)

---

## 2024-08-23 04:43:16 - issues channel

**Unknown**

Hi, I have an issue regarding the total matched amount on a runner.

For whatever reason, some runners have a total matched volume of 0, whilst having a last price traded. I am not sure how this works given that for a last price traded to exist, a trade must have taken place and therefore the total matched must not be zero.

I am using runner.total_matched with the listener kwarg "cumulative_runner_tv": True

I have attached a zip folder containing a python file, sample market and log file that highlights the issue. Please have a look at the log file (LPT, total_matched columns) to see that some runners have total_matched = 0, and a non zero LPT value.

Thanks!

---

## 2024-08-22 15:30:35 - strategies channel

**A**

You could also achieve this using middleware:



```class SomeMiddleware(Middleware):

  

  def add_market(self, market: Market):

    # this is called when a new market is added

    pass



  def __call__(self, market: Market):

    # this is called on every market update

    pass



  def remove_market(self, market: Market):

    # this is called when a market is done

    pass```

then somewhere:



```middleware = SomeMiddleware()

flumine.add_market_middleware(middleware)```



---

## 2024-08-21 07:47:07 - strategies channel

**Derek C**

process_new_market gets called once per market, check_market_book gets called once per update within a market. Lots of us here create CSVs from the data so it might be worth you exploring the Flumine examples rather than 'doing something a bit different'. With streaming data it might be more appropriate to write everything to the same csv with market_id as a field, and then later on split the file into one per market, if that is a key requirement for you.

---

## 2024-08-20 15:55:58 - strategies channel

**thambie1**

Per the documentation, INVALID_MIN_FILL_SIZE: "The minFillSize must be greater than zero and less than or equal to the order's size. The minFillSize cannot be less than the minimum bet size for your currency"

---

## 2024-08-20 00:18:42 - strategies channel

**Aryan Kapoor**

Super dumb q but is there any way to get the market_id in flumine functions/classes where Market/MarketBook isn't parsed

---

## 2024-08-19 16:30:12 - issues channel

**Jorge**

Hi, am I correct that no login is required to be able to access the inplay_service, following the [https://github.com/betcode-org/betfair/blob/master/examples/exampleinplayservice.py|exampleinplayservice.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleinplayservice.py|exampleinplayservice.py) ?

---

## 2024-08-19 16:16:18 - general channel

**James Scott**

Thanks, I’m using streaming and I had 6 connections and one of them stopped working, I thought it may have been the number of connections.

---

## 2024-08-19 16:09:25 - general channel

**James Scott**

How many Betfair api connections can you have?

---

## 2024-08-19 11:13:14 - strategies channel

**D C**

Well I don't use flumine, but AFAIK there is nothing else in the API that gives you that detail other than the name. You can get it off TPD but only for those markets. I've never had much luck with the racecard API so no idea if it is available in that.

---

## 2024-08-12 09:32:09 - general channel

**D C**

About 25% for me but it's hard work as the inplay volumes are so low compared with UK. Also get a lot more GPS problems on the US side. On the plus side there are a LOT more races. Seems that there is just no interest until the end of the race either.

---

## 2024-08-12 09:12:24 - general channel

**Sen**

Is there a way to find all marketIds for races yesterday? I know how to get when betfair releases data (but it's with a 5/6 day lag)

---

## 2024-08-11 10:34:07 - issues channel

**Dave**

just got caught out by flumine's patching of BFLW runner books to use dicts rather than PriceSize - imported flumine in a module which is shared by both my flumine and bflw-only strategies, forgot I did this import and spent a while figuring out why suddenly my bflw-only strategies were getting back [dict]

---

## 2024-08-10 15:59:02 - general channel

**D C**

It's possible but I would not know where to start with it to be honest. If I could assume that it isn't a mistake at my end, AND the market volumes have not dropped off then the most likely explanation would be someone else putting up better prices than mine. Something I will be able to scrutinise after looking at the first 2 points. It's the nature of the drop though - it is like an overnight step change which is good evidence that something I've done (but can't identify) is the cause of the problem

---

## 2024-08-10 10:27:48 - general channel

**Peter**

Assuming that you're not doing 2 - you'd have told us wouldn't you? Then it would have to be 1 or 2. So the question becomes what's happened to the traded volume in the markets? If that's gone down it would suggest 1, but if it's remained constant then it suggests that some of the matched bets are now going elsewhere, i.e. 3.

---

## 2024-08-08 16:40:04 - random channel

**Paul**

If it’s easier you can buy me a plane ticket and pay for my hotel, and then I’ll ask the question in a small special ceremony. I’ll even wear a tie.

---

## 2024-08-08 05:56:59 - general channel

**liam**

flumine matches what the site gives you / what you would win which makes sense to me?

---

## 2024-08-07 19:49:29 - general channel

**Dave**

Suppose I have n Back bets, at various prices of various sizes. I want to calculate my average price - do I vwap or do I compute my total liability and potential winnings and derive the AVG px from that? Flumine simulation computes vwap for average_price_matched on simulated order from what I can see - any reasoning for that?

---

## 2024-08-07 18:12:02 - general channel

**Sen**

Hey guys - I wondered if anyone has a list of markets showcasing traded volume per event &amp; pre-event. 



Effectively I'm looking for a list like this:

For 2024:

Horse racing: 100k per race 

Greyhounds UK: 15k per race

Football League 2: 10k per game

Sport X: 5k per event 

Sport Y: 5k per event 

And so on.



Much appreciated... or even if you would be able to tell me where to look that could also help.

---

## 2024-08-07 08:37:41 - strategies channel

**John Foley**

(I’ve tackled this exact problem you’re describing) 

---

## 2024-08-07 07:15:20 - strategies channel

**Tom**

I think you've sort of inadvertently explained why it's sort of self-regulating in the question itself. A single entity overcommitting to risk compared to the market volumes (and complexity of volumes) in a closed (forced result) market with a single pre-determined event that determines an outcome will begin encountering issues getting paid.

---

## 2024-08-07 00:55:40 - strategies channel

**Gabriel Mocan**

[@U4H19D1D2](@U4H19D1D2) i’m a versed system architect with solid bg on docker, pipelines and continuous integration, happy to help in this design and colaborate on the project. 

---

## 2024-08-06 23:23:02 - strategies channel

**Jonjonjon**

My database is around 1gb for a few years of racing data. If you give it a go it will be larger/smaller depending on what indices you choose to create and how compact you make your data. I don't think mine is that optimal.

---

## 2024-08-06 23:08:11 - random channel

**Paul**

Apparently I “spilled alpha everywhere” tonight by asking one question. Turn up next month, buy me a drink, I might ask the same question again… 

---

## 2024-08-06 22:24:13 - strategies channel

**Michael**

Oh wait sorry [@UPMUFSGCR](@UPMUFSGCR) I think I misunderstood your question - do you mean at the points where the tick intervals change? I don't worry bout ticks at all, I just derive my odds however I'm doing it, round to the nearest tick and post.

---

## 2024-08-06 22:09:18 - strategies channel

**Jonjonjon**

I use an sqlite database with the market catalogues in it.

---

## 2024-08-06 20:30:26 - strategies channel

**liam**

:joy:  happy to be questioned, I am way to far down that path now, the advantage for me is scalability 

---

## 2024-08-06 13:38:52 - general channel

**K H**

Betfair pro data is here [https://historicdata.betfair.com/#/home](https://historicdata.betfair.com/#/home)

Not sure if there's a reason you'd prefer a 'sharp local bookie' over betfair odds (maybe poor spreads further out from the event?). But if you were going to scrape Bet365, you can just gather betfair data using flumine and pay nothing at all instead

---

## 2024-08-06 11:10:53 - general channel

**foxwood**

[@UUE6E1LA1](@UUE6E1LA1) thanks for mentioning branches - now know how to use Twit better :upside_down_face:

---

## 2024-08-06 11:06:57 - strategies channel

**D C**

I'd play to your own personal strengths rather than how much others have made. You're probably in one of the best places to ask questions and get generic advice but only you know where your strengths lie. And how much time to invest before moving on.

---

## 2024-08-05 22:42:16 - strategies channel

**AndyL**

So what’s probably more a problem is punters can’t afford it what with cost of living etc….

---

## 2024-08-05 20:39:01 - general channel

**Jonjonjon**

[@U05N9773A23](@U05N9773A23) isn't there already a wrapper for Betdaq? Similar to betfairlightweight?

---

## 2024-08-05 20:35:40 - general channel

**Jonjonjon**

Money can be made from bad and inconsistent APIs that others don't know how to use. Obscure and poorly explained rules help as well.

---

## 2024-08-05 20:34:43 - general channel

**Jonjonjon**

Is bad tech a problem if it makes things equally hard for all?

---

## 2024-08-05 06:36:39 - general channel

**Michael**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) There's nothing wrong with it if it works. Does it work?



There are different styles of player. It's a question of what your strengths are and some extent one of aesthetics.

---

## 2024-08-04 23:08:56 - general channel

**AndyL**

For inplay horses does Flumine seconds_executable start from after the inplay 1 second delay?

---

## 2024-08-04 15:37:45 - general channel

**Jonjonjon**

Actually, it's not really a problem as those people probably have a lots of money and might be giving some of us our edge

---

## 2024-08-04 14:03:03 - general channel

**Rob**

gradient boosting, because it repeatedly wins the online competitions (like kaggle) for the types of problem I'm trying to solve. Although I understand from all the posts here that everyone's approach is different.

---

## 2024-08-04 12:50:59 - general channel

**liam**

So the real question is, how much does the XM algorithm make for betfair? 

---

## 2024-08-04 12:47:26 - issues channel

**Tom**

Yeah got it, was just confirming the default is also off for bflw.



Presume crossing spreads that you just get filled at the best price as well at all times?

---

## 2024-08-04 12:37:19 - general channel

**D C**

Thanks Joe - so in an XM enabled market, using the same example of 2 users putting orders in (almost) simultaneously, what happens if someone places a back bet of £2 on selection A @ 60.0 and the other places a back bet of £50 on selection B @ 1.01 ? Can you explain the flow of events (sorry for all the question, I just really want to nail down my understanding based on your prior posts) ?

---

## 2024-08-04 12:19:03 - issues channel

**Tom**

So if I am collecting prices on betfairlightweight (I have a bunch of data) would it have picked up the XM prices or just the user prices?



Then flumine would always be user prices without specifically changing it?



I've only just started working within the last sort of 30 minute period so hadn't seen this before or noticed discrepancies. Seems quite wild now this is a huge difference

---

## 2024-08-04 11:01:31 - strategies channel

**liam**

I just use flumine, store signals/market data into `order.notes` and analyse in jupyter after running, I then know I can trust execution/matching (to a point)

---

## 2024-08-04 10:48:36 - strategies channel

**AndyL**

I’m doing this to remove the adverse selection using flumine matching so I can theoretically find a signal that works… then work on an execution that will achieve it for real 

---

## 2024-08-04 10:46:56 - strategies channel

**AndyL**

I was using flumine purely as data streaming then theoretically signal triggering at t0, then virtual matching at t+1second price 

---

## 2024-08-04 10:14:57 - strategies channel

**liam**

How did you remove the delay? Assuming you are using flumine it adds the market delay for you

---

## 2024-08-04 10:14:01 - strategies channel

**liam**

Lots of helper functions in the `market.blotter`



[https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/markets/blotter.py#L161](https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/markets/blotter.py#L161)

---

## 2024-08-03 23:36:59 - general channel

**Alex A**

I use C++ too, many of the machine learning packages are written in a systems programming language and expose a C API, you don’t have to use Python or R.

---

## 2024-08-03 09:42:24 - general channel

**D C**

That is fair [@UQL0QDEKA](@UQL0QDEKA). I think I do need to revisit my understanding here. I know that my own backtesting codebase does not deal with the subtleties of XM - does the flumine framework ?

---

## 2024-08-02 21:43:13 - general channel

**thambie1**

Absolutely had losses :joy:. If laying at 1000 was all I did, it would be a problematic graph because of the low sample size. Include all the trades at other prices and it's fine

---

## 2024-08-01 16:46:41 - general channel

**Jonjonjon**

[@UUE6E1LA1](@UUE6E1LA1) Could you turn that question into a poll.

---

## 2024-07-31 21:05:48 - general channel

**Jonjonjon**

[@UUE6E1LA1](@UUE6E1LA1) to be honest I can't really remember. I've been on the 50% rate for perhaps around 5 years. Fortunately when it kicked in I'd made some improvements (i.e. started using Flumine), so it didn't reduce my net take home profit for the year.

---

## 2024-07-31 21:02:32 - general channel

**D C**

Not sure that I'd say that doesn't help [@U012XF5CNPN](@U012XF5CNPN) - certainly trying to reframe my perspective is something I am trying to do anyway.

---

## 2024-07-31 21:01:15 - general channel

**Paul**

My tax + NI bill as a PAYE employee as per my P60 is in upper 5 figures. I can moan about it, but as my mate pointed out to me when I bitched about it the other day, it means I’m making quite a lot more. Given where I started as a working class broke kid whose school mates disproportionately ended up in prison, it’s a point where I can give myself some kudos. Raise a glass to every deduction: it’s a celebration in some minor way. :) I know this doesn’t help, just a thought.

---

## 2024-07-31 15:07:45 - general channel

**liam**

I would put money on bflw / flumine having processed more 

---

## 2024-07-30 11:45:25 - general channel

**Alex A**

A little more humility would also help you have more productive discussions here.

---

## 2024-07-30 10:22:30 - general channel

**D C**

I quit my last job in October 2021 so coming up to 3 years. I stopped keeping up with changes to C++ language standard at C++17 (and don't use the vast majority of that). And I shudder to think of that kind of corporate/management bullshit frameworks that are now the norm. Plus I am 49 so not much scope for employment when I'd be up against new grads with a login to the latest trendy LLM code manufacturer and some idea how to get good results out of it.

I'd probably try my hand at A-level tutoring if I ever had to go back to work. I couldn't go back to academic research because I'm about 15 years out from that field. There is always work about regardless, but I'd rather not have to go back to the good old days of unloading lorries for a living.

---

## 2024-07-30 09:35:02 - general channel

**Michael**

I think part of the reason that others found it harder is that by the time they started there were already established players, we didn't have that problem. Also; the first licenses were all given to successful IR players so we were well positioned to use that knowledge. Coming into TPD without that background is a much bigger challenge.

---

## 2024-07-29 20:58:29 - general channel

**AndyL**

I am yes, can Flumine stream from "compressed" ? i've always un-compressed them when needed

---

## 2024-07-29 10:53:35 - general channel

**liam**

[@U01FJN59B52](@U01FJN59B52) I thought you where a flumine user, what is stopping you simulating?

---

## 2024-07-29 10:42:21 - strategies channel

**D C**

I don't have a problem Misha. I bet on markets that you don't. One of the few things you've said that I DO agree with is that each of our respective profitability has no bearing on the other. You losing £240K also has no bearing on my life. You talking absolute bollocks while telling people who DO know what they are on about that they are wrong, does have a bearing on my life. Specifically my blood pressure.



 If I said black was black, you'd say it was white, and because of that I just can't engage with you anymore.

---

## 2024-07-29 10:35:08 - strategies channel

**Misha**

Therein lies your problem not mine. Multiple ways to make money. You can have 5 different successful ways, and none negate the others

---

## 2024-07-29 10:22:59 - strategies channel

**Misha**

I'm not sure you can believe it works. That's not my problem

---

## 2024-07-29 10:22:33 - strategies channel

**D C**

Serious question [@U016535QCJ2](@U016535QCJ2) - are you just fucking trolling us here with this stuff or do you truly believe in what you are typing?

---

## 2024-07-29 10:02:03 - strategies channel

**Misha**

This is the exact problem I have. I just use a version of logarithmic scaling and treat all bets as independent. Unfortunately while this works in the long run, variance is high (as you know). I now have a dataset of 20 million points, prices, and probabilities that I can back-test in any way I like. No matter how many different strategies I have tried, nothing seems to reduce variance significantly without sacrificing POT%, which is important when your "edge" is only 4% on the market (before commission)

---

## 2024-07-29 09:34:22 - general channel

**D C**

I do use python but not in the jupyter way - more in the way I used to use things like Perl. Just as standalone scripts that do something useful (file IO, DB insertion etc.)

---

## 2024-07-29 08:42:10 - general channel

**Michael**

Yeah. I think the best thing is probably just to take your history of wins and losses (at the market level) and run through the calculation for your own case.



In all honesty I would previously have answered your original question with the opinion that the lowest comm rate is always best because of the 50/50 calculation but I'm hesitating from disagreeing with [@U01DCR5PXDY](@U01DCR5PXDY) because I know that he's smart so maybe I'm wrong.



If you do work through your actual case I'd be interested to see the results.

---

## 2024-07-27 23:10:51 - general channel

**D C**

Serious question now: when you went from 270K bank to 130K bank in the space of a week (fortnight?) were you honestly not tempted to pull the plug and take a deeper look at what was going on?

---

## 2024-07-27 22:57:48 - general channel

**Misha**

Maybe you don't tackle problems like I do. It's worked well over a 35 year career where I have developed numerous systems that people said wouldn't work

---

## 2024-07-27 22:56:41 - general channel

**Michael**

_"Nope - wouldn't have gone through the same learning process"_



Maybe my irony parser is broken, but I can't help thinking you mean this.

---

## 2024-07-27 22:35:28 - general channel

**Michael**

Yeah. I guess it might have been helpful if people had warned you before you did it.

---

## 2024-07-27 19:54:31 - issues channel

**Derek C**

yeah, definitely room for some optimisations there! Thanks again for your help, I was totally stuck earlier.

---

## 2024-07-27 16:58:36 - issues channel

**Lee**

are you using the [https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|orders](https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|orders) middleware? If not the restarts will probably be the issue

---

## 2024-07-27 16:36:17 - issues channel

**Derek C**

thanks [@U03FS7KM2NL](@U03FS7KM2NL) but i think Flumine is controlling that I only have 1 open order at a time (according to my settings) and if I look at the orders, there are dozens of small-exposure bets, it isn't that I have a few large ones making up the total.

---

## 2024-07-27 16:28:48 - issues channel

**Ralegh**

Not a flumine user but if you’re creating orders async then potentially you could exceed exposure if you sent multiple orders in quick succession (though flumine might handle that), could log your orders with place/create times to check that

---

## 2024-07-26 16:54:43 - strategies channel

**thambie1**

With human effort, you can get the computational cost down to acceptable levels (by my standards at least). Likely not possible with a python implementation.

---

## 2024-07-25 13:47:08 - general channel

**jhaa**

I just got the documentation today

---

## 2024-07-25 10:43:14 - general channel

**Jimmy**

Yeah, I get an order can be created — was more intrigued how you might handle “order pairs” and sending one in when another is matched (as per the original question)



Unless I’m misunderstanding the original question!

---

## 2024-07-25 10:40:34 - general channel

**Jimmy**

*If* someone wanted to go about this, what would be the best way using Flumine?

---

## 2024-07-24 08:34:48 - general channel

**Jonjonjon**

Thanks [@UUE6E1LA1](@UUE6E1LA1). Yes I recall reading a paper suggesting that the price is related to the matched volume (similar to how tote is priced), but could not make it work for me. Maybe I should have dug deeper!

---

## 2024-07-24 00:48:57 - general channel

**Jared King**

no problem #nevergreen amirite

---

## 2024-07-23 10:44:47 - general channel

**Mo**

&gt; Obama had no problem committing genocide in Syria, Libya, Yemen etc. what is one extra death to him?

This is a real banger

---

## 2024-07-23 10:25:58 - issues channel

**Jared King**

[@U4H19D1D2](@U4H19D1D2), would you be willing to share an example of how to use transactions? I'm trying to write some code that enforces an order flow for one runner, only one workflow allowed for that runner at a time ie trigger-&gt;place open trade-&gt;open trade matched-&gt;place close trade-&gt;close trade matched-&gt;waiting (and handle cancelling etc) but if this can help...

---

## 2024-07-23 09:26:28 - general channel

**Adrian**

What do you want me to say? If my posts are still there you can read them for yourself! I can’t tell you if they deleted anything or not. What I was writing about last was possible reasons why Michelle Obama’s odds are still relatively low, which someone posed the question.

---

## 2024-07-22 21:18:10 - general channel

**A**

Hey [@U4H19D1D2](@U4H19D1D2) - I’ve been trying to figure out how you’d done this with middleware? From [https://github.com/betcode-org/flumine/blob/master/flumine/markets/middleware.py#L26|middleware.py](https://github.com/betcode-org/flumine/blob/master/flumine/markets/middleware.py#L26|middleware.py) it looks like we haven’t got the hooks for all the data (market books, market catalogues etc).

---

## 2024-07-19 22:08:31 - general channel

**Jonjonjon**

I like Michael's advice of sticking to something. I wish I'd done it in the past. However, a difficulty with that is working out how to dig deeper. It's not always clear how to take the correct step forwards

---

## 2024-07-19 18:13:25 - general channel

**AndyL**

good question Paul

---

## 2024-07-19 18:11:53 - general channel

**Paul**

If you hold umnmatched and the price moves away from you, you have hit some EV (you think), but could not exploit for the £ you wanted. Now what? Move price? Wait? How urgent this question is could be determined by match rate. Big EV bets at 10% might not pay at the rate of slightly smaller EV at 95%…

---

## 2024-07-19 18:07:34 - general channel

**Paul**

If I put £100 up (make or take, arguably doesn’t matter), and £20 gets matched and £80 is cancelled because it lapses before it matches and the market goes to state where it can’t match (event start, market closes), that’s a 20% match. Iterate for all bets. I’m not sure how understanding queue dynamics helps to that number, it’s a trailing metric. Disagree?

---

## 2024-07-19 17:50:37 - general channel

**Jonjonjon**

How would you derive things like match rate from the Flumine data?

---

## 2024-07-19 13:20:01 - general channel

**Rob**

For json, you can just output them as [https://stackoverflow.com/questions/11875770/how-can-i-overcome-datetime-datetime-not-json-serializable|strings](https://stackoverflow.com/questions/11875770/how-can-i-overcome-datetime-datetime-not-json-serializable|strings). Or turn them in to [https://stackoverflow.com/questions/19801727/convert-datetime-to-unix-timestamp-and-convert-it-back-in-python|unix timestamp](https://stackoverflow.com/questions/19801727/convert-datetime-to-unix-timestamp-and-convert-it-back-in-python|unix timestamp).

---

## 2024-07-19 12:40:57 - random channel

**ShaunW**

No serious company should be using automatic updates for anything. Sht happens and that's why there's update testing and controlled rollouts. Crowdstrike problem, compounded by lack of basic IT procedures. I don't apply updates automatically due to the risk, and all I'm doing is having a fee bets. :thinking_face:.

---

## 2024-07-19 09:38:32 - strategies channel

**Unknown**

The flask integration is cool, would be easy to add to flumine as a loggingcontrol

---

## 2024-07-19 09:31:37 - random channel

**D C**

Is it confirmed that crowdstrike is the source of the problem?

---

## 2024-07-18 18:28:32 - general channel

**Jonjonjon**

For hypothesis tests...



They are basically tests to check whether or not your returns are likely to be due to blind luck or not.



For example, if you played 10 blackjack hands, you would win money about 45% of the time. But that doesn't mean you should play more blackjack if you happen to win as it just means you got lucky.



If you played a similar game where the chances of winning are unknown, a hypothesis test would help you estimate whether or not the odds of the game are favourable to you or not.



I've seen a lot of professionals experience short terms gains and think it's an exciting positive sign, when the reality is that the results are just luck.

---

## 2024-07-18 10:11:01 - general channel

**Mo**

Updated, any problems let me know

---

## 2024-07-17 20:41:42 - general channel

**jackofallspades**

Thanks, [@UBS7QANF3](@UBS7QANF3). I know about this repo of yours and checked it before posting my question. I need more recent mappings (football season 2023/24).

---

## 2024-07-17 19:57:05 - general channel

**Jonjonjon**

But the goal is to make money rather than be good at tech. Before I started using Flumine I was running stuff on a Godaddy webhosting account.

---

## 2024-07-16 12:27:44 - random channel

**Joe**

If you are going to the cost and trouble of subverting an election result then laying the obvious known winner for a few million of liability so you can point to the bookies and say, "look the bookies think something is up with this result" helps massively with your engineering of the hillbilly mind.

---

## 2024-07-16 11:32:58 - issues channel

**D C**

Does flumine work on a login session PER thread then?

---

## 2024-07-16 08:13:55 - strategies channel

**Sen**

Is this for traditional Machine learning training- or more for backtesting [@U05L8PZD2FM](@U05L8PZD2FM)

---

## 2024-07-13 20:13:05 - general channel

**George**

It doesn't help in illiquid markets that's true. Though illiquid markets are rubbish anyway. I felt it was a good investment of time and I relied heavily on it in a previous life. I'd encourage you to look into it if you have the time.

---

## 2024-07-13 20:07:19 - general channel

**George**

Years ago I implemented a simulator that did all the adding and removal of orders. It required making a lot of assumptions but I felt it was useful, worth the effort, and that I ended up with a reliable system.



Whether it would be better than what flumine does - well I can't say either way as I haven't looked into what logic flumine uses to replicate the matching engine - but it was definitely pretty good.

---

## 2024-07-12 20:04:47 - general channel

**liam**

Not simple to simulate this / not sure how helpful it would be 

---

## 2024-07-12 19:55:52 - general channel

**Dave**

in flumine simulation, if I submit an order of size x at price y, and then look at the market book, is it synthetically added to it? or do simulation orders not show up in the market book?

---

## 2024-07-11 21:54:44 - strategies channel

**Rob**

I used to use the cloud but it's easy for costs to explode, so I went back to a Ryzen and as much RAM as I can afford.



Mainly posting as I was always curious if RL techniques would work. I previously lacked the sophisticated back testing that flumine brings, so might add this to my list of things to try in future :slightly_smiling_face:

---

## 2024-07-11 00:14:56 - strategies channel

**thambie1**

Been a couple years since I looked at this stuff. I'd just buy whatever has the most cores. I don't use flumine backtesting, but I'd assume it can parallelize well

---

## 2024-07-10 20:33:01 - general channel

**birchy**

I take a slightly different approach and use market.context for stashing time series, etc, order.notes for signals and a custom [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|LoggingControl](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|LoggingControl) to push it all out to CSV for later analysis

---

## 2024-07-10 19:49:10 - strategies channel

**Dave**

VAR doesn't make much of a difference IMO. Your bets have +EV or they don't, VAR doesn't change reality. What has been an issue from time to time is untimely suspensions, and therefore matching after a goal has gone in (but market not closed). Can be resolved with a swift message to BF but still annoying it doesn't happen automatically. Nevertheless, quality of suspensions/market closures have improved over last half year or so.

---

## 2024-07-10 18:46:10 - general channel

**Gabriel Mocan**

A question regarding white labels…



Does anyone has an idea how a white label exchange can have so much more liquidity than Betfair itself?



A white label exchange is totally isolated from Betfair’s exchange? Odds are always the pretty much the same but volume in WL is far greater. For example, in greyhounds races float around 50-100K BRL while in white label (Bolsa de Aposta) we pretty much always have above 1M BRL per race.

---

## 2024-07-10 14:23:09 - strategies channel

**liam**

I don't understand why that is a problem/blocker either

---

## 2024-07-10 14:22:23 - strategies channel

**Jonjonjon**

Isn't it quite frequent that VAR cancels goals, which means that matched bets will be cancelled? But how to know which bets would have been cancelled? This sort of thing doesn't happen too often with horses.

---

## 2024-07-10 14:16:48 - strategies channel

**Jonjonjon**

Does VAR mean that we probably can't trust Flumine backrest results for inplay football?

---

## 2024-07-10 00:08:03 - random channel

**Paul**

My hot take: you should apply and understand the tools you use, and it normally pays off to understand more tools than you know how to use today.

---

## 2024-07-09 18:43:47 - random channel

**river_shah**

More hammers, more problems

---

## 2024-07-09 18:41:34 - random channel

**PeterLe**

If you only have a hammer in your toolbox DC, then every problem looks like a nail:grinning:

---

## 2024-07-09 09:20:37 - strategies channel

**AndyL**

[@U05N9773A23](@U05N9773A23) I don’t think it’s available to everyone unless you use BetMover, BetAngel, or Gruss. To use with Flumine natively I think you would need a Betfair TPD license which they only give to a select few……

---

## 2024-07-08 19:21:03 - general channel

**river_shah**

I use tenacity to help with inevitable download failures. Have LLM of choice help with filling in the rest of the code per your use case

```from tenacity import retry, stop_after_attempt

....

@retry(stop=stop_after_attempt(3))

def download_file(self, client: APIClient, file):

....

client.historic.download_file(

        file_path=file,

        store_directory=os.path.dirname(dest_path))```



---

## 2024-07-08 14:45:33 - strategies channel

**Unknown**

Nice example of how important value is, simple flumine middleware to record the lowest price traded 10s after an order is executed (racing inplay)

---

## 2024-07-06 10:13:55 - general channel

**liam**

Adding an attribute to a class that isn’t declared in the init is just bad practice / doesn’t help readability. If you are going to be using this object in everything then you should look at creating your own Market class but it’s up to you tbh.



I added context as a ‘safe’ place to store stuff and it keeps the Market object clean 

---

## 2024-07-05 18:13:25 - general channel

**Rob**

Sorry if this is posted somewhere, but if I get bored of waiting for flumine to record data, can I purchase and use the [https://historicdata.betfair.com/#/home|pro data from Betfair](https://historicdata.betfair.com/#/home|pro data from Betfair) with Flumine?

---

## 2024-07-05 15:02:57 - random channel

**Ammar**

~yep, this is where that whole database thing i was talking about a while back came into it~



Misread. Not done any sportsbook stuff yet 

---

## 2024-07-05 10:58:44 - random channel

**Tom**

I've got a flumine data collection, but it picks up a pkl file from the script. Am trying to move towards that

---

## 2024-07-05 10:50:39 - random channel

**Tom**

Right. I add market_ids, so I thought it only added those.



market_filter = streaming_market_filter(

            market_ids=market_ids,

            event_type_ids=['7'],

            country_codes=['AU', 'NZ'],

            market_types=['WIN', 'PLACE']

            # turn_in_play_enabled=False

    ),

---

## 2024-07-05 08:25:12 - random channel

**liam**

Best practice is to have a filter wide enough to pull everything in and just ignore the ones you don't want using the `check_market_book`  This is because when streaming you can't 'add' or 'remove' markets



More info [https://betcode-org.github.io/betfair/streaming/|here](https://betcode-org.github.io/betfair/streaming/|here)

---

## 2024-07-04 22:34:27 - random channel

**Tom**

Hi gentlemen. I'm wondering how to add and drop markets in a running Flumine instance successfully? Seems flumine.remove_market won't do it?

---

## 2024-07-04 17:26:22 - general channel

**birchy**

I guess you'd have to find a history of exchange rates. Maybe via a Forex history or similar? AI chatbots may help if you need to do it manually. Or maybe a website cache such as wayback machine.

---

## 2024-07-04 13:20:08 - random channel

**Jonjonjon**

How hard would it be to update Flumine to do that?

---

## 2024-07-02 19:09:54 - general channel

**Sen**

And of course... I'm now just not getting filled anywhere near enough- so I've started to question everything. Back to the drawing board. Lots of things to test

---

## 2024-07-02 18:42:56 - general channel

**Sen**

Just to clarify - my average bet size is way smaller. There have been on occasion with very short odds combined with a large edge where a large lay bet made profitable and bankroll sense. 



But yes average sizes are way lower. I've been running strategies since Janaury 2023. I had a pretty good 2023... 2024 has naaaaat been good for me!

---

## 2024-07-02 11:03:41 - strategies channel

**Adrian**

Hi i was hoping someone could help me understand `place_reset_seconds` and `reset_seconds`. I am trying to place a bet every 60 seconds on a single runner using

```trade = Trade(market_book.market_id, runner.selection_id, runner.handicap, self)

trade.place_reset_seconds = 60```

In the docs it says `place_reset_seconds` is seconds to wait since runner_context.reset and `reset_seconds` is seconds to wait since runner_context.place

What is the difference between these two and which one should i use if i want to place a single bet every 60 seconds on a single runner?

And do i have to call `runner_context.reset` / `runner_context.place` explicitly in the trade logic or does it happen automatically?

Thank you!

---

## 2024-07-02 09:57:01 - general channel

**Sen**

Mostly taking - which helps but because there's often thin liquidity large sizes just can't get filled

---

## 2024-06-29 16:01:25 - issues channel

**foxwood**

Raised similar a few months ago [https://github.com/betcode-org/flumine/issues/743](https://github.com/betcode-org/flumine/issues/743)  Suggest check size_remaining rather than rely on status - that seems to get correctly knocked down to zero even though order not set as execcomplete - test with minimum stake

Edit: cancel from process_orders will take place after 427secs since status wrong

---

## 2024-06-28 10:43:09 - general channel

**Unknown**

my edge is my time. the skills follow along gradually as i go. i'm doing alright. this is my edge vs bsp. everything i do is a learning curve tech wise. but i dont mind asking stupid questions because i will overcome every hurdle

---

## 2024-06-27 10:11:04 - general channel

**Adrian**

Is `sighup` needed for tmux? I get a bad feeling that flumine is hanging after i detach and close the console

---

## 2024-06-27 08:53:36 - general channel

**Adrian**

Does anyone here run their flumine/bflw sessions while logged out of ssh, e.g. using tmux, nohup or some some kind of daemon? Or do you simply stay logged in

---

## 2024-06-26 19:54:33 - random channel

**liam**

I am confused, you pay commission per market so if you have your pnl it’s p x c? Or am I misunderstanding your question?

---

## 2024-06-26 16:08:23 - general channel

**foxwood**

Doesn't matter how much you obfuscate things you still have to assemble the final plain text at some point. If all the info is in the binary it's hackable - no question.

---

## 2024-06-26 14:30:46 - general channel

**D C**

[@U02RN7YDRQ9](@U02RN7YDRQ9) would the password not still be visible through a call to 'ps' (assuming passed as a CL parameter) or via a shell history file? Sorry if that is a stupid question but sysadmin and security are not my forte.

---

## 2024-06-26 14:12:09 - general channel

**PeterLe**

Thanks Foxwood, yes I have control over the exposed ports, Ill have a think after the help thanks all

---

## 2024-06-24 19:04:45 - issues channel

**liam**

I think we need to trigger something as low as possible so the books stop getting processed by bflw 

---

## 2024-06-24 17:55:36 - issues channel

**liam**

No but welcome some ideas on how to do it as I can see a few reasons why you would want to 

---

## 2024-06-24 17:15:44 - issues channel

**Mo**

In flumine is there a canonical way to stop processing a market when in the middle of simulating it?

---

## 2024-06-23 14:36:22 - random channel

**liam**

I guess we have a different opinion on what solved means but yes everything I do is original, I think it’s my only edge tbh 

---

## 2024-06-23 14:21:28 - random channel

**D C**

It's why a good supervisor is so important. When you start out, you haven't the skill nor background to know it a paper is good/relevant - you need your supervisor to be  helping you separate the wheat from the chaff.

---

## 2024-06-23 08:50:15 - strategies channel

**Justice**

I have to collect TPD data in a scuffed way because I don't get it through Betfair- so your data might not be the same schema/granularity which may be problematic

---

## 2024-06-21 10:27:31 - random channel

**D C**

Most importantly choose something that you really are interested in though. Doing a Phd is a fucking slog at times - particularly when you feel you are getting nowhere. A genuine interest and passion for the research area can really really help you grind through those periods.

---

## 2024-06-21 08:14:57 - random channel

**fax**

Hi all,

I'm doing a PhD in sports forecasting (officially computer science). I'm currently mapping out my research goals. Got a question for you people... If you were in my position, what would you think is worthwhile researching?



I've got my own ideas, so even some feedback on these could be good:

- graph neural networks (i.e., [https://summit.sfu.ca/_flysystem/fedora/2022-08/input_data/22492/etd21919.pdf](https://summit.sfu.ca/_flysystem/fedora/2022-08/input_data/22492/etd21919.pdf))

- increasing profit through decreasing correlation with market prices (i.e., [https://www.sciencedirect.com/science/article/pii/S0169207022000292](https://www.sciencedirect.com/science/article/pii/S0169207022000292))

- using football match event data (i.e., [https://www.sciencedirect.com/science/article/pii/S016920702300033X](https://www.sciencedirect.com/science/article/pii/S016920702300033X))

---

## 2024-06-20 05:22:59 - general channel

**liam**

Flumine doesn’t log / store or calculate commission 

---

## 2024-06-19 19:19:09 - issues channel

**foxwood**

complete write-up and instructions for testing  may help [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login)

---

## 2024-06-19 17:35:10 - issues channel

**Cian Ryan**

thanks both for the info. I will look into Flumine



I am now trying to run in my local drive but its not reading my certs despite being saved in the path. I have tried to save it as .crt and .pem (both pem + key and pem *all. PEM + PKCS#8 brings me to Enter PEM pass phrase: but I don't recall setting any. What should I type for here?

---

## 2024-06-19 10:44:32 - issues channel

**A**

I run Flumine on GCP. Just need to set your zone.

---

## 2024-06-19 08:57:57 - issues channel

**Derek C**

it's because your ip address indicates that you are in the US, even if you're not. The same problem occurs when accessing betfair with other Google cloud infrastructure as well.

---

## 2024-06-18 14:39:04 - random channel

**D C**

Anyone having severe GPS feed problems in the first at Ascot?

---

## 2024-06-17 11:42:12 - general channel

**foxwood**

Now exploring the wonders of `defaultdict()` - I do like some of the tricks that python has built in but yearn for the solid bedrock of C++ with a compiler and a syntax checker that doesn't let typos through

---

## 2024-06-16 15:19:53 - strategies channel

**Unknown**

hey [@U053KV09FKP](@U053KV09FKP), wrote this a while ago but don't use it anymore as I learned pretty quickly that hedging was costing me EV :slightly_smiling_face: so it could probably be done a better way in terms of efficiency etc. its not great/quite hacky. but hopefully might be of some help to you

---

## 2024-06-15 09:16:04 - issues channel

**A**

Hello. Does it sometimes take a while for an order to transition to the  `EXECUTION_COMPLETE` state? I’ve been experiencing some orders being placed and matched pretty much straight away (according to the Betfair website UI), and then up to hours later it appears as complete in Flumine. Most orders behave as I expect, just occasionally see these delays on some order states.

---

## 2024-06-14 18:14:19 - strategies channel

**Rob**

I asked this, and whilst I understand the reasons not to, I think there valid reasons why you may want to - it depends what you're doing.



So I wrote a version using betfairlightweight, and whilst it may leave a little EV on the table, it does work, and doesn't need any complex linear programming.



I'd be happy to share the steps in pseudo code, but I don't have a version I can share the code for.

---

## 2024-06-14 13:49:26 - strategies channel

**liam**

its not allowed in flumine

---

## 2024-06-14 11:19:52 - strategies channel

**Adrian**

Does anybody have a good method for cashing out using Flumine? I would like the same functionality as the cash out button on betfair. I found this article from Betfair but I dont really understand the API enough to implement it

[https://support.developer.betfair.com/hc/en-us/articles/115003887431--Is-Cashout-available-via-the-Betfair-API](https://support.developer.betfair.com/hc/en-us/articles/115003887431--Is-Cashout-available-via-the-Betfair-API)

---

## 2024-06-14 08:20:25 - issues channel

**James**

Hi everyone!

I am running Flumine simulations and have an issue with cancelled orders still being matched, long after they were cancelled. To be specific, I placed an order for $50 and after five seconds I cancelled it. Looking through extensive logging, I saw that it was cancelled with $10 partially matched, and its status had turned to “CANCELLING”. Over the course of the next 20 or so seconds, the order.size_matched value progressively increased to $50 (status was still “CANCELLING” all the way through). Once the order was fully matched, the status went to “EXECUTION_COMPLETE”. I am very confused as to why a cancelled order continued being matched. Any ideas would be much appreciated, thanks!

---

## 2024-06-13 21:11:22 - random channel

**Jonjonjon**

In my streaming file for 1.228022652, I see 68651862 was declared a loser well before the race started. Chelmsford City. 25th April 2024.

Is this common?

---

## 2024-06-12 19:34:20 - random channel

**Leo**

Hey [@U4H19D1D2](@U4H19D1D2) how are you managing flumine versions without tags or release on gh 

---

## 2024-06-11 14:35:58 - general channel

**liam**

simulation logic is [https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/markets/middleware.py#L86|here](https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/markets/middleware.py#L86|here)

---

## 2024-06-11 14:30:58 - general channel

**George**

If a runner is removed pre-race and the prices of all previously matched orders are therefore reduced, does the `market.blotter` automatically update itself accordingly? If not, is there a way to do this, or how do others solve that problem?

---

## 2024-06-10 20:29:31 - strategies channel

**liam**

Behind the medium paywall but lots of articles that would help those starting out 



[https://footballdotpy.medium.com/|https://footballdotpy.medium.com/](https://footballdotpy.medium.com/|https://footballdotpy.medium.com/)

---

## 2024-06-10 13:36:36 - random channel

**D C**

OK thanks [@U01335QG2G3](@U01335QG2G3) this pretty much nails it down as not my code that is the problem, If nothing else this helps me no longer waste time trying to find problems in my code!

---

## 2024-06-10 10:23:02 - general channel

**liam**

Its all in the [https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/simulation/simulatedorder.py#L64|code](https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/simulation/simulatedorder.py#L64|code)

---

## 2024-06-10 10:21:19 - general channel

**Ben Coleman**

I don't think they should anyways be matched I understand that you are always going to have some bets that don't get matched at all. I'm just wondering how the flumine simulation decides which ones get matched and which don't

---

## 2024-06-09 13:55:44 - random channel

**D C**

I emailed Neil about it. I was just hoping that someone might be experiencing the same problems. Unless you run multiple GPS streams though there is no frame of reference for comparison I suppose and you'd just assume it was a TPD level dropout :man-shrugging:

---

## 2024-06-09 13:39:33 - random channel

**D C**

I can ask the question anyway

---

## 2024-06-09 13:37:11 - random channel

**Mo**

That comparison looks like a smoking gun that the problem is with Betfair, [@UUE6E1LA1](@UUE6E1LA1)

---

## 2024-06-08 06:32:31 - general channel

**PeterLe**

Hi [@U053KV09FKP](@U053KV09FKP) Well it was more 'tongue in cheek' due to the selection name :grinning:, but to answer your question, it depends.

if your relying on the price action as a trigger, you will get beat very often, even with  faster code than Python (but not always)

Alternatively you could place the bets in anticipation and cancel when they no longer seem viable

Its a conundrum

---

## 2024-06-03 23:00:31 - general channel

**Ben**

Anyone used matchbook api before, need abit of help

---

## 2024-06-03 12:45:42 - issues channel

**George**

Agreed, but that requires me to maintain an alternative 'personal' version of flumine which seems like a bad idea?

---

## 2024-06-01 10:34:46 - general channel

**George**

That's definitely a good idea. The other option would be to set the flumine default to be simply sending everything that could possibly be relevant to the log-control, and then let the user decide what they want to actually print to the log via their log-control code.

---

## 2024-06-01 08:15:25 - general channel

**George**

I might do some digging and ask a separate question at some point as it's not really related - thanks very much for your help on this!

---

## 2024-05-31 20:27:19 - general channel

**George**

I've implemented the blotter-comparison solution, and I think I'm coming up against the race-condition problem. I think the order changes its status before the logging-control gets a chance to write it to the file.

BUT - this would only be a problem in simulation I think?! Is that right?

---

## 2024-05-31 16:08:49 - random channel

**Paul**

Interestingly I was thinking about building something like this - helping understand past bets a little better - for macOS and iOS for my own purposes (I’m very much in the apple ecosystem), in the next few weeks. If I throw a few screenshots up and people like it, I might bother to talk to BF about making it a registered app with them and getting it into app stores.

---

## 2024-05-31 15:00:43 - general channel

**George**

it would involve recreating the log to get these updates in chronological order with the rest of the log items, ideally.



another thought - can the problem be solved by adding something into this function:

[https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/order/process.py#L79](https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/order/process.py#L79) ?

---

## 2024-05-31 14:19:18 - general channel

**George**

In Flumine, when an order changes its status, there is a very helpful log print here: [https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/order/order.py#L113](https://github.com/betcode-org/flumine/blob/0241aca36f751bf1e35c5f8d7242735d2f1a5687/flumine/order/order.py#L113) which prints out exactly what happened. I would like to capture that output in my logging.



However, when I use a `LoggingControl` to handle my logging, I am losing those updates. When I use `_process_order` it only tells me about new orders, and it does not cover status changes.



Is there a way to get those order status updates via the `LoggingControl`? If not, am I thinking about this in the wrong way?

---

## 2024-05-30 10:59:30 - general channel

**liam**

flumine 2.6.1 now available

---

## 2024-05-29 12:53:23 - general channel

**liam**

its currently pinned to 0.1.7 because I haven't updated/released a new version of flumine yet, so yes?

---

## 2024-05-29 12:45:10 - general channel

**liam**

flumine version?

---

## 2024-05-28 12:39:01 - general channel

**Ben**

can anyone help me get started with betconnect

---

## 2024-05-28 06:38:54 - strategies channel

**Andrew**

Good point. Misread your question somewhat. Silly me to assume closing out is profitable :blush: 

---

## 2024-05-27 14:24:26 - general channel

**foxwood**

Understand the question now ! No - your order does not go into the visible market book. I was talking about time of visibility of an order status change in market.blotter. Sorry for time waste !

---

## 2024-05-25 03:25:18 - strategies channel

**Adrian**

Thanks Troy! I am enjoying the lower minimum bets. It's helps keeping risk low

---

## 2024-05-24 13:55:52 - general channel

**George**

Just looking at the code for that function again...



The function doesn't appear to actually change the "size" if runner_book is a `RunnerBook` object?



It seems to just leave the size exactly as it was, without actually removing the size of the bet in question?



Does that make sense or am I going loopy?

---

## 2024-05-23 15:21:00 - general channel

**Lee**

you’re free to write your own simulation middleware, flumine makes things easy swap things around

---

## 2024-05-23 11:44:48 - general channel

**liam**

It’s a flumine specific optimisation 

---

## 2024-05-22 21:00:36 - general channel

**Dave**

But whether there is limited bandwidth per stream on Betfair's q is probably a question for them I reckon.

---

## 2024-05-19 21:35:11 - strategies channel

**foxwood**

[https://betcode-org.github.io/flumine](https://betcode-org.github.io/flumine) or something else ?

---

## 2024-05-19 12:31:23 - general channel

**Unknown**

Hello everyone, in the "API-NG Demonstration Tool" I tried on all endpoints and I couldn't find any that have this differentiation between games that are "Qualifying" just as there is this differentiation in the website menu. I need to filter only for games that are not of this type, could you help me with a way to achieve this result?



→ I use _*betfairlightweight*_

---

## 2024-05-17 22:58:40 - strategies channel

**thambie1**

[@U0128E7BEHW](@U0128E7BEHW) According to documentation: "The virtual price stream is updated ~150 m/s after non-virtual prices.". I would take that to mean, EX_BEST_OFFERS is sent out immediately after the matching cycle, and EX_BEST_OFFERS_DISP 150ms after that.

---

## 2024-05-17 13:21:13 - random channel

**V**

Anyone know how to raise the exposure limit on betfair?

---

## 2024-05-16 10:44:13 - issues channel

**Jorge**

Found my issue, the strategies were using different listener_kwargs and that caused the problem. They were using different markets too but that works well

---

## 2024-05-15 21:26:49 - random channel

**Jonjonjon**

Has anyone tried using a LLM with Flumine yet?

---

## 2024-05-15 16:58:23 - random channel

**Johnny**

I've been working on some RAG lately - getting into it still but trying stuff with Milvus, Langchain, and currently neo4j.  Not plugged flumine into it yet (I can lose my money easily enough without AI)

---

## 2024-05-15 14:07:57 - random channel

**Peter**

Just received a scarcely believable email from them suggesting that it might have been rejected because of technical issues at the time of the request. Fair enough.



But it then goes on to say that they "are only able to locate stuck/rejected withdrawals individually, and it is the customer's responsibility to inform us of any such issues regarding their accounts."



So basically if they have a technical problem, it's up to us to spot it, and until we do they'll hold on to the funds that they've already deducted from our accounts.

---

## 2024-05-15 08:37:14 - random channel

**PeterLe**

I read up a little on this yesterday, I understood that whilst 4o is faster, the responses may not be as good as the existing GPT4, so ill stick with that for now



Im surprised how much it knows about Flumine too



...makes you wonder what it will be like in a few years

---

## 2024-05-15 07:59:14 - random channel

**Justice**

When all this AI stuff first came out, I was one of those that thought it would allow every degenerate gambler to write sophisticated algorithms with ease and markets would become far more efficient.



Now I'm really not so sure. It's a useful tool that saves a lot of time. Imo it's a more efficient replacement to trawling through stack overflow posts (or god forbid actually posting a question on there) but there's no way you could create anything non-trivial if you didn't know what you were doing

---

## 2024-05-14 18:48:47 - random channel

**thambie1**

started with Revolut, worked perfectly until they shut it down. Used Halifax &amp; HSBC since. Both have stayed open, but had problems with large amount card withdrawal/deposits on both. Currently using 'Bank Transfer'

---

## 2024-05-14 18:13:32 - random channel

**Peter**

Wondering whether anybody else has been having problems withdrawing funds from Betfair?



I made a withdrawal 10 days ago that didn't arrive in my bank account, so I chased it. Today I've been informed that the withdrawal had been declined. I wasn't told this and to date haven't been given a reason - just a suggestion that I try again.



Worse, the funds had been taken from my account and weren't returned to it until I queried their non-arrival at my bank. This all feels very sketchy.

---

## 2024-05-12 14:49:02 - strategies channel

**James**

Also depending on which markets you’re in, and win volumes turnover can help with commission/implied commission and offsetting premium charge :slightly_smiling_face:

---

## 2024-05-12 11:14:40 - general channel

**Štefan**

The question is what you want to achieve, if cancelling bets which would at normal state would remained unmatched after  bet placement delay, then yes no heartbeat at registered time would lead to unmatched bet/s cancelation.

---

## 2024-05-11 19:11:01 - general channel

**Štefan**

It depends on what is common sense in Betfair staff who implemented heartbeat. I would make it so that after the heartbeat is lost, bets in queue should be refused, not only bets materialized in their bets system, I believe in the database when a bet is assigned bet id.

---

## 2024-05-10 11:13:29 - general channel

**Sarjil Patel**

I have been integrating betfair APIs in my application, but while fetching Events I have been getting few events who are basically a competition. For example there is competition with name "ICC World Cup", I am also getting an event with name "ICC World Cup". Another example is I have been getting event with Set1 in Tennis which is basically not a conventional event and I want to avoid that showing in my UI, how can I manage that. So basically I want to avoid showing events which are not conventional events like ICC World Cup, Set 1 etc. Can you please help me with how can I manage this and avoid getting events such as Set1, Set2, ICC World Cup etc.

---

## 2024-05-10 09:34:54 - strategies channel

**Unknown**

I think you just have to draw a balance between what's theoretically ideal and how things are in the real world. You can't start from scratch with new data every time you have a new idea and there's no data as good as real previous bets, so to some extent you're always "back fitting." The question is how you go about it and whether you stop to check your judgement with sensible tests of reasoning.

---

## 2024-05-08 21:25:10 - general channel

**liam**

Flumine can do whatever you want, not sure I really understand where you are with your ‘system’? Do you have something which is profitable or are you looking for something which is fully automated? 

---

## 2024-05-08 20:02:18 - general channel

**rmwesley**

First up, I am definitely *not* asking anyone what their strategies are. Plus, this may well have been asked before, but my Slack search history only goes back a few months.



I do OK-ish at a horse racing system based on form reading. All the data crunching and data presentation is automated which takes away any slog, but it is still manually intensive to evaluate more than a couple of races per evening. Therefore, I'd like to have a crack at something more systematized in flumine.



I'm struggling where to start in terms of system approach, so was wondering if people gravitated towards something in particular using flumine, e.g.



• purely statistical, e.g. bet the 2nd fav in every flat AW Class 3 race on the 3rd Sunday in May

• technical analysis, e.g. look for head-and-shoulders patterns, candlestick patterns etc. I'm guessing "no" for this, seeing some of the previous comments :-)

• backing / laying into previous support / resistance levels

Or are people generally still doing "stuff" outside flumine, e.g. compiling a tissue then using flumine to back runners outright if value odds can be found, or to arb a horse's odds if they think it will come in.



I guess it is all of the above, but it feels as though flumine's sweet spot is high-volume, low stake, low volatility systems (with high and low being subjective).



If I have committed a mortal sin even asking this, please delete it Liam.

---

## 2024-05-08 01:31:34 - strategies channel

**Ben Coleman**

I haven't run simulations on using flumine yet, I'll give that a go.

---

## 2024-05-07 12:57:53 - strategies channel

**liam**

This [https://github.com/betcode-org/flumine/blob/bfaa5def6dc66794f088d9e4fed539c3c3043926/flumine/execution/baseexecution.py#L43|one](https://github.com/betcode-org/flumine/blob/bfaa5def6dc66794f088d9e4fed539c3c3043926/flumine/execution/baseexecution.py#L43|one)

---

## 2024-05-07 07:25:51 - strategies channel

**liam**

First question, you mentioned in your DM that you are aus based, are you hosting in the UK?

---

## 2024-05-06 14:05:10 - general channel

**Adrian**

Yeah ok. I'll have to rethink how I'm doing this. Probably will have to look into using something you've already built that handles passing info in and out of flumine from external sources. In any case, thank you for your help Liam. Greatly appreciated as always!

---

## 2024-05-06 14:02:45 - general channel

**liam**

The problem is when it comes to simulating you are processing millions of updates which then get multiplied by the number of runners, so you can have one line like this which is ok on its own but suddenly becomes hours of CPU 

---

## 2024-05-05 21:09:34 - strategies channel

**Dave**

DC you need to take inspiration from Flumine's book building logic, you could probably bring that down a lot if using c++ !

---

## 2024-05-05 21:02:09 - strategies channel

**Dave**

We've had a similar conversation before btw so apologies if it sounds similar! Basically I generally see around 10ms from publish time to placement. I added a few extra strategies to my flumine instance and this went up to about 15ms across the strategies, with one showing even 30ms. So I was kinda surprised, when logic in process_market_book is only around 1.5ms. something's getting clogged up somewhere, which might not be unexpected if the additional strategies are ticking at the same time. So I started poking around in flumine internals to see how it spendsnits time, but form what I can see so far, most of the time before me seems to be network. Looks like flumine internals spend negligible part of this 10ms.

---

## 2024-05-05 18:58:16 - strategies channel

**liam**

Is this a loaded question?

---

## 2024-05-05 18:26:49 - strategies channel

**Dave**

has anyone done any benchmarking of flumine's processing time, in particular how much time is spent between a streaming msg being receieved, and process_market_book being called? would be very interested in any results/profiling outputs that can be shared

---

## 2024-05-05 11:45:02 - strategies channel

**ShaunW**

Why were they asking it for a winner rather than value? Ask a stupid question you get a stupid answer.

---

## 2024-05-03 15:17:29 - general channel

**liam**

Yeah I don’t understand the question tbh 

---

## 2024-05-02 19:52:11 - general channel

**A**

Ah just found this which might be suitable → [https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py)

---

## 2024-05-02 13:38:09 - general channel

**Adrian**

So i build an app that uses ML to predict winners. My problem is execution. I don't really know whether to take a price or offer a price. I'm struggling to get match on my offers and the taking prices seems to end up in me getting a bad deal. Any pointers?

---

## 2024-05-02 11:15:19 - random channel

**JL**

haha I don't know, you can get 10-20£ on back with not problem. Lay is a much worse though

---

## 2024-05-02 10:40:28 - random channel

**JL**

ah, it's for dynamic bet sizing

---

## 2024-04-30 20:55:35 - general channel

**birchy**

Ok, you've answered answered my underlying question. :wink:

---

## 2024-04-29 15:45:18 - issues channel

**Shashi Khaya**

I had thought that, I just wanted to check whether there was a more sophisticated way to do this, but I guess this can be done in post processing. Is it possible to get score data for tennis via streaming? or is polling the inplayservice API the best way to obtain this data from betfair?

---

## 2024-04-29 15:31:59 - issues channel

**Shashi Khaya**

I would like to see if there is anything readily available to extend this callback function to update the score rather than replace it. And if I need to write this logic, any guidance on how it would look in flumine would be greatly appreciated

---

## 2024-04-29 15:29:14 - issues channel

**liam**

Is that a question or are you happy?

---

## 2024-04-29 15:03:52 - issues channel

**Shashi Khaya**

Hi folks, is there anything in flumine that handles updating scores in tennis (via the poll inplay service example) or do I need to write that logic out myself? And if the latter is true, how should the logic be structured in flumine?

---

## 2024-04-29 08:40:36 - general channel

**Tarang Ambaliya**

database transaction

---

## 2024-04-29 08:39:56 - general channel

**Tarang Ambaliya**

yeah but that would be too many transactions per second right? And will increase with every other market that I add to the subscription. If anyone has already done and knows about it then it will help me.

---

## 2024-04-25 10:29:47 - general channel

**Mo**

I would say the answer to the original question is "yes" and that it's not the case that the only way is to use the in play service

---

## 2024-04-25 10:28:10 - general channel

**Mo**

Mate you wrote the code for it: [https://github.com/betcode-org/betfair/blame/master/betfairlightweight/endpoints/scores.py](https://github.com/betcode-org/betfair/blame/master/betfairlightweight/endpoints/scores.py)

---

## 2024-04-25 10:23:51 - general channel

**Unknown**

Let’s me rephrase, is it possible to create a score stream (similar to orders stream) rather calling In Play Service api every time I want to have a current score. Any help appreciated.

---

## 2024-04-25 10:19:46 - general channel

**Jorge**

Other question tho, if I run 2 flumine instances in separate scripts and they send orders to the same market. Would the market.blotter.get_exposures() be per instance or would it consider the whole market (both instances)?

---

## 2024-04-25 10:11:51 - general channel

**Jorge**

Orders sent by a different flumine instance would never appear in `market.blotter` ?

---

## 2024-04-23 16:57:14 - general channel

**alter_life**

Hi, is it possible to subscribe for score updates for tennis with betfairlightweight/flumine or the only way it is to call In Play Service api?

---

## 2024-04-23 13:36:11 - random channel

**Brad**

They do lean toward MS. Which is funny now that so much data is handled simply in python. The pyspark book is good. PySpark is starting to gain traction.

---

## 2024-04-23 13:09:29 - strategies channel

**liam**

[@UBS7QANF3](@UBS7QANF3) normally knows the answer to this question

---

## 2024-04-23 10:38:39 - general channel

**Aiyaj Khalani**

re: But you can filter in check_market_book based on your specific logic if you really need to



so anyway streaming is going to push updates for all the markets we have subscribed too, right?

---

## 2024-04-23 10:37:08 - general channel

**Ammar**

Streaming is “cheap” - you get one connection established per market filter you pass into the flumine instance (plus one for orders if you want it) 



The market filter can be as wide as you want (subject to number of markets at time of connection - where the default limit is 200 but you can ask BDP to raise that)

---

## 2024-04-22 15:03:18 - issues channel

**Dario Scardina**

I'm facing the same problem today. It has never happened to me before.

---

## 2024-04-22 08:16:28 - general channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|This](https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|This) what you are after?

---

## 2024-04-19 12:33:05 - general channel

**liam**

flumine accepts a list for `market_filter`

---

## 2024-04-19 11:29:15 - general channel

**Trex44**

Hey all, when using a simple market filter such as the one below for filtering by market_ids is there a way to update  all_selections (which is the list of market_ids) without having to restart the flumine instance?

```standard_filter = betfairlightweight.filters.streaming_market_filter(

        market_ids=all_selections

    )```



---

## 2024-04-18 22:33:09 - general channel

**JL**

the problem however is that `market.market_catalog` is `None` in that function for some reason

---

## 2024-04-18 18:24:23 - general channel

**Ralegh**

It’s a linear programming problem, you want to maximize your worst individual selection pnl. I.e maximize the utility function min(profit_on_win(stall 1), profit_on_win(stall 2),… for each stall) and your variables would be back/lay bet sizes on each selection. There’s a min bet size so you need two variables per price - place_bet? as 0 or 1 and bet_size between 1 and level size in the book. Then your final bet is place_bet?*bet_size. You’ll probably have to do some other shenanigans to go deeper in the book or you could just run a few iterations as long as one of your bets is = the size of a level and use the next level down in the next run. Haven’t implemented this myself though and I don’t know how betfairs approach works so take with a grain of salt.

---

## 2024-04-18 17:53:54 - general channel

**Massimo Abitante**

I want to ignore it but I need to save the old price by myself somewhere, exaclty as [@UQL0QDEKA](@UQL0QDEKA) did, otherwise how do I ignore it if I don't compare it with the old price?

If this old price is already stored somewhere, like in the MarketBookCache or something, it would save me some work + I won't store the same data in two places.

My question is: is there a way to print the content of the MarketBookCache?

---

## 2024-04-18 16:42:04 - general channel

**JL**

is the `process_new_market` function executed for all markets subscribed to when starting flumine? I want to be able to access information for all races, e.g. runners and trackname, that takes place that day when I start flumine

---

## 2024-04-18 13:49:44 - general channel

**Massimo Abitante**

Guys sorry I come back again but [@U4H19D1D2](@U4H19D1D2) take a look at these:



```{'id': '1.227726521', 'rc': [{'batl': [[0, 1.2, 51.86]], 'id': 15282695}]}

{'id': '1.227726521', 'rc': [{'batl': [[0, 1.2, 30.39]], 'id': 15282695}]}

{'id': '1.227726521', 'rc': [{'batl': [[0, 1.2, 17.24]], 'id': 15282695}]}```

I got these 3 streaming_updates. Only size has changed, no price change.

If I could access the cache that betfairlightweight stores somewhere, I could check the old price. How can I see the content of that cache? Is there a function to access it? I can't find it.

---

## 2024-04-18 07:52:42 - general channel

**Justice**

That's very fast indeed, is that using flumine to process the raw data?

---

## 2024-04-17 19:21:09 - general channel

**Justice**

How does everyone handle converting raw market data into point-in-time snapshots of the market for ingestion into a database? I usually save the market books from the stream directly as they're far easier to work with but I wanted to record raw data this time for redundancy.



For context, I am using flumine raw data stream to capture the data, record to a temp file, then move to a storage account once the market closes. The script that does this is running in a docker container on Azure.

---

## 2024-04-17 16:22:11 - general channel

**Unknown**

I think I found why I couldn't understand you [@U4H19D1D2](@U4H19D1D2).

I got confused because I was looking at the prices that I find in the "runners" element of the update (I set lightweight=True so I get the dictionary).

In those fields I get the current market prices so if price has not changed I will find the same price in all the updates I get.

Instead, as you [@U4H19D1D2](@U4H19D1D2) suggested, I have to look at the actual streaming_update. There only delta will be sent.

Got it so I don't actually need any comparison with old prices. If I get a price in batb or batl, that price must have been changed.

Thank you [@U4H19D1D2](@U4H19D1D2).

Thank you [@UQL0QDEKA](@UQL0QDEKA) , I think that comparison you make is not needed. I'll look better into it, anyway.

---

## 2024-04-17 15:57:24 - general channel

**Massimo Abitante**

It's a dumb question, I know, but I cant find the way to see what there's in that cache

---

## 2024-04-17 15:53:24 - general channel

**Massimo Abitante**

Yes but I get a streaming_update everytime the price or the size changes, I need to check if the price has changed or not. So I was thinking to use that "cache" that i see in betfairlightweight code, instead of creating my own dict where I save the price so I can compare it with the next streaming_update.

Is that cache accessible somehow?

---

## 2024-04-17 15:50:23 - general channel

**liam**

You can see the raw update in `market_book.streaming_update`

---

## 2024-04-17 15:49:01 - general channel

**liam**

What do you mean by 'I need to do some stuff only when prices change` because this is how streaming works

---

## 2024-04-17 15:33:41 - general channel

**Massimo Abitante**

*betfairlightweight/streaming/cache*

---

## 2024-04-17 11:05:21 - issues channel

**liam**

The benefits of [https://betcode-org.github.io/betfair/streaming/|streaming](https://betcode-org.github.io/betfair/streaming/|streaming), reading between the lines it seems you are trying to solve the 200 market limit? Ask betfair for a raise, record everything, don't add markets and don't add strategies when running

---

## 2024-04-17 09:57:41 - issues channel

**Ammar**

running multiple flumines from different threads seems to work …

---

## 2024-04-16 09:15:00 - random channel

**Paul**

Last week I had 2 x transatlantic flights which had to be filled, and 2 x nights in a Crowne Plaza next to a strip mall. That helped. The rest of the time is not so easy, but I prioritise reading over a lot of other stuff. I don’t do social media, I rarely (couple of times a month) play games, I can only code for so long, most TV is dull so I’m coding or reading while sat on the sofa with my partner… I commute a day or two a week and audio book or kindle my way through that

---

## 2024-04-16 00:53:14 - strategies channel

**Andrew**

Probably been answered before, but using Flumine what recommended specs of CPU and RAM for just a handful of strategies.

---

## 2024-04-15 14:43:42 - random channel

**D C**

I've a quick question about PC. Each time PC is taken, is it simply X% of your winnings per week (where X is your personal rate) minus your generated commission for that same week? If so, does it include things like the australian turnover charges?

---

## 2024-04-14 20:53:59 - strategies channel

**Ammar**

Thanks Foxwood! That’s super helpful, and yes does give me a better understanding around what I was asking and also to better understand the source code as well.

---

## 2024-04-13 19:08:02 - strategies channel

**Ammar**

yeah, granted.



my question (curiosity more than anything else) is more about what’s happening on the technical front — is the connection closed; or is it left to betfair to deal with, or is just hanging around still?

---

## 2024-04-13 15:12:53 - strategies channel

**Ammar**

does Flumine handle closing stream connections on closed markets? I’ve traced the code and can see that BaseFlumine cleans these up in terms of it’s internal objects; but just curious what it’s doing on the stream too?



(still learning the internals and reading as much of the existing / searchable threads on slack too)

---

## 2024-04-13 09:41:24 - strategies channel

**Chris**

Flumine sorry

---

## 2024-04-13 09:40:59 - strategies channel

**liam**

With betfair or flumine?

---

## 2024-04-12 13:55:59 - strategies channel

**river_shah**

But first, find value. A good staking plan will only help you maximize extractable value, it won't help in finding value

---

## 2024-04-12 09:11:52 - issues channel

**Matthew Lawrence**

So i'd have to pay for all the data to simulate via flumine

---

## 2024-04-09 19:31:30 - general channel

**Justice**

Advice taken. Is a custom stream the way to go to integrate my scuffed TPD data collection into flumine?

---

## 2024-04-09 18:05:57 - general channel

**Justice**

What would be the easiest way to start recording raw data using flumine once a certain condition is met? Should I use a worker to check against the condition then add the market to the framework? Or is there a better way of doing this? Forgive my ignorance, I'm not a native flumine user

---

## 2024-04-07 13:24:02 - general channel

**Justice**

I would love to just get the raw data directly without having to pay fortunes for commercial terms but oh well. The script runs on Azure, in the the UK South region, so it's not an internet problem

---

## 2024-04-07 12:53:41 - general channel

**Justice**

[@UUE6E1LA1](@UUE6E1LA1) I have to collect data through their approved vendors (Bet Angel) as I've had no success trying to get direct API access and have had no reply with regards to getting sports data access for my Betfair API key

---

## 2024-04-06 20:30:55 - general channel

**Justice**

A question for TPD folks on here. How common are missed updates? I've been collecting data for a few months and I've noticed that often the gaps between updates don't reflect the granularity of the data I should be receiving. This happens approx 1/100 updates according to my queries. By far the worst offender is Wolverhampton- there has been a pattern of missing updates every 10s:

```[2024-03-04 19:00:49 WRN] Data loss - received 19:00:48.800 - last received 19:00:48.200

[2024-03-04 19:00:59 WRN] Data loss - received 19:00:58.800 - last received 19:00:58.200

[2024-03-04 19:01:09 WRN] Data loss - received 19:01:08.800 - last received 19:01:08.400

[2024-03-04 19:01:19 WRN] Data loss - received 19:01:18.800 - last received 19:01:18.400

[2024-03-04 19:01:29 WRN] Data loss - received 19:01:28.800 - last received 19:01:28.200```

I am starting to become paranoid there is an issue my end. Is this normal or should I be investigating further?

---

## 2024-04-06 13:48:55 - random channel

**river_shah**

Almost feels like a bank exotics desk problem

---

## 2024-04-06 13:47:40 - random channel

**river_shah**

Ok so basically has to be a multi billion dollar bankroll to hedge this

---

## 2024-04-06 13:40:31 - random channel

**river_shah**

That is a very interesting quant problem

---

## 2024-04-06 12:15:23 - general channel

**Peter**

Extending [@U02RN7YDRQ9](@U02RN7YDRQ9)’s helpful advice ... my approach is to reduce all horse and greyhound names to lower case, remove any trap numbers, punctuation-like characters and the now lowercase (res) indicators and strip any remaining whitespace from the beginning and end, to create standardised names that match nicely to similarly standardised names from other data sources.

---

## 2024-04-04 17:54:59 - strategies channel

**liam**

flumine is designed to handle hundreds of strategies and unlimited markets, why complicate things? 

---

## 2024-04-04 12:21:21 - strategies channel

**liam**

Simulating using streaming data

---

## 2024-04-02 21:12:50 - random channel

**Jonjonjon**

Ah it suggested I put that into a script, and use crontab to run the script. It is working now. Thank you for taking the time to help me!

---

## 2024-04-02 20:52:02 - random channel

**Fab**

I suggest you use something like [http://phind.com|phind.com](http://phind.com|phind.com) to answer some questions to the AI.

---

## 2024-04-02 14:11:38 - general channel

**Michael**

You might want to consider how to give yourself a bit of comfort, just don't do it at the cost of your net profits.

---

## 2024-03-31 21:47:53 - general channel

**James Scott**

Do you need to buy a TPD license to get a 200ms connection with the Betfair api?

---

## 2024-03-30 14:42:43 - random channel

**ShaunW**

Focus on answering specific questions rather than all that 'various' scattergun stuff and youll be able to design a far more efficient extracts to work with. Sounds like a problem with your steering rather than horsepower.

---

## 2024-03-29 21:11:27 - random channel

**Jonjonjon**

I'm not sure what you're doing, but using Flumine to scan over and pick out bits of data (such as the full ladder at very minute for the last hour)  would take under 90 seconds on modern hardware.

---

## 2024-03-29 19:45:41 - issues channel

**Ammar**

yeh, noted - thanks.



literally my first attempt to use flumine today so hopefully will be ok once they enable streaming on the key :+1:

---

## 2024-03-29 13:29:05 - issues channel

**Ammar**

ahhh i have an old api key, so streaming access needs to be requested :shrug:

---

## 2024-03-29 13:29:00 - issues channel

**Paul**

It was a valid string in a nest of valid objects, but the string wasn't valid API input. Without a Streaming API linter it wasn't going to be obvious. The thing I missed was the "," wasn't syntax highlighted as out of the string. Needed more cups of tea, clearly...

---

## 2024-03-29 13:15:02 - issues channel

**Ammar**

that helps thanks!

---

## 2024-03-29 09:14:45 - issues channel

**Leo**

Using a linter is helpful for stuff like that 

---

## 2024-03-28 23:21:24 - general channel

**Adrian**

I found this. Hopefully can get it to work [https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py](https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py)

---

## 2024-03-28 23:13:05 - general channel

**Adrian**

Now to figure out how to add them to the markets

---

## 2024-03-28 12:41:45 - issues channel

**Mo**

OK, this is what I've done if anyone is interested:



```cm = (

    market.flumine.simulated_datetime.real_time()

    if config.simulated

    else contextlib.nullcontext()

)

with cm:

    ...```

---

## 2024-03-28 08:47:14 - issues channel

**Adrian**

MacOS Sonoma

Flumine is 2.5.3 (2023-11-06)

---

## 2024-03-27 21:19:48 - general channel

**liam**

Also you will be using streaming so there will be no need to add markets / restart etc 

---

## 2024-03-27 19:45:33 - general channel

**Ammar**

fundamentally, I can imagine a `flask` process running somewhere wrapping around `flumine` + some other functionality

---

## 2024-03-26 15:03:05 - general channel

**liam**

Is it not returned in any of these endpoints as well?



[https://github.com/betcode-org/betfair/blob/master/examples/exampleinplayservice.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleinplayservice.py)

---

## 2024-03-26 14:49:33 - general channel

**Brøndby IF**

I searched for keywords in the entire Betfair documentation and couldn't find anything about this either, I must be missing something.

---

## 2024-03-26 12:58:42 - issues channel

**liam**

its only in the simulation [https://github.com/betcode-org/flumine/blob/bfaa5def6dc66794f088d9e4fed539c3c3043926/flumine/simulation/simulation.py#L26|class](https://github.com/betcode-org/flumine/blob/bfaa5def6dc66794f088d9e4fed539c3c3043926/flumine/simulation/simulation.py#L26|class)

---

## 2024-03-26 09:04:01 - issues channel

**liam**

I use `market.flumine` but this probably needs to be changed to have a solid reference available

---

## 2024-03-26 08:16:09 - issues channel

**liam**

Missing docs on [https://github.com/betcode-org/flumine/issues/512|this](https://github.com/betcode-org/flumine/issues/512|this)



```with framework.simulated_datetime.real_time():

    print(datetime.datetime.utcnow())```

---

## 2024-03-26 07:25:13 - issues channel

**Mo**

I'm having trouble with flumine's patching of `datetime` when simulating; essentially I need to run a line of code with the patching undone. I think maybe this is possible using `SimulatedDateTime.real_time` as a context manager? Anyone got an example of this?

---

## 2024-03-25 16:59:25 - random channel

**Michael**

[@UUE6E1LA1](@UUE6E1LA1) I think that's what a lot of players look like (I know 'cause they dm me) and it's the essence of the problem that I'm getting at. Without seeing exactly what you're doing one can't be precise but my instinct just looking at what you're saying is that you should probably just rein it all in a bit. Bet where you know you're most profitable at slightly below what you hope is the optimum stake and if you want to try ideas to expand your opportunities then do it very minimally with the smallest stakes, tracking net profit against stake when/if you scale up. It doesn't pay to rush in this game, try stuff out very softly.

---

## 2024-03-25 16:49:42 - random channel

**Michael**

Ok so if you took it to an extreme then you could see total profits tail off if you demanded too much margin but in practice that's never the problem.

---

## 2024-03-25 15:42:01 - random channel

**liam**

I had to look that up, my comments are more to question the strategies / staking / analysis he is applying if pnl is volatile 

---

## 2024-03-25 14:25:55 - random channel

**ShaunW**

Assume nothing.. ,.it helped.

---

## 2024-03-25 14:02:18 - random channel

**ShaunW**

Thx [@UGV299K6H](@UGV299K6H), need to wrap my head round that. But lots of bets so results aren't fluctuating as much as I thought they might. Yes it's small vol, I haven't coded up the TPD stuff as it's not as simple for me as it is in Flumine.  %complete is all I need from it (obv so far it doesn't use data it wasn't getting) , but my duration algo isn't too bad as it is and it's early in the race so duration accuracy isn't a big deal.

---

## 2024-03-25 12:20:04 - random channel

**Michael**

I don't think that struggling to find value shorter than 2 needs to be a big problem, there's plenty of money elsewhere in the market. I would just focus on that and worry about shorter prices another time.

---

## 2024-03-24 01:14:11 - general channel

**Ben Coleman**

Hi all, I have a query about the way flumine handles a large running time of process_market_book and process_orders. If one of these functions is in the process running and in the interim another update occurs, does flumine just delay processing the new update and wait for the functions to finish running or does it try to handle both concurrently? Also slightly different question, what is the benefit of separating process_market_book and process_orders if they are only ever called at the same time anyway? At the moment I am placing trades and processing old trades in process_market_book and I'm wondering if it would more more time efficient to utilise process_orders as well.

---

## 2024-03-22 22:11:14 - random channel

**ShaunW**

I say flu-mean but it's Liam's word so his choice :wink:

Or.... How do you pronounce 'flumine' it's a faux Latin product name. 



ChatGPT

"Flumine," if treated as a Latin-derived word, would likely be pronounced with a classical Latin pronunciation, which could sound like "FLOO-mee-nay." However, given that it's a modern, faux Latin name, an Anglicized pronunciation like "FLOO-mine" might also be common. The choice often depends on the preference of the creators or the commonly accepted pronunciation among its users.

---

## 2024-03-22 16:42:28 - random channel

**Derek C**

someone should phone these people and see how they pronounce it when they answer: [https://pablobuttice.com/en/flumine-north-beach-miami/](https://pablobuttice.com/en/flumine-north-beach-miami/)

---

## 2024-03-22 14:20:07 - general channel

**Brøndby IF**

And [@U4H19D1D2](@U4H19D1D2) `price_ticks_away` of `flumine` is perfect :clap:

---

## 2024-03-22 14:14:30 - general channel

**Brøndby IF**

[@U4H19D1D2](@U4H19D1D2) I confess to you that the only reason is that I only read the chat, I didn't see it in the `utils` of `betfairlightweight` and as I was looking for something to pass the time doing something useful and I went to VSCode to write. It didn't occur to me to look at `flumine`. But it was worth it, I managed to clear my mind from work a little! Haha

---

## 2024-03-22 10:56:05 - random channel

**Johnny**

Does the name flumine rhyme with "blue - sign" or "blue - queen" or "thumb - inn" ... etc?

---

## 2024-03-22 06:25:33 - general channel

**liam**

Any reason you wouldn't just use flumine's version? It's optimised



```from flumine.utils import price_ticks_away```

---

## 2024-03-21 10:26:24 - random channel

**Johnny**

I've got HSBC Premier and just transfer a few grand in and out of it each month from other accounts, and have used it for crypto (directly) and betfair (via paypal).  Never had any questions asked

---

## 2024-03-21 08:55:11 - general channel

**liam**

Have you looked at what is available in `market.blotter`?



[https://github.com/betcode-org/flumine/blob/bfaa5def6dc66794f088d9e4fed539c3c3043926/flumine/markets/blotter.py#L161|code](https://github.com/betcode-org/flumine/blob/bfaa5def6dc66794f088d9e4fed539c3c3043926/flumine/markets/blotter.py#L161|code)

---

## 2024-03-20 17:47:34 - random channel

**ShaunW**

.... you'll get somewhere without being interested, but it undoubtedly helps if you are.

---

## 2024-03-20 17:21:55 - random channel

**Michael**

If you tell them that they will smell an opportunity, ask you a lot of questions and offer you all kinds of investment products. You can say "no thanks" but it'll extend the discussion. My bank account manager courtesy calls me periodically and I basically just get her off the phone as fast as I can as I don't want to talk about where my money comes from but I also don't want to get quizzed and look shifty trying to tell lies. Banks have been closing a lot of accounts recently on the slimmest of concerns because they're so worried about money laundering and proceeds of crime. Gambling is a real red flag for all that. My own policy is never to mislead, but also to keep a low profile. That and to keep accounts with a few different banks just in case.

---

## 2024-03-20 08:13:55 - general channel

**Mo**

OK good, race cards should be available for those



Example use of race card endpoint in betfairlightweight: [https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py)



You should probably adapt the market catalogue example middleware from flumine unless someone can just share a race card middleware with you: [https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py](https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py)



[@U4H19D1D2](@U4H19D1D2) worth adding a race card middleware example?

---

## 2024-03-19 10:11:06 - general channel

**James**

Thanks [@UBS7QANF3](@UBS7QANF3), thats probably enough to help me with the dev/testing cycle. I’ll start collecting them myself from here.

---

## 2024-03-19 10:10:08 - general channel

**James**

I’m just looking for a chunk of recent AU horse catalogues. I’m migrating some strategies from another framework and haven’t recorded any horse data on Flumine for back testing sake. I use the catalogue to get race distance and just want to be able to develop without having to wait for a real race.

---

## 2024-03-19 10:08:21 - general channel

**Mo**

Depending on what you need, [https://github.com/mberk/betfairmappings](https://github.com/mberk/betfairmappings) may help although desperately needs a refresh

---

## 2024-03-18 21:43:37 - general channel

**Michael**

There's no need to be like that the guy just asked for help.

---

## 2024-03-18 21:34:15 - general channel

**Testes Squads**

[@U01B8031PM1](@U01B8031PM1) There is no specific need, I just don't want to miss an investment opportunity just because I will need to buy 1 or 2 ticks below the current odds, because it will continue to have value. So if there is only 5k for example at odds 2.0 and the total I want to invest is 10k, there is no problem in buying the other 5k at odds 1.98

---

## 2024-03-18 21:33:43 - general channel

**Michael**

Just to re-frame [@U01B8031PM1](@U01B8031PM1)'s question a bit: Do you actively want to clear a few ticks on the ladder, or are you just trying to get your stake fully matched at the best price you can?

---

## 2024-03-18 21:20:53 - general channel

**river_shah**

I guess, I was being unhelpful. So in the interest of being helpful: Perhaps something is getting lost to me in the description on how you wish to execute, however it seems you are giving up a ton of value. So I would revisit exactly why you are executing the way you are before actually figuring out the technical part

---

## 2024-03-18 17:52:52 - general channel

**Testes Squads**

If by chance anyone has this function already created for personal use and would like to share it free of charge, I would also greatly appreciate the help!

---

## 2024-03-18 17:52:39 - general channel

**Testes Squads**

Hello everyone and thank you in advance for creating betfairlightweight, it is magnificent!

I would like to know if anyone is interested in giving me the budget for the work to create this function (I wasn't able to create it):



I need a `place_orders()` where I define the maximum value that should be used from my Betfair account, I define the `runner_id` and the function takes the value and invests it in `Back` immediately at the best odds that have values waiting to be matched on the market, if everything had matches and have stake left over, continue going down the ladder and invest at the odds below until there is nothing left of the desired value.

---

## 2024-03-17 09:45:55 - strategies channel

**Paul**

I think if you treat a Grade 1 race the same way as a sellers plate, and don’t expect any change in market structure, liquidity, volatility, or the accuracy of any fundamentals you might be considering, that that would be more of an amateur trait. And my original question was not about excitement, but whether strategies worked better, worse, or about the same. If you have something that works the same, fair enough.

---

## 2024-03-15 16:17:10 - general channel

**PeterLe**

Hi does this help :



```order = trade.create_order(

            side="LAY",

            order_type=LimitOrder(price, stake)

        )

        market.place_order(order)



def process_orders(self, market, orders):

    for order in orders:

        if order.status == OrderStatus.EXECUTABLE:

            if order.elapsed_seconds and order.elapsed_seconds &gt; 1.5:

                market.cancel_order(order)```



---

## 2024-03-15 15:14:20 - general channel

**Derek C**

process_orders is a good place for this logic, see the example: [https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py](https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py) which might meet your needs

---

## 2024-03-13 09:54:10 - general channel

**Unknown**

Any thoughts how to handle the Cheltenham race change times gracefully.



Races are delayed 15-25 minutes but neither bookmakers nor betfair can update the off times now. Code is making reference to this:

`market.seconds_to_start` in many places. Any idea how I could patch this to reflect true off time for the 4 Cheltenham races in question

---

## 2024-03-11 12:34:18 - random channel

**ShaunW**

You've got the same problem as the bingo addicts in the Gala advert, you're seeing references everywhere you look:wink:.

---

## 2024-03-11 11:36:17 - general channel

**Bruno**

I've tried using `streaming_timeout` , but I don't think this is what it's for?

---

## 2024-03-10 15:45:07 - issues channel

**Newbie99**

Interestingly changing my password resolved that

---

## 2024-03-10 14:37:39 - issues channel

**PeterLe**

Python 3.7?  Do you not need to upgrade that first? (3.11 has some benefits as i recall)

---

## 2024-03-10 14:24:26 - issues channel

**liam**

Bflw and flumine versions?

---

## 2024-03-10 06:10:13 - general channel

**RiskTaker5555**

Using Flumine, I can get selection_id but not runner name.

How to get runner name in streaming data ?

---

## 2024-03-09 15:33:05 - random channel

**Dave**

Only updated my flumine recently from 1.21.4 (2021 or early 2022 i think)...frightening experience to say the least. write good tests people !

---

## 2024-03-08 21:42:44 - random channel

**PeterLe**

hi Shaun, Yes i do those keys things but i couldnt find the logs for Flumine :grinning:

nice avatar! :grinning:

---

## 2024-03-08 17:10:10 - random channel

**PeterLe**

Quick question please: What maintenance if any should we be doing periodically on Flumine ?

Ie should we be clearing out logs etc as part of good practice; Anything else?

Thanks for any info/advice

Sorry for basic question! :confused:

---

## 2024-03-08 17:00:34 - general channel

**ShaunW**

No idea how you'd implement it in Flumine,but that seems like the basic principal.

---

## 2024-03-08 15:19:16 - general channel

**Derek C**

are you looking for something above and beyond what Flumine simulation does? [https://betcode-org.github.io/flumine/quickstart/#simulation](https://betcode-org.github.io/flumine/quickstart/#simulation)

---

## 2024-03-05 09:38:01 - issues channel

**river_shah**

Try this:

```from flumine.events.events import TerminationEvent

...

framework.handler_queue.put(TerminationEvent(framework))```

---

## 2024-03-05 01:12:44 - issues channel

**RiskTaker5555**

Hello,

Just quick one:

How to end flumine framework ?

Once it started using framework.run(), and then framework.stop() it continue streaming data and not stopping.

---

## 2024-03-03 18:41:08 - random channel

**Mo**

Can’t you easily answer this question with the data you scrape?

---

## 2024-03-02 21:51:20 - issues channel

**Jeff Waters**

Hi Paul.



I've just tried it again, and it worked this time. No idea what went wrong last time. Thanks for your help. :slightly_smiling_face:



EDIT:



I've just realised that the reason it's working is because, following your post, I changed my persistence type:



```order = trade.create_order(

    side="BACK",

    order_type=LimitOrder(price=10, size=2.00, persistence_type="MARKET_ON_CLOSE"),

)```

Cheers

---

## 2024-03-02 21:23:35 - issues channel

**liam**

That isn’t a response, it’s a flumine log telling you the order is pending, where is the rest of the logs? 

---

## 2024-03-01 20:20:38 - general channel

**liam**

I think you should be using the stream regardless tbh, HFT is just as prevalent pre play, it’s the simplicity / scalability that streaming allows which is the big perk 

---

## 2024-02-28 23:25:36 - strategies channel

**AndyL**

[https://betcode-org.github.io/flumine/advanced/#config](https://betcode-org.github.io/flumine/advanced/#config)

---

## 2024-02-28 23:24:52 - strategies channel

**AndyL**

[https://github.com/betcode-org/flumine/blob/d9b729d79af68042e859511be968bf649a938dc8/flumine/config.py#L26](https://github.com/betcode-org/flumine/blob/d9b729d79af68042e859511be968bf649a938dc8/flumine/config.py#L26)

---

## 2024-02-27 12:27:12 - issues channel

**foxwood**

[@U4H19D1D2](@U4H19D1D2) workaround seems to have solved the issue so raised on github #742

---

## 2024-02-26 09:50:46 - issues channel

**foxwood**

flumine or me ?

---

## 2024-02-26 07:58:13 - general channel

**Mo**

My apologies, I got confused. I don't use the `get_races` method. I don't even know what this is referring to as it doesn't exist in the betfairlightweight codebase

---

## 2024-02-25 12:45:27 - general channel

**Andrey Luiz Malheiros**

I'm doing exactly as shown in the example you sent to me. I tried using a market ID from a greyhound race that has a closed market and a market ID from a greyhound race that has an open market, but both returned empty results. I have read the Betfair documentation, and the `getRaces` method seems to be paid and works for horse racing. I think this information is available on the following link in the 'Personal Usage' section: [https://developer.betfair.com/en/get-started/#timeform-api|https://developer.betfair.com/en/get-started/#timeform-api](https://developer.betfair.com/en/get-started/#timeform-api|https://developer.betfair.com/en/get-started/#timeform-api)

---

## 2024-02-24 21:41:51 - general channel

**Trex44**

These are the only logs I have! I don't actually know how to record any other logs. Regardless of logs or strategies though, I didn't think that it would be possible to have a size matched of zero yet show a profit figure?

---

## 2024-02-24 20:00:26 - issues channel

**Pietro Perrone**

I managed guys, the only thing I need it was betfairlightweight/endpoints/historic.py

---

## 2024-02-23 23:16:04 - issues channel

**Pietro Perrone**

Hello all, I am trying to analyse odd movement (under/over) over time in the main European league’s football games.

I managed to run a script that produced many bz2 files corresponding to the games of Jan 2024.

Does anyone have experience on how to then open/clean/analyse the odds in Python?

I am only working with over/under 2.5 right now!

Thanks in advance

---

## 2024-02-21 18:48:00 - general channel

**Paul**

Use what you can be most productive in, which for a lot of people without coding history in any one language is likely to be flumine. :shrug: 

---

## 2024-02-21 17:53:39 - general channel

**D C**

When I was a researcher it was MATLAB that was king and most statisticians I knew were R people.  But now it seems that what I knew as "Applied Statistics" has been rebranded as AI and ML  and the self-proclaimed experts on Twitter advise on Python or R. I did try to use Python for GLMs but whatever I was using just didn't seem able to do what I needed so I stuck with R. R does seem a very ugly language but it does what I need so happy to put up with that.

---

## 2024-02-21 17:17:16 - general channel

**D C**

I definitely feel that knowledge in depth of one language makes learning a new one so much harder because you know what you WANT to happen but you need to get to a certain level of competence in the "new" language before you can even assess whether it is possible or not (eg passing function parameters by non-const reference - is there a Python equivalent to this C/C++ type mechanism??).

Maybe it is just me and the fact that my enthusiasm for coding has evaporated but this was the biggest obstacle for me when I was trying to learn Python (I had all sorts of trouble because of an assumption I made with how to use global variables in Python).

---

## 2024-02-21 15:19:40 - issues channel

**liam**

I imagine you will want to inherit `SimulatedExecution` instead however just stop, this isn't what you want to do so I am not going to help any further

---

## 2024-02-21 15:18:26 - issues channel

**liam**

```framework = FlumineSimulation()



client = clients.SimulatedClient(simulated_full_match=True, execution_cls=MentalExecution)

framework.add_client(client)



client.execution.custom_price = 911```

---

## 2024-02-21 14:56:27 - issues channel

**liam**

Like you would with any python class, however I don't understand why / what you are doing as there is very likely a better option



```class MentalExecution(BetfairExecution):

    def __init__(self, flumine, max_workers: int = MAX_EXECUTION_WORKERS):

        super(MentalExecution, self).__init__(flumine, max_workers)

        self.custom_price = None





client = clients.SimulatedClient(simulated_full_match=True, execution_cls=MentalExecution)

client.execution.custom_price = 911```

---

## 2024-02-21 14:46:36 - general channel

**D C**

A lot of it depends on motivation and attitudes. I was going to use flumine for simulation but ended up sticking with C++ just so I could reuse lots of my code base. I'm at an age and career point where learning a new language seems like a chore rather than something interesting to do. I readily admit I am seriously jaded and have little enthusiasm for programming anymore and grinding away in my preferred language was the "easier" option.

For someone fresh and enthusiastic though, flumine would be a great start - something that works and has the benefit of many users running it for hours on end and all source there for you to dig deeper if you wanted to.

I REALLY wish that flumine was about when I first started off but all we had back then were some examples on the Betfair API demo code pages. I remember my first ever Betfair bot was written in Perl - simply because the sample Perl bot code available was the best available on the old demo code pages.

---

## 2024-02-21 14:33:37 - general channel

**Paul**

Most of my sport stuff uses betfair lightweight, not flumine. I’m very, very odd though (even my Mum says so).

---

## 2024-02-21 14:33:17 - general channel

**Paul**

Quite a few people are writing their own stuff, partly because of familiarity with other languages. A lot of those people still seem to use flumine for collecting data because it’s (almost) plug and play, then do some back testing in flumine, then might end up running off and doing stuff elsewhere.

---

## 2024-02-21 14:08:31 - issues channel

**Al**

if the framework allows you to add your own execution, then it doesn't matter what I want to do in my execution. I just don't quite understand how to make a child class from BaseExecution with its init, which accepts the price, look at self.flumine, which is in the parent class

---

## 2024-02-21 12:45:46 - general channel

**Ralegh**

I’m rewriting in scala at the moment. I have a habit of blowing things up when they’re in python… Also I use quite a few different APIs and need more granular control over how messages are handled/recorded

---

## 2024-02-21 12:37:00 - general channel

**D C**

Are you just starting out or already using flumine?

---

## 2024-02-21 12:33:53 - general channel

**D C**

Yeah there are a few of us who have codebase that is not Python

---

## 2024-02-21 12:27:20 - general channel

**Tony**

i know this slack is about betcode/flu but does anyone not use the python stuff and maybe written their own in another language ?

---

## 2024-02-20 16:09:03 - strategies channel

**Mark Littlewood**

I have done some work on calibrated classification in Python but in terms of horse racing profit and loss did not find it produced much alpha, perhaps I should revisit this

---

## 2024-02-20 13:11:18 - general channel

**birchy**

Bloody hell, Fred77 is a blast from the past! We were in regular contact many years ago via a forum called DIYbetfairbots or something similar. We shared a fair bit of knowledge on our web scraping libraries which circumvented the 1 request per second "free API6". His was in PHP, mine was VB6 and then I started using python due to adoption of VPS. God, I feel old now. :grinning:

---

## 2024-02-20 13:11:06 - general channel

**Michael**

[@U016TGY3676](@U016TGY3676) have you had a look at the smartresig _[https://markatsmartersig.wordpress.com/2014/04/24/betfair-api-ng-session-9/|Betfair API-NG Session](https://markatsmartersig.wordpress.com/2014/04/24/betfair-api-ng-session-9/|Betfair API-NG Session)_ sessions? Is that code familiar at all? It'd be interesting to know the history of how everything joins up.

---

## 2024-02-20 12:37:57 - strategies channel

**foxwood**

Is there any way of reading the RaceStatus API info in flumine and/or an example of using it in betfairlightweight ?

---

## 2024-02-20 06:37:25 - general channel

**Mo**

[https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py|https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py|https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py)

---

## 2024-02-19 17:43:20 - random channel

**Paul**

It’s normally half a dozen, but still early days. Problem with bigger meets is getting them organised around content. Will discuss tomorrow a possible Spring meetup.

---

## 2024-02-19 09:58:55 - general channel

**Aiyaj Khalani**

Hey folks,

I was working with betfair stream and wanted to know how will betfairlightweight client will inform application if stream is closed due to session expiry?

---

## 2024-02-18 18:13:24 - general channel

**Trex44**

Well you can extract the price just before the game starts from BASIC files. Which would be fine for what I am doing as I am not trying to exploit the BSP in any way I just want the prices near or at the off. Only problem is is that the BASIC files are patchy and don't have a lot of  Match_Odd markets for some important matches in them.

---

## 2024-02-17 22:42:34 - random channel

**D C**

Yeah there was an update to include fence distances for jumps races. Can't seem to find the documentation anywhere. Must be on an old machine somewhere.

---

## 2024-02-17 08:58:39 - general channel

**Derek C**

I am not sure about your question. Flumine keeps track of which bets are being placed and the total exposure, which you can control with 'max_order_exposure' and 'max_selection_exposure'. There's nothing stopping you from placing multiple bets per second on the same runner if you want to, but these controls help stop you doing it by accident.

---

## 2024-02-16 19:56:47 - issues channel

**Ralegh**

You can pass a list of streaming_market_filters with different criteria and I believe each of those gets mapped onto a separate connection. I think you should be able to share them but only within the same script and you’d use one instance of flumine with multiple strategies added.

---

## 2024-02-16 10:21:27 - strategies channel

**foxwood**

[@UEA14GBRR](@UEA14GBRR) stats king :slightly_smiling_face: The bucketed graph does show a rough 100ms average - many thanks. I got there by averaging number of messages available (post flumine pre-processing) in last 120 seconds per market over a random day. Note to self - make more use of visualizations.

---

## 2024-02-16 09:17:44 - issues channel

**Al**

the stream is recorded using the betfair parser, without using flumine, some data is missing, I do not know Win or place, market_id = 1.214016755, country = GB. That's all there is

---

## 2024-02-16 08:12:28 - issues channel

**liam**

Is it a valid order size? Logs will tell you or there are some helper [https://github.com/betcode-org/flumine/blob/d9b729d79af68042e859511be968bf649a938dc8/flumine/utils.py#L133|functions](https://github.com/betcode-org/flumine/blob/d9b729d79af68042e859511be968bf649a938dc8/flumine/utils.py#L133|functions)

---

## 2024-02-16 08:11:17 - general channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/examples/example-sportsdata.py|examples](https://github.com/betcode-org/flumine/blob/master/examples/example-sportsdata.py|examples)

---

## 2024-02-16 08:10:52 - issues channel

**liam**

Use loggingcontrol as per the [https://github.com/betcode-org/flumine/tree/master/examples/controls|examples](https://github.com/betcode-org/flumine/tree/master/examples/controls|examples)

---

## 2024-02-16 01:22:27 - strategies channel

**Unknown**

This is what i'm getting [@U02RN7YDRQ9](@U02RN7YDRQ9).  Just one random winter day from 20s before the scheduled start. C#/SQL so an impartial comparision.  I'd guess we have the same number of change messages, I can't imagine Flumine letting many slip through the net.  16ms bands like my bet placement:thinking_face:, but two sets 4ms apart.

---

## 2024-02-15 22:48:58 - general channel

**PeterLe**

from flumine.markets.middleware import Middleware ?

---

## 2024-02-15 19:43:21 - general channel

**liam**

No keep separate so you can simulate using flumine middleware 

---

## 2024-02-15 19:04:57 - strategies channel

**Michael**

...it's also possible that I've got some sort of throttling turned on and never realised. Back in the days of polling you could poll faster than 100ms and get more updates but as far as I've ever experienced streaming you get 1 update close to 100ms during busy times. If it's less frequent than that then presumably that's because there's no change to post.

---

## 2024-02-15 18:18:41 - random channel

**D C**

I think maybe read the white paper - if it passes in the form it is in currently, then I see myself (any maybe others) having problems carrying on in this game. UKGC seem to want to base it all on losses rather than deposits but it that reverses we will all likely be fine. Fingers crossed anyway.

---

## 2024-02-15 17:41:32 - strategies channel

**foxwood**

Doing a sanity check on recorded data and streaming. From my recorded data I'm averaging about 9 - 10 calls per race-time second just prior to the off to `process_market_book()` - on dogs and horses. Does that sound reasonable ie just over 100ms per real packet ?

---

## 2024-02-15 16:42:33 - random channel

**D C**

Part of the motivation for my question is to look at ways to legitimately bet in other countries. I'm very concerned that the UK gambling industry is going to shit itself thanks to the interference from the UKGC. I regularly lose £1k + a day and without a job I will trigger one of these affordability checks. With no real employment, I will fail such a check and run the risk of having my account closed. I realise nothing is set in stone yet but I don't want to wait for it to happen before coming up with ideas to perpetuate my ability to keep on doing this.

---

## 2024-02-15 15:50:05 - strategies channel

**Unknown**

The problem is turning data into information... this extract from Bill Benters description of his method was enough to stop me trying to go down that rabbit hole :thinking_face:

---

## 2024-02-15 14:06:44 - issues channel

**liam**

Copy the [https://github.com/betcode-org/flumine/blob/d9b729d79af68042e859511be968bf649a938dc8/examples/strategies/lowestlayer.py#L46|example](https://github.com/betcode-org/flumine/blob/d9b729d79af68042e859511be968bf649a938dc8/examples/strategies/lowestlayer.py#L46|example) to handle it but change to `trade_count`

---

## 2024-02-14 15:01:36 - issues channel

**liam**

You don't have the data, its crap, why do you have this and not streaming data?

---

## 2024-02-14 14:55:30 - issues channel

**Al**

and if you add a custom function that will convert the csv file to json format, which is the case in the examples for the simulated client, the main data of which will be filled in, will this solve my problem?

---

## 2024-02-14 13:01:08 - issues channel

**Al**

I didn't quite understand how this solves my problem. I already have the data, but I need to use a ready-made csv with the above fields, not the files that are in the tests/resources directory/

---

## 2024-02-14 12:50:58 - strategies channel

**Peter**

Answered in the [https://betcode-org.slack.com/archives/C4H05ML2E/p1707912905736399|other thread where you posted this question](https://betcode-org.slack.com/archives/C4H05ML2E/p1707912905736399|other thread where you posted this question).

---

## 2024-02-13 19:28:02 - random channel

**AndyL**

Yeah me too, but it always generates a great conversation that question :-)

---

## 2024-02-13 19:21:53 - random channel

**AndyL**

Ooo [@UEA14GBRR](@UEA14GBRR) the question begs on how you measure turnover!!? Lay stake or liability….

---

## 2024-02-13 11:25:55 - random channel

**Javier Martín Pérez**

Yeah someone from Betfair told me they had produced such statements in the past and wouldn´t have a problem producing a new one, but that was around 2 years ago so not sure if that changed.

---

## 2024-02-12 18:19:30 - general channel

**Tony**

thanks [@UEA14GBRR](@UEA14GBRR) that is helpful. I've not got much use of chatgpt but might try

---

## 2024-02-12 14:56:22 - random channel

**ShaunW**

CS used to provide letters stating your PL but I'm not sure they do now.  What some do (incl me) is try to withdraw a regular monltly amount on the same day, although choosing a figure is hard when you know how it can fluctuate.  That regular income usually enough for basic checks but mortgages are a different prospect.



You say you suspect more will be required, suspicion might not turn into a problem. It's money laundering requirement so you just have to prove it's legal rather than proving its 'legitimate' in any way.

---

## 2024-02-12 13:41:10 - random channel

**D C**

I'll see how it pans out. If they want more and BF are unwilling to help out  then they can take it or leave it  I guess.

---

## 2024-02-12 13:32:41 - random channel

**Gooat**

Had the recent questionnaire from Vanguard? [@U4H19D1D2](@U4H19D1D2)

---

## 2024-02-12 13:19:31 - random channel

**D C**

This is an unusual question and I will try to keep it brief. Applied for mortgage with partner as an unemployed person (technicallly true). Large deposit, mortgage approved by lender no problem, but conveyancing solicitors want evidence of winnings from Betfair account. I've provided what I have (12 month P&amp;L screenshot from account and what account statement you can get from web pages) but I suspect that more evidence will be required.

I don't have an account manager, so could anyone suggest a contact within Betfair that I could try if I need something from them confirming profits?

Anyone else had this issue before?

---

## 2024-02-10 11:57:56 - general channel

**D C**

The whole point of streaming is for you to pass a filter that is sent one time only - then anything that satisfies it comes through automatically when new markets get created (that also satisfy the filter).

---

## 2024-02-10 11:57:48 - general channel

**Derek C**

this goes against the way that streaming works - generally you would subscribe to the markets you are interested in and just ignore the updates until within 30 minutes of start time.

---

## 2024-02-09 12:57:04 - random channel

**PeterLe**

Right I need to learn how to do that then :grinning:

( i have the notes set up already)

Thanks Liam

---

## 2024-02-09 12:24:08 - random channel

**liam**

Is this in reference to flumine Peter? As we use it to isolate individual running instances and not strategies 

---

## 2024-02-08 08:10:49 - general channel

**Tarang Ambaliya**

Hello everyone,



I came across the documentation that default betfair keys are only for personal use and we need commercial keys for commercial purpose. Just wanted to know that are there any limitations on the commercial keys like we have on the default keys (ex: only 10 concurrent streaming connections can be done).



Thank you.

---

## 2024-02-07 06:21:35 - strategies channel

**James**

Okay, maybe this is where my mistake is. 2 questions In that situation [@U01PJ5YMFBJ](@U01PJ5YMFBJ) |



When the bet lapses or is cancelled, does it not move to EXECUTION_COMPLETE?



and does size_remaining stay the same even if it lapses? I assumed that when cancelled/lasped size_remaining would be set to 0 at that point in time. Is that assumption wrong? Should I be checking every combination of lapsed, voided, and cancelled to check that my bet is “done”



Also in the example above the bet is a full match.

---

## 2024-02-06 14:59:58 - general channel

**D C**

Well if BF says it's gone through sounds like a problem at the bank end?

---

## 2024-02-06 14:59:25 - general channel

**Tony**

i have had that from alot of folks :joy: doesnt help

---

## 2024-02-05 21:58:41 - strategies channel

**Lee**

Probably gonna need to see flumine logs

---

## 2024-02-05 08:34:27 - issues channel

**Derek C**

Are you not using Flumine? It might save you a lot of time if you are planning to build your own bet placement app.

---

## 2024-02-04 17:32:29 - general channel

**Jeff Waters**

Hi



Up till now, I've used Flumine for backtesting system ideas. I'm now exploring how to use it for placing bets and creating my own JSON files.



Is it advisable to use multi-processing, or will one process be able to comfortably process multiple streaming markets simultaneously?



If I'm recording JSON files as well as monitoring markets and placing bets in them, is it recommended to have a separate thread or process for each activity? Also, does each market I'm logging JSON for need its own thread?



Thanks in advance.

---

## 2024-02-04 09:28:10 - strategies channel

**Leo**

Looking for some suggestions on reading materials (books/blogs/papers) on price action based strategies in this space. Been working on fundamentals based stuff for a while and would like to start diving into more price action/in play stuff but honestly not even sure where to start in finding an edge. Not expecting anyone to give away their secret sauce but any resources appreciated, the more technical and specific the better! Google isn't much help with these things with their SEO optimised rubbish 

---

## 2024-02-03 12:27:26 - random channel

**Herugrim**

It’s just NSW tracks that are the problem for both awful MBR and turnover charge. They’ll have an MBR of 10. The rest of Aus is 7. 

---

## 2024-02-02 08:15:23 - general channel

**Jorge**

Hi guys! In flumine/betfairlightweight, how is the `market_book.runners[0].ex.traded_volume` filled? I thought it contained the traded history in the runner but sometimes I see it empty

---

## 2024-02-01 17:17:54 - general channel

**thambie1**

Different IP restrictions for different account geos. Had an IP that was mistakenly showing as from the US which was causing problems for me as a UK account holder

---

## 2024-02-01 13:14:16 - issues channel

**D C**

It's odd because I've never worked out how to login without a certificate (other than manually to the website of course)

---

## 2024-02-01 08:34:53 - general channel

**Jorge**

Hi guys! Is my understanding correct that in flumine a [https://github.com/betcode-org/flumine/blob/master/flumine/order/ordertype.py#L104C7-L104C25|MarketOnCloseOrder](https://github.com/betcode-org/flumine/blob/master/flumine/order/ordertype.py#L104C7-L104C25|MarketOnCloseOrder) will be simulated/placed at SP price? And a [https://github.com/betcode-org/flumine/blob/master/flumine/order/ordertype.py#L77|LimitOnCloseOrder](https://github.com/betcode-org/flumine/blob/master/flumine/order/ordertype.py#L77|LimitOnCloseOrder) will only be matched if the SP price is better than the one provided? I didn't know LIMIT_ON_CLOSE existed in betfair, that's quite cool:smile:

---

## 2024-01-30 19:53:33 - general channel

**casper**

Hey guys, I’ve just started looking at setting up the CricketStream. The _subscribe_to_cricket_matches_() function doesn’t seem to be taking in the usual _initial_clk_ and _clk_ parameters used in the _subscribe_to_markets_/_subscribe_to_orders_ for reconnect. Why is that?

[https://github.com/betcode-org/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L191](https://github.com/betcode-org/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L191)

---

## 2024-01-30 08:12:49 - general channel

**Ralegh**

I’ve just got

streaming_market_filter([

event_type_ids =[…],

‘market_types=[…],

])

---

## 2024-01-30 08:10:19 - general channel

**liam**

logic [https://github.com/betcode-org/flumine/blob/101470b0d2d5c0aecaa68cc76a2057d8b064bb04/flumine/streams/streams.py#L94|here](https://github.com/betcode-org/flumine/blob/101470b0d2d5c0aecaa68cc76a2057d8b064bb04/flumine/streams/streams.py#L94|here), what do your filters look like?

---

## 2024-01-30 08:08:58 - general channel

**liam**

if the filter is the same flumine will do this automatically

---

## 2024-01-29 10:26:28 - general channel

**D C**

Yeah the notion of what defines "success" in this regard is probably down to the circumstances of who asks the question. I know when I was employed, that I'd happily take an extra £1K a month tax free on my wages. Wouldn't make you a big fish but if you're making any profit consistently you are doing well IMO

---

## 2024-01-29 10:03:27 - general channel

**Jonjonjon**

If it's from genuine edge, then it represents a starting point for continual improvements, that might lead to the big bucks.



The problem with most educational material out there is just that it's worthless.

---

## 2024-01-29 09:50:00 - general channel

**Michael**

[@U01S1VB9X9P](@U01S1VB9X9P): To answer your question directly, I would say that  £1 per market is a small profit and is is easy to the point of being trivial. That should be possible with the most basic strategies,. Scaling that to £5 per market does require a bit of nouse, and either some smart analysis or a bit of original thinking, £20-50 per market is quite difficult, but it does make you a proper professional, albeit not the highest rank, and £100 is properly hard. If you can average more than that you're in a very select group.



Obviously it's more complex that that, some types of markets are more friendly than others and it depends what data you have access to and so on, but I wanted just to give you some simple numbers, so that's where I'm putting them.



Winning any amount is great and £1000 a month is terrific if you were previously making zero. When people talk about the difficulty of scaling they really mean that you shouldn't just project multiples of whatever you are winning into the future, and especially that you can't expect your profits to scale with your stakes.



It's worth saying as well that market conditions wax and wayne even if you stay the same or continually improve. Stuff comes along, best ex,  streaming, TPD, Covid,, whatever's next. Sometimes your ship comes in and sometimes it doesn't.

---

## 2024-01-28 21:07:03 - random channel

**liam**

Doesn’t really answer your question but the price is different enough between scheduled and actual BSP that I doubt it’s that accurate 

---

## 2024-01-28 20:52:14 - general channel

**NAS**

I'm running a trade where i want to trade certain selections back and forth up until post time



First tried to implement this logic within process_orders, but seems like that method isn't called on a regular basis (only on betfair order events) so i'm stuck with the code not being run, which is ofc causing problems. idea was to call order.trade for each order and then work with the Trade object if certain conditions were satisfied. Is there a trivial way to have this run every 60s or so using workers?



Then thought the solution would be to move the logic to the process_market_book, but again experiencing problems. Can't retrieve the full Trade object that holds all the orders etc, all I get is a bunch of strings with tradeIDs when calling runner_context.trades. Is there a way to get the Trade Object if in possession of the tradeID?

---

## 2024-01-28 19:19:12 - strategies channel

**D C**

I guess this a bigger problem for those who have BPE turned off?

---

## 2024-01-28 15:35:14 - general channel

**JazzMan**

I'm 63, so it wasn't a problem for me to retire

---

## 2024-01-28 08:37:20 - general channel

**liam**

He had the worst personality traits for a gambler, I can only assume the big bankroll didn’t survive 

---

## 2024-01-28 08:20:52 - general channel

**Jonjonjon**

This question probably depends on user. I've got something that generates about £1k per year. Every time I increase the size it starts losing. If I reduce the size it starts winning again.

---

## 2024-01-27 11:25:35 - strategies channel

**D C**

Yeah I would have used flumine but I've so much of my own code base and largely unfamiliar with python so i thought would be quicker to roll out my own. Not sure I made the right decision there though....

---

## 2024-01-27 11:08:15 - general channel

**Finn**

I don't really know how to use discord but I think this a link that only members can see. Could you find an invite somehow?

---

## 2024-01-27 04:29:56 - general channel

**Unknown**

I'm trying to track down this section in the betfair api

---

## 2024-01-26 14:41:26 - strategies channel

**ShaunW**

Can't remember [@UUE6E1LA1](@UUE6E1LA1) I haven't looked at that code for years. It seems pretty fundamental so (not being a flumine user) I'd imagine it's functionality that's already catered for somehow. You couldn't backtest without it.

---

## 2024-01-26 14:38:29 - strategies channel

**D C**

OK, so let's say your pending bet is asking to back a runner at 3.0 for £20. At time you simulate the bet hitting the market, there is £25 available at 3.0 so you have a full match and £5 remains at 3.0.  In reality though,  nothing WAS matched. 2 seconds later, the volume available comes in at £30 at 3.0. This overwrites the simulated adjustment of £5 available to £30. So for later bets, you could be recounting that as excess money available. You've only removed it in the sense of matching pending bets at the time they enter the market.

Is there actually a way to accurately counter this problem?

---

## 2024-01-26 13:43:26 - general channel

**jnik**

Yes I know python

---

## 2024-01-26 13:43:04 - strategies channel

**Mo**

Not flumine specific but use a cooldown per selection per side during which time you're not allowed to place another bet. In the extreme case, you only allow one bet per selection per side per market. i.e. infinite cooldown



If you are OK with simulating with best price execution turned off then you could further key the cooldown by price to allow you to take different prices on the same selection/side combo

---

## 2024-01-26 13:42:01 - general channel

**Mo**

Do you know Python?

---

## 2024-01-25 20:22:31 - issues channel

**Lee**

what flumine version are you running?

---

## 2024-01-25 08:58:33 - general channel

**liam**

The flumine way is not to close :wink:



`process_orders` is for processing orders or you can access them via `market.blotter` [https://betcode-org.github.io/flumine/markets/#blotter|docs](https://betcode-org.github.io/flumine/markets/#blotter|docs) 100% use the blotter as its efficient and designed exactly for this



The lookup is `(market_id, selection_id, handicap)`

---

## 2024-01-24 21:32:14 - issues channel

**liam**

Bflw won’t uncompressed the file, use smart open 

---

## 2024-01-24 10:54:27 - general channel

**Aiyaj Khalani**

its not just about couple of seconds but i am getting completely different results from streaming APi than its showing on betfair website

---

## 2024-01-23 11:08:22 - strategies channel

**Bert Raven**

stupid question, but is your cumulative profit laying when ev&lt;0 and does it look dramatically different when you look at average per bet, ie you're likely to have a lot fewer bets in the extremes than in the middle?

---

## 2024-01-23 08:49:11 - general channel

**liam**

Not really, what you are doing will cause issues, why are you doing this? Flumine is designed to use loggingcontrol to log/store order data

---

## 2024-01-22 16:15:11 - random channel

**Jonjonjon**

What is RTT? The numbers are from a Flumine log file.

---

## 2024-01-20 23:06:55 - random channel

**Ralegh**

That’s bizarre, did anyone tell them you can run python without an ide?

---

## 2024-01-19 22:01:19 - strategies channel

**birchy**

Oh no, what have I started? :man-facepalming: :grinning: 

Looks like [@UBS7QANF3](@UBS7QANF3) does it the same way that I do, although [@U05L8PZD2FM](@U05L8PZD2FM)'s method also seems sensible. My thinking was to treat it like a financial investment where I've risked X and have return Y, therefore return is `profit / risk`. Ultimately bankroll growth is the bottom line.

---

## 2024-01-19 16:38:01 - strategies channel

**Joe**

probably to answer [@U016TGY3676](@U016TGY3676) question a sensible measure that can be used to compare two strats irrespective of what sides you bet on is

```sum(net_profit)/sum(matched_payout)```

---

## 2024-01-19 13:04:52 - random channel

**birchy**

The streaming stuff would be through a socket, so http client (like python requests) would only be used for polling stuff like login, get balance, etc?

---

## 2024-01-19 12:12:29 - general channel

**Derek C**

Using the logging control in Flumine is probably the best place to start?

---

## 2024-01-17 11:26:29 - general channel

**Michael**

The other thing about starting out without expecting to earn a living is that you'll probably begin with minimal stakes and be happy with small profits. It's quite easy to make a positive return that way, scaling small profits into large profits is a far harder problem.

---

## 2024-01-16 18:06:25 - general channel

**foxwood**

Based on lots of time creep throughout the day on different windows systems, I now always sync time every hour using task scheduler. Helps eliminate that possibility.

---

## 2024-01-16 18:05:40 - issues channel

**Derek C**

just to 'fess up here in case it helps somebody else. When upgrading Flumine versions I had missed the introduction of 'check_sports_data' defaulting to return 'False' - without creating a new method that returns 'True' no TPD data gets through to the process method :grimacing:

---

## 2024-01-16 13:30:01 - random channel

**Greg martin**

Hi all just joined the slack group. The free version of Slack only lets me see how to 90 days of previous messages. 



How do I see the archive of messages in the group? Slack premium? How do I pay/sign up for that etc 

---

## 2024-01-15 21:00:54 - random channel

**liam**

Yep, the basics in how to calculate probability (correctly) is something I am missing and sites like this make it very easy 

---

## 2024-01-15 10:06:17 - issues channel

**liam**

When it comes to placing orders, flumine is smart, it uses the transaction class, see the [https://betcode-org.github.io/flumine/markets/#transaction|docs](https://betcode-org.github.io/flumine/markets/#transaction|docs) on how you can send all orders at once

---

## 2024-01-15 07:57:45 - general channel

**Mo**

Yes they do but the documentation appears not to be publicly available. Ask BDP

---

## 2024-01-14 23:47:21 - general channel

**Matthieu Labour**

Hi Mo, does betfair offer a documented official scores endpoint for tennis? I could not find documentation on it. If not, what sources/services do people use and are folks piping those streams into flumine? Or do folks infer the score from Set and Game and Point markets when they get suspended ?

---

## 2024-01-14 15:14:18 - issues channel

**Derek C**

The reason I am at this point is because I do not see any TPD data via Flumine, only via non-Flu mine strategies and I'm trying to track down the root cause of that.

---

## 2024-01-14 15:08:22 - issues channel

**Mo**

Surely also depends on what version of bflw you’re running?

---

## 2024-01-11 09:21:28 - general channel

**D C**

I think Betfair provide 10 connections by default but you could easily find out how many you have by testing it (I know some people here have 20 - I personally have 10).

I've seen people post here that their request for increase from 200 to 1000 markets were refused. I suspect that things might depend on when you obtained your key. I'd suggest asking Betfair what your limits are (or finding out yourself with suitably chosen market filters), work out if you REALLY do need more and then ask Betfair the question if you do need more.

---

## 2024-01-11 02:34:08 - general channel

**Matthieu Labour**

Hello, few questions about connections. How many betfair connections does one flumine instance use?

How many connections does betfair provide per realtime key by default?

Is it easy to get betfair to increase that number of connections?

I believe they provide 200 markets by default per connection and one can ask betfair to increase to 1000 markets per connection.

For Soccer, does someone have experience in the number of connections and markets required? I saw 4800 markets for 336 events in the 5 upcoming days.

---

## 2024-01-09 08:27:26 - random channel

**Jonjonjon**

I run them under a single Flumine instance

---

## 2024-01-06 11:05:14 - random channel

**PeterLe**

What would be the maximum number of strategies you would consider running in flumine? (Strategies that place a high number of bets on a single account)

would it be better to run less strategies on more instances? Thanks

---

## 2024-01-05 21:47:44 - issues channel

**birchy**

[@U02CYRC190R](@U02CYRC190R) there are also a few functions in `market.blotter` that I use... [https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/markets/blotter.py#L74|https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/markets/blotter.py#L74](https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/markets/blotter.py#L74|https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/markets/blotter.py#L74)

---

## 2024-01-05 17:36:47 - issues channel

**Mo**

[@UNW8Q88EL](@UNW8Q88EL) can you clarify what the session timeout is for Sweden as this behaviour would seem to contradict the documentation

---

## 2024-01-05 17:35:11 - issues channel

**NAS**

Yep, seems to have solved it, thanks

---

## 2024-01-05 09:43:13 - issues channel

**Jimmy**

Daft question alert: What’s the most Flumine-y way of checking for unmatched orders in check_market_book?

---

## 2024-01-04 08:17:09 - general channel

**Tarang Ambaliya**

Hello, I have one query,



I am logging in before starting the stream in a long running task.

Will the session token expire during streaming, so i have to explicitly handle that?

---

## 2024-01-03 17:39:21 - general channel

**Trex44**

Is there an easy way in flumine to bring up the last traded size for a runner?

---

## 2024-01-03 13:45:14 - general channel

**Ricky**

I have another question related to gathering data from streams: Is there a way to filter the data stream on a time range? I would like to stream price data for all events of a certain type but only from e.g. a few hours before event start.

---

## 2024-01-03 11:24:37 - general channel

**Trex44**

Fair enough but I assumed you would be one of the last to go, had assumed you had good edge and lots of strats given how knowledgable you are with Flumine. If you are worried about that then maybe we all should be! I have considered just focusing on financial markets in light of the affordability checks and what they are likely to do to the liquidity.

---

## 2024-01-02 16:00:31 - general channel

**Derek C**

I can't answer your question, but a lot of us are collecting our own data: [https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py)

---

## 2023-12-29 14:46:05 - random channel

**AndyL**

[@U053KV09FKP](@U053KV09FKP) I prefer the "fail fast" approach, although saying that i've recorded 2 years worth of data now, and have developed lots of useful Python bits and pieces, so if I have an "idea" or "whim" I can throw something together quickly (say 1 hour) and churn it through a month's worth of data in the Simulator, then see what it shows me... Analysis of what it shows me is also key. That's my 2cents, i'm only a minnow in this game though!

---

## 2023-12-29 11:08:11 - strategies channel

**Derek C**

My best guess is that some issue caused the gz files to get corrupted, so that when my Flumine backtester reads them some initial data is lost:

• My usual archive utility cannot open the 'bad' files, I have to use a different one.

• The bad files are all from the same day, all Tennis, all recorded within a few hours of each other (Feb 2023)

---

## 2023-12-29 09:25:11 - strategies channel

**Derek C**

I had a similar issue with just a very few files - no 'marketdefinition' in the first line of json, which breaks Flumine backtesting. Never got to the bottom of what caused it.

---

## 2023-12-29 01:32:02 - strategies channel

**Andrey Luiz Malheiros**

Hey guys.

I believe I'm having some issue with my market records. The first line of recorded file should be something containing 'marketDefinition' within 'mc', but that's not happening, so ultimately my market records are missing the initial 'marketDefinition' information.

Has anyone encountered this or knows how to resolve it?

---

## 2023-12-27 13:45:42 - issues channel

**Alejandro Pablos Sánchez**

It's already solved, thanks ! [@UBS7QANF3](@UBS7QANF3)

---

## 2023-12-24 09:33:54 - strategies channel

**Paul**

Yeah. Somebody here once claimed it was a syndicate that he was once did some work for. Guaranteed, timed price volatility is helpful.

---

## 2023-12-22 12:31:03 - issues channel

**Peter**

Betfairlightweight has a list_currency_rates method, so that would be available to the Betfair client that you pass into Flumine, but Flumine doesn't attempt to make any use of it. You'd need to implement according to your use case.

---

## 2023-12-22 08:16:07 - issues channel

**Mo**

[https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API#ExchangeStreamAPI-CurrencySupport](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API#ExchangeStreamAPI-CurrencySupport)



Not sure if there is any automatic support in flumine for carrying out the conversion

---

## 2023-12-22 00:18:40 - issues channel

**NAS**

Flumine defaults to GBP, is there a way to change this when setting up the clients? Also, where does the conversion to my local account currency happen if sending orders with flumine?



Edit: seems like my personal orders are denominated and executed in local currency, but the data from the streams shown in GBP. currently storing and using the currency rate in flumine context but if there's a better way to automatically convert stream data into my currency i'd be happy to hear about it. Thanks! :)

---

## 2023-12-21 16:54:02 - strategies channel

**JazzMan**

Has anybody ever tried manipuling the weight of market by placing large amounts, (&gt;£2,000) then cancelling after a few seconds. This could confuse Weight of Money type bots. Would Betfair have a problem with this?

---

## 2023-12-18 14:53:25 - general channel

**Peter**

[https://betcode-org.github.io/faq/developing-and-testing-strategies/|Betcode FAQ](https://betcode-org.github.io/faq/developing-and-testing-strategies/|Betcode FAQ) (2nd question)

---

## 2023-12-14 16:20:11 - random channel

**D C**

[@U4H19D1D2](@U4H19D1D2) does flumine attempt to adjust the position in queue values based on reductions in ATL/ATB ladders due to cancellations rather than matches in the traded amounts deltas ?

---

## 2023-12-14 10:27:21 - general channel

**Johnny Boston**

```flumine==2.2.3```

---

## 2023-12-14 10:26:18 - general channel

**liam**

flumine version?

---

## 2023-12-14 10:20:03 - general channel

**liam**

100% they should, yeah whatever you aren't telling me is the problem

---

## 2023-12-14 10:07:14 - random channel

**liam**

Yeah that happens [https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/simulation/simulatedorder.py#L64|here](https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/simulation/simulatedorder.py#L64|here) along with lots of other stuff to further replicate betfair settings/bet options/piq

---

## 2023-12-14 09:16:52 - general channel

**Johnny Boston**

Hey, If I am using *`LoggingControl`* should I expect to see a 1:1 match of *`_process_cleared_orders_meta`* orders and *`_process_cleared_orders`* ?



• I am noting that *`_process_cleared_orders_meta`* has 10x the amount of orders data than *`_process_cleared_orders`* 

• by filtering for `order.cleared_order` I approximately, get more of a match, but not that close

What am I missing here? I am using the exact example from *[https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|here](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|here)*

---

## 2023-12-14 08:26:16 - random channel

**liam**

[https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/markets/middleware.py#L182|here](https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/markets/middleware.py#L182|here) and [https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/simulation/simulatedorder.py#L36|here](https://github.com/betcode-org/flumine/blob/bc07dd69870f368ccb5a8186fbf59206fa8f4313/flumine/simulation/simulatedorder.py#L36|here)

---

## 2023-12-13 22:16:42 - random channel

**D C**

Could anyone be so kind as to point me to the file that deals with simulating the matching of unmatched orders in the flumine repo?

---

## 2023-12-13 09:49:51 - strategies channel

**liam**

Whats the problem?

---

## 2023-12-13 08:24:32 - strategies channel

**PeterLe**

Great thanks both for your help :+1: 

---

## 2023-12-12 21:32:26 - strategies channel

**PeterLe**

sorry dont know Derek. (My python knowledge is basic) :confused:

---

## 2023-12-12 13:16:41 - general channel

**Justice**

I also use my own IDs. You can match runners within a race using the cloth number, which you can get from the betfair api by asking for the runner metadata.

---

## 2023-12-12 12:23:12 - random channel

**D C**

Interesting. I don't think it boils down to the amount of people who have access, rather the amount of those that know how to use it properly. Same goes for TPD - now its integrated into Bet Angel/GrussBetMover (and a lot cheaper than it used to be) I'd expected to see profits diminish but that has not happened.

---

## 2023-12-12 09:18:01 - strategies channel

**liam**

[https://github.com/betcode-org/flumine/blob/125c18a11881359eb795b248b74838e858d14fc6/flumine/streams/streams.py#L94|logic](https://github.com/betcode-org/flumine/blob/125c18a11881359eb795b248b74838e858d14fc6/flumine/streams/streams.py#L94|logic)

---

## 2023-12-12 00:15:18 - issues channel

**JazzMan**

It's not liquidity, if anything there seems to be less being matched these day. I have an old database from 2015, which I have just looked at. Its the fact that my strategies from a few years ago no longer work, and it's always been like that. The prices just don't move the same way. The prices get stuck at 6.00, and rotate around 5.9 6.0 6.2, in the past there was more movement . My personal view is that strategies that worked a few years ago don't now.

---

## 2023-12-10 18:18:01 - random channel

**Paul**

However, in bigger firms you need to first get past recruiters, and they're about as unimaginative as you'd expect. I'd consider putting more of the skills down and just put yourself down as "self-employed", and say you were working on your own thing for a while, indie-hacker style. You can be honest with the hiring manager (and I'd encourage you to be so), but the recruiters are normally risk averse unless you have a very niche skill (e.g. right now you could be a felon having just done 5 years inside, but if you know how to build an LLM, you're getting an interview loop at MSFT, GOOG, META or AMZN).

---

## 2023-12-10 18:15:15 - random channel

**Paul**

When I've hired, if somebody had put "self-employed algorithmic trader", and then had put down skills across data science, coding and money management, whether it was sports or fiscal markets, I wouldn't have cared: interview would have been booked, we would have spent half the interview talking about it, and it would have been a positive sign that somebody had dived into a difficult challenge and solved it, and that's great. I would have expected them to be honest about their motivation and if they'd said "TBH, I'll be gone in 2-3 years, I'm just doing this for the paperwork", I'd know where I stood, no problem.

---

## 2023-12-10 17:29:33 - random channel

**Jonjonjon**

Isn't there a character on here who always asks why anyone would need a mortgage, whenever these sorts of questions arise? What happened to them?

---

## 2023-12-05 16:00:36 - issues channel

**ChrisM**

ive previously built applications using the rest betfair api, so not coming in completely green

---

## 2023-12-05 15:59:24 - issues channel

**ChrisM**

Wonder if anyone can help, just started to play with streaming, ive started by using the example '[https://github.com/betcode-org/betfair/blob/master/examples/examplestreamingerrhandling.py|examplestreamingerrhandling.py](https://github.com/betcode-org/betfair/blob/master/examples/examplestreamingerrhandling.py|examplestreamingerrhandling.py)'  running it locally or on a linode instance it seems to hang/timeout after initial connecting/subscribing correctly

---

## 2023-12-04 11:06:29 - random channel

**Burrito**

What data comes out of the `get_scores` api? Does it provide Football Scores?

I see an example here: [https://github.com/betcode-org/flumine/blob/3d697cdb4d186b66af574afcf8001f18776f331d/examples/workers/inplayservice.py#L17](https://github.com/betcode-org/flumine/blob/3d697cdb4d186b66af574afcf8001f18776f331d/examples/workers/inplayservice.py#L17)



Apologies for not doing this myself but I'm behind a corporate firewall.

---

## 2023-12-03 07:06:31 - strategies channel

**liam**

Sadly betfair fill or kill only executes during execution based on price rather than time. You can see in the flumine examples you can do this manually instead by cancelling after x seconds etc.

---

## 2023-12-03 04:57:11 - general channel

**James**

and happy to help, theres a lot to learn but thats part of what makes it interesting.

---

## 2023-12-03 04:54:18 - general channel

**Adam**

Yep that makes sense. Thanks James. Super helpful :) I guess big gaps are pretty rare but it’s good to get an understanding of how the market orders stack up 

---

## 2023-12-01 14:47:45 - random channel

**Unknown**

Can I get some advice on the following simulated result chart please? Should point out that this is done using my own simulator/backtester (whatever you want to call it) and not flumine. Chart is cumulative profit across markets ordered chronologically - its about a year of data. Basically to me it looks like something that was doing well, but something changed and its flattened out. I know the only real way to test is to run it but in general how would a chart like this lead people to proceed ? Bin ? Run it and see ? Even if I subsequently discover issues with my code, the question still stands as I could potentially come across similar profit curves if I did use flumine. What kind of things do people to do to try and get to the bottom of the reasons for the flattening curve gradient?

---

## 2023-12-01 09:53:00 - random channel

**Jimmy**

Thanks Liam.



Is there a helper before I start hacking? (I’ve made that mistake before!)



And will it get me a visit to the naughty step?

---

## 2023-12-01 09:16:32 - strategies channel

**JFP**

Hi all, just wondering where I can find the documentation for placing bets on sports (cricket, soccer). Looking for the equivalent of  "runner in market_book.runners" for sport markets?

---

## 2023-11-29 12:13:15 - random channel

**Justice**

A quick question George. I am looking to migrate my database to the cloud rather than running it locally. What cloud provider and service do you use? I have a Postgres database and I'm most familiar with Azure but I'm exploring my options

---

## 2023-11-29 09:52:04 - strategies channel

**liam**

`numpy.float64` converting to keep things simple

---

## 2023-11-23 09:04:32 - strategies channel

**Mo**

Target would be the actual result but then you arrive at the usual in running problem of making many predictions on the same outcome over and over again

---

## 2023-11-22 14:12:47 - general channel

**liam**

`market_book.streaming_update` is the update received from the stream however you can use the simulated middleware to give you an abstraction:



```simulated = market.context["simulated"]

for runner in simulated.values():

    print(runner.traded)```

---

## 2023-11-22 14:08:12 - general channel

**Ralegh**

Any advice for finding market trades since last update in flumine?  Currently just storing ex.traded and finding the differences but seems backwards since the stream sends trades as deltas which is what I want

---

## 2023-11-22 10:38:34 - random channel

**George Swindells**

Hi, yes I'm the GS from TPD :slightly_smiling_face: Sorry DC I only recently joined to ask about interest in my RP database so I haven't seen any older messages about TPD and I don't monitor this page much as I already have a litany of apps and tabs open for work and want to try to keep then number down. If I get tagged in something then I get an email notification so if you have any questions you can get my attention that way

---

## 2023-11-22 10:01:47 - random channel

**D C**

But also, I did ask here some while ago if we had any TPD employees on the forum that we could ask questions but there was no response.

---

## 2023-11-22 10:00:50 - random channel

**D C**

Yeah I have had discourse with a person (data scientist) from TPD called George Swindells a few years ago which is why I asked the question. Could be pure coincidence though (I used to have a uni lecturer with the same name as me!).

---

## 2023-11-21 10:34:59 - random channel

**foxwood**

laying ? default `max_order_exposure` is 10.00 [https://betcode-org.github.io/flumine/strategies/#parameters](https://betcode-org.github.io/flumine/strategies/#parameters)

---

## 2023-11-20 11:34:52 - random channel

**Jonjonjon**

Thanks for sharing your findings.



Won't MongoDB be worse than SQL? A well designed SQL database will generally outperform MongoDB.

---

## 2023-11-20 09:25:23 - general channel

**Mo**

Perhaps you could be a bit more specific about what you're trying to achieve and why the Betfair API is not appropriate. Once you start considering other APIs you have to start worrying about mapping events, markets and selections

---

## 2023-11-19 07:07:51 - issues channel

**liam**

Impossible to help without some code to replicate 

---

## 2023-11-19 06:03:03 - issues channel

**Rishab**

Hey guys! I'm struggling with an issue where for a few of my orders order_status changes directly from "PENDING" to "EXECUTION_COMPLETE" with the size_remaining unchanged. It's frustrating cause in some cases it takes more than a minute for size_remaining to change to 0.  Only in roughly 2% of such cases order_status changes because my order actually traded, in the rest of the cases it just goes to execution_complete(not sure why). I have to wait for size_remaining to change to 0(or a different number than what I've placed) to actually place a new order as otherwise I can't be confident if my previous order got filled &amp; this is a huge problem as sometimes it might take &gt;1 min. Has anyone had this problem in the past? I'm a flumine user.

---

## 2023-11-18 19:46:00 - random channel

**Jimmy**

Solved it by processing the book differently — which is a bit of a cheat but still…

---

## 2023-11-18 14:18:34 - random channel

**Jimmy**

Python question:



We are looping around runners in a market. (standard stuff)



Question is what would be the most pythonic way of getting the price of the next runner (or None if there isn’t one)?

---

## 2023-11-18 11:10:21 - issues channel

**Peter**

The monkey patching is needed for the streaming so messing with it is likely to be challenging. The approach that I use is to include a block in my simulation runner script that identifies the files that will be needed, both catalogues and stream files, and then download them to a local cache before passing the local location into the Flumine instance.



There's no additional network traffic as I'm simply shifting the time when the data is streamed from S3, and usually there's a saving, as I often end up tweaking and re-running the simulation, but without the external network traffic on subsequent runs.

---

## 2023-11-18 08:16:48 - general channel

**Chandana Tennakoon**

Thank you, that was very helpful!

---

## 2023-11-18 00:10:17 - general channel

**Mo**

Yes the API convention is camelCase while betfairlightweight as a Python library follows snake case conventions

---

## 2023-11-17 19:29:11 - issues channel

**liam**

Do you need the full book? Limiting the data filter can sometimes help

---

## 2023-11-17 13:42:45 - issues channel

**liam**

`FlumineBacktest` was removed in Feb 22

---

## 2023-11-17 13:41:41 - issues channel

**Jimmy**

flumine==2.5.2

---

## 2023-11-17 13:41:16 - issues channel

**Jimmy**

```    client = clients.SimulatedClient()

    framework = FlumineSimulation(client=client)```

---

## 2023-11-17 13:39:43 - issues channel

**liam**

`FlumineBacktest`? How old is your version?

---

## 2023-11-17 12:52:08 - general channel

**Alex A**

Would you mind elaborating? Is there something that bflw and I are doing wrong to not receive it?

---

## 2023-11-17 06:25:12 - issues channel

**liam**

This won’t be the problem, you have something bad happening in your code, profile it 

---

## 2023-11-16 15:30:22 - strategies channel

**Unknown**

I used the priceBlockage example from the flumine GitHub and reproduced the problem - I see orders matched at prices lower than the submission price when I run this. Hopefully it's just something I'm doing with the logging.

---

## 2023-11-16 08:32:07 - general channel

**Alex A**

Looks like bflw does request it by default, just seems to be a bluff on Betfair’s end.

---

## 2023-11-16 08:31:24 - general channel

**liam**

I have never seen it, bflw doesn't handle it :man-shrugging:

---

## 2023-11-15 11:30:59 - random channel

**liam**

Over the years nearly everyone has questioned my day job when I have betfair. I think the post sums it up well but looking back now it has certainly accelerated my wealth from being able to lean on what the average joe considers normal (for example mortgages)



There is more to it as well, I only contract about a day a week now but get invited to socials, leaving drinks, Christmas parties etc, all excuses to leave the screen and pretend to be normal once a month. Regarding the work I am currently exploring on integrating an LLM on a result set in real time, interesting / real world problems that get visibility from others which makes it more rewarding. Coming up to over 2 years at my current role I am probably due a change..

---

## 2023-11-15 08:55:36 - random channel

**D C**

Seems a bit self-indulgent to complain about it and its a very first-world problem. We as automated players have the best of it too - I would not last a month being a manual trader/gambler/poker player stuck at a desk/table for hours on end.

---

## 2023-11-15 08:52:52 - random channel

**foxwood**

Whoops - my bad for not picking up on that key word. Checking the list of recent logins at BF and the flumine logs should lead to an answer.

---

## 2023-11-14 21:35:02 - random channel

**foxwood**

Sounds like an automated hack where they are using your username / email. 2FA should keep them out and just leave the flumine running - that requires your cert so should be fine. When you do manage to login via the app you should be able to see the recent login attempts. Been a lot of this mentioned on BA in recent times.

---

## 2023-11-14 17:45:23 - random channel

**PeterLe**

Just noticed I’m getting a message “temporary ban too many requests” when trying to log in via the Betfair app, (on two accounts) anyone know how long “temporary is” please?  I guess I would also need to restart those two flumine instance at some point? Any idea anyone please ? 

---

## 2023-11-14 11:57:53 - general channel

**Justice**

[@UUE6E1LA1](@UUE6E1LA1) Yes, I am streaming with no conflation set so I can get tick data. I think I will take your suggestion and leave my code as is. I'll filter out anything else later.

---

## 2023-11-14 10:37:04 - general channel

**D C**

Assuming you are streaming, If you really want to do this I can't see any other option than you would need to manually detect the first inplay suspension when the race starts and store the market version, then stop recording on subsequent change in the market version (or detection of further suspension). Premature and incorrect setting of market inplay is not unheard of though, so no method will be 100% effective. Personally, if this is purely for recording of data as you say, then I'd just record everything and extract the portions you are interested in later as it would  be easier, and I might find further down the road that I actually DO want that data for some reason.



If you are polling using listMarketBook then depending on your poll interval you always run the risk of missing a small portion of data, or getting some non inplay portion included in your data. I used to do this years ago and it is full of shortcomings, so if you are not streaming, I would strongly suggest you switch.

---

## 2023-11-13 20:46:15 - random channel

**Adrian**

This is cool, thank for all the help! I just imported flumine into my new venv and it worked seamlessly. I didn't think it would be that easy.

---

## 2023-11-13 10:12:33 - issues channel

**liam**

[https://github.com/betcode-org/flumine/blob/3d697cdb4d186b66af574afcf8001f18776f331d/flumine/streams/streams.py#L93|yes](https://github.com/betcode-org/flumine/blob/3d697cdb4d186b66af574afcf8001f18776f331d/flumine/streams/streams.py#L93|yes), logs will tell you

---

## 2023-11-13 09:35:48 - random channel

**foxwood**

As [@U4H19D1D2](@U4H19D1D2) says - also I'd recommend subfolders in your strategies directory to keep related / similar strategies together - makes later navigation and searching in PyCharm a lot easier than having to scroll through long lists of files. With PyCharm you can easily search the venv flumine folder to see the sources, place breakpoints, step through and generally wander about.

---

## 2023-11-13 09:04:28 - general channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/HISTORY.rst#254-2023-11-13|2.5.4](https://github.com/betcode-org/flumine/blob/master/HISTORY.rst#254-2023-11-13|2.5.4)

---

## 2023-11-13 09:03:58 - issues channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/HISTORY.rst#254-2023-11-13](https://github.com/betcode-org/flumine/blob/master/HISTORY.rst#254-2023-11-13)

---

## 2023-11-12 22:57:47 - random channel

**Adrian**

Thanks JL. So that would be a new directory for my project with a new venv and then import flumine there?

---

## 2023-11-12 18:01:57 - issues channel

**Paul**

A quick google around suggests this could be a change in your environment, not Betfair's:



[https://stackoverflow.com/questions/30863059/unable-to-write-data-to-the-transport-connection-an-established-connection-was](https://stackoverflow.com/questions/30863059/unable-to-write-data-to-the-transport-connection-an-established-connection-was)



But then, maybe not:



[https://stackoverflow.com/questions/14304658/c-sharp-an-established-connection-was-aborted-by-the-software-in-your-host-machi](https://stackoverflow.com/questions/14304658/c-sharp-an-established-connection-was-aborted-by-the-software-in-your-host-machi)



One thing worth checking is whether you (or something between you and Betfair) is messing around with Content-Length headers:



[https://stackoverflow.com/questions/31931438/c-sharp-an-established-connection-was-aborted-by-the-software-in-your-host-mac](https://stackoverflow.com/questions/31931438/c-sharp-an-established-connection-was-aborted-by-the-software-in-your-host-mac)

---

## 2023-11-11 19:18:51 - issues channel

**liam**

Mixture of legacy and UUID’s are quick in python (C) 

---

## 2023-11-11 17:07:06 - issues channel

**ShaunW**

Begs the question why do you need one that long anyway?

---

## 2023-11-11 16:18:28 - issues channel

**AndyL**

[https://github.com/betcode-org/flumine/issues/721](https://github.com/betcode-org/flumine/issues/721)

---

## 2023-11-11 16:14:02 - issues channel

**AndyL**

[@U4H19D1D2](@U4H19D1D2) raised [https://github.com/betcode-org/flumine/issues/721](https://github.com/betcode-org/flumine/issues/721)

---

## 2023-11-11 16:04:51 - issues channel

**AndyL**

uuid4() from a quick python test returns sometimes &gt; 18 chars

---

## 2023-11-11 16:03:54 - issues channel

**AndyL**

Looks like this change: [https://github.com/betcode-org/flumine/commit/c9598216206bb9bf523e7721d412b1ef1f54e759](https://github.com/betcode-org/flumine/commit/c9598216206bb9bf523e7721d412b1ef1f54e759)

---

## 2023-11-10 19:53:15 - issues channel

**liam**

Flumine logs it for you 

---

## 2023-11-10 18:14:12 - issues channel

**liam**

Not sure but if it’s hedging it’s a problem you shouldn’t solve 

---

## 2023-11-10 11:52:58 - issues channel

**Brett Riley**

Yup confirmed it was a version problem/conflict, thanks for the assistance!

---

## 2023-11-10 10:55:54 - issues channel

**liam**

Ok, latest version for flumine?

---

## 2023-11-10 10:11:31 - random channel

**river_shah**

flatfiles are generally sufficient. even petabyte scale market data pcaps operate fine with them and throwing a db in the mix for full data handling is likely bad design.



maybe for derived data one could use databases. even then putting processed data into arrow or your favourite portable data format files is better

---

## 2023-11-09 19:13:10 - random channel

**Jonjonjon**

Has anyone tried putting the full data from Betfair files into a database? If so, what did they use?

---

## 2023-11-09 08:50:45 - random channel

**liam**

Looks like the core is in rust, I can't really see how its matching orders, I am going to assume its very naive in that regard compared to how flumine does it

---

## 2023-11-09 08:49:17 - random channel

**Ralegh**

I’ve got it working with betfair data in the past, very fast but was a bit finicky so didn’t want to abandon flumines maturity

---

## 2023-11-09 08:48:00 - random channel

**liam**

Similar design to flumine but covering crypto



[https://github.com/nautechsystems/nautilus_trader/](https://github.com/nautechsystems/nautilus_trader/)

---

## 2023-11-08 17:01:47 - general channel

**Brian Sexton**

Ill get the data i have structured into a database and try to normalize and match them up to see how it works. It should be ok :crossed_fingers:

---

## 2023-11-08 15:37:29 - general channel

**Štefan**

Just from the table names you can judge my schema and how I normalized database structure. I link datasources by race time and horse names as getting data from 3 different sources.

---

## 2023-11-08 15:10:05 - general channel

**liam**

[https://github.com/betcode-org/betfair/blob/9dfed6a2acd18550a6c2192c8c67bc6b0d2ce27e/betfairlightweight/endpoints/scores.py#L16](https://github.com/betcode-org/betfair/blob/9dfed6a2acd18550a6c2192c8c67bc6b0d2ce27e/betfairlightweight/endpoints/scores.py#L16)

---

## 2023-11-08 08:18:03 - general channel

**liam**

You would use a worker following [https://github.com/betcode-org/flumine/blob/master/examples/workers/inplayservice.py|this](https://github.com/betcode-org/flumine/blob/master/examples/workers/inplayservice.py|this) pattern

---

## 2023-11-08 07:18:59 - general channel

**joe taylor**

Hey guys! Wanted to use the information from race status api, looked at flumine wasn’t able to find anything regarding it. Is there a way to access it from flumine ?

---

## 2023-11-07 21:56:32 - random channel

**Jonjonjon**

Look up the module it's in. Suppose it's in `flumine.streams` (I haven't looked that up so it's probably wrong).



You'd need something like this script that runs the code:



```import logger



streams_logger = logging.getLogger("flumine.streams")

streams_logger.setLevel(logging.CRITICAL)```

---

## 2023-11-07 09:02:13 - issues channel

**liam**

I added, [https://github.com/betcode-org/flumine/pull/718|released](https://github.com/betcode-org/flumine/pull/718|released) yesterday if you can test?

---

## 2023-11-06 14:58:05 - random channel

**D C**

Yeah I am not reading anything sinister into it at all, just curious if I had a problem. As you say, perfectly plausible explanations but always good to get a sanity check. Only noticed it working on something new and just thought I'd ask.

---

## 2023-11-06 10:19:40 - strategies channel

**mandelbot**

Thanks for your thoughtful respons, you've confirmed what I've suspected, which is very helpful. I've also made several attempts to estimate it and have figured that logging the pre-off BSP liabilities and stakes gets very close. Also it seems doubtful that these are the final amounts matched at BSP because then you could move BSP quite significantly if that were the case. At least now I know my 20 pound bets won't destroy the market :joy:

---

## 2023-11-06 05:45:38 - strategies channel

**mandelbot**

I'm trying to estimate how much a BSP bet will affect the final BSP price. Can anyone shed some light on how to estimate slippage on BSP bets?

---

## 2023-11-03 17:02:57 - random channel

**Mo**

This has now been released and published to PyPI



Summary of the changes:



1. Now uses a Rust optimiser by default which is about twenty times faster than the original Python code

2. By default will now just return the implied probabilities which should make calling code more concise

3. You can now pass in a mapping from identifier to odds and get back a mapping from identifier to probability which also has the potential to significantly simplify calling code

---

## 2023-11-03 16:13:01 - issues channel

**liam**

Can you share the file so I can test [https://github.com/betcode-org/flumine/commit/0aa53dd45b6555a994b91b2938423f79b5b343df|this](https://github.com/betcode-org/flumine/commit/0aa53dd45b6555a994b91b2938423f79b5b343df|this)?

---

## 2023-11-03 15:53:34 - issues channel

**liam**

Thanks for raising, we have a [https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/utils.py#L168|function](https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/utils.py#L168|function) for this so not sure why I haven't used it / why this hasn't been raised before :thinking_face:

---

## 2023-11-02 14:22:25 - strategies channel

**foxwood**

Thought I'd seen something on here about how to skip to market closure on backtest to save time. Tried search which had "backtest skip to closed" in it's suggestion list but then found nothing and hit the 90 day archive message.  Anyone know the answer to this - if there is one ?

---

## 2023-11-02 14:01:03 - general channel

**liam**

Yeah, my misunderstanding / assumption of the question, you would be matching against others money so no issue

---

## 2023-11-01 22:53:10 - general channel

**JazzMan**

My strategies do it all the time, never had a problem. 

---

## 2023-10-31 16:54:29 - issues channel

**Mikkel**

Has anyone else experience that not all BSP order goes through when using Flumine? From flumine I can see that the bet should be posted / executed but nothing shows up on Betfair?

---

## 2023-10-30 19:29:02 - general channel

**Dave**

Due to this thing: [https://github.com/betcode-org/flumine/blob/master/flumine/markets/blotter.py#L149](https://github.com/betcode-org/flumine/blob/master/flumine/markets/blotter.py#L149)

---

## 2023-10-29 11:17:42 - general channel

**Dave**

I'm basically trying to figure out: If run a second flumine instance on another host, do I need to run it with the logging control _as well_ or will my first instance that's running with the logging control take care of the order logging. And how does that differ if I run the second flumine instance on the same host

---

## 2023-10-27 18:40:08 - random channel

**thambie1**

I launch a cron job every minute, which would login and execute some api requests. Got an email from Betfair politely asking me to reduce the number of logins. Started persisting sessions using a database since then

---

## 2023-10-27 14:48:04 - issues channel

**liam**

[https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/worker.py#L23|start_delay](https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/worker.py#L23|start_delay)

---

## 2023-10-27 14:00:25 - issues channel

**George**

I edited my post to answer that question while you were asking it, apologies

---

## 2023-10-27 06:35:59 - general channel

**liam**

It’s just `runner.ex.traded_volume` don’t go into the private methods / cache, are you using flumine?

---

## 2023-10-27 02:11:30 - general channel

**NAS**

hi. what's the easiest way of obtaining the information regarding all scratches in a race (in particular time since last one) with betfairlightweight?

---

## 2023-10-26 23:38:11 - general channel

**Trex44**

Hey guys. Is there a way to get the traded ladder (so prices and volumes traded). I think the RunnerBookCache stores it in the traded instance variable but I can't figure out how to access it.

---

## 2023-10-26 15:59:43 - random channel

**H**

Ah Flumine seems to have moved on since I last looked at it! I remember it just being a backtesting framework

---

## 2023-10-26 15:54:43 - random channel

**Peter**

The login response is very quick, so like [@UBS7QANF3](@UBS7QANF3) I just login for each discrete betfairlightweight process. Never found a reason to complicate this.

---

## 2023-10-26 15:46:32 - random channel

**H**

Stupid question maybe: is there an easy way to persist Betfair sessions/logins between processes in betfairlightweight?

In particular, if a Python process shuts down and then comes back up, can I persist the session on disk somehow? Or does everyone just call `login()` again when the process comes back up?

---

## 2023-10-26 11:49:46 - random channel

**D C**

Here is an example of something that gives me reservations [@UBS7QANF3](@UBS7QANF3) maybe you could help:



"People overpay for comfy sh!t like positive skew"



A sample of a Robot James tweet. Now I've not idea what that means (other than the raw definition) and no idea what I would even google to reveal the meaning. Does the course contain stuff like this and if so is it clearly explained?

---

## 2023-10-26 08:27:32 - general channel

**liam**

I imagine Terry wants the logic for getting the rating, didn't the hub once have a walk through on how to do this?

---

## 2023-10-26 07:26:10 - random channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) has posted some links to Robot James's material recently ([https://betcode-org.slack.com/archives/C4H05KKMY/p1697789268560849](https://betcode-org.slack.com/archives/C4H05KKMY/p1697789268560849) and [https://betcode-org.slack.com/archives/CTPL3R3FU/p1695907640349259](https://betcode-org.slack.com/archives/CTPL3R3FU/p1695907640349259)). Here's another banger: [https://twitter.com/therobotjames/status/1717053798739546221](https://twitter.com/therobotjames/status/1717053798739546221)



If you liked them, he's running another iteration of his 4-week [https://robotwealth.com/membership-levels/?pa=9A165184AF|Trade Like A Quant](https://robotwealth.com/membership-levels/?pa=9A165184AF|Trade Like A Quant) course with sign ups open until Monday. I took it last year, really enjoyed it and thought it was well worth the money ($499). He runs it roughly twice a year and if you sign up you get lifetime access so I'll be participating again as it's always good to go over the fundamentals and he refines the content every time he runs it



If this sounds like a sales pitch, I would get a 10% referral fee if you sign up through this link but I'm more than happy to have a frank discussion about the course and answer any questions. Whether you want to facilitate my kick back or not, you can use the discount code TLAQTENOFF to get 10% off yourself

---

## 2023-10-25 15:54:34 - general channel

**George**

yes, though the problem is I don't necessarily have the market catalogues for these particular markets.

---

## 2023-10-24 14:36:28 - strategies channel

**PeterLe**

[@U01DVUAE2G1](@U01DVUAE2G1) wrote :

[@UQL0QDEKA](@UQL0QDEKA) interesting idea, however i wouldnt have much to compare with, as i ve never checked it before :smile:

..well i never checked the pipework under the sink, but if i did and there was a leak, Id recognise the problem straight away :grinning:

---

## 2023-10-23 12:05:27 - strategies channel

**Derek C**

Thanks to [@U4H19D1D2](@U4H19D1D2) - Flumine can run interrupted for weeks and months and auto-recovers from common  issues.

---

## 2023-10-23 09:39:37 - strategies channel

**Derek C**

_'You can’t just keep a stream open all day every day and just tell it to “monitor every horse market in Australia” indefinitely?'  - T_hat is literally what you do with Flumine/BF streaming. Subscribe to a filter condition and let it run, new markets appear in the stream when they match the filter.

---

## 2023-10-23 00:02:41 - general channel

**Jonjonjon**

Will you need to consider the `market_exposure` method from that module?



[https://github.com/betcode-org/flumine/pull/517](https://github.com/betcode-org/flumine/pull/517)

---

## 2023-10-22 23:29:10 - strategies channel

**Derek C**

There should be no need to call remove_market, and once you are subscribed flumine just keeps running - so need to stop/restart each day.

---

## 2023-10-22 13:16:45 - strategies channel

**Mo**

If you are streaming then you will automatically receive data for new races

---

## 2023-10-22 12:23:11 - general channel

**James**

This is how  exposure is calculated in flumine.



[https://github.com/betcode-org/flumine/blob/master/flumine/markets/blotter.py#L185](https://github.com/betcode-org/flumine/blob/master/flumine/markets/blotter.py#L185)

---

## 2023-10-20 11:06:29 - general channel

**Peter**

&lt;whisper&gt;Bit of an informal rule here [@U04JVTVLGMT](@U04JVTVLGMT) that we don't answer questions where the delayed key is being used. By all means use it to check that you can connect to the API. But any data you do or don't get back is pretty much rubbish, and the root of many odd issues that pop up here. Hence the informal rule&lt;/whisper&gt;

---

## 2023-10-19 12:59:21 - general channel

**ShaunW**

Quick question to people who'll know, football... Are Betfair using Optima for stats info/graphics/scores or an agent at the game? And are suspensions manually managed or automated to some extent?

---

## 2023-10-17 17:45:42 - general channel

**Unknown**

I'm using a delayed key.  Attached is a market that I started recording 5 mins before the start time (in case it's still relevant and the delayed key explains the problem!)

---

## 2023-10-17 17:24:07 - betconnect channel

**Peter**

This question doesn’t seem to have anything to do with BetConnect.

---

## 2023-10-17 17:14:09 - issues channel

**MMW**

How to cancel .py language any idea

---

## 2023-10-17 16:42:19 - issues channel

**MMW**

How to cancel single bet c# 

This method cancel all bets

---

## 2023-10-17 14:11:25 - general channel

**Unknown**

I'm using a local copy of MarketRecorder (a bit of an ugly hack in order to get things to compile. I imagine I'll be able to get things working in better fashion when I get more accustomed to using Python). The code is unchanged from the version in the repo.

I've attached a copy of a market I recorded from a couple of minutes before start time until completion. Note there are only 5 mcm messages and 5 mc messages although there are lots of prices and volumes attached to these messages as lists.

I also attach the output from the "lowestlayer" simulation on the repo.

I occurs to be that the recorder might be populating the price list on chronological order and then therefore the simulation would not require timestamps. Is this correct?

---

## 2023-10-17 09:36:24 - general channel

**rob smith**

Hi guys, I'm trying to make sense of some data I've recorded. I am trying to record price data for Aus racing at 1s intervals using streaming. Conflation is set to 1000ms. There are lots of occasions where the gaps in the data are more than 1000ms. Is that to be expected with streaming where there are no changes in the market in the meantime? Thanks

---

## 2023-10-13 19:38:30 - issues channel

**AndyL**

right, and a subscription is presumably equating to each streaming_market_filter above ?

So in theory although you've got 10 connections, you could have more Subscriptions than that, hence more than say 10,000 theoretical markets?

---

## 2023-10-13 19:25:11 - issues channel

**AndyL**

So Subscription == streaming_market_filter ?

---

## 2023-10-13 19:21:33 - issues channel

**AndyL**

so like say:

```market_filter=[

betfairlightweight.filters.streaming_market_filter(

        event_type_ids=["7"],

        country_codes=["GB", "IE"],

        market_types=["WIN","PLACE","OTHER_PLACE"],

    ),

betfairlightweight.filters.streaming_market_filter(

        event_type_ids=["4339"],

        country_codes=["GB", "IE", "AU"],

        market_types=["WIN"],

    )

]```

---

## 2023-10-13 14:51:07 - general channel

**andres gonzalez**

Thanks Peter appreciate the advice, will have a look at Flumine and hopefully it's easier to navigate!

---

## 2023-10-12 20:57:08 - issues channel

**foxwood**

The logs show you the number of connections still available after each connection - may help pin it down - at `INFO` level for logs

---

## 2023-10-12 20:26:34 - issues channel

**AndyL**

Flumine user

---

## 2023-10-12 18:57:05 - issues channel

**liam**

Pretty standard, are you a flumine user or do you have exponential back off on reconnects?

---

## 2023-10-11 17:11:53 - general channel

**mzaja**

2. I chose sqlite3 because it is in Python's standard library. It would be possible to make the package support different SQL flavours, but I am not entirely sure what the benefit would be. With the current implementation, one can perform a coarse selection of data with an SQL query and then do additional filtering in pure Python.

---

## 2023-10-10 18:14:17 - general channel

**mzaja**

Hi all! I've just released version 1.0.0 of `betfairdatabase` package for those that are interested.  Check out readme for more details.



[https://pypi.org/project/betfairdatabase/1.0.0/](https://pypi.org/project/betfairdatabase/1.0.0/)

---

## 2023-10-10 13:26:59 - general channel

**Peter**

Agreed. Both of those references provide wrappers around Flumine to stream and extract data from the raw files.

---

## 2023-10-10 11:22:31 - general channel

**liam**

flumine recorded data === betfair pro data

---

## 2023-10-10 11:07:16 - general channel

**tone**

Hi everyone,

A newbie trying to figure things out!

Is anybody aware of some code which will record a market in a similiar format to Betfair's PRO format historic data files?

I've looked at marketrecorder.py in flumine, which intially seemed perfect, but the price data doesn't appear to be stored in time series.

What I'm after is something will look a bit like this:



&lt;&lt; MarketDefinition message &gt;&gt;

&lt;&lt; Price messages with timestamps and runner IDs &gt;&gt;

&lt;&lt; MarketDefinition message with inPlay=true &gt;&gt;

&lt;&lt; inPlay price messages with timestamps and runner IDs &gt;&gt;

&lt;&lt; MarketDefinition message with results &gt;&gt;



Thanks for your time.

---

## 2023-10-10 10:44:30 - general channel

**Muhammad Adeel Zahid**

I was going through Betfair exchange API and they two fields namely `EX_TRADED` and `EX_TRADED_VOL` accessible through fields `trd` and `tv` respectively. But Flumine only exposes `runner.ex.traded_volume` . What does it refer to? `trd` or `tv`? Because, I am interested in `trd` which, according to docs, points to the matched volume at each price. whereas `tv` refers to liquidity in the market available to lay and back at each price.

---

## 2023-10-09 21:57:44 - betconnect channel

**Elliot**

Would you mind to have a look at my code if i dm you to see if i have something obviously wrong? I'm using python + VS Code. Im using the websockets doc provided by betconnect team

---

## 2023-10-09 19:44:00 - issues channel

**liam**

Reading the code will be the best way to understand this, happy to answer anything specific 



 [https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/simulation/simulatedorder.py#L36|https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/simulation/simulatedorder.py#L36](https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/simulation/simulatedorder.py#L36|https://github.com/betcode-org/flumine/blob/06451c28252b87a94132dc1f29777cc696937f98/flumine/simulation/simulatedorder.py#L36)

---

## 2023-10-09 18:52:04 - betconnect channel

**Peter**

I get the messages in real-time with no issues using the python websocket-client package.

---

## 2023-10-09 17:05:50 - issues channel

**Gooat**

Flumine version? 2.5 working fine with python 3.11 here

---

## 2023-10-09 16:05:35 - general channel

**Muhammad Adeel Zahid**

Ok. I was going through the Betfair streaming API and it appears that it is not possible to get orders as they are placed on the market. However, traded data is available with price and size. Can someone confirm/deny this conjecture, please? And yes, I was able to access the traded volume through `runner.ex.traded_volume` as suggested by [@U4H19D1D2](@U4H19D1D2)

---

## 2023-10-09 15:22:00 - general channel

**Muhammad Adeel Zahid**

Honestly, no. I was just going through the flumine code and seeing if I could access what I needed.

---

## 2023-10-08 19:21:45 - general channel

**liam**

They don’t when streaming, you need to use process_orders or just the blotter in the market object, check out the docs 

---

## 2023-10-08 17:05:27 - general channel

**Unknown**

Thanks for the reply [@U4H19D1D2](@U4H19D1D2). When do they get populated? I have a simple use case where I want to analyze the matched orders for a horse (selection) before placing my own. How do I do it with Flumine?

---

## 2023-10-08 11:29:13 - general channel

**AndyL**

Is the streaming subscription limit per connection or per user ?

Eg. is the default 200 across all 10 available connections, or 200 per connection(thus potential 2000 in total) ?

---

## 2023-10-07 12:14:31 - general channel

**Bookworms Inbox**

many thanks, is this something you could help with as a small project. We have the Function &amp; Main files and it works up to the point of comparing the Alert teams to that of the teams listed on Betfair. At present it returns wrong team names to the CSV

---

## 2023-10-07 07:39:55 - general channel

**liam**

Those values are not populated when streaming 

---

## 2023-10-07 07:04:52 - general channel

**Muhammad Adeel Zahid**

[@U4H19D1D2](@U4H19D1D2) Can you please tell why `runner.matches` and `runner.orders` are always empty lists? Do I have to configure some parameters for Flumine to fetch orders and matched bets?

---

## 2023-10-06 14:33:37 - general channel

**Bookworms Inbox**

I have had developed a bot that looks to a certain telegram alert service for football games. The bot then sends the games to a csv for another software called BF Bot Manager to place the bets.



The problem we had was that the team naming convention from the alert service did not comply with that of Betfair and as such the bets were not placed.



We attempted to get round this by having the bot take the team names from the alerts and then comparing them with Betfair, and then interchanging the teams names to suit Betfairs naming convention, then the bot would send the amended team names to the csv for the other software to place the bets.



Problem is, it works well but does not match well, with very obsecure team names being returned, not even related tot he alert team names..



Please let me know, hopefully you can help

---

## 2023-10-06 13:45:37 - betconnect channel

**Bookworms Inbox**

I have had developed a bot that looks to a certain telegram alert service for football games. The bot then sends the games to a csv for another software called BF Bot Manager to place the bets.



The problem we had was that the team naming convention from the alert service did not comply with that of Betfair and as such the bets were not placed.



We attempted to get round this by having the bot take the team names from the alerts and then comparing them with Betfair, and then interchanging the teams names to suit Betfairs naming convention, then the bot would send the amended team names to the csv for the other software to place the bets.



Problem is, it works well but does not match well, with very obsecure team names being returned, not even related tot he alert team names..



Please let me know, hopefully you can help

---

## 2023-10-06 10:42:30 - general channel

**Unknown**

Just following up on this. Attached is the logger code (see next post), should have included in the initial post, sorry about that. Could scaling the amount of strategies being run cause this. I was running 10 but I am now runing 20 via a single Flumine instance.

---

## 2023-10-06 08:15:45 - general channel

**liam**

Copy flumines [https://github.com/betcode-org/flumine/blob/9c65ce90d7574482cd11f97f2c785497edc66533/flumine/streams/marketstream.py#L59|logic](https://github.com/betcode-org/flumine/blob/9c65ce90d7574482cd11f97f2c785497edc66533/flumine/streams/marketstream.py#L59|logic) with a timeout on the queue and a snap

---

## 2023-10-06 08:14:44 - general channel

**Andy Bason**

Hello guys, with Betfairlightweight is there a way of streaming at, eg, 20ms but also forcing an update every 1000ms where there has been no stream update. These terms might not be correct but what I am trying to do is receive the data as fast as possible and when the market goes quiet continue to collect data at 1000ms until it picks up again. Cheers

---

## 2023-10-05 15:32:17 - general channel

**river_shah**

Serious rust envy here at the moment, learning but not enough time. I think with rust + `maturin` we could fully rewrite `bflw / flumine` into one package

---

## 2023-10-05 13:01:42 - general channel

**liam**

The site uses the API so doesn't really solve the problem

---

## 2023-10-05 12:39:45 - general channel

**Andy B**

That's my script that contains the flumine config and my strategies.  Obviously I have configured that wrong if you weren't expecting it.

---

## 2023-10-05 12:22:17 - general channel

**Andy B**

I think this one is a future me problem, my brain is fried tonight.  Thanks for taking time to help me Liam.

---

## 2023-10-05 12:02:05 - general channel

**Andy B**

It should have been 50ish.  There must be a problem on my end in that case.

---

## 2023-10-05 10:40:26 - general channel

**liam**

I use [https://github.com/ymichael/cprofilev|cprofilev](https://github.com/ymichael/cprofilev|cprofilev)



```python -m cprofilev simulation.py```

---

## 2023-10-05 10:38:59 - general channel

**Andy B**

Dumb question, how do I create and share the profile?

---

## 2023-10-05 10:11:22 - general channel

**Andy B**

14 cores \ 20 logical processors.  I have flumine set to 8 markets per process

---

## 2023-10-05 10:04:30 - general channel

**Andy B**

Good question, it's about 20 months of Aus greyhounds

---

## 2023-10-05 09:23:45 - general channel

**Johnny Boston**

Hey, has anyone played with streaming logs from a logging handler through to a UI or something for better monitoring of multiple strategies (with flumine obv)

---

## 2023-10-04 17:11:50 - issues channel

**foxwood**

All the orders for the market are in the `blotter` so you can see their state from `process_market_book` Not sure exactly how/when the blotter is updated but the order data and market data are totally different BF streams coming from different systems and are not synced in time as far as I know so you can never be 100% sure of your true position at each packet. Middleware _may_ be something useful to consider in your design as shown after the blotter info at  [https://betcode-org.github.io/flumine/markets/#blotter](https://betcode-org.github.io/flumine/markets/#blotter)

---

## 2023-10-04 16:29:08 - random channel

**PeterLe**

You will enjoy chapter 3 [@UBS7QANF3](@UBS7QANF3) although I'm embarrassed to say I got a basic stats question wrong on the dice :astonished:

---

## 2023-10-04 15:03:49 - general channel

**Mo**

I don’t use Docker. I mean another instance of Python

---

## 2023-10-04 13:08:35 - issues channel

**Rishab**

Trying to wrap my head around the idea. The problem I'm facing at the moment is process_orders always gets called after process_market_book function ends &amp; that's the reason why I put everything in process_market_book(as my new orders are dependent on what has happened to my existing orders). As you have suggested process_orders is faster, but I can't call it as I need to know what has happened to my orders first &amp; then send orders based on that.

---

## 2023-10-04 12:46:18 - issues channel

**Rishab**

Thanks Liam. That makes a lot more sense. Do you know any solution for this problem- if I want to put new orders in process_market_book based on what has happened to my existing orders?

---

## 2023-10-04 12:42:59 - issues channel

**Unknown**

as written in the official documentation i linked

anyway leave the code as is, i had a problem and i solved ;)

---

## 2023-10-04 11:37:44 - issues channel

**liam**

But what problem is it solving and is it quicker / benchmark etc

---

## 2023-10-04 11:31:54 - issues channel

**Riccardo Fresi**

just trying to be useful to the community, i think this is the purpose, help each other

---

## 2023-10-04 11:00:41 - general channel

**Johnny**

...or just another instance of Python

---

## 2023-10-03 11:54:34 - general channel

**George**

I wrote some code to do this a few months ago... then I scrapped it because it was extremely complicated.

Also, don't forget the scheduled start time can (and does) change.

I would imagine someone much smarter than me has solved this problem in an elegant way?

---

## 2023-10-03 11:50:08 - general channel

**ShaunW**

Can't vouch for Flumine [@UCQB6S222](@UCQB6S222) but you might have to tie it back to the win market using the scheduled start time and venue.

---

## 2023-10-03 11:14:15 - general channel

**George**

Can I just ask how do people get the 'race number' in Flumine for AUS horse racing for PLACE (and other non-WIN) markets?



I think the WIN markets have the race number in the market description but the PLACE (and other) markets don't?

---

## 2023-10-03 08:47:49 - issues channel

**Lee**

Did anyone have any flumine instances die during that outage?

---

## 2023-10-02 07:29:13 - general channel

**liam**

That is flumine, which does handle outages 

---

## 2023-10-02 07:28:43 - general channel

**Felix Lucien**

[https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py) is what I'm talking about

---

## 2023-10-02 06:13:03 - general channel

**liam**

What is the 'betfairlightweight exchange scraper'?

---

## 2023-10-02 04:21:39 - general channel

**Felix Lucien**

Does the betfairlightweight exchange scraper handle outages?

---

## 2023-10-01 09:30:39 - general channel

**Andy B**

If I understand correctly, the problem is because I simply have all of the files dropped in one folder and flumine has no concept of where the next market is because it hasn't loaded all markets in the current thread?  I guess I have missed something in the doco that explains how I should set the markets up?

---

## 2023-10-01 09:19:21 - general channel

**liam**

flumine is good but not that good :joy:

---

## 2023-09-30 08:17:41 - general channel

**liam**

You need to simulate using event processing so that both markets are available 



[https://betcode-org.github.io/flumine/quickstart/#event-processing|https://betcode-org.github.io/flumine/quickstart/#event-processing](https://betcode-org.github.io/flumine/quickstart/#event-processing|https://betcode-org.github.io/flumine/quickstart/#event-processing)

---

## 2023-09-29 13:24:10 - general channel

**Mo**

I’m not aware of such a resource but look under the “Discount Price Plans” heading here: [https://historicdata.betfair.com/#/home|https://historicdata.betfair.com/#/home](https://historicdata.betfair.com/#/home|https://historicdata.betfair.com/#/home) for an indication of which months have problems 

---

## 2023-09-29 08:06:40 - general channel

**Andy B**

Yep, I'm a flumine convert.  I am missing something here as I can't see how to return it from the market.definition.

---

## 2023-09-29 07:25:43 - general channel

**liam**

Are you using flumine?

---

## 2023-09-27 17:54:46 - strategies channel

**D C**

Ive never placed a BSP bet in my life so this might be a dumb question, but is it susceptible to manipulation (and if so do many people try) ?

---

## 2023-09-27 13:08:24 - strategies channel

**Mo**

As for your second point if you can’t see that placing bets at odds that have a margin over the fair probability is going to cost you money then I can’t help you

---

## 2023-09-27 12:26:21 - issues channel

**liam**

betfair themselves manage, you aren't answering my question though, I am assuming you want to store the raw book in mongo?

---

## 2023-09-25 15:12:30 - general channel

**Beeblebrox**

In my local version of OrdersMiddleware I have a filter for the market id. According to my git history I added that in a day after I'd copied the example, so I must have found the same issue as you, but I never pushed it back to the flumine repo.

---

## 2023-09-25 09:01:35 - issues channel

**Mo**

I don't really understand the question

---

## 2023-09-24 12:48:56 - general channel

**Justice**

[@UBS7QANF3](@UBS7QANF3) Very annoying. I personally found the data to be extremely inaccurate. I developed a piece of software for a client that used the data, back when it was only available as raw data.  The data was all over the place and TPD were evasive and condescending when I questioned the accuracy of the data. We decided to cut our losses on the project

---

## 2023-09-21 16:53:09 - general channel

**liam**

All delayed key questions and use is banned here, it’s a huge waste of everyone’s time 

---

## 2023-09-21 15:13:19 - general channel

**Emze_93**

Not using orjson.



Digged in a little and it seems there are no open markets.



the handle_output method from OrderStream class in orderstream.py when calling self.flumine.markets simply does not return any open market. The filer I am using allows a huge availability at the moment (horse racing in UK and Ireland).



Is it a limit I am given from using delayed API keys? I have no clue of why I am seeing an empty market list.

---

## 2023-09-21 14:10:07 - general channel

**Emze_93**

Is anyone experiencing Flumine not handling market book event at all? All seemed fine this morning until this very moment. handle_output in OrderStream seems to be hanging in a forever loop with no exit. Weird enough as market to address are open now.

---

## 2023-09-20 10:27:10 - random channel

**river_shah**

I don't use it but I think it allows easy integration with your PB / positions and possibly some python or other libs with which you can integrate your systems in

---

## 2023-09-19 09:04:14 - random channel

**Mo**

flumine for financial markets would be greatly appreciated if you wouldn't mind

---

## 2023-09-19 08:56:51 - random channel

**Paul**

Have you checked every line of the python source code? What about your OS? 

---

## 2023-09-19 08:55:46 - random channel

**Jonjonjon**

I've seen repos by people who have forked it and continued the work, but something about that makes me feel uncomfortable. Maybe I'm being paranoid. But before I started using bflw and Flumine I'd gone through every line of code to check for data theft issues

---

## 2023-09-19 07:27:38 - general channel

**Guy Incognito**

Is there some way I can view the total traded volume of a market that has settled. I tried with betfairlightweight and I always get total volume equal to zero when asking for the market book

---

## 2023-09-18 19:08:39 - random channel

**Jonjonjon**

For a Python developer familiar with Flumine, but no modern financial experience, which Python API for Interactive Brokers would be most suitable forbacktesting at a tick level, where the order book depth is simulated in a similar way to Flumine?

---

## 2023-09-18 12:53:40 - strategies channel

**Unknown**

[@UUE6E1LA1](@UUE6E1LA1) I simply use the 100% match rate as a 'guide' as to the potential profit in a system.

By way of example; In image 1 it shows a small profit on a back system, but the 100% match would be a disaster, so I'm performing above the theoretical or potential of that system. Therefore Id park this.

Conversely, the bottom image shows that whilst this strat is profitable, it is no where near as good as it could be. Id therefore try to work out how I might improve matching rates. (there would be no point in trying to increase the matching rate on image 1)

I know this doesn't answer your question specifically, but I thought others may find it useful as how it may be used.

---

## 2023-09-18 03:43:28 - general channel

**Guy Incognito**

Can betfairlightweight or flumine check the matched bets that I have placed on the website but haven't been settled yet?

---

## 2023-09-17 13:34:28 - general channel

**Andy B**

Thanks Liam, yes I am a flumine user (finally!).  I'll give this a crack.

---

## 2023-09-17 13:16:47 - general channel

**liam**

Flumine user?



`Market.event["PLACE"]`

---

## 2023-09-17 13:11:13 - general channel

**George**

sounds like you simply want to use limit orders.

but first, you should define specifically what you want to do. then after that we can help you understand how to achieve it.

---

## 2023-09-17 13:00:49 - general channel

**Alejandro Pablos Sánchez**

Hello all ! Hope you're spending a nice Sunday :slightly_smiling_face: . I'm studying about the bet matching process in general and I came up with the following question: Suppose I wanna bet 35$ to Over 2.5 goals to a given match in the betfair exchange, to a football  match. It turns out that there are 20$ to match at a price of 1.4$ and 15$ at 1.35$. How would the matching process take place in this situation?. Can this process be controlled by us somehow with certain parameters? Or it depends completely on the exchange internal working? Would love if anyone could provide a detailed explanation on this or point out some resource where all this stuff is explained. Thanks a lot :wink: .

---

## 2023-09-16 10:26:36 - random channel

**Riccardo Fresi**

Surely it will help!

---

## 2023-09-15 20:55:07 - random channel

**foxwood**

Looking at a random recorded dogs file of ~1MB with ~5k lines 96% were less than 512 but only 6 selections of course - will vary by market type / sport. Maybe analyse lots of files and set optimum buffer size by `event_type_id` ? If you went for 4096 you'd get a message per buffer (for dogs anyway) which would be fastest poss.



Looked at the parsing in `_receive_all()` and while it's quick and easy it's surprising that `makefile()` performs so badly on what should be it's native platform ! This link might be of interest and discusses same sort of issue and also usage of `asyncio` package (and an alternative hand-crafted solution) which provides line based reading of the socket stream [https://stackoverflow.com/questions/29023885/python-socket-readline-without-socket-makefile](https://stackoverflow.com/questions/29023885/python-socket-readline-without-socket-makefile)

---

## 2023-09-15 16:09:51 - random channel

**liam**

bflw handles it all, my understanding is that the concern that the large buffer has the potential for lots of messages in a single `recv`



Because we check the end of the message for the line feed we could be left processing without sending the message out.

---

## 2023-09-15 15:25:05 - issues channel

**liam**

All delayed key questions and use is banned 

---

## 2023-09-15 13:54:39 - random channel

**thambie1**

Using a different code base, but I've found a larger buffer size to be particularly helpful on startup when a lot of data needs to be pulled to get the most recent snapshot of all market data before streaming can begin. I use 2MB.

---

## 2023-09-15 13:44:13 - random channel

**liam**

Has anyone looked at optimising the `buffer_size` when reading off the stream?



For context bflw defaults to [https://github.com/betcode-org/betfair/blob/0aadd60ab2c2dcebeedfbc8b661bd257aec46435/betfairlightweight/endpoints/streaming.py#L27|1024](https://github.com/betcode-org/betfair/blob/0aadd60ab2c2dcebeedfbc8b661bd257aec46435/betfairlightweight/endpoints/streaming.py#L27|1024) (no idea why I chose this) but it seems this could probably be optimised by increasing it however unsure how/when things would start to deteriorate? We don't do anything with the data till we receive the `\r\n` so I would have thought just bumping it would make things faster :thinking_face:



Also looking at using `socket.makefile` in this [https://github.com/betcode-org/betfair/pull/540|PR](https://github.com/betcode-org/betfair/pull/540|PR)

---

## 2023-09-15 10:48:59 - general channel

**George**

sure, but there are multiple different ways that you can define the concept of "liability". Flumine might give you a different answer than the one you wanted. Just a heads up.

---

## 2023-09-15 10:36:55 - general channel

**Andy Bason**

The problem's with the user rather than flumine! I prefer to learn by getting stuck in and doing but need to step back and learn about basics like classes, etc

---

## 2023-09-15 10:33:45 - general channel

**liam**

How come? / what would help?

---

## 2023-09-15 10:26:36 - general channel

**liam**

Just use flumine and let it do all the hard work

---

## 2023-09-15 10:26:05 - general channel

**Andy Bason**

Thanks guys. I'm still cutting my teeth of bflw and haven't progressed to flumine yet

---

## 2023-09-15 10:22:47 - general channel

**liam**

If using [https://github.com/betcode-org/flumine|flumine](https://github.com/betcode-org/flumine|flumine) :wink:

---

## 2023-09-15 09:50:29 - general channel

**Andy Bason**

What's the easiest way to get your liability per runner using bflw? I've been trying `price_size` from `list_current_orders` but I think I must be missing something obvious given that this must be a common requirement. Cheers

---

## 2023-09-14 19:01:24 - general channel

**birchy**

[https://github.com/betcode-org/flumine/blob/master/HISTORY.rst|https://github.com/betcode-org/flumine/blob/master/HISTORY.rst](https://github.com/betcode-org/flumine/blob/master/HISTORY.rst|https://github.com/betcode-org/flumine/blob/master/HISTORY.rst)

---

## 2023-09-14 18:54:54 - general channel

**foxwood**

Unless BF have changed something recently it could be a timing / threading / priority issue. Do you know what version of flumine you were using before - doesn't seem to be a way of finding out with PyCharm as far as I can tell - most I can find is a reference to version 1.21.4 in another project so probably a lot changed since then.

---

## 2023-09-14 17:04:24 - general channel

**foxwood**

I raised something similar recently - basically some matched orders are not showing as `EXECUTION_COMPLETE` in `process_closed_market()` despite the trade in the log showing the bet was immediately logged with zero outstanding size - but status still sitting at `EXECUTABLE`. This shows in the info log before the market is closed so somehow the match status was known at that time. The info log of the bet changing status appears after the market is logged as closed. This only started happening from early August when I updated flumine to 2.4.1 - prior to that I was running some earlier version (not sure which) that dated back to early 22 - never had the problem prior to that update.

---

## 2023-09-14 11:47:42 - issues channel

**Riccardo Fresi**

ok, i tried from colab, and seems working

```&lt;ipython-input-2-935b033c8602&gt;:8: DeprecationWarning: ssl.wrap_socket() is deprecated, use SSLContext.wrap_socket()

  s = ssl.wrap_socket(s)

&lt;ssl.SSLSocket fd=43, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('172.28.0.12', 60868), raddr=('84.20.208.166', 443)&gt;

b'{"op":"connection","connectionId":"109-140923104638-657055"}\r\n'```

indeed i don't understand, ping AND telnet are working

---

## 2023-09-14 11:45:13 - issues channel

**Mo**

My guess is either streaming doesn't actually work in Italy or it's something to do with the way your company is fucking with your connection

---

## 2023-09-14 11:40:12 - issues channel

**Mo**

In the last example isn't the problem you haven't sent anything?

---

## 2023-09-14 11:01:13 - issues channel

**Riccardo Fresi**

no problem with that

```Ping statistics for 84.20.210.135:

    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),

Approximate round trip times in milli-seconds:

    Minimum = 41ms, Maximum = 46ms, Average = 43ms```

---

## 2023-09-14 10:36:42 - issues channel

**Riccardo Fresi**

seems totally missing

```INFO:betfairlightweight.streaming.listener:[MarketStream: 1]: connection_id: 206-213456-64155124```

maybe there is something in the listener, but i don't know how to check

---

## 2023-09-14 10:06:35 - issues channel

**liam**

What version of bflw?

---

## 2023-09-14 07:29:40 - random channel

**Mo**

Thanks [@U02GGCCLTKM](@U02GGCCLTKM). I didn't realise it was you who had asked that SO question



The vectorization makes my head hurt. I think you might be able to make it faster using the loggamma function a la [https://github.com/cran/bivpois/blob/master/R/pbivpois.R](https://github.com/cran/bivpois/blob/master/R/pbivpois.R) but I can't tell because I can't work out how to fit this into the vectorization

---

## 2023-09-14 05:58:35 - issues channel

**liam**

flumine?



[https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py](https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py)

---

## 2023-09-13 17:19:34 - strategies channel

**Pramod S**

So how to get this data.

---

## 2023-09-13 17:08:34 - random channel

**Mo**

Can anyone point me in the direction of a Python bivariate Poisson implementation?

---

## 2023-09-13 11:40:19 - random channel

**river_shah**

Ok, so my understanding now is that either with s3 or gcp, multipart uploads or composite objects will get used. hence these are true streaming writes and will remain efficient for large blobs.



[@U4H19D1D2](@U4H19D1D2) you agree with this?

---

## 2023-09-13 11:37:50 - random channel

**liam**

[https://github.com/RaRe-Technologies/smart_open/blob/develop/howto.md#how-to-write-to-s3-efficiently|This](https://github.com/RaRe-Technologies/smart_open/blob/develop/howto.md#how-to-write-to-s3-efficiently|This) help?

---

## 2023-09-13 11:26:40 - random channel

**river_shah**

I am getting some conflicting answers between stack overflow and (insert favourite LLM here). Can `smart_open` be used to incrementally update a file kept on a cloud bucket? I thought bucket objects are immutable but `smart_open` docs seems to suggest that it is able to append lines. Is that actually the case?



Is `smart_open` just abstracting by writing to local temp file and then replacing / flushing remote file. If that is the case that would get very inefficient for large files. If anyone knows what is happening under the hood, will be very helpful. Thanks.

---

## 2023-09-12 22:33:25 - general channel

**Alejandro Pablos Sánchez**

Thanks a lot [@UBS7QANF3](@UBS7QANF3) , I'll check that around and see it it works. You're always so helpful :innocent:

---

## 2023-09-12 22:06:17 - general channel

**Mo**

Or use the filters instead of a raw dictionary, as per the examples: [https://github.com/betcode-org/betfair/blob/0aadd60ab2c2dcebeedfbc8b661bd257aec46435/examples/exampleone.py#L56](https://github.com/betcode-org/betfair/blob/0aadd60ab2c2dcebeedfbc8b661bd257aec46435/examples/exampleone.py#L56)

---

## 2023-09-12 21:46:26 - general channel

**Alejandro Pablos Sánchez**

Hi everyone. I'm struggling to get ex and sp attributes but they are None all the time. Anyone knows how to properly get them to later find the prices and stakes for both back and lay sides for the different runners in a market?

---

## 2023-09-12 17:18:55 - general channel

**D C**

You'll need listMarketBook then, or better still request stream API access (assuming you don't already have streaming access).

---

## 2023-09-12 17:05:44 - general channel

**D C**

Have you looked at the betfair API page for the listEvents operation? If not here it is below - you can see from this exactly what the operation returns



[https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listEvents](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listEvents)

---

## 2023-09-12 14:47:18 - strategies channel

**Justice**

[@U4H19D1D2](@U4H19D1D2) could you link me to the article? I scraped 17 years of data from RacingPost and Timeform into a relational database. Took 2 weeks to run due to rate limiting lol

---

## 2023-09-11 20:23:23 - random channel

**Jonjonjon**

Maybe there's someone new in town? Or perhaps [@UBS7QANF3](@UBS7QANF3)  has solved horse racing? :disappointed:

---

## 2023-09-11 10:42:09 - general channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/examples/example-sportsdata.py](https://github.com/betcode-org/flumine/blob/master/examples/example-sportsdata.py)

---

## 2023-09-11 10:04:04 - general channel

**PeterLe**

Morning, just on TPD, would anyone be willing to share a basic example of how to incorporate the feed into flumine please? Thanks

---

## 2023-09-11 06:35:07 - issues channel

**liam**

The above is assuming you are using flumine, which you probably want to be 

---

## 2023-09-11 00:02:23 - issues channel

**Austin Sacks**

Hello sorry for another silly question. I have made my bot to make limit order when there are certain market conditions. How do I implement code do to cancel that order if market conditions change?

---

## 2023-09-10 14:35:38 - random channel

**Mo**

To answer your last question - all orders 

---

## 2023-09-10 14:31:50 - random channel

**D C**

I've managed to wrap my brain up in knots thinking about cross matching and traded volumes and am in need of a sanity check. In a simple example of a 2 selection event, this is how I see things working (please correct if nonsense). We start on an empty order book, I offer to back selection A at 80.0 for £1. This results in a virtual £79 @ 1.01 available to back on selection B and a real £1 available to lay at 80.0 on selection A. Someone decides to take the worse value on offer and backs selection B at 1.01 for £79. Disregarding commission, if A wins, I win £79 and they lose £79. If B wins, I lose £1 and they win 79p and Betfair pocket the extra 21p.



My first question is, how does this matching of orders end up represented to us in terms of traded volume amounts? The 1.01 is virtual, the 80.0 is real. Do we see a traded volume of £1 at 80 on A and £80 at 1.01 on B (despite the 1.01 not being a "real" order) ?



Secondly, if the above were repeated in a mature market, such that there was already money available to back selection B at 2.0 and I place the same back on A at 80.0 (way above current best available displayed price) does the cross matching still happen (i.e. would extra volume appear as a virtual 1.01 back price on B) or would it be ignored because a much better price is available already. I suppose I am asking does XM just get implemented when the ladder is thin to try and reduce the spread, or does it happen for ALL orders submitted to the market.

---

## 2023-09-10 11:03:07 - general channel

**Jonjonjon**

Maybe a dumb question, but what sort of products on Binance expire at short, frequent (daily or less) intervals.

---

## 2023-09-10 08:47:07 - general channel

**James**

I’ve read a few posts that suggest you can buy betfair data cheaper by going to bdp directly. I’ve started recording my own data but there’s a lead time to build up a decent database. Is my understanding correct? If so, any idea of the cost? Pro data for uk and aus dogs and horses is what I’m interested in. 

---

## 2023-09-09 08:38:23 - general channel

**Mo**

Are you aware that flumine does queue positioning? If so, do you think there's something wrong with the way it's implemented?

---

## 2023-09-08 13:52:42 - general channel

**Alejandro Pablos Sánchez**

No, I am using betfairlightweight

---

## 2023-09-08 13:25:06 - general channel

**liam**

And BPE is the default, are you using flumine?

---

## 2023-09-08 10:19:09 - issues channel

**Austin Sacks**

i tired to look in documentation but i couldn't figure out how to find it

---

## 2023-09-08 10:18:49 - issues channel

**Austin Sacks**

i'm flumine and general coding noob

---

## 2023-09-08 10:18:05 - issues channel

**liam**

Thats what the code says, assuming this is in regards to flumine?

---

## 2023-09-08 10:17:37 - issues channel

**Austin Sacks**

thank you for your help

---

## 2023-09-08 09:58:13 - issues channel

**Riccardo Fresi**

should be, i cannot find anything from documentation

---

## 2023-09-08 09:51:02 - issues channel

**liam**

So your not getting any response from the stream, is streaming allowed in italy?

---

## 2023-09-08 09:20:36 - issues channel

**Riccardo Fresi**

o gosh,, btw i've changed nothing changed

```market_filter = streaming_market_filter(

    event_type_ids=["1"], country_codes=["GB"]

    , market_types=["MATCH_ODDS"]

)

market_data_filter = streaming_market_data_filter(

    fields=["EX_BEST_OFFERS_DISP"], ladder_levels=3

)```

---

## 2023-09-06 22:57:53 - random channel

**MacrcoPolo**

Anyone using TPD can you PM me please if you're happy to answer some questions

---

## 2023-09-06 19:20:05 - random channel

**Justice**

If anyone uses C#, I am writing an easy to use client similar to betfairlightweight. It is still a work in progress and I am looking to collaborate with other developers and improve my skills. So please criticize/provide feedback and open issues/pull requests. See the repo here: [https://github.com/BrandonWoodward/BetfairDotNet](https://github.com/BrandonWoodward/BetfairDotNet)

---

## 2023-09-06 14:57:02 - issues channel

**D C**

I've also had problems with older certificates and newer versions of SSL that decided that the encryption mechanism used to create the certificates is too weak. I had to make changes to ssl config files but ultimately ended up generating new certificates.

---

## 2023-09-06 12:09:08 - general channel

**liam**

Flumine does and it’s awesome 

---

## 2023-09-06 12:08:46 - general channel

**Mo**

Doesn't seem like a responsibility for betfairlightweight

---

## 2023-09-06 10:33:23 - general channel

**George**

probably best to use [https://github.com/betcode-org/flumine](https://github.com/betcode-org/flumine) check it out

---

## 2023-09-06 10:30:15 - general channel

**sartux**

i use only betfairlightweight from pip

---

## 2023-09-06 10:29:34 - general channel

**George**

are you using flumine?

---

## 2023-09-06 10:27:56 - general channel

**sartux**

where can i find the blotter class documentation?



is it included at betfairlightweight?

---

## 2023-09-06 09:35:06 - general channel

**Michael**

I don't think there's much cause for concern about any of us falling foul of the checks because of not having other income, all reference I've seen to this talks about net losses rather than just X amount per week, account managers will help with any snags, it'll be fine.



I imagine some less consistent players might have to manage their funds carefully, keeping plenty of float to avoid paying in or something like that. No biggy.



The effect on liquidity is unknowable, obviously the purpose of the legislation is to reduce the money wagered, but on the other hand it might prove a barrier to entry for new automated players and I love those.



For my own part I'd rather not be taking anyone's last penny so I'm all for affordability checks and if it reduces my income I'll suck it up.

---

## 2023-09-06 09:05:39 - general channel

**D C**

I hear you [@U03N4QBJ0TV](@U03N4QBJ0TV) . I've heard plenty of similar but it is hard to separate signal from noise with these stories. I read something about a well known punter  in the horse game on the BA forum falling victim, but in this story it is important to note that he REQUESTED his account be closed because he had no intention of providing financial details. We need to know real detail of what will/will not happen if we fail AC before even thinking about supplying such data.

This is part of the problem though - there are no "rules" as such so bookies are just doing these things in a seemingly haphazard and inconistent manner. Combine that with the fact that 95% of social media as absolute nonsense and the picture becomes even more fuzzy. I've still yet to actually converse with ANYONE directly who has been asked to provide details for an affordability check - everything is a third party account from questionable sources.

I was deeply concerned for a while and it still is worrying but I've given up worrying about it too much now because there are just too many unknowns.

---

## 2023-09-06 07:09:41 - general channel

**Jorge**

Done [https://github.com/betcode-org/faq/pull/3](https://github.com/betcode-org/faq/pull/3) [@U9JHLMZB4](@U9JHLMZB4)

---

## 2023-09-05 21:51:15 - random channel

**ShaunW**

Perfect choice of lolly. Congrats Liam a million is something special.  I'm not sure about the £1 per download [@UQL0QDEKA](@UQL0QDEKA), if they all had a £1 bet sometimes it would help:grin: .

---

## 2023-09-05 18:50:58 - general channel

**sartux**

Hello guys, I have a problem with cashing out through betfairlightweight.



When I need to close a position, I execute an opposite entry calculating the size in relation to the price.



If I make a request to see the open positions, I get 2 positions instead of 0. How can I only see the positions that are actually still open, discarding those where I carried out the cash out?

---

## 2023-09-05 17:21:39 - general channel

**Mo**

Obviously (?) betfairutil is just using betfairlightweight to read a series of market books; prices_file_to_data_frame is concatenating a series of data frames, one for each market book. Technically there are two market books with that publish time but one contains no prices so you're not seeing that one, you're seeing the previous one

---

## 2023-09-05 17:11:36 - general channel

**John Foley**

the streaming update in the line i shared - those zeroes mean there’s no longer any liquidity available for any of the prices in those tuples, right? as opposed to “no update”

---

## 2023-09-05 17:02:17 - general channel

**Mo**

Yeah but what I mean is, look at what you have for the previous timestamp then work out what you should get if you apply the streaming update in the line you shared

---

## 2023-09-05 16:47:19 - general channel

**Mo**

Sounds like you are trying to compare the state of the cache with one streaming update?

---

## 2023-09-05 13:50:07 - strategies channel

**liam**

Hmm yeah I think that should work but I think my problem is that I have shifted the orange graph by adding 'd' to the x axis

---

## 2023-09-05 12:37:28 - betconnect channel

**Jimmy**

Hi [@UBS7QANF3](@UBS7QANF3), we are looking into these problem bets now 

---

## 2023-09-05 12:22:49 - betconnect channel

**Mo**

I think we've established this is not a known problem which is a surprise given the high proportion of bets I've had it happen on. This suggests perhaps it's something sport specific if those of you who have engaged are not placing (many) football bets



I can take it up with support or privately with the BetConnect guys on here

---

## 2023-09-05 10:06:18 - random channel

**Unknown**

Big day for [https://www.pepy.tech/projects/betfairlightweight|betfairlightweight](https://www.pepy.tech/projects/betfairlightweight|betfairlightweight)

---

## 2023-09-04 21:32:44 - issues channel

**foxwood**

Extract from log for that market shown below from placing bet onwards -  think I've identified the origin of the log messages correctly ...



`{"asctime": "2023-09-04 13:12:30,255", "levelname": "INFO", "message": "Order status update: Executable", "market_id": "1.217888463",`

`{"asctime": "2023-09-04 13:13:41,499", "levelname": "INFO", "message": "Updated marketCatalogue for 1.217888463"`

`{"asctime": "2023-09-04 13:15:41,582", "levelname": "INFO", "message": "Updated marketCatalogue for 1.217888463"`



	market.close_market() produces next line

`{"asctime": "2023-09-04 13:15:52,069", "levelname": "INFO", "message": "Market 1.217888463 closed", "market_id": "1.217888463"`

	mystrat.process_closed_market()	produces next line

`{"asctime": "2023-09-04 13:15:52,069", "levelname": "INFO", "message": "319679639999,stratXXXX,OrderStatus.EXECUTABLE"}`

	BaseFlumine._process_close_market() produces next line

`{"asctime": "2023-09-04 13:15:52,069", "levelname": "INFO", "message": "Market closed", "market_id": "1.217888463"`



`{"asctime": "2023-09-04 13:15:52,444", "levelname": "INFO", "message": "Order status update: Execution complete", "market_id": "1.217888463"`

`{"asctime": "2023-09-04 13:16:27,594", "levelname": "INFO", "message": "1.217888463: 1 cleared orders found, more available: False"}`

`{"asctime": "2023-09-04 13:16:27,609", "levelname": "INFO", "message": "Market cleared", "market_id": "1.217888463", "order_count": 1`



Edit; the bet was a "take" and BF accounts show matched at asked odds. Also the "executable" line above shows fully matched at asking price - so the issue is that the bet was still showing as executable until after close market - I didn't see it since I only report execution complete orders when deriving PL etc - maybe that's my fault then ?

---

## 2023-09-04 15:17:37 - general channel

**Y B**

Could somebody please help with a n00b question regarding historical football market data: why are there multiple unique MarketStartTime within a single event?

---

## 2023-09-04 13:31:19 - general channel

**Jorge**

Is it this one [https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|orders.py](https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|orders.py) ? Will try it

---

## 2023-09-04 12:30:14 - strategies channel

**Paul**

Because the approach you’re taking with random forest is classification, but the problem you’re struggling with trying to wrap your head around sounds like a control problem (which is reinforcement learning).

---

## 2023-09-04 11:22:07 - general channel

**liam**

[https://github.com/betcode-org/faq/pulls](https://github.com/betcode-org/faq/pulls)

---

## 2023-09-04 10:30:45 - random channel

**foxwood**

Trivial change for me - my usage is in a commonly used utility function so just one liner across everything. I do doctor the output probs to scale up to a minimum probability of 0.001 to keep things in line with maximum BF odds which is one of the reasons it's buried in a function. My odds are already in a known selection order in the list argument so as long as they come back in the same order (!) the mapping is known. Tried several methods for removing the margin from the book and shin "feels" about right.



Edit: Shows how un-python I am compared to your stuff - I take 2 lines to do it

`shinDict = shin.calculate_implied_probabilities(odds)`

`probs = shinDict.get(*"implied_probabilities"*)`

---

## 2023-09-02 10:03:21 - general channel

**Mo**

[https://github.com/betcode-org/flumine/issues/522|https://github.com/betcode-org/flumine/issues/522](https://github.com/betcode-org/flumine/issues/522|https://github.com/betcode-org/flumine/issues/522)

---

## 2023-09-01 22:07:59 - general channel

**Peter**

It does. Though every update (line) has `"clk": null` . I'm hoping that I can avoid the need to unpack and pre-process every file before streaming the updates. I'm not understanding why `null` is being treated as an invalid type.

---

## 2023-09-01 21:11:03 - general channel

**Mo**

I have an idea for how to do this that should be quite fast, will add it to betfairutil tomorrow 

---

## 2023-08-30 19:07:44 - general channel

**Andrey Luiz Malheiros**

Thank you, George!

Following this idea, another question arose. When using FILL_OR_KILL, does Betfair attempt to match my order with the best available prices? For instance, if I place an order with a size of 10 and odds of 5 using FILL_OR_KILL, and in the order book there are bets with a size of 5 and odds of 6, and another bet with a size of 5 and odds of 5, will my average_price_matched end up being 5.5?

---

## 2023-08-29 20:01:04 - general channel

**liam**

So in flumine we use a timeout on the queue to push a snap of the stream cache, you can see the logic here or just migrate to flumine and never think about this again…



[https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/streams/marketstream.py#L59|https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/streams/marketstream.py#L59](https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/streams/marketstream.py#L59|https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/streams/marketstream.py#L59)

---

## 2023-08-29 19:10:51 - general channel

**AI Trader**

[@U4H19D1D2](@U4H19D1D2) I keep a local cache with my open orders. If for some reason, I manually cancel an order though the UI and I receive the orderbook update thorugh the stream before I receive the order update, my internal cache will think I still have that order open and do nothing. I only react to book updates (not order updates), so when I finally receive the order update, I will update the order cache, but I will only replace the order when I receive a next orderbook update thorugh the stream (which in small markets might take quite a while). This is not a problem only in case of manual cancels thorugh the UI, but also if there is an order fill.

---

## 2023-08-29 19:08:10 - issues channel

**foxwood**

When a runner is removed on dogs, BF zap the market and a packet comes through with `market_book.total_matched == 0` all price lists in `market_book.runners.ex` are empty and there is no `'tv'` in `market_book.streaming_update`. Discovered some of my strategies do stupid things when this occurs. I can work around it in `check_market_book()` but wonder if there could/should be some flag set in flumine to indicate a market has been reset and/or that the book is empty for this packet ?

---

## 2023-08-29 17:56:43 - general channel

**Johnny**

... and now as a side quest I will go and learn about how to search for strings in massive text files

---

## 2023-08-29 17:31:19 - general channel

**Johnny**

Hi all, hope you had a fruitful bank holiday... potential noob question again so apologies if it's documented somewhere (in which case please could you point me in the direction of the page).



Using marketrecorder.py and flumine, mainly based on the examples, I have recorded something like 30,000 markets.   It looks like the market catalogue files (.json.gz) are saved for only about 10,000 of them, so there are a load of market stream text files which don't have the metadata stored.  Is there a way to get the market catalogue data retrospectively?  And does it sound like I am using the recorder incorrectly for this to happen in the first place?

---

## 2023-08-29 15:51:48 - general channel

**AI Trader**

Hi guys,

Using betfairlightweight, if I subscribe to the order stream with a conflate parameter equals to None, what will be used by betfair? I tried to look up the documentation and could not find a default value. I also tried to check the messages to see if I could find this values somewhere, and I couldn't. Thank you so much

---

## 2023-08-29 13:15:27 - general channel

**Jorge**

Hi, I want to extract the prices from my recorded file just before a dog race. I know how to do this in a Soccer game, I search for the moment where the market_book['inplay'] is True and I take the previous market_book. But no clue on how to do it in dog races

---

## 2023-08-29 09:41:39 - general channel

**Mo**

Also depends on why you think you’re finding value in these situations. If you think the market is completely bonkers for long periods of the event then it’s not helpful to use the market to calculate EV. On the other hand if you think you’re profiting off short term mispricing then it makes perfect sense to evaluate the bets once the market has adjusted

---

## 2023-08-29 09:32:27 - general channel

**Mo**

It’s more about expected value assuming BSP is true rather than profit at BSP



For me, this is the approach but the problem is what to use as fair value in contexts where BSP is not available. For example, in play

---

## 2023-08-26 15:01:23 - general channel

**liam**

Are you not streaming?

---

## 2023-08-26 14:56:05 - general channel

**Pos**

[@UUE6E1LA1](@UUE6E1LA1) noob question, when you search for markets with same event name/date, do you use listMarketCatalogue?

---

## 2023-08-26 14:27:17 - general channel

**liam**

Flumine user?

---

## 2023-08-26 11:16:36 - betconnect channel

**Peter**

From the answers I've had to questions to them, I would expect that it is. So certainly worth asking :+1:

---

## 2023-08-26 11:12:11 - betconnect channel

**Mo**

Understood RE: multiple matches but then my question is simply how to get the times (and sizes) of individual matches? From your answer it sounds like this is impossible from the API?

---

## 2023-08-25 14:46:43 - random channel

**Mo**

Obviously a great way to score predictions is to backtest but that has its own set of problems (e.g. computational cost, double counting liquidity etc. etc.)

---

## 2023-08-25 14:44:31 - random channel

**Mo**

I think this is simply an open problem and one which doesn't seem to get much attention in academia



My intuition is that if you subsample to some reasonably small number of predictions per event then everything about state dependence (scoreline, time remaining, etc. etc.) comes out in the wash (provided you have a large enough sample of events)

---

## 2023-08-25 14:04:46 - general channel

**Mo**

Standard practice is to have a separate bankroll for each event

---

## 2023-08-25 13:12:45 - random channel

**Mo**

One of the entrants to the Women's World Cup prediction competition I was helping to organise has released his contribution, a novel method for removing the overround from odds: [https://github.com/gotoConversion/goto_conversion](https://github.com/gotoConversion/goto_conversion)



Looks intriguing but unfortunately my method of scoring predictions on my data set doesn't agree with his results (my conclusion is Shin is still better)

---

## 2023-08-24 17:40:03 - strategies channel

**Y B**

Question about reference data. Where do you get reference data about football teams? i.e. trying to have a strict mapping between a team name and its ID, league refdata (what teams are playing, etc.)?

---

## 2023-08-24 08:14:04 - general channel

**liam**

I assumed [@U03N4QBJ0TV](@U03N4QBJ0TV) wasn't a flumine user (yet)

---

## 2023-08-23 22:51:46 - strategies channel

**Y B**

Thanks, that's helpful.

---

## 2023-08-23 14:30:19 - strategies channel

**R**

no need for numerical solvers in explicit mutual exclusive cases, it can be solved analytically

---

## 2023-08-23 12:39:02 - issues channel

**liam**

Try using a single [https://betcode-org.github.io/flumine/markets/#transaction|transaction](https://betcode-org.github.io/flumine/markets/#transaction|transaction), this will mean all requests will be sent in one request



```with market.transaction() as t:

    for order in orders_to_cancel:

        t.cancel_order(order, size_reduction=1)```

---

## 2023-08-23 12:36:46 - strategies channel

**liam**

Yes yes



[https://betcode-org.github.io/flumine/clients/](https://betcode-org.github.io/flumine/clients/)

---

## 2023-08-23 10:34:29 - issues channel

**Harry Corrigan**

Hi, does flumine support cancelling multiple orders at once? if so how?

i want to size reduce multiple orders to a volume less then 1, however by the time i've cancelled one order the others have been matched

wondering if theres a better/faster way to do this?

---

## 2023-08-23 09:57:07 - random channel

**D C**

Thinking of using flumine to backtest but I am pretty sure my data exists in a format slightly different to that recorded by bflw and/or betfair pro data. Basically can someone tell me how I need to modify it or provide a couple of lines example code from a flumine/bflw recorded market log?



My data is recorded as a | delimited string on a per market basis as follows:



message receive timestamp | pt extracted from main message | JSON string of market change message extracted from the list in the main message



Basically I parse a message, Identify market for each individual msm contained in the mc list and write that mc to the log file for the market in question. Also scattered in the file are calls to response of listMarketCatalogue that I will call whenever a suspension is detected (easily identified and removed).



In short, how much alteration is required to get into a flumine compatible format?

---

## 2023-08-22 20:47:07 - random channel

**PeterLe**

[@U4H19D1D2](@U4H19D1D2) Ive just found it an interesting topic. The standout for me is that there is no right or wrong way of doing it. Is all subjective. I thnk it helps if you have a good understanding of the markets to start with.

---

## 2023-08-22 19:23:40 - random channel

**PeterLe**

Sorry forgot....I also thought that this would lend itself well to including TPD data too..

I do have the feed in the betfair API and I record it using a C# program

I dont have Flumine recording it (I dont know who to do this just yet)

I might test TPD inisolation in the future? :+1:

---

## 2023-08-22 14:58:55 - random channel

**Newbie99**

Cool thanks, that is very helpful, will be interesting to explore!

---

## 2023-08-21 13:24:57 - random channel

**Unknown**

Did you know the Betfair API has documentation?

---

## 2023-08-21 11:24:47 - general channel

**Rishab**

looked at the git examples and the market.py in flumine, dont see anything that can increase the size of order. Confused if it's bec when u increase the size u lose priority. So is that the reason why it's not there or simply I'm missing some function?

---

## 2023-08-21 08:55:58 - strategies channel

**liam**

Thanks [@U04980ZT6UX](@U04980ZT6UX) that all makes sense, I am going to get stuck back into this soon, just looking for an easier problem to tackle

---

## 2023-08-21 08:39:45 - general channel

**Frenkie**

ok got it, thanks for your help [@U04H54Q392N](@U04H54Q392N) [@U04980ZT6UX](@U04980ZT6UX)

---

## 2023-08-20 21:49:27 - general channel

**AI Trader**

Not sure I understand the question, but I don't think you can cancel a size higher than the size of any individual order. I think in your example, you need to internally figure out that you need to cancel entirely the order of size 10 and partially cancel 3 USD out of the 5 USD of the second order.

---

## 2023-08-20 21:43:49 - general channel

**AI Trader**

Hi #Flumine users,

Could someone explain why this is required?



```            if (

                order.bet_id and order.bet_id != current_order.bet_id

            ):  # replaceOrder handling (hacky)

                order = markets.get_order_from_bet_id(

                    market_id=current_order.market_id,

                    bet_id=current_order.bet_id,

                )```

[https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/order/process.py#L63](https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/order/process.py#L63)

---

## 2023-08-20 18:17:35 - general channel

**Mo**

Conflation happens when you are not pulling the data off the socket fast enough. By definition, if it's happening then you are spending too much time handling the data. Whether it matters or not is another question

---

## 2023-08-20 15:10:25 - general channel

**Y B**

That's very helpful, thanks

---

## 2023-08-19 23:13:25 - general channel

**Mo**

1. `flumine.utils.price_ticks_away(2.1, -2)`

2. `betfairutil.make_price_betfair_valid(2.0657, betfairutil.Side.LAY)`

---

## 2023-08-19 14:54:51 - strategies channel

**thambie1**

Not seeing any issues (though not using BFLW/Flumine)

---

## 2023-08-19 09:33:27 - general channel

**PeterLe**

No it wasn’t anything wrong with flumine/ bflw. It seems crazy that I can only put 5000 tx combined total across all my sub accounts (500 each) whereas my wife who only has a single account can put 5000 through hers. Betfair could do with bumping it up a bit. I’ve only incurred a charge twice in recent times as most offset against comm. 

---

## 2023-08-18 22:08:05 - general channel

**liam**

I assume not because of flumine / bflw being incorrect?

---

## 2023-08-18 18:16:10 - issues channel

**Derek C**

I think it's EX_ALL_OFFERS - includes everything. Your comment made me read the documentation more carefully :slightly_smiling_face:

---

## 2023-08-18 18:04:52 - issues channel

**D C**

I can't speak for flumine but in stream terms I THINK that you can only request ladder levels on the virtual/display prices not nonvirtual (datb vs atb)

---

## 2023-08-18 18:03:39 - general channel

**Mona**

Hi guys, is there a way to retrieve runner names (horse names) from the MarketBook objects? I noticed the runner names are available in the MarketCatalogue objects but they return None sometimes from the streaming using Flumine?

---

## 2023-08-18 10:32:53 - issues channel

**Peter**

[https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py](https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py)

---

## 2023-08-18 05:53:52 - betconnect channel

**Troy Edwards**

No worries Mo.  Thanks I'll post the question over there.

---

## 2023-08-18 03:03:38 - betconnect channel

**Mo**

You’re asking for Betfair help in a channel for BetConnect. You’ll have better luck asking in a more appropriate channel like [#C4H05ML2E|issues](#C4H05ML2E|issues) 



Most likely explanation is a temporary problem on Betfair’s end

---

## 2023-08-17 14:41:11 - random channel

**Lee**

Just looked at the changes, its’s a very nice example how to use rust with python

---

## 2023-08-17 13:47:18 - general channel

**George**

I think the bigger issue with the current exposure function is like this:

Let's say we back runner 1 for £25 and lay runner 2 for £10 @ 1.5

Now let's say we want to know our exposure on runner 2.

The function will return £5 because of the lay order only.

I would argue the correct value is £30 and therefore the exposure management in flumine is not applied correctly.

---

## 2023-08-17 08:19:24 - general channel

**Frenkie**

got it, thanks for your help

---

## 2023-08-17 08:14:00 - general channel

**George**

I don't think it's silly to think about putting an s3 upload at the end of process_cleared_orders_meta. If I'd done that I would have overwritten all my log files. So it could have been an issue!



In general I find logging the most confusing part of the whole coding universe. It doesn't help that python's logging module is very weird.

---

## 2023-08-16 16:58:37 - general channel

**Mo**

I'm bumping up against the limitation of my flumine knowledge here but personally I handle this kind of situation by having the S3 upload handled by a completely separate process (cron job) which will allow time for these kind of appends to log files before compressing and uploading the log files to S3

---

## 2023-08-16 16:31:18 - general channel

**George**

I have noticed that, when using a logging control, `_process_closed_market` and `_process_cleared_orders_meta` often get called twice. The second call is often around an hour later than the first.



In theory, this should not be a big deal - I can just ignore the repeated log lines that I don't need. However, I want to start uploading my log files to s3. I am planning to put an s3_upload call at the end of `_process_cleared_orders_meta`. But if I do this, I'll upload to s3 twice, and the second upload will overwrite the first.



I can turn on versioning, but that's not really the point, because the first log file is the 'correct' one and the second should not (in my mind) be appearing at all.



Has anyone noticed this problem and found a way to resolve it?

---

## 2023-08-16 09:14:40 - issues channel

**liam**

Any volunteers?



[https://pypi.org/project/betfairlightweight/2.18.0/](https://pypi.org/project/betfairlightweight/2.18.0/)

---

## 2023-08-16 08:46:53 - issues channel

**liam**

[@UBS7QANF3](@UBS7QANF3) does this PR make sense? I am obviously very wary of changing much of this as a lot hasn't been touched since 2016!



However the issue seems to be coming from sending requests but not waiting for the response. I still think there is a race condition on the betfair side but this should stop any issues.



[https://github.com/betcode-org/betfair/pull/532](https://github.com/betcode-org/betfair/pull/532)

---

## 2023-08-15 23:52:33 - general channel

**Rishab**

Wasn't generating it earlier. Logs solved the issue, had to change the max_order_exposure. Thanls

---

## 2023-08-15 22:44:58 - general channel

**mzaja**

[@UUE6E1LA1](@UUE6E1LA1) The PENDING status I am getting is Flumine's PENDING status, not Betfair's. Flumine puts the order into PENDING as soon as it's submitted for execution, for the reasons I explained about. I guess that is what the confusion was about. Those states displayed in the original post are Flumine's internal bet states, not Betfair's.

```

class OrderStatus(Enum):

    # Pending exchange processing

    PENDING = "Pending"

    CANCELLING = "Cancelling"

    UPDATING = "Updating"

    REPLACING = "Replacing"

    # Completed

    EXECUTABLE = "Executable"  # an order that has a remaining unmatched portion

    EXECUTION_COMPLETE = "Execution complete"  # an order that does not have any remaining unmatched portion

    EXPIRED = "Expired"  # order is no longer available for execution due to its time in force constraint

    VIOLATION = "Violation"  # order never placed due to failing controls```

---

## 2023-08-15 22:29:23 - general channel

**mzaja**

I assume it is a state Flumine internally assigns to all orders which have been sent to the thread pool for execution. One needs to register a bet as soon as it's been submitted because otherwise the bot will go haywire and place hundreds of them in a second.

---

## 2023-08-15 22:12:18 - general channel

**mzaja**

I wonder where that EXPIRED comes from... AFAIK, Flumine uses order streaming and not poling to retrieve bet states. I have just done an experiment with placing FOK bets and they go to EXECUTION_COMPLETE regardless of whether they are matched or not. Here is the data. The first order is matched, the second is cancelled ("sm"/"sc"). They both go straight to "EC" for status, which stands for EXECUTION_COMPLETE.

```{'id': '1.216407624',

 'orc': [{'id': 39674645,

          'uo': [{'id': '317109322476',

                  'p': 1.94,

                  's': 1,

                  'side': 'L',

                  'status': 'EC',

                  'pt': 'L',

                  'ot': 'L',

                  'pd': 1692133287000,

                  'md': 1692133287000,

                  'avp': 1.94,

                  'sm': 1,

                  'sr': 0,

                  'sl': 0,

                  'sc': 0,

                  'sv': 0,

                  'rac': '',

                  'rc': 'REG_GGC',

                  'rfo': '',

                  'rfs': ''}],

          'ml': [[1.94, 1]]}]}

{'id': '1.216407624',

 'orc': [{'id': 39674645,

          'uo': [{'id': '317109323812',

                  'p': 1000,

                  's': 1,

                  'side': 'B',

                  'status': 'EC',

                  'pt': 'L',

                  'ot': 'L',

                  'pd': 1692133289000,

                  'sm': 0,

                  'sr': 0,

                  'sl': 0,

                  'sc': 1,

                  'sv': 0,

                  'rac': '',

                  'rc': 'REG_GGC',

                  'rfo': '',

                  'rfs': '',

                  'cd': 1692133289000}]}]}```

---

## 2023-08-15 21:45:07 - general channel

**mzaja**

Calling listCurrentOrders will do no good because it'll miss any intermediate states, I've read the docs and you are right, there is no mention of EXPIRED anywhere. However, I do wonder if the documentation is perhaps not up to date.



I have not been placing the orders with the async flag. Don't really see a point in doing it because the orders are submitted to the thread pool anyway, so from Flumine's perspective it's all asynchronous anyway.

---

## 2023-08-15 20:41:29 - general channel

**mzaja**

[@UUE6E1LA1](@UUE6E1LA1) That is what I think as well. In this PR [https://github.com/betcode-org/flumine/pull/655](https://github.com/betcode-org/flumine/pull/655)  I assumed that they all go PENDING -&gt; EXECUTION_COMPLETE, but it seems they can also go to EXPIRED as well. It would be good to capture raw responses of the Betfair order stream with bflw and check.

---

## 2023-08-15 16:28:02 - issues channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) just reviewing our background to the issue when we first observed it and put in our workaround. I believe the issue is here: [https://github.com/betcode-org/betfair/blob/7118b471e61282d87630bcdc5d6de6b69a59cfa6/betfairlightweight/streaming/betfairstream.py#L284-L285](https://github.com/betcode-org/betfair/blob/7118b471e61282d87630bcdc5d6de6b69a59cfa6/betfairlightweight/streaming/betfairstream.py#L284-L285). I think we need to wait for the [https://docs.developer.betfair.com/plugins/servlet/mobile?contentId=6094862#ExchangeStreamAPI-Connection/ConnectionMessage|connection message](https://docs.developer.betfair.com/plugins/servlet/mobile?contentId=6094862#ExchangeStreamAPI-Connection/ConnectionMessage|connection message) before sending the authentication message

---

## 2023-08-15 14:53:11 - strategies channel

**liam**

I imagine the red line probably is optimal due to matching / adverse selection, plotting ROI can help visualise as I imagine it starts high and drops as x increases 

---

## 2023-08-15 14:36:55 - general channel

**D C**

Surely for fill or kill, the order status should go straight from "pending" to "execution_complete" ? And would you not only get "pending" if placing it with the async flag? I'm assuming here you are talking about pure bet operations and that "pending" refers to bet status and is not artificially set by flumine of course?

Edit: Or "Pending" to "Expired" in case of failure to match.

---

## 2023-08-15 09:03:44 - FC_F05MTU6925R_Important links channel

**liam**

[https://slack.com/help/articles/14455334890259](https://slack.com/help/articles/14455334890259)

---

## 2023-08-15 06:06:12 - general channel

**Mo**

`streaming_update` field of the market book gives you the raw streaming update so you could check that for which runners have changes

---

## 2023-08-14 19:05:25 - general channel

**mzaja**

[https://github.com/betcode-org/flumine/issues/681](https://github.com/betcode-org/flumine/issues/681)

---

## 2023-08-14 18:38:57 - general channel

**Lee**

Looks like i’ve narrowed the issue down to [https://github.com/betcode-org/flumine/blob/master/flumine/order/process.py#L88|here](https://github.com/betcode-org/flumine/blob/master/flumine/order/process.py#L88|here). order.bet_id is None with status PENDING, current_order.bet_id is set and status is EXECUTION_COMPLETE.

---

## 2023-08-14 17:06:07 - general channel

**Lee**

Yeah the flumine logger

---

## 2023-08-14 17:03:55 - general channel

**mzaja**

Sorry, what do you mean by "normal logs"? This is all from the root Flumine logger. Looking at the code, `BaseOrder.__update__status()` logs a message whenever its status is updated. If the message is not logged, it means the order status did not change. The status should change to "Execution complete" because the order is fully matched, and most of the time it does. But, occasionally it does not for some reason. I am trying to figure out what the reason is.

---

## 2023-08-14 16:33:39 - general channel

**mzaja**

[@UUCD6P13J](@UUCD6P13J) I am using default Flumine's logging controls. Log it to JSON, read and extract data of interest in a script.

---

## 2023-08-14 16:32:14 - general channel

**mzaja**

[@U4H19D1D2](@U4H19D1D2) I believe this example would work if you change line 59 to `order_type=LimitOrder(lay, self.context["stake"], time_in_force="FILL_OR_KILL"),` . All that is needed is to place FILL_OR_KILL orders and check the order stream.

[https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/examples/strategies/lowestlayer.py#L59](https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/examples/strategies/lowestlayer.py#L59)

---

## 2023-08-14 15:51:29 - general channel

**Mona**

that is very helpful, thank you Mo

---

## 2023-08-14 15:34:35 - general channel

**Mo**

[https://github.com/betcode-org/betfair/blob/7118b471e61282d87630bcdc5d6de6b69a59cfa6/examples/exampleone.py#L55C3-L57](https://github.com/betcode-org/betfair/blob/7118b471e61282d87630bcdc5d6de6b69a59cfa6/examples/exampleone.py#L55C3-L57)

---

## 2023-08-14 15:14:55 - general channel

**Mona**

Hi all, this is quite basic, can anyone help with what `price_projection` should look like in the `list_market_book` function, I am trying to get the best offers for each runners for a particular market  and the result doesn't seem to show anything other than last traded price. Appreciate the help

---

## 2023-08-14 12:40:07 - general channel

**casper**

Hey [@U4H19D1D2](@U4H19D1D2)! Is there a particular reason not to bump the requests module for bflw? urllib3 2.0 issues?

[https://github.com/betcode-org/betfair/pull/525](https://github.com/betcode-org/betfair/pull/525)

---

## 2023-08-14 12:15:59 - general channel

**liam**

You could modify [https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|this](https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|this) worker example to pull them in

---

## 2023-08-14 09:37:29 - issues channel

**Johnny**

I had the same problem recently and found this question has been asked about 3 times in the last 90 days / slack channel history ... maybe time to add to the FAQs?

---

## 2023-08-14 09:31:55 - random channel

**D C**

Yeah all good points Mo. That is the problem with something async but internally queues it without any means of letting you know. Piss poor but I suppose it works for most people's needs. I think I will start to move to flumine just to gather data which should allow me to get used to the code base. At same time I will give the suggestion of [@UHV5QTKDZ](@UHV5QTKDZ) a go because this actually doesn't look like too much work but also integrates with the rest of my code base.

---

## 2023-08-14 08:31:03 - general channel

**liam**

No, [https://betcode-org.github.io/betfair/streaming/#snap|snap](https://betcode-org.github.io/betfair/streaming/#snap|snap) the listener

---

## 2023-08-13 20:16:15 - issues channel

**Lee**

You can’t use market_filter with streaming

---

## 2023-08-13 20:13:22 - issues channel

**Michael**

Amazing thank you - is there any difference if I use market_filter over streaming_market_filter?

---

## 2023-08-13 16:58:13 - random channel

**D C**

But I am soon to roll out some new strategies, so this will again be an issue going forwrad. Hence the trying to get some help from the 3rd party support or writing out my own thread pools, or using flumine instead.

---

## 2023-08-13 16:41:50 - random channel

**Lee**

Yeah that doesn’t sound right, even with the 1 second delay never had a problem like that.

---

## 2023-08-13 00:01:47 - issues channel

**Lee**

Flumine will handle restarting it for you

---

## 2023-08-12 22:05:58 - general channel

**joe taylor**

Okay but being on the laying side shouldn’t this help me generally?

---

## 2023-08-12 21:57:43 - general channel

**Joe Bloggs**

*Cunningham's Law* states "the best way to get the right answer on the internet is not to ask a question; it's to post the wrong answer."

---

## 2023-08-12 21:03:02 - general channel

**George**

the bigger question is why are you paying 5% commission on Betfair?

---

## 2023-08-12 20:42:26 - general channel

**Mo**

Doesn’t matter. Read the thread. Point is - no need to have any meta data in the file system. Put it in a database instead

---

## 2023-08-12 18:24:45 - general channel

**PeterLe**

quick question please..re `max_selection_exposure=30`,

Given this scenario: two horse race, both horses laid at 1.8 for £1.

Does it calculate the exposure on each selection taking into account the bets on the the other selections?

Ie would it be calculated in flumine as an exposure on each at - 0.80p or a +0.20 on each?

I'm sure its the latter but wanted to check. Would anyone know please? Thanks



Edit ; Its the former.

---

## 2023-08-11 19:46:17 - random channel

**liam**

Anyone tried this on flumine yet?



[https://github.com/sybrenjansen/mpire|https://github.com/sybrenjansen/mpire](https://github.com/sybrenjansen/mpire|https://github.com/sybrenjansen/mpire)

---

## 2023-08-11 16:47:01 - strategies channel

**Mo**

Fair question but no idea. Never used numba. I do have some components that are pure Rust so it is personally helpful for me to practice my Rust

---

## 2023-08-11 16:45:19 - strategies channel

**Clive**

Sorry, poorly worded question. It was more do you pay less going over the Python to Rust vs using something like numba? Given you ported a scipy minimisation, couldn't you just write the  heavy bit with numba.

---

## 2023-08-11 16:44:38 - issues channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/examples/simulate-sportsdata.py|example](https://github.com/betcode-org/flumine/blob/master/examples/simulate-sportsdata.py|example)



[https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/markets/middleware.py#L292|logic](https://github.com/betcode-org/flumine/blob/796ec51060328edac7e14678c6defd63a964d250/flumine/markets/middleware.py#L292|logic)

---

## 2023-08-11 16:42:57 - issues channel

**Clive**

Is there a recommended way to plugin your own backtest data for a given event, and get it interleaved with the existing ordering?



I've played around with adding a CustomStream, that gives back a generator, however, it appears the "FlumineSimulation" class requires a MarketBook to be passed back, as that's all it appears to handle see L64 in simulation.py with the call to

```self._process_market_books```

Perhaps I'm barking up the wrong bush.

---

## 2023-08-11 16:32:29 - strategies channel

**Clive**

Does it help it being in Rust? Or is it an educational project?

---

## 2023-08-11 16:21:26 - strategies channel

**Mo**

I did take a good look a while ago due to our previous discussions about having the betfairlightweight classes implement __getitem__ and there were some things Rob was doing that I couldn't get my head around. Might take another look again soon

---

## 2023-08-11 07:31:24 - strategies channel

**liam**

Missing competitionId is a limitation of the stream, country_codes does work and you can give market_filter a list of filters in flumine 

---

## 2023-08-11 05:20:56 - strategies channel

**James**

Can I use a country market filter or alike to filter for the womens world cup/Fifa/uefa comps?

When looking at the navigation it returns an empty string as the country code for these competitions, I haven’t dug deeply enough into flumine to confirm, but I get the impression that I’m not being streamed the market data for these markets when I use a country filter of

```market_filter=streaming_market_filter(

    event_type_ids=["1"],  # Soccer

    country_codes=[''],

    market_types=selected_market_types,

)```

Is there a way to filter to international football? Or do I have to stream all football markets in every country for fifa/uefa comps?

---

## 2023-08-10 21:00:51 - general channel

**PeterLe**

I noticed something strange on the 20:23 At Salisbury. Two of my python strats fired in bets (which should be for inplay only) at around 20:06 (So before it actually went in play). It also happened on one of my C# programs as well. I can only assume that the inplay flag must have been set momentarily for a split second? Just wondered if anyone else noticed it&gt;? Thanks

---

## 2023-08-10 15:29:27 - general channel

**Mo**

Personally I use Postgres. I have a market catalogue table that gets inserted into by scraping market catalogues on an hourly basis. I also have a database table for indexing S3 objects of different types, one of which is scraped prices files. One of the columns in this index table is market ID that can be used to join on the market catalogue table and then filter on anything contained in the market catalogue

---

## 2023-08-10 15:27:55 - general channel

**Jorge**

Do you create the table directly through Python? what kind of db do you use?

---

## 2023-08-10 12:48:55 - general channel

**Jorge**

I don't have experience with dbs but I guess it makes sense.. Any post about how to implement this lookup?

---

## 2023-08-10 12:28:15 - general channel

**Jorge**

Hey guys. How do you organize the recorded market files in S3? Until now I'm following the [https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py|marketrecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py|marketrecorder.py)  and my file structure is {event_type_id}/{streaming or marketCatalogue}/{year}/{month}/{day}/{market_id}.gz



I'm thinking of adding another level to separate by market_type, so it is easier/faster to backtest strategies only in a specific market_type (until now I had a condition in the check_market_book).

---

## 2023-08-08 22:45:27 - general channel

**MacrcoPolo**

Stupid question - can details of a runner in a market be altered without market being suspended?

---

## 2023-08-08 14:58:56 - general channel

**Lee**

You can use this [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|logging control](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|logging control) as a starting point to output bets into a csv, from there you just need to read the csv and plot how you’d like

---

## 2023-08-08 14:54:41 - general channel

**Lee**

the [https://betcode-org.github.io/flumine/|docs](https://betcode-org.github.io/flumine/|docs) have a simple example, which bit is not clear?

---

## 2023-08-08 13:22:23 - strategies channel

**D C**

[@U05L8PZD2FM](@U05L8PZD2FM) I meant more like does "technique X" (some ML algo that the world is currently excited about - tailored specifically to solve problems of type X) involve some optimisation step that uses a specific algorithm (Newton/Gauss-Newton/Levenberg-Marquardt etc) or is it left down to the user to choose the appropriate optimisation technique out of several choices. I don't want to pollute this thread so maybe if you had a decent suggestion for a good text you could DM it to me?

---

## 2023-08-08 12:54:56 - strategies channel

**Joe**

[@UUE6E1LA1](@UUE6E1LA1) if you mean non-linear programming as a cousin of linear-programming (simplex) with constraints then there are some similarities between them and back propagation training network weights for labelled data (e.g. for classification). If you have coded and watched simplex pivoting then you'd see the walk looks similar albeit the mechanism is entirely different. These all use the mathematical properties of at least some part of the function being optimised to navigate to local optima (global in the case of a simplex).

If the thing you are trying to optimise is not a differentiable function (say it is a bunch of branching stateful procedural code and data that when run with some parameters produces some cost) then you are into the murky world of metaheuristic search and unsupervised / reinforcement learning. You wont find much in the way of satisfactory justification for why these techniques yield decent results nor how to stabalise them so they don't get stuck in dead ends, or massively overfit (backing brown dogs from trap 3 on Tuesday mornings yields 1000% ROI).

---

## 2023-08-08 12:28:27 - strategies channel

**D C**

ChatGPT not cracket global optimisation problems yet then? What a scam. On a serious not though, as someone who has studied nonlinear optimisation but knows close to nothing about ML, are specific optimisation methods locked into each of these ML approaches? The entire field is a glut of terminology which I find very confusing and probably just relabelling stuff I've studied in the past. Can any of the experts here suggest a good intro to ML tailored to someone with classical inference and nonlinear optimisation background? I feel that if I could muster a bit of enthusiasm for ML via a decent entry text (rather than a python how to guide) it would be beneficial.

---

## 2023-08-08 06:41:02 - issues channel

**Mo**

Doesn’t sound like a problem on your end

---

## 2023-08-07 18:25:05 - strategies channel

**liam**

I don't even know how to describe it tbh and don't want to give too much away but it will give a percentage chance of winning

---

## 2023-08-07 18:17:22 - strategies channel

**liam**

Not giving up yet, I think the underlying problem is 'imbalanced classification' on winners/losers

---

## 2023-08-07 16:01:19 - general channel

**Peter**

It's designed to run continuously. Some of us have literally been running variants of it for years without stopping.



For your specific questions ... yes it will stop recording markets when they are closed. The last few lines you will normally see in a data file will be the messages showing the results and then the market closure. If you wish to stop it, yes, you can just kill the process. Alternatively you can use the termination middleware (see the examples folder) to stop the Flumine instance once all markets for the day have closed.

---

## 2023-08-07 14:25:48 - strategies channel

**liam**

Ok, I understand the problem but i don't understand the solution, what is a fold?

---

## 2023-08-07 13:02:39 - general channel

**Rishab**

Query regarding marketrecorder from flumine, if I run it for whole day would it automatically pause updating the files saving data for races that have already ended &amp; when want to ultimately stop the recorder(the whole process), is there any conditional attribute in the function that can be used or manually killing the process will work as well?

---

## 2023-08-06 12:59:00 - general channel

**liam**

Yeah why are you not using bflw for this? 



[https://github.com/betcode-org/betfair/blob/master/examples/examplestreaminghistorical.py|https://github.com/betcode-org/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/betcode-org/betfair/blob/master/examples/examplestreaminghistorical.py|https://github.com/betcode-org/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2023-08-06 12:22:06 - general channel

**Mo**

Aren’t you using betfairlightweight ?

---

## 2023-08-06 11:52:09 - general channel

**D C**

In question 1 you see [9,0,0] because that means that there is no price for that level. You can see this from the prior entry [8,1000.0,0.17] which is the max price available. Just because the stream can return up to 10 levels, it doesn't mean that all of those levels will contain a price. A price of 0 just means that there is nothing available for that level.

---

## 2023-08-06 11:45:43 - general channel

**AI Trader**

*Virtual prices streaming data parsing*



*Hi guys,*

So far I have been using raw prices data. I am now collecting virtual price data. I have a question on how to reconstruct the orderbook. There are some issues in the way I am doing it.

*Question 1:*

In the below update message, we see *[9,0,0] (bdatl for selection* 5817456). According to the format in the documentation, it should be [level, price, size]. Does it mean I've received an update of price 0? As far as I knew, prices were bounded between 1.01 and 1000. What does it mean?

{"op":"mcm","clk":"AL3t1wMA6rPdBACj+8sE","pt":1691192775815,"mc":[{"id":"1.216538196","rc":[{"bdatl":[[1,1.44,192.1],[2,1.46,22.47],[3,1.47,5.31]],"id":10782},{"bdatb":[[1,4.9,13.72],[2,4.8,6.8],[3,4.7,34.91],[4,4.5,15.72],[5,4.4,3.58],[6,4.2,2.38],[7,1.03,2],[8,1.01,6],[9,0,0]],"id":58805},{"bdatl":[[6,17,1.95],[7,18.5,2.38],[8,1000,0.17],[9,0,0]],"id":5817456}]}]}



*Question 2:*

When reconstructing the book, would it be correct to keep a cache with the [level, price, size] and update the level every time I get an update (this would assume the levels are consistent accross different updates)? I was doing something different before: I would keep a cache of [price, size] and ignore the level, and always construct the book snapshot by using the best prices in my cache. The problem it seems I am having with this approach is that I seem to be missing updates removing some levels, ie, I get an update with a level 0, but my cache still shows better prices with non-zero volume.

---

## 2023-08-06 09:54:05 - general channel

**Mo**

It's unclear if you're asking in general terms or about a specific repository but in the case of betfairlightweight, yes I went through the code to check it was suitable for my needs but no not specifically to check if it was stealing my credentials

---

## 2023-08-06 09:45:53 - general channel

**Kurosakura Cactus**

hi guys, strange question, but is anyoen else worried that using a library from online which takes id/pw as input might send your information to a different endpoint, and steal your info, and emulate the output?

---

## 2023-08-05 23:40:12 - general channel

**George**

Honestly I doubt there is a service aimed at the 'little guy' that offers both market data and order placement direct to exchange via python API, which is what we have with BF.

If there was - how would such a broker make money? They would have huge costs and no revenue.

You have to pay a commission or a margin somewhere.

It's possible to find positive EV in financial markets on paper for sure but my guess is it would be wiped out by the cost of execution.

---

## 2023-08-05 12:03:59 - strategies channel

**Unknown**

[@U02RN7YDRQ9](@U02RN7YDRQ9) I use .net ML as well as all other ML algorithms from python libraries. Here is the way I do it, comparing different ML strategies and using just profitable one/s.

---

## 2023-08-05 11:18:13 - random channel

**thambie1**

Just finished reading, vastly preferred it over 'The Man Who Solved the Market'. Had more of a narrative, given it was an autobiography. The Simons book often felt like a load of uninteresting facts to fill the space.

---

## 2023-08-05 09:32:51 - general channel

**Riccardo Fresi**

But for streaming I need a payment subscription?

---

## 2023-08-05 07:02:52 - general channel

**Andy**

I recently got it moved from 200 (default) to 1000. Was still having some issues at 1000 and asked for 1500. I was told it's only possible for them to set 1000 max on their end or unlimited.. and that only a few select large clients are unlimited.. I questioned that as hard to believe as it would surely just be a user variable change...sounds like suspicions confirmed :thinking_face:

---

## 2023-08-04 18:36:27 - strategies channel

**Leo**

Either a good choice imo, both blow rf out the water on the majority of problems 

---

## 2023-08-04 15:23:10 - general channel

**ShaunW**

Probably a question for a meetup (which I didn't go to) but how the heck do you get an AM?  Been profitable for years and not even a sniff of one. Maybe commission generated is the trigger? It's not like I actually need one, already have a very helpful contact, but for the sake of a fragile ego it would be quite nice.

---

## 2023-08-04 14:14:37 - general channel

**Mo**

1. inplayservice is OK for this: [https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py](https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py)

2. To receive price updates as efficiently and quickly as possible

3. not delayed. The delayed data is useless

4. you’ll have to collect this yourself

---

## 2023-08-04 13:59:31 - general channel

**Riccardo Fresi**

Hi, sorry to bother you, i don't get some things about the library:

1. is there any chance to have the score on real time (football for instance)

2. what is the purpose of streaming?

3. delayed or not delayed? how much are delayed the data?

4. any chance to have a free repository with data history since in italy seems we cannot purchase anything?

Thank!

---

## 2023-08-04 13:52:23 - general channel

**Rishab**

Hey [@UBS7QANF3](@UBS7QANF3) thanks for replying. So I have the betfair api, how do I get access to realtime horse position and all using this totalperformacedata?

---

## 2023-08-04 13:06:08 - general channel

**AI Trader**

thanks [@UBS7QANF3](@UBS7QANF3). Out of curiosity, could you point me to the documentation regarding this behaviour in the streaming? Thanks

---

## 2023-08-04 12:49:52 - general channel

**Mo**

This is called Rollup and defaults to the minimum stake size ie £1. I don’t believe you can override this with streaming, only listMarketBook

---

## 2023-08-04 12:44:12 - strategies channel

**Leo**

Also lightgbm is the way to go for almost all structured data problems these days 

---

## 2023-08-04 11:45:18 - general channel

**Unknown**

I think I've found the reason for such an apparent annomaly.



After exploring the virtual prices, I found out that the minimum size shown in the best level is 1 pound.



Upon looking at one of the apparent annomalies, it turns out that the best price available in the raw data has a size of 55 cents. And upon looking at the virtualised prices, we see a size of 13.85, which is exactly the sum of the size on the first and second levels of the raw data. So it seems betfair is showing the price of the second best level in the raw data for the virtualised data, and summing up their sizes.



I couldn't find this in the documentation though. If anyone has seen it somewhere and could share, that'd be great

---

## 2023-08-04 09:17:55 - issues channel

**Peter**

Exactly. Flumine has your back.

---

## 2023-08-03 19:47:04 - general channel

**Unknown**

I did. We are talking about a difference of more than 40 minutes though. From the documentation, it should lag ~100ms

---

## 2023-08-03 08:41:03 - issues channel

**Nacho Uve**

Yes, I had the same problem from Spain.

---

## 2023-08-02 18:26:05 - general channel

**Trex44**

Thanks guys. All the parameters are  very light computationally. I have built my own workers before so know how to do that but haven't built a middleware script. I see some examples on Github for middleware but no information on the 'Advanced' section of the Flumine page on how to implement it. How would I implement it once built?

---

## 2023-08-02 17:11:24 - general channel

**Peter**

... provided both strategies are running within the same Flumine instance.

---

## 2023-08-02 16:53:18 - general channel

**George**

I am using Flumine, and I am sometimes sending orders which are rejected by Betfair due to INSUFFICIENT_FUNDS (don't worry this isn't a sob story with a GoFundMe).



I am curious as to how Flumine stores those order objects. According to my logs, I believe these orders are stored with `bet_id` = None and `size_remaining` = full size and `size_cancelled` = 0. Is that correct?



Shouldn't they have `size_remaining` = 0 and `size_cancelled` = full size?

---

## 2023-08-02 15:20:50 - general channel

**liam**

Its all private for processing the streaming data, can you share some code (no usernames/pwds)

---

## 2023-08-02 14:36:49 - issues channel

**PeterLe**

Quick question please, if I wanted to alter the min_bet_size and min_bet_payout would I only have to change in currency_parameters ie does all other code refer back to that point? Thanks in advance

---

## 2023-08-02 14:08:08 - issues channel

**Mo**

That's helpful but there should also be a details tab where the certificate hierarchy is at the top

---

## 2023-08-02 13:39:18 - issues channel

**Mo**

As I asked, what version of Python are you running

---

## 2023-08-02 13:36:34 - betconnect channel

**Mo**

Also you are asking for help with Betfair in a channel about BetConnect. You're better off asking in [#C4H05ML2E|issues](#C4H05ML2E|issues)

---

## 2023-08-02 13:36:04 - betconnect channel

**Mo**

There's something wrong with the way you generated the certificate. To investigate further we need to know what version of Python you're running

---

## 2023-08-02 13:20:36 - issues channel

**liam**

Should be [https://github.com/betcode-org/flumine/blob/ff71b2b92c4a6ae53fb9cf83ec3b1bdf30e7da97/flumine/markets/middleware.py#L56|handled](https://github.com/betcode-org/flumine/blob/ff71b2b92c4a6ae53fb9cf83ec3b1bdf30e7da97/flumine/markets/middleware.py#L56|handled) as I assume the `runner.status` becomes REMOVED

---

## 2023-08-01 06:37:00 - general channel

**Mo**

&gt; Basically my query is- if I'm starting from strach what are the steps to backtest the tick-by-tick data in python. (Links for sample codes, etc)

Use flumine for backtesting. Look at the examples, especially this one: [https://github.com/betcode-org/flumine/blob/master/examples/simulate.py|https://github.com/betcode-org/flumine/blob/master/examples/simulate.py](https://github.com/betcode-org/flumine/blob/master/examples/simulate.py|https://github.com/betcode-org/flumine/blob/master/examples/simulate.py). And read the documentation: [https://betcode-org.github.io/flumine/|https://betcode-org.github.io/flumine/](https://betcode-org.github.io/flumine/|https://betcode-org.github.io/flumine/)

---

## 2023-08-01 06:35:18 - general channel

**Mo**

Check out [https://github.com/mberk/betfairutil](https://github.com/mberk/betfairutil). In particular, I think the `prices_file_to_data_frame` function will help you produce that time series

---

## 2023-07-31 23:03:54 - general channel

**Rishab**

Do you have a sample code to convert it in the time-series format? Also does using default libraries like betconect/flumine make the whole process easier?

---

## 2023-07-31 22:18:43 - general channel

**Paul**

Bz2 is short for “bzip2”. It’s a compressed format like zip. Python has a bz2 module or you can decompress it using a bzip compatible decompressor.

---

## 2023-07-31 22:16:09 - general channel

**Rishab**

Basically my query is- if I'm starting from strach what are the steps to backtest the tick-by-tick data in python. (Links for sample codes, etc)

---

## 2023-07-31 20:29:35 - issues channel

**Lee**

Update flumine 

---

## 2023-07-31 18:50:48 - general channel

**R**

[@U4H19D1D2](@U4H19D1D2) I was about to code similar, regex the market name and you're good to go.



But [@UBS7QANF3](@UBS7QANF3)’s suggestion makes it nice and clean.  Although I can't see this raceCard endpoint on the betfair API so that's confusing.



I'll try the API endpoint out first and if that works we're in business!  Cheers guys

---

## 2023-07-31 14:40:09 - general channel

**mzaja**

Hi everyone! I wrote this package for indexing captured Betfair stream data which you may find useful: [https://github.com/mzaja/betfair-database](https://github.com/mzaja/betfair-database)



If you have market catalogues stored alongside your stream captures, it parses them and stores them inside an SQL table together with the catalogue/stream data file paths. Then, you can write SQL queries to retrieve the paths to whatever subset of data you like.



Have a go at it, like, share, maybe even contribute... :blush:

---

## 2023-07-30 17:58:14 - general channel

**Mo**

[https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py](https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py)

---

## 2023-07-27 16:00:59 - general channel

**AI Trader**

Very helpful, thanks a lot [@UBS7QANF3](@UBS7QANF3)

---

## 2023-07-27 12:53:38 - general channel

**AI Trader**

Hi guys,

I am trying to reconstruct trades from the orderbook data collected using Flumine.

After sorting the orderbook snapshots by timestamp, I realized that sometimes, the runner_volume decreases (from quantities ranging from cents to multiple pounds). This would then generate trades of negative amount, which is absurd. Does anyone know what could be going on here? Thanks

---

## 2023-07-26 16:24:49 - general channel

**Michael**

Forgive my ignorance, but why are you using a django api to query the database essentially? Is there a benefit

---

## 2023-07-26 11:13:01 - strategies channel

**JazzMan**

UK Horse Racing, 30 minutes before start.

I had a problem last night where someone had reverse engineered my strategies.

Race 1 -£18

Race 2 -£25

Race 3 -£45

Race 4 -£83

This was after a very successful week, and never in 15 years have I lost £83 in 1 race. 

Complete waste of time on their part because I just pulled the plug on them.

That’s the problem when you manipulate the market, you’ll get short term gains.



---

## 2023-07-26 11:07:33 - issues channel

**liam**

'its fragile' is a comment on the way you are doing things not flumine

---

## 2023-07-26 11:06:27 - issues channel

**Harry Corrigan**

Yh flumine as a whole seems fairly sensitive to things I wouldn't automatically think of, but it works well when it does

---

## 2023-07-26 11:02:28 - issues channel

**Harry Corrigan**

It's started in its own thread for other reasons, literally just threading.Thread(target=flumine.start). start()

---

## 2023-07-26 11:01:14 - issues channel

**liam**

Run flumine in its own process, ideally main

---

## 2023-07-26 10:59:08 - issues channel

**Harry Corrigan**

not sure, it's probably cus the body of my application is running on it's own threads, including starting flumine, so it isn't blocking the main thread causing it to exit and im guessing the thread pool executor needs the main thread open for whatever reason (maybe cus it was started within the main thread?)

---

## 2023-07-26 10:55:52 - issues channel

**Harry Corrigan**

Solved the issue, the problem was the thread pool was closing with the main thread, after starting flumine the main thread exits which for some reason causes the ThreadPoolExecutor to shut down as well, the solution was to force the main thread to stay open with a while loop

---

## 2023-07-26 08:39:27 - general channel

**Mo**

Curate your own database of race tracks? There's not that many of them

---

## 2023-07-26 08:35:48 - general channel

**Matthew**

Hello, do you guys know how to get the state in which the race has been ran? For example for a US horse racing, I’m not able to find the state, sometimes I can find something in the marketDefinjtion inside the time zone, sometimes not. Is there a better way?

---

## 2023-07-24 11:18:48 - general channel

**liam**

Just released flumine 2.4.0 which has a change to the simulation engine allowing the matching of passive orders (requires a config change) against available prices. Its very [https://github.com/betcode-org/flumine/blob/91694ebfa0321e75c71f404ac76f3af8853df0d3/flumine/simulation/simulatedorder.py#L473|rudimentary](https://github.com/betcode-org/flumine/blob/91694ebfa0321e75c71f404ac76f3af8853df0d3/flumine/simulation/simulatedorder.py#L473|rudimentary) by simply matching the order against what is available (in addition to traded volume) and doesn't factor in double counting however would be good to get some initial feedback on if it is actually more accurate and should become the default or needs further work etc.



```config.simulation_available_prices = True```

FYI [@U02QDJCK3NW](@U02QDJCK3NW) tested on your example and the order now matches at 1.11

---

## 2023-07-24 08:37:04 - issues channel

**liam**

[https://github.com/betcode-org/betfair/issues/523|This](https://github.com/betcode-org/betfair/issues/523|This) is why open source sucks, not sure it even deserves a response tbh

---

## 2023-07-24 04:30:06 - general channel

**Andy B**

I am trying to work out how to find numberOfWinners from the market in flumine, but I think it is possibly called something else.  Any pointers on this one?

---

## 2023-07-23 11:37:33 - issues channel

**Peter**

In that case yes, the bets should void (same reference). But I'm a little confused now. Are you saying that they did void at Betfair, but remained in the Flumine market blotter - I would expect this, but with the blotter entry updated to show the amount voided. Is that not what you saw?

---

## 2023-07-23 06:18:51 - general channel

**Unknown**

Guys, please another question:

I am modifying the logging message in the function `_process()` of the `MarketStream` class in the betfairlightweigth library (below).

The original message in the function is `"[%s: %s]: %s added, %s markets in cache"` and I modified it to `"[%s: %s]: %s added, %s markets in cache (MY SELF)"`.

The problem is that after making the changes, the Console doesn't show the new message, it keeps printing the original message.



```def _process(self, data: list, publish_time: int) -&gt; bool: 

        caches, img = [], False

        for market_book in data:

            market_id = market_book["id"]

            full_image = market_book.get("img", False)

            market_book_cache = self._caches.get(market_id)



            if (

                full_image or market_book_cache is None 

            ):  # historic data does not contain img

                img = True

                if "marketDefinition" not in market_book:

                    logger.warning(

                        "[%s: %s]: Missing marketDefinition on market %s resulting "

                        "in potential missing data in the MarketBook (make sure "

                        "EX_MARKET_DEF is requested)"

                        % (self, self.unique_id, market_id)

                    )

                market_book_cache = MarketBookCache(

                    market_id,

                    publish_time,

                    self._lightweight,

                    self._calculate_market_tv,

                    self._cumulative_runner_tv,

                )

                self._caches[market_id] = market_book_cache

                logger.info(

                    "[%s: %s]: %s added, %s markets in cache (MY SELF)"

                    % (self, self.unique_id, market_id, len(self._caches))

                )

            market_book_cache.update_cache(market_book, publish_time, True)

            caches.append(market_book_cache)

            self._updates_processed += 1

        self.on_process(caches)

        return img```

Below is the message in the console without reflecting the changes made in the code:



```INFO:betfairlightweight.streaming.stream:[MarketStream: 1]: 1.216273367 added, 1 markets in cache

INFO:betfairlightweight.streaming.stream:[MarketStream: 1]: 1.215746166 added, 2 markets in cache

INFO:betfairlightweight.streaming.stream:[MarketStream: 1]: 1.216265892 added, 3 markets in cache

INFO:betfairlightweight.streaming.stream:[MarketStream: 1]: 3 mc added```

What could be happening?

Thanks for your help!

---

## 2023-07-23 02:49:25 - general channel

**Felix Vasquez**

[@UPMUFSGCR](@UPMUFSGCR) How can I record the data for $5 per month? Is it a third-party service?  or using Flumine?

---

## 2023-07-23 00:33:31 - general channel

**Unknown**

Hey guys, I hope you are having a great weekend.

I was testing the example "examplestreaming.py" in the betfairlightweight library ([https://github.com/betcode-org/betfair/blob/master/examples/examplestreaming.py](https://github.com/betcode-org/betfair/blob/master/examples/examplestreaming.py)). After running the script, I saw in the console that the function _on_status() on the Listener is responsible for printing in the console the message in the following image:

My doubt is:

Why have TWO MarketStreams been created and why is this happening, or am I wrong in interpreting that two MarketStreams are being created?

Only one MarketStream should be created.

---

## 2023-07-22 23:13:22 - general channel

**Alejandro Pablos Sánchez**

I guess I could do this by looping through all the markets and saving somewhere all runner names in each of the markets but idk if this is the best solution, i don't think so. If anyone could help, it would be great !! Thanks to everyone :wink:

---

## 2023-07-21 09:15:16 - general channel

**Alessio**

In my opinion, the situation with non-1st-tier football is quite messy. You get databases of a lot of duplication (90% of the time they use "H A B" sometimes they use "Hi A B") and leagues that don't even align when you go into regional

---

## 2023-07-20 09:46:58 - random channel

**Jonjonjon**

Good point on transaction costs. But for UK shares, doesn't stamp duty make them prohibitively expensive too? I guess I will have to look at stuff where that isn't a problem too.

---

## 2023-07-20 08:40:11 - general channel

**Peter**

A helpful step for accuracy is to remove from the matching those that don't need it so that there's a limited pool of possible matches to be handled.

---

## 2023-07-20 00:29:08 - general channel

**Gary Cook**

Cheers for the help. So far I think it's just in Half-time/Full-time so I might just switch the names for home and away based on their sort priority. Weird though.

JFYI: It's the same in the online APING. I was just confusing myself.

---

## 2023-07-19 23:11:25 - general channel

**Vlad Gavrilov**

[https://www.datacamp.com/tutorial/fuzzy-string-python|https://www.datacamp.com/tutorial/fuzzy-string-python](https://www.datacamp.com/tutorial/fuzzy-string-python|https://www.datacamp.com/tutorial/fuzzy-string-python)

---

## 2023-07-19 22:59:59 - general channel

**Gary Cook**

Ive got no idea how to handle this. Not in a reasonable way. I would perhaps need to know every possible team in advance to handle it gracefully

---

## 2023-07-19 21:44:07 - general channel

**Gary Cook**

Does anybody know how to get the short names for teams with longer names, please? Is it something we can access from the API? For example, the team called _*"Hapoel Beer Sheva"*_ is called that in the event name and market names but in the runners it's called _*"H Beer Sheva"*_. Thanks in advance for any help on this matter.

---

## 2023-07-19 14:54:10 - general channel

**river_shah**

You can maintain a handle to the framework and then:



```from flumine.events.events import TerminationEvent



...

framework.handler_queue.put(TerminationEvent(framework))```

---

## 2023-07-19 13:40:08 - general channel

**Mo**

For non-Australian races, the race card might help with 2)

---

## 2023-07-18 12:38:23 - issues channel

**Nacho Uve**

Yes. I guess if no one has run into this, it's because for most users this isn't a problem. Maybe setting it to default will have some impact...



In any case, it would be great to add a new SimulatedMiddleware (or to be able to parameterize that option). If so, strategies could be addressed in this type of unpopular markets/events.



    I've been reviewing the code of the simulation part, and I find it a bit complex (for my level). Still, I'd like to try to achieve that behavior. [@U4H19D1D2](@U4H19D1D2) Could you give me some guidance on what changes I should make?

---

## 2023-07-18 12:06:27 - issues channel

**liam**

Yes and yes but would need a code change or a slightly different middleware, question is to if we want this to be the default behaviour or not 

---

## 2023-07-18 11:57:59 - general channel

**Harry Corrigan**

The problem is the Sets, listed as events such as this one with the id 32494059 (Set 01)

---

## 2023-07-18 11:54:40 - general channel

**Harry Corrigan**

Hi, does anyone know how to properly display betfair markets, i seem to have a problem with getting event names, specifically in tennis, where there are events like Set 01, Set 02 etc i want to tie these sets to the event they belong too (Player 1 v Player 2) how would i do that?

---

## 2023-07-18 08:25:28 - issues channel

**liam**

Yeah nothing built into flumine as we are streaming only but would suit a worker to inject it into the context somewhere 

---

## 2023-07-18 07:34:54 - issues channel

**Mo**

There hasn't been a problem sharing such files in the past

---

## 2023-07-18 07:05:27 - issues channel

**Mo**

I'm not sure if there's a canonical way to get these into flumine; seems kind of annoying they're not included in the order stream

---

## 2023-07-17 13:07:01 - general channel

**Guy Adini**

Hi guys, basic question, I think :slightly_smiling_face:

When downloading historical betfair data (football), I can figure out the names of the teams from the 1x2 market - but I don't know how to get further information about the event.

For example - is there any way to get the competition name and id?



Thanks!

---

## 2023-07-17 11:40:53 - random channel

**Mo**

I don’t remember being particularly impressed with The Man Who Solved the Market. I’m going to have to give it another read

---

## 2023-07-17 11:33:29 - general channel

**V**

Does anyone know how betfair attributes comms generated across market streams? For example, if you consume two sports but only really trade on one, is that problematic?

---

## 2023-07-17 09:39:40 - random channel

**PeterLe**

I enjoyed reading that too [@U01B8031PM1](@U01B8031PM1). Id strongly recommend "The man who solved the market" about Jim Simons. He's up there with Ed Thorpe in my opinion. What i enjoyed about this book is that even at the level Jim was involved at, with th resources he had at his disposal, he still had doubts on his automation strategies (as we all do at times). Super smart guy.

---

## 2023-07-16 09:57:54 - strategies channel

**James**

I’m using a  modified version of the backtest logging control from here to log my results to a db on market closure [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py)



It\s successfully pushing to the DB, but order.profit is always 0 for some reason. Has anyone run into this issue at all? The bets are placed and I can see different numbers for profit on the betfair site,  but for whatever reason its always coming as 0 on the order.

---

## 2023-07-15 10:27:35 - general channel

**JazzMan**

Use a database to save your data but it should be designed to only save the data that has changed, otherwise it can become very large.

---

## 2023-07-14 12:33:59 - issues channel

**liam**

Delete it all and use flumine 

---

## 2023-07-14 12:33:29 - issues channel

**Andy**

I'm using BFLW though for my stream? I've had a lot of help with my code.... I'm not super well versed. I'm unsure how to proceed

---

## 2023-07-14 12:30:36 - issues channel

**liam**

The latter, you can however give flumine a list of market filters to get around this if they won’t bump above 1k 

---

## 2023-07-13 17:21:54 - general channel

**Peter**

I use.`_process_order` to record orders in a database and `_process_cleared_orders_meta`  to update that entry with the information such as the final amount matched and the profit from the trade.



It would be slightly more complex if you're writing to a file, so maybe just capture the data in  `_process_cleared_orders_meta`  when all the data that will ever be available is there for you to capture.

---

## 2023-07-13 13:38:39 - strategies channel

**R**

For those that like good ole fashioned monte carlo statistics on their strategies, do you find flumine is fast enough to run simulations?  I'm finding that my strategies are just taking too long to run let's say 10,000 samples (simulated markets), but perhaps I am just quite terrible at coding them up / using flumine.

---

## 2023-07-13 12:28:25 - general channel

**liam**

Open up your subscription and just filter, streaming isn’t designed for what you are describing 

---

## 2023-07-13 11:53:25 - general channel

**Harry Corrigan**

Is there any way to update a flumine strategies subscriptions after it has been executed?

---

## 2023-07-12 13:19:45 - issues channel

**Andrey Luiz Malheiros**

I first cancel the order using Flumine's market, then I save the order information in the database, such as size_matched, size_remaining, ...

---

## 2023-07-12 04:52:54 - random channel

**Mo**

I realise your question is a bit tongue in cheek but:



1. Based on my experience of attending the conference last year, expenses will _probably_ be capped at £500 per person but please don’t hold me to that

2. There is the potential to present remotely which, again, is not guaranteed but I would be strongly advocating on your behalf to allow this 

---

## 2023-07-12 02:29:49 - issues channel

**Andrey Luiz Malheiros**

I am trying to save the updates of my executed orders in Flumine. As soon as I cancel an order, I save the information of that order. Then, in the `process_closed_market` function, I save the information of all the orders in `market.blotter`. However, for the orders that I canceled, the `size_remaining` remains unchanged and does not turn into `size_cancelled`. I suspect that the canceled orders are removed from the market before `process_closed_market` is executed. So, I would like to know at what point a canceled order is removed from the market?

---

## 2023-07-12 00:54:02 - issues channel

**Andy**

They haven't responded yet but very confident now the timeout is just too much data for it to handle. I can originally get 7 for WIN and PLACE and 4399 for PLACE for example, but then will just timeout on a future iteration after a minute or two. The question then becomes, how do we get around this? Surely just streaming AUS WIN and PLACE Racing markets shouldn't be outside the realms of what is reasonable. There's nothing inherently wrong with my connection, I'm on fast enough internet

---

## 2023-07-11 20:24:20 - issues channel

**liam**

Yes, there is a function called nearest_price, it’s in utils either in bflw or flumine 

---

## 2023-07-11 20:23:07 - issues channel

**R**

also, second question: if during simulation this validation warning is thrown, will the order be thrown out also?

---

## 2023-07-11 19:56:42 - issues channel

**liam**

Raw data is for when recording as it uses a different stream_class, are you after the raw data in process_market_book? It’s available in ‘MarketBook.streaming_update’

---

## 2023-07-11 18:05:10 - general channel

**George**

[https://github.com/betcode-org/flumine/blob/master/flumine/baseflumine.py#L235](https://github.com/betcode-org/flumine/blob/master/flumine/baseflumine.py#L235) this never seems to get called

---

## 2023-07-11 18:04:15 - general channel

**George**

but flumine's `_process_market_catalogues` never fires, so the market never gets its market_catalogue applied

---

## 2023-07-11 18:00:02 - general channel

**George**

well that's the problem - it isn't

---

## 2023-07-11 09:21:18 - general channel

**Matthew**

For example, if a scratching happens, the matching between dicts is not possible to do, because the prices are adjusted (if you know exactly how I will be happy!) I know that I have to use the adjustment factor but I don’t find the proper formula 



If there are currency conversions, prices changes and same problem as before, with also sizes that decrase instead of increasing, so when I do the diff sometimes I get negative values 





---

## 2023-07-11 08:55:46 - general channel

**Matthew**

1) By cumulative, I mean the total amount of money bet up to that market update for each runner. 



2) let me try to be more concise, for every market book update. I have a dictionary for each runner where the key are the prices and the value are the sizes. I have the previous one and the current one, then basically if I do the diff key by key, the deltas that remain &gt; 0 are the prices and sizes traded in my window. This has a couples of problems, the main ones that I found are

• currency conversion 

• Scratching which change the key and values of my dict and the comparison with the previous one

3) in the doc string is highly recommended if using betfair pro data to keep it true 

---

## 2023-07-11 06:11:29 - general channel

**Andy B**

Just coming back to this post incase it helps anyone else, you need to use double quotes aroung processed, not single quotes, as:

```if 'processed' not in market.context:

    market.context["processed"] = True

    code…```

It took me a while to realise this and I couldn't understand why the code wasn't working for me until I added double quotes.

---

## 2023-07-11 01:57:54 - issues channel

**Andy**

Yea have seen the examples. My code is slightly different but I think basically doing the same thing. Thinking back to when I put the code together, I think S_cenario 2_ didn't work for me originally but S_cenario 6_ did/does - I assume that's your main concern with the code. The problem with the examples is that none of them have a scenario for passing multiple event ids or multiple market types codes and that's where I'm falling down

---

## 2023-07-10 15:42:55 - general channel

**Matthew**

Ok, thank you. I have some other questions on it sorry if I bother you. 



1) what you are referring to Traded volumes in point 2 are the tradedvolume inside the market book -&gt; runner[ex][“tradedVolume”] is that cumulative right? It seems so for me 



2) apart from point 1, I explain again my logic so maybe you have a better idea of how to develop a more solid solution. I’m trying to get for each market update, the traded prices and sizes of that update, so not cumulative, so for example, if I set a discrete period of having updates every 2 seconds, I want to know for each runner the traded prices and sizes in those 2 seconds. To do that. I save every time the last update on the prices and volumes traded by the runners, which i found in the runner market book, then I save the current prices and volumes which should be the same as before with new prices if new prices are traded, or larger sizes on the already traded ones. And I do a diff. Then, all the prices that have a size &gt; 0 are the traded prices in those 2 seconds. Sometimes because of scratching this logic has some fallacy, but overall it seems to work. Do you have a better option? Am I complicating my life? 



Thank you :pray:  

---

## 2023-07-09 16:30:03 - strategies channel

**Mo**

Good point [@U02K1MG7YCA](@U02K1MG7YCA), I cannot find this in the documentation now. Perhaps one of the other old guard can recall where it originated

---

## 2023-07-09 15:52:44 - strategies channel

**jackofallspades**

&gt; according to the documentation the matching cycle is 50 milliseconds

I can't find this info (and generally matching cycle description) in the documentation. [@UBS7QANF3](@UBS7QANF3), can you please direct me to where it can be found?

---

## 2023-07-09 15:52:42 - general channel

**Gary Cook**

Have you guys seen a way to index the markets? I made a JSON with the order I want the markets in for my database. They seem to be fetched in a random order otherwise. I guess since the market_id changes. Doesnt really matter now so just wondering if I missed something on that.

---

## 2023-07-09 15:39:38 - general channel

**Gary Cook**

Ok well I appreciate the help and chat but it's still all a little vague and subjective.

---

## 2023-07-09 15:33:15 - general channel

**river_shah**

Can you use streaming for connectivity and keep it to less than 1K transactions an hour and try to generate some commissions? That should be fair usage likely

---

## 2023-07-07 20:33:40 - general channel

**Unknown**

Apologies for this question as I know its been asked before...in the case of horse racing, does a horse retain its selection id over the course of a season (lifetime) ? Thanks in advance

---

## 2023-07-07 17:37:56 - random channel

**casper**

[@UGV299K6H](@UGV299K6H) have you tried throwing this question into Chat GPT? This seems like the kind of question it will quickly solve for you. Or provide a better solution for what you are trying to achieve.

---

## 2023-07-07 08:43:35 - general channel

**Andy B**

It's the betfair pro files for Australian thoroughbreds.  I could see the values were in the market files, but I tried every way except the right way to get the details out.  I thought I had been through the flumine py files thoroughly too, but I hadn't.

---

## 2023-07-07 05:58:16 - general channel

**Andy B**

Hi All, Just wondering how to get the 'name' value from market_definition so that I can exclude Pace and Trot races from my back tests?  I can get the event_name by calling market.event_name, but I didn't see a property for the 'name' value.  I was hoping to do something like:

def process_market_book(self, market: Market, market_book: MarketBook) -&gt; None:

            if 'Trot' not in market.name and 'Pace' not in market.name:

                       Do the back test........

---

## 2023-07-06 19:35:03 - strategies channel

**Mo**

flumine (betfairlightweight) does this for you

---

## 2023-07-05 16:05:52 - strategies channel

**Unknown**

regarding logging controls:

the examples I have seen in the flumine code all follow the principle of having a single large log file and everything gets logged in there.

but, in practice, I suspect this is quite inconvenient, especially for people who are active on hundreds of markets every day.

the problem I see is that each `event` does not necessarily have access to the `market_id` , and so it's not possible to have one log-file per market-id.

can I ask: what do people actually do in practice?

---

## 2023-07-05 11:08:39 - issues channel

**Alex**

I saw there are a few examples in flumine

---

## 2023-07-05 11:04:45 - issues channel

**Alex**

No particular reason, I wrote this a long time ago when I first started playing around with flumine.

---

## 2023-07-05 10:56:39 - issues channel

**liam**

Simulation doesn't use a [https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/simulation/simulation.py#L27|queue](https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/simulation/simulation.py#L27|queue) so this won't work, what are you trying to put in the queue?

---

## 2023-07-04 17:09:55 - strategies channel

**Mo**

Two comments, neither of which is a correction:



1. Indeed, according to the documentation the matching cycle is 50 milliseconds. However, anecdotally the frequency of stream updates can vary significantly from this. Take a look at some data to get a feel for this

2. You might need to consider the distribution of times your `process_market_book` takes. For example, average of 20 milliseconds but 99th percentile of 1 second might give you problems

---

## 2023-07-04 17:05:19 - betfair-news channel

**Neil T (Betfair)**

We are pleased to announce details of the *Betfair Developer Summer Meetup*! Please see [https://forum.developer.betfair.com/forum/developer-program/announcements/38417-betfair-api-developer-summer-meetup#post38417](https://forum.developer.betfair.com/forum/developer-program/announcements/38417-betfair-api-developer-summer-meetup#post38417) for further details on how to register.

---

## 2023-07-04 14:06:48 - strategies channel

**Peter**

Logging control gives you hooks to access the data as it becomes available. What you do with it, e.g. write to a file, persist it to a database, stream to another app, etc. is up to you. So it's perfectly feasible to consume and plot it in real-time, or to store it for analysis later.

---

## 2023-07-03 21:44:26 - strategies channel

**George**

It's not totally straightforward but I think flumine has solved much harder problems than this successfully.

---

## 2023-07-03 19:31:56 - general channel

**liam**

Looks like a connection problem to me 

---

## 2023-07-03 16:50:20 - strategies channel

**Mo**

I’m hoping to put something more sophisticated than that into betfairutil but this is not an easy problem to solve

---

## 2023-07-03 16:18:41 - strategies channel

**Lee**

It’s expected, have you read the docs? [https://betcode-org.github.io/flumine/quickstart/#simulation_1](https://betcode-org.github.io/flumine/quickstart/#simulation_1)

---

## 2023-07-03 15:43:47 - strategies channel

**Dario Scardina**

I mean using betfairlightweight placeorder function

---

## 2023-07-03 07:14:42 - issues channel

**Unknown**

In the latest copy of the [https://betcode-org.slack.com/files/UQL0QDEKA/F05F2L3UQAH/premium_newsletter_-_june_2023.pdf|Premium Newsletter](https://betcode-org.slack.com/files/UQL0QDEKA/F05F2L3UQAH/premium_newsletter_-_june_2023.pdf|Premium Newsletter), they mention new TPD tracks for 2023. One of these is Keeneland which had racing back in April but I can't see any data in the race stream for these races. A problem on my end or not?

---

## 2023-07-02 14:52:32 - issues channel

**liam**

Yeah nothing really to add there, conflation could help if you don't need ms updates

---

## 2023-07-02 12:31:31 - issues channel

**liam**

Yes that is all correct, the reason is to keep things simple and remove the potential for race conditions. Do you know that this a problem that needs solving? I.e have you profiled?



Any more context on these custom events? Do they result in order placement / cancellation? 

---

## 2023-06-30 20:32:15 - general channel

**D C**

I hear that you can run into problems if you are only pulling data and not placing bets. If you were suspended, did they not provide the reason for the suspension? I guess if you were using a 3rd party app, you are at the mercy of whoever wrote that?

---

## 2023-06-30 20:20:34 - general channel

**Gary Cook**

Please, Is there any hard and fast rules on how much/often we can access the free API? I got suspended once years ago apparently but I didn't realise at the time. I think I was logging one game at a time and all its odds through a 3rd party app that implements the API. I don't intend to do that. Im just getting market snapshots right now but I have no idea how often it is OK to do that. FYI: I am using betfairlightweight.

---

## 2023-06-30 17:41:47 - general channel

**George**

Is there a function in flumine (or betfairutil) which returns the green/red "potential PNL" numbers that you see on the Betfair GUI?

I looked in the Blotter, there is `get_exposures` which has `matched_profit_if_win` but it seems that the code only considers the orders for the particular runner in question. So, then it seems that orders on other runners that could result in a potential profit/loss are not taken into account. Which means it would not match the green/red values displayed on the screen?

---

## 2023-06-30 17:01:30 - strategies channel

**Dario Scardina**

Hello everyone :slightly_smiling_face:



I have a question for you: is there any way to place a lay order to match the exact price I set?

I mean: i.e. I wanna lay a selection at 1.59. If a place the order there are simply three cases:

1. current_lay_price &lt; lay_price_requested -&gt; my bet will be matched at lower price (i.e. 1.52)

2. current_lay_price = lay_price_requested -&gt; OK (my order will match at exact price 1.59)

3. current_lay_price &gt; lay_price_requested -&gt; my bet will be not matched (until the price decrease equal or lower than 1.59)

I know that it seems a stupid question because case 1 for example is more profitable, but I want in each case to match only exact price. "Who are you to judge how people want to lose their money?" :smile:



Thanks in advance :slightly_smiling_face:

---

## 2023-06-30 14:12:29 - issues channel

**D C**

OK thanks thats very helpful

---

## 2023-06-30 13:52:18 - issues channel

**D C**

Thanks for that  - been digging away assuming its my code thats the problem

---

## 2023-06-30 13:51:15 - issues channel

**Lee**

It’s a known issue betfair end. I have the same problem where 7/10 attempts to connect to the stream return no markets

---

## 2023-06-30 12:23:37 - strategies channel

**James**

Ah, i think I answered by own question. I think its to to link two orders you create and place yourself? It doesn’t automatically place the offset when the first order is placed like I first thought.

---

## 2023-06-30 07:29:18 - issues channel

**liam**

In addition you can give flumine a list of market filters if you want to split 

---

## 2023-06-30 06:34:45 - issues channel

**Mo**

1. Yes. Email BDP and ask them to increase

2. Yes. This is how Betfair streaming works rather than a function of flumine 

---

## 2023-06-29 17:43:45 - general channel

**George**

Having checked the BF docs, it looks like there is no such order type. But, it would be very useful to have a persistenceType = LAPSE_ON_SUSPENSION.

I imagine experienced Flumine users have a good way to do it though?!

---

## 2023-06-29 17:30:58 - general channel

**George**

Is there a BF order type that ensures the order (if EXECUTABLE) will be automatically cancelled when the market status goes to SUSPENDED?

If not, what is the most flumine-like way to achieve that behaviour?

(I have coded up a way to do it, but I think it's unnecessarily complicated.)

---

## 2023-06-28 17:18:37 - general channel

**liam**

It’s the default, see the [https://github.com/betcode-org/flumine/blob/master/flumine/worker.py|code](https://github.com/betcode-org/flumine/blob/master/flumine/worker.py|code), just not used in this example

---

## 2023-06-28 16:05:41 - general channel

**George**

[https://github.com/betcode-org/flumine/blob/master/examples/workers/inplayservice.py#L13](https://github.com/betcode-org/flumine/blob/master/examples/workers/inplayservice.py#L13)

Can I ask, why does this function require `context` as an input? It doesn't appear to be used within the function?

---

## 2023-06-26 23:20:15 - issues channel

**Carl Nielsen**

Thanks Peter, yes Betfair tell me that my AppKey is authorised for the streaming API..   I don't know how to confirm this though, the suggestion to use Flumine also leaves me with a dilemma, How do i use Flumine, I'll have to investigate that furhter.



Thanks also Peter for your help

---

## 2023-06-26 11:09:58 - issues channel

**James**

Has anyone running flumine in a container managed to get the exit method working?

I’ve found an example of catching SIGINT’s and SIGTERM’s and calling the baseflumine `__exit__` method, but I was wondering if anyone else has done it/any pitfalls you’ve come across before I dived in.

---

## 2023-06-26 08:42:10 - issues channel

**Peter**

Just a thought. Have Betfair enabled your account for streaming? I’d validate that by using on of the Flumine example scripts to validate that as [@UBS7QANF3](@UBS7QANF3) suggests. Doesn’t need to lead to rewriting your Delphi scripts, but would narrow down the causes - maybe even to one!

---

## 2023-06-26 08:12:11 - issues channel

**Mo**

I'm not asking you to rewrite your entire stack. Get it working with a software package that has almost a million downloads and 1800 users you can get help from right here. Such a learning exercise might reveal where you are going wrong with Delphi. Or stick with Delphi and get help from... zero? Other Betfair API users using Delphi

---

## 2023-06-26 08:09:34 - issues channel

**Carl Nielsen**

Given that I've been programming in Delphi for around 40  years I'm not that keen to learn a new language and rewrite thousands of lines of code to solve what should be a simple problem. Delphi has always been one of the best programming languages ever produced, complex for sure but compiles directly to machine code not byte code like Python..

---

## 2023-06-26 06:14:19 - issues channel

**Carl Nielsen**

I'm having trouble trying to get the Betfair Streaming API to respond to me..  I'm using Delphi INDY TCPClient and I have SSL set up. I can log in as I have been using the Polling API for years but I'm not having any success with the streaming API.  The endpoint URL's just result in "Host Not Found" and the integration url appears to open but doesn't respond with the connection message.



Anyone have any ideas ? I'm logged in I have a session token and I can't get a response from the streaming API end points

---

## 2023-06-26 05:49:59 - betconnect channel

**Carl Nielsen**

I'm having trouble trying to get the Betfair Streaming API to respond to me..  I'm using Delphi INDY TCPClient and I have SSL set up. I can log in as I have been using the Polling AI for years but I'm not having any success with the streaming API.  The endpoint URL's just result in "Host Not Found" and the integration url appears to open but doesn't respond with the connection message.



Anyone have any ideas ?

---

## 2023-06-24 08:11:33 - random channel

**Jonjonjon**

No. Writing to an old spinning disk. I worked out that it was accessing the primary drive for the database:man-facepalming::skin-tone-6:

---

## 2023-06-23 21:56:25 - random channel

**Jonjonjon**

I am using the multiprocessing library a lot for backtesting.

My Python environment is on my primary drive.

My data is on the secondary drive.

When I start up a new process, does that involve IO on from the primary drive where the Python environment is?

---

## 2023-06-23 16:26:57 - issues channel

**Peter**

Personal addition - I switched from PHP when I realised that the tooling, especially betfairlightweight and Flumine, were way ahead of anything in my world ... haven't regretted it for an instant.

---

## 2023-06-23 12:09:10 - issues channel

**thambie1**

Hey Rob, I doubt anyone here is using R. Most are using the python libraries bflw/flumine. If you haven't already invested heavily into your R framework, I'd suggest switching over.

---

## 2023-06-23 11:54:43 - issues channel

**MrRob**

Hey 



Using R script for betfair and it’s not placing all the expected bets (i.e 1/2 or 2/3 of the bets that it should put on). Running the missing bets manually works, it’s only when the whole code is run at once it’s missing games, so some sort of looping issue? Not sure what part of the code I can send to assist in my issue but any help would be much appreciated :+1: 

---

## 2023-06-23 10:47:54 - strategies channel

**Peter**

There isn't an easier way. Apparently adding competition to the filter is a bigger deal for Betfair than you might think (the question's been asked before!).



However, be aware that once you're subscribed to a stream you can't change the filter, so I doubt your worker will have much effect, unless it closes and re-opens the stream.

---

## 2023-06-23 08:41:52 - strategies channel

**Nelsen**

Good Morning guys, have you ever heard about Harville probabilities for exotic pools? What do you think about it? Is it old stuff or can help even today predicting exotic pools?

---

## 2023-06-23 08:41:05 - random channel

**Andy**

From the example on the betfair help page of just applying deductions to ‘winnings’ I would work that out as $158 x 13.25 odds = $2093 potential winnings originally. Then apply 72.33% deduction = $586 profit. But I ended up getting $976 profit :thinking_face: :thinking_face: 

---

## 2023-06-23 06:31:22 - general channel

**Guy Incognito**

If the market book is a stale market book will this trigger check market book to run, I have streaming_timeout set to 5 with a print statement in check market book but most markets that haven't had an update don't seem to be printing out every 5 seconds

---

## 2023-06-22 10:57:56 - general channel

**Tom**

Really appreciate the help gentlemen

---

## 2023-06-22 06:50:55 - general channel

**liam**

In addition to above note that flumine won't add 'execution complete' orders by default without the example [https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|middleware](https://github.com/betcode-org/flumine/blob/master/examples/middleware/orders.py|middleware)

---

## 2023-06-21 09:21:04 - strategies channel

**thambie1**

...I don't understand the question? What signal are we talking about here?

---

## 2023-06-21 09:01:00 - general channel

**Guy Incognito**

I've spent about an hour looking for this and as soon as I posted the question I found it within 10 seconds

---

## 2023-06-21 08:33:42 - betconnect channel

**Peter**

Question about BetConnect. Horse racing markets are being opened an hour earlier than normal in honour of Royal Ascot. But they're not available for that extra hour via the API, only the website. Was that intentional?

---

## 2023-06-21 07:50:08 - general channel

**Alejandro Pablos Sánchez**

betfairlightweight

---

## 2023-06-21 07:48:04 - general channel

**Peter**

Is this with Flumine or Betfairlightweight?

---

## 2023-06-20 18:26:26 - issues channel

**John Foley**

nice one - thats helpful :+1:

---

## 2023-06-20 18:19:36 - issues channel

**liam**

ideally you are using a loggingcontrol instance and using the `_process_cleared_markets` function as this has the `betfairlightweight.resources.ClearedOrders` object

---

## 2023-06-20 18:16:41 - strategies channel

**thambie1**

Tried it, the risk profile was worse than either of the approaches I described. But I'm certain I'm still leaving a lot of opportunity on the table, hence the question

---

## 2023-06-20 14:05:29 - issues channel

**liam**

follow the [https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/markets/blotter.py#L172|code](https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/markets/blotter.py#L172|code)

---

## 2023-06-20 13:35:24 - general channel

**liam**

[https://github.com/betcode-org/flumine/tree/master/examples/workers](https://github.com/betcode-org/flumine/tree/master/examples/workers)

---

## 2023-06-19 21:34:18 - random channel

**D C**

"treated me like I was a retard" - I think thats a very strong take. Sounded to me just like someone with incomplete knowledge trying to explain something that they don't understand and actually trying to be helpful (but failing).

---

## 2023-06-19 19:18:13 - random channel

**Dave**

Settlement issues are best resolved via social media support, they are far superior.

---

## 2023-06-19 14:14:06 - strategies channel

**liam**

Welcome, `market.blotter` is what you want, for example [https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/markets/blotter.py#L172|selection_exposure](https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/markets/blotter.py#L172|selection_exposure)



There is a reason flumine doesn't offer hedging functions :face_vomiting:

---

## 2023-06-19 09:40:56 - general channel

**Peter**

A stream is a connection to Betfair through which will be passed the updates for all markets subscribed to in that stream. So the answer to your question is yes.

---

## 2023-06-19 08:55:05 - general channel

**liam**

Its per stream, nothing complicated, its simply going to give you eevry MarketBook received or a stale book if seconds since latest is greater than your `streaming_timeout`



[https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/streams/marketstream.py#L59](https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/streams/marketstream.py#L59)

---

## 2023-06-19 08:28:41 - general channel

**Guy Incognito**

Does `streaming_timeout` individual to each market e.g. if a market is added later on will it be desynced with the streaming time out of other markets or is streaming_timeout synced across all markets? And is streaming timeout reset by a marketbook event or is it on its own cycle that isn't affected by process market book

---

## 2023-06-16 17:37:28 - issues channel

**liam**

This isn’t a simple problem 

---

## 2023-06-16 14:30:02 - random channel

**Johnny**

Hi all.  I've been using bflw/betcode on my local machine and want to change machines now.  Are there any recommended Docker images that you guys use or is it better to create my own one for this?

---

## 2023-06-16 12:13:24 - issues channel

**Aaron Smith**

test it, as in modify the `__exit__`  method? I d rather not, i m already more than capable of unleashing chaos without tinkering with the underlying frameworks :smile: I guess i could chunk together some hacky code that stops my strategies from placing orders without touching flumine, but i dont think thats the way to go. I d much rather if we had a generally accepted way to gracefully stop new bets, cancel all executable ones and terminate flumine. I dont mind writing some code and making a pull req myself, but i feel like i m the wrong guy for this particular job.

---

## 2023-06-16 11:24:04 - issues channel

**liam**

[https://github.com/betcode-org/flumine/issues/665](https://github.com/betcode-org/flumine/issues/665)

---

## 2023-06-16 09:58:08 - issues channel

**Aaron Smith**

well, playing with fire certainly wasnt the goal, rather the opposite :smile:  So currently you guys also have no way of stopping flumine without leaving some trailing bets behind?

---

## 2023-06-16 09:31:00 - issues channel

**liam**

At the end of the day its executing code in order, nothing complicated but the execution thread needs time to send the requests, in your example the functions get called but have no time to actually execute before the flumine main process completes

---

## 2023-06-16 09:17:16 - issues channel

**Aaron Smith**

[@UBS7QANF3](@UBS7QANF3) thanks for the pointer, so i guess i could use this to shorten the terminate function? How would i call this in flumine?

Also, while this may be a better way to canceling all orders, can you see a reason why my original function fails to do its job?

---

## 2023-06-15 19:11:48 - betconnect channel

**MrRob**

Can anyone help me get a list of all football team names that Betfair use, exported into a spreadsheet? Any help would be much appreciated!

---

## 2023-06-15 09:08:04 - random channel

**Tom**

I had put some notes through with the orders, but wasn't sure if I had intefered with some mechanism of the Trade object or create_order function so deleted them - but can any/all of those be custom notes without interfering with how flumine works?



Sorry I have spent a lot of time at this but still have so much to learn

---

## 2023-06-15 09:03:18 - random channel

**liam**

Logging controls is the 'flumine' way, many modify [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|this](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|this) example

---

## 2023-06-15 08:47:26 - random channel

**liam**

Are you using flumine?

---

## 2023-06-14 14:08:30 - general channel

**Peter**

Yes, you're using list_market_book to the get prices, but need to use list_market_catalogue to get the runner names.



And yes, Flumine requires a whole different way of thinking, but once you're over that, it's way easier to work with as it takes care of much of the infrastructure for you (such as including the runner names in the market object) with the added advantage of giving you near continuous price updates.

---

## 2023-06-14 13:33:29 - general channel

**Alejandro Pablos Sánchez**

Hi ! I'm not using flumine, I'm using betfairlightweight. Are there substantial advantages in using flumine?

---

## 2023-06-14 11:51:27 - strategies channel

**Lee**

I just let flumine run, have instances that been up for months without any issues

---

## 2023-06-14 06:21:10 - general channel

**Peter**

A few things to unpick here.



Firstly if you're going to append them to a global list, better to do it in market middleware, which has an add() method that is run just once when the market is first encountered.



Secondly you don't need to do that as there is a flumine.markets list containing all the markets that you can iterate over to (for example) create a list of of all the market_ids, or just access directly.



Thirdly, what is your global list used for? If it's to find related markets (e.g. the win and place markets for a horse race) would market.event, which already brings them together, already provide the information you're seeking?



Finally, if you still need it, where are you wanting to use your global list (or flumine.markets) as that would influence the best way to access / build it?

---

## 2023-06-14 05:52:50 - general channel

**Guy Incognito**

Yea in flumine, I'm currently in process market book, but it can be in any part of the code

---

## 2023-06-14 05:33:08 - general channel

**liam**

In flumine? / if so where are you?

---

## 2023-06-14 05:28:30 - general channel

**Guy Incognito**

Does anyone know how to get the list of all market_id's at once without doing some sort of appending through process market book?

---

## 2023-06-14 00:16:12 - general channel

**John Foley**

wait, i just saw your screenshot :slightly_smiling_face: my answer is assuming you are using flumine, but maybe you’re not?

---

## 2023-06-14 00:06:51 - strategies channel

**Jonjonjon**

I've spent very little time out of the market. Flumine and modern cloud services have been kind to me.

---

## 2023-06-13 23:07:02 - issues channel

**Andy**

Are we able to get anything from Australian racing with either BFLW or Flumine any other way? Even just the BSP and/or whether the bet won or lost? 

---

## 2023-06-13 22:50:33 - general channel

**Unknown**

This my code for this. Inside the nested loop for runners, I would like to do something like runner. name or runner.description.name, but it is not working even though I know it should be somehow possible to get the runner name. Thanks for the help ! :relaxed:

---

## 2023-06-13 22:48:44 - general channel

**Alejandro Pablos Sánchez**

Hi, I'm struggling to get the names of the runners in a given market, for a specific event, but I don't get it. The first thing I do is to get the market book associated to my target market, requesting best offers. Then, I iterate over the different market books returned (just one) and inside of it, the market runners or selections. However I cannot know the name of each of these runners. There is a RunnerDescription class in the resources module that seems to have a name field, but I don't know how to link my code with it. I'd be very glad to receive any kind of help. Thanks a lot :smile:

---

## 2023-06-12 22:42:00 - issues channel

**Paul**

If I call `market.place_order(…)` twice in a row (different orders, different trades), in `process_market_book`, only the first actually goes through. I tried it in a `with market.transaction as t` block and explicitly calling `execute` but that blew up complaining about `__enter__` missing and my 14 hour work day brain and crappy python internals knowledge gave up. In what way am I being a complete moron?

---

## 2023-06-12 21:44:32 - betconnect channel

**Mo**

No worries, just keeps it cleaner for those who are looking for BetConnect help

---

## 2023-06-12 21:42:51 - betconnect channel

**Alejandro Pablos Sánchez**

Okey, great, thanks a lot for your help and sorry for the misuse of that channel, I will ask about betfair in the general thread I guess

---

## 2023-06-11 15:28:44 - random channel

**bb**

These are not very mathematical and a bit outdated now but help to see the basis to a few of the more “traditional” handicapping approaches:



• Mordin on Time: A more general view of early approaches to using race times/sectionals

• Anything by Andrew Beyer: similar to above but very USA focused

• Anything by Don Scott: Pretty old and hard to get a hold off but good at getting an early perspective into weight based handicapping/ratings 



---

## 2023-06-11 12:11:38 - random channel

**TT**

I'm guessing you need a reasonable turnover/commission for getting access to the betfair supplied gps feed?

Has anyone integrated the feed from TPD directly with flumine?

---

## 2023-06-10 20:53:30 - random channel

**AndyL**

Silly question, but who actually manages the hardware that get put in the Saddles ?

---

## 2023-06-10 17:56:07 - random channel

**Dave**

I unzip everything first, split my list of files into chunks of size x (for me x=4 is optimal), create a flumine instance for each chunk, and then pass the list of flumine strategies to y workers (y = n_cpus), collect all results at the end, merge, generate a report

---

## 2023-06-08 16:45:52 - strategies channel

**George**

I was looking at line 335 of flumine.order.order.BetfairOrder which is what gets called when you run order.cancel() (I think!)

---

## 2023-06-08 16:44:50 - strategies channel

**Lee**

I assume you’re looking at the `Transaction` class? Look at the following line after that is called and follow that through [https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/execution/transaction.py#L102](https://github.com/betcode-org/flumine/blob/d2e7d8e6cbc65687d2a0fb41e8f24bf133081f59/flumine/execution/transaction.py#L102)

---

## 2023-06-08 16:40:33 - strategies channel

**George**

I can't believe I'm asking this but here goes - how do you cancel an executable order in Flumine?

The code for `order.cancel()` sets the order's status to `OrderStatus.CANCELLING` but doesn't actually do anything else?!

---

## 2023-06-08 14:23:25 - strategies channel

**R**

sweet, thanks George.  I was about to code this exact thing but thought the flumine framework might have a "flumine-ish" way to handle it

---

## 2023-06-08 14:21:59 - strategies channel

**George**

I had this yesterday and resolved it by using

`if market.status == 'OPEN':`

    `do stuff`

---

## 2023-06-08 12:09:30 - random channel

**Mo**

Not available unless you scrape it at the time. Regarding just runner/competition names, [https://github.com/mberk/betfairmappings](https://github.com/mberk/betfairmappings) can help

---

## 2023-06-07 14:57:20 - random channel

**liam**

Its an overview and probably telling you stuff you already know but I liked it, good chapter on abstractions / classes etc that relate to this problem

---

## 2023-06-07 14:51:16 - random channel

**D C**

Its fine for what I currently have which just runs on win markets but going forward will need restructuring. More than 10 lines of code unfortunately. Tempting to bin C++ and commit to python but I am too far down the road now.

---

## 2023-06-07 13:15:20 - random channel

**liam**

Yeah no problem, it uses the simulation engine so doesn’t even subscribe to the order stream 

---

## 2023-06-07 11:37:32 - issues channel

**liam**

So whats the question?

---

## 2023-06-07 08:12:19 - strategies channel

**liam**

To answer your question proof is in the profit for me, EV is simply a signal to how I work

---

## 2023-06-06 22:46:00 - random channel

**Jonjonjon**

Ah no worries. I managed to work it out.



Every time a new process is spawned, it uses up the same amount of RAM as the parent process. My parent process used up a lot of RAM as it had loaded a lot of data about the 38K markets. So to solve my problem I just had to delete the unnecessary data and call `gc.collect()`.

---

## 2023-06-05 11:46:21 - general channel

**Tom**

I thought that this code

volume = runner.ex.traded_volume



Got like a PriceSize list or something like that which was input to wap.



It could be a better/quicker question - of the best way to get VWAP/Volume for individual runners

---

## 2023-06-05 11:44:30 - general channel

**Mo**

So then my question is have you asked for the traded volumes in your price projection?

---

## 2023-06-05 11:43:59 - general channel

**Tom**

I've imported wap from flumine but most of this code is bflw

---

## 2023-06-05 11:43:35 - general channel

**Mo**

I’m asking if you’re doing this in flumine or just bflw 

---

## 2023-06-05 11:43:11 - general channel

**Tom**

wap is flumine.utils

The volume I think is betfairlightweight?



Should the input be a flumine input?

---

## 2023-06-05 11:42:06 - general channel

**Mo**

flumine?

---

## 2023-06-04 23:24:48 - issues channel

**Alexander O'Reilly**

Solved it, thanks Mo :+1::skin-tone-2: 

---

## 2023-06-04 14:03:26 - issues channel

**Mo**

Not sure what the question is as your code already shows how to do it

---

## 2023-06-04 11:11:11 - general channel

**Jonjonjon**

Does anyone do that with Flumine?

---

## 2023-06-04 05:26:58 - general channel

**thambie1**

Whether or not the match is in play is provided in the streaming data. That is by far the simplest method. There is no such parameter to set when placing a bet.

---

## 2023-06-04 05:24:09 - general channel

**Andy**

Will check out. I’m currently just streaming and getting updates whenever there’s an update. If there was some parameter to set to avoid in play bets that would’ve been ideal 

---

## 2023-06-04 00:29:17 - issues channel

**Alexander O'Reilly**

Betfairlightweight: How do I access near_price and far_price when iterating through runner of a market_book?

e.g.

…

for runner in market_book.runners:



Do something with runner.sp.near_price

---

## 2023-06-02 22:49:02 - issues channel

**AI Trader**

Python. No, there is a single client for all threads (shared)

---

## 2023-06-02 15:50:45 - general channel

**George**

When using the Betfair API, is there any way of placing the bet in a currency other than GBP?

If not, does everyone in non-UK countries have to request the exchange rate repeatedly?

---

## 2023-06-02 14:45:46 - random channel

**Peter**

Sorry, meant to post [https://www.sqlshack.com/how-to-backup-and-restore-mysql-databases-using-the-mysqldump-command/|this link](https://www.sqlshack.com/how-to-backup-and-restore-mysql-databases-using-the-mysqldump-command/|this link) with my earlier answer.

---

## 2023-06-02 11:11:55 - random channel

**Newbie99**

Does anyone have any good suggestions for keeping 2 MySQL databases in sync (appreciate there's no 'right' answer to this, just curious how others do it), currently for example I call listclearedorders twice, once from each machine with the DB on every time I need to update. But replication seems like a better solution, so would like to go down that route, especially as I want to be smarter about adding other static data fields that it makes more sense to create once and then replicate.

---

## 2023-06-02 09:40:20 - issues channel

**liam**

bflw is too quick

---

## 2023-06-01 19:46:58 - betconnect channel

**Alejandro Pablos Sánchez**

Hello again, I'm going over the QuickStart tutorial of the API and I got another question. I'm about placing a trial bet with small size and for that I just find a market that is open and then I pick one selection id at random. The thing is, I'm not able to place it, and I guess it might be due to the following reasons: 



• last price traded does not match the price I'm setting as parameter in limit_order function

• persistence type should not be 'LAPSE', not sure

• order type should not be 'LIMIT'

---

## 2023-06-01 18:01:23 - betconnect channel

**Alejandro Pablos Sánchez**

From the API-NG visualizer looks as working, I can get markets, selections etc, and also using the requests python module. However it does not work with the betfairlightweight module. Any clue? Thanks :smiley:

---

## 2023-06-01 18:00:15 - betconnect channel

**Alejandro Pablos Sánchez**

Could anyone give me some help to log in the exchange and place a bet? I would love to automate that process but idk if I don't know how to do it or this is just not possible from Spain. Anyone who has achieved to do this?

---

## 2023-05-31 21:01:47 - issues channel

**Mo**

There’s only one API. There’s every chance the way you’ve generated the certificate is compatible with the way you’re using requests but not with betfairlightweight 



See this thread: [https://betcode-org.slack.com/archives/C4H05ML2E/p1682643720988399|https://betcode-org.slack.com/archives/C4H05ML2E/p1682643720988399](https://betcode-org.slack.com/archives/C4H05ML2E/p1682643720988399|https://betcode-org.slack.com/archives/C4H05ML2E/p1682643720988399) and this one: [https://betcode-org.slack.com/archives/C4H05ML2E/p1681665134137979|https://betcode-org.slack.com/archives/C4H05ML2E/p1681665134137979](https://betcode-org.slack.com/archives/C4H05ML2E/p1681665134137979|https://betcode-org.slack.com/archives/C4H05ML2E/p1681665134137979)

---

## 2023-05-31 20:55:07 - issues channel

**Stephen Shirley**

I mean by interfacing with the base betfair api without the nice betfairlightweight wrapping. Just using json and the requests module

---

## 2023-05-31 20:30:39 - issues channel

**Mo**

Probably a problem with your certificate

---

## 2023-05-31 08:31:55 - general channel

**liam**

So on the initial image you get the streaming definition, so you could do something like this:



```    def process_raw_data(self, clk: str, publish_time: int, data: dict):

        market_id = data.get(self.MARKET_ID_LOOKUP)



        if "marketDefinition" in data:

            if data["marketDefinition"]["venue"] == "Ripon":

                if market_id not in self.markets_i_want_to_process:

                    self.markets_i_want_to_process.append(market_id)



        if market_id not in self.markets_i_want_to_process:

            return



        file_directory = os.path.join(self.local_dir, self.recorder_id, market_id)

        with open(file_directory, "a") as f:

            f.write(

                json.dumps(

                    {"op": "mcm", "clk": clk, "pt": publish_time, "mc": [data]},

                    separators=(",", ":"),

                )

                + "\n"

            )```



---

## 2023-05-30 21:52:04 - betconnect channel

**Alejandro Pablos Sánchez**

Thanks in advance for any help you cabn provide :slightly_smiling_face:

---

## 2023-05-30 15:09:46 - strategies channel

**Unknown**

I have this screenshot from last year which might help

---

## 2023-05-30 13:34:09 - general channel

**Jorge**

Hi, in the [https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py|marketrecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py|marketrecorder.py) , I would like to access market.event_name (or other market_catalogue fields) to be able to filter the recorded markets. Potentially inside [https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py#LL64C9-L64C25|process_raw_data](https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py#LL64C9-L64C25|process_raw_data) . Is this possible?

---

## 2023-05-29 07:37:28 - betconnect channel

**Jorge**

[@U059W9V61QC](@U059W9V61QC) Are you trying to login using certificates? If so the endpoint is [https://identitysso-cert.betfair.es/api/certlogin](https://identitysso-cert.betfair.es/api/certlogin) Can you show us your code so we can help?

---

## 2023-05-28 17:16:24 - random channel

**Sen**

Thank you all that's very helpful

---

## 2023-05-28 12:16:08 - betconnect channel

**Alejandro Pablos Sánchez**

I'm going over it again and what I don't really understand is that, having an account registered in [http://betfair.es|betfair.es](http://betfair.es|betfair.es), it does not work. Does anyone know how to change the login domain or something like that?

---

## 2023-05-28 09:47:23 - issues channel

**D C**

I can't give a code example that would be any use to you because I have my own code base and don't use flumine (don't use python at all). Maybe someone else can help you out here.

---

## 2023-05-27 19:02:00 - issues channel

**Adam Momen**

[@UUE6E1LA1](@UUE6E1LA1) would you mind sharing a code example of how would you add the throttle?



Would you recommend modifying the throttle through by accessing the background worker `flumine._workers[-1].interval = 300` ?

---

## 2023-05-27 15:26:53 - issues channel

**Derek C**

my code uses market.place_order however going by the documentation, your execute statement isn't needed because it will execute automatically at the end of the context (with)

---

## 2023-05-27 15:23:43 - issues channel

**Jeff Waters**

I'm wondering if I've missed a step by omitting execute(). From the documentation:



with market.transaction() as t:

    t.place_order(order)

    t.execute()  # above order executed



What is the effect of executing an order? I'd previously assumed that, if I'd placed an order, it was in the market and no further action was required.

---

## 2023-05-27 15:09:54 - issues channel

**Derek C**

When I'm using Flumine, the bet_id isn't assigned immediately to the order object, otherwise the process would be waiting for that to happen. It's an asynchronous call and there will be a delay before Flumine receives the bet_id back from betfair and assigns it to the order. During this period the bet_id will be None.

---

## 2023-05-27 09:02:55 - general channel

**Tom**

So I used RunnerContext to create RunnerData as a subclass but it doesn't update with trades/orders when they are placed, so it's a little redundant. I was wondering if I called it RunnerContext instead of RunnerData if Flumine would recognise and update them in that case, but obviously not I guess because it wouldn't know where to find them.



No biggie, just figuring things out still.

---

## 2023-05-26 02:14:43 - general channel

**Tom**

Is it possible to create these so that Flumine uses my modified version in its automatic functions? I have called my RunnerContext, RunnerData, then realised it wasn't updating trades/orders e.t.c.



If I call them RunnerContext, will it use my modified version? I'm sorry I'm still a newb with coding, OOP, although getting some parts of it.

---

## 2023-05-26 00:27:05 - general channel

**Michael**

Is there any endpoint I can hit when running cleared_orders to get the BSP of the selection I placed? I am streaming data seperately but just want to populate this BSP for selection in my db so maybe this would be easier to do?

---

## 2023-05-25 19:49:09 - random channel

**Sen**

For those who have built a big bankroll (not me by the way) - do people just leave the money in Betfair? I can imagine a big syndicate could have several million - would they leave it all in their betfair account?

---

## 2023-05-25 14:59:55 - issues channel

**Jorge**

Done, it's very simple [https://github.com/betcode-org/flumine/pull/662](https://github.com/betcode-org/flumine/pull/662) :smile:

---

## 2023-05-25 11:51:26 - random channel

**PeterLe**

The first question should be ‘do I need one’, if you can’t answer that then no point applying

---

## 2023-05-24 09:07:58 - issues channel

**Jeff Waters**

OK, I'll look into how to do that, thanks.

---

## 2023-05-23 09:31:07 - general channel

**Jonjonjon**

[https://stackoverflow.com/questions/18097107/python-gzip-appending-to-file-on-the-fly|https://stackoverflow.com/questions/18097107/python-gzip-appending-to-file-on-the-fly](https://stackoverflow.com/questions/18097107/python-gzip-appending-to-file-on-the-fly|https://stackoverflow.com/questions/18097107/python-gzip-appending-to-file-on-the-fly)

---

## 2023-05-23 09:17:18 - general channel

**Jonjonjon**

From prior work, if each process opens the file (with lock), writes a little to it, then closes it... The overall compression will be poor due to the way most compression algorithms work. Some are better than others for streaming writes.

---

## 2023-05-23 08:51:28 - betconnect channel

**Joel Beasley**

Hi [@U055JA2PK7F](@U055JA2PK7F) currently it is not possible to get all bet requests with a single call [https://github.com/betcode-org/betconnect/issues/14](https://github.com/betcode-org/betconnect/issues/14)



We are working on changing this, but for now you are right in that you need to hit `bet_request_get` until none are left, and cache the list of IDs - then any can be updated by supplying the ID to `bet_request_get`

---

## 2023-05-22 17:42:55 - strategies channel

**Michael**

Sorry - horseracing. I didn’t know about rpscrape actually so thats massively helpful vs writing my own! Thanks!

---

## 2023-05-22 10:34:37 - general channel

**Jorge**

That's good but I still cannot access it in[https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py#L83|_process_cleared_markets](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py#L83|_process_cleared_markets)

---

## 2023-05-22 10:11:33 - general channel

**Jorge**

I would like to populate my Backtest results with some info from the market catalogue. I am loading the marketCatalogue files in the backtest using [https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py|marketcatalogue.py](https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py|marketcatalogue.py) , but how can I access these market_catalogues in [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|backtestloggingcontrol.py](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|backtestloggingcontrol.py) ? One solution would be to add it to the orders context, but I still wouldn't be able to access it in [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py#L83|_process_cleared_markets](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py#L83|_process_cleared_markets)

---

## 2023-05-19 15:35:16 - general channel

**thambie1**

I verified the same behavior happens for me, so at least the problem isn't specific to you.

---

## 2023-05-19 13:45:44 - general channel

**Paul**

Hello all! We are doing a little survey to help plan the next event/meet-up. If you have 2 minutes, would appreciate it if you could fill this in: [https://forms.gle/DWXRMqZjkc9xhVgC9|https://forms.gle/DWXRMqZjkc9xhVgC9](https://forms.gle/DWXRMqZjkc9xhVgC9|https://forms.gle/DWXRMqZjkc9xhVgC9)

---

## 2023-05-18 20:07:29 - betfair-news channel

**Sher Khan**

I want to betfair api 

How can buy betfair api [@U031UL88GG6](@U031UL88GG6)  [@UNW8Q88EL](@UNW8Q88EL)  @betfair

---

## 2023-05-17 20:18:07 - general channel

**vtaco**

thanks man.  Related question - if I wanted to take the marketrecorder output files and shove into a sql database (one table for each event's metadata, one table for all the updates), is there a resource/example that would be best to reference?

---

## 2023-05-17 02:37:34 - general channel

**vtaco**

Hello, thanks for all the great work over the years on this framework.  Question - what is the difference between the two sample strategies  [https://github.com/betcode-org/flumine/blob/master/examples/strategies/pricerecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/strategies/pricerecorder.py) and [https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/strategies/marketrecorder.py)

---

## 2023-05-16 21:33:50 - issues channel

**D C**

Probably not helpful to you as its not flumine related but I have a throttle on calls and call on a per market basis rather than using settled time intervals. The operation only gets settled orders and I don't need to get them in a rush as soon as market closes so I just force a minimum of 5 second delay between calls, and only once a market has been closed for at least 60 minutes. Then use the to/from records and the moreAvailable flag to pull them down until I've got them all. I also make seperate calls for each of the  VOIDED, LAPSED, CANCELLED and SETTLED betStatus types.

---

## 2023-05-14 14:49:45 - general channel

**Newbie99**

Yes essentially, I suspect most use glob.glob (or os.path...) depending on how your function is structured and filter based on your criteria.



My structure is similar, I start at the top level with sport, then year, month, date, then country code, then market (I group by event using event processing within flumine), but ultimately you need to pass as few markets as possible (i.e. ideally just the ones you actually want to test against)

---

## 2023-05-14 14:39:45 - general channel

**R**

that makes sense, cheers!  So shoudl I assume that I need to write some logic to handle parsing through the directory or can flumine accept a directory similar to above and parse through markets itself?



E.G. run a backtest using flumine and it will read the directory (in sequence) and simulate on each market it finds?

---

## 2023-05-14 14:06:09 - general channel

**R**

Forgive my laziness in checking docs, but is there a quick way to get the flumine simulator to read a directory of market data or is this a case of code the directory parsing yourself with your own market filter?



I have a structure like you get from betfair : YEAR//MONTH//DAY//MEETING_ID/MARKET_ID



I'm actaully guessing on the "meeting_id" part, I'm not sure what this ID relates to from betfair

---

## 2023-05-13 13:46:41 - issues channel

**Jeff Waters**

It's just a data update controller class (which, in its current form, I could easily get rid of).



```from betfairlightweight.resources import RunnerBook



from incoming_data_storage.raw_data_dictionary_update import RawDataUpdate



class DataUpdateController:

    def update_data(self, runner: RunnerBook):

        RawDataUpdate().update_raw_data(runner)```

The method it calls begins by calling the method I put in my message:



```def update_raw_data(self, runner: RunnerBook):

    self.update_total_volume_list(runner)```



---

## 2023-05-13 13:17:31 - issues channel

**Unknown**

When backtesting wth Flumine, I previously stored list of total volumes matched for each runner in a dictionary. I decided to store them in the RunnerBook objects instead, and wrote this method:



```def update_total_volume_list(self, runner: RunnerBook):

    if not hasattr(runner, "total_volume_list"):

        runner.total_volume_list = []

    runner.total_volume_list.append(runner.total_matched)

    # print(runner.total_volume_list)```

The method is called whenever process_market_book is refreshed.



However, when I run the commented out test print command, it reveals that the total_matched figure isn't increasing.  I don't expect it to increase on each refresh, but it not increasing at all.



Where am I going wrong, please?

---

## 2023-05-12 08:26:35 - random channel

**liam**

The title and description really doesn’t help the cause 

---

## 2023-05-11 14:44:27 - general channel

**rob smith**

This is probably a basic question so apologies in advance.... how do I convert an unmatched limit order into a limit on close order? I want to back at SP if the order is not matched first. Thanks

---

## 2023-05-10 09:11:20 - general channel

**liam**

flumine can't see into the future (yet)

---

## 2023-05-10 09:09:40 - general channel

**Lee**

Office start time [https://github.com/betcode-org/flumine/blob/master/flumine/markets/market.py#L143|here](https://github.com/betcode-org/flumine/blob/master/flumine/markets/market.py#L143|here)

---

## 2023-05-09 15:38:58 - general channel

**Jose Maquia**

I'm using betfairlightweight mostly but yeah, don't think it'll be a problem

---

## 2023-05-09 15:36:27 - general channel

**liam**

very easy if you are using flumine

---

## 2023-05-09 15:36:20 - general channel

**Jose Maquia**

thanks for the help

---

## 2023-05-09 13:23:08 - random channel

**liam**

What are we looking at here? Is it a simulation as I see paper trade client? a streaming market filter? no listener_kwargs?

---

## 2023-05-09 09:55:10 - general channel

**Peter**

Sounds like something that should be raised as an issue in the [https://github.com/betcode-org/flumine/issues|github repo](https://github.com/betcode-org/flumine/issues|github repo).

---

## 2023-05-08 15:52:26 - general channel

**Matthieu Labour**

Has anyone had success incorporating the betdaq API or Smarkets API into flumine?

---

## 2023-05-08 12:28:24 - general channel

**liam**

Ideally you set it up in a worker similar to [https://github.com/betcode-org/flumine/blob/master/examples/workers/inplayservice.py|this](https://github.com/betcode-org/flumine/blob/master/examples/workers/inplayservice.py|this) as imagine you will want it called periodically

---

## 2023-05-08 09:42:06 - general channel

**liam**

To add there are some limitations in the [https://betcode-org.github.io/flumine/quickstart/#simulation_1|docs](https://betcode-org.github.io/flumine/quickstart/#simulation_1|docs) 

---

## 2023-05-06 21:41:24 - strategies channel

**Jonjonjon**

From within Flumine, I would like to cancel an order, and then place another order if the cancellation is successful.



What patterns do people use to implement this?



Market.cancel_orders only returns a boolean,.so my current implementation involves waiting for subsequent calls process_market_book and then checking pending cancellations for updates.



I've been reading about Asyncio but can't work out if that will help or not.

---

## 2023-05-06 17:06:26 - random channel

**Ruben**

bit of a random Q: is there anything similar to flumine but for financial markets? Meaning the ability to clearly define triggers and run multiple strategies efficiently, managing orders, etc; for stocks, forex, options...that you could then use with one or more brokers

---

## 2023-05-04 22:14:22 - random channel

**Jonjonjon**

On the website, it' possible to lay £2.00  at odds of 2.0 And then modify the betsize to £2.10. The additional £0.10 will be a new bet. Is this possible with Flumine?

---

## 2023-05-04 09:28:49 - issues channel

**Nick**

Yep I noticed you added the print there. Thanks for your help and tips.

---

## 2023-05-03 20:33:51 - general channel

**Jonjonjon**

Christmas has come early. Numba now works with Python 3.11. Has anyone tested it yet?

---

## 2023-05-03 16:56:34 - general channel

**D C**

I've noticed from manual recreational bet placement that for certain football matches, the inplay delay is reduced a lot while a game is in half time break (about 1 second). I pretty much only bet on prem games so no idea about other leagues. Not sure why this is nor how consistent it is but it might be something to help you identify the beginning of second half.

---

## 2023-05-03 14:15:24 - general channel

**Alex**

very basic question: what is the most simple way to get the aggregated exposure per runner given a runner object?

---

## 2023-05-02 15:51:19 - general channel

**Mo**

Also looks like you don't do anything with the deserialised line in rust whereas in Python you are constructing a big list of the deserialised objects

---

## 2023-05-02 15:45:41 - general channel

**Adam Momen**

[https://www.notion.so/Flumine-Backtesting-Benchmark-c3b20cd40fd4487388fd2d73ed23f72f?pvs=4|here](https://www.notion.so/Flumine-Backtesting-Benchmark-c3b20cd40fd4487388fd2d73ed23f72f?pvs=4|here)

---

## 2023-05-02 15:44:05 - general channel

**Mo**

What's the source code for the Python implementation?

---

## 2023-05-02 15:34:21 - general channel

**liam**

The file reading isn't the bottle neck, its the python object creation, [https://github.com/tarb/betfair_data|this](https://github.com/tarb/betfair_data|this) is really quick but not maintained to the level I would require

---

## 2023-04-29 11:41:22 - general channel

**Trex44**

In python you can replace the the tzinfo of the utc date time object to account for this.

```for market in market_catalogue:



    market_id = market.market_id

    venue = event.event.venue

    start_time_utc = market.market_start_time

    uk_timezone = pytz.timezone('Europe/London')

    start_time_uk = start_time_utc.replace(tzinfo=pytz.UTC).astimezone(uk_timezone)```



---

## 2023-04-28 22:18:48 - general channel

**Philip Joss**

I'm like to get a list of tennis events that aren't doubles matches. As all doubles match event names have `/` in them I figure I need to use the `text_query` parameter in a `market_filter`. However, I can't figure out the syntax to use to exclude all events that have `/` in the event name. `betfairlightweight.filters.market_filter(event_type_ids=[2])` gets me a list of all tennis events. Playing around I tried ``betfairlightweight.filters.market_filter(event_type_ids=[2], text_query="/")` to filter to only doubles matches. This isn't what I need but it didn't actually return any events at all. What would I use to exclude `/` and thus exclude doubles matches?

---

## 2023-04-28 19:08:40 - issues channel

**Mo**

Sorry I’m not a Windows or XCA user. I believe the Betfair instructions generate a crt file? So you just need to work out how to get the key out of it

---

## 2023-04-28 17:59:24 - issues channel

**Philip Joss**

Thanks for clarifying this is the same issue. However, I'm still not clear on the whole `.crt` plus `.key` versus a `.pem` file. The guide I reference only goes as far as generating a `.crt` file. However, bflw (well bf really) is looking for either a  `.crt` plus a `.key` OR a `.pem` file. Which option should I go for and how would I generate the `.key` or `.pem`  file?

---

## 2023-04-28 17:52:17 - issues channel

**Mo**

Same problem as here: [https://betcode-org.slack.com/archives/C4H05ML2E/p1681970221099299?thread_ts=1681665134.137979&amp;cid=C4H05ML2E](https://betcode-org.slack.com/archives/C4H05ML2E/p1681970221099299?thread_ts=1681665134.137979&amp;cid=C4H05ML2E), the line numbers are only different because you're running a different version of Python

---

## 2023-04-28 06:52:26 - issues channel

**Mo**

What version of Python are you running?

---

## 2023-04-26 00:07:17 - general channel

**Tom**

Yeah that is really handy to know, thank you very much for the help Peter. I got the trades working so thank you very much. Onto a more difficult problem of making them profitable lol



And this never ending quest of finding the elegant solution

---

## 2023-04-23 10:50:39 - issues channel

**D**

I do the same with bflw and hence why for my flumine strategies I use the above code to override the default behaviour and replace host name with my custom code I can use later.

---

## 2023-04-23 07:25:19 - general channel

**Trex44**

Morning all. Just wondered if there is a way to call Betfair's own Cashout function via Flumine?

---

## 2023-04-22 21:13:47 - general channel

**Unknown**

About this discussion, from what I understand, Flumine can handle multiple strategies in the same market, but I would like to know the correct way to do this. I ask this because I can imagine 2 possible scenarios to instantiate different strategies for the same market. Let's suppose we want to test three different strategies in the same markets, and the scenarios are as follows:



1. We can instantiate 3 `streaming_market_filter` using the same parameters, and then pass each instantiated `streaming_market_filter` to each of the 3 strategies. My question in this scenario is whether Flumine will perform 3 different subscriptions to stream for the same markets, so that the same information is obtained from Betfair 3 times, with each one being passed to each market?



2. We can instantiate 1 `streaming_market_filter`, and then pass the same instance of `streaming_market_filter` to the 3 strategies.



I will also send code illustrating the 2 scenarios:

---

## 2023-04-22 10:37:27 - general channel

**Mo**

[https://github.com/betcode-org/betfair/blob/00e9abb2b4d228408eea1620cbeb55cbaed0e0c6/betfairlightweight/endpoints/scores.py#L16-L41](https://github.com/betcode-org/betfair/blob/00e9abb2b4d228408eea1620cbeb55cbaed0e0c6/betfairlightweight/endpoints/scores.py#L16-L41)

---

## 2023-04-20 23:43:52 - general channel

**Andrey Luiz Malheiros**

Thank you very much, Liam. I will likely use this approach, with a flag in the context indicating which strategies are active. I will also take a look at the `__enter__` and `__exit__` methods of `BaseFlumine`, as I was reviewing them this week and it seems that by creating some methods and making slight modifications to these two, it may be possible to achieve this. If I am successful, I will share what I have done with the group.

---

## 2023-04-19 20:12:28 - general channel

**thambie1**

No clue, I don't use Flumine

---

## 2023-04-19 20:12:09 - general channel

**Jonjonjon**

Thanks Thambie. Does Flumine simulate the lapse?

---

## 2023-04-19 19:28:28 - general channel

**Andrey Luiz Malheiros**

In the example I gave with 12 strategies, to initialize these strategies, we must pass a Betfair client to each instance of Flumine. If I have 12 strategies, each with a different instance, then Flumine will perform 12 logins.

---

## 2023-04-18 19:58:22 - general channel

**Andrey Luiz Malheiros**

I came up with this solution because I don't want to execute my strategies by running a Python script on my terminal or a Jupyter notebook, for example, because I can't automate a process this way. I want to pass the predictions that I generate on a daily basis as context to run my strategies, and I want to do this in an automated way

---

## 2023-04-18 06:55:50 - general channel

**Mo**

Just set your listener arguments appropriately: [https://github.com/betcode-org/betfair/blob/00e9abb2b4d228408eea1620cbeb55cbaed0e0c6/betfairlightweight/streaming/listener.py#L107-L108](https://github.com/betcode-org/betfair/blob/00e9abb2b4d228408eea1620cbeb55cbaed0e0c6/betfairlightweight/streaming/listener.py#L107-L108)

---

## 2023-04-18 06:30:22 - general channel

**Mo**

What kind of problems?

---

## 2023-04-18 06:05:36 - general channel

**liam**

First question is why? Do you see the need to start / stop strategies? 

---

## 2023-04-18 05:52:08 - general channel

**Mo**

Depends how many strategies you're planning on running. If it's a lot then you might run into the limits on number of streaming connections Betfair allows

---

## 2023-04-18 03:07:14 - general channel

**Adrian**

feeling like a total newb and wondering how to get the bz2 files from betfair into the correct format or if theres a helper function that can work directly with these files? would be grateful if someone could point me in the right direction. thank you!

---

## 2023-04-18 03:04:07 - general channel

**Adrian**

Hi guys, I'm back after a break and see that the app is renamed betcode. Happy to see everyone here from bflw again

---

## 2023-04-17 08:44:25 - issues channel

**Mo**

What version of Python are you running?

---

## 2023-04-16 12:54:11 - general channel

**Trex44**

I have no ethical problem in beating other people who bet against me. I am taking on risk, if I screw up and they win then I have nothing against them. I am not limiting winners and only hearding mug punters into my 200% over round book.  My ethical problems with gambling lay in the fact that I think bookies should have been phased out long ago and everything should be exchanged based.  Thanks for the info on the 20/80 split DC.

---

## 2023-04-16 02:35:56 - general channel

**Felix Vasquez**

Great question!

---

## 2023-04-12 10:58:34 - random channel

**D C**

Yes there are many questions about it not least of which is how you define a "horse that leads". These numbers look like they are arrived at with proform and I don't currently use that but I do wonder what a similar analysis would look like using GPS data.

---

## 2023-04-12 06:47:54 - strategies channel

**liam**

Lookup table in database -&gt; filter -&gt; list of id’s -&gt; process 

---

## 2023-04-11 22:35:18 - strategies channel

**Andy B**

I have 14 months worth of Aus greyhound markets in a folder for back testing, but I was wondering if there was a way to tell flumine to only use a specific date range when you want to only do a quick test of a smaller subset?  Or, is the standard approach to simply put the markets you need into a folder and test against that?

---

## 2023-04-11 14:29:05 - general channel

**Graham**

the constant reference to [http://stake.com|stake.com](http://stake.com|stake.com) "insane" success followed up by questions on best-practices regarding KYC are ironic and not lost on me, if indeed the joke was intended.

---

## 2023-04-11 12:19:13 - general channel

**ShaunW**

Genuine best wishes [@U04SRDB8FKJ](@U04SRDB8FKJ).  You don't need yes men at this stage so I hope any tough questions will help to avoid the mistakes of the others who've tried.

---

## 2023-04-11 10:33:54 - general channel

**Jonjonjon**

If it was crypto deposits with zero annoying KYC I would not see that as a problem. But the lack of a diversified eco system of users would be.

---

## 2023-04-11 09:44:32 - general channel

**Peter**

Have to agree with [@UEA14GBRR](@UEA14GBRR). Kudos to you for doing this and for the quality of your implementation and documentation. But while the tech side looks great, I'm not seeing the long-term business rationale and without that, there's no incentive for me to invest time learning the ins and outs of a new platform.



I don't see a USP that would attract recreational bettors, or anything in your answers that suggests that attracting them is being considered. Being an exchange version of another platform who themselves don't seem to have a USP, is a bit underwhelming.



On the crypto point, I would see bypassing conventional banking deposits as a limiting factor and certainly not a USP?

---

## 2023-04-11 09:27:51 - general channel

**ShaunW**

Thanks for the reply [@U04SRDB8FKJ](@U04SRDB8FKJ) but I don't think that addresses the question. As I said we see a lot of proposed exchanges and it's all very clever stuff but most only have a plans to attract pros but not actual customers.  Betfair have a high public awareness and the might of Paddy Power's advertising budget but still struggle so what makes you different? I'm obviously disinclined to invest my time in something and find the only people there are us, and most we see only seem to have plans to fund raise and sell up rather than anything approaching an actual sustainable business.   



That might seem a little more pointed than questions about fees and perks, but I'm sure these are questions your investors have asked, unless of course they're looking for a quick return rather than being involved in a long term business.

---

## 2023-04-10 23:01:48 - general channel

**Aravind**

Good question 

---

## 2023-04-08 15:52:37 - general channel

**Michael**

Whats the best way to handle data streaming? Are people just writing to a bucket using the S3 data recorder and then accessing the .json files or writing the rows to a db?

---

## 2023-04-07 12:16:53 - general channel

**Lee**

Logging control [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2023-04-07 07:45:46 - general channel

**Mo**

1. Turn off everything

2. Wait

3. Start ONE flumine instance with the above market filter

---

## 2023-04-04 14:47:47 - general channel

**Ralegh**

Question from someone on 40% PC, any good software for churning commission (like doing simple arbs) that they can set up, I’d write something on flumine for them but I’m strapped for time

---

## 2023-04-04 14:02:00 - general channel

**RDr**

Hi guys,  I am checking the delays from the scheduled time for some horse races and wondering what indicators I should look for in the historical streaming data (pro version) to get the actual time the races started (or just before in-play if applicable)?

---

## 2023-04-03 13:01:25 - random channel

**river_shah**

Better than numba as that only deals well with numpy loops

---

## 2023-04-03 13:01:00 - random channel

**river_shah**

Anyone try this with bflw / flumine? Looks promising. Either build standalone binary (which likely won't work with bflw / flumine) or just jit compile critical functions:

[https://github.com/exaloop/codon](https://github.com/exaloop/codon)

---

## 2023-04-02 20:57:46 - issues channel

**Derek C**

if you could share the snippet of code that's not working, it might be easier for people to help...

---

## 2023-04-02 10:28:30 - random channel

**Paul**

It raises the question of why they're not putting more into exchanges - with &lt; 104% over-round on most US races from what I've eyeballed - but perhaps they are.

---

## 2023-03-31 10:26:33 - general channel

**Thomas JAMET**

I can see a couple of reasons:

1. Separation of code.

2. The middleware get evaluated before the strategies. It might help if you have multiple strategies.

If you don't care about these points, there might be no benefit.

---

## 2023-03-30 23:22:25 - general channel

**Trex44**

This might sound like a dumb question but what does the market_book.total_matched and runner.total_matched (for runner in market_book.runners) measure?



I would have thought the first measures the total volume traded on the market and the second the total volume traded on a given runner. I am getting zero for the market_book.total_matched when backtesting and getting very low numbers for the runner total matched figures (that go up and down!). I am backtesting on Pro data not recorded data, uncertain if that makes a difference. See code and logs attached.

---

## 2023-03-28 09:36:25 - issues channel

**liam**

You have `market_book.streaming_update` which is relatively easy to pull out the runners which have changed (simulated middleware does this)

---

## 2023-03-26 19:34:21 - strategies channel

**ShaunW**

Have you tried asking ChatGPT?  I gave it your original question and got...

---

## 2023-03-26 13:03:29 - issues channel

**birchy**

`get_nearest_price()` in Flumine utils is useful here. And also `price_ticks_away()`

---

## 2023-03-25 19:16:33 - issues channel

**Beeblebrox**

I'm using Flumine v2.3.2

---

## 2023-03-23 17:04:29 - general channel

**liam**

Flumine with a custom loggingcontrol that communicates via API to my db 

---

## 2023-03-23 13:07:07 - general channel

**JC**

Cheers [@U9JHLMZB4](@U9JHLMZB4), makes sense. [@U4H19D1D2](@U4H19D1D2) do you add to the market table in the db within flumine or with another process?

---

## 2023-03-23 12:24:49 - general channel

**JC**

Thanks [@U9JHLMZB4](@U9JHLMZB4). Do you update your database on the fly with `on_market_close` or have a process that crawls through recorded streaming files to update your database periodically e.g. daily? I used to do the former but thinking of moving to the latter as I’m moving all storage to s3.

---

## 2023-03-23 12:20:43 - general channel

**Peter**

Not explicitly, but the catalogue is just a json file so it's easy to read, filter and persist the data you may want to look up afterwards. Personally I write key data from each to a database table together with a list of the winners (obtained by reading the last few lines of the associated stream file). That table is then used to compile lists of candidate markets for backtesting.

---

## 2023-03-23 12:08:09 - general channel

**JC**

Hi, when streaming market data using flumine to S3, is there a recommended way to collect and store metadata and marketcatalogue data into a lookup table in S3 or some database? Cheers

---

## 2023-03-22 17:27:55 - strategies channel

**George**

In flumine, is there a simple way to look at the market book but with my own executable orders deducted from it? Or is this something that the 'user' has to build themself?

---

## 2023-03-22 13:03:22 - general channel

**birchy**

LowestLayer is a good starting point from [@UBS7QANF3](@UBS7QANF3)'s link and book % example in that. For the book calculation, just be wary that PLACE, etc markets can have multiple winners, so the 0EV book will be 100% * number_of_winners, e.g. 200% for 2TBP markets.

[https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py#L73|https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py#L73](https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py#L73|https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py#L73)

---

## 2023-03-21 19:09:21 - strategies channel

**Paul**

The blotter is there, and there is example middleware to populate on restart. There are methods for showing your current p&amp;l on a selection. Processing the existing orders and the market book are explicit methods. I am concerned about how rapidly market book updates are processed but that’s likely a problem in my code - api limits seem to prevent HFT strategies anyway - but if you can explain what you’re after without leaking alpha, perhaps people can help with ideas or explain corners of flumine you haven’t seen

---

## 2023-03-21 19:06:10 - strategies channel

**George**

It goes back to my question, really. In my view it's all about being extremely vigilant about your existing orders and liabilities, and using that to influence which orders you want to send to the market. Hence why I was wondering whether flumine is really set up for that or not. I am not sure that it is.

---

## 2023-03-20 17:49:09 - strategies channel

**George**

is anyone using flumine for market-making strategies where you are sitting on both the back and lay continously? or would it be fair to say that flumine is really more built for implementing discrete trigger-based strategies.

---

## 2023-03-20 16:15:46 - random channel

**birchy**

Funnily enough I had to Google chat gpt in order to find out how to get/use it. Was quite impressed tbh. I asked a few generic questions about prediction of probabilities and it offered several insights and code snippets that would be a good starting point.

It's basically a glorified Google search but without all the obfuscations and diversions.

---

## 2023-03-20 16:06:15 - random channel

**PeterLe**

I used chat gpt4 last night and just playing around, asked it to make suggestions on the monte carlo code provided by [@U016TGY3676](@U016TGY3676) and how it may be improved.  it provided a new version but automatically added in calculations for the 5th and 95th percentiles (which I didnt ask for) . I then read up on what they were. It seems that the key is know which questions to ask in the right order :grinning:

---

## 2023-03-20 15:48:38 - random channel

**river_shah**

Why is Liam Pauling a fictional person and how does Liam Pauling become a real person?





I apologize for any confusion. There may have been a misunderstanding in my previous responses. Based on the information available to me, Liam Pauling appears to be a real person, not a fictional character. He is a software developer who has contributed to open-source projects, such as the betfairlightweight library.

---

## 2023-03-20 15:26:48 - random channel

**river_shah**

Who wrote betfairlightweight?





Betfairlightweight is an open-source Python library designed to interact with the Betfair API. It was created by Liam Pauling, a software developer who has contributed to various open-source projects. You can find the betfairlightweight repository on GitHub: [https://github.com/liampauling/betfair](https://github.com/liampauling/betfair)

---

## 2023-03-18 17:06:06 - random channel

**foxwood**

I found the best results came from drilling down from the answer into a deeper question using the same terms the chat used, It gets down to some serious code and ML ideas. You do need to use everything with caution and detailed testing/review though since it does get things wrong as [@U01B8031PM1](@U01B8031PM1) pointed out re hallucinations. The idea of a book summary by [@UQL0QDEKA](@UQL0QDEKA) is useful - far better than Amazon reviews - although it might have nicked the text from there or similar.

---

## 2023-03-18 11:48:54 - random channel

**river_shah**

^ Joke question

---

## 2023-03-17 15:32:18 - issues channel

**Kosta Pana**

yes sir. but already have my own system... flumine probably much better.

---

## 2023-03-17 14:16:43 - issues channel

**liam**

you found flumine yet?

---

## 2023-03-17 11:56:24 - issues channel

**liam**

Use [https://github.com/betcode-org/betfair/blob/master/examples/examplestreaming.py|this](https://github.com/betcode-org/betfair/blob/master/examples/examplestreaming.py|this) example but update to use the order stream

---

## 2023-03-17 11:12:02 - issues channel

**liam**

actually, whats the version of flumine you are using?

---

## 2023-03-17 11:10:33 - issues channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/examples/example-single.py#L66](https://github.com/betcode-org/flumine/blob/master/examples/example-single.py#L66)

---

## 2023-03-17 10:09:44 - issues channel

**Kosta Pana**

Morning friends - has anyone tried to set up heartbeats on order streaming, using the betfair lightweight "subscribe_to_orders" method (with heartbeat_ms=500)?  I've set up a queue for receiving updates using the "get" method with a timeout of 2 seconds, and I receive order updates just fine, but never any heartbeats when there are no orders - instead I always timeout. Thanking in advance for any help!

---

## 2023-03-16 10:20:05 - issues channel

**D C**

I get the problem because I like an "open" stream where I respond to any new markets on the stream. I subsequently call listMarketCatalogue to get the market info - but I keep getting left with this solitary market that I can't update because the resulting listMarketCat call contains no markets (which makes sense)

---

## 2023-03-16 10:03:18 - general channel

**ian mcneill**

Thanks folks - v helpful - yes I copied the S3MarketRecorder into my source

---

## 2023-03-13 18:25:42 - general channel

**ian mcneill**

Thanks - I seem to remember there was example code to set this up - is that still available - I know boto3 config is needed to connect to the bucket but as a python noob I’m struggling to hook this together - any pointers most welcome :slightly_smiling_face:

---

## 2023-03-13 12:57:43 - issues channel

**Sunken**

Figured it out while I was going through the print statements. Basically comes down to me not understanding how betfair relays traded volumes, i.e. the json updates are cumulative for traded totals.



Thanks for your help on this

---

## 2023-03-13 12:23:49 - general channel

**Unknown**

Just one more question, do you know why my BSP seems like multiplied x 10^5 ?

---

## 2023-03-13 09:34:38 - general channel

**Mo**

Maybe I'm not understanding the problem but just record a dictionary of selection ID to LTP at time a then at time b do the comparison

---

## 2023-03-13 08:34:39 - issues channel

**Mo**

Are you setting the Listener arguments appropriately? [https://github.com/betcode-org/betfair/blob/4d7c38bd8b75183fbc46637abcabb8954ef00593/betfairlightweight/streaming/listener.py#L107-L108](https://github.com/betcode-org/betfair/blob/4d7c38bd8b75183fbc46637abcabb8954ef00593/betfairlightweight/streaming/listener.py#L107-L108)

---

## 2023-03-12 16:36:13 - random channel

**D C**

Are there TPD problems today? TPD status page looks ok but times there are an hour ahead from the market times on BF - I know US daylight savings dates are not the same as ours. Anyone else had no data?

---

## 2023-03-11 18:17:48 - general channel

**Lee**

[https://github.com/betcode-org/flumine/blob/9dc0bf01ac211f925c49fcc05a8617e0c2a61b5b/examples/strategies/marketrecorder.py#L200|https://github.com/betcode-org/flumine/blob/9dc0bf01ac211f925c49fcc05a8617e0c2a61b5b/examples/strategies/marketrecorder.py#L200](https://github.com/betcode-org/flumine/blob/9dc0bf01ac211f925c49fcc05a8617e0c2a61b5b/examples/strategies/marketrecorder.py#L200|https://github.com/betcode-org/flumine/blob/9dc0bf01ac211f925c49fcc05a8617e0c2a61b5b/examples/strategies/marketrecorder.py#L200)



---

## 2023-03-11 17:50:18 - general channel

**ian mcneill**

Hi all, apologies for the simple question - I have flumine working and recording locally and all good - is there an example snippet to use an S3 bucket to hold the closed market archives? I’m a c# dev and just learning Python which I’m enjoying but any help on this would be greatly appreciated.



A side q - I was thinking about using Lightsail containers for simplicity but I cant find any option for local storage - so looks like ECS is the only option for this?



Any recommendations would be great - TIA.

---

## 2023-03-10 14:00:53 - general channel

**Richard Cornish**

Hi Liam, thank you so much for your help, that is now exporting exactly the data I was after! One final question, I'm just trying to modify the code so it will run through all the folders I have and extract the bz2 files for analysis and pop them all in the one csv file. Can you point me in the direction of amending the code for this? Many thanks again

---

## 2023-03-09 19:06:39 - general channel

**Unknown**

I have narrowed it down to the fact that the code is trying to account for matched volume on the ladder, and as this is a basic download there is no volume. I believe this is what is preventing the inplay min and max from populating, but I cannot for the life of me work out how to just return the inplay high and low. Resource for BASIC files seem to be a bit thin on the ground, especially for soccer

---

## 2023-03-08 20:06:24 - strategies channel

**Dave**

If I were you, I'd ask BF for a cut from the comission paid for every winning aggressive bet submitted by a flumine instance.

---

## 2023-03-08 19:57:20 - strategies channel

**Dave**

With that being said...flumine simulation is fab :clap:

---

## 2023-03-08 19:01:22 - strategies channel

**Dave**

Fair enough - sounds reasonable. Obviously "how quickly thresholds go stale" is a very "how long is a piece of string" question but I was curious to see what recalibration regimes people tend to use. Easiest way to answer this question though is to just backtest over years and look for staleness, but just lazy to backtest that far :smile:

---

## 2023-03-08 10:06:33 - general channel

**Richard Cornish**

Thank you very much, these were the tutorials I was following along with which got me to this point :slightly_smiling_face:  I will go through them all again and try to work out the answer. The trickiest thing I have found is a lot of examples don’t work through soccer data which has halftime to deal with. You wouldn’t know of anywhere with worked examples of exporting football data that I would work through? Many thanks for the help! 

---

## 2023-03-08 09:44:28 - general channel

**Andrew**

Hi Richard. Welcome to the quinella - Python and betfairlightweight :blush:  For the extra variables you will need to process stream data. Check out the examples at Betfair Automation Hub run by the wonder AU team. [https://betfair-datascientists.github.io/|https://betfair-datascientists.github.io/](https://betfair-datascientists.github.io/|https://betfair-datascientists.github.io/) You'll help your Python learning by following the examples.

---

## 2023-03-05 15:09:47 - random channel

**Derek C**

Not really answering your question but: [https://www.tpd.zone/status/](https://www.tpd.zone/status/)

---

## 2023-03-05 12:25:13 - general channel

**PeterLe**

Quick question please...if you have more than one account....

When recording more than one sport, ie UK/IE Horses; UK Dogs, UK football, US Horses etc....

Would you record all one on account (Appreciating you can only have 10 connections...) or would you record each sport on a different account?

I think I have the number of markets I can subscribe to lifted anyway

Does it matter?

How do you organise it&gt;?  Thanks

---

## 2023-03-04 17:16:17 - general channel

**Lee**

did anyone have any flumine instances that hit 100% cpu and died?

---

## 2023-03-04 15:53:51 - general channel

**Unknown**

Problems??

---

## 2023-02-27 13:53:00 - issues channel

**D C**

Suppose someone does not sync their clock - what problems arise? Is it simply a problem with being unable to identify streaming lag?

---

## 2023-02-27 08:23:05 - general channel

**liam**

technically a trade is both a back and a lay but to answer your question no you don't know if the price that is taken is a back or lay

---

## 2023-02-27 01:57:47 - general channel

**AI Trader**

Hi guys,

From the streaming data, is it possible to know if a trade was back or lay?

I thought it would be enough to look at the orderbook prior to the trade and see if the traded price was closer to best available to back (or lay), but it happens very often that in the last book update, the best available to lay and back are equally distant to the traded price

---

## 2023-02-24 17:53:28 - issues channel

**Jose Maquia**

It does not return data for greyhounds that way, mind that I'm using betfairlightweight, I am not opening the stream with Flumine.

---

## 2023-02-24 10:50:54 - issues channel

**EJono**

[@UBS7QANF3](@UBS7QANF3) altering the time out value has worked in this scenario thank you for pointin me in towards the documentation!



[@UFTBRB3F1](@UFTBRB3F1) I have noticed this too from time to time and handle it appropraitely. In this case my requests were consistently failing over a number of different time frames and parameter submissions. Hence me retreating to this slack group where all is quickly explained :100:

---

## 2023-02-24 02:11:18 - issues channel

**Jose Maquia**

I'm not sure if I can do that or I should start 2 streams, because I am pretty sure Flumine starts 2 streams

---

## 2023-02-24 02:09:28 - issues channel

**Jose Maquia**

I'm not using flumine, I'm using betfairlightweight, so using stream.subscribe_to_markets(). Subscribing to both doesn't work. And creating 2 streams didn't work either

---

## 2023-02-21 21:52:13 - issues channel

**Jose Maquia**

I am trying to get information from the Stream API and I'm getting no information from greyhounds when filtering for both horse racing and greyhound, also creating 2 connections in the same script (subscribing the stream twice (once per filter) with stream.subscribe_to_markets() only returns data for horse racing and when I tried just greyhound it didn't return any data)



My filters are:

    horse_market_filter=betfairlightweight.filters.streaming_market_filter(

        event_type_ids=["7"],

        country_codes=["AU"],

        market_types=["WIN"]

    )

    greyhound_market_filter=betfairlightweight.filters.streaming_market_filter(

        event_type_ids=["4339"],

        country_codes=["AU"],

        market_types=["WIN"]

    )



The second one doesn't receive any data to the queue

---

## 2023-02-21 10:10:12 - general channel

**Andrew**

Want a dollar for that question? :grin: 

---

## 2023-02-21 09:14:17 - general channel

**Ke**

For the new market which is recently available, we have to restart flumine to pick it up? Any way to include new markets without stopping flumine?

---

## 2023-02-21 09:05:19 - general channel

**Ke**

Is it possible to subscribe extra markets while flumine is running, maybe use worker?

---

## 2023-02-21 09:01:32 - strategies channel

**liam**

So probably doesn't solve your problem

---

## 2023-02-21 09:00:29 - strategies channel

**D C**

So you can line up multiple strategies to simulate and it will attempt to run them all concurrently? I might have to seriously look at flumine as I am sure that I am getting into a muddle at times in the market when multiple strats are trying to place orders on the same runners at the same times.

---

## 2023-02-21 08:57:39 - strategies channel

**liam**

It can do it on passive orders with [https://github.com/betcode-org/flumine/blob/9dc0bf01ac211f925c49fcc05a8617e0c2a61b5b/flumine/config.py#L5|this](https://github.com/betcode-org/flumine/blob/9dc0bf01ac211f925c49fcc05a8617e0c2a61b5b/flumine/config.py#L5|this) however its accuracy is very questionable on low liquid markets or when you really start pushing things it all falls apart

---

## 2023-02-21 08:56:22 - strategies channel

**D C**

So for those of you who do in depth simulations, how far do you go? Specifically, in the case of multiple strategies, how do you simulate the interaction between them if you have multiple strategies performing on the same markets? Does the flumine framework just deal with all of this?

---

## 2023-02-21 08:03:20 - general channel

**liam**

[https://github.com/betcode-org/flumine/issues/508|issue](https://github.com/betcode-org/flumine/issues/508|issue)

---

## 2023-02-20 21:22:09 - general channel

**liam**

Python thing 

---

## 2023-02-20 21:21:48 - general channel

**D C**

Is 10_000 a flumine thing (as opposed to 10000) ?

---

## 2023-02-20 19:01:44 - general channel

**liam**

Because traded volume is double what is actually matched, flumine is correct 

---

## 2023-02-20 17:37:20 - general channel

**Unknown**

*Backtester*

Hi guys,

I have spent a lot of time reconciling my self-developed backtester against Flumine backtester. I am noticing big inconsistencies that I would appreciate someone helping me to understand.



In many examples, I have a limit order sitting on the queue with a certain piq (according to Flumine), and I see many trades happening at the same price of my order, and my position in the queue only gets reduced by a fraction of these trades.



A complete example follows below:

At timestamp t0,  I have a limit order of size 10 at 3.55 sitting in the book with piq 27.89 (from Flumine).

In the first screenshot (taken at t0), we can see that 33.52 $ have been traded at the price of 3.55.



A few moments later,  at timestamp t1, (second screenshot), we can see that $62.25 have been traded at the price of 3.55, that is, a difference of 28.73$, which I interpret as trades happening at that price.

Surprisingly, my position in the queue (piq) according to Flumine is now 13 and I haven't filled anything. I would have expected to fill in 28.73 - 27.89 = 0.84, which is the difference between the trades happening and my piq of my order, and now have a position in the queue of 0 (which would mean I am at the top of the queue).



My main assumption here is that the difference (in different timestamps) of the traded volume for a given price is the amount traded on that price, and that this amount should either reduce my piq by the exact traded amount or fill my order in case the traded amount is bigger than my piq. Am I missing anything here?

---

## 2023-02-20 15:39:40 - strategies channel

**D C**

In general I mean, not in this specific example (I've never tried flumine out although I probably should)

---

## 2023-02-16 03:47:07 - general channel

**Johnny Boston**

with Flumine, is there a way to see what position your order is in on a specific price in the ladder?



eg If I put out an offer to bet at 2-1 and there is *£*500 on the offer can I see how many individual orders are part of that *£500 ?*

---

## 2023-02-15 15:17:22 - general channel

**Charaka A**

Hi guys, when using the betfair lightweight package after creating a stream as below, how can I check if all the markets of the stream have been completed (the event is complete)



```self.stream = self.client.streaming.create_stream(

    unique_id=self.streaming_unique_id, listener=self.listener

)```

I would like to use this to close the thread running the stream, since there is no longer any incoming data to listen to.

---

## 2023-02-12 16:56:42 - betfair-news channel

**Aaron Smith**

most ppl here are using betfairlightweight and probably nearly as much are using flumine

---

## 2023-02-12 16:55:41 - betfair-news channel

**Aaron Smith**

this channel is reserved for news straight from betfair and Q&amp;A's run by betfair.

On topic: Python is the perfect language to jump in with as there are quality api-wrappers and frameworks already developed by liam which you can use. Check out [https://github.com/betcode-org/betfair](https://github.com/betcode-org/betfair) (api-wrapper) and [https://github.com/betcode-org/flumine](https://github.com/betcode-org/flumine) (framework build on top of betfairlightweight)

---

## 2023-02-12 07:00:15 - general channel

**Johnny Boston**

Thanks for the help.

---

## 2023-02-12 06:55:51 - issues channel

**liam**

It’s exactly what flumine is designed for, you can focus on the :moneybag: :moneybag: 

---

## 2023-02-12 06:46:40 - general channel

**Johnny Boston**

Just so I'm sure we're talking about the same thing, what helper functions are you referring to? Just the properties on the blotter?

---

## 2023-02-11 19:39:49 - issues channel

**Mikkel**

Correct, but I am using the approach outlined in betfairlightweight docs



[https://betcode-org.github.io/betfair/advanced/#nemid-login](https://betcode-org.github.io/betfair/advanced/#nemid-login)

---

## 2023-02-10 02:31:07 - general channel

**AI Trader**

Hi guys,

How can I get the market catalogue through the streamer?

I am using the filters

```market_data_filter = streaming_market_data_filter(

    fields=["EX_BEST_OFFERS_DISP", "EX_TRADED_VOL", "EX_MARKET_DEF"],

    ladder_levels=3

)```

But when I get the market in

```process_market_book(self, market, market_book)```

, market.market_catalogue is None.

How can I get it?

---

## 2023-02-09 12:04:20 - random channel

**PeterLe**

I saw that Liam in the newsletter. So (and hope this isnt a stupid question!) but can it be used in its raw format to use with Flumine backtesting?

---

## 2023-02-07 09:51:15 - issues channel

**Paras Stefanopoulos**

v annoying! ty for help

---

## 2023-02-07 09:47:51 - issues channel

**liam**

or maybe a dict? [https://github.com/betcode-org/betfair/blob/71c8fe2acdd20c9d65663e5a5af7692267489e81/examples/exampleone.py#L53](https://github.com/betcode-org/betfair/blob/71c8fe2acdd20c9d65663e5a5af7692267489e81/examples/exampleone.py#L53)

---

## 2023-02-07 08:22:39 - general channel

**Unknown**

Anyone have an idea as to why the marketcatalogues returned by betfairlightweight have “None” in the event section?

---

## 2023-02-06 11:10:26 - general channel

**mzaja**

Ok, so you say that as long as I run two flumine instances on 2 different connections I should be fine?

---

## 2023-02-06 11:05:10 - general channel

**mzaja**

Hi, I have two quick question regarding flumine:

1. Is it possible to have a startegy call both process_market_book() and process_raw_data(). E.g. if I want to simultaneously bet and capture the same stream?

2. Say I create and run two separate strategies, one using MarketStream and the other using DataStream, where stream market/data fllters are identical. Will the streams be shared or will I be subscribed to two different streams on Betfair? If it is the latter, will this count 2x towards my subscription limit, or it does not matter because the markets I am subscribed to are the same?

---

## 2023-02-05 18:29:24 - general channel

**Charaka A**

Hi guys, does anyone know how I can unsubscribe from a market stream, after the market has closed when using the betfairlightweight package? I would still like to listen to the other open markets though

---

## 2023-02-05 16:26:08 - general channel

**foxwood**

The free version of PyCharm is a bells-and-whistles IDE - much easier to develop using flumine on a project basis and with class inheritance than any of the notebook approaches.

---

## 2023-02-05 13:54:40 - general channel

**Peter**

You will probably want to leave it as the default. Setting it to False turns off the order stream which takes up one of your streaming connections. I just turned it off because it wasn't relevant to the issues that I was demonstrating.

---

## 2023-01-31 14:51:15 - general channel

**Crofty**

Have you had a look in the FAQs:



[https://betcode-org.github.io/faq/](https://betcode-org.github.io/faq/)



If it's not there, I'm sure someone will be able to help you.

---

## 2023-01-27 11:35:29 - issues channel

**Andy**

I tried this myself the other day and it said max 2 connections allowed. One market filter with flumine uses 2 connections alone. When I tried to do 2 separate market filters (one for dogs and one for horses, same as Jose) the response came that that it wouldn’t start the other connection as I was already over the limit…

---

## 2023-01-27 10:04:21 - betfair-news channel

**Unknown**

Morning all, everything went smoothly with the Forest v Man Utd game on Wednesday. Over £20k matched at SP including "take BSP if unmatched bets" (which don't show as SP bets on the graphs). There was also money matched against "non-SP unmatched bets" that were in the market and pulled into the reconciliation, which is promising and helps towards reducing the amount of bets that lapse. It's been enabled for tonight's game, the 14:30 Bundesliga games tomorrow and Sunday's four La Liga games.

---

## 2023-01-27 04:21:10 - issues channel

**Jose Maquia**

would appreciate some help :smile:

---

## 2023-01-26 07:26:04 - general channel

**liam**

I think it’s streaming where it’s only GBP

---

## 2023-01-25 14:25:18 - random channel

**Paul**

My main problem is lack of transparency. I’m using bflw in a loop over the non streaming api BTW, so only myself to blame..

---

## 2023-01-25 13:24:33 - random channel

**PeterLe**

Thanks Mo, seems a bit of an obscure question but there is some thought about it.

As we all know you wouldnt get the same results if you had a single account with a single stake that matches the combined value of all the others.

I was thinking more around the 50ms matching cycle and the placing of orders etc. Im doing some testing at the moment, but the results are not quite what I expected.

---

## 2023-01-24 22:55:49 - strategies channel

**Nicholas vizard**

Hey Dave,

I have the same question and was wondering if you had confirmed if the total_matched attributes represented the cumulative sum of back stakes only placed up until that point?



Cheers for any help you can provide!

---

## 2023-01-24 22:41:39 - general channel

**Nicholas vizard**

Hi all,

Apologies in advance for the basic questions: I was looking to confirm if the .total_matched attributes applied to the marketbook.runner and marketbook objects represent the cumulative sum of all back stakes taken on the runner and market respectively until that timepoint? Or does it cumulative sum of the lay liability and back stake taken, or something else all together?

Furthermore, is the currency domiciled in pounds? Or does it depend on the country_code associated with the particular market?



Cheers for any help you may provide!

---

## 2023-01-24 20:29:33 - betfair-news channel

**Techno**

Hi. I am wondering if you can use the advanced historic data to see the amount traded for each runner per second. I can write the last traded price, it is  runner.last_price_traded but I don't know how to locate the amount of money was traded on it at that moment. Could you tell me please?

---

## 2023-01-24 10:27:08 - random channel

**John Foley**

Yeah interesting results. Kinda surprised that “both” is leading so significantly as this way requires the most engineering, joining from different data sources, possibly building databases, etc 

---

## 2023-01-23 19:55:40 - general channel

**Trex44**

Is there an example of how to filter market ids by a parameter taken from the race_card when using Flumine?

---

## 2023-01-23 14:36:03 - general channel

**Trex44**

I think its to do with me logging in to Betfair and  then to the Race Card in order to create the filter list before calling run on the framework (which I assume also tries to log in). Even when I logout after getting the Race Card info I get the same problem.

---

## 2023-01-23 09:28:26 - issues channel

**liam**

Unless I am misunderstanding the question, we do void [https://github.com/betcode-org/flumine/blob/4a52d52899de4ee153d4a1774e2e7384e043dff9/flumine/markets/middleware.py#L85|orders](https://github.com/betcode-org/flumine/blob/4a52d52899de4ee153d4a1774e2e7384e043dff9/flumine/markets/middleware.py#L85|orders)

---

## 2023-01-22 18:21:52 - general channel

**Mo**

[https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py](https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py)

---

## 2023-01-22 18:19:51 - general channel

**Trex44**

Hello all, does anyone know if there is there anyway to asses from the Betfair API what track is being run at Lingfield? As in if its Turf or All Weather?

---

## 2023-01-22 14:38:07 - general channel

**Unknown**

This isn't something that Flumine handles explicitly. Rather it deals with the information received from Betfair in exactly the same way as it would when the same information is received in a normal race. So the question shifts to what information does Betfair provide for an abandoned race?



The answer is that it suspends the market. Sets all the available volumes to zero, removes all the runners and closes the market. There's no explicit "abandoned" status or reason given for closing the market.



Any orders already placed will be cancelled at the Betfair and Flumine will receive and handle the  updates in the order stream i the normal way.



The file is an example of the WIN market from an abandoned horse race:

---

## 2023-01-21 14:53:37 - general channel

**James**

I much prefer learning by doing so I’ll get stuck in. Thanks again for the help

---

## 2023-01-21 11:08:27 - general channel

**D C**

I'm having a problem with the stream at the moment. Trying to get multiple event types on a single call (US football, Ice Hockey, Basketball and Baseball) with the following filter:



`"marketFilter":{"marketTypes":["MATCH_ODDS"],"eventTypeIds":["6423","7522","7524","7511"]},"marketDataFilter":{"ladderLevels":10,"fields":["EX_ALL_OFFERS","EX_TRADED","EX_TRADED_VOL","EX_LTP","EX_MARKET_DEF","EX_BEST_OFFERS_DISP","SP_PROJECTED"]}`



For some reason it is only returning basketball and Americal football markets. Any ideas as to what could be causing this. I have a 1000 market limit per stream connection and I can't see a problem with that being exceeded (visually checking on the BF website rough numbers). Any suggestions? What normally happens if your required markets exceed your limit? I'd always thought your sub was refused in such cases?

---

## 2023-01-20 19:13:38 - general channel

**Nicholas vizard**

yeah that's the plan. Thanks Mo. Ill add in a third condition that the publish time needs to be after the market time and see how I go. Thanks again for your help.

---

## 2023-01-20 18:20:07 - random channel

**liam**

Happy to add more channels, the problem is I have to invite everyone so people get spammed, comes down to the question of if we want loads of channels like the AUS group 

---

## 2023-01-20 09:12:58 - strategies channel

**Niklas**

Hey [@U83SXMVN2](@U83SXMVN2), depends on what area you wanna learn in. There is this really good book from the MIT which talks about algorithms for decision making and multi agent problems. However it is quite technical and requires some basic understandings of machine learning and statistics

[https://algorithmsbook.com/#](https://algorithmsbook.com/#)

---

## 2023-01-19 12:49:55 - general channel

**Aaron Smith**

Initially i was also surpised by how much liam provided given its a competition, but as of now, i m pretty sure he made a good deal with that. A group within can still heavily benefit from idea sharing and code sharing and in order to get actual meaningful help you also need to provide meaningful help. In such an enviroment some kind of trust needs to be established and from there on you surely can create relations that are helpful in both directions.

---

## 2023-01-19 08:30:25 - general channel

**liam**

The [https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/flumine/streams/orderstream.py#L64|code](https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/flumine/streams/orderstream.py#L64|code) is probably the easiest way of explaining it

---

## 2023-01-18 10:30:31 - issues channel

**D**

Do you have a folder called strategies that contains a marketrecorder python file?

---

## 2023-01-17 22:06:20 - strategies channel

**richard**

Are there any resources that you'd recommend for someone interested in learning about how to trade sports markets?

---

## 2023-01-17 08:33:02 - general channel

**liam**

I would say its *much* simpler to do it the 'flumine' [https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/examples/strategies/lowestlayer.py#L60|way](https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/examples/strategies/lowestlayer.py#L60|way)



```# create order

order = trade.create_order(

    side="LAY",

    order_type=LimitOrder(lay, stake),

    notes=OrderedDict(

        best_back_price=best_back_price,

        best_lay_price=best_lay_price

    )

)```

---

## 2023-01-16 21:18:29 - general channel

**Trex44**

Right sorted that, thanks for your help Liam, will always post logs in future.  Also congratz to whoever just took my £2 bet on Giorgio Vasari on Wednesday at odds of 1.2. I am sure you got value!

---

## 2023-01-16 20:18:25 - general channel

**Trex44**

In the [https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/examples/strategies/lowestlayer.py|LowestLayer](https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/examples/strategies/lowestlayer.py|LowestLayer) example should the check_market_book method be called as soon as framework.run() is called? It doesn't seem to be being called at the moment and I can't get a bet placed.

---

## 2023-01-16 17:37:14 - general channel

**Trex44**

Never used it my self but found this on stack overflow



_Until the market is actually closed, the starting price can only be estimated, and Betfair have two methods for this, the *far price* and the *near price*._



[https://sports.stackexchange.com/questions/10697/how-to-calculate-the-far-and-near-price-of-betfair](https://sports.stackexchange.com/questions/10697/how-to-calculate-the-far-and-near-price-of-betfair)

---

## 2023-01-16 11:59:42 - random channel

**Alessio**

the other thing to consider is that if one day you need to load _some stuff_ in a python script you need to rewrite your writer/loader

---

## 2023-01-16 11:57:41 - random channel

**D C**

Well yes. Probably should have specified I don't use Python - does  it not play nicely with binary format file data?

---

## 2023-01-14 20:47:33 - general channel

**Lee**

Looks like for SP bets it fully matches whatever size is asked [https://github.com/betcode-org/flumine/blob/master/flumine/simulation/simulatedorder.py#L306](https://github.com/betcode-org/flumine/blob/master/flumine/simulation/simulatedorder.py#L306)

---

## 2023-01-14 11:00:29 - issues channel

**Andy**

Yea I actually need to match the clothnumber and selectionName to know which selectionID. All good with this now I think using flumine, thx 

---

## 2023-01-14 10:48:23 - general channel

**Ralegh**

I had a go rewriting my stuff in polars and exactly as [@U9JHLMZB4](@U9JHLMZB4) said, edge cases meant I ended up going back without finishing. I really like the interface, just couldn’t figure out how to do a few critical things, rolling stuff and reindexing for example (there’s no indexes but I couldn’t find a way to do the equivalent with a column)

---

## 2023-01-14 10:29:18 - general channel

**Guy Incognito**

I've been looking into market on close order and also limit on close order I'm placing small bets 3 - 4 quid is this big enough to ever move the bsp? I'm using the flumine simulations and aren't fully getting matched, does this mean I would have moved bsp?

---

## 2023-01-14 10:05:43 - issues channel

**liam**

Thought you just wanted id’s? You will need to make catalogue requests for the names / metadata but you can use the marketIds received from streaming to do this or just use flumine and it does it all for you 

---

## 2023-01-14 08:11:51 - issues channel

**Andy**

And if it is accurate, is there are way to get all ‘new’ market data by polling, even if there was currently 400 Aus horse races active on side. Right now I just know how to get the next 100 (max)

---

## 2023-01-14 08:10:07 - issues channel

**Andy**

Is this not accurate what it says about streaming here? 

---

## 2023-01-14 08:09:18 - issues channel

**Andy**

Struggling to get a lot of the selection data with streaming I was able to get before, basic stuff like selection name and saddlecloth number 

---

## 2023-01-13 10:57:54 - issues channel

**liam**

1. Streaming gives you everything a MarketBook request gives you (and more) so has the selection data

2. Flumine uses betfairlightweight under the hood 

---

## 2023-01-13 10:56:34 - issues channel

**Andy**

a question to get me moving



1. Do I use betfairlightweight streaming_market_filter and streaming_market_data_filter just to get market data  (IDs) and then I use flumine on another stream to get selection data or

2. Can I get everything with flumine and I don't need betfairlightweight

3. I should do something else

---

## 2023-01-13 10:45:04 - issues channel

**liam**

are you using flumine yet?

---

## 2023-01-13 10:37:18 - issues channel

**liam**

[https://betcode-org.github.io/betfair/streaming/](https://betcode-org.github.io/betfair/streaming/)

---

## 2023-01-13 10:12:02 - issues channel

**liam**

Why aren't you streaming?

---

## 2023-01-12 17:10:39 - strategies channel

**liam**

I might try and do a thread each day I am working on something, it has oddly helped me stay focussed today (it’s rare I am still being productive past 11am)

---

## 2023-01-12 16:06:19 - strategies channel

**D C**

I'm not a flumine user but interested to know how many threads you have spinning in the background that are just to place bets. You must be spitting out a lot of bets if max stake is £4

---

## 2023-01-12 14:17:19 - general channel

**Carl**

Hi [@U034LK55D3P](@U034LK55D3P) , [@U03FS7KM2NL](@U03FS7KM2NL), Carl from Betfair here. I can send you the full spec, please message me on [mailto:carl.albon@betfair.com|carl.albon@betfair.com](mailto:carl.albon@betfair.com|carl.albon@betfair.com) . Timeform are part of our group so I can get the answers to any ad hoc questions you may have. In terms of cost, the last quote I got was £13k p.a. for the full suite of horse racing data (I can normally get some discount for up-front payment), 12 months minimum subscription. Greyhounds is a little less p.a.

---

## 2023-01-12 13:26:50 - strategies channel

**PeterLe**

This best describes what I found with TPD :

[https://en.wikipedia.org/wiki/Conjunction_fallacy](https://en.wikipedia.org/wiki/Conjunction_fallacy)

(Daniel Kahneman), The Linda problem. I found i was doing OK with it, but better without including it in the mix

---

## 2023-01-12 09:06:25 - random channel

**liam**

A bit of both, I use something similar for 'backtesting' before moving to flumine 'simulation'.



Basically consists of a very wide table and I just filter / order / if till profit appears

---

## 2023-01-12 00:08:24 - random channel

**Michael**

An old colleague reached out an offered me a job as a machine learning engineer at a online retailer - I'd just started a role in finance in M&amp;A but salary will be better than my base (probably in total, since bonus will be less than finance) but I assume hours will be far better - Does anyone know what the pay progression is like for ML engineers and what it tops out at?

---

## 2023-01-11 20:37:59 - general channel

**Lee**

[https://github.com/betcode-org/flumine/blob/master/flumine/baseflumine.py#L90|https://github.com/betcode-org/flumine/blob/master/flumine/baseflumine.py#L90](https://github.com/betcode-org/flumine/blob/master/flumine/baseflumine.py#L90|https://github.com/betcode-org/flumine/blob/master/flumine/baseflumine.py#L90)

---

## 2023-01-11 20:26:04 - general channel

**Andrew**

Just had a wonder after doing some reading above. When using FlumineSimulaton does SimulationMiddleware need to be added to the framework? I can’t see in the source where it is add for simulation. The examples don’t show the need to add it.

---

## 2023-01-10 12:35:29 - issues channel

**D C**

You should check out the API documentation to get a feel for what is possible and the parameters required for each operation

---

## 2023-01-10 12:33:31 - issues channel

**Unknown**

one more for now please. Any documentation on what values are valid for some of these parameters?

---

## 2023-01-10 11:41:49 - issues channel

**Andy**

thanks Lawrence! This helps me get somewhere.... I can understand the code here but I still don't think I would have enough knowledge to implement my own workable code on top

---

## 2023-01-10 10:20:36 - issues channel

**Andy**

Appreciate the help Liam but I have pretty basic knowledge and unless there's step by step instructions for all of this on YouTube or something it's probably out of my league. What I have is an excel file with data being refreshed into it e.g. (Event) Cheltenham Race 1, (Outcome) 12. Majed, (Price) 2.5 and I want to map this to placing automated BACK bets on the corresponding exchange market, outcome and price in real-time (ish). I'm a recreational gambler and just testing some things out, but if anybody wants to reach out with help with putting something together I'm happy something to pay for your time. Would ideally like to do screenshare sessions so I can learn something along the way

---

## 2023-01-10 10:04:26 - issues channel

**Andy**

also question - should I have used the 1.0-DELAY or 1.0 app key?

---

## 2023-01-10 09:37:54 - betconnect channel

**Andy**

also apologies if not, but is this the right place for the *betfairlightweight* community?

---

## 2023-01-10 07:09:53 - issues channel

**liam**

Yeah async will work with no issues, helps in freeing up the amount of threads used in the pool

---

## 2023-01-09 17:56:13 - general channel

**Mo**

Better to use the API functionality in betfairlightweight no?

---

## 2023-01-09 15:42:51 - general channel

**thambie1**

Yeah, that codebase for the rest API calls (placing orders, cancelling orders, etc). And then the following codebase for the streaming market data: [https://github.com/betfair/stream-api-sample-code/tree/master/java|https://github.com/betfair/stream-api-sample-code/tree/master/java](https://github.com/betfair/stream-api-sample-code/tree/master/java|https://github.com/betfair/stream-api-sample-code/tree/master/java)

---

## 2023-01-09 13:22:57 - general channel

**D C**

Can't vouch for the quality but if you are dead set on Java it might help you start out.

---

## 2023-01-09 13:22:33 - general channel

**D C**

I've not come across anything in a mature state for Java like BFLW is for Python but this repo has some Java code exanples

---

## 2023-01-09 13:16:12 - general channel

**Artiom Giz**

Hi guys!

Does anybody use *Java* for *orders operations* (place/cancel/update/...)?

What is the best/fastest way to get into - simply implement all API calls by myself or there is something ready I can use?

For Python it's done by _betfairlightweight_, looking for something similar for Java :pray:

---

## 2023-01-09 09:39:42 - general channel

**Andrew**

Half answering my own question, I think o need to implement a wait queue for the new order to wait for the cancellation to be confirmed, but that will introduce a lag on placing the updated new order.

---

## 2023-01-07 12:34:46 - general channel

**Ralegh**

Flumine, I’m logging directly from get_price(available to back). There’s a little bit of logic before that but I’m pretty sure it shouldn’t be skipping prices unless they have a big delay between publish time and current time (&gt;500ms), when I changed the threshold it didn’t change the jumps. 

---

## 2023-01-07 09:50:21 - general channel

**Peter**

[@U03FS7KM2NL](@U03FS7KM2NL) Re-reading your question ... where are you observing no updates for a second or two? The website UI, bflw polling or flumine?

---

## 2023-01-06 17:13:40 - general channel

**Ralegh**

Is it common for prices to skip several levels (e.g 3.2-3.6 to 3.8-4.2) in one tick, I feel like I’m not receiving some updates from betfair as I won’t have an update on one contract for a second or two and then it completely jumps, using flumine. Might try just streaming from bflw 

---

## 2023-01-06 09:35:23 - general channel

**Peter**

CurrentOrder is a betfairlightweight class that closely follows the data structure used by Betfair. SimulatedOrder and BetfairOrder are Flumine classes that take a more nuanced approach, restructuring and expanding the data available. You can find the price and the size as attributes of their order.order_type objects.

---

## 2023-01-05 17:46:41 - general channel

**dont**

Sorry I missed your previous comment.



Yeah my point is exactly what you mentioned above - that ansible is much more powerful than just managing your Python environment so (in my opinion) it’s a bit of an overkill to use ansible just for that.

---

## 2023-01-05 08:09:02 - general channel

**river_shah**

If `order_1` fails either flumine internal risk limits or betfair limits, is `order_2` guaranteed to fail?

```with market.transaction() as t:

    t.place_order(order_1)

    t.place_order(order_2)```



---

## 2023-01-04 22:57:30 - general channel

**dont**

`pipenv` related workflows that might help:

[https://github.com/pypa/pipenv/blob/main/docs/advanced.rst](https://github.com/pypa/pipenv/blob/main/docs/advanced.rst)

---

## 2023-01-04 07:18:13 - general channel

**Mo**

[@U01C12ZEADQ](@U01C12ZEADQ) I assume from the phrasing of your question that you've seen the [https://www.sciencepublishinggroup.com/journal/paperinfo?journalid=155&amp;doi=10.11648/j.ajss.20170506.12|Clarke et al](https://www.sciencepublishinggroup.com/journal/paperinfo?journalid=155&amp;doi=10.11648/j.ajss.20170506.12|Clarke et al) paper promotes the use of the power method but you're looking for more practical evidence?

---

## 2023-01-03 23:50:23 - strategies channel

**PeterLe**

hi Birchy, Thanks for that. Adverse selection is a big factor, so Im always cautious (maybe too much sometimes)...

For example, if I run the back test with a stake of x, I get 100% Match of £98K, actual sim match = £9.3k

If I use 4x then the resp values are £384K and £10.2K

So given that, I guess that the answer to my opening question is, maybe the 36% of 100% is a guide subject to 'realistic stakes'

I know from past experience that i should be fine up to 2x stakes, given where the odds are (ie they are not at 1000 or 1.01 etc) they are right in the thick of the action

Just  trying to move up one category on Mo's poll :grinning:

---

## 2023-01-03 22:56:37 - strategies channel

**PeterLe**

Quick question please on using the 100% match (simulate full match)...when back testing...

If I know my true match rate (based on 30K real bets)...eg 36%..

I then run the back test on 13K markets and get £x on 100% match value

Is it a good measure to take 36% of X in the above scenario?

or is that too simple? thanks

---

## 2023-01-03 22:29:10 - random channel

**Jonjonjon**

Ah. I understand now. The lurker who appears every time there's a mortgage question must love it there.

---

## 2023-01-03 22:03:46 - general channel

**foxwood**

I got in a right muddle with PyCharm switching back from 3.10 to 3.9 because it broke something. You'd have to create a new project as I understand it for you new bots and set the environment for that new project. Think found my answers at [https://www.jetbrains.com/help/pycharm/configuring-python-interpreter.html#modify_interpreter](https://www.jetbrains.com/help/pycharm/configuring-python-interpreter.html#modify_interpreter)

---

## 2023-01-03 02:50:32 - general channel

**Andrew**

I was just searching this chat for the same question :+1::skin-tone-2: :blush: 

---

## 2023-01-03 02:49:41 - general channel

**AI Trader**

This is extremely helpful to understand [@U4H19D1D2](@U4H19D1D2)  thank you so much 

---

## 2023-01-02 16:18:50 - general channel

**AI Trader**

*FLUMINE BACKTETER* 

Guys, I wanted to ask a couple of questions regarding the backtester.



1 - How does the backtester decide if an order would be executed? Is it only based on traded_volume? Or it also considers orders executed if the prices in the orderbook would have crossed your odd (even though there was 0 traded volume in the meantime) ?

Example: I put a BACK order at odd 1.4 when the prices in the book are: (best available to back = 1.2 and best available to lay = 1.3). After 10 minutes there have been no trades, but the odds in the orderbook shifted to : best available to back = 1.5 and best available to lay = 1.6 with 0 traded volume in the period.

Assuming the backtester would consider any execution in this scenario,  what are the assumptions regarding the executed volume ? Of course, if I had put 100 million dollars in this order, it wouldn't be completely filled, but would certainly be partially filled in real life.



2 - What are the assumptions on the priority queue? Does the backtester only execute your order if the traded volume crosses your price (meaning if you have a BACK open order at odd 1.4, and there is a trade at 1.4, how does the backtester handle the priority queue? Will it execute anything? Or only executed if there is a trade with odd greater than 1.4?



The reason I am asking is because it seems that the backtester shows way less execution than what I get in reality. Any personal experiences regarding this would be very much appreciated

---

## 2023-01-02 16:12:36 - general channel

**Fab**

Here's a question for Flumine experts, related to the code below, executed on real-time Betfair markets (no backtesting).



I need to capture the winner of a market, but it looks like execution never gets to the `# DO SOMETHING` line.



For the record, the code is definitely reachable: putting a `print(runner.status)` statement just below the `for` line, always prints `ACTIVE` when the market is still open.



*Question: does Flumine trigger `process_market_book` even on the very last message received by Betfair streamer? (market status == CLOSED)*



```def process_market_book(self, market: Market, market_book: MarketBook) -&gt; None:

    for runner in market_book.runners:

        if runner.status == "WINNER":

            # DO SOMETHING```

---

## 2023-01-01 22:35:46 - random channel

**D**

Happy New Year to everyone :tada: My goals are to try and diversify my strategies to be less dependent on what's currently working for me, and to try and get more into Flumine.

---

## 2023-01-01 21:42:57 - random channel

**Mo**

In terms of me learning something new, there are the guys with finance backgrounds, and there also people working outside of my core sports. But it’s also not necessarily about learning something new - it’s also about having someone to ask the right questions/be able to bounce ideas off of to get the best out of me

---

## 2022-12-31 18:55:45 - random channel

**PeterLe**

JonJon read this, a great book. “The man who solved the markets” Jim Simon. That will answer you question 

---

## 2022-12-30 12:22:00 - general channel

**Mo**

I also have opinions on the design which is not to cast any shade on flumine - more a question of personal preference. Different ways of approaching problems 

---

## 2022-12-30 12:19:33 - general channel

**Mo**

flumine didn’t exist 12 years ago 

---

## 2022-12-30 12:18:48 - random channel

**Mo**

I've ended up with a surplus copy of [https://pipdecks.com/pages/idea-tactics-card-deck|Idea Tactics](https://pipdecks.com/pages/idea-tactics-card-deck|Idea Tactics) - it's a deck of cards that helps you with idea generation. I think it'll probably be more useful if you work with a team but it can definitely also be used solo. Let me know if you’re interested and I’ll pick a winner at random

---

## 2022-12-30 12:17:49 - general channel

**Ralegh**

Thanks for replies, any specific reasons not to use flumine? Or is it just how you guys built your infra out

---

## 2022-12-30 11:51:10 - general channel

**D C**

I use m5.xlarge but it is way more than I need - but like Mo I don't use flumine and run on a much smaller scale (horses only).

---

## 2022-12-30 10:41:42 - random channel

**Alessio**

Very interesting. I'm also in the "you can't remove the human, only build helping tools". The main reason is that all those tools may be good for a first write, but then you can't easily evolve whatever you have, update, etc... plus the licensing issues (Oracle vs Google, I am looking at you)

---

## 2022-12-29 20:30:05 - general channel

**Fab**

Mo and I couldn't reach an agreement. :smile:



So, if anyone else can help with this, please get in touch.

---

## 2022-12-29 17:14:40 - random channel

**Jonjonjon**

Do you think that AI stuff will help to take programming to the next level? I don't think it will put programmers out of a job. For example, it won't stop me punting on Betfair. If anything it should make programming faster, though I have yet to try it.

---

## 2022-12-29 16:09:07 - random channel

**liam**

No question that my children will be learning to program (wether they like it or not :joy:) skill for life and if you have experience you can literally walk into a job in any industry you want. 



Sports person is a huge risk in my eyes, only the top paid well / injury can put a stop to everything etc. Can’t remember his name but there was a welsh rugby player who studied at Cardiff to be a doctor whilst playing nationals, very wise 

---

## 2022-12-29 10:57:51 - random channel

**Paul**

I did a total of 12 hours of interviews to get into Amazon, spread over 2 batches. None of them were HR - all engineers and engineering managers asking about my experience and a few simple problem solving tasks 

---

## 2022-12-29 10:56:20 - random channel

**Paul**

It’s all supply/demand market economics as with anything, and this slack should understand better than most. Anything you learn at Uni - Python/Java/C++ pays less well than the languages you have to teach yourself and can find an excited CTO for - Ruby, Go, Elixir, Haskell, OCaml, for example

---

## 2022-12-29 10:42:54 - random channel

**D C**

£35k without a degree as an apprentice python dev???? F*** me the world has changed a lot.

---

## 2022-12-29 10:28:42 - random channel

**PeterLe**

What’s the best paid software tech job these days? For example would a DBA earn more than a Python dev?

---

## 2022-12-29 09:41:45 - random channel

**Jonjonjon**

No.. it's a fatherhood question. I'm pondering the odds of success for a child aiming to be a footballer Vs a Python dev. I was sent something about a premier League player who earns minimum wage. And he must be pretty amazing. So I have a feeling that a low level Python developer probably earns more than a low level pro footballer.

---

## 2022-12-29 09:28:20 - random channel

**Mo**

This sounds like an interview question

---

## 2022-12-29 08:51:34 - random channel

**Jonjonjon**

In the UK, how many professional Python developers are there, Vs the number of professional footballers?

---

## 2022-12-28 13:13:52 - issues channel

**Guy Incognito**

The problem for me is I manually have to go and press crtl c after it get stuck

---

## 2022-12-28 11:16:49 - betfair-news channel

**D C**

There used to be so I assume there still is. I had to fill in a short questionnaire to be approved. There used to be a link on the BF pages somewhere but it was several years ago now so things might all be different.

---

## 2022-12-28 10:37:55 - betfair-news channel

**Mick**

I just thought I'd have a little play with streaming (normally I just use the non-streaming API) but I got a message "AppKey is not configured for service". Do I need to somehow seek extra permission to use streaming?

---

## 2022-12-24 11:47:54 - strategies channel

**Dave**

How to ensure your markets have extremely wide spreads 101: Impose terrible charges and no incentives for makers

---

## 2022-12-24 01:01:42 - strategies channel

**Michael**

Thanks Peter, the guys have mentioned you need to bet a minimum amount of volume to avoid getting stopped from streaming raw data. So was hoping for any strategies which I can run which whilst may not make money, don't lose me a huge amount either as I collect data

---

## 2022-12-23 09:20:56 - strategies channel

**Liam Querido**

One other general question, what are some of the ways that a bet can be cancelled? Is it simply by someone else taking that price?

---

## 2022-12-23 09:06:12 - strategies channel

**Mo**

I believe these are the figures that flumine uses: [https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/flumine/config.py#L26-L29](https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/flumine/config.py#L26-L29)



Personally I think they're a little conservative but that's better than being overly optimistic

---

## 2022-12-23 00:43:29 - general channel

**Michael**

[@U4H19D1D2](@U4H19D1D2) what does the pricing look like just for your streaming?

---

## 2022-12-20 05:20:07 - random channel

**VT**

I believe that showing these values ​​can help attract new people to Betfair, if there's one thing these guys want is more people clicking on Betfair markets.

---

## 2022-12-18 18:56:47 - random channel

**Mo**

Looks like the problem is this file: `botocore/data/s3/2006-03-01/endpoint-rule-set-1.json.gz` which is not actually compressed. This gets read as part of `smart_open` trying to read directly from S3 but because `open` is patched with `smart_open`, `smart_open` tries to be clever about reading a file with a `.gz` extension and pukes when it discovers it's not actually compressed

---

## 2022-12-17 19:52:36 - general channel

**Peter**

A possible consideration is the number of markets at the time when you will be instantiating the collection process. You will have a limit on the number of markets to which you can subscribe (initially), and a separation by sport may help you to stay below that limit. Indeed some sports (I'm looking at you soccer) may need more than one collection instance even with a generous limit.

---

## 2022-12-14 11:15:16 - issues channel

**Liam Querido**

Thanks Mo. All is working perfectly now. Really appreciate your help, as always!

---

## 2022-12-13 18:46:36 - issues channel

**foxwood**

That looks interesting thanks. The market class call wraps `order.replace()` but then does useful stuff like putting the order back into pending - hopefully that will then lead to matching. Went down that rabbit hole jumping from BF docs to IDE helper which showed order methods lol. Will test later but consider this closed now.

---

## 2022-12-13 18:04:00 - issues channel

**Liam Querido**

Sorry for the mass questions, but I'm at least following now

---

## 2022-12-13 17:58:38 - issues channel

**Liam Querido**

I don't quite understand how the same function has different branches, and how to use the different branches?

---

## 2022-12-13 15:08:00 - random channel

**ShaunW**

It's not just the person you give your details to that's the problem, it's their security and who else might discover it.  As an agent you'd certainly need a rock solid contract to establish/deny liability. You could be sued for being irresponsible with what's intended to be confidential under the DPA.

---

## 2022-12-13 12:52:32 - issues channel

**Mo**

I think you need to read up on how to switch branches on GitHub

---

## 2022-12-13 12:47:09 - issues channel

**Liam Querido**

What documentation should I search for?

---

## 2022-12-12 15:57:52 - random channel

**PeterLe**

George - If you have numerous usernames all via the one IP address doesnt betfair question that?

---

## 2022-12-12 15:49:40 - random channel

**D C**

Yes. I don't doubt that he is up to something dodgy, I was more asking the question as a matter of principle - is there any way this could be done legitimately and safely from an account security point of view.

---

## 2022-12-12 10:17:13 - general channel

**dont**

Hey folks, I was just trying out flumine, is there a place to get the username of a betfair account ? I only used the email to login so far, and I can’t see it anywhere in the profile. The `betfairlightweight` api doesn’t seem to be working with the email address.

---

## 2022-12-11 16:12:22 - general channel

**Newbie99**

I get the impression they only seem to tweet about it when someone points out there's a problem (rather than monitoring and sending out automated tweets).

---

## 2022-12-10 21:41:13 - general channel

**R**

Thanks, much appreciated.  I'll look into adding some checks to avoid problems

---

## 2022-12-10 20:23:50 - general channel

**R**

This might be a stupid question but it just hit me:  do the betfair selection IDs ever change between markets on the same event?  e.g. Horse A is always Horse A no matter if I am looking at PLACE, WIN, AvB, etc?



I mean I presume not, but thought I would ask to be sure

---

## 2022-12-08 13:08:51 - strategies channel

**ShaunW**

100% understand. Helping others is rewarding in itself and often triggers new ideas or at the very least the need to prove what you do is in fact sound.   



Sorry for the thread drift there, but efficiency and competition are always a problem as exchanges mature.  Stark and sudden changes are a mystery though.

---

## 2022-12-08 13:02:28 - strategies channel

**liam**

the idea of others using bflw/flumine to make money is what keeps the open source going for me

---

## 2022-12-08 11:20:21 - strategies channel

**Jorge**

[@UBS7QANF3](@UBS7QANF3) what price do you use to calculate implied_probability, knowing the market_book? This is a problem I am facing if the spread is big..

---

## 2022-12-08 09:55:46 - strategies channel

**D C**

After some analysis I worked out that for 2 months I was causing self-inflicted damage so its hard to work out what profit would be without that. I've a small sample size to play with though as I only have 2.5 years of profitability to go on. Was last year very good, was this year very bad or is the market just getting more efficient? I've no idea where to start to answer that question.

---

## 2022-12-08 09:24:55 - strategies channel

**Unknown**

Here is 100% match, this is telling me that maybe I am the problem / the market doesn't have the capacity it once did

---

## 2022-12-07 10:30:23 - random channel

**river_shah**

perfect, today I learned. so far was was writing logs via gcp libs in python. this is much better.

---

## 2022-12-07 09:46:54 - random channel

**river_shah**

Does anyone have a helpful code snippet on how to stream logs to s3 or gcp bucket from python in a cloud provider agnostic way. Can `smart_open` do the streaming? I see examples like this but platform specific: [https://cloud.google.com/python/docs/reference/logging/latest/handlers-cloud-logging](https://cloud.google.com/python/docs/reference/logging/latest/handlers-cloud-logging)

---

## 2022-12-05 10:50:08 - general channel

**liam**

Start [https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/flumine/markets/middleware.py#L183|here](https://github.com/betcode-org/flumine/blob/04d607e1d749a2dbaa8297bbf74c062990867a6b/flumine/markets/middleware.py#L183|here)

---

## 2022-12-05 10:48:39 - general channel

**Jorge**

What is the logic followed in Flumine Simulations to know if a "maker" order that I place would get matched or not?

---

## 2022-12-04 18:32:25 - general channel

**Peter**

For clarity, the limitation isn't in Flumine, it's in the streaming from Betfair. Once Flumine has subscribed to market stream, it's Betfair that adds or removes markets from the stream depending on the criteria passed to it during the initial subscription. Flumine merely reacts to the changes.

---

## 2022-12-04 17:04:22 - general channel

**Newbie99**

It sounds like you are using Flumine (and therefore streaming), in which case what you are proposing isn't possible (and I suspect most on here would suggest not desirable either).



The way to achieve what you want is to subscribe to all markets that meet some basic criteria and then have your own filter (as you suggested).



The only other way, would be to poll via the REST API, but you may find its just easier to use the streaming approach.

---

## 2022-12-04 14:52:07 - general channel

**PeterLe**

API documentation has been provided now by betangel Liam.

[https://www.betangel.com/api-guide/](https://www.betangel.com/api-guide/)

---

## 2022-12-04 11:00:39 - general channel

**birchy**

Most of us gather our own data, however you need to make sure that you are placing bets as well to avoid getting blocked.

[https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py|https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py|https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py)



For the bets, this is a good starting point, or you could do something simple like lay runners &lt; 2.0. 

[https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py|https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py](https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py|https://github.com/betcode-org/flumine/blob/master/examples/strategies/lowestlayer.py)

---

## 2022-12-03 18:51:10 - issues channel

**D C**

Yeah. Would have loved to have found BFLW before I started.

---

## 2022-12-03 18:40:34 - issues channel

**D C**

I use my own stuff written in C++. Unfortunately I started a long time before I was aware of BFLW. If I were coming to the game fresh I would certainly be using BFLW.

---

## 2022-12-03 16:36:18 - issues channel

**D C**

Specifics are here at the API level if nobody can give you a BFLW one line answer

---

## 2022-12-03 16:35:35 - issues channel

**D C**

If you place bets with placeOrders operation and you place a batch of bets with a single call, if ANYTHING fails for any reason, none of those bets in that batch will place. Within the response you get a list of the orders and their individual status. Within there you will find a status codes for each order which should highlight the problem

---

## 2022-12-02 12:34:23 - general channel

**Aaron Smith**

note: ensure you request SP data in your streaming_market_data_filter, otherwise it ll return None

---

## 2022-12-02 11:19:05 - general channel

**birchy**

In Flumine it's `runner.sp.near_price`

---

## 2022-12-01 10:58:45 - general channel

**MMW**

no problem

---

## 2022-12-01 10:53:02 - general channel

**Mo**

Look at the examples: [https://github.com/betcode-org/betfair/tree/master/examples](https://github.com/betcode-org/betfair/tree/master/examples)

---

## 2022-11-30 16:53:16 - general channel

**EJono**

thank you very much, i was being ignorant of this parameter since it was not listed as a required field in betfairs api documentation. Cheers again still got lots to learn

---

## 2022-11-30 15:18:45 - general channel

**EJono**

I posed a question in the issues channel related to linking win margin selection ids to the correct points buckets (selection/team name) for rugby matches. The problem im facing is that the runners list in each games market_catalogue are empty, thus no sort priority or team names are available to link the selection id to the actual outcome it correlates to. Is this something worth contacting betfair directly about in order to sort out or potentially recieve a dump of selection_ids associated with the correct selection/team_name ? Ive confirmed that that the selection ids are not persistnet between games ie the id for home team 1-12+ option is not the same from one game to another and ive also experienced the index of the runners be inconsistent. The draw is the only excpetion with persistent selection_id whcih matches that of the MATCH_ODDS but i am rarely interested in placing on this selection.

Any advice? is it time to start shooting questions to betfair? Thanks

---

## 2022-11-27 14:38:56 - random channel

**D C**

Only thing I did notice which was very unusual was that the GPS stream seemed to be having problems in the sense that when my socket receive data handlers fired I often would be receiving multiple messages at once. Up to 17 at once which was very unusual. Probably an issue my end using async socket components but as I say, very unusual relatively speaking.

---

## 2022-11-27 12:25:52 - random channel

**PeterLe**

I had four strategies running on Flumine (relying on cancels) all four lost but very tiny amounts, I also lost my betangel strategies too so maybe there is nothing wrong with Flumine. (First at Navan looks good:grinning:)

---

## 2022-11-27 07:52:23 - general channel

**liam**

Market filters don’t work with streaming 

---

## 2022-11-26 17:25:44 - general channel

**liam**

Yes



It’s not additive but in flumine you can supply a list of filters 

---

## 2022-11-26 17:15:13 - general channel

**liam**

Yes

That won’t work when streaming, email bdp and get your limit bumped 

---

## 2022-11-26 16:58:15 - random channel

**Mo**

Lex Fridman's latest guest is Guido van Rossum (creator of Python): [https://youtu.be/-DVyjdw4t9I](https://youtu.be/-DVyjdw4t9I)

---

## 2022-11-25 21:08:11 - strategies channel

**Dave**

I have to say, flumine backtest with passive orders is extremely accurate. nice one.

---

## 2022-11-25 15:05:01 - random channel

**river_shah**

Surprisingly multi arch docker builds are not as seamless as one would like. I got a ton of crashes first and a then even after I had image building, many unit test failures for code with numpy / numba

---

## 2022-11-24 21:00:01 - strategies channel

**R**

[@U040MT4RVTK](@U040MT4RVTK) you're my guy.  This is a lot of what I am leaning on.  Tools that work in the larger market should work here.  Just a matter of figuring out how to map the toolkit over.



On mean reversion, I can see that the first differences of returns is stationary time series... so momentum is on the cards.

---

## 2022-11-24 08:18:13 - general channel

**liam**

When streaming if you want best display you need to ask for only best display only, otherwise we default to best offers (what you should be looking at)

---

## 2022-11-24 02:04:58 - general channel

**Unknown**

*UI ORDERBOOK SIZE DIFFERENT FROM STREAMING* 



Hi guys,

Would anyone be able to explain why I see different sizes in the UI for some levels of the book when compared to the orderbook received through the stream?

Here's one example:

For these selections, I don't even see the first two levels of the UI (2.14 and 2.16) in the runner coming from the stream. I have tried to subscribe to all the three

```"EX_BEST_OFFERS", "EX_BEST_OFFERS_DISP", "EX_ALL_OFFERS"```

And all of them have different values from the ones I can see in the UI.



Any help will be much appreciated. Thanks!

---

## 2022-11-24 00:17:36 - general channel

**Johnny Boston**

Hey Ivan :joy:



Use the conversion rate in the bflw module. That's the only way to do it.

---

## 2022-11-23 23:39:05 - general channel

**Unknown**

Hey Guys, I have a pretty basic question, so apologies in advance. When I use runner.ex.traded_volume and look at the `size` I see that the size is roughly half of what is displayed on the website. For example this graph shows $30 AUD but runner.ex.traded_volume gives me 16.78, i'm aussming that is GBP, do anyone know of an easy way to convert this?

---

## 2022-11-23 19:53:55 - general channel

**liam**

BetAngel [https://forum.betangel.com/viewtopic.php?t=26591|v1.60.0](https://forum.betangel.com/viewtopic.php?t=26591|v1.60.0) posting because it has an API! :clap:



Python wrapper anyone? 

---

## 2022-11-23 08:55:26 - strategies channel

**liam**

I was thinking about this yesterday when trying to test latencies, I couldn't work out how to even prove that any changes actually improved the accuracy so gave up

---

## 2022-11-23 08:18:39 - general channel

**Jorge**

Hi guys, while Simulating, how can I access `market.blotter.get_exposures(self, lookup=selection_lookup)`  when a market is cleared?



I'm looking at the [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|backtestloggingcontrol example](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|backtestloggingcontrol example), but want to save the exposure (profit_if_win and profit_if_lose) on top of the profit

---

## 2022-11-21 22:57:06 - strategies channel

**Paul**

Prices definitely sometimes move in ways that tech analysis can help with. There are resistance levels (especially when hitting a level where the size of gaps between odds change), and some prices move in bands pre-off for periods before moving. I wouldn’t put you off exploring it on highly liquid markets, as I’ve seen things there that look promising. I don’t think some of the more exotic TA patterns are present, but then I don’t think they’re real in most financial markets either.

---

## 2022-11-21 07:02:58 - general channel

**liam**

What’s being wasted? Streaming is extremely efficient 

---

## 2022-11-19 15:39:32 - issues channel

**Charlie Daragon**

Anyone else with windows knowledge that can help - it seems like a lot of people have this issue

---

## 2022-11-19 11:02:12 - general channel

**river_shah**

What would cause this issue please?

```2022-11-19 10:59:46.180 WARNING[flumine.order.process:process_current_orders:45] Order xxx not present in blotter

2022-11-19 10:59:46.291 WARNING[flumine.order.process:process_current_orders:45] Order yyy not present in blotter

2022-11-19 10:59:46.291 WARNING[flumine.order.process:process_current_orders:45] Order zzz not present in blotter```



---

## 2022-11-18 21:57:10 - issues channel

**Mikkel**

Is it possible to use betfairlight if I am from Denmark? I need to login with MitID and I can use the cookie when logging in through Betfair API, but it doesn't seem to work when logging in through betfairlight. Is there any work around on this?

---

## 2022-11-18 10:23:31 - random channel

**Jonjonjon**

Does anyone use a state machine to control their logic? I used my own one before I moved to Flumine. Now I just use 'if' statements to control the flow, but it's not efficient as my profiling shows that I'm wasting a lot of time recalculating my exposures, and using that to decide what to do.



E.g.



Calculate exposure 

If exposure is this:

   Do this

Else:

   Do that

---

## 2022-11-18 09:28:29 - betfair-news channel

**Newbie99**

[@U03TJKFLE8K](@U03TJKFLE8K) I don't know the answer, but this channel is only monitored by Betfair on specific occasions, you may have more luck posting the question in one of the other channels.

---

## 2022-11-17 11:35:46 - general channel

**D C**

I hacked something together in nodejs last night using the bflw example as a template. It works but it is VERY flakey and I don't always get a response. Is this common with these endpoints (find raceResults is WAY less reliable) or possibly an issue with my implementation?

---

## 2022-11-17 09:32:04 - general channel

**Jorge**

Makes sense, that was my other idea, just run it with smaller stakes in many different markets and wait to compare results. thanks mate, this is very helpful

---

## 2022-11-17 09:20:37 - general channel

**liam**

lmgtfy [https://betcode-org.github.io/flumine/quickstart/#simulation_1](https://betcode-org.github.io/flumine/quickstart/#simulation_1)

---

## 2022-11-16 16:41:13 - general channel

**Mo**

[https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleracecard.py)

---

## 2022-11-16 16:40:13 - general channel

**D C**

OK I'll work it out from the bflw. Cheers

---

## 2022-11-16 16:39:09 - general channel

**Mo**

Undocumented but trivial to access with bflw

---

## 2022-11-16 16:11:48 - general channel

**D C**

I'd go for streaming if I were you. Makes life a lot easier.

---

## 2022-11-16 16:09:50 - general channel

**George**

thanks for your answer. ISP would be interesting and clearly the information is "there" because it's in the App. But yes, it looks like it's not available through the API.

You are right, I could just do a listMarketBook call once the market is inplay, though I guess if I wasn't using streaming then I could accidentally miss it.

thanks again

---

## 2022-11-16 16:03:47 - general channel

**D C**

Fairly certain there is nothing in API-NG or streaming that will give you ISP or finish positions (other than winner). I suppose you could deduce from "winners" in the associated place markets but would be messy and depend on how many place markets are offered. BSP should be available in a listMarketBook call once the market is inplay (I've inferred here you have an aversion to using the stream based on your post).

---

## 2022-11-16 15:52:52 - general channel

**George**

When a race has finished, the Betfair App displays a nice table with the finishing position, BSP and ISP. *Is there any way of getting this table through the API?*

I know about the [https://promo.betfair.com/betfairsp/SP_history.html](https://promo.betfair.com/betfairsp/SP_history.html) page but you have to wait around 12 hours for the latest file to upload.

I also know that it's possible to get the BSP etc by using streaming in Flumine but it seems like a lot of work just to get the BSP - I'd only need one line of the 100k+ line file that is created.

---

## 2022-11-16 11:34:44 - general channel

**Mo**

Don't you scrape market catalogues for your sports of interest? Then you can just do a local database query

---

## 2022-11-16 08:33:02 - random channel

**river_shah**

Looking at couple of the MRs / github issues around it, seems like numba will be order a couple of months for next release. Also it does seem llvm / compilation issues arise between python minor versions hence the devs do have to do a fair bit of work to make the package available for 3.11

---

## 2022-11-16 07:09:11 - random channel

**river_shah**

Why do some packages pin the wheels to specific python versions? Seems like an unnecessary safety precaution. Aren't minor versions meant to be compatible including cpython abi? [@UPMUFSGCR](@UPMUFSGCR) we are not getting to upgrade for sometime it looks like 

---

## 2022-11-15 21:45:29 - random channel

**V**

Reference: [https://docs.python.org/3/glossary.html#term-hashable|https://docs.python.org/3/glossary.html#term-hashable](https://docs.python.org/3/glossary.html#term-hashable|https://docs.python.org/3/glossary.html#term-hashable)

---

## 2022-11-15 08:53:56 - general channel

**liam**

[@UPMUFSGCR](@UPMUFSGCR) had a [https://github.com/betcode-org/flumine/pull/296|PR](https://github.com/betcode-org/flumine/pull/296|PR) but he closed it?

---

## 2022-11-14 10:55:54 - random channel

**river_shah**

Sorry stackoverflow being not too helpful. If a requirement has upper version constraint for python, how do I force pip to ignore it?

---

## 2022-11-14 10:23:23 - random channel

**river_shah**

Amazing. Do you need to do a bflw / flumine rlease?

---

## 2022-11-14 09:29:25 - random channel

**liam**

Anyone else tried out py3.11 yet? I am seeing a serious improvement in flumine simulation times, M1 chip:



```py3.9:  139 markets in 45.3s

py3.11: 139 markets in 32.7s```

:exploding_head:

---

## 2022-11-14 07:56:43 - betfair-news channel

**Pos**

Noob question but Is BSP efficient on Aussie greyhound markets? I've found the variance to be quite a lot more than horses. What kind of liquidity and overround would you target to ensure efficient odds?

---

## 2022-11-12 21:45:47 - general channel

**Carlos M**

Thank you so much [@U4H19D1D2](@U4H19D1D2) and [@UBS7QANF3](@UBS7QANF3), that was genuinely helpful! I am still curious though to understand the advantage of approach 1 vs 2, where:

1: A FIFO storing every single book update

2. Keeping only the most recent book update per market



In the best case scenario, you are fast enough to react to every single update in both of the approaches (they will behave in the exact same way).

In the worst case scenario where you are late, you miss the opportunity in both approaches, but in approach 1 you place orders based on old data, which can be harmful. You also further increase the delay by processing old markets data.

On the other hand, in approach 2, you don't place harmful orders or further increase the delay

---

## 2022-11-12 17:43:56 - general channel

**Mo**

Personally for computationally heavy strategies I essentially do conflation (although I'm not using flumine). You won't be acting on stale data, you just might miss an opportunity in between conflated updates

---

## 2022-11-12 15:20:46 - general channel

**Carlos M**

Hi people, I am new here. Im currently using the framework I've developed myself some time ago to execute my strategies in an event-driven format. I have started migrating to Flumine. I have some questions. It would be great if someone could help me :slightly_smiling_face:

1. It seems to me that the framework runs all markets using a single process/ single thread and manages events through a FIFO queue (self.handler_queue). Is my understanding correct? I see two potential disadvantages with that:

    a. By having all events going to the same FIFO queue, if one gets 100 book updates in a very short time interval (from the same market), it will trigger the `process_market_book` 100 times, even though one would want to react only to the latest market book update (what would be the logic of reacting to older updates?) In that case, wouldn't it make sense to only react to the latest market_update? 

    b. It seems to be that all market updates (from different markets) go to the same queue. Wouldn't it be better to treat every market in a separate thread, especially for non-intensive CPU strategies? How do you guys go about making it multi-threading?

2. I am not sure I fully understand what should middlewares and workers be used for, that might be the reason for my previous question. Would someone be generous enough to explain to me?

Thank you so much!

---

## 2022-11-11 13:53:47 - general channel

**Jorge**

I was just confused because in the [https://github.com/betcode-org/flumine/blob/master/examples/example-single.py#L83|example](https://github.com/betcode-org/flumine/blob/master/examples/example-single.py#L83|example) it is set to 1000 ms

---

## 2022-11-10 14:42:42 - general channel

**Andy Bason**

Hi Liam, another question if I may: is it possible to get the countryCode too? Thanks

---

## 2022-11-10 13:27:49 - strategies channel

**liam**

(in flumine)

---

## 2022-11-10 12:51:01 - random channel

**D C**

Can anyone point me in the direction of the documentation on how to generate SLL certificates for API access? I've recently upgraded to ubuntu 22.04 which apparently uses SSL 3 and no longer allows lowering security. I always got around this on earlier versions using a local openssl.cnf as described [https://askubuntu.com/questions/1233186/ubuntu-20-04-how-to-set-lower-ssl-security-level](https://askubuntu.com/questions/1233186/ubuntu-20-04-how-to-set-lower-ssl-security-level)  but this no longer works so I think I want to bite the bullet and generate some new certificates. As a side question, I am assuming that we can generate as many or as few SSL cert files as we like for our accounts?

---

## 2022-11-10 10:26:03 - strategies channel

**liam**

you should split the problem in two, finding value and getting value, the latter is the hard part

---

## 2022-11-10 09:49:28 - strategies channel

**R**

This might be the wrong thread but I have a question around the liquidity of these markets.  I won't be coy, I'm looking at horses.  Is there a general sense of how much money we can get on for each bet type (~ 1-2 minutes before the event starts)?  e.g. win, place, forecast.  Even an order of magnitude estimate would be appreciated!  Will help me greatly in backtesting (I have built a custom system that I hope to port over to flumine soon)

---

## 2022-11-09 13:49:01 - random channel

**river_shah**

Thats really helpful. Thank you

---

## 2022-11-09 12:36:54 - general channel

**Newbie99**

You can get this on closure using this example:



[https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2022-11-09 12:35:47 - general channel

**liam**

You haven't asked for it in the `list_market_catalogue` request, example [https://github.com/betcode-org/betfair/blob/71c8fe2acdd20c9d65663e5a5af7692267489e81/examples/exampleone.py#L25|here](https://github.com/betcode-org/betfair/blob/71c8fe2acdd20c9d65663e5a5af7692267489e81/examples/exampleone.py#L25|here) that does

---

## 2022-11-09 12:08:06 - general channel

**foxwood**

One for any ML users. Any recommendations for an easy ML framework other than tensorflow ? I'm revisiting some 3 year old tensorflow Estimator experiments and tf.v2 deprecates all that work and has switched to Keras - the upgrade path is turning into a time wasting mare. The old v1 is still supported for a while but don't want to risk relying on legacy stuff. Played with [http://ML.NET|ML.NET](http://ML.NET|ML.NET) but while that looks promising it will require some sort of IPC to work with flumine in real time which will be too laggy. So preferably something that works natively with Python.

---

## 2022-11-09 08:00:36 - general channel

**Jorge**

Hi guys, any way of getting the total profit (bonus for profit net of commission) per market with flumine? Currently I'm calculating it manually using `sum([o.profit for o in market.blotter])`

---

## 2022-11-09 03:07:14 - general channel

**AI Trader**

Thank you so much [@UFTBRB3F1](@UFTBRB3F1), that's really helpful! I will try to implement during the weekend

---

## 2022-11-08 16:24:59 - general channel

**R**

New face in the slack with a potentially dumb question: does flumine have a method to grab related markets in betfair?  e.g. from the win market I can navigate to the place market, forecast market, etc?

---

## 2022-11-08 15:16:23 - general channel

**Mo**

Not that I'm a flumine user but it should handle it all for you

---

## 2022-11-08 14:33:12 - general channel

**Jorge**

I know about the #nogreen but is there any function in flumine to send a cash out order for a market/selection?

---

## 2022-11-08 13:54:04 - general channel

**Jorge**

Ah, I just discovered the [https://github.com/betcode-org/flumine/blob/master/flumine/markets/blotter.py#L26|blotter](https://github.com/betcode-org/flumine/blob/master/flumine/markets/blotter.py#L26|blotter) class, nice!

---

## 2022-11-08 09:55:20 - general channel

**Andy Bason**

Thanks and sorry for the basic question. I'm learning by doing. Thanks again

---

## 2022-11-08 09:39:46 - general channel

**Andy Bason**

Hi guys, I'm using the historical streaming example ([https://github.com/betcode-org/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/betcode-org/betfair/blob/master/examples/examplestreaminghistorical.py)). It works well but I would like to add team names to the output. Is this possible? I can see them in the market definition but can't work out how to parse them out. Thanks

---

## 2022-11-08 08:50:54 - betconnect channel

**Jack Broom**

Hey [@U01MPC0GUK1](@U01MPC0GUK1), no your not doing anything wrong and this issue was raised in the repo last week.



[https://github.com/betcode-org/betconnect/issues/35](https://github.com/betcode-org/betconnect/issues/35)

---

## 2022-11-07 16:53:14 - strategies channel

**Michael**

To be fair [@UEA14GBRR](@UEA14GBRR) I think you'll agree that yours is an unusual scenario in which your "closing" bet isn't really what you would normally mean by a "hedge". Taken in the general sense where hedging is done for stability of returns it's not controversial to say that it's negative ev (with a caveat to cover unusual bankroll limited scenarios).

---

## 2022-11-06 21:41:08 - general channel

**Michael**

Betfair API question - how do I put dates into date_range?

---

## 2022-11-06 19:36:11 - general channel

**foxwood**

Assumed so since `process_market_book`  was mentioned but maybe that is also in bflw

---

## 2022-11-06 17:55:46 - general channel

**liam**

Not sure Guy is a flumine convert 

---

## 2022-11-06 14:04:03 - general channel

**liam**

Is this the place response? currentOrders? streaming?

---

## 2022-11-06 12:12:29 - strategies channel

**mandelbot**

doesn't look like a question to me :smile:

---

## 2022-11-06 11:52:34 - strategies channel

**Unknown**

To hedge or not to hedge that is the question :question:

---

## 2022-11-06 09:15:04 - random channel

**Jonjonjon**

[@U4H19D1D2](@U4H19D1D2) I decided to change from 2 screen to 1. Definitely helps with focussing.

---

## 2022-11-06 08:37:24 - general channel

**Mo**

Then that will be the problem

---

## 2022-11-06 08:33:03 - general channel

**Mo**

[https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/docs/quickstart.md#listener-kwargs](https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/docs/quickstart.md#listener-kwargs)



```:param bool cumulative_runner_tv: Cumulative runner traded volume (should be True if using betfair purchased data)```



---

## 2022-11-05 20:45:47 - issues channel

**liam**

[https://betcode-org.github.io/flumine/quickstart/#listener-kwargs|https://betcode-org.github.io/flumine/quickstart/#listener-kwargs](https://betcode-org.github.io/flumine/quickstart/#listener-kwargs|https://betcode-org.github.io/flumine/quickstart/#listener-kwargs)

---

## 2022-11-05 11:37:08 - issues channel

**Meow**

Sorry i meant using the betfair API

---

## 2022-11-05 10:33:25 - issues channel

**Meow**

Hi, anyone know how to obtain deposit and withdrawal transactions please?

---

## 2022-11-05 06:07:08 - betfair-news channel

**river_shah**

This channel is only active per announced times. Though in answering your question, last info is that there are no immediate plans for changing bet or passive delay behaviour 

---

## 2022-11-04 12:07:17 - general channel

**liam**

Probably, just chuck it in and then access via `MarketBook._streaming_update`

---

## 2022-11-04 11:45:04 - general channel

**Jorge**

Related question: Is it possible to modify the example `marketrecorder.py` to record external data within the marketBook update so that I can access it when Simulating under `process_market_book` ?

---

## 2022-11-04 03:00:52 - betfair-news channel

**Pos**

how much faster is betfair api compared to the betfair website

---

## 2022-11-03 17:33:44 - general channel

**Jorge**

But I don't know how to do the above:sweat_smile:

---

## 2022-11-03 17:07:58 - general channel

**liam**

But that won’t satisfy your problem you described 

---

## 2022-11-03 16:54:32 - general channel

**Jorge**

I don't get what function would I need to refactor... Or is this something that doesn't make sense considering flumine's scope?

---

## 2022-11-03 16:49:36 - general channel

**Jorge**

And I'm using this [https://github.com/betcode-org/flumine/blob/47af44b2173cf9d6b32fd9daef22dae510adea3f/flumine/markets/middleware.py#L287|middleware](https://github.com/betcode-org/flumine/blob/47af44b2173cf9d6b32fd9daef22dae510adea3f/flumine/markets/middleware.py#L287|middleware)

---

## 2022-11-03 14:52:39 - general channel

**Jorge**

An example:

• At t0, the market available_to_back is 2.0 and my fair odds are 2.1, so no bet.

• At t1, the market has not changed, so we don't have a new MarketBook, but my fair odds are now 1.9, so here I would trigger a bet.

• At t2, the market available_to_back is 1.8 and my fair odds are 1.9, so no bet.

How can I simulate the bet at t1 with flumine?

---

## 2022-11-03 14:52:35 - general channel

**Jorge**

Getting back to my [https://betcode-org.slack.com/archives/C4HL6EZTQ/p1667395275679079|question](https://betcode-org.slack.com/archives/C4HL6EZTQ/p1667395275679079|question) from yesterday. I made it work but I am facing a problem using external data time series to trigger the bet...

---

## 2022-11-02 23:27:14 - random channel

**D C**

Gaps observed on BOTH instances but not over same time intervals. Its almost as if the RRC dropouts are on a per client IP address basis. I am at a complete loss to explain that as being a problem at my end.

---

## 2022-11-02 15:07:33 - random channel

**D C**

Struggling to see how it can be a problem my end to be honest even tough its the most likely source

---

## 2022-11-02 13:31:21 - general channel

**Jorge**

Actually, the [https://github.com/betcode-org/flumine/blob/47af44b2173cf9d6b32fd9daef22dae510adea3f/flumine/markets/middleware.py#L287|middleware](https://github.com/betcode-org/flumine/blob/47af44b2173cf9d6b32fd9daef22dae510adea3f/flumine/markets/middleware.py#L287|middleware) would work if I have a file with the marketId even if it is not coming from a cricketSubscription, right?

---

## 2022-11-02 13:17:03 - general channel

**liam**

Yep, example [https://github.com/betcode-org/flumine/blob/master/examples/simulate-sportsdata.py|here](https://github.com/betcode-org/flumine/blob/master/examples/simulate-sportsdata.py|here) that uses the cricket stream and the [https://github.com/betcode-org/flumine/blob/47af44b2173cf9d6b32fd9daef22dae510adea3f/flumine/markets/middleware.py#L287|middleware](https://github.com/betcode-org/flumine/blob/47af44b2173cf9d6b32fd9daef22dae510adea3f/flumine/markets/middleware.py#L287|middleware) that does the heavy lifting

---

## 2022-11-02 11:49:09 - general channel

**liam**

[https://github.com/betcode-org/betfair/blob/71c8fe2acdd20c9d65663e5a5af7692267489e81/betfairlightweight/streaming/cache.py#L74|both](https://github.com/betcode-org/betfair/blob/71c8fe2acdd20c9d65663e5a5af7692267489e81/betfairlightweight/streaming/cache.py#L74|both) i think

---

## 2022-11-01 13:23:53 - random channel

**Newbie99**

[https://gist.github.com/zspine/d7303dd194ff09a9a487](https://gist.github.com/zspine/d7303dd194ff09a9a487)



In case it helps anyone else

---

## 2022-11-01 13:23:47 - random channel

**Newbie99**

Actually I think I've answered my own question, just search for ISO2 by nationality! :man-facepalming:

---

## 2022-11-01 06:36:11 - issues channel

**Mo**

What do you get if you run the following Python code?



```import ssl

print(ssl.HAS_TLSv1_1)

print(ssl.HAS_TLSv1_2)

print(ssl.HAS_TLSv1_3)

print(ssl.OPENSSL_VERSION)```

---

## 2022-10-31 20:46:45 - issues channel

**Mo**

Sorry I’m not a Mac user but I know others have had problems with this before 

---

## 2022-10-31 20:24:56 - issues channel

**Mo**

Probably a problem with your certificate. How did you generate it?

---

## 2022-10-31 11:59:11 - betconnect channel

**Beeblebrox**

Thanks Joel, I've only just started using BetConnect in the last couple of days and I've been placing bets manually to get a feel for it.



I'd like to set up API access and I've messaged Mauricio, but not sure if he's around at the moment as he's not logged into Slack.



Is there someone else who can help set me up?  Once I have that I think the api link you've shown should be good enough for what I want for now.

---

## 2022-10-31 06:02:33 - issues channel

**Liam Querido**

Is the MarketRecorder under Flumine the best way to stream? I have seen lots of different .py files and many different approaches to streaming - which way is most effective (is there a file on github that I should refer to. I want to stream market data by entering a market ID)?

---

## 2022-10-30 08:34:16 - general channel

**Newbie99**

Have a look at this example: [https://github.com/betcode-org/betfair/blob/master/examples/exampleone.py](https://github.com/betcode-org/betfair/blob/master/examples/exampleone.py)



I see runners correctly showing for that market, so I suspect the problem is an incorrect filter.

---

## 2022-10-26 20:20:49 - issues channel

**Beeblebrox**

Added an issue [https://github.com/betcode-org/flumine/issues/622#issue-1424580260](https://github.com/betcode-org/flumine/issues/622#issue-1424580260)

---

## 2022-10-26 15:04:56 - random channel

**Paul**

Exactly. There may be an advantage to having what we call “Chatham House rules” - what’s discussed stays with the attendees. Good questions and worth considering.

---

## 2022-10-26 13:04:35 - strategies channel

**jackofallspades**

This :arrow_up: may be outdated, but I believe that _Goal Lines_ is the answer to your question.

---

## 2022-10-26 12:56:37 - strategies channel

**Artiom Giz**

Hi!

Question about Stream API events.

After subscribing to Soccer's *over/under 2.5* market I see many events with *BDATB/L* changes only:

```[{"id":"1.204890122","rc":[{"bdatl":[[1,1.51,1789.52]],"id":47973},{"bdatb":[[1,2.98,384.49]],"id":47972}]}]

[{"id":"1.204890122","rc":[{"bdatl":[[2,1.52,559.99]],"id":47973},{"bdatb":[[2,2.96,620.81]],"id":47972}]}]```

(there are no ATB events in between)

I know that "*D*isplayed" means "including virtual prices" (some markets' prices can affectively be converted to other markets prices).



Does somebody know, what can be an equivalent to *over/under 2.5* market (that causes these events) or what is the source of them?

---

## 2022-10-25 20:08:41 - random channel

**river_shah**

I am sure this will be user specific but I use `numpy` / `numba` and this code dominates wall clock time relative to flumine / bflw and don't think 3.11 matters much

---

## 2022-10-25 19:38:16 - random channel

**mandelbot**

New python release with faster Cpython. Relevant to bflw?

---

## 2022-10-24 11:18:47 - betfair-news channel

**Neil T (Betfair)**

Hi [@U01665WFPD3](@U01665WFPD3) Ltp is only provided if there has been a change in the Ltp value.  This is mentioned in the Stream API documentation via [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API#ExchangeStreamAPI-MC/MarketChangeMessage](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API#ExchangeStreamAPI-MC/MarketChangeMessage)

---

## 2022-10-23 15:57:56 - general channel

**Mo**

You want to scrape the inplayservice endpoint [https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py](https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py)

---

## 2022-10-22 23:05:20 - general channel

**Ralegh**

(Flumine)

---

## 2022-10-22 09:42:26 - random channel

**Mo**

I don't know, you've gone past my Python packaging "expertise"

---

## 2022-10-21 17:41:40 - betfair-news channel

**Carl**

Hi all, Carl from Betfair here. I've been collating feedback to help with the business case for launching BSP in new sports. I'd be very keen to hear from you if we haven't already spoken to you about it. Please contact me on [mailto:carl.albon@betfair.com|carl.albon@betfair.com](mailto:carl.albon@betfair.com|carl.albon@betfair.com)

---

## 2022-10-21 11:31:41 - issues channel

**liam**

don't need to use flumine to use streaming, you will find it will dramatically simplify everything

---

## 2022-10-21 11:19:14 - issues channel

**liam**

Pretty standard to get these now and again tbh, are you making a separate request per market? / Why aren't you streaming?

---

## 2022-10-21 01:59:39 - betconnect channel

**Liam Querido**

I originally thought that Flumine was purely for backtesting, but by the sounds of it, it can be used to stream and save market data to csv?

---

## 2022-10-21 01:57:36 - betconnect channel

**Liam Querido**

Ah okay, I was wondering if it would be better to use Flumine rather than just betfairlightweight for streaming.



Do you know of any specific documentation that has what I'm looking for - using Flumine for streaming. After a brief search I see that there is plenty of documentation for Flumine.

---

## 2022-10-20 07:56:04 - betconnect channel

**liam**

I think you are misunderstanding the advantages of streaming, the [https://betcode-org.github.io/betfair/streaming/|docs](https://betcode-org.github.io/betfair/streaming/|docs) give a very good overview of why it exists.



So in your example you wouldn't stream each marketId but rather all the markets you require and then process/save what you require.



Although better practice would be to save the raw data via flumine or similar to then allow you to process at a later date when you need that extra field (this will happen)

---

## 2022-10-19 16:19:45 - general channel

**GaryK**

Yep [https://www.api-football.com/documentation-v3](https://www.api-football.com/documentation-v3)

---

## 2022-10-19 13:18:23 - issues channel

**D C**

You also don't have to waste time sending polling requests, packet sizes will be much smaller (apart from the initial images), no need to use compression on the responses (although that is not compulsory) sent back. You've also seen the small number of markets you can obtain per call on the listMarketBook operation. Also, there is no "dead" data - 2 calls on illiquid markets 1 second apart could often result in NO change in market prices or traded volume - but you'll still get 2 full market traded arrays and full price ladders both of which will be identical. Streaming you only get sent stuff when it changes - and its all passive.

---

## 2022-10-19 13:07:51 - betfair-news channel

**Neil T (Betfair)**

There's an outstanding question to be answered relating to this so have chased up

---

## 2022-10-19 12:40:04 - issues channel

**liam**

How come you aren't streaming? [https://github.com/betcode-org/betfair/blob/6b064a68c8d2afceda81b70d74b6a0ee9601f228/betfairlightweight/metadata.py#L44|lookup](https://github.com/betcode-org/betfair/blob/6b064a68c8d2afceda81b70d74b6a0ee9601f228/betfairlightweight/metadata.py#L44|lookup)

---

## 2022-10-19 11:38:53 - betfair-news channel

**Neil T (Betfair)**

To receive downtime notifications you need to subscribe to the Developer Forums Announcements section ([https://forum.developer.betfair.com/forum/developer-program/announcements](https://forum.developer.betfair.com/forum/developer-program/announcements)) and opt to receive e-mail notifications - [https://forum.developer.betfair.com/help?q=notifications&amp;btnSearch=&amp;titleandtext=1&amp;match=any](https://forum.developer.betfair.com/help?q=notifications&amp;btnSearch=&amp;titleandtext=1&amp;match=any)

---

## 2022-10-19 01:17:14 - issues channel

**Liam Querido**

Ahhh, you're a life saver. Yep, I was encoding the app key and that caused the problem. All working beautifully now. Thanks Liam!

---

## 2022-10-18 13:39:13 - issues channel

**Mo**

We're not dogmatic here but the vast majority of us use Python and specifically the betfairlightweight and flumine packages

---

## 2022-10-18 08:40:05 - random channel

**liam**

Probably more helpful for those starting out as it gives a very good high level overview of the stages/process

---

## 2022-10-18 07:42:29 - issues channel

**liam**

So this is something to do with your appKey or sessionToken, I know you can't share them but are you definitely giving the `betfairlightweight.APIClient` object a string for both?

---

## 2022-10-14 12:13:46 - general channel

**liam**

[https://github.com/betcode-org/betfair#historic-data|yep](https://github.com/betcode-org/betfair#historic-data|yep)

---

## 2022-10-13 13:55:48 - general channel

**btb**

want to show a US person who doesn't have access to a betfair account some basics of betfairlightweight

---

## 2022-10-13 13:08:41 - issues channel

**Aaron Smith**

i always pass in keyword arguments, so besides from triggering the OCD, it cant really be a problem

---

## 2022-10-12 16:57:37 - betfair-news channel

**Neil T (Betfair)**

Post your questions here directly to Betfair on any Betfair Exchange-related topic.



*Moderation &amp; Etiquette*

• Replies to a single question will be confined to a single thread and any follow-up question (on the same topic) should be posted in the same thread.

• DO NOT provide your Betfair username or email address in any correspondence.

• Any specific Betfair account-related queries should be directed to the usual Betfair Customer Services or Betfair Developer Support channels.

• Betfair will respond directly to the channel (*Wednesday – Friday 10-5pm BST*).

• The channel will be open until *1700* on *Friday 21st October*.

---

## 2022-10-12 16:56:31 - betfair-news channel

**Neil T (Betfair)**

Hi *[!here](!here)* - just giving everyone advanced notice of an *Ask Betfair Anything* session from *19-21st October* - see full details below, format the same as last time. Please feel free to post any questions in advance!  Thanks, Neil

---

## 2022-10-12 13:32:11 - general channel

**Mo**

Surely it can be solved with better session management. There's no need for "logging in n out all the time"

---

## 2022-10-12 13:15:45 - general channel

**liam**

you can get stale data by calling the private website endpoints with the site appKey but I would question what problem you are trying to solve here...

---

## 2022-10-11 22:49:33 - general channel

**btb**

hi everyone, a question



is it possible to call the api without setting up a *logged in* apiclient?



i.e. would like to obtain some market data without logging in n out all the time

---

## 2022-10-11 11:52:50 - general channel

**Mo**

Needs a "It's OK to do so if you fully understand the implications and have (significant) bankroll constraints. If you think you understand the implications you probably don't" option

---

## 2022-10-11 11:18:25 - issues channel

**Mick**

Ahhh, yes. I no no doubt have ridlist all wrong, it was just literally a list of the race IDs... But now I've run into a problem with my lack of python skills (I'm a C programmer). I can't understand the syntax of what "meetingid.raceTime (hhmm)" means in practice. I dare say I could thrash around and get it in the end but if you or anyone has an example that would be fantastic.... does that dot in the middle mean there's a class involved?

---

## 2022-10-11 10:56:11 - strategies channel

**thambie1**

Hard to eye-ball an answer to that question. I like running monte carlo simulations to get an intuition for how much data is needed. One way to run such a simulation would be to sample from your current bets, and assume an expected value based on your current ROI.

---

## 2022-10-11 07:55:34 - general channel

**liam**

It is common but its a trap, unless you are trying to optimise your bankroll greening is simply giving profit away

---

## 2022-10-10 01:45:01 - general channel

**Pos**

[@UBS7QANF3](@UBS7QANF3) why is the website incorrect? noob question

---

## 2022-10-09 16:01:01 - random channel

**Unknown**

Many bookies will give you the value of your bet back in bonus cash if your horse runs 2nd or 3rd. This may give a horse a +EV. Eg bet $50, get $50 back in bonus bets if it runs 2nd or 3rd.



I need help on how to calculate EV. Would be great if someone can help me work through an example.

---

## 2022-10-09 16:00:45 - random channel

**Pos**

Many bookies will give you the value of your bet back in bonus cash if your horse runs 2nd or 3rd. This may give a horse a +EV. Eg bet $50, get $50 back in bonus bets if it runs 2nd or 3rd.



I need help on how to calculate EV. Would be great if someone can help me work through an example.

---

## 2022-10-09 01:30:01 - random channel

**Pos**

Hi guys, does anyone know how to calculate EV for run 2nd or 3rd promos in horse racing?

---

## 2022-10-08 20:22:32 - general channel

**Unknown**

Just discovered retool for creating web apps ([https://retool.com/](https://retool.com/)). As someone with no experience of web development it makes it really easy to create an app to get data from your database and display it on a web page.

---

## 2022-10-06 16:21:30 - betconnect channel

**Jeffrey Been**

thnx for all your help:) that was it

---

## 2022-10-05 22:22:19 - betconnect channel

**Jeffrey Been**

If you need any clarification please feel free to ask, I am happy to explain my problem.

---

## 2022-10-05 02:50:57 - issues channel

**RMG**

Apologies for never replying here. I did indeed. 

BDP asked me to send them my certs and details and they would check. In parallel I had also found a resource somewhere about issues with generating the certs. (Let me dig out the link). And I created a brand new set of certs. I submitted these news certa and details to BDP. I played around with the code and tried non BetfairLightweight and then it just started working again. Then tried Betfair light weight and it started working again. I'm not sure if it was me and the new certs or BDP. But its all fine now.

---

## 2022-10-04 17:30:16 - strategies channel

**ShaunW**

I'm not a flumine guy but always curious.... Does your trn limit control have an override, perhaps for cancelling. Seems a shame to leave things messy just to save 0.2p.

---

## 2022-10-04 15:48:12 - strategies channel

**Newbie99**

Doesn't Flumine automatically cap orders at 5k per hour (unless you override it)?

---

## 2022-10-02 09:55:36 - general channel

**Alessio**

GPUs are good for floating point streaming stuff. A lot of the work in Flumine is decompressing, reading files, and updating the internal state for your code to run. Don't think you will get much.

---

## 2022-10-02 09:11:11 - general channel

**Jonjonjon**

I sometimes wonder how hard it would be to refactor Flumine to run on a GPU. I often run the several backtests in parallel, just varying the parameters. So it should be possible, but I have a feeling it would be a lot of hard work.

---

## 2022-09-30 15:06:33 - betconnect channel

**Peter**

Your question appears to be predicated on the assumption that layers on the platform are match bettors rather than traders. Though there appears to be a strong (and actively encouraged) leaning in that direction, it's not wholly accurate.

---

## 2022-09-29 13:54:47 - strategies channel

**Aaron Smith**

Unless you are speaking of markets not being part of the same event, in which case you would have to merge the streaming files yourself (you can still check flumine code on how to do it)

---

## 2022-09-29 13:54:02 - strategies channel

**Aaron Smith**

flumine already has this functionality, check docs

---

## 2022-09-27 17:35:05 - random channel

**Mo**

There is no good solution to the problem you describe

---

## 2022-09-26 13:28:27 - issues channel

**Newbie99**

Market filter is big for football:



```        market_types=["OVER_UNDER_05", "OVER_UNDER_15", "OVER_UNDER_25", "OVER_UNDER_35", "OVER_UNDER_45", "CLEAN_SHEET", "MATCH_ODDS", "MATCH_ODDS_AND_BTTS", "BOTH_TEAMS_TO_SCORE", "HALF_TIME",

                      "HALF_TIME_SCORE", "FIRST_HALF_GOALS_05", "FIRST_HALF_GOALS_15", "FIRST_HALF_GOALS_25", "CORRECT_SCORE", "DOUBLE_CHANCE", "DRAW_NO_BET"]```

I'm recording on a NAS locally, so its not particularly powerful, 8GB RAM 4 cores.



I can absolutely cut that if the sheer scale is likely to be the problem, I don't need all those market types frankly!

---

## 2022-09-25 18:32:47 - random channel

**ShaunW**

[@UUE6E1LA1](@UUE6E1LA1) before I had a direct contact I'd just start the CS convo with "can you raise the following support issue for me"... and paste my carefully worded question. They were always glad to just pass it fwd and it usually got a response inside 24hrs on weekdays.

---

## 2022-09-25 17:20:30 - random channel

**D C**

Maybe CS will help me before I reach retirement age.

---

## 2022-09-25 17:20:10 - random channel

**D C**

It was literally the moment I pressed commit on the address change. I wonder if there is a problem with the address and a previous occupant.

---

## 2022-09-25 17:19:28 - random channel

**Mo**

Can’t remember if I’ve had that specific problem but definitely had accounts closed for a variety of reasons by the trigger happy compliance team

---

## 2022-09-24 21:01:38 - issues channel

**Mo**

I think you mean the problem was you assuming the files were JSON format when they’re not… :wink:

---

## 2022-09-24 20:24:31 - issues channel

**Newbie99**

(and for the avoidance of doubt, it was indeed the newline character causing the problem)

---

## 2022-09-24 20:24:07 - issues channel

**Newbie99**

Yes, but normally flumine automatically zips each completed market and its not doing that...only for football.



So whilst its easily solvable, it surely suggests there is some issue?

---

## 2022-09-24 20:10:16 - issues channel

**Peter**

Not really. Each line is a valid json string, but there are newlines at the end of each, which is why the document overall isn't valid json. It's not a problem.

---

## 2022-09-22 15:03:43 - betconnect channel

**Peter**

It's a pretty trivial change my end to drop that parameter. So I'll make the change. Because of the way my infrastructure works, it won't take effect until tomorrow. So if leaving that param out will cause a problem with your current codebase, please let me know ASAP. Thanks Sam.

---

## 2022-09-20 03:06:57 - general channel

**Tom**

In terms of using the testAPI on betfairlightweight - should my test order sent to market come back as ( status : FAILURE )? Or if it's coded correctly, should that be SUCCESS?

---

## 2022-09-19 18:07:26 - general channel

**Dario Scardina**

Hi [@UBS7QANF3](@UBS7QANF3) I have a question and a request  for you :smile:

---

## 2022-09-18 21:00:01 - random channel

**Newbie99**

Appreciate the help (again :slightly_smiling_face:

---

## 2022-09-18 18:04:58 - random channel

**Newbie99**

One more random question, lets say you are looking at 2 market types (E.g. WIN, PLACE) and lets say there are 500 markets on each, presumably you would just have 1 connection and not worry about it.



But if say there are 4000 markets in total, split evenly as 2000 for each (I know that's unrealistic for these two market types, but I'm just using those as an example), is there any benefit in splitting things out across multiple connections (E.g. WIN on connection 1 and PLACE on connection 2), or does it simply not matter (i.e. all that matters is what you actually do in terms of processing, how many markets per connection is not really relevant compared to the number of markets overall).

---

## 2022-09-18 16:02:10 - random channel

**Newbie99**

Yep, that's essentially what I did (hardcoded just to test) so will re-write properly with that in mind.



Once again thank you for your help on this, I think I've got a much better understanding now!

---

## 2022-09-18 11:13:06 - random channel

**Newbie99**

Cool thanks, that is in line with what I suspected, but wanted to make sure, appreciate the clear explanation that is a great help.

---

## 2022-09-17 21:10:07 - random channel

**Newbie99**

(sorry that may have come across as ungrateful, didn't mean it that way, appreciate all the help)!

---

## 2022-09-17 13:47:22 - random channel

**Newbie99**

So I believe if I'm understanding correctly, if I can pass a single parameter for each of the parameters it expects (apart from markets) then it should work.



But I can't work out how to do that.

---

## 2022-09-17 10:34:11 - random channel

**Jonjonjon**

Thanks for sharing. How many Flumine scripts do you run per instance? I think I am doing 4 or 5. I like the simplicity of having everything on one machine

---

## 2022-09-16 11:43:01 - random channel

**Zenith**

Thanks Mo, appreciate the help.

---

## 2022-09-15 09:58:02 - issues channel

**Aaron Smith**

mh okay. Good to know you dont get the problem from just those 2 functions i send. Thanks for checking :slightly_smiling_face:

---

## 2022-09-15 09:47:03 - issues channel

**Aaron Smith**

during process_market_book i now place order via:

```@staticmethod

def place_orders(orders: list[BaseOrder], market: Market):

    with market.transaction() as t:

         for order in orders:

             t.place_order(order)```

and cancel them via

```    def process_orders(self, market: Market, orders: list[BaseOrder]) -&gt; None:

        with market.transaction() as t:

            for order in orders:

                if order.status == OrderStatus.EXECUTABLE:

                    if order.order_type.ORDER_TYPE == flumine.order.order.OrderTypes.LIMIT:

                        t.cancel_order(order)```

---

## 2022-09-15 04:20:43 - general channel

**VT**

I use thefuzz library, it's simple to generate matches, totals and partials. As mentioned, using the date, and also the country, should help with correspondence.

---

## 2022-09-14 14:42:48 - general channel

**Mo**

To provide a bit more detail, I have an interactive mapping tool that shows me upcoming Betfair markets and third party events and then I hit some buttons to match things up. Then the new mappings get pushed to my database/Redis

---

## 2022-09-14 14:40:52 - general channel

**Mo**

My project [https://github.com/mberk/betfairmappings](https://github.com/mberk/betfairmappings) can help with this. There isn't currently a mapping from Betfair event ID to competition ID but I can add one

---

## 2022-09-14 14:38:42 - general channel

**Dario Scardina**

Although not explicitly said in documentation... but also listCompetitions does give anything back for a closed market...

---

## 2022-09-14 14:23:08 - general channel

**Dario Scardina**

I found answer in documentation:



`*Please note:* listMarketCatalogue does not return markets that are CLOSED.`

---

## 2022-09-14 12:57:27 - random channel

**Jorge**

ahahaha time to move to a database I guess

---

## 2022-09-14 10:15:04 - random channel

**ShaunW**

Sounds like trying to solve a design issue with brute force. I'd question the need for 600 files by the sniff test if nothing else. And/or I agree with [@U9JHLMZB4](@U9JHLMZB4), wanting to avoid a database doesn't trump needing one.

---

## 2022-09-14 10:00:43 - random channel

**Peter**

I get "I want to avoid using databases" but this really does sound like it's begging for a sqlite database.



Write to that instead of flat files and get sub millisecond reads when you need the data back.



(disclaimer, I'm a recent convert having recently used this approach to solve a processing bottleneck in one of my strategies).

---

## 2022-09-14 09:51:27 - random channel

**liam**

Going back to your original question, 'each of them contains a row of a DF'?

---

## 2022-09-14 09:42:10 - random channel

**Mo**

Maybe SQLite is sufficiently not-database for you

---

## 2022-09-14 09:42:03 - random channel

**Jorge**

What is your alternative [@U4H19D1D2](@U4H19D1D2)? Database as well?

---

## 2022-09-14 09:41:04 - random channel

**Jorge**

That makes sense [@UBS7QANF3](@UBS7QANF3), but I want to avoid using databases :smile:

---

## 2022-09-14 09:39:40 - random channel

**Mo**

Honestly I think you need to solve this by outputting the data differently in the first place. For example, stick it into rows in a database table

---

## 2022-09-14 09:38:47 - random channel

**CL**

Maybe just try pickle? I'm using feather (from pyarrow) for fast io with small data frames, but if you're python only I think pickle is pretty fast.

---

## 2022-09-13 21:18:30 - random channel

**Jonjonjon**

Shows that Flumine is fast enough despite being written in Python. :tea:

---

## 2022-09-13 11:47:29 - general channel

**Peter**

Is there a way to access the raw order stream updates in Flumine? Market books have the streaming_update attribute. Is there an equivalent or alternative for orders?

---

## 2022-09-12 15:47:45 - general channel

**Jimmy**

Code structure question — I’d like to collect data on several football markets (Match, 05, 15, 25, CS) but if I do it in one instance, I hit a subscription limit and if I do it individually, I eventually hit connection issues. Any top tips?

---

## 2022-09-12 12:28:46 - betfair-news channel

**Newbie99**

*with the caveat that competition_id is stored within the market_catalogue in flumine, so you can create your own filter for example when check_market_book() is called

---

## 2022-09-12 12:04:28 - betfair-news channel

**Mona**

Hi anyone knows how to filter football matches by league? like English Premier league etc, is there a field in the Betfair data that I can filter?

---

## 2022-09-12 08:57:34 - random channel

**liam**

That difference is your theoretical tick to trade creation, however like you have mentioned it is based on your clock being accurate and it has the potential to combine/hide network and CPU issues.



In an ideal world you would be monitoring:



• `MarketBook.publish_time` -&gt; `MarketBook.now`: time taken from betfair to your program (ie. mostly network)

• `MarketBook.now` -&gt; `Order.date_time_created`: time taken from MarketBook received to order created ie. time taken to process the book update (probably the one you are interested in if you have 200 strategies)

• `Order.date_time_created` -&gt; `Order.responses.date_time_placed`: time taken from Order creation to Order response received (network / thread pool exhaustion)

We have a [https://github.com/betcode-org/flumine/issues/338|task](https://github.com/betcode-org/flumine/issues/338|task) to try and improve this

---

## 2022-09-12 06:10:59 - betfair-news channel

**Mo**

I don't think you should be relying on Betfair selection IDs for this purpose. Your database should have your own internal team ID and you should maintain a mapping between your team ID and Betfair's selection ID(s)

---

## 2022-09-11 21:19:16 - betfair-news channel

**Brøndby IF**

Values were collected via betfairlightweight at:



runners[0].selection_id (both were home teams in yesterday's match)

---

## 2022-09-09 20:14:17 - general channel

**Peter**

Threading probably won't help you with this. It allows the CPU to continue processing while the IO is taking place. But in this case you need the file to complete downloading before you can process it.



If you have multiple CPUs however, multi-processing might give you some improvement allowing you to be processing on other CPUs while one process is downloading.

---

## 2022-09-09 06:58:04 - issues channel

**Mo**

OK so there's a problem to resolve around how you process the `tar` file but is that branch useful as far as generating a data frame which contains the LPT?

---

## 2022-09-08 13:33:55 - issues channel

**Dario Scardina**

*Solved*: from Betfair documentation

---

## 2022-09-08 09:59:05 - issues channel

**Dario Scardina**

[@UBS7QANF3](@UBS7QANF3) [@U01C12ZEADQ](@U01C12ZEADQ) Datetime is the nightmare of developers... I hope in your kindness looking for help :smile:

---

## 2022-09-08 09:45:41 - issues channel

**foxwood**

Because utc is used I got in a muddle even when the clocks changed in UK since couldn't match to other data. These two functions helped me and give an adjusted time of a utc date in venue terms (eg AUS) or in your PC's local time (depending on timezone PC is set to) ...

```def dateAsVenueTimezone(self, market, dt):

    # dates are in naive utc form - transform date into aware form for venue timezone

    tz = zoneinfo.ZoneInfo(market.market_book.market_definition.timezone)

    tzdt = dt + tz.utcoffset(dt)

    return dt.combine(tzdt.date(), tzdt.time(), tz)



def dateAsLocalTimezone(self, market, dt):

    # transform a naive utc date to the venue timezone and then to the local timezone

    return self.dateAsVenueTimezone(market,dt).astimezone(datetime.datetime.now().tzinfo)```



---

## 2022-09-08 08:43:22 - issues channel

**Mo**

All times in the API are UTC so timezones shouldn't be a problem

---

## 2022-09-08 08:40:24 - issues channel

**Dario Scardina**

Morning everyone. I still facing problems with timeranges. Probably I'm missing something.

In order to get approx. soccer second half time matches I wrote:



```market_filter = betfairlightweight.filters.market_filter(

    event_ids=[event.event.id for event in events],

    market_type_codes=TARGET_MARKET_TYPE,

    in_play_only=True,

    turn_in_play_enabled=True,

    market_start_time={

        'from': (datetime.datetime.utcnow() - datetime.timedelta(minutes=120)).strftime("%Y-%m-%dT%TZ"),

        'to': (datetime.datetime.utcnow() - datetime.timedelta(minutes=60)).strftime("%Y-%m-%dT%TZ")

    }

)```

For 95% of times it works fine: I get exactly matches that are currently in the second half. But sometimes I get matches that are just started (e.g. 5'-10').

I'm doing it wrong or I have to consider I don't know something like Time Zones in my code? Are matches aligned with different time zones in Betfair? I hope is a clear question :smile:



Thanks.

---

## 2022-09-07 21:11:53 - general channel

**Jimmy**

wow, that’s pretty straightforward then. thanks for putting up with the questions :+1:

---

## 2022-09-07 21:10:15 - general channel

**Jimmy**

are they just added to the same list with the different path and then flumine works it out?

---

## 2022-09-07 21:05:26 - general channel

**liam**

[https://betcode-org.github.io/flumine/quickstart/#event-processing|docs](https://betcode-org.github.io/flumine/quickstart/#event-processing|docs)

---

## 2022-09-07 20:28:08 - issues channel

**Unknown**

this is an example, when I use `betfairutil.read_prices_file` , the market_books objects returned are complete and have no problem at all.



however if I do the following using `bz2.open` and pass the `bz2` file object to `create_historical_generator_stream` function, there is only two `market_books`  returned.



```with tarfile.open(file) as archive:

     for file in archive:

         yield bz2.open(archive.extractfile(file))```

---

## 2022-09-07 19:48:45 - general channel

**Jimmy**

Hello. What's the most flumine-y way of checking across another market? Subscribed to market X and when something happens, check market Y for status/price/whatever. 



Couldn't see an example in the docs/search so thought I'd ask :)

---

## 2022-09-07 16:02:24 - issues channel

**Unknown**

Hello everyone,



I'm facing a little problem with get_account_statement method.



As you can see from the attached screenshot, I'm requesting a specific timedate interval, but anyway I'm receiving much more data. Am I doing something wrong? :D

---

## 2022-09-07 15:04:35 - general channel

**EJono**

qq Im just about to submit a rquest to have an account raised from the standard 200 market streaming limit to 1000 (or higher if possible). Is the correct way to move forward with this by contacting betfair through the developer support page, and submit a request at [https://support.developer.betfair.com/hc/en-us/requests/new](https://support.developer.betfair.com/hc/en-us/requests/new) for said increase? Thanks

---

## 2022-09-07 13:41:48 - issues channel

**Aaron Smith**

but can the code really be the problem here? i m sure there is a lot of room for improvement, but the same code has ran fine for months

---

## 2022-09-07 13:33:31 - issues channel

**Aaron Smith**

CPU usage is generally below 10%. For network i dont really know how to interpret the numbers

---

## 2022-09-07 12:29:03 - general channel

**Newbie99**

(its not quite what you're after, but it does help)

---

## 2022-09-07 12:28:42 - general channel

**Newbie99**

[https://betcode-org.github.io/flumine/quickstart/#listener-kwargs](https://betcode-org.github.io/flumine/quickstart/#listener-kwargs)

---

## 2022-09-07 12:13:55 - general channel

**liam**

Flumine does this with listener_kwargs 

---

## 2022-09-07 11:48:05 - general channel

**George**

Will do.

Is there a way in python to subsample a generator? That would also work. But I'm guessing not.

---

## 2022-09-07 11:42:18 - general channel

**George**

Not currently using lightweight mode I think. Would it help?

Just looking for standard book info like top price and size etc along with runner name and event name

---

## 2022-09-07 09:02:42 - issues channel

**liam**

god I hate replaceOrders, its this [https://github.com/betcode-org/flumine/blob/4a3767e5083b6e1eb3cea59d7fba5ef26faf28a0/flumine/execution/simulatedexecution.py#L125|line](https://github.com/betcode-org/flumine/blob/4a3767e5083b6e1eb3cea59d7fba5ef26faf28a0/flumine/execution/simulatedexecution.py#L125|line) due to a replace occurring during market suspension

---

## 2022-09-06 18:54:05 - issues channel

**Mo**

That could be a problem, I've only tested betfairutil on PRO data

---

## 2022-09-06 18:02:34 - issues channel

**Mona**

yea betfairlightweight was initially my first option, though there is 2 years of data that I wanted to read in one .tar file, which takes a long time...

---

## 2022-09-06 17:47:22 - issues channel

**Mo**

You might have better luck here if you start just by using betfairlightweight

---

## 2022-09-06 12:15:59 - general channel

**Newbie99**

There was an issue with the way datetime is patched for flumine backtesting, so you may have to import differently.



So instead of:



from datetime import datetime (etc.)



you need to do:



import datetime



then



datetime.datetime.utcnow()



(and the same for any other datetime references)

---

## 2022-09-06 11:44:40 - general channel

**Jimmy**

the backtest file is the one out of the project — and the code simply records the last suspension time and then checks it against the current time.



you can see the hacking going on here - I’d tidy this up once I’d resolved, honest :rolling_on_the_floor_laughing:



`suspend_time = stored_data["last_suspend_time"]`

`current_time = datetime.now()`

`diff = current_time - suspend_time`

`and then using: diff.total_seconds()`

---

## 2022-09-05 09:29:39 - issues channel

**sartux**

the problem is that I don't see a pagination in the method, should I go back to the last id and subtract 100?

---

## 2022-09-05 07:57:14 - general channel

**Mo**

I doubt it's only the single best. I would say it's either the top 3 because that is the default for listMarketBook/what is displayed on the website or the top 10 because that is the maximum for listMarketBook/streaming

---

## 2022-09-03 20:48:31 - general channel

**Mo**

Nope. Like I said it depends what you're trying to do. The concurrent package might help or it might not

---

## 2022-09-03 20:35:43 - general channel

**Jeff Waters**

Just a follow up question.



If I were to place the price_log dictionary in a standalone module, because it's a resource that's shared by all the processes, would the data rendered by all of the processes end up there?

---

## 2022-09-03 11:37:28 - random channel

**Unknown**

although the next question is how to interpret the results (I am assuming the issue likely lies within a worker, where I make some API calls, although oddly they are quite infrequent):

---

## 2022-09-03 11:20:29 - random channel

**Mo**

Another classic book and free although it's a bit more machine learning-y than statistics fundamentals: [https://hastie.su.domains/ElemStatLearn/printings/ESLII_print12_toc.pdf](https://hastie.su.domains/ElemStatLearn/printings/ESLII_print12_toc.pdf)

---

## 2022-09-03 10:32:06 - general channel

**mandelbot**

`from flumine import FlumineSimulation, clients`

---

## 2022-09-03 10:20:29 - general channel

**Jeff Waters**

Hi



I've copied my back testing code onto a second computer, and added the required libraries to the environment I created.



My code includes the following:



```from flumine import FlumineBacktest, clients```

Pycharm is complaining that it can't find reference FlumineBacktest in init.py.



Would I be best reverting to an earlier version of Flumine? Alternatively, can I change 'FlumineBacktest' to something else to get it to work?



Thanks



Jeff

---

## 2022-09-03 09:50:29 - strategies channel

**MA**

Morning, (perhaps a simple question )but anyone  aware of a Python API betfair code which browses tennis matches and sends a discord alert if player A has lost first set but has more breakpoints opportunities than Player B?

---

## 2022-09-01 12:12:45 - general channel

**LM**

In the tennis example on Flumine ([https://github.com/betcode-org/flumine/blob/master/examples/tennisexample.py](https://github.com/betcode-org/flumine/blob/master/examples/tennisexample.py)) I can see that it refernces a score from the market context. Does anyone know if this score data is available in the historical pro data files from betfair?

---

## 2022-08-31 22:08:36 - strategies channel

**VT**

[@U0128E7BEHW](@U0128E7BEHW) I didn't understand your question, most of the time for football (and I believe for other sports too) the first bookmaker to publish odds is bet365, then 1xbet (usually copying quotes). In some leagues bet365 has changed its policy and is no longer the first to open, but in general European bookies open first compared to the Asian market.

---

## 2022-08-31 20:04:44 - strategies channel

**Dave**

Question is, on which market does price discovery happen for pre off footie? Asian bookies?

---

## 2022-08-30 22:00:25 - issues channel

**Evaldas**

Yeaa, there is way to many ways to format strings in python... 

That line and few bellow in flumine doesn't work. Should be "{0}".format(smth) not "(%s)".format(smth)

---

## 2022-08-30 21:38:12 - issues channel

**Peter**

No. It's an older approach carried forward from python 2.  [https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting](https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting) and [https://docs.python.org/2/library/stdtypes.html#string-formatting-operations](https://docs.python.org/2/library/stdtypes.html#string-formatting-operations).

---

## 2022-08-30 20:17:14 - general channel

**liam**

Database -&gt; API -&gt; SPA 



This is the current go to on app development, no one understands tkinter 

---

## 2022-08-30 08:11:06 - general channel

**liam**

Sounds like you are trying to overcomplicate what should be an API backed by a database

---

## 2022-08-29 19:50:32 - general channel

**Newbie99**

That is a simple script I use to SSH in via the Paramiko Python library. I'm not 100% sure if that will help you, but its potentially one way to consider

---

## 2022-08-29 14:09:45 - betfair-news channel

**Mo**

There's no official Betfair Slack group. You're messaging a channel that is used intermittently when Betfair run Ask-Me-Anything style events which they're not currently. Betcode is the name of an organisation that evolved out of the developer and users of the betfairlightweight and flumine Python packages. The new name reflects that we're not exclusively focused on Betfair

---

## 2022-08-27 21:03:05 - general channel

**Johnny Boston**

Further to this discussion, could I skip a market being added from the add_market func?



Say I wanted to exclude a specific set of market ids? Instead of checking in the strategies I want to avoid it being added to flumine.



How would I do that?

---

## 2022-08-26 14:58:31 - general channel

**liam**

this work? [https://github.com/betcode-org/flumine/pull/608/files](https://github.com/betcode-org/flumine/pull/608/files)

---

## 2022-08-26 14:06:52 - random channel

**Unknown**

Just a question about Ubuntu please.

I have some stuff running on Ubuntu just fine and my intention was just leave it running (for months) if possible with little intervention on my part....

However, I just logged on to see this message and wondered how you others do it and what's best practice. Do you mainly ignore and update periodically?

I dont really want to be stopping and starting if poss. many thanks

---

## 2022-08-26 12:27:58 - general channel

**liam**

Helps alleviate depression whilst simulating 

---

## 2022-08-26 11:21:38 - issues channel

**liam**

logic [https://github.com/betcode-org/flumine/blob/e21cbebed9003cbc20ae46c8c756c4a0bd182076/flumine/streams/streams.py#L89|here](https://github.com/betcode-org/flumine/blob/e21cbebed9003cbc20ae46c8c756c4a0bd182076/flumine/streams/streams.py#L89|here)

---

## 2022-08-26 09:16:50 - issues channel

**liam**

As peter has mentioned that will use at least 2 connections, its worth noting that flumine will share 'streams' if two strategies are running on the same instance using the same market filter

---

## 2022-08-26 08:26:42 - issues channel

**Peter**

Each instance of Flumine will normally instantiate two connections: one for market books and the other for orders.



Closing Flumine will not normally close your connections immediately. I believe that what happens is that the connection is closed from the Betfair end when the buffer fills up and Betfair realises that you're no longer pulling data from it. But if there's not much going into the stream that can take some time.

---

## 2022-08-25 19:38:20 - general channel

**Aaron Smith**

havent used middleware before and trying to wrap my head around it - the way i understand it right now:

• flumine receivs its first market_book from a certain market

• BaseFlumine calls `_add_market` 

• for each middleware we added, `add_market`  is called.

so once on the initial market_book i receive, my middleware runs `add_market` , am i seeing this right?

---

## 2022-08-25 14:27:06 - issues channel

**Beeblebrox**

[https://docs.python.org/3/library/logging.handlers.html#logging.handlers.TimedRotatingFileHandler](https://docs.python.org/3/library/logging.handlers.html#logging.handlers.TimedRotatingFileHandler)

---

## 2022-08-25 14:22:20 - issues channel

**Jimmy**

hi all – logging is on and running but it would be helpful if a new log was created daily. i’m certain i’ve seen this discussed before but can’t find it via the search (apologies). can anyone point me in the right direction please?

---

## 2022-08-25 08:29:26 - strategies channel

**liam**

[@U016TGY3676](@U016TGY3676) doesn't [https://github.com/betcode-org/flumine/blob/e21cbebed9003cbc20ae46c8c756c4a0bd182076/flumine/markets/blotter.py#L185|get_exposures](https://github.com/betcode-org/flumine/blob/e21cbebed9003cbc20ae46c8c756c4a0bd182076/flumine/markets/blotter.py#L185|get_exposures) return what you want?

---

## 2022-08-24 20:32:39 - strategies channel

**Newbie99**

[@U016TGY3676](@U016TGY3676) once you get to a certain level then it makes sense that you don’t need to worry about the exposure as you can never get as much matched as your risk appetite. However for the majority of us, who aren’t at that level we have to balance value vs bankroll.

---

## 2022-08-22 13:24:21 - general channel

**liam**

Not sure I understand your question but assuming you are looking at the site I think you are just seeing them display the "PLACE" market as per the number of places (i.e. its still just 'PLACE' in marketType)

---

## 2022-08-22 13:19:50 - general channel

**Mr West**

Quick question; Horse Racing, did there used to be a separate place market. Is there now just 2 place, 3 place &amp; 4 place …?

---

## 2022-08-22 10:18:11 - general channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) Should we use that with Flumine?

---

## 2022-08-22 09:56:00 - general channel

**Jonjonjon**

Hi Liam, please could you take another look at my PR regarding the NR adjustments?



[https://github.com/betcode-org/flumine/pull/591|https://github.com/betcode-org/flumine/pull/591](https://github.com/betcode-org/flumine/pull/591|https://github.com/betcode-org/flumine/pull/591)

---

## 2022-08-22 08:58:57 - issues channel

**Mo**

Looks like a problem in your code. Can you share it?

---

## 2022-08-21 19:59:36 - general channel

**birchy**

Yeah, so each runner has a predetermined RF. If a runner is removed then it's RF is applied to all the OTHER runners in order to correct the book to ~100%. A new market is then formed with the remaining runners, so the RF is only applied to all bets that were matched on the "old" market. There is a market version number in the API response that will indicate that the market has changed. In Flumine it is `market_book.version`.

---

## 2022-08-21 13:30:00 - general channel

**Trex44**

Does flumine apply reduction factors automatically when running back tests?

---

## 2022-08-20 22:31:30 - random channel

**Dave**

The question is not regarding how to sync S3, but rather appropriate hardware for mass external storage

---

## 2022-08-18 08:26:06 - general channel

**Akwera Junior**

I have a project that I would like anyone to help me complete building.

---

## 2022-08-18 08:24:37 - betconnect channel

**Akwera Junior**

Hello, I have a project that I would like anyone to help me complete building.

---

## 2022-08-18 08:06:22 - betfair-news channel

**Akwera Junior**

I am looking for someone to help me with my project I am abit stuck and I need some assistance with react based website.

---

## 2022-08-17 23:30:41 - general channel

**river_shah**

That sounds like no sweat. I use an M1. There can be some hiccups for aarch64 support (especially if you are messing around with cython) but overall for python only development, you'll have no trouble.

---

## 2022-08-17 15:09:30 - general channel

**Peter**

Anybody else having problems accessing Betfair historic data? I've tried multiple routes without success, but their customer service seem to think that it's fine (or at least they haven't had reports of any problems - though I though that was what i was giving them :face_with_raised_eyebrow:).

---

## 2022-08-17 11:49:50 - random channel

**AndyL**

Ive gained hugely from the help here and the contacts made. Tips from [@UBS7QANF3](@UBS7QANF3) [@UGV299K6H](@UGV299K6H) [@U4H19D1D2](@U4H19D1D2) and [@UEA14GBRR](@UEA14GBRR) have all been key to becoming profitable, I'm currently +£6k for the year. But it's darn hard work! Im sure i spout utter rubbish half the time still, but at least it's not all the time like it was a year ago!!

---

## 2022-08-17 11:29:21 - random channel

**D C**

I think in general this group is pretty friendly - look at [@U01PJ5YMFBJ](@U01PJ5YMFBJ) - he asked loads and loads of questions and people were very helpful to him. For me, that aspect should determine how user friendly a community is.

---

## 2022-08-15 20:55:39 - strategies channel

**Ruben**

this is with flumine, my understanding is that by default there is no commission applied

---

## 2022-08-15 18:05:22 - random channel

**Mo**

Depends what the client wants help with

---

## 2022-08-15 15:55:45 - general channel

**Unknown**

Hi, When recording with Flumine, I also notice the small JSON files like in the image; are these of any use or can they be deleted? Thanks

---

## 2022-08-15 10:34:51 - general channel

**Guy Incognito**

Hi, I'm trying to get the match_date in Flumine when looking at previously matched bets, but it's returning an empty list to me even though runner.traded_volume does return a dictionary of values. I'm looking to get the match date for some of the trades, does anyone know how I can subscribe to this data?

---

## 2022-08-15 09:55:39 - general channel

**foxwood**

"should" be ok since simulation would be using zipped files and recording raw files. But ! - if you are continually scanning the directory for new files you might hit a sharing problem at the instant the recorder transforms the raw file to a zipped one depending on how file attributes/properties are being handled. One scan to find all zipped files and then backtest should be ok though imho.

---

## 2022-08-15 08:48:46 - general channel

**Andy Bason**

Hi guys, I've been trying things out with betfairlightweight for a while. I can get prices, place bets, etc but getting prices/lines for Asian Handicap markets has stumped me. I've been searching round for guidance and found [https://support.developer.betfair.com/hc/en-us/articles/360016170431-How-do-I-place-bets-on-handicap-markets-|this](https://support.developer.betfair.com/hc/en-us/articles/360016170431-How-do-I-place-bets-on-handicap-markets-|this) but I'm struggling to implement it with BFLW. Does anyone know of any examples or can someone point me in the right direction? Thanks

---

## 2022-08-13 18:33:30 - strategies channel

**Jonjonjon**

If you use separate Flumine processes you will use up lots of Betfair connections.

---

## 2022-08-13 10:11:10 - betfair-news channel

**Mo**

Because the vast majority of people here using the Python [https://github.com/betcode-org/betfair|betfairlightweight](https://github.com/betcode-org/betfair|betfairlightweight) package

---

## 2022-08-13 10:04:08 - betfair-news channel

**Mo**

Also doesn't look like the streaming API is implemented

---

## 2022-08-13 10:00:11 - betfair-news channel

**Pos**

Hi guys, I was looking at using the NPM package when connecting to the betfair api. However I noticed its fairly old. Do you recommend this? Thanks [https://www.npmjs.com/package/betfair-api-node](https://www.npmjs.com/package/betfair-api-node)

---

## 2022-08-13 09:50:24 - general channel

**Dennis**

Hi, sorry for the dumb question but how exactly do I log my orders using the LoggingControl class? I am calling the `_process_cleared_orders` function but how exactly do I access the data in the `event` object to write out to csv?

---

## 2022-08-12 09:12:29 - issues channel

**Mo**

If he's really a friend you wouldn't let him access the Betfair API using R

---

## 2022-08-12 07:51:12 - issues channel

**Johnny Boston**

Yes, I'm using flumine and this is what I'm doing. Still getting strange figures

---

## 2022-08-12 07:45:25 - issues channel

**birchy**

It says `not` inplay. I presume you are using Flumine? That example is over simplified but in essence, you have to save it preplay because it doesn't exist after.

Alternatively, if you're saving the updates to your CSV, the LTP you want is the last one _before_ inplay==True.

---

## 2022-08-11 18:31:55 - random channel

**D C**

I am not sure if it works to your requirements but I was certainly able to get available markets and things like that. Never got to the bet placement level stuff. If I was better with python I would have definitely used it as my start point

---

## 2022-08-11 18:26:29 - random channel

**D C**

I attempted a nodejs bot for Betdaq API with no luck. I came across this very project and it appeared to work (a few others here and I think the project author mentioned this was the case too) for market queries. I didn't persist as python is not one of my major skills and I had no joy getting nodejs SOAP packages to work with the Betdaq API. It was eating up lots of time trying and became very annoying so I basically gave up on betdaq until I come across a better SOAP package for nodejs then might have a look again. From what I remember several people said that this github project worked so if you are looking for a base probably be as well to start for that if python is your thing

---

## 2022-08-11 18:02:29 - random channel

**Mick**

Anyone here using the BETDAQ API? Is it easy enough to access via python? I came across this - &gt; [https://github.com/rozzac90/betdaq](https://github.com/rozzac90/betdaq) but it looks like it hasn't been touched for three years so either it's so rock solid it needs no alterations or it's so flaky that it's been abandoned!

---

## 2022-08-11 17:36:25 - general channel

**Mo**

I'll let someone else address your underlying problem but FYI:



```selection_id,runner_name

47972,Under 2.5 Goals

47973,Over 2.5 Goals

1221385,Under 1.5 Goals

1221386,Over 1.5 Goals

1222344,Under 3.5 Goals

1222345,Over 3.5 Goals

1222346,Over 4.5 Goals

1222347,Under 4.5 Goals

1485567,Under 5.5 Goals

1485568,Over 5.5 Goals

1485572,Under 7.5 Goals

1485573,Over 7.5 Goals

1485596,Under 9.5 Goals

1485597,Over 9.5 Goals

2407528,Under 8.5 Goals

2407529,Over 8.5 Goals

2542448,Under 6.5 Goals

2542449,Over 6.5 Goals

5851482,Under 0.5 Goals

5851483,Over 0.5 Goals```



---

## 2022-08-11 09:39:19 - strategies channel

**liam**

[https://github.com/betcode-org/flumine/blob/fd527626accbddd7782477f420855f57e928dae9/flumine/simulation/simulation.py#L182|yep](https://github.com/betcode-org/flumine/blob/fd527626accbddd7782477f420855f57e928dae9/flumine/simulation/simulation.py#L182|yep)

---

## 2022-08-11 09:38:34 - strategies channel

**George**

does the Flumine simulation replicate the inplay delay?

---

## 2022-08-10 14:37:42 - betfair-news channel

**Brøndby IF**

Yes [@U018QJ00C2G](@U018QJ00C2G), this information already helps me a lot because it's exactly the same thing that happened to me. Thanks!

---

## 2022-08-10 14:29:54 - betfair-news channel

**Douglas Hickling**

I was asked to change my password a least a few times over the course of 2 weeks when I (uk based) ran my system from Mexico. It went back to normal when I ran it back in the uk. Not sure if this is helpful, I didn't contact support 

---

## 2022-08-10 11:48:08 - strategies channel

**George**

Of course, but, now we are getting into the realms of making "changes" to Flumine which I'd rather not do. And it feels odd to subclass just to change one line...

Also, I expect that line is in there for a good reason, and by removing it without knowing why it's there, I'm going to cause unexpected knock-on effects.

Surely there is a better way to resolve this?

---

## 2022-08-10 11:44:20 - strategies channel

**George**

Sorry [@U4H19D1D2](@U4H19D1D2) but it still doesn't work. [https://github.com/betcode-org/flumine/blob/master/flumine/markets/middleware.py#L306](https://github.com/betcode-org/flumine/blob/master/flumine/markets/middleware.py#L306) says that if the market ID from the update (i.e. the TPD data) does not match the market ID from the market book (i.e. the BF Exchange Place market data) then the update should be ignored

---

## 2022-08-10 09:51:14 - issues channel

**Peter**

[@U03CZHR6HM0](@U03CZHR6HM0) Don't worry about asking questions. If it's confusing you, then it's probably confusing other people too.



I think that the root of your confusion is that you're conflating the amount traded (matched) with liability. But they're not the same thing. Although the backer's liability is always going to be the stake. The layer's liability will depend on the odds and will usually be greater (often substantially greater) than the stake. So the amount matched that Betfair reports is, in a simplified world with one backer and one layer, simply the stake the backer wanted and the layer agreed to take on.

---

## 2022-08-09 20:11:25 - issues channel

**Beginner**

[@U9JHLMZB4](@U9JHLMZB4) Thanks a lot for the explanation. So the total amount that is shown in the market is not the total amount traded, but only the total amount traded in Back.



Because the total value of the sum of the liability of Back and Lay would be 140.37 (104.75 + 35.62).



Am I correct?



(forgive me if I'm asking too many questions)

---

## 2022-08-09 17:46:48 - issues channel

**Unknown**

Hi [@U9JHLMZB4](@U9JHLMZB4) if possible, help me understand:



At odds 1.34 we have 104.75 traded volume



I understand that in this case the total liability used on Back would be $78.17 and on Lay $26.58



Is that not correct?

---

## 2022-08-09 09:16:50 - random channel

**Mo**

Yeah that's the one I've always used and found it pretty good so was a bit surprised by your comments but I guess you were looking at the Python package specific docs

---

## 2022-08-09 08:14:54 - general channel

**liam**

But to answer your question yes to the latter, run one simulation with multiple strategies as its the processing the data that takes a while

---

## 2022-08-08 17:04:43 - random channel

**Mo**

Have you looked at this documentation? [https://binance-docs.github.io/apidocs/spot/en/#introduction](https://binance-docs.github.io/apidocs/spot/en/#introduction)

---

## 2022-08-08 11:52:48 - general channel

**Alessio**

but what I meant is that they actually get scheduled on other cores, the real problem is GIL, no?

---

## 2022-08-08 11:40:11 - general channel

**Jonjonjon**

Not really. Python threads are different to threads in other languages and don't generally use more than one CPU core or process.

---

## 2022-08-08 11:21:24 - general channel

**Alessio**

Threads could be scheduled on other cores also in python, no?

---

## 2022-08-08 10:39:55 - general channel

**Peter**

Threading wouldn't help you much, if at all, in this situation as it's still a single CPU process - it just works around any IO that would leave that CPU inactive. So you did right to go multiprocessing.

---

## 2022-08-08 10:03:41 - issues channel

**liam**

although that is a symptom you are seeing, its not the problem

---

## 2022-08-08 10:00:16 - issues channel

**liam**

event processing basically creates an ordered list (by PT) of marketBook's we then cycle through them, if you wanted TPD data to work as well you would need to do the same and then cycle through as well, I foresee all sorts of problems when it comes to delayed races / updates before a race has finished etc.



it's certainly possible but not worth it imho, I personally simulate marketTypes separately

---

## 2022-08-08 08:51:05 - issues channel

**liam**

I get no issues with event_processing off I assume you don't either? Simulating this data is tricky and I have tried to abstract it as much as possible however if you look at the [https://github.com/betcode-org/flumine/blob/fd527626accbddd7782477f420855f57e928dae9/flumine/simulation/simulation.py#L50|code](https://github.com/betcode-org/flumine/blob/fd527626accbddd7782477f420855f57e928dae9/flumine/simulation/simulation.py#L50|code) you can see why event_processing isn't going to work.

---

## 2022-08-07 22:09:57 - random channel

**Joel Beasley**

Yes I'd say I know enough to help on this :slightly_smiling_face: 



Expanding on what foxwood said, there are various obvious red flags for IR35 in a contract like having a set amount of hours per week, a named individual, then various secondary factors like having someone who tells you what to do on a daily basis, an email address on the client side etc - it's all about factors that indicate you are operating like a permanent employee rather than a more arms length service provider :slightly_smiling_face: 



The terms of the contract decide this, there are contract review services like Qdos, insurance can be taken based on what they say.



However, we're probably missing the main point in that the recent legal change was that the emphasis now falls on the client rather than the provider to determine IR35 status - as if later found to be 'inside' after all then the client has to pay all the income tax and national insurance, it was the other way around for the previous 20 odd years that IR35 has existed, i.e. the service provider was the one at risk

---

## 2022-08-07 20:42:33 - general channel

**Peter**

Question for users of [@UBS7QANF3](@UBS7QANF3)’s betfairviz. Is there a way of getting runner names into the a dashboard when the file being examined is gzipped file generated by the marketrecorder. I have the corresponding market catalogue, but can't see a way to inject that data into betfairviz.

---

## 2022-08-07 17:28:54 - issues channel

**Peter**

Betfair works on 50ms cycles. So if you're streaming and something happened during the past 50ms, you'll get an update that contains the amounts matched from the market opening up to the latest cycle. So you can compare the changes in the amounts matched and the last price traded gives some clues as to which side of the spread the match may have occurred, but If two or more matches occurred in the last cycle, they'll be aggregated.

---

## 2022-08-07 17:14:35 - issues channel

**Beginner**

Guys, a question about API response if you can help because the link on the documentation page is broken:

Let's assume that the market opened now and two different people put money on the Back at odds 2.00



Person 1: 100 dollars

Person 2: 200 dollars



And someone comes to the market and buys in Lay these values.



Is there any API response that we were able to get the information from these specific matches instead of getting the total value matched from the market?



Example:



A response that shows the information that $100 was matched and $200 was matched, but separate and in the sequence in which they were matched.



I'm trying to generate a real-time chart with the chronology of values matched in the market.



On the `listRunnerBook` page ([https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listRunnerBook](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listRunnerBook)) I even tried to analyze the `matchProjection` to understand, but the link is broken, when I click it takes me to a non-existent page.

---

## 2022-08-07 07:25:17 - general channel

**Mo**

It sounds like you are only using 1 core so it doesn't matter how many vCPUs your instance has. You need to be using some form of multiprocessing. Ideally in conjunction with flumine

---

## 2022-08-07 06:40:19 - general channel

**liam**

Or just use flumine :wink:

---

## 2022-08-06 15:32:48 - issues channel

**George**

I can upload the two Exchange market data files and the two TPD data files if it helps

---

## 2022-08-06 07:43:16 - issues channel

**liam**

Never seen this, particular Python/os specific issue?

---

## 2022-08-05 22:45:32 - general channel

**thambie1**

That's the one place I use python. I use jupyter-lab, sqlite, and matplotlib

---

## 2022-08-05 22:19:00 - betfair-news channel

**moseley82**

Hi guys quick question, is it possible to stream BSP data for football the same way it is with horses?

---

## 2022-08-05 21:40:41 - general channel

**Jonjonjon**

Following on from [@UBS7QANF3](@UBS7QANF3)’s question, does anyone use any Python libraries for generating reports from their backtest results?

---

## 2022-08-03 14:34:37 - betfair-news channel

**Enodeg Enodoff**

I want to use this library : Making API Calls On The Users Behalf



(documentation : [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Vendor+Services+API#VendorServicesAPI-vendorwebapiVendorWebAPI](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Vendor+Services+API#VendorServicesAPI-vendorwebapiVendorWebAPI) )

---

## 2022-08-03 11:12:18 - strategies channel

**Johnny Boston**

yeah that is what I ended up doing, thanks for helping out

---

## 2022-08-03 07:19:39 - strategies channel

**Mo**

You'll have to find an appropriate streaming filter and then filter by competition ID locally

---

## 2022-08-03 05:37:19 - strategies channel

**Mo**

You can't filter by competition ID in streaming so you have attempted to subscribe to every market across all sports

---

## 2022-08-02 16:52:01 - random channel

**Mick**

Am I right in thinking that the betfair API employs UTC (Coordinated Universal Time) everywhere?

---

## 2022-08-02 00:08:48 - strategies channel

**Johnny Boston**

If I wanted to create a worker that appends some information to every markets context dict from `flumine.market` how often should I run that worker to ensure that all markets have been populated with this information ?

---

## 2022-08-01 10:18:47 - betfair-news channel

**Phil**

Hi [@U027P3N2WMQ](@U027P3N2WMQ) - Not something I can help with directly but I believe this is something customer services can assist with. You won't be able to have the limit removed entirely, but will likely need to provide evidence that a higher limit is within your financial means.

---

## 2022-08-01 09:41:33 - strategies channel

**Tom Cannon**

Hey Troy, It's hard to say which is best, SVM supports binary, multi-class and regression - so you should have no trouble implementing either. However, on a problem like this I would try all and then keep the most expressive (binary &lt; positions &lt; "true probabilities") which is still suitable for your use case (probably max profit ... )



You would want to use an SVM classifier for your True / False styles. SVM regressor for positions. Unless you're very familiar with SVM's I'd experiment with just the linear and default RBF kernels (depending on if you data is linear or non-linear).



It's also probably a good idea to have a "baseline" to know if SVM is sensible. Usually I would just use Scikit-learn's ridge regression for this. You'd be surprised how often ridge regression will give you better (or very similar) results to other, more complicated, methods. Also compare with out of the box XGBoost (a good, and easy to implement, decision tree - which will give you a good baseline for non-linear).



Good luck :)

---

## 2022-07-31 20:56:11 - betfair-news channel

**Mo**

Not sure who this question is directed at but Betfair don't monitor this channel unless they are running an AMA event 

---

## 2022-07-31 19:55:06 - issues channel

**Dave**

Thanks guys, yeah seemed resolved fairly quickly.

---

## 2022-07-31 15:04:15 - issues channel

**Alessio**

that may help you understand where things get stuck by dumping threads

---

## 2022-07-31 15:03:58 - issues channel

**Alessio**

Btw, i just discovered one cool thing of python i didn't know: faulthandler

---

## 2022-07-29 00:00:35 - issues channel

**Gooat**

No problem

---

## 2022-07-28 21:29:05 - issues channel

**Michael**

Thanks, didn't know you could use it with Flumine

---

## 2022-07-28 20:19:18 - issues channel

**PeterLe**

There was a thread on here explaining an easy way to do this, but you probably wont be able to do a search on it now...

A lot of us newbies have problems with this...

If i remember correctly I followed this [http://www.betfairprotrader.co.uk/2015/08/creating-digital-certificate-for-betfair.html|http://www.betfairprotrader.co.uk/2015/08/creating-digital-certificate-for-betfair.html](http://www.betfairprotrader.co.uk/2015/08/creating-digital-certificate-for-betfair.html|http://www.betfairprotrader.co.uk/2015/08/creating-digital-certificate-for-betfair.html)

---

## 2022-07-28 17:46:29 - random channel

**Newbie99**

SP_AVAILABLE is what you need if non-streaming

---

## 2022-07-28 17:17:57 - random channel

**Mo**

Oh I thought you were streaming

---

## 2022-07-28 15:54:58 - random channel

**Mick**

I am trying to read the nearprice but can't seem to find any example code that includes it so I'm a bit lost. Can anyone give me some clues or a code snippit?



I feel it might be related to this line below...

betfairlightweight.filters.price_projection(price_data=['EX_ALL_OFFERS'])

---

## 2022-07-27 21:03:19 - strategies channel

**birchy**

To answer my own question, I chose `order.notes` so that I can pick up my signal notes while looping the orders, which equates to one order per CSV row.

---

## 2022-07-27 13:46:10 - strategies channel

**birchy**

When using Flumine LoggingControl, I'm ok with building a dict from the orders for the CSV, but am wondering where is the best place to store associated order signals? We have order.notes and trade.notes but I'm unsure what the difference/preference is for storing a "signals" dict that I can unpack in LoggingControl?

---

## 2022-07-27 12:13:40 - issues channel

**Mo**

I guess I mean just run the Python script from the command line rather than an IDE

---

## 2022-07-27 12:12:48 - issues channel

**JFP**

Thanks [@UBS7QANF3](@UBS7QANF3). When you mentioned something less clunky than using a text editor, what would be a better way to launch scripts? Apologises if these are basic questions, am not a developer, I just learn what I need to get the job done

---

## 2022-07-27 12:08:14 - issues channel

**Mo**

The Python code _should_ be runnable without any changes - I think the barrier is just getting familiar with the OS

---

## 2022-07-27 10:22:18 - issues channel

**Newbie99**

They only exist on the Flumine side

---

## 2022-07-27 10:01:30 - issues channel

**mandelbot**

Hey, I looked back at this a while back and it seemed like hacking process.py to below seems to have solved it for me. The addition is a check on size_remaining Give it a try?

```    if order.bet_id and order.status == OrderStatus.PENDING:

        if order.size_remaining == 0:

            order.execution_complete()

        elif order.current_order.status == "EXECUTABLE":

            order.executable()

        elif order.current_order.status in ["EXECUTION_COMPLETE", "EXPIRED"]:

            order.execution_complete()

    elif order.status == OrderStatus.EXECUTABLE:

        if order.current_order.status in ["EXECUTION_COMPLETE", "EXPIRED"]:

            order.execution_complete()```

---

## 2022-07-27 09:22:30 - issues channel

**Newbie99**

No, as I can't figure out what specific conditions lead to this!



Somewhere, somehow it seems like Flumine misses a message and never recovers, but I can't prove that.



But the other confusing part is that it keeps retrying to cancel, but it always says retry_count = 0.



If this retry_count increased then presumably there is a way to limit retries and this could be a stop gap, but given the count remains at zero, not sure if this would work.

---

## 2022-07-27 09:20:18 - issues channel

**Alessio**

(a watchdog thread to mitigate the situation may also help though)

---

## 2022-07-27 08:54:24 - issues channel

**Newbie99**

Yes, in essence what happens is that in some situations, when Flumine sends a cancel request to Betfair and the order has already been completed on the exchange (e.g. most likely case is that it was matched a few milliseconds before the cancel request reached the exchange).



Flumine then correctly displays a BET_TAKEN_OR_LAPSED message, which makes sense and then for the most part thats the end of it....



But (seemingly randomly) every so often, it will get stuck in a perpetual loop where the status of the order never moves to EXECUTION_COMPLETE so flumine constantly tries to cancel an order that no longer exists.



The problem is, we've never been able to identify a sub-set of orders / scenarios where this occurs.



Initially I thought it could be when replacing an order, but I stopped using replace and it still happens...albeit its odd in the way it doesn't seem to happen for months, then just starts up again!

---

## 2022-07-27 07:41:25 - issues channel

**birchy**

So is it an issue with Flumine or the order stream from betfair not updating?

---

## 2022-07-27 00:26:41 - issues channel

**Newbie99**

It's a known issue: [https://github.com/betcode-org/flumine|https://github.com/betcode-org/flumine](https://github.com/betcode-org/flumine|https://github.com/betcode-org/flumine)



I was just hoping someone might have a workaround as I know a few others on here have experienced the same thing.



It's very odd how it comes and goes!

---

## 2022-07-26 07:31:49 - general channel

**Johnny Boston**

Hey - is there a way to find out the last traded price ( pre in play ) for a runner after the race without recording the entire race in Flumine?

---

## 2022-07-24 13:09:38 - random channel

**PeterLe**

Ah I see. OK in that case Ill keep it simple and use a separate account. Thanks for your help :+1:

---

## 2022-07-24 12:51:51 - random channel

**mandelbot**

You can add more sports to the marketrecorder by adjusting the filter. IE adding more `event_type_ids`/`country_codes` or `market_types`



```markets = betfairlightweight.filters.streaming_market_filter(

           event_type_ids=["7"],

           country_codes=["GB", "IE"],

           market_types=["WIN"]

)```

---

## 2022-07-24 07:53:00 - issues channel

**Fab**

[@U03CZHR6HM0](@U03CZHR6HM0) Check this example out for placing bets: [https://github.com/betcode-org/betfair/blob/master/examples/exampletwo.py#L25|https://github.com/betcode-org/betfair/blob/master/examples/exampletwo.py#L25](https://github.com/betcode-org/betfair/blob/master/examples/exampletwo.py#L25|https://github.com/betcode-org/betfair/blob/master/examples/exampletwo.py#L25)

---

## 2022-07-23 14:56:39 - issues channel

**Dave**

Worth checking if flumine clears the context on market closure (guessing not) and in that case clearing the context yourself?

---

## 2022-07-23 13:40:11 - random channel

**Peter**

I can see how this would be useful to market makers. If they're already paying enough commission to cover the transaction costs, then having large numbers of open (and implicitly diversified) positions across many markets would tie up capital, especially at longer odds and while markets are forming, with only moderate risks. So TCA would help them to spread their reach and, from Betfair's perspective, improve market liquidity. Betfair doesn't need to provide any capital, just allow the prices to be offered. So a bit of a win-win when working with the right customers.

---

## 2022-07-23 10:36:19 - random channel

**foxwood**

Didn't have any problems that I can remember. Was running daily updates during the licence period and also exploring the database using ssms. When I contacted them regarding a few odd issues in the database they gave a terse reply that direct access was not supported lol. Has your licence expired - that would stop their software working I expect ?

---

## 2022-07-22 08:12:29 - strategies channel

**Newbie99**

the real problem they need to solve is the issue of a taxable event on every transaction, if it was only on entry and exit to crypto that would make everything so much easier!!!

---

## 2022-07-21 18:00:04 - general channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) while on the subject of simulation, I recall someone posting on here months ago a full implementation in Rust (IIRC) and there was some discussion about pulling it into Betcode and/or Flumine as it was significantly faster? Did/is anything happening with that?

---

## 2022-07-21 16:45:29 - general channel

**liam**

No but only because I think it would probably create more problems, it's possible, not sure on its accuracy though 

---

## 2022-07-21 16:37:38 - general channel

**liam**

You want to look at `order.profit` this [https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|example](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py|example) looks like it does what you want :wink:

---

## 2022-07-21 15:57:30 - general channel

**EJono**

Question related to flumine. Im wanting to log market and if possible individual runner returns from "def process_closed_market(self, market, market_book):".

 Im currently looping through the market_book.runners and checking order.runner_status to determine if back or lay returns profits or losses, then finally summing the results. Im now looking at using the blotter to get runner exposures, but before progressing i thought i'd ask if there is something obvious i could be doing at this stage in this function. Something like market.profits or runner.profits

Thank you

---

## 2022-07-21 14:02:55 - strategies channel

**DeeJenn**

You don't have to report losses though (obviously one normally would so they can claim them)



I haven't found an answer to the question of whether you have to report a gain of 0. I would hazard a guess as to what most people do in that situation

---

## 2022-07-21 13:56:00 - strategies channel

**Newbie99**

still the same problem

---

## 2022-07-21 13:52:19 - strategies channel

**Jonjonjon**

Yes. But...



Unless I go through the dex code, which would involve learning a new language, I wouldn't be able to trust the dex either.



When I did my recent transactions using electrum wallet (do you consider that proper crypto usage?) I trusted the software would not steal my coins.



Before I used Bflw or Flumine, I went through every line to make sure it wasn't sending me details off to Liam!

---

## 2022-07-21 13:49:33 - strategies channel

**Henry E**

I'd like to at least try to design our exchange in such a way that if people want to arb against betfair or another exchange, it is straightforward to do. Although the practical problems with this have been well noted above

---

## 2022-07-21 13:47:58 - strategies channel

**Henry E**

The two big problems with a new exchange seems to be liquidity and marketing. That's something that maybe could be solved with the right incentives :shrug:¯

---

## 2022-07-21 13:46:39 - strategies channel

**Unknown**

It definitely offers ways to change up how incentives work. Maybe if betfair was reskinned more like a regular bookies and people other than betfair had direct incentivizes to market it, then that might help popularize order book exchanges. Again, all just a big experiment, may or may not work

---

## 2022-07-21 12:36:19 - strategies channel

**Newbie99**

that is the problem

---

## 2022-07-21 12:35:53 - strategies channel

**Henry E**

it's not clear what you're trying to say and if the problem still exists if you take BTC out of the equation

---

## 2022-07-21 12:32:23 - strategies channel

**Newbie99**

It doesn't matter too much what the actual coin is, you still have the same problem

---

## 2022-07-21 12:25:52 - strategies channel

**liam**

Yeah I am anti crypto / blockchain / NFT / web3 as a whole however I don't really see the problem it is solving when it comes to gambling + many struggle with the idea of an exchange 

---

## 2022-07-21 11:52:15 - strategies channel

**Henry E**

Do many people do cross venue arbitrage with flumine / betcode or is it mostly focused on within Betfair market making?

---

## 2022-07-20 15:16:56 - general channel

**Peter**

full example [https://github.com/betcode-org/flumine/blob/master/examples/workers/terminate.py|here](https://github.com/betcode-org/flumine/blob/master/examples/workers/terminate.py|here)

---

## 2022-07-20 11:31:52 - general channel

**Fab**

Hello. Is it possible to stop the Flumine framework when it’s running, in a way that it gracefully closes all stream connections to Betfair?

---

## 2022-07-20 11:11:07 - general channel

**PeterLe**

Yep I understand that flumine wont fill/kill.

I think this code takes care of that doesnt it?:

```def process_orders(self, market, orders):

    for order in orders:

        if order.status == OrderStatus.EXECUTABLE:

            if order.elapsed_seconds and order.elapsed_seconds &gt; 0.2:

                market.cancel_order(order)```

Either way, that explanation makes sense now Liam. Thanks

---

## 2022-07-20 11:04:09 - general channel

**liam**

flumine will never 'kill' / 'cancel' a bet on your behalf

---

## 2022-07-20 08:40:45 - general channel

**liam**

:+1: np, keep the questions coming, I am sure they are helping others as well

---

## 2022-07-20 08:23:48 - general channel

**Rudeger Jamison**

cant say enough how awesome you guys are and really appreciate the help

---

## 2022-07-19 11:31:47 - strategies channel

**Rudeger Jamison**

Last silly question, I'm assuming all simulation profit is just net. We would have to work out a crude % to factor in commission?

---

## 2022-07-19 11:22:31 - random channel

**liam**

if you have a read of this [https://github.com/betcode-org/flumine/blob/802e71bde5753da806384fde371b885a4ce8853e/flumine/worker.py#L227|code](https://github.com/betcode-org/flumine/blob/802e71bde5753da806384fde371b885a4ce8853e/flumine/worker.py#L227|code) you can see when it gets called, tbh without testing I am not sure if you get a result on cleared orders with no 'matched' orders

---

## 2022-07-19 08:44:24 - strategies channel

**liam**

[https://betcode-org.github.io/flumine/quickstart/#market-filter](https://betcode-org.github.io/flumine/quickstart/#market-filter)

---

## 2022-07-19 08:36:52 - strategies channel

**Rudeger Jamison**

Thanks for your help

---

## 2022-07-18 16:51:15 - random channel

**PeterLe**

Ive used it to pull down flumine/Betfairlightweight but no not using it as such (Scared of cocking something up!) Why?

---

## 2022-07-17 14:30:20 - random channel

**Mo**

Not sure how to get to this through the interface rather than manually constructing the URL with the relevant commit hashes

---

## 2022-07-17 13:07:32 - general channel

**Dave**

This reminds me, I wonder how much of a boost BFLW would get if it used SortedKeyList from [https://grantjenks.com/docs/sortedcontainers/sortedlist.html](https://grantjenks.com/docs/sortedcontainers/sortedlist.html) rather than a raw list of dicts in the Available class, which currently involves re-sorting when a new level enters the book.

---

## 2022-07-17 12:35:32 - general channel

**birchy**

Now I need to check my boilerplate functions to make sure I'm not accidentally changing anything in Flumine. :grinning: 

FFR this also works as expected:

`atbs = [d.copy() for d in runner.ex.available_to_back]`

---

## 2022-07-17 12:04:21 - general channel

**Dave**

your guess is correct - just check the src

• .copy() does a slice under the hood: [https://github.com/python/cpython/blob/main/Objects/listobject.c#L840](https://github.com/python/cpython/blob/main/Objects/listobject.c#L840)

• slice operator doesn't make copies of the objects when creating the new list ([https://github.com/python/cpython/blob/main/Objects/listobject.c#L481](https://github.com/python/cpython/blob/main/Objects/listobject.c#L481))

generally it is the reason why shallow/deepcopy principle exists (i.e. shallow copying tends to be very common)

---

## 2022-07-17 10:55:13 - random channel

**PeterLe**

Ive had bigger instances in the past, but at the moment I have a windows 2gb 1cpu and a ubuntu 2gb 1cpu Just learning linux)

Even on he windows version, Python hardly impacts the CPU utilisation

---

## 2022-07-16 20:40:48 - issues channel

**Rudeger Jamison**

I have  and that resulted in files 30X the size, so that's what lead me down this path. Perhaps I try out [@U016TGY3676](@U016TGY3676)'s suggestion and write to local and then have a worker upload batch every 30 minutes. Feels problematic too though...

---

## 2022-07-16 17:24:08 - random channel

**birchy**

There's no maintenance required. I have Flumine strategies that have been running for 6+ months unattended.

---

## 2022-07-16 17:15:30 - random channel

**PeterLe**

Afternoon all, hope its warm enough for you :hot_face:

When running strategies/flumine in the cloud for weeks at a time unattended (thinking of being on holiday etc)

Are there any maintenance tasks that need to be carried out periodically eg clearing cache files; log files etc or has Liam made us lazy and factored that in. Thanks

---

## 2022-07-16 14:50:54 - random channel

**AP**

Yeah I found that too, but when I query directly on the database using SQL it seems fine and much faster than using the software

---

## 2022-07-15 17:38:21 - strategies channel

**Tom Cannon**

Interesting, I'll give it a try with one bet per race and one per runner and see if makes any difference.



I'm somewhat weary of my own EV calculations, but I'm confident that I'm being matched better than BSP.  So would have expected simulation to still be +ve.



I'll double check everything for mistakes, before I use any more of your guys time.



Thank you, really helpful to get your thoughts.

---

## 2022-07-15 17:30:18 - strategies channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) can comment about how good flumine is at preventing double matching of liquidity when simulating but I would start by limiting it to one bet per race and then comparing again

---

## 2022-07-15 17:10:07 - strategies channel

**Aaron Smith**

[@U01EQMX079B](@U01EQMX079B) I assume the expected return is also based on the flumine simulation?

[@UBS7QANF3](@UBS7QANF3) why 1. ? Only reason i see rn (ignoring commission) would be the effect you yourself have on bsp, which at smaller stakes, which i would assume Tom is, shouldnt have much of an effect?

---

## 2022-07-15 17:07:07 - strategies channel

**Mo**

1. I'd expect it to be quite likely for most strategies to underperform expected returns in any given month

2. You can very easily do a simulation study or use the central limit theorem to work out the probability of observing the flumine simulated return if BSP is correct

3. You're assuming the BSP overround is 0 which I'd guess is not quite correct although should probably only make a minor difference to the calculations

---

## 2022-07-15 13:07:15 - issues channel

**mon mon**

Benn running for around 24hrs with no issues - thanks for you help [@U4H19D1D2](@U4H19D1D2)

---

## 2022-07-14 18:08:09 - issues channel

**Mo**

No worries, always helpful having more users of betfairutil

---

## 2022-07-14 18:06:57 - issues channel

**Mick**

Thanks for your help btw

---

## 2022-07-14 17:38:07 - issues channel

**Mo**

Documentation definitely needs some work. The closest things are the README and this GitHub comment: [https://github.com/mberk/betfairutil/issues/17#issuecomment-1055107228](https://github.com/mberk/betfairutil/issues/17#issuecomment-1055107228)



If you share the file I'll take a look

---

## 2022-07-14 16:50:51 - general channel

**George**

I've noticed that the flumine simulator doesn't work if you try to feed in a zipped market file. This appears to be because the function `get_file_md` , in flumine.utils, contains an `open` function.

Is this deliberate?

---

## 2022-07-14 12:47:57 - random channel

**PeterLe**

Thanks Mo

1. :+1:

2. :+1:

3. Just curious why only the MSA? Maybe you keep minimum funds the he sub accounts?

1a. I need to check (Ive only used the basic examples and then modified them). Think Wright brothers aviation and thats where Im at with Python (Strings; wire and sellotape)

1b. Need to read up on this :grinning:



Thanks for the reply

---

## 2022-07-14 09:56:01 - random channel

**liam**

fairly sure that will be the problem, won't smart-open do the hard work, can you run the example as is without your code?

---

## 2022-07-14 09:37:44 - issues channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/HISTORY.rst#221-2022-07-14|flumine 2.2.1](https://github.com/betcode-org/flumine/blob/master/HISTORY.rst#221-2022-07-14|flumine 2.2.1) now released, let me know if you have any further issues

---

## 2022-07-14 09:14:53 - general channel

**Rudeger Jamison**

```            next_race_start = min([market.seconds_to_start for market in self.flumine.markets] or [900])```

---

## 2022-07-14 09:02:52 - general channel

**Rudeger Jamison**

I guess I could loop over the markets in `self.flumine.markets` to determine if I need to make the api call first?

---

## 2022-07-14 08:58:13 - general channel

**liam**

What is wrong with something like this:



```class MyStream(BaseStream):



    @retry(wait=RETRY_WAIT)

    def run(self) -&gt; None:

        while True:

            markets_to_poll = []

            for market in self.flumine.markets:

                if market.seconds_to_start &lt; 600:

                    markets_to_poll.append(market.market_id)

            

            # make API request with marketIds

            

            time.sleep(5)





framework.streams.add_custom_stream(

    MyStream(framework, custom=True)

)```

---

## 2022-07-14 06:55:37 - general channel

**Rudeger Jamison**

now thinking about it, calling bflw isnt a very nice solution after you run into api limit issues

---

## 2022-07-13 16:42:05 - random channel

**liam**

yeah, behind the scenes its just betfairlightweight so if you can code use betfairlightweight

---

## 2022-07-13 11:13:16 - general channel

**liam**

Anyone got an example market and corresponding scores data from the cricket stream? Required for an example in simulating in flumine :sunglasses:

---

## 2022-07-13 10:07:06 - random channel

**liam**

regarding pricing there was some discussion in the betfair-quants slack group that you 'might' find helpful

---

## 2022-07-13 07:26:01 - random channel

**liam**

Are you a flumine user? 

---

## 2022-07-12 18:43:28 - general channel

**WaftyCrancker**

Yeah I'm taking another look, going to see if I can figure it out with the help of Google and Udemy, so that recommended course may come in handy. Thank you.

---

## 2022-07-12 18:33:11 - general channel

**PeterLe**

Ah OK, Well if you have covered the basics then just have a go. There are some very helpful folk on here who will help when you get stuck as long as you have had a good go before asking. Good luck

---

## 2022-07-12 14:30:00 - general channel

**Mo**

This is what you need to run to record data: [https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py](https://github.com/betcode-org/flumine/blob/master/examples/marketrecorder.py)



However if it looks like Greek to you then you probably need to progress your Python learning before doing anything

---

## 2022-07-12 14:10:46 - general channel

**WaftyCrancker**

Hi, I am currently learning python etc. Ideally I would like to start collecting data as soon as I am able, as obviously you need a fare amount so it would be good if I can collect data whilst continuing to learn so it's available when I'm ready. I've looked at Github but unfortunately it means very little to me. Could someone point me in the right direction please? I see a lot of files and folder but I'm unsure what to do with them or even what to look into to start using them! Thank you.

---

## 2022-07-11 20:08:07 - general channel

**Fab**

Thanks Liam. One more question: would the above code risk running into trouble with Betfair about subscribing to too many markets?

---

## 2022-07-11 15:38:07 - issues channel

**Gib**

makes perfect sense, thank you again.... im streaming!

---

## 2022-07-11 15:35:38 - issues channel

**liam**

hence my question

---

## 2022-07-11 15:29:22 - issues channel

**Gib**

[https://github.com/betcode-org/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/betcode-org/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2022-07-11 10:59:57 - general channel

**liam**

code [https://github.com/betcode-org/flumine/blob/b33d82b75175106b2de0d0c4f9851599b085e389/flumine/streams/orderstream.py#L65|here](https://github.com/betcode-org/flumine/blob/b33d82b75175106b2de0d0c4f9851599b085e389/flumine/streams/orderstream.py#L65|here)

---

## 2022-07-09 12:39:05 - general channel

**D**

S3 is very cheap and as Mo says, you don't have to worry about hard drive failure. I also like that if I store csv/parquet/json files on S3 I can query them directly with SQL using Athena - no need to copy locally or into a database.

---

## 2022-07-08 17:26:12 - general channel

**Mo**

With `smart_open` package in Python you can read directly from an S3 URL

---

## 2022-07-08 15:59:32 - random channel

**Fab**

But if you have any tips (or actual code) on how to scrape effectively, I'd gladly take a look :wink:

---

## 2022-07-08 07:00:53 - issues channel

**liam**

Flumine version?

---

## 2022-07-07 10:25:38 - betconnect channel

**Mauricio Garcia**

No problem, happy to keep the thread here in case it can help future API bettors

---

## 2022-07-07 00:09:19 - strategies channel

**nthypes**

*question:* runners prices are perfect correlated?

---

## 2022-07-06 17:16:17 - betconnect channel

**Sam - DH**

Don't think I can feel too silly, did my best :joy:

Will raise request via wrapper's git to add option to exclude param - if possible.

Cheers again for your help

---

## 2022-07-05 20:43:08 - betconnect channel

**Sam - DH**

Hi Mauricio, could I possibly also join this chat please? Have quite a lengthy, BetConnect API specific issue - not sure it belongs in/should be cluttering this channel, nor the BF Lightweight/Flumine issues channel. Alternatively if you could direct me to the most appropriate channel, would be most grateful! Cheers



Edit: I whacked it in here anyway, excitement got the better of me, feel free to re-locate me/my thread if needs be

---

## 2022-07-05 15:33:03 - general channel

**Jonjonjon**

They just use different parameters. I use it to help work out what is working and what isn't.

---

## 2022-07-05 15:04:46 - general channel

**PeterLe**

Thanks [@U010GM77S4W](@U010GM77S4W) still learning Python but will do in the future :+1:

---

## 2022-07-05 15:01:16 - general channel

**Aaron Smith**

[@UPMUFSGCR](@UPMUFSGCR) why make a new flumine-instance for each instead of chunking all those who use the same strat subclass in one instance?

---

## 2022-07-05 14:30:34 - general channel

**Jonjonjon**

I run over 150 Flumine instances on 2 cores, split across 5 Python scripts. It's OK. Uses 20% to 70% CPU most of the time

---

## 2022-07-05 14:09:10 - general channel

**PeterLe**

How many instances of Flumine could you run on a micro instance? Thanks Liam

---

## 2022-07-05 14:07:56 - general channel

**Unknown**

Afternoon, Vey basic question inbound :grinning:.

I usually start/restart my stuff each..Does Flumine automatically add new markets as and when the become avail (or do you have to specify t somewhere)?

The reason i ask; is it realistic to spin up a micro instance and run Flumin for weeks and months at a time?

It would be useful for times when you dont have internet access for days at a time (ie Cruises etc)

Thanks

---

## 2022-07-05 12:21:04 - general channel

**Phil Anderson**

[@URMM9463X](@URMM9463X) Thanks. I've got something similar now and works fine. was just wondering if there was a way I could specify the particular race e.g. 14:45, without having to do "from" and "to". Not a big problem, just anted it a bit neater I guess.



Actually stuck on runner_name now. Trying to find a way to search for specific horse (e.g. using filter) without having to cycle through all runners.

---

## 2022-07-04 10:26:51 - general channel

**Mo**

Just to be a bit less mysterious about it, [@U03MQ71U2AG](@U03MQ71U2AG) has recruited me for roles before and I've used him to recruit members for my team. He knows pretty much everyone in the industry and can help not just with recruitment but introductions to data providers, facilitating joint ventures, etc. etc. It's fair to say he's played a significant role in the success of my career

---

## 2022-07-03 15:25:21 - issues channel

**Mo**

Yeah it's helpful but not the complete solution. It tells you all of the properties and methods on an object but you still need to access them to get the values 

---

## 2022-07-03 15:20:15 - issues channel

**Mo**

Python built in function dir() also helpful

---

## 2022-07-02 21:17:29 - strategies channel

**Dave**

To football traders: if you don't mind disclosing, what is the ratio of your volume last weekend to the biggest-weekend-volume you have experienced so far this year? My volume is at this years' low currently but it kinda feels too low in a way, hence the question (i.e. expected to be low given the number of games, but feels too low still)

---

## 2022-07-01 23:10:24 - random channel

**John**

Thanks. I am chasing Betfair help desk again. Hope they can clarify a bit.

---

## 2022-07-01 18:57:44 - random channel

**Unknown**

Hi all, had a funny settlement for the BJ exit dates market as in the screenshot. I thought the settlement mistake is pretty obvious in the calculation of market subtotal in the screenshot here. how come £ -30.49 + 48.00 = -57? Think my P&amp;L should be +£17.51 (before commission), right? The betfair twitter help investigated and told me that "Hi there apologies for the wait. Traders have reviewed this and have confirmed that they are happy with the settlement of this market. Apologies for any inconvenience this may have caused you." Do I miss anything ... ? Thanks

---

## 2022-07-01 16:21:50 - strategies channel

**Alessio**

Now the question is: edge against which baseline? Because an edge means you are better at predicting something, but you need a baseline to compute against. You need to identify horses in which the wisdom of the crowd is odd X but you spit out odd Y, and you are right, to say you have an edge

---

## 2022-06-30 11:56:35 - strategies channel

**nthypes**

The problem with the first approach it is that the probability sum is always more than 1, which seems inaccurate to me.

---

## 2022-06-30 09:52:40 - general channel

**EJono**

Anyone using thesports data feed for football comfortable sharing how much they are billed for access to their services? and what specs of their plan is with regards to request allowance per hour/minute etc. [@U01C12ZEADQ](@U01C12ZEADQ) pointed me towards this as strong candidate for a robust score feed since bf inplay service is often unreliable. Pricing plans are not immediately available from their site or api documentation. Cheers!

---

## 2022-06-30 09:13:47 - general channel

**foxwood**

I took [@UBS7QANF3](@UBS7QANF3)'s post as a pretty solid indicator that it wasn't a scam post. Once upon a time in my youth I would have been interested in this lol. If they want hft then, for the critical bits, you need to come down to inline C, thus losing the class overhead, and maybe down to assembler where it really matters imho. I know hardware is so fast these days but the competition has the same kit and locations so your execution USP has to be software. Does help if you also make value selections !

---

## 2022-06-29 14:47:36 - issues channel

**Beeblebrox**

[https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/flumine/simulation/simulatedorder.py#L62](https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/flumine/simulation/simulatedorder.py#L62)

---

## 2022-06-29 10:30:24 - issues channel

**LM**

Do flumine backtests handle FILL_OR_KILL simulation?

---

## 2022-06-26 20:07:54 - general channel

**Ke**

A question about how to use Trade object. If i created a trade object in the process_market_book call to place an order. Is this trade object persistent and can be reused when process_market_book is called next time? If yes, am I supposed to reuse it as much as possible or I should create a new trade object to place new order for the same horse?

---

## 2022-06-26 12:30:07 - general channel

**Halil Erdoğan**

Thanks for clarification. My question was *can we get _runner name_ from _`market_book`*._ But I understand that is not possible. Will change my work-flow a bit to get that from _`market_catalogue`_.

---

## 2022-06-26 03:47:29 - general channel

**Barclay**

Hey, basic question but how do I get the results of a market after it has closed?

---

## 2022-06-25 16:55:53 - issues channel

**Beginner**

Hi everyone, good afternoon!

I created the SSL files and use them in full working order on my computer along with the betfairlightweight and flumine modules.



Now I want to put my code on Heroku to automate the daily runs task.



My question is: do I need to create new SSL certificates or can I use the same ones I currently use?



I preferred to ask before running the code on Heroku, I was afraid of generating a block on the betfair account.

---

## 2022-06-24 10:09:24 - random channel

**D C**

That is an interesting question [@UPMUFSGCR](@UPMUFSGCR) - I've always suspected this when looking at how my bets match but never heard anything about it nor any evidence to support it.

---

## 2022-06-23 16:56:07 - betconnect channel

**Mauricio Garcia**

No problem, please keep me posted :handshake:

---

## 2022-06-23 15:06:04 - random channel

**mandelbot**

Linux question; how do you clear your nohup log files that your scripts create?

`echo -n &gt;nohup.out` , `true &gt; nohup2.out`  and `cat /dev/null &gt; nohup2.out` for me are a bit wonky, ie the log file returns after a while at the same size with the added annoyance that it takes much longer to load when trying to access. Curiously this happens one log file but not the other

---

## 2022-06-23 14:50:12 - betconnect channel

**Unknown**

[!here](!here) back again with a Head to Head liquidity comparison ! :bc:



This time we've chosen an Each Way bet to show also how those perform in BetConnect vs. Betfair. As requested by some of you in the feedback, we are displaying the markets in both platforms for pure transparency.  Please keep the feedback coming and get in touch with us if you need more information or any API documentation for testing.



Best!



-The BetConnect Team :bc:

---

## 2022-06-22 14:52:26 - general channel

**EJono**

hmmm unfortunate there arent any numbers to go by, from personal experience is there any indication of best practices? I see in the flumine example for "poll_in_play_service" that individual requests are used for each event id in a loop as opposed to bulk requests with many ids. Is there any reason for this as i was under the impression minimising overall reqs was the safest method. Is it worth getting in contact with neil to clarify any of this information on my end?

---

## 2022-06-22 12:51:13 - strategies channel

**ShaunW**

I'll bow out [@U01A64T6DJQ](@U01A64T6DJQ) I've never used Brier so no idea how to use it, so 0.08 to 0.09 looks like a 12.5% difference to the uninitiated.

---

## 2022-06-21 21:49:56 - random channel

**Jonjonjon**

Is there a recommended upper limit on the number of strategies that people run per Flumine instance?

---

## 2022-06-20 19:15:39 - general channel

**mandelbot**

```from flumine.utils import get_price, get_size

get_price(runner.ex.available_to_back, 0)

get_size(runner.ex.available_to_back, 0)```

---

## 2022-06-20 13:43:26 - strategies channel

**LF**

Hope this helps [@U0155J92A7Q](@U0155J92A7Q)

---

## 2022-06-19 16:42:01 - general channel

**Unknown**

I also guess that is not _possible_ to create _trade volume/last price traded_ in different time-step without keeping datas from beginning. :thinking_face: For instance, i am not sure can we get that _line_ without subscribing streaming from the beginning of event.

---

## 2022-06-19 11:54:34 - general channel

**Halil Erdoğan**

Thanks [@UBS7QANF3](@UBS7QANF3) That is what I was looking for actually :pray: Apparently I was confused with some of changes but now everything is more clear :muscle:



Just one more question -- That _streaming update_ just send what happened recently right? So by just looking to that _update_, we can understand what has been changed in the _exchange_ :thinking_face:

---

## 2022-06-18 18:26:10 - general channel

**Mo**

I think you are confused. With streaming you only receive the deltas in each update. So when you access the streaming_update field you are only seeing those traded volumes which have just changed. If you want to see the full traded ladder then you need to iterate over update.runners and for each runner access runner.ex.traded_volume

---

## 2022-06-16 17:47:45 - issues channel

**Mo**

These certificate problems are always so frustrating

---

## 2022-06-16 17:43:39 - issues channel

**Jonjonjon**

If you have a small account it's easier to hard code the app key and login details into your python scripts.

---

## 2022-06-16 17:27:30 - issues channel

**Mo**

Connect timeout suggests it's just a local networking problem like something wrong at your ISP

---

## 2022-06-16 17:26:54 - issues channel

**Mo**

What version of Python?

---

## 2022-06-16 17:06:37 - issues channel

**D C**

Have you recently  upgraded OS? I had problems with the SSL configuration when moving from Ubuntu 18.04 to 22.04 and had to modify some settings.

---

## 2022-06-16 17:02:57 - issues channel

**RMG**

Final question, do, the .pem and .crt need to be created on the same machine as the that which the betfairlightweight codebase is run from?

---

## 2022-06-16 17:00:01 - issues channel

**RMG**

does the "interal name" in XCA have to match the Application name from the Betfair API-NG demonstration tool, where we App key is created?

---

## 2022-06-16 16:55:41 - issues channel

**RMG**

n00b here also, struggling to login with Betfairlightweight.

---

## 2022-06-16 06:12:37 - general channel

**liam**

however exposure calculations are best done in the [https://github.com/betcode-org/flumine/blob/b33d82b75175106b2de0d0c4f9851599b085e389/flumine/markets/blotter.py#L149|blotter](https://github.com/betcode-org/flumine/blob/b33d82b75175106b2de0d0c4f9851599b085e389/flumine/markets/blotter.py#L149|blotter)

---

## 2022-06-15 13:43:23 - strategies channel

**Mo**

I don't think it will be too much of a problem because of your $1 graph but it is an important consideration if you want a realistic backtest

---

## 2022-06-11 21:46:09 - issues channel

**Rudeger Jamison**

That code help?

---

## 2022-06-11 16:03:58 - random channel

**D C**

The TPD status page yesterday was showing Lone Star Park was active but I have not received any GPS from this track (via BF) for quite a while now. Anyone else getting this or is it a problem at my end?

---

## 2022-06-11 07:35:13 - general channel

**Peter**

Flumine works with Betfair streams. Those streams are available only in pounds. There will usually be some conversion from local currency happening, but it will be at Betfair, not within Flumine.

---

## 2022-06-11 02:25:11 - general channel

**LM**

Does flumine do any coversion of volume to local currency (or is it GBP)?

---

## 2022-06-10 11:51:08 - issues channel

**EJono**

Are pauses between streaming market books occasionally expected from time to time?

---

## 2022-06-09 15:41:20 - betfair-news channel

**Newbie99**

I think the way you're looking at it, you'll need to make 3 calls:



1. list_events() to get your desired events

2. list_market_catalogue() to get the required market details (including market_id) for your sub-set of events

3. list_market_books() to get the pricing info, for your subset of market_ids

You can of course write that into one function to make it easier and if you're going to be repeating the above frequently you can always switch to streaming to make life easier.

---

## 2022-06-08 20:48:04 - strategies channel

**nthypes**

Question: is expected to Booking/Overround of the VWAP prices be exactly 100%?

---

## 2022-06-08 17:20:33 - general channel

**nthypes**

they are matched during the flumine execution

---

## 2022-06-08 17:19:58 - general channel

**nthypes**

nope. they are matched bets executed from flumine

---

## 2022-06-08 08:24:06 - random channel

**liam**

[https://github.com/betcode-org/flumine/blob/master/flumine/worker.py](https://github.com/betcode-org/flumine/blob/master/flumine/worker.py)

---

## 2022-06-07 13:26:42 - random channel

**Newbie99**

A while back did someone post a multiproc code sample for Flumine backtesting? I can't seem to see it, but I didn't think it was that long ago so odd it didn't come up on the search (or did I just imagine it)?

---

## 2022-06-07 07:53:57 - random channel

**liam**

I think gbp is default / only option for streaming, have a look at the docs

---

## 2022-06-06 09:04:22 - general channel

**Unknown**

Any flumine users get super high CPU usage from the downtime yesterday?

---

## 2022-06-06 08:16:46 - issues channel

**moseley82**

Hey guys anybody know if anything has changed with horse racing data? None of my Place data is streaming properly this morning, I usually use this link to troubleshoot - [https://docs.developer.betfair.com/visualisers/api-ng-account-operations/](https://docs.developer.betfair.com/visualisers/api-ng-account-operations/) but it's taking me to a maintenance page (possibly related?)

---

## 2022-06-05 07:20:14 - random channel

**liam**

Uses streaming so yeah you are using it wrong

---

## 2022-06-04 18:16:55 - issues channel

**thambie1**

If you're looking for the streaming documentation, here's a copy: [https://github.com/betfair/stream-api-sample-code/blob/master/stream-api-specification.pdf](https://github.com/betfair/stream-api-sample-code/blob/master/stream-api-specification.pdf)

---

## 2022-06-04 17:58:34 - issues channel

**Brøndby IF**

Please does anyone have the offline PDF of the Betfair API documentation?



I'm trying to access the site but it says it's unavailable and the team is working to resolve it.

---

## 2022-06-02 07:36:07 - random channel

**Unknown**

raises an interesting question, but for the inplay boys that bet down to 1.01, how do you protect against horses getting disqualified for weird reasons? Is it just as simple as having a max market exposure and just taking your medicine?

---

## 2022-06-01 22:28:40 - issues channel

**Ke**

Did you solve the problem?

---

## 2022-05-31 17:59:20 - issues channel

**Rudeger Jamison**

Hey, Flumine seems to block LimitOrders less than $5 stake. My account actually allows these smaller bets...



Is there a setting I can change to allow Flumine to place these bets with out setting force=true?

---

## 2022-05-30 11:27:38 - general channel

**Unknown**

I've purchased some pro data, it looks like the market catalogue data is in there. How do I load the market catalogue into the middle wear,  it's in the same file as all the pricing streaming updates instead of a separate file?

---

## 2022-05-30 09:35:49 - general channel

**Rudeger Jamison**

What doesn't make sense that I can help clear up?



The long and short is that I want to be able to split P&amp;L by strategies and retrieve that from the polling api list_cleared_orders.

---

## 2022-05-28 10:19:14 - betfair-news channel

**Mo**

I'm happy to add any documentation if you can be more specific



Check the docstring for prices_file_to_data_frame if you haven't already 

---

## 2022-05-28 09:05:54 - betfair-news channel

**thambie1**

I had this problem with a different company. I took a screenshot of my Revolut card, they accepted that.

---

## 2022-05-27 23:53:59 - betfair-news channel

**Wilcox**

Thanks, It will be handy but the documentation is incomplete

---

## 2022-05-27 08:27:57 - betfair-news channel

**liam**

It's just betfairlightweight underneath 

---

## 2022-05-27 00:49:27 - issues channel

**Rudeger Jamison**

Actually upgrading to the latest version of Flumine seemingly did the trick

---

## 2022-05-26 07:59:37 - random channel

**thambie1**

Alternatively perhaps they intend to solve the problem for you, but not everyone. Hence return your stake, but don't change things for the person you matched against or anyone else.

---

## 2022-05-26 05:38:35 - issues channel

**liam**

If you revert/patch the change in `baseflumine._process_orders` it should change this, simulation calls hints slightly differently 

---

## 2022-05-26 05:30:25 - general channel

**liam**

Find the [https://github.com/betcode-org/flumine/pull/570|commit](https://github.com/betcode-org/flumine/pull/570|commit) and pull it, need to start tagging in release to make this easier 

---

## 2022-05-25 21:49:30 - general channel

**Jonjonjon**

What git command do I need in order to pull Flumine 1.22.2 (2022-03-24) ?

---

## 2022-05-25 11:20:28 - betfair-news channel

**Newbie99**

Firstly, welcome aboard!



For Python, your best bet is to start here:



[https://github.com/betcode-org/flumine/tree/master/examples](https://github.com/betcode-org/flumine/tree/master/examples)



If you're not planning to use streaming data then you can try BFLW without Flumine:



[https://github.com/betcode-org/betfair/tree/master/examples](https://github.com/betcode-org/betfair/tree/master/examples)



and then any questions, ask away (this thread is only monitored by Betfair on specific dates, so you may be better off posting in one of the other threads btw).

---

## 2022-05-25 11:17:13 - betfair-news channel

**Alvin**

hello everyone, I'm new here, I wanted to know what's the best sample code to use when making a bot in python,  I've seen there's the Betfair sample code and then betfairlightweight library and Betfair.py, which one is best?

---

## 2022-05-25 11:00:04 - issues channel

**liam**

If it’s still present then it will be something in [https://github.com/betcode-org/flumine/pull/585|2.1.0](https://github.com/betcode-org/flumine/pull/585|2.1.0) that is causing it 

---

## 2022-05-25 10:57:44 - issues channel

**liam**

I had the same issue so reverted it with [https://github.com/betcode-org/flumine/pull/588|this](https://github.com/betcode-org/flumine/pull/588|this) 

---

## 2022-05-25 09:41:53 - issues channel

**mandelbot**

Is it expected to get a log message this long? (just an abridged sample of one)

```  {"asctime": "2022-05-25 08:37:27,870", "levelname": "INFO", "message": "Market removed", "market_id": "1.199544108", "event_id": "31480130", "events": {"31481118": ["&lt;flumine.markets.market.Market object at 0x7f4b93bf72d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9a7b10&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f94b3d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a650&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a490&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a190&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a7d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a710&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a850&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a590&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a810&gt;"], "31481103": ["&lt;flumine.markets.market.Market object at 0x7f4b8f90aa10&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a790&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90aad0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90a9d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90aa90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90ab90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90ad50&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90ac90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90add0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90ab10&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90ad90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90af90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f90ad10&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922050&gt;"], "31481164": ["&lt;flumine.markets.market.Market object at 0x7f4b8f922090&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922110&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922150&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922210&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922250&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9222d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922490&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9223d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922510&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9221d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9224d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9226d0&gt;"], "31481038": ["&lt;flumine.markets.market.Market object at 0x7f4b8f922450&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922790&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922690&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922750&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9227d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9228d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922a90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f9229d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922b10&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922850&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922ad0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922cd0&gt;"], "31481066": ["&lt;flumine.markets.market.Market object at 0x7f4b8f922a50&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922d50&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922ed0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc0d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bcc90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bcf50&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8d40d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8d4190&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8d4210&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bcd10&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8ee410&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8ee4d0&gt;"], "31481108": ["&lt;flumine.markets.market.Market object at 0x7f4b8f922d90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc310&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc450&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc410&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc4d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc850&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc750&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc910&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc6d0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc390&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bcb10&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc9d0&gt;"], "31481135": ["&lt;flumine.markets.market.Market object at 0x7f4b8f922c90&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f922dd0&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc090&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc150&gt;", "&lt;flumine.markets.market.Market object at 0x7f4b8f8bc190&gt;", " + 30k more chars```

---

## 2022-05-25 08:46:44 - issues channel

**Oliver Varney**

[https://github.com/betcode-org/flumine/blob/54eaa8be28a50aeaff1d1fb37087a793e75368bb/flumine/order/process.py#L94](https://github.com/betcode-org/flumine/blob/54eaa8be28a50aeaff1d1fb37087a793e75368bb/flumine/order/process.py#L94)

---

## 2022-05-24 18:54:19 - random channel

**Mo**

I've never had problems _but_ I am conservative with the frequency I make requests and I do it all using Selenium (ChromeDriver)

---

## 2022-05-24 10:30:18 - issues channel

**Jonjonjon**

I'll take a look this evening. Thanks for helping.

---

## 2022-05-24 08:04:22 - issues channel

**Oliver Varney**

from the looks of the code check_market just wraps check_market_book with some aditional logic about streaming ids

---

## 2022-05-24 07:56:36 - issues channel

**Jonjonjon**

I just pulled the latest version of Flumine. Prior version was a few months old. When running backtests, the results are different to what they were under the older version.



I see 'check_market_book' has been replaced by 'check_market', but have not had a chance to update that in my code. Is there anything else obvious that I might have missed?

---

## 2022-05-24 05:26:12 - issues channel

**liam**

Yeah you aren't asking for EX_TRADED_VOL so you aren't getting it, have a look at the betfair docs on streaming  

---

## 2022-05-23 13:32:24 - random channel

**D C**

Any one have a problem with Somedayonedaynever in the first at Wolves? For some reason my bot didn't treat it as an NR ? Anyone know what time it was pulled?

---

## 2022-05-23 07:39:36 - issues channel

**mandelbot**

Okay i'll update flumine and give it a shot

---

## 2022-05-23 07:33:35 - issues channel

**liam**

Latest flumine version?  

---

## 2022-05-21 18:02:33 - issues channel

**Brøndby IF**

I believe so, I will try to find this time limit available and share when I find it, so far 1.5 months previous remains available.

The question is more out of curiosity in case need to look for future values and define whether I go directly to Historic Data or not.



Good weekend to everyone!

---

## 2022-05-20 19:47:24 - general channel

**Johnny**

Do you use Docker to help with this?

---

## 2022-05-20 19:29:33 - general channel

**Gooat**

Is there an ELIF of middleware v worker, in the Flumine context

---

## 2022-05-20 17:38:30 - general channel

**Dave**

use a Process from multiprocessing, assuming you're running on a multi-core machine you'll be able to run something in parallel without impacing flumine

---

## 2022-05-20 17:35:32 - general channel

**Gooat**

Ha feedback. 



Ok I have a function that sits on a socket and blocks until new. What a correct way to get that playing along with Flumine doing the other stuff

---

## 2022-05-20 17:23:42 - general channel

**Gooat**

Friday afternoon pub question...if you wanted "something" running alongside the streaming would you just create a worker that didn't die off...while X, keep working.

---

## 2022-05-20 16:45:01 - general channel

**liam**

that logic is in flumine and not bflw

---

## 2022-05-20 16:40:02 - general channel

**liam**

it can be a float, string, none and a list just to keep you on your [https://github.com/betcode-org/flumine/blob/b33d82b75175106b2de0d0c4f9851599b085e389/flumine/utils.py#L148|toes](https://github.com/betcode-org/flumine/blob/b33d82b75175106b2de0d0c4f9851599b085e389/flumine/utils.py#L148|toes)

---

## 2022-05-20 16:37:26 - general channel

**Aaron Smith**

in a runner_book, is runner_book.sp.actual_sp always a float or None? I saw in the direct streaming updates things like "Infinity" were also possible, would this just convert to None in a runner_book?

---

## 2022-05-18 14:52:12 - random channel

**D C**

If anyone here has betdaq automation, I would be very very grateful for a post of a raw xml dump (minus username of course) of the request packet for ListTopLevelEvents. I am trying to write a nodejs betdaq tool and am banging my head against a wall. A valid XML request will indicate if it is my brain or the package I am using that is the problem. Not had code rage like this since cross compiling for embedded stuff. Betdaq documentation is appalling.

---

## 2022-05-18 08:31:05 - issues channel

**river_shah**

[@U4H19D1D2](@U4H19D1D2) just bumping this issue please: [https://github.com/betcode-org/flumine/issues/572](https://github.com/betcode-org/flumine/issues/572) I would be curious to see the recommended approach to recording sports_data / event market streams and then simulating

---

## 2022-05-18 05:16:41 - general channel

**Unknown**

hey guys just reading through the flumine documentation looking at the simulation section, I was wandering what data/data format is stored in the marketdata folder i.e /tmp/marketdata/1.170212754? Is it just the raw marketbook? Thanks

---

## 2022-05-17 11:33:27 - general channel

**Ralegh**

Has anyone had restrictions on betfair api use from being too read heavy?

---

## 2022-05-16 13:47:34 - random channel

**Mick**

[@U01EZ613ZCZ](@U01EZ613ZCZ): I tried some hacked together C code and some simple python involving urllib - both work fine of a ton of other sites

---

## 2022-05-16 12:43:50 - random channel

**Paul**

In all seriousness if there was appetite for something in Manchester (my home town), I'd try and find time for helping get that sorted.

---

## 2022-05-16 09:43:17 - issues channel

**liam**

give me 10 minutes and I will update bflw and flumine

---

## 2022-05-16 09:41:27 - issues channel

**Rudeger Jamison**

ah right, I just have it as default.



Is that something Flumine will handle then Liam?



Or I can configure something to get around it?

---

## 2022-05-15 16:23:14 - betfair-news channel

**Mo**

That requires you to subscribe to the order stream as opposed to the price stream if I've understood the question correctly. Or are you asking how to subscribe to markets on the price stream on which you have placed bets?

---

## 2022-05-15 16:04:41 - betfair-news channel

**PATTY BET**

for example... now i place a bet and maybe 5 min from now i place another limit order... how can i subscribe to streaming based on my changing bets?

---

## 2022-05-15 15:33:21 - betfair-news channel

**PATTY BET**

hi guys, pretty new here. i'm currently using the python betfairlightweight library for some testing... how can i add more markets to streaming?  I mean, using the example on streaming how can i subscribe/unsubscribe to markets when a particular event occurs? Thank you for your time

---

## 2022-05-15 11:55:01 - random channel

**Mick**

Does anyone have any python code that will grab a page form [http://oddschecker.com|oddschecker.com](http://oddschecker.com|oddschecker.com) - I don't mean parse it in any way, I mean simply grab the entire contents of any page. I have both python and C code that can grab pages from many other sites and the code used to work on [http://oddchecker.com|oddchecker.com](http://oddchecker.com|oddchecker.com) previously but somehow oddschecker has become more prickly and is detecting something its doesn't like. FYI I can access oddschecker from any browser - so it must be possible to do somehow.

---

## 2022-05-14 17:02:36 - random channel

**Michael**

I'm sure there's still some money there if you know how to cook it right. Not much though, that w/o market is only small.

---

## 2022-05-14 14:55:45 - general channel

**liam**

Probably, quicker to test than write the question? 

---

## 2022-05-13 19:35:42 - general channel

**liam**

[@UEA14GBRR](@UEA14GBRR) + the backhanders help soften the blow :wink:

---

## 2022-05-13 16:47:13 - general channel

**Mo**

Same range. It's been helped by a current month long drawdown

---

## 2022-05-13 07:28:06 - general channel

**liam**

Is that a problem? For me I have various tables; market, order, trade etc. Market data gets stored on creation along with order and trade which also gets updated on closure (profit/matched price)

---

## 2022-05-13 06:37:46 - general channel

**liam**

No flumine uses it internally, if you are trying to record your bets use loggingcontrol 

---

## 2022-05-13 06:36:21 - general channel

**liam**

```from flumine import config



config.whatever = whatever ```

---

## 2022-05-13 06:27:23 - general channel

**Rudeger Jamison**

I can see it is set in the `config.py` but do I actually need to go in to the flumine code and change this ?



Cant see much info on the docs explaining it

---

## 2022-05-12 11:29:22 - issues channel

**FrontRunner**

For the past 10 days I have been getting sporadic missing information from Betfair API's listMarketCatalogue, RUNNER_METADATA for GB horse racing.



• Nearly all the horse BRED code is missing

• Som of the SIRE_NAME, DAM_NAME, DAMSIRE_NAME are missing

• The OWNER_NAME is randomly missing off the last 1-3 characters

• Some of the BRED info for the horse, sire ... is using non standard code such as IRL instead of IRE, ITA instead of ITY.

This used to happen about once a year but now it's happened for about 6 of the last 10 days. What's going on?

---

## 2022-05-12 03:35:07 - general channel

**Rudeger Jamison**

I thought perhaps I could set the `streaming_timeout` arg and that would trigger it, but having no luck.

---

## 2022-05-11 22:57:30 - general channel

**Newbie99**

The delayed key won't help much, other than testing your code (despite the name its not simply a case of using it to view delayed data, it does weird stuff to it to make the prices unusable).



Are you able to share your code and someone might be able to spot the issue?

---

## 2022-05-11 13:04:44 - random channel

**Lee**

[https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/flumine/order/order.py#L76](https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/flumine/order/order.py#L76)

---

## 2022-05-11 09:27:27 - issues channel

**foxwood**

Seconds [https://docs.python.org/3/library/time.html#functions](https://docs.python.org/3/library/time.html#functions)

---

## 2022-05-11 09:21:23 - betfair-news channel

**KG**

hey [@UTYFXUKRB](@UTYFXUKRB) shoot an email to [mailto:automation@betfair.com.au|automation@betfair.com.au](mailto:automation@betfair.com.au|automation@betfair.com.au) and we can help you out :)\

---

## 2022-05-11 06:31:17 - random channel

**liam**

No that is expecting a bool, try out this [https://github.com/betcode-org/flumine/pull/583|branch](https://github.com/betcode-org/flumine/pull/583|branch) 

---

## 2022-05-10 15:59:49 - random channel

**Aaron Smith**

does anyone have an efficient approach to extract final back/lay prices from a streaming_data_file ?

---

## 2022-05-10 13:32:30 - issues channel

**Meow**

no I don’t think so. Only password I set was for the initial database creation Mo

---

## 2022-05-10 13:28:28 - issues channel

**Mo**

So these messages are quite arcane but to try to get a sense of what they're referring to you can look in the CPython source. Here's the file and line it's referring to:



[https://github.com/python/cpython/blob/10bc004642786662324a2b0fc9a804e1110f582b/Modules/_ssl.c#L4029](https://github.com/python/cpython/blob/10bc004642786662324a2b0fc9a804e1110f582b/Modules/_ssl.c#L4029)



This suggests to me it's related to the certificate having a password - did you set one when you created the certificate?

---

## 2022-05-10 13:24:54 - issues channel

**Mo**

What version of Python?

---

## 2022-05-10 13:14:49 - issues channel

**liam**

ah the problem is when you import datetime like this



```from datetime import datetime```



---

## 2022-05-10 13:04:34 - issues channel

**liam**

utcnow will be the publish_time, what problem are you having?

---

## 2022-05-10 12:50:57 - betconnect channel

**Daniel**

Thanks for the question [@U011VL3CA2Y](@U011VL3CA2Y). BetConnect is an exchange and commissions are only paid by the backer (competitive rates + No premium Charge!). Matched bettors are attracted to the layside on BetConnect because you (API backers) are providing them with liquidity.



They will offset their risk on BetConnect by backing the same bet with bookmakers and take advantage of any promotions they offer. A match bettor is agnostic as to whether the bet represents -EV, all types of liquidity are valuable to them. Through our api, the ability to pump out hundreds of bets across multiple sports adds liquidity to the exchange eco system.



Hope this answers your question [@U011VL3CA2Y](@U011VL3CA2Y) - we'll upload more information on matched bettors and how they use our liquidity to make money.

---

## 2022-05-10 08:14:23 - random channel

**Oliver Varney**

[@U4H19D1D2](@U4H19D1D2) is the flumine representation of best price execution an internal concept or something that is actually sent upto betfair?

---

## 2022-05-10 08:10:37 - random channel

**Mo**

Not sure that separating the orders out helps you. Is using fill or kill essential?

---

## 2022-05-09 19:43:38 - issues channel

**Beginner**

[@U9JHLMZB4](@U9JHLMZB4) I would like to thank you immensely for all the points brought by you, these indications are indications that with my knowledge, I can put into practice in the code, I really know that it is difficult to understand my code because it is very archaic and poorly made and yet you managed to fragment it and understand it.



Just being able to decrease the current time a little, it will help me a lot.

---

## 2022-05-09 18:35:21 - issues channel

**Unknown**

Hi [@U9JHLMZB4](@U9JHLMZB4), thanks for support and I'm sorry for my English, maybe I wasn't very correct. Earlier I quoted Betcode instead of BetConnect (With Betcode I meant it could be using betfairlightweight module, Flumine or some other I don't know yet), it was more saying that I was looking for an option between them.



I did my code with betfairlightweight, but on a Saturday it takes more than 10 minutes to roll the dice, unfortunately my knowledge blocked me from being able to do anything faster and correctly (and I don't have time to learn at the moment).



That's why I ended up asking if I can offer the work to a third party here in the chat.



Here is the way I did it and it takes as long time to collect data as I commented:

---

## 2022-05-09 18:26:22 - issues channel

**Peter**

[@U03CZHR6HM0](@U03CZHR6HM0) Earlier you referred to BetConnect, but your data fields suggest that you're actually looking for Betfair data.



Since you're interested in infrequent polling rather than streamed data, you would use Betfairlightweight rather than Flumine and a single call to the list_market_catalogue method (subject to some limitations on response size, which might need to break it into multiple calls depending on the number of leagues you're after) followed by calls to the list_market_book methods and some response processing would get you all the data you want .



The whole process: call, response, and response processing should be measured in a (small) number of seconds if properly structured and there's already an example that's fairly close to what you want, but for horse racing in the Betfairlightweight examples folder (exampleone).

---

## 2022-05-09 16:45:13 - issues channel

**Beginner**

[@U01DVUAE2G1](@U01DVUAE2G1) Honestly, I don't know the exact answer to this question, because I think streaming is used to collect updates non-stop all day (if I understand its use correctly). I don't need to collect the odds non-stop all day, I just call the code a few times a day, so when I go to analyze the odds on my spreadsheet, I have them updated.

---

## 2022-05-08 08:27:24 - issues channel

**Dave**

Is there a way to tell flumine not to log to the console? I presume this would also be a pre-requisite for being able to use tqdm to visualize progress when backtesting in parallel?

---

## 2022-05-07 18:24:26 - strategies channel

**liam**

Flumine does this by default, why do you think it doesn't? 

---

## 2022-05-07 10:55:26 - issues channel

**Peter**

Also, listener_kwargs are used internally by Flumine to make your backtesting more efficient. They shouldn't be used when communicating with Betfair.

---

## 2022-05-07 10:50:29 - issues channel

**Peter**

I'd recommend either using the betfairlightweight streaming_market_filter() method to construct your market filter (it takes parameters in snake case and coverts them to camel case) or build your dictionary with camel case keys.

---

## 2022-05-07 10:29:11 - issues channel

**Marco**

Thanks [@UFTBRB3F1](@UFTBRB3F1), I'm trying a combination of these:

```market_filter={

            # Use this when backtesting

            # "markets": market_files,

            "event_type_ids": ["1"],

            "listener_kwargs": {"seconds_to_start": -10, "inplay": True},

            "country_codes": ["IT"],

            "market_type_codes": ["OVER_UNDER_25"],



        },

        market_data_filter=streaming_market_data_filter(fields=["EX_ALL_OFFERS"]), ```

---

## 2022-05-07 09:59:12 - random channel

**liam**

Have a look at the simulation middleware to see how flumine does it 

---

## 2022-05-07 09:30:40 - random channel

**Newbie99**

I think that would be very useful! I've been working on developing strategies that place a far larger amount of orders than my previous stuff and my cancels are based on not just time, but also price. This is where I've found bottlenecks as with markets that stay open for a while (e.g. tournament outright winner types), as the order quantities build my inefficient code gets shown up more!



I'm working on refinements my end, but if flumine was enhanced as you suggest I would definitely find it helpful.

---

## 2022-05-07 09:09:38 - random channel

**liam**

Yeah I see, maybe we should add a flag to the order object `order.streaming_updated` or similar

---

## 2022-05-06 22:33:20 - general channel

**Fab**

[http://www.betsapi.com|www.betsapi.com](http://www.betsapi.com|www.betsapi.com)

[http://www.totalcorner.com|www.totalcorner.com](http://www.totalcorner.com|www.totalcorner.com)



The former is generally good. The latter is prone to blackouts for a few days every now and then.



Neither do streaming as far as I know.

---

## 2022-05-06 17:13:15 - random channel

**Oliver Varney**

Probably missing something and its a stupid question, but If orders are stored in the blotter, is there a need to re serialise all of them each time theres an order update

---

## 2022-05-06 16:10:38 - random channel

**liam**

You can update the order stream to use a [https://github.com/betcode-org/betfair/blob/9126dcec91a1941f03cc58e4fd75818f36de9013/betfairlightweight/streaming/listener.py#L100|listener](https://github.com/betcode-org/betfair/blob/9126dcec91a1941f03cc58e4fd75818f36de9013/betfairlightweight/streaming/listener.py#L100|listener) with `order_updates_only` set to True

---

## 2022-05-06 14:50:38 - betconnect channel

**Mauricio Garcia**

we'll start uploading snippets in this channel :slightly_smiling_face: If you have a specific question, just let us know

---

## 2022-05-06 14:06:25 - general channel

**Alessio**

I think the main problem of sportmonks is that it's not a streaming API, you need to poll. You can poll, say, twice a second, but it's still going to be a pull interface rather than push.

---

## 2022-05-06 14:04:12 - betconnect channel

**Mauricio Garcia**

Hi guys,



As we promised we'll be dropping short edits from the Virtual Event to share the information discussed and also use this channel as a platform to communicate with all of you moving forward.



Keep an eye on this space as we'll be giving out transparent and direct answers on your questions!

---

## 2022-05-06 09:08:07 - general channel

**Jorge**

But my problem is how to convert that to an IP address

---

## 2022-05-06 08:53:53 - issues channel

**Mo**

Yeah integration into flumine would make more sense but not something I have a strong opinion on

---

## 2022-05-06 08:49:12 - issues channel

**Oliver Varney**

was there any thoughts about integrating betfairutil into bflw or is it preferable to be separate out of interest?

---

## 2022-05-06 08:45:48 - issues channel

**Oliver Varney**

yes mo, but I guess it can work either way with flumine / bflw including some logic around the side attribute

---

## 2022-05-06 08:44:52 - issues channel

**Mo**

Was the capitalisation question directed at me?

---

## 2022-05-06 08:17:19 - issues channel

**Mo**

We recently changed from an older internal Side enum definition to the betfairutil one and also had problems with the arbitrary capitalisation choice. Ideally you should be able to construct one from a string in a case insensitive way

---

## 2022-05-06 08:16:30 - issues channel

**Oliver Varney**

I used it on the trade and passed in down to the orders but flumine order.side is upper case

---

## 2022-05-06 08:12:09 - issues channel

**Oliver Varney**

lol sorry mate found the problems was [@UBS7QANF3](@UBS7QANF3) Side enum from betfairutil is not fully upper case

---

## 2022-05-06 07:58:47 - issues channel

**liam**

what is `self._simulated` this works of a bool on the SimulatedOrder class which uses [https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulatedorder.py#L478|this](https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulatedorder.py#L478|this) which might be wrong in your code

---

## 2022-05-06 07:56:37 - issues channel

**liam**

Have you seen this [https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/order/order.py#L189|property](https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/order/order.py#L189|property)?

---

## 2022-05-06 06:59:20 - issues channel

**liam**

the responses are populated [https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/execution/simulatedexecution.py#L66|here](https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/execution/simulatedexecution.py#L66|here)

---

## 2022-05-06 06:56:14 - issues channel

**liam**

that defaults to `Simulated` [https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulatedorder.py#L18|class](https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulatedorder.py#L18|class) when simulating

---

## 2022-05-06 06:53:21 - issues channel

**liam**

when simulating the [https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/execution/simulatedexecution.py#L56|execution](https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/execution/simulatedexecution.py#L56|execution) code does it

---

## 2022-05-06 06:50:29 - issues channel

**liam**

gets [https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulation.py#L97|called](https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulation.py#L97|called) on each book update

---

## 2022-05-06 06:50:05 - issues channel

**liam**

Yeah, logic is [https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulation.py#L109|here](https://github.com/betcode-org/flumine/blob/5e6b8569a4238e361a3dda4e6b5cb0ada93c9723/flumine/simulation/simulation.py#L109|here)

---

## 2022-05-06 06:48:21 - issues channel

**Oliver Varney**

im assuming I have to call _process_market_books in simulatedflumine?

---

## 2022-05-05 15:55:52 - general channel

**Peter**

My preference is to use logging control to write each order to a database when it's placed and then update it when the market is closed.

---

## 2022-05-05 15:50:12 - general channel

**Newbie99**

That is probably the best starting point, tweak that example to suit your exact needs (e.g. can write to a JSON or database if preferable to a .txt file)

---

## 2022-05-05 15:49:38 - general channel

**Newbie99**

[https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/betcode-org/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2022-05-05 13:11:31 - issues channel

**Newbie99**

But I think we still need a way of flumine handling the situation, if it repeatedly finds an order shows up as BET_TAKEN_OR_LAPSED, then some kind of control that stops it looping like this?

---

## 2022-05-05 13:08:24 - issues channel

**Oliver Varney**

probably nothing to do with this, but flumine operated at the time assuming befair response would be logical and it lead to my code trying to cancel a silly amount of times

---

## 2022-05-05 12:00:52 - issues channel

**Newbie99**

So it seems logical the cancel would fail, but Flumine just goes on an infinite loop and the status doesn't seem to ever update

---

## 2022-05-04 17:53:16 - betconnect channel

**Jonjonjon**

My phone went fuzzy when they were discussing how to get the mug. Watching it from Clapham Junction is hard.

---

## 2022-05-04 10:59:23 - strategies channel

**liam**

snap_delta is a `or` if you look at the code it makes sense but it basically uses `streaming_timeout` on the queue and then snap_delta is used to send an update regardless

---

## 2022-05-04 10:59:05 - strategies channel

**Oliver Varney**

what kind of streaming_timeout are people typically using then, inline with matching cycles or something?

---

## 2022-05-04 10:57:52 - strategies channel

**Oliver Varney**

so if streaming_timeout is set to None it will block untill something arrives ? therefore snap will never be called if im understanding correctly? and order snap is defined with SNAP_DELTA as 5 seconds

---

## 2022-05-04 10:51:09 - strategies channel

**liam**

up to the user really, if you have it in process_market_book there is a chance you might miss things if the market doesn't update often unless you use the `streaming_timeout`

---

## 2022-05-04 09:24:31 - betconnect channel

**Mauricio Garcia**

found the problem

---

## 2022-05-03 22:05:14 - issues channel

**AndyL**

I can only think either Flumine incorrectly completed the order, or Betfair nonrunner Lay SP order adjustment went rogue...

If i backtest over the recording it works fine, but  backtest simulation uses a middleware order non runner adjustment class, effectively emulating Betfair

---

## 2022-05-03 19:49:47 - issues channel

**AndyL**

So ive placed a lay limit order market_on_close at 1.01  so normally that will get matched at inplay at SP. Buton this one occasion after a nonrunner suspension it got marked as complete by Flumine at 111 secs prior to scheduled start, actual start was at -94secs

---

## 2022-05-03 16:37:25 - issues channel

**Beginner**

I agree perfectly [@UBS7QANF3](@UBS7QANF3), you are correct on all points, I know that my knowledge is very limited and I have several difficulties to be resolved yet.

---

## 2022-05-03 16:34:59 - issues channel

**Mo**

I do not mean to be rude but your code is not very good and flumine does all of this boiler plate much better than what you've written. If you take the time to go away and learn how to use flumine you will be in a much better position and you will get more help here. Really you're just asking generic Python questions right now

---

## 2022-05-03 16:32:58 - issues channel

**Beginner**

Hello [@UBS7QANF3](@UBS7QANF3), yesterday after his indication I did a research on `flumine`, I started an attempt to carry out the work but I'm still far from being able to use it, but thank you very much, I'll keep test with it to get the necessary result. If I manage to generate an option with `flumine`, I'll send it here! :pray:

---

## 2022-05-03 16:29:34 - issues channel

**Mo**

I'm going to echo [@U01C12ZEADQ](@U01C12ZEADQ), you just need to switch to using flumine

---

## 2022-05-03 16:28:35 - issues channel

**Beginner**

No problem [@URMM9463X](@URMM9463X), I can answer you calmly, it's just that I had to summarize the code a lot so it wouldn't get too complex and take the focus off the problem I'm trying to demonstrate, but this function does much more in there than just adding the data found. But the rest are really personal things to combine odds data and make sure there is value for me to invest in the market or not.

---

## 2022-05-03 08:30:40 - general channel

**Peter**

Setting up polling on a loop is pretty straightforward, but Betfair won't like you doing it and may even cut you off (personal experience early in my journey), and as your sophistication grows streaming is a much, much better option anyway.

---

## 2022-05-03 00:43:51 - issues channel

**Rudeger Jamison**

thanks for listening to my rambling!! hope this helps someone else

---

## 2022-05-03 00:32:02 - general channel

**Mr West**

Streaming is the best way to get the data.

---

## 2022-05-02 18:54:55 - issues channel

**Beginner**

Hello [@U01C12ZEADQ](@U01C12ZEADQ) , I use Visual Studio Code, I don't know Flumine, honestly I have no idea if it's a module or a program, anyway I'll research to better understand your tip. Thank you very much for your attention!

---

## 2022-05-02 18:48:38 - issues channel

**Alessio**

Have you considered using flumine and the event loop it includes?

---

## 2022-05-02 18:40:20 - issues channel

**Beginner**

And I'm sorry it's a basic knowledge question, but I'm just starting out in this world and I have a really hard time understanding some things.

---

## 2022-05-02 17:12:16 - general channel

**Marco**

Hello! I am trying out this wonderful project :slightly_smiling_face: Is there a way to record market data without using streaming? So classic polling. I've searched a bit but it doesn't seem possible out of the box

---

## 2022-05-02 13:21:55 - issues channel

**John Foley**

Or how else are people doing this? I see there is some stuff people have built e.g. the time machine. But are they using the same data so have the same problems?

---

## 2022-05-02 13:19:49 - issues channel

**John Foley**

Thanks a mil. So the problem that I’ve described - can it only be done with Pro? Or is self collection the way to go?

---

## 2022-05-02 12:30:40 - random channel

**charlie_v**

You could have a beer with the trainers and jockeys while saying the 'mate' a lot might help.

---

## 2022-05-02 10:27:56 - random channel

**Jonjonjon**

I wish I knew how to cheat.

---

## 2022-05-02 09:22:21 - random channel

**charlie_v**

[https://twitter.com/SimonNott/status/1520763898793766912](https://twitter.com/SimonNott/status/1520763898793766912)



To cheat or not to cheat that is the question

---

## 2022-05-02 06:41:18 - issues channel

**liam**

Look at the flumine example dir and add some logging to see what it’s doing 

---

## 2022-05-02 05:55:47 - issues channel

**Rudeger Jamison**

I am obviously expecting to see *`check_market_book` entered at somepoint, but it appears as though it is never entered.*



*I also used the bflw streaming implementation with all the same parameters, and it all seems to work fine* :shrug: 

---

## 2022-05-01 21:26:25 - random channel

**Mo**

I'm not a flumine user but my understanding is you'd have to implement fetching them yourself using Middleware

---

## 2022-05-01 21:19:39 - random channel

**LM**

[@UBS7QANF3](@UBS7QANF3) do you know if this data comes through with flumine stream data anywhere?

---

## 2022-05-01 19:11:08 - general channel

**Dave**

Question: is Betfair's order book truly based on time-priority at the same price? I cannot find any documentation on it - just curious if it has been officially established that the order book is a traditional order book with price-time priority and nothing funky/unexpectwd happens during the matching cycle where orders later in the queue we think there is might be matched first?

---

## 2022-05-01 14:02:44 - random channel

**Mo**

Use the race card: [https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py](https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py|https://github.com/betcode-org/betfair/blob/master/betfairlightweight/endpoints/racecard.py)

---

## 2022-05-01 09:59:04 - general channel

**Newbie99**

Are you checking right after startup?



Market catalogue isn't included in the stream, Flumine makes a REST API call behind the scenes, so it can take a few seconds when starting up before the object is populated.

---

## 2022-04-30 09:27:52 - random channel

**Dave**

While flumine took people like river_shah to higher PC within 18 months (which is insane BTW), I doubt  the user-base has a different distribution of winners Vs losers. If anything probably increased the possible revenue pool - don't think it was any foot-shooting :)

---

## 2022-04-29 13:41:38 - random channel

**D C**

Last time I received race state changes but not runner state changes I think that called it a "mapping problem" and the UK stuff was down but the US stuff worked. Could be anything though so I guess we just wait and see

---

## 2022-04-29 12:39:52 - random channel

**liam**

without meeting those who I have met from bflw there is no way I would be making what I make now, I doubt even 10%

---

## 2022-04-29 11:06:51 - random channel

**Michael**

I might never have made it into the streaming era without it!

---

## 2022-04-29 11:05:54 - random channel

**liam**

fairly sure I have shot myself in the foot releasing flumine

---

## 2022-04-29 10:07:45 - random channel

**D C**

I guess it is you that took all my money then [@UQL0QDEKA](@UQL0QDEKA) April has  been savage for me. I am lucky that I took the good advice that [@UGV299K6H](@UGV299K6H) gave me a while ago and imcrease my base bankroll amount - otherwise I would have been cooked.

---

## 2022-04-29 09:43:59 - random channel

**Michael**

For me the question is more about whether I want to.

---

## 2022-04-29 09:38:34 - random channel

**Michael**

I do feel for newer players. Albeit maybe they're the 'problem' and for them these are the good times.

---

## 2022-04-29 09:04:30 - general channel

**Mo**

Yeah [@U4H19D1D2](@U4H19D1D2) is exactly right, the only reason for the type checks in `betfairutil` is to work out whether to use key or attribute syntax. I've been discussing with [@U4H19D1D2](@U4H19D1D2) and [@UUX1L88MC](@UUX1L88MC) about having both bflw and betfair_data MarketBook objects support `__getitem__`. If that's done then the dictionary lookup syntax will work regardless of type

---

## 2022-04-28 14:23:13 - random channel

**Oliver Varney**

I think its pycharm trying to be smart and help me out, but I dont want that file :joy:

---

## 2022-04-28 14:21:34 - random channel

**Oliver Varney**

yer the problem is not the _init_ within side that folder, but ones further up

---

## 2022-04-28 14:19:34 - random channel

**James T**

For me it does that when I create a subfolder as a "python package" rather than just choosing "directory".

---

## 2022-04-26 16:48:17 - issues channel

**Beginner**

I still have a lot of difficulty getting the data from all the games, I couldn't understand how to do it more effectively. I end up using an archaic way that collects game by game in each competition and so on.

---

## 2022-04-26 16:41:38 - issues channel

**Ruben**

if you want to monitor odds 24/7 and do stuff with odds then I would recommend streaming with flumine

---

## 2022-04-26 16:37:29 - issues channel

**Beginner**

Hi [@U011VL3CA2Y](@U011VL3CA2Y) , I'm going to research about streaming, because my idea is to get the games data and send it to a spreadsheet. Thank you!

---

## 2022-04-26 16:33:14 - issues channel

**Ruben**

I think streaming is exactly what you need to receive game and odds information from several games at the same time

---

## 2022-04-25 10:01:24 - general channel

**Guy Incognito**

Hey guys what is the best way to use betfairlightweight in conjunction with flumine? I want to call betfair light weight once per market around 20 mins before the start of the race to get the names of horses to merge with the rest of my data

---

## 2022-04-25 09:46:30 - issues channel

**Jorge**

Aha, maybe the issue is that I both placed and cancelled the bets while the status was 503 so they never made it to the streaming... I will share it with bdp

---

## 2022-04-25 09:44:00 - issues channel

**Jorge**

Alternative question, do you guys cancel your unmatched orders when you see Order Streaming status is 503 or is it better to wait until the listener status is back to None (ok)?

---

## 2022-04-25 09:30:15 - random channel

**Newbie99**

I have modified it (trying to remember why now), I think it is because for some legacy markets I have orders that were non Flumine created and I want to capture those too

---

## 2022-04-25 09:26:18 - issues channel

**Jorge**

I have a check that all the bets that I place need to appear in the Order Streaming, otherwise I wait until they appear and stop execution...

---

## 2022-04-25 09:25:17 - issues channel

**Jorge**

Hi, I had an issue Friday night. I placed a bet and then cancelled it, this order_id never appeared in the Order Streaming. The Order Streaming status was 503 around that time

---

## 2022-04-24 13:35:47 - issues channel

**John Foley**

Hi folks, quick question on the historical API. Does anyone know why we can have a situation where there was definitely money traded on a runner, but the bsp is null? Perhaps the reason is simply an oversight e.g. betfair haven’t provided it, but just wanted to make sure there isn’t some other reason that I’m missing? An example would be Exeter 13:40 on  2021-01-01, market id = 1.177450945

---

## 2022-04-23 16:02:16 - issues channel

**Newbie99**

What you describe is what is happening, but it somehow appears Flumine never acknowledges the order status has changed and seems to get stuck in a perpetual loop trying to cancel an order that has already been matched.

---

## 2022-04-23 16:01:31 - issues channel

**Newbie99**

Absolutely, but would that not correct within a few seconds, once Flumine receives the order update?

---

## 2022-04-22 14:54:57 - random channel

**liam**

His satellite helps 

---

## 2022-04-21 20:51:49 - issues channel

**Brøndby IF**

In case it's of interest, it's listed on this documentation page:



[https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login)

---

## 2022-04-20 11:23:19 - random channel

**liam**

I am not sure tbh, but I would focus on getting a simple query to work to check your connection/access as that looks to be the problem

---

## 2022-04-19 18:13:14 - general channel

**AndyL**

Hence transaction questions

---

## 2022-04-19 18:10:07 - general channel

**AndyL**

Trying to improve execution hence question above...

---

## 2022-04-19 09:53:55 - general channel

**liam**

what do you mean? Is it missing from betfair_data or flumine or both?

---

## 2022-04-19 08:40:13 - strategies channel

**liam**

Its been there for a while, needs its own section really, here is the [https://github.com/betcode-org/flumine/blob/049caf051593d301e0ae6eaba64aed5e9e489f26/flumine/simulation/simulation.py#L50|code](https://github.com/betcode-org/flumine/blob/049caf051593d301e0ae6eaba64aed5e9e489f26/flumine/simulation/simulation.py#L50|code)

---

## 2022-04-18 21:19:29 - random channel

**ShaunW**

Nice of you to ask [@UBS7QANF3](@UBS7QANF3) but after all that.... Err no. So don't do anything special on my behalf. :blush:   I quite like a trip into town tbh but last couple of times it seems like too much agro...(I'm not a python guy so limitted appeal anyway). But I know there's plenty of people north of Watford so was curious to see if there was a big vote for anywhere else.

---

## 2022-04-18 20:52:00 - general channel

**AndyL**

I have several separate strategies, ie.more than one Flumine instance

---

## 2022-04-18 20:51:04 - general channel

**Aaron Smith**

are you using flumine? If i recall correctly it should throw some warning when hitting the transaction limit, so maybe check your logs.

---

## 2022-04-18 20:36:45 - general channel

**AndyL**

Does anyone know how to identify if your account has incurred a transaction charge? Ie.where to look, and what to look for please?

---

## 2022-04-18 19:35:21 - strategies channel

**liam**

I think flumine actually orders the files on the file name (again need to double check) but I always order on top 

---

## 2022-04-16 12:58:56 - general channel

**Michael**

Quite a different proposition to be fair - this poster seems to want to hire people to do a job. I don't have a problem with that.

---

## 2022-04-15 19:41:27 - general channel

**Oliver Varney**

How many people here don't run their own money? Or would rather run someone else's money? This is a question I really find interesting

---

## 2022-04-15 08:39:52 - general channel

**Jonjonjon**

Managers often don't know how to use decent developers either. I've seen people give devs a vague requirement and then telling them to just get the job done quickly. That didn't lead to good results.

---

## 2022-04-13 09:52:48 - issues channel

**Jorge**

That's very true. Very simple to flush the database once per day and stop/start the StreamListener

---

## 2022-04-13 09:50:25 - random channel

**Aaron Smith**

had this happen to me aswell when placing a high number of bets in a short amount of time and i ve seen others encounter this too. For me the solution was to chunk bets together into 1 transaction.

check [https://github.com/liampauling/flumine/blob/master/flumine/execution/transaction.py](https://github.com/liampauling/flumine/blob/master/flumine/execution/transaction.py)

Obviously only possible when you actually place a bunch of orders on the same market_book update

---

## 2022-04-13 09:33:50 - issues channel

**Oliver Varney**

Are you trying to use redis as a cache or primary database?

---

## 2022-04-13 08:56:46 - issues channel

**Jorge**

Nothing special in the logs before it freezes... Yes, very strange because I am using this same code for a year and just having problems this last month

---

## 2022-04-13 08:51:35 - issues channel

**Jorge**

250MB is not a problem, but it starts growing and in 2/3 days reaches 6GB and freezes :sweat_smile:

---

## 2022-04-13 08:50:45 - issues channel

**liam**

Hang on 250MB? Why is that a problem

---

## 2022-04-13 08:45:13 - issues channel

**liam**

What is `Streaming`?

---

## 2022-04-13 08:31:28 - issues channel

**Jorge**

This is my code to push the markets to Redis, but I don't see how the problem could be here...

```def get_runner_data_dict(market_book, runner_book):

    return {'market_id': market_book.market_id,

            'runner_id': runner_book.selection_id,

            'back_odd': runner_book.ex.available_to_back[0].price if runner_book.ex.available_to_back else 0,

            'back_liquidity': runner_book.ex.available_to_back[0].size if runner_book.ex.available_to_back else 0,

            'lay_odd': runner_book.ex.available_to_lay[0].price if runner_book.ex.available_to_lay else 0,

            'lay_liquidity': runner_book.ex.available_to_lay[0].size if runner_book.ex.available_to_lay else 0,

            'total_matched': runner_book.total_matched if runner_book.total_matched else 0,

            'runner_number': [x.sort_priority - 1 for x in market_book.market_definition.runners if x.selection_id == runner_book.selection_id][0]}





def publish_to_redis(r_database, market_books):

    """

    Saves the content of market_books to the Redis database r_database.



    """

    market_data_dictdict = {m.market_id: {r.selection_id: get_runner_data_dict(m, r) for r in m.runners} for m in market_books}



    # Adding market level parameters:

    for market in market_books:

        market_data_dictdict[market.market_id].update({'market_data': {'inplay': market.inplay,

                                                                       'status': market.status,

                                                                       'total_matched': market.total_matched if market.total_matched else 0}})



    with r_database.pipeline() as pipe:

        for market_id, price_dict in market_data_dictdict.items():

            pipe.set(market_id, json.dumps(price_dict))

        pipe.set('last_update', now().strftime('%Y-%m-%d %H:%M:%S.%f'))

        pipe.execute()```



---

## 2022-04-13 00:58:38 - issues channel

**Brøndby IF**

I've been trying to understand how I could filter the games that were starting up to a maximum of 2 hours from now, but it also returns the games that have already started too, is there any way to remove the games that have already started directly in this call that lists the games that will be collected? Thanks in advance for all the support!



`filtros_mercado = betfairlightweight.filters.market_filter(`

        `event_type_ids=['1'],`

        `market_start_time={`

            `'to': (datetime.datetime.utcnow() + datetime.timedelta(hours=2)).strftime("%Y-%m-%dT%TZ")`

        `}`

    `)`

---

## 2022-04-09 15:16:09 - strategies channel

**J**

Next dumb question: is there some kind of throttle on the rate at which orders can be placed? I seem to have random dropping of orders (no doubt through my own doing somehow)

---

## 2022-04-08 16:02:01 - general channel

**Rob**

its just a silly example, but because of pythons duck typing, you should be able to sub that version of a MarketBook, in anywhere that a normal marketbook would go

---

## 2022-04-08 16:01:07 - general channel

**Rob**

```from betfair_data import bflw



class BiglyMarketBook:

    def __init__(self, book: bflw.MarketBook):

        self.total_matched = book.total_matched * 10

        self.runners = [ BiglyRunnerBook(r) for r in book.runners ]



        self.streaming_unique_id = book.streaming_unique_id

        self.bet_delay = book.bet_delay

        self.bsp_reconciled = book.bsp_reconciled

        self.complete = book.complete

        self.cross_matching = book.cross_matching

        self.inplay = book.inplay

        self.is_market_data_delayed = book.is_market_data_delayed

        self.key_line_description = book.key_line_description

        self.last_match_time = book.last_match_time

        self.market_definition = book.market_definition

        self.market_id = book.market_id

        self.number_of_active_runners = book.number_of_active_runners

        self.number_of_runners = book.number_of_runners

        self.number_of_winners = book.number_of_winners

        self.price_ladder_definition = book.price_ladder_definition

        self.publish_time_epoch = book.publish_time_epoch

        self.publish_time = book.publish_time

        self.runners_voidable = book.runners_voidable

        self.status = book.status

        self.total_available = book.total_available

        self.version = book.version



class BiglyRunnerBook:

    def __init__(self, book: bflw.RunnerBook):

        self.total_matched = book.total_matched * 10



        self.adjustment_factor = book.adjustment_factor

        self.ex = book.ex

        self.handicap = book.handicap

        self.last_price_traded = book.last_price_traded

        self.removal_date = book.removal_date

        self.selection_id = book.selection_id

        self.sp = book.sp

        self.status = book.status

        self.matches = book.matches

        self.orders = book.orders```

---

## 2022-04-08 16:01:00 - general channel

**Rob**

heres an example of how I think I would go about it (baring in mind, Im totally not a python dev)

---

## 2022-04-08 14:52:18 - strategies channel

**J**

My dumb question for the day

---

## 2022-04-08 13:39:20 - strategies channel

**J**

Can flumine strategies go across markets? As in, can I directly run calculations comparing win and place data on a runner in the same place?

---

## 2022-04-06 17:35:51 - general channel

**Alessio**

Hey folks, there's no way in Flumine to reproduce the cancellations due to VAR in backtesting, right?

---

## 2022-04-06 11:32:56 - issues channel

**Iván Gómez**

Ok thank you so much for your help. I'm trying to extrapolate the probabilities of WIN/DRAW/LOSE from the odds. In your personal opinion, where do you think that the probabilities of WIN/DRAW/LOSE are better identified? In the Sportsbook or in the Exchange?

---

## 2022-04-06 08:31:08 - issues channel

**Iván Gómez**

No, there is no problem running the code for Bundesliga, the problem is running the same code for other leagues like "Spanish Segunda División `competition_ids = [12204313]` ", where I am not getting any Event. During the weekend I have tried the same code and I was only able to see events (matches) in play or that were going to be played in two hours maximum.



In order to avoid misunderstandings, I have updated the previous code, changing the competition_id to the "Spanish Segunda División `competition_ids = [12204313]` " one and commeting the Bundesliga competition_id variable.

---

## 2022-04-03 11:27:22 - random channel

**Ruben**

to use this I should make my own backtest from the FlumineBacktest class; or do you suggest running an instance of FlumineBacktest for every market, in a loop?

---

## 2022-04-03 10:05:05 - random channel

**Ruben**

good morning, does anyone know of a way to print progress while backtesting with flumine? Something like "90 out of 1000 markets done"

---

## 2022-04-01 10:10:48 - betconnect channel

**Unknown**

Thanks to all of you that came to our first API event yesterday! Great to meet some of you in person and talk about our platform as well as listen to your ideas, strategies and feedback on how to keep improving BC.



For those of you outside London, and also those that couldn't make it yesterday,  we'll be hosting a virtual event soon and sharing more information in this channel so stay tuned! :eyes:

---

## 2022-03-31 13:38:02 - betconnect channel

**Oliver Varney**

I can probably put together some helper functions if needs be, but it would be good if people raise these as issues/requirements

---

## 2022-03-31 13:30:08 - betconnect channel

**Oliver Varney**

[https://github.com/betcode-org/betconnect/blob/055158f8fc89a7491d19396f91373de0dfee81b4/examples/dailyhorseracing.py#L131|https://github.com/betcode-org/betconnect/blob/055158f8fc89a7491d19396f91373de0dfee81b4/examples/dailyhorseracing.py#L131](https://github.com/betcode-org/betconnect/blob/055158f8fc89a7491d19396f91373de0dfee81b4/examples/dailyhorseracing.py#L131|https://github.com/betcode-org/betconnect/blob/055158f8fc89a7491d19396f91373de0dfee81b4/examples/dailyhorseracing.py#L131)

---

## 2022-03-31 13:27:51 - betconnect channel

**Peter**

I can replicate the problem as described exactly by extending the competitor ID, and leaving the rest of the code in the same format as the horse racing example. If I put in the correct competitor ID, the bet is placed.

---

## 2022-03-31 13:25:08 - betconnect channel

**Oliver Varney**

I'm away from my PC but it's not valid python strings / function args

---

## 2022-03-30 13:13:05 - issues channel

**Aaron Smith**

```def init_mr_horses():

    market_filter = betfairlightweight.filters.streaming_market_filter(event_type_ids=["7"],)

    market_data_filter = betfairlightweight.filters.streaming_market_data_filter(fields=["EX_BEST_OFFERS", "EX_LTP", "EX_MARKET_DEF"],

                                                                                 ladder_levels=2)

    return S3MarketRecorder(

        name="MarketRecorder_horses",

        market_filter=market_filter,

        market_data_filter=market_data_filter,

        stream_class=DataStream,

        context={

            "local_dir": "./tmp",

            "force_update": False,

            "bucket": "mybucket",

            "remove_file": True,

            "remove_gz_file": True,

            "market_expiration": 300,

        },

    )```

---

## 2022-03-30 12:59:51 - issues channel

**Aaron Smith**

Suppose I have a flumine MarketRecorder running, recording all horse and greyhound markets. How much disk space should this roughly occupy? Also, suppose i want to filter by market_base rate for the market_recorder, does filtering in `check_market_book`  work or is there a better option?

---

## 2022-03-29 21:47:39 - issues channel

**Jonjonjon**

Suppose I have added 52 strategies to a single Flumine instance. They are all subscribed to the same market filter. Are there any conditions under which all 52 strategies' `check_market_book` / `process_market_book` functions won't be called?

---

## 2022-03-29 17:04:25 - betfair-news channel

**Alessio**

Thanks [@UNW8Q88EL](@UNW8Q88EL). That's unfortunate indeed. Is there anything that could help Betfair be interested into restoring recording? Say, a 10-20 people set willing to buy? I believe from a UI/localization point of view a dedicated site is probably not necessary.. if you are interested into these piece of data, your english is usually reasonable :wink:

---

## 2022-03-29 16:56:40 - betconnect channel

**Oliver Varney**

okay let me have a look but have you tried without flumine just using that horse racing example? might be best to just rule out anything in that alone, i.e. creating a bet without flumine?

---

## 2022-03-29 14:14:06 - betfair-news channel

**Neil T (Betfair)**

Hi [@U011VL3CA2Y](@U011VL3CA2Y) - thanks for the question, i'll come back to you on this as soon as I have further info

---

## 2022-03-29 14:09:33 - betfair-news channel

**Mo**

I think you need to add a line in the XCA documentation to make sure the signature algorithm is SHA 512 - see this thread for background: [https://betcode-org.slack.com/archives/C4H05ML2E/p1647009507466239](https://betcode-org.slack.com/archives/C4H05ML2E/p1647009507466239)

---

## 2022-03-29 14:06:32 - betfair-news channel

**Neil T (Betfair)**

We made some changes to the non-interactive login documentation towards the end of 2021 to help improve the onboarding experience

---

## 2022-03-29 13:30:48 - betconnect channel

**Oliver Varney**

ah [@U02KNTX2Z7X](@U02KNTX2Z7X) beat me to it, are you calling that function first? im assuming nothing on the api has changed, so id say check [https://github.com/betcode-org/betconnect/blob/master/examples/dailyhorseracing.py](https://github.com/betcode-org/betconnect/blob/master/examples/dailyhorseracing.py) which should help with the workflow of getting correct ids

---

## 2022-03-29 13:30:24 - betconnect channel

**Joel Beasley**

Hi [@U01EZ613ZCZ](@U01EZ613ZCZ) the `market_type_id` changed to `10160` recently - are you seeing 6 in our documentation somewhere?

---

## 2022-03-29 05:15:00 - random channel

**Oliver Varney**

whilst he should be,  im not too sure the situation has changed. No one has performed well enough to take over. he should of been out ages ago. Strange for someone who plays cricket their whole life, not to have that cricketing sense of game management /  how to manufacturer wickets etc. Hes not been dealt the best hand though

---

## 2022-03-28 17:42:37 - random channel

**VT**

After this perfect explanation the problem is solved.

---

## 2022-03-28 15:10:14 - betfair-news channel

**Neil T (Betfair)**

Post your questions here directly to Betfair on any Betfair Exchange related topic.



*Moderation &amp; Etiquette*



• Replies to a single question will be confined to a single thread and any follow up question (on the same topic) should be posted in the same thread.

• DO NOT provide your Betfair username or email address in any correspondence. 

• Any specific Betfair account related queries should be directed to the usual Betfair Customer Services or Betfair Developer Support channels.

• Betfair will respond directly to into the channel (Tuesday-Thursday 10-5pm). 

• The channel will be open until 1700 on Thursday 31st March.

---

## 2022-03-28 15:10:06 - betfair-news channel

**Neil T (Betfair)**

Hi [!here](!here) - just giving everyone advanced notice of the Ask Betfair Anything session from 29th-31st March - see full details below, format the same as last time.  Please feel free to post questions in advance!  Thanks Neil

---

## 2022-03-28 08:31:59 - random channel

**Jonjonjon**

Also, I'm running around 4 Flumine instances on the 2vcpu machine that I am running the problematic script on. So perhaps I should just move it onto it's own machine. Whether that's a 1vcpu or 2vcpu machine, I'm not sure yet.

---

## 2022-03-28 06:30:27 - random channel

**Mo**

Answering my own question: [https://github.com/benfred/py-spy](https://github.com/benfred/py-spy)

---

## 2022-03-28 06:00:23 - general channel

**Unknown**

Hey, You might be interested in my library I made with the bf aus automation guys - I posted it here a few months ago.

[https://github.com/tarb/betfair_data](https://github.com/tarb/betfair_data) its a rust based library for reading/parsing stream files, that supports official betfair data, and flumine recorded files. It has multiple formats including a drop in replacement for betfairlightweight.



If youre generating csv’s you can see our article about how we dropped it in as a replacement, and cut our scripts time from over 2 and a half hours to less then 5 minutes, and generated the exact same csv output.

[https://betfair-datascientists.github.io/historicData/jsonToCsvRevisited/](https://betfair-datascientists.github.io/historicData/jsonToCsvRevisited/)

---

## 2022-03-28 05:04:58 - random channel

**Mo**

Not a flumine user so speaking more generally here but shared. Dedicated is quite expensive 

---

## 2022-03-27 22:10:45 - random channel

**Mo**

Can anyone advise how to profile a Python extension written in Rust using PyO3?

---

## 2022-03-27 12:32:52 - random channel

**Mo**

Isn't that just a flumine setting for simulation?

---

## 2022-03-27 12:27:31 - random channel

**Dave**

fascinating, it was a genuine question btw - so BPE is enforced on orders from ireland? :face_with_monocle:

---

## 2022-03-27 12:21:55 - random channel

**Mo**

Because the reason it exists in the first place is a regulatory requirement and regulations vary between jurisdictions. It's a reasonable question

---

## 2022-03-26 20:57:05 - issues channel

**PeterLe**

The feed via betangel was fine, I wondered why I'd had a good night. The feed direct from Betfair API was there during the early part of the day as mine placed some bets that way too. 

---

## 2022-03-26 17:17:38 - issues channel

**mandelbot**

That seems to have resolved things. Thanks [@U02KNTX2Z7X](@U02KNTX2Z7X)

---

## 2022-03-26 16:43:44 - issues channel

**Peter**

I have a very vague recollection of something similar happening to me on the staging site, when I started using it. It was unrelated to this wrapper (which didn't exist then) but was due to something missing from my account preferences.



I cured by manually editing my account preferences, but it would be helpful if we could trap what it is so that a warning can be added to the wrapper.

---

## 2022-03-25 17:32:08 - general channel

**mandelbot**

[https://betcode-org.github.io/flumine/clients/](https://betcode-org.github.io/flumine/clients/)

---

## 2022-03-25 16:03:58 - general channel

**mandelbot**

In the docs its `framework = Flumine()`

---

## 2022-03-25 15:26:13 - general channel

**mandelbot**

Are marketids on betconnect the same as betfair? [https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/examples/example-betconnect.py#L130](https://github.com/betcode-org/flumine/blob/9307dd5a0084c3583207921a521a1c39e430220f/examples/example-betconnect.py#L130)

---

## 2022-03-25 12:03:20 - betconnect channel

**Joel Beasley**

ok no problem [@U02V5MNA8SW](@U02V5MNA8SW) I will contact you directly with the details :thumbsup:

---

## 2022-03-25 10:37:28 - strategies channel

**PeterLe**

Yea I did see something on here saying that yesterday and update from Neil

I have the feed direct from the betfair API (and use particular stake sizes) with my own program and I also have the TPD feed through betangel. It was only the bets submitted by betangel/TPD on that race.

I can then tell by the stake size where the bet originated from.

It will be interesting to see how I fair when you boys are in the market too :grinning:

---

## 2022-03-24 16:53:22 - random channel

**liam**

Last time I looked at their website it was using a much a nicer REST API with some sort of socket/streaming however when I asked they had no plans to make it 'public'

---

## 2022-03-24 16:46:14 - random channel

**Peter**

I've looked a few times but been put off by both the SOAP aspect and the documentation. However, that their documentation actually lauds the SOAP approach suggests that it's very long in the tooth and that those old wrappers may therefore still be fit for purpose.

---

## 2022-03-24 16:29:25 - random channel

**D C**

Does anyone here write their own betdaq bot? I have just started writing one for someone else but the documentation is painful (not to mention it being a SOAP API). Doesn't seem to be many github projects either and none that are recent. Trying to use nodejs for this currently but thinking of using one of these ancient githun python projects - has anyone else used these before with any success?

---

## 2022-03-23 13:39:23 - general channel

**VT**

Thanks for the help [@U4H19D1D2](@U4H19D1D2) but I couldn't change it to order_stream, the code is too dense for a programmer who is limited to working with data analysis, scraping and statistical tests.

---

## 2022-03-23 10:35:41 - general channel

**Nacho Uve**

So, I understand that flumine does the re-subcribe by default, doesn't it?

---

## 2022-03-23 08:38:57 - general channel

**liam**

Example in [https://github.com/betcode-org/flumine/blob/07447d78df137ad5e3a34e6298c7e329618cefc0/flumine/streams/orderstream.py#L18|flumine](https://github.com/betcode-org/flumine/blob/07447d78df137ad5e3a34e6298c7e329618cefc0/flumine/streams/orderstream.py#L18|flumine)

---

## 2022-03-22 20:00:56 - general channel

**VT**

Thank you [@U4H19D1D2](@U4H19D1D2)  I don't use this example that it's configured for a market stream and I don't know how to 'adapt' to an order stream that I'm having problems with.

---

## 2022-03-22 10:26:54 - general channel

**D C**

How do the soft books regard the BetConnect approach? Allowing sharps to make use of loser accounts to place their bets must surely not be a good thing for the books? How does this affect the bettors whose accounts are being made use of? What if bookies hold up withdrawals etc? Sorry for the multiple questions but I feel I am missing something in how things work here. For example, if I were a long term losing punter, what advantage would there be for me to allow my bookie accounts to be used in this manner?

---

## 2022-03-22 09:46:48 - random channel

**LM**

One other question... If check_market_book returns false I know that process_market_book isn't executed. But I'm assuming process_orders is still run?

---

## 2022-03-22 09:43:55 - random channel

**LM**

Thanks heaps for your help!

---

## 2022-03-22 09:21:09 - random channel

**LM**

awesome thanks for your help

---

## 2022-03-21 19:42:00 - general channel

**Aaron Smith**

Whats the idea behind betconnect? I see it offers bookmaker prices, but also claims to be an exchange and seemingly bets need to be filled, which would support that. Right now that sounds like taking the bad aspects from both worlds (bad odds from bookmakers combined with lower liquidity from exchanges). Is there some page that helps me understand it better? The "How it works"/FAQ on the website didnt help me much.

---

## 2022-03-21 14:52:26 - general channel

**Joel Beasley**

Hi all, as some of you will already know, [@U4H19D1D2](@U4H19D1D2) has been working on integrating BetConnect via Flumine, which is coming in this PR [https://github.com/betcode-org/flumine/pull/560](https://github.com/betcode-org/flumine/pull/560) building on initial work by [@U9JHLMZB4](@U9JHLMZB4) and [@ULDAVFDRP](@ULDAVFDRP).



In readiness for this we’re now looking to talk to people who bet in pre race Horse Racing and pre match Football, as that is where we have our largest amounts of liquidity currently.



To kick things off we are hosting an event in London on the 31st March which we’d also like to invite those above to, to briefly present our commercial offering and USPs, and where our roadmap plans take us to, and how that benefits your P&amp;L :slightly_smiling_face:



Feel free to message me directly if you have any questions or would like to sign up for the event :thumbsup:

---

## 2022-03-21 11:24:16 - general channel

**liam**

Morning [!here](!here), very excited to announce the rename/rebrand of bflw to *betcode*!



This incorporates the new [https://github.com/betcode-org|GitHub organisation](https://github.com/betcode-org|GitHub organisation) with this slack and will open up the community to more users.



Currently betfairlightweight and flumine have been moved across (likely to involve updating any remotes if you pull the code) but hope to add more repo’s under our wing as well as inviting other members to become part of the org. Invite is open to anyone who has contributed or wants to contribute to the code :slightly_smiling_face:



Big thanks to the betconnect team ([@U02KNTX2Z7X](@U02KNTX2Z7X) and [@U02HPTBLCJY](@U02HPTBLCJY)) for sponsoring the logo and brand :sunglasses:

---

## 2022-03-21 09:45:59 - general channel

**mandelbot**

Is it possible to use recorded TPD data in backtests using Flumine?

---

## 2022-03-20 18:34:09 - random channel

**Josh**

You don't need to use the named functions in most cases as `a * b`  (where `a` and `b` are numpy arrays) and other operators are element-wise. See the note at the bottom of the docs for [https://numpy.org/doc/stable/reference/generated/numpy.multiply.html|np.multiply](https://numpy.org/doc/stable/reference/generated/numpy.multiply.html|np.multiply) and others. You can also perform all of the basic element-wise operations on arrays with different dimensions as long as the dimensions are compatible according to [https://numpy.org/doc/stable/user/basics.broadcasting.html|broadcasting rules](https://numpy.org/doc/stable/user/basics.broadcasting.html|broadcasting rules).

---

## 2022-03-20 11:04:20 - random channel

**D C**

Does python/numpy have options for elementwise multiplication of matrices of same dimensions? Specifically I am looking for the python equivalent to matlab or octave  `A ./ B`  if it exists?

---

## 2022-03-19 11:35:49 - general channel

**Dave**

Scan the file directly, use bflw to construct market books when needed from the underlying JSON

---

## 2022-03-19 11:16:12 - general channel

**birchy**

Possibly. Flumine seems like the best approach as it already handles the deltas, etc which will have benefits when I expand the signals/stats. Will have to think about the pros/cons. :thinking_face:

---

## 2022-03-19 08:12:27 - general channel

**Peter**

Hi [@U013ZS16QJZ](@U013ZS16QJZ). Not really sure what you mean here. Once the bet is matched you can't change it. Once the market is closed you can't place other bets that would affect your overall profit. So I suspect you're asking how you would use the bet ID find out what what your profit (or loss) was.



If you're using Flumine to place the bet, then allowing streaming to continue until the market is closed would allow you to capture the market result in the process_closed_market() method and use that you calculated your financial result. If you're using betfairlightweight then you would use the get_account_statement() method on an account object and use your bet ID to find the bet that interests you.



Note that using either method will only give you the gross profit. In the happy event that you bet yielded a profit, commission may be levied at the market level and this won't show on individual bets.

---

## 2022-03-18 21:42:36 - general channel

**VT**

Hi guys, noob question. After I placed the bet and it was matched I get an ID. What is the simplest way to take profit from this bet after markets are closed?

---

## 2022-03-18 11:45:06 - issues channel

**Nacho Uve**

I'm taking a look at `flumine/backtest/simulated.py` to try to understand...

But I only see ``best_price_execution`` in the function `place()`, but not in `_process_price_matched()`or `_update_matched()` .



Could that be a problem?

---

## 2022-03-18 11:08:40 - issues channel

**liam**

That is your problem 

---

## 2022-03-17 20:34:07 - general channel

**Paul**

Flumine will do the s3 lift for you. What you then want is a startup script or script in an image on boot up that. Lines your repo and day and then takes some params (perhaps) for your backtest.

---

## 2022-03-17 20:28:35 - general channel

**Jonjonjon**

I'm undecided how to get code there. I was thinking I'd have recorded Betfair files on some sort of storage there. I'm considering renting something with 128 cores. Vs using lambda. I've never used lambda before, so don't know if it'll be easy/hard, or whether or not it can use shared storage. I'm concerned about the cost of a 128 core machine that I will only need for a few minutes at a time

---

## 2022-03-16 18:34:23 - general channel

**Laybot McBackbot**

[https://liampauling.github.io/flumine/](https://liampauling.github.io/flumine/)

---

## 2022-03-16 18:15:49 - general channel

**Laybot McBackbot**

Question - how do I change the default commission when backtesting? I assume it's already calculated and is 5%?

---

## 2022-03-16 10:26:21 - general channel

**liam**

Have a look at [https://github.com/liampauling/flumine/pull/568/files|this](https://github.com/liampauling/flumine/pull/568/files|this)



This is the flumine/event driven way of using the stream so that you use a single market stream and make decisions based off the updates. Note that this is just laying at 1.01 but you just need to change this to a MarketOnCloseOrder and add your selections to the context for it to do what you want.



Haven't added your part 5, but this would involve a variation of [https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|this](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|this) example.



Moving forward you would probably want to pull these selections from a csv, api or database rather than hardcoding into the context.

---

## 2022-03-16 00:49:19 - issues channel

**Tiago Rigo**

ok I found out. my problem was using a different Signatura algorithm (default was SHA 256, and it goes with SHA 512)

---

## 2022-03-15 23:22:14 - issues channel

**Tiago Rigo**

seems to be a problem with the certificate

---

## 2022-03-15 12:38:29 - general channel

**JFP**

Just wondering if there is a Flumine function to get traded volume at specific price? Currently using below code, just wondering if there is a better way:

```#get traded volume at x price. Returns zero if no volume traded at price.

price_tv = next((item for item in runner.ex.traded_volume if item['price'] == x), 0)

if price_tv != 0:

    price_tv = price_tv['size']```

---

## 2022-03-15 08:44:42 - general channel

**bensasl2**

let me double check this. again your help is much appreciated

---

## 2022-03-15 08:39:29 - general channel

**Mo**

You're not getting it. betfairlightweight does this for you automatically

---

## 2022-03-15 08:39:11 - general channel

**bensasl2**

I did look at the examples , it only shows how you can subscribe to market data , not how to use that data to rebuild a cached order book

---

## 2022-03-15 08:38:54 - general channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2022-03-15 08:36:48 - general channel

**Mo**

Yes betfairlightweight does that

---

## 2022-03-15 08:36:21 - general channel

**bensasl2**

[https://github.com/betfair/stream-api-sample-code/tree/master/java](https://github.com/betfair/stream-api-sample-code/tree/master/java) available in Java, c# and node.js but no python ...

order book reconstruction is receiving BATL and BATB stream data and update the cache order book in real time . The cache order book, is an image of the real order book that you keep updating in your program. so above code allows you to do exactly that. can betfairlighweight or any other Python project do order book reconstruction ?

---

## 2022-03-15 03:45:19 - general channel

**Unknown**

Does anyone how to get the metadata in betfairlightweight? I keep getting None for this specific horse race

---

## 2022-03-15 02:47:18 - general channel

**Steve**

I'm looking to drop some bets into the BSP market. I want to do it as close to the jump as possible (ideally 1-2 second pre-jump). I mainly bet on Australian horse racing. Does anyone know any fields within the betfair API or an independent API service which could provide a signal that the race is immeniently about to start. I have trailed using the schedule start time, but there is way too much noise because some races start minutes after the scheduled time. Any help/advice would be appreciated.

---

## 2022-03-14 23:19:47 - general channel

**Mo**

I doubt the code you linked does anything that betfairlightweight can't do

---

## 2022-03-14 23:00:51 - general channel

**bensasl2**

I use betfairlightweight , can anyone help please ? many thanks

---

## 2022-03-14 22:59:57 - general channel

**bensasl2**

Betfair is indicating this sample code for order book reconstruction : [https://github.com/betfair/stream-api-sample-code/tree/master/java](https://github.com/betfair/stream-api-sample-code/tree/master/java) available in Java, c# and node.js but no python ...

---

## 2022-03-14 20:34:37 - issues channel

**liam**

Are you using bflw?





```    @staticmethod

    def create_race_card_req(market_ids: list, data_entries: str) -&gt; dict:

        if not data_entries:

            data_entries = "RACE, TIMEFORM_DATA, RUNNERS, RUNNER_DETAILS"

        return {"dataEntries": data_entries, "marketId": ",".join(market_ids)}



```

---

## 2022-03-14 14:04:24 - random channel

**Mo**

I've trod the same path as you and haven't found anything in Python as good as R. Luckily I'm not doing as much stats as I used to

---

## 2022-03-14 06:38:03 - general channel

**Oliver Varney**

ah gotcha :+1: surface would also help im guessing as there is AW that would fall under the banner of flat

---

## 2022-03-14 06:05:17 - issues channel

**Mo**

What version of Python?

---

## 2022-03-13 14:26:50 - general channel

**Oliver Varney**

in reviewing this you just help me find an assumption about some data that doesnt hold so thank :slightly_smiling_face: if im computing it right though these look a tad fast to me

---

## 2022-03-13 05:23:44 - general channel

**Guy Incognito**

What is the best way to calculate the volume weighted average price of all the matched bets including other peoples for a selection using flumine?

---

## 2022-03-13 01:58:12 - general channel

**LM**

When backtesting in flumine does the market.blotter.simulated.profit take into account market base rate fees (I'm assuming no)?

---

## 2022-03-12 22:57:37 - random channel

**VT**

Yes, this game also had a problem, the market was open in the extra time.

---

## 2022-03-12 20:22:41 - random channel

**VT**

Betfair with a lot of problems in the football api today, markets were open after the goal, games were finished before it ended. It's a mess.

---

## 2022-03-12 18:19:29 - random channel

**Oliver Varney**

Again maybe a silly question but do people run multiple envs, I.e. dev,stag,prod etc?

---

## 2022-03-12 18:03:36 - general channel

**Newbie99**

[https://github.com/liampauling/flumine/blob/master/examples/backtest.py](https://github.com/liampauling/flumine/blob/master/examples/backtest.py)

---

## 2022-03-12 13:41:32 - random channel

**Oliver Varney**

I guess another interesting question is whether people are using swarm or kubernetes ?

---

## 2022-03-12 12:59:17 - random channel

**Oliver Varney**

Also if you don't mind, and I'm only asking all these questions as I'm a noob in this area, but what does that cost looks like. Many small instances or fewer larger compute instances ?

---

## 2022-03-12 11:33:52 - random channel

**Jonjonjon**

I read that it's geekbench score is as good as the top threadripper. But don't know how that will compare when using Flumine. Also not sure if it will be good value. How many days/weeks profit are people willing to spend on a new PC?

---

## 2022-03-12 10:18:42 - random channel

**Jonjonjon**

Has anyone tried using an apple m1 ultra with Flumine?

---

## 2022-03-11 21:04:03 - general channel

**Laybot McBackbot**

Noob question. When backtesting, how do I make flumine shows profit/loss after processing each market instead of waiting until all markets have been processed?

---

## 2022-03-11 14:52:10 - issues channel

**Mo**

Looks to me the problem is with the certificate

---

## 2022-03-11 14:22:03 - issues channel

**liam**

you can however see the raw data with `market_book.streaming_update`

---

## 2022-03-11 07:36:18 - issues channel

**LM**

Another stupid question:

When using the streaming_market_filter to get just the Aus racing market (filter below) this afternoon I ran into issues of "trying to subscribe to over 200 streams" (something along those lines).



```market_filter=streaming_market_filter(

        event_type_ids=["7"],

        country_codes=["AU"],

        market_types=["WIN"],

        turn_in_play_enabled=True

    )```

Are there any common design patterns used to get around this?

---

## 2022-03-11 07:26:10 - issues channel

**LM**

Is the catalogue easily accessible through flumine? Or best to pull using bflw

---

## 2022-03-11 07:24:13 - issues channel

**LM**

Any help appreciated!

---

## 2022-03-11 07:21:49 - issues channel

**LM**

Hey All,

What's the best way to extract the race distance (for Aus horse racing) from the Flumine stream.

---

## 2022-03-10 14:22:36 - issues channel

**Brøndby IF**

Hi [@U4H19D1D2](@U4H19D1D2) I work with python and I'm making the call directly from Visual Studio Code, can I send my code, would it be useful?

---

## 2022-03-10 09:54:18 - general channel

**J**

What I'm missing is how to accurately predict the value, bot in in-flight data and using data before the race. I need to keep working on those but it's hard to find how to go about it

---

## 2022-03-09 21:32:03 - general channel

**Michael**

Ah ok. Maybe it's time to re-structure your code.... Flumine?

---

## 2022-03-09 00:01:50 - issues channel

**Brøndby IF**

Not that I want to collect all the data, but I just wanted a way to make it easier to map the data I want, seeing which way to go to get there, would help me a lot.

---

## 2022-03-07 21:24:11 - issues channel

**Aaron Smith**

eventually it creates space problems with the files piling up, also i was having missing files in the s3_bucket, so i m trying to get it working properly. It just feels like there isnt much where i could go wrong. I get it from flumine and run it, but somehow it still wont work properly

---

## 2022-03-07 21:20:17 - issues channel

**Aaron Smith**

This is my s3 market_recorder, i d appreciate if someone can confirm he uses something simular and is not endlessly stacking up on streaming data in the recorder_id-folder, just so i know its gotta be at my end somehwere (whereever that may be, its kinda all liams code, but i m sure i m missing something... )

```S3MarketRecorder(

        name="MarketRecorder_horses",

        market_filter=market_filter,

        market_data_filter=market_data_filter,

        stream_class=DataStream,

        context={

            "local_dir": "./tmp",

            "force_update": False,

            "bucket": "mybucket",

            "remove_file": True,

            "remove_gz_file": True,

            "market_expiration": 300,

        },

    )```

---

## 2022-03-07 19:39:02 - issues channel

**Aaron Smith**

i used to, now it doesnt restart and from what i can see basically all streaming files end up in the tmp/recorder_id folder (only the uncompressed file)

---

## 2022-03-07 19:37:05 - issues channel

**Aaron Smith**

[@UBS7QANF3](@UBS7QANF3) how is changing the dir name helping?

---

## 2022-03-07 19:35:53 - issues channel

**Mo**

[https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/strategies/marketrecorder.py#L29](https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/strategies/marketrecorder.py#L29)

---

## 2022-03-07 19:33:35 - issues channel

**mandelbot**

That's where the files are saved. You can name it yourself by setting a recorder_id. it defaults to a random [https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/strategies/marketrecorder.py#L29](https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/strategies/marketrecorder.py#L29)

---

## 2022-03-07 19:21:41 - issues channel

**Aaron Smith**

can anyone help me on this one? I feel like this should be easy but somehow i m stuck anyway :smile: Goal is to not overwrite what liam has produced

---

## 2022-03-07 11:53:43 - general channel

**liam**

once close you can get it from the market_book



[https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/controls/jupyterloggingcontrol.py#L81](https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/controls/jupyterloggingcontrol.py#L81)

---

## 2022-03-07 11:52:18 - general channel

**J**

This is probably a stupid question, but is there a place in flumine where the winner is stored? Like the winner of a horse race. I can code it up (and have before with BFLW) but want to fit into the framework

---

## 2022-03-06 12:43:10 - general channel

**Alex Alex**

~Is it correct that there is no way to filter *only* inplay markets when streaming, and I have to ask betfair to increase my connection limit beyond the 200?~ Never mind it seems to be covered just a few messages up.

---

## 2022-03-05 09:31:41 - general channel

**J**

Does Flumine work out commissions for profit? How does it work out profit? Just wondering if I'm (for example) in Australia how accurate it will be?

---

## 2022-03-04 19:04:45 - general channel

**J**

Been playing with Flumine pretty hardcore for the the last week. Amazing software, thanks for releasing it [@U4H19D1D2](@U4H19D1D2)!

---

## 2022-03-04 12:50:56 - strategies channel

**liam**

[@UUUAJQZ5J](@UUUAJQZ5J) I assume an update like this would result in the `marketVersion` being bumped? (thanks for the help on this btw)

---

## 2022-03-04 11:00:22 - strategies channel

**AndyL**

Im using default flumine client worker poll settings i believe

---

## 2022-03-04 10:48:24 - strategies channel

**AndyL**

Stop getting streaming updates? What does that mean? Im not aware of stopping..

---

## 2022-03-04 08:33:51 - issues channel

**Ruben**

I have adapted the example backtest logging control from the flumine repo to be used to log orders after a market closes. To use the real profit of the order I replaced the profit field with

```"profit": 0 if not order.cleared_order else order.cleared_order.profit```

so that the profit is only accessed if there is a ClearedOrder object. However, I am seeing that the profit being stored is always 0, even for orders from markets that have some size matched. Any ideas about what I'm doing wrong?

---

## 2022-03-03 12:38:56 - general channel

**Newbie99**

The event type differs according to the control, but a list of the different types is available here:



[https://github.com/liampauling/flumine/blob/master/flumine/events/events.py](https://github.com/liampauling/flumine/blob/master/flumine/events/events.py)



So in this instance you need to extract the orders from the Cleared Order object (which is a BFLW class).



I think I've explained that correctly, its something along those lines, but I might be confusing myself as I haven't looked at it in a while!

---

## 2022-03-03 12:34:39 - general channel

**Newbie99**

I just adapted [@U4H19D1D2](@U4H19D1D2)'s example tbh, so this you use in the same way as your current ClosedMarketLogging:



```framework.add_logging_control(ClosedMarketLogging())

framework.run()```

Here is the example from the Flumine github:



[https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2022-03-03 11:43:10 - general channel

**EJono**

Whats the best way to get a print out of/access the settled orders report at the end of a market stream life cycle in a flumine strat? im currently using process_closed_market for some final tidy up operations at the end of a market but wondering if the final outcomes of orders placed on the market are passed to this function in some way or in process_orders perhaps. Essentially I just want to be able to access the info normally retruned from listClearedOrders call but want to go about it the most flumine way possible for each market. Thank you!

---

## 2022-03-03 08:59:27 - general channel

**Mo**

Market start time is not a streaming filter

---

## 2022-03-03 08:20:36 - general channel

**J**

Will try that, and have asked them to increase the limit. Just weird that the exact code worked fine before it went down today, thought the issue might be more wisedpread. Also trying to work out how to filter it a bit more when I actually do want all Aussie races, but will work it out

---

## 2022-03-02 19:43:00 - issues channel

**liam**

meta gives you the blotter (flumine) `Order` as opposed to betfair cleared orders response

---

## 2022-03-02 12:42:15 - issues channel

**foxwood**

Not sure you end up with anything useful with both remove_file and remove_gz_file set to True as shown in your code. I think that will delete any compressed file and also it's raw parent. The only thing that might be left will be tomorrow's uncompressed files for markets that haven't closed but are opened the night before by BF.

Edit: Thats MarketRecorder _clean_up behaviour - S3MarketRecorder doesn't appear to make a local .gz which _clean_up needs to trigger the market catalogue delete. Explains catalogues being left and also streaming files for tomorrow's events. I think !

---

## 2022-03-02 11:39:37 - strategies channel

**AndyL**

Aus greyhound market start times are sometimes wrong, ie.flumine market.seconds_to_start is out by 5 or so minutes. Both the 09:08 and 10:08 races showed as starting 5+ mins later.. my bot tried to hedge several mins after race had finished!!

---

## 2022-03-02 10:15:47 - issues channel

**Aaron Smith**

goal is restart once a day. Here i m also not sure if maybe i skip markets, because the main reason i ended up investigating this area is because some days no data ends up in the s3_bucket, which i thought may be due to how i initiate my market_recorder. i use this terminate function:

```def terminate_if_all_markets_closed(context: dict, flumine, today_only: bool = True, seconds_closed: int = 600) -&gt; None:



    markets = list(flumine.markets.markets.values())



    if today_only:

        markets_today = [m for m in markets if m.market_start_datetime.date() == datetime.datetime.utcnow().date() and

                         (m.elapsed_seconds_closed is None or m.elapsed_seconds_closed and m.elapsed_seconds_closed &lt; seconds_closed)]

        market_count = len(markets_today)

    else:

        market_count = len(markets)



    if market_count == 0:

        [http://logger.info|logger.info](http://logger.info|logger.info)("No more markets available, terminating framework")

        flumine.handler_queue.put(TerminationEvent(flumine))```

and add the terminator like this:

```terminator = flumine.worker.BackgroundWorker(flumine=framework,

                                                 function=base_functions.terminate_if_all_markets_closed,

                                                 func_kwargs={"today_only": True, "seconds_closed": 1200},

                                                 interval=300,

                                                 start_delay=600)```

---

## 2022-03-02 09:57:42 - issues channel

**liam**

[https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/strategies/marketrecorder.py#L24](https://github.com/liampauling/flumine/blob/0f12a0f9d200b4a4c36c8bd26c9f4fbe82f8cce1/examples/strategies/marketrecorder.py#L24)

---

## 2022-03-02 09:47:53 - issues channel

**Aaron Smith**

the way i understand it, after the market closes, the streaming_data is put into the recorder_id_folder, where it gets compressed, uploaded and cleaned. But i dont understand why i m stil left with all these files in those folders, shouldnt they be cleaned up?

---

## 2022-03-02 09:11:31 - general channel

**liam**

its probably going to solve a lot of your problems, however as it stands you need to poll the catalogue endpoint yourself (probably in a thread) and store the data

---

## 2022-03-02 09:09:31 - general channel

**Jorge**

Sorry, now makes sense:sweat_smile:. I wrote this long time ago, I need to update from betfairlightweight to flumine then

---

## 2022-03-02 09:08:29 - issues channel

**Aaron Smith**

Hey ppl, my market_recorder (from flumine) creates a bunch of folders with random unique names (like "	7d7eb804"). Inside are (mostly) unpacked streaming_data and market_catalogue files. They dont get deleted. What is the purpose of these folders?

---

## 2022-03-02 09:07:49 - general channel

**Jorge**

I create a `betfairlightweight.Streaming` object and I dequeue using `streaming.output_queue.get()`

---

## 2022-03-02 09:07:35 - general channel

**liam**

:man-facepalming: why the first link to the flumine codebase?

---

## 2022-03-02 09:07:06 - general channel

**Jorge**

Ah I think the problem is I'm using `betfairlightweight`  and not flumine

---

## 2022-03-02 09:03:54 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1646210350923579](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1646210350923579)

---

## 2022-03-02 09:03:30 - general channel

**Jorge**

Mmm, how can I access the MarketCatalogue with flumine?

---

## 2022-03-02 08:41:13 - general channel

**Jorge**

I use `streaming.output_queue.get()`  which returns a list of all the MarketBooks

---

## 2022-03-02 08:40:52 - general channel

**liam**

but its also in the definition as per line [https://github.com/liampauling/flumine/blob/0737461323da409990d3108a158092487506aa7f/flumine/markets/market.py#L148|148](https://github.com/liampauling/flumine/blob/0737461323da409990d3108a158092487506aa7f/flumine/markets/market.py#L148|148)

---

## 2022-03-02 08:39:10 - general channel

**Jorge**

Ah great! I see [https://github.com/liampauling/flumine/blob/0737461323da409990d3108a158092487506aa7f/flumine/markets/market.py#L144|market_start_datetime](https://github.com/liampauling/flumine/blob/0737461323da409990d3108a158092487506aa7f/flumine/markets/market.py#L144|market_start_datetime) property. But how do I access this through a MarketBook object?

---

## 2022-03-02 08:22:34 - general channel

**liam**

to answer your second question flumine uses the marketVersion to trigger a catalogue request 

---

## 2022-03-01 12:26:46 - general channel

**Matthieu Labour**

Hi, is `clk` a unique id on the market level snapshot? What could be a use case for propagating it through the API? I am looking at this PR from Mo [https://github.com/liampauling/flumine/issues/522](https://github.com/liampauling/flumine/issues/522). Thank you for your help.

---

## 2022-03-01 11:07:59 - strategies channel

**J**

Oh, I worked it out, n00b question sorry

---

## 2022-03-01 10:58:53 - strategies channel

**liam**

flumine?

---

## 2022-03-01 10:50:01 - strategies channel

**J**

Silly question, is there a variable anywhere that shows the change in the LTP for a runner?

---

## 2022-02-28 20:19:23 - issues channel

**Mo**

To be honest I'm surprised that one you previously used for streaming would no longer work but the message is crystal clear. You need to get the app key activated for streaming

---

## 2022-02-28 20:10:29 - issues channel

**Mo**

Older app keys need to have streaming separately activated

---

## 2022-02-28 10:04:04 - general channel

**Newbie99**

What data does the Race Subscription show, I appear to have completely missed that (is it just a streaming version of the satus API)?

---

## 2022-02-28 09:22:23 - general channel

**liam**

[https://liampauling.github.io/flumine/sportsdata/|sports-data](https://liampauling.github.io/flumine/sportsdata/|sports-data) stream now integrated into flumine, any issues or improvements let me know

---

## 2022-02-28 08:58:26 - general channel

**Jorge**

Hey, is it true that if I restart the [https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py|marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py|marketrecorder.py) with the same `local_dir` and `recorder_id` it will continue seamlessly?

---

## 2022-02-27 10:01:53 - general channel

**LM**

Hey All,

Have thought about trying to build a bot a few times now and am going to try and commit some time to it this year. I'm sure it'll be terrible and I'll lose some cash, but primary motivation is to upskill. Glad I stumble onto this slack channel! I'll be sure to ask plenty of stupid questions along the way, feel free to tell me to shut up, but you seem like a nice enough bunch :slightly_smiling_face:

Looking forward to getting to know a few of you.

Cheers

---

## 2022-02-26 09:39:40 - general channel

**Steve**

Revolut is the worst. HSBC and TransferWise never gave me problems.

---

## 2022-02-25 09:44:04 - general channel

**liam**

Very easily [https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/flumine/clients/baseclient.py#L27](https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/flumine/clients/baseclient.py#L27)

---

## 2022-02-24 10:54:00 - general channel

**Rob**

heres some sample code as I havent added this part to the readme

```import tarfile

import bz2

from typing import Sequence

import betfair_data

import logging

from betfair_data import bflw



logging.basicConfig(level=logging.WARN, format='%(levelname)s %(name)s %(message)s')



paths = [ 

    "data/2021_10_OctRacingAUPro.tar",

    "data/2021_11_NovRacingAUPro.tar",

    "data/2021_12_DecRacingAUPro.tar"

]



def run_with_py_loading():

    market_count = 0

    update_count = 0



    def load_tar(file_paths: Sequence[str]):

        for file_path in file_paths:

            with tarfile.TarFile(file_path) as archive:

                for file in archive:

                    f: bz2.BZ2File = bz2.open(archive.extractfile(file))

                    name = file.name

                    bytes = f.read()



                    yield (name, bytes)

        return None



    for name, bytes in load_tar(paths):

        file = bflw.BflwIter(name, bytes, cumulative_runner_tv=True)



        market_count += 1

        for market_books in file:

            for market_book in market_books:

                update_count += 1



        print(f"Market {market_count} Update {update_count}", end='\r')

    print(f"Market {market_count} Update {update_count}")





def run_with_rust_loading():

    for file in betfair_data.TarBz2(paths, cumulative_runner_tv=True).bflw():

        market_count += 1



        for market_books in file:

            for market_book in market_books:

                update_count += 1



        print(f"Market {market_count} Update {update_count}", end='\r')

    print(f"Market {market_count} Update {update_count}")





run_with_rust_loading()```

---

## 2022-02-24 10:44:22 - general channel

**Rob**

Just “finished” the betfairlightweight compat part of my data parsing library ([https://github.com/tarb/betfair_data](https://github.com/tarb/betfair_data)) and I would love if some people would like to try it out.

Even better if you want to donate some cpu cycles and run my test script with some data, to help me find some remaining differences.

---

## 2022-02-24 06:21:58 - issues channel

**Rob**

but the update doesnt say to remove 2.32 or 2.18, so is bflw doing something clever here and merging suspended market updates or something.

I read through the bflw code that handles ladders, and I cant see anything.



And this is 1 ladder different in like 200k updates, so i doubt theres anything wrong with either parsing code. More likely something extra is happening in bflw that i havent replicated (or python is doing weird things with floats)

---

## 2022-02-24 06:12:30 - issues channel

**Rob**

after about 15k updates on a market, out ladders diverge like this (new 1, bflw 2)

```Previous state (match)

1 [2.32, 23.96] [2.3, 53.6] [2.28, 123.69] [2.26, 65.64] [2.24, 63.93] [2.22, 0.4] [2.2, 23.12] [2.18, 131.73] [2.16, 62.74] [2.14, 23.73] [2.12, 7.96] [2.1, 686.0] [2.08, 21.54] [2.06, 10.2] [2.04, 79.39] [2.02, 35.0] [2.0, 552.09] [1.99, 120.44] [1.98, 10.2] [1.92, 13.02] [1.91, 66.76] [1.9, 240.0] [1.83, 24.09] [1.8, 40.5] [1.75, 376.0] [1.7, 45.5] [1.6, 20.5] [1.57, 529.82] [1.56, 12.0] [1.55, 86.36] [1.5, 4.5] [1.35, 6.0] [1.3, 3.72] [1.23, 9.0] [1.22, 2.0] [1.21, 50.0] [1.11, 10.0] [1.1, 393.49] [1.06, 50.0] [1.05, 20.0] [1.03, 1725.46] [1.02, 5169.35] [1.01, 1471.32]



2 [2.32, 23.96] [2.3, 53.6] [2.28, 123.69] [2.26, 65.64] [2.24, 63.93] [2.22, 0.4] [2.2, 23.12] [2.18, 131.73] [2.16, 62.74] [2.14, 23.73] [2.12, 7.96] [2.1, 686] [2.08, 21.54] [2.06, 10.2] [2.04, 79.39] [2.02, 35] [2, 552.09] [1.99, 120.44] [1.98, 10.2] [1.92, 13.02] [1.91, 66.76] [1.9, 240] [1.83, 24.09] [1.8, 40.5] [1.75, 376] [1.7, 45.5] [1.6, 20.5] [1.57, 529.82] [1.56, 12] [1.55, 86.36] [1.5, 4.5] [1.35, 6] [1.3, 3.72] [1.23, 9] [1.22, 2] [1.21, 50] [1.11, 10] [1.1, 393.49] [1.06, 50] [1.05, 20] [1.03, 1725.46] [1.02, 5169.35] [1.01, 1471.32]```

```After update (not match)



1 [2.32, 23.96] [2.3, 53.6] [2.28, 123.69] [2.26, 65.64] [2.24, 63.93] [2.22, 0.4] [2.2, 15.41] [2.18, 131.73] [2.16, 62.74] [2.14, 23.73] [2.12, 7.96] [2.1, 686.0] [2.08, 21.54] [2.06, 10.2] [2.04, 141.39] [2.02, 35.0] [2.0, 552.09] [1.99, 120.44] [1.98, 10.2] [1.92, 13.02] [1.91, 66.76] [1.9, 240.0] [1.83, 24.09] [1.8, 40.5] [1.75, 376.0] [1.7, 45.5] [1.6, 20.5] [1.57, 529.82] [1.56, 12.0] [1.55, 86.36] [1.5, 4.5] [1.35, 6.0] [1.3, 3.72] [1.23, 9.0] [1.22, 2.0] [1.21, 50.0] [1.11, 10.0] [1.1, 393.49] [1.06, 50.0] [1.05, 20.0] [1.03, 1725.46] [1.02, 5169.35] [1.01, 1471.32]



2 [2.3, 53.6] [2.28, 123.69] [2.26, 65.64] [2.24, 63.93] [2.22, 0.4] [2.2, 15.41] [2.16, 62.74] [2.14, 23.73] [2.12, 7.96] [2.1, 686] [2.08, 21.54] [2.06, 10.2] [2.04, 141.39] [2.02, 35] [2, 552.09] [1.99, 120.44] [1.98, 10.2] [1.92, 13.02] [1.91, 66.76] [1.9, 240] [1.83, 24.09] [1.8, 40.5] [1.75, 376] [1.7, 45.5] [1.6, 20.5] [1.57, 529.82] [1.56, 12] [1.55, 86.36] [1.5, 4.5] [1.35, 6] [1.3, 3.72] [1.23, 9] [1.22, 2] [1.21, 50] [1.11, 10] [1.1, 393.49] [1.06, 50] [1.05, 20] [1.03, 1725.46] [1.02, 5169.35] [1.01, 1471.32]



diff: [2.32, 23.96] and [2.18, 131.73] are missing from bflw```

---

## 2022-02-24 06:11:16 - issues channel

**Rob**

So I’ve been working on creating a historic/recorded parser for bflw objects, and im just testing the output now, and I have a difference in ladders I cant explain

---

## 2022-02-24 01:31:00 - general channel

**ShaunW**

That's really good news. Thanks for helping, much appreciated.

---

## 2022-02-24 01:24:24 - general channel

**Unknown**

the feedback I’ve received is that there are no changes on your end, just that the MBR will change on any winnings on relevant markets, as suspected. hope that helps [@UEA14GBRR](@UEA14GBRR)

---

## 2022-02-23 21:36:42 - random channel

**Jonjonjon**

I think I might have worded my question incorrectly.:flushed:

I was referring to the `market_exposure` I can't find a control that uses it.

---

## 2022-02-23 12:29:10 - issues channel

**liam**

Try copying this [https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/examples/controls/backtestloggingcontrol.py#L65|https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/examples/controls/backtestloggingcontrol.py#L65](https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/examples/controls/backtestloggingcontrol.py#L65|https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/examples/controls/backtestloggingcontrol.py#L65)

---

## 2022-02-23 11:19:05 - general channel

**Leon**

Hi [@UEA14GBRR](@UEA14GBRR) in answer to your question, your 2% comm rate under "My Betfair Rewards" only apply to .com markets. Betfair points are still accrued to offset the market base rate for ANZ markets

---

## 2022-02-23 10:36:22 - general channel

**Peter C**

In flumine, is it possible to subscribe to events across all available countries by leaving out the `country_code` filter in the `streaming_market_filter`, or do I need to supply a list of all possible countries?

---

## 2022-02-22 22:54:04 - random channel

**Jonjonjon**

I'm trying to understand the `market_exposure` function here: [https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/flumine/markets/blotter.py#L137-L154](https://github.com/liampauling/flumine/blob/bc4d18a941778f41087b055c5c8d3f00ccd63201/flumine/markets/blotter.py#L137-L154)



Does anyone have a dummies explanation for why it results in the worst possible loss?

---

## 2022-02-22 22:11:19 - strategies channel

**foxwood**

There's a flumine.client.market_recording_mode bool. Nothing in the recorders sets it to True - if it was set it stops the workers poll_account_balance and poll_market_closure being created. I'll try setting it to True and see what happens :slightly_smiling_face: Thanks.

---

## 2022-02-22 19:05:08 - issues channel

**AndyL**

[@UGV299K6H](@UGV299K6H) going a lot better thanks, some things have become clearer and potentially learning how to find value and how to execute to get it, but ill let you know in a month or so...!

---

## 2022-02-22 14:25:39 - general channel

**James T**

Yeah, I similarly know people who have had serious problems with Revolut. 

---

## 2022-02-22 12:31:15 - general channel

**thambie1**

Thanks guys! I'm using Revolut, looks like every other bank is good :joy:. I just got an automatic questionnaire about source of funds. Not a big deal yet, I'm just worried if it'll get escalated.

---

## 2022-02-22 11:57:14 - general channel

**Mo**

All I can say is Natwest have never once questioned my Betfair withdrawals

---

## 2022-02-22 11:55:26 - general channel

**thambie1**

Just in case things don't get resolved quickly, have a suggestion of a friendly bank?

---

## 2022-02-22 11:53:06 - general channel

**thambie1**

My bank is asking for proof of funds to make sure I'm not doing anything shady... I remember a few people had said they were able to request some documentation from Betfair. Was this by contacting bdp, or their account manager?

---

## 2022-02-22 08:41:38 - issues channel

**Jonjonjon**

One Flumine instance uses one connection per instance for orders, plus one per market filter.

---

## 2022-02-21 16:06:46 - general channel

**Rob**

just finished a (very early) version of a bflw compatible version, which mirrors the same object layout, fields and immutability characteristics

---

## 2022-02-21 10:18:36 - random channel

**Mark**

May be worth looking at Plotly to see if it suits your needs. It has a number of 3D graphs and it looks like it's fairly easy to pick up quickly. [https://plotly.com/python/3d-surface-plots/](https://plotly.com/python/3d-surface-plots/)

---

## 2022-02-20 13:26:33 - general channel

**PeterLe**

Afternoon :grinning:

I was just looking at the account statement in my master account and i can see that I incurred Transaction Charges for &gt; 5000/Hour. However, it doesnt detail which of the sub accounts that incurred the charges. BDP had previously told me that the 5000 limit was per account. I just seemed to have clocked up more than I thought. I've no problem paying them, but it does dent the P&amp;L. I just wondered if anyone else had encountered a similar scenario and whether BDP would provide a breakdown if I were to ask them. Thanks

---

## 2022-02-20 13:15:44 - random channel

**D C**

Question for the python gurus: Just started using python properly for data analysis and stuff so really feeling my way so far - is there a utility for 3d surface plots over an irregular mesh? Assuming not (most likely) is there something for surface over regular mesh or failing that a heatmap utility? Failing that (although it is essentially the same thing), an x,y,x bar chart over regular mesh?

---

## 2022-02-20 08:51:24 - general channel

**river_shah**

[@U4H19D1D2](@U4H19D1D2) could we please get an example using flumine on recommended way to integrate this 

---

## 2022-02-19 06:33:46 - general channel

**liam**

if you are a flumine user and assuming the market is available in your filter:



```correct_score_market = market.event["CORRECT_SCORE"]```

---

## 2022-02-19 03:23:02 - general channel

**VT**

Hi [@U0128E7BEHW](@U0128E7BEHW), out of curiosity which league did you have problems with the timing of suspension?

---

## 2022-02-18 18:41:09 - general channel

**river_shah**

Ok…problem solved. All bets that I thought occurred over material event have been voided. That being said, if anyone can guide me to the flag to check managed / not managed markets would be very helpful.

---

## 2022-02-18 13:27:24 - strategies channel

**foxwood**

If I want to ignore a market that can't be excluded by the stream filter (eg wrong race grade / distance / time etc) etc is there any way of telling bflw/flumine to ignore that market data as soon as it sees it (ie a stop_market call) or does check_market_book have to keep rejecting every message for that market (seems a lot of unnecessary calls if that is the case) ?

---

## 2022-02-17 15:41:31 - general channel

**Unknown**

[@UBS7QANF3](@UBS7QANF3) hooked up the dashboard to my database so I can now quickly download a market I've recorded and view it:

---

## 2022-02-17 10:14:21 - general channel

**Oliver Varney**

has anyone had/thought about somhow storing a serialised full market book at check points and streaming from there, like somewhat of an index. i.e. if you had the full market book at 5 mins from the off, could you then combine that with the deltas and pick up from that point and skip the 20k messages prior?

---

## 2022-02-17 09:52:20 - issues channel

**Stefan**

Thanks [@UNW8Q88EL](@UNW8Q88EL) for clarification, but as you implemented venues to streaming api you can at least extend this functionality as I suggested. Well, I have no problems with current implementation as you can see from my code I implemented workaround for such use case scenarios, but for new comers to betfair api it would be helpful to directly filter by "meta text" any betfair events offer.

---

## 2022-02-17 08:18:22 - general channel

**Mo**

No pressure but what's your timeline for being able to generate bflw objects?

---

## 2022-02-17 07:50:30 - general channel

**Rob**

My plan after this is to work on some adapters, so we can have a mutable version, immutable version and a bflw compat version.



Theres good arguments for all of them, with differing pro’s con’s

---

## 2022-02-17 07:13:47 - general channel

**KG**

They historic data files have been shared with Rob to help with the parser creation, [@UBS7QANF3](@UBS7QANF3) - they're the same files that you can get from the historic data site hosted by the UK. 

---

## 2022-02-17 06:39:51 - general channel

**Mo**

Thanks, I've managed to get it to build. A couple of questions:



1. Are the files used in the benchmark freely available?

2. I'd like to be able to read gzip files containing single markets - i.e. the typical file format that is self recorded. I think you're already aware there is demand for this but wanted to know your timeline on implementing and whether it's worth me having a go as a way to get to grips with the code?

---

## 2022-02-16 12:28:25 - random channel

**liam**

the listener keeps track of it for you so you can do [https://github.com/liampauling/betfair/blob/0dd9c151d58ef1cfa065fa12dccd69e52104bc74/examples/examplestreamingerrhandling.py#L60|this](https://github.com/liampauling/betfair/blob/0dd9c151d58ef1cfa065fa12dccd69e52104bc74/examples/examplestreamingerrhandling.py#L60|this)

---

## 2022-02-16 11:42:43 - random channel

**Chris H**

Is it worth keeping track of `initialClk` and `Clk` to deal with streaming disconnections? Surely it's fine/ not that much work to just reconnect and received a fresh image? or is there something I am missing

---

## 2022-02-16 11:30:09 - issues channel

**Aaron Smith**

Had this when placing lots of orders on a single market_book, chunking them together in a single transaction solved it for me.

---

## 2022-02-16 08:07:38 - general channel

**Oliver Varney**

[https://github.com/liampauling/betfair/blob/0dd9c151d58ef1cfa065fa12dccd69e52104bc74/betfairlightweight/streaming/cache.py#L292](https://github.com/liampauling/betfair/blob/0dd9c151d58ef1cfa065fa12dccd69e52104bc74/betfairlightweight/streaming/cache.py#L292)

---

## 2022-02-16 08:01:25 - general channel

**Oliver Varney**

okay cool cheers mate, appreciate the help :slightly_smiling_face: My understanding and maybe [@U4H19D1D2](@U4H19D1D2) will correct me if im wrong, is that the bflw settings relate to recalculating the total_matched in historical files as betfair send through duff/unreliable data in there own files (i.e. the sum of tvs does not equal runner.total_matched, thus this can be set to recalc in the cache). Although i maybe wrong and what you describe above is the rationale specifically why bflw provides an option

---

## 2022-02-16 06:47:11 - general channel

**Oliver Varney**

[@UUX1L88MC](@UUX1L88MC) this particular file for total_matched sum was a betfair file (from their site). Also setting cumulative_runner_tv=False on the file still seems to throw up some weird numbers. Im assuming like bflw with this setting set to false it doesnt recalc the value and just uses the raw betfair number?

---

## 2022-02-15 11:35:12 - random channel

**Oliver Varney**

ah gotcha, unfortunately I need bflw. Ill play around, not sure how the benchmark is doing 45k message with bflw a second although it is an aussy file.

---

## 2022-02-14 23:09:54 - issues channel

**Aaron Smith**

i never care and let flumine run whatever happens #trustliam

---

## 2022-02-14 17:05:43 - issues channel

**D C**

So basically all you need to make bet placement logic aware so that things don't try to act. Have to say that is a lot cleaner solution than I expected it to be. I've always just killed things and reset when it looks to be resolved.

---

## 2022-02-14 17:04:25 - issues channel

**liam**

You just wait, they close the socket completely on a problem but if 503 is given you just have to wait

---

## 2022-02-14 16:52:55 - issues channel

**liam**

its in bflw, it does nothing [https://github.com/liampauling/betfair/blob/0dd9c151d58ef1cfa065fa12dccd69e52104bc74/betfairlightweight/streaming/listener.py#L218](https://github.com/liampauling/betfair/blob/0dd9c151d58ef1cfa065fa12dccd69e52104bc74/betfairlightweight/streaming/listener.py#L218)

---

## 2022-02-14 16:51:54 - issues channel

**D C**

OK ill see how flumine deals with it.

---

## 2022-02-14 16:51:21 - issues channel

**Paul**

that's with betfairlightweight. flumine just does the right thing, it seems :-)

---

## 2022-02-14 11:30:29 - general channel

**Beeblebrox**

[@UBS7QANF3](@UBS7QANF3), I'm using Betfairviz with recorded data from Flumine and it's displaying the selections with their ids rather than their names.  Is there an option to get it to read the market catalogue as well as the price data so it can display them?

---

## 2022-02-14 10:08:28 - random channel

**Mo**

Can't see how to do it without touching IAM...

---

## 2022-02-13 20:22:54 - issues channel

**Brøndby IF**

```jogos_betfair_exchange_mercados = json.load(open('jogos_betfair_exchange_mercados.json'))

    for jogo_betfair_exchange_mercados in jogos_betfair_exchange_mercados:

        id_market = jogo_betfair_exchange_mercados['IDMercado']```

[@UBS7QANF3](@UBS7QANF3) Thanks again for being willing to help, next, the values are in a `JSON` file, the value of id_market I find in this path, I couldn't understand what I should modify, because I manually write the market, it works.

---

## 2022-02-13 18:10:48 - issues channel

**Brøndby IF**

Hi [@UBS7QANF3](@UBS7QANF3) Thank you very much for your help, I appreciate you making yourself available to help!

---

## 2022-02-12 07:53:14 - random channel

**Mo**

+1 for database table indexing S3 files

---

## 2022-02-12 06:58:20 - general channel

**liam**

Are you filtering by marketIds? Idea with streaming is to use a filter which doesn’t require a resubscribe. It isn’t designed for your current use, the clk’s are for resubscribe when you lose connection and want to reconnect 

---

## 2022-02-11 23:52:40 - general channel

**anomaly**

Hi all, got some confusion about reconnects and market subscriptions.



My main question is If you want to continually get updates for newly added marketbooks, should you re-init the stream.subscribe_to_markets() _without_ including *initial_clk* and *clk*? For example, say the new day has ticked over and new markets exist in the marketcatalogue, how do you ensure that these new markets will be picked up in the stream? My current understanding is that using the *clk args are for only a pre-defined stream, and not for a complete refreshed re-subscription.

Right now I am 1. initialising the stream once in __init__ using self.stream.start in a new thread with daemon=True (as in the examples), then 2. periodically calling stream.subscribe_to_markets() in my runtime loop without initial_cl and clk when the market_catalogue polling code detects new markets. I never .start() that previously created thread ever again.  Is this the best way to go about this?



cheers!

---

## 2022-02-11 23:52:31 - issues channel

**Jonjonjon**

Specifically, it will break this bit of BFLW, though I don't think tests will pick it up:



[https://github.com/liampauling/betfair/blob/f76f60bf887dbbac156a7ed5f7a759b4194ae844/betfairlightweight/endpoints/baseendpoint.py#L58-L67](https://github.com/liampauling/betfair/blob/f76f60bf887dbbac156a7ed5f7a759b4194ae844/betfairlightweight/endpoints/baseendpoint.py#L58-L67)

---

## 2022-02-11 23:40:03 - issues channel

**Jonjonjon**

One thing to be careful of, if doing calculations with numpy, is that if your code returns float64 objects, it can't be converted with json.loads

---

## 2022-02-11 16:07:25 - random channel

**Stefan**

[@UUE6E1LA1](@UUE6E1LA1) any streaming api response has market id, so you can reload market data at any moment of processing streaming api message.  You can take inspiration from my code:



[https://github.com/StefanBelo/Betfair-Tutorials](https://github.com/StefanBelo/Betfair-Tutorials)



When running the code you will get following, and anytime a new football market is added, new market name is reported. When market is in-play it reports current score on football matches. The code is just simple example of using streaming api.



[https://youtu.be/R-TygYsjpxo](https://youtu.be/R-TygYsjpxo)

---

## 2022-02-11 08:01:23 - general channel

**liam**

Extra [https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py|middleware](https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py|middleware) for this so you can store the catalogue

---

## 2022-02-11 05:05:58 - general channel

**J**

I can see the runner names ('name')  in the runners: part of the jso in the historical info but not the flumine recorded data

---

## 2022-02-11 05:03:30 - general channel

**J**

Hi, just wondering if the marketrecorder in flumine doesn't record runner names? Great app btw!

---

## 2022-02-10 19:54:04 - random channel

**liam**

bflw creates a new market cache if img is True or if it doesn’t exist, doesn’t assume img has to be True. Docs aren’t clear 

---

## 2022-02-10 19:50:28 - random channel

**D C**

I know some of you run bots continuously so if you have never had this problem then it must be some junk code in my implementation

---

## 2022-02-10 19:34:53 - random channel

**D C**

I'm looking for a bit of advice in regards to streaming. In trying to move my bots to a "permanent" (instead of run daily) I've started to use coarse filters instead of market ID list with the view to detect "new" markets on the stream, store the initial image then call listMarketCat on it later to fill in the gaps. Trouble is that I have had a couple of new markets come in where the first detection message is not a market image. I assumed that the initial image would have to be the first message. Any ideas of what I can do to get around this? If I have missed the image, I need to do a full resub presumably but I really don't want to do that. How do others get around this issue?

---

## 2022-02-10 19:29:52 - general channel

**Laybot McBackbot**

So yeah, the problem is I have too many  categories for OHE on CPU and other methods like label encoding are not as good so that's why I need a GPU.

---

## 2022-02-10 13:14:15 - random channel

**Unknown**

According to the premium accounts newsletter ([https://betfairlightweight.slack.com/files/UQL0QDEKA/F031J38E0FK/premium_newletter_january_2022.pdf|https://betfairlightweight.slack.com/files/UQL0QDEKA/F031J38E0FK/premium_newletter_january_2022.pdf](https://betfairlightweight.slack.com/files/UQL0QDEKA/F031J38E0FK/premium_newletter_january_2022.pdf|https://betfairlightweight.slack.com/files/UQL0QDEKA/F031J38E0FK/premium_newletter_january_2022.pdf)), if you want access then ask your AM if you have one or BDP otherwise

---

## 2022-02-10 07:09:30 - strategies channel

**Mo**

Relevant? [https://betfairlightweight.slack.com/archives/C4H05KKMY/p1643843408591949|https://betfairlightweight.slack.com/archives/C4H05KKMY/p1643843408591949](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1643843408591949|https://betfairlightweight.slack.com/archives/C4H05KKMY/p1643843408591949)

---

## 2022-02-09 19:39:54 - random channel

**Oliver Varney**

basic question which I should of probably rethought about ages ago, but do people use certs or interactive login. If I understand correctly,  interactive login doesnt require certs and is just password and username. Ive always just used the certs as thats how I originally did it. docs suggest using certs but I couldnt remember if liam or someone said they dont use that approach any more.

---

## 2022-02-09 13:01:07 - strategies channel

**Nacho Uve**

Hi [@U02KWHK2H89](@U02KWHK2H89),



Sorry, no ideas for your questions... I guess you've managed it with the monitoring other O/U goals markets.



But I'm going to struggle with graphs right now, and I like this one.



Are you plotting with matplotlib, right?

Could you share how do you config that nice x-ticks labels?





Thank you.

---

## 2022-02-09 10:20:53 - issues channel

**Jorge**

Yeah, I placed a bet 15 mins ago and it is not appearing in the Order Streaming

---

## 2022-02-08 22:08:23 - general channel

**Dan Q**

[@U4H19D1D2](@U4H19D1D2) Do either Flumine or BFLW have a way to get processed data (ie timestamped best ATB/LTP) out of historical files? I could only find the bits relating to pulling the historical files via the API endpoint

---

## 2022-02-08 16:14:19 - general channel

**Unknown**

Thanks [@UUCD6P13J](@UUCD6P13J) was the problem, in the commented code this FillOrKill.

---

## 2022-02-08 11:38:49 - general channel

**Nacho Uve**

[@UBS7QANF3](@UBS7QANF3) Yes, It was my first idea. Is it resolved that filtering in betfairutil?

---

## 2022-02-08 11:14:59 - general channel

**liam**

no, not without reading the files, flumine does it using this code



```def get_file_md(file_dir: Union[str, tuple], value: str) -&gt; Optional[str]:

    # get value from raw streaming file marketDefinition

    if isinstance(file_dir, tuple):

        file_dir = file_dir[0]

    with open(file_dir, "r") as f:

        first_line = f.readline()

        update = json.loads(first_line)

    if "mc" not in update or not isinstance(update["mc"], list) or not update["mc"]:

        return None

    md = update["mc"][0].get("marketDefinition", {})

    return md.get(value)```

---

## 2022-02-08 11:11:22 - issues channel

**liam**

`BaseFlumine._remove_market` kicks it off and then `markets.markets.remove_market`

---

## 2022-02-08 11:05:10 - general channel

**liam**

[https://liampauling.github.io/flumine/quickstart/#market-filter](https://liampauling.github.io/flumine/quickstart/#market-filter)

---

## 2022-02-08 08:19:47 - random channel

**Michael**

Up at 5 [@ULDAVFDRP](@ULDAVFDRP)? Or should that be "still up at 5"? Anyway; I don't use Flumine, I just record the time that the market first turns in play and count as a false start any suspension within 30 seconds. I just go with the obvious market signals for a close/photo finish.

---

## 2022-02-08 05:18:50 - random channel

**Oliver Varney**

is that a flumine field [@UGV299K6H](@UGV299K6H)?

---

## 2022-02-07 17:40:15 - issues channel

**liam**

Its half way there with bflw now updated, just need to bump the version in flumine [https://github.com/liampauling/betfair/blob/master/HISTORY.rst#2153-2022-01-07](https://github.com/liampauling/betfair/blob/master/HISTORY.rst#2153-2022-01-07)

---

## 2022-02-07 17:39:19 - issues channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) are there plans to update Flumine bet validation to adopt the new £1 minimum stake? I'm assuming that this now applies to all betfair customers?

---

## 2022-02-07 11:38:47 - random channel

**Oliver Varney**

inplay chaps, stupid question incoming (probably overthinking this), is there any logic in the market book that can be used to determine the last market book that can account for both false starts and after market reopenings for close calls? i.e. is there a variable that changes for the point where they close the market when the front horses cross the line.

---

## 2022-02-07 07:32:41 - random channel

**Oliver Varney**

are certain file types associated with different PRO/ADVANCED? Is that what you mean. [@U4H19D1D2](@U4H19D1D2) gave me a helper function that can determine the file type

---

## 2022-02-07 07:19:34 - random channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) what's the bflw version requirement? 2.13.1?

---

## 2022-02-06 10:31:59 - issues channel

**liam**

payment is for the secret bflw functions

---

## 2022-02-05 10:56:43 - strategies channel

**rjj**

Thanks, totally missed that page. Very helpful!

---

## 2022-02-04 13:56:12 - issues channel

**D C**

OK thanks for that. Very helpful indeed.

---

## 2022-02-04 13:51:46 - issues channel

**James T**

If you have a 18 month gap on your CV but have been doing something productive, which you will have been, then I don't see that as a problem at all. 

---

## 2022-02-04 13:42:58 - issues channel

**D C**

But how do you run a company at a profit with no product? Sorry if these are naive questions

---

## 2022-02-04 10:46:01 - general channel

**Lee**

Oh sorry just re read the question

---

## 2022-02-04 09:44:26 - random channel

**Unknown**

Thanks to everyone for coming to the meetup last night, especially @river_shah for being a massive alpha leak. If I'm honest, the level of attendance was disappointing. If you can answer the following poll it will help plan more events in the future

---

## 2022-02-03 08:55:18 - random channel

**Mo**

If it's one match I wouldn't describe it as a change which implies permanence, sounds more like a mistake. My guess would be Betfair had connection problems with their data provider

---

## 2022-02-02 23:59:17 - general channel

**Dan Q**

I could be wrong about the specifics, I just looked at the docstring and I don't think you can pass in seconds to time_in_force, but I know there's a way to do it in BF/BFLW

---

## 2022-02-02 23:57:55 - general channel

**Dan Q**

Yes, there's a time_in_force argument when setting a limit order which can be expressed in seconds or with 'FILL_OR_KILL', which will match the order against currently available funds to the extent that it's possible and immediately dump the rest. There's documentation about it on Betfair.

---

## 2022-02-02 10:04:57 - random channel

**charlie_v**

As we all know we are in a lonely job, and a lot of stuff we cannot share, so a question, do any of you talk to yourself (similar to bouncing ideas of others) to work out a few answers, or am I simply going mad :slightly_smiling_face:

---

## 2022-02-02 08:58:18 - general channel

**Rob**

realistically the answer is probably making a new bflw specific library, that can match the data structure and immutability, Then you can just feed bytes in and it spits out market objects

---

## 2022-02-02 08:54:33 - general channel

**liam**

Yeah I imagine it would still be a lot faster than python. Personally I would prefer to keep the streaming data structure as provided with the definition.



[@UBS7QANF3](@UBS7QANF3) no but happy to add

---

## 2022-02-02 08:39:50 - general channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) Returning MarketBook objects is less of a problem if this library solves the overhead. It would be even less of a problem if you added a `__getitem__` method to `BaseResource`. Is that something you've considered?

---

## 2022-02-02 08:29:57 - general channel

**Rob**

another limitation is that all my dates are just timestamps, as I cant link to the python datetime object and be abi3 stable.

---

## 2022-02-02 08:28:59 - general channel

**Rob**

```runner.total_volume should be total_matched

no marketDefinition?

decimal/float rounding (e.g. 6429.689999999999)

pt / publishTime not present?```

1. yeap happy to rename this

2. all the market definition / runner definition fields are mapped onto the market / runner

3. dont know what I can do about this, I just expose the floats to python - could maybe try and tidy them but probably not worth the computation

4. should be there on market.publish_time



---

## 2022-02-02 08:13:20 - general channel

**Rob**

There is some different behavior tho, bflw creates new values on each update, whereas I update the value in place, and have a copy() method if you want to save an  image (copy) of the market at that time.

This is a subtle but significant end user difference that could trip people up. You could just call copy on each update, but there would be much faster ways of doing this if you wanted to keep the immutable behavior

---

## 2022-02-02 07:55:14 - general channel

**Unknown**

Spits out python objects so see no reason why this can't be used in bflw some way

---

## 2022-02-01 14:54:20 - general channel

**liam**

the python bottleneck is all in the logic required to update and store the order book for `ex`

---

## 2022-02-01 14:11:43 - general channel

**Rob**

(for anybody else that encounters the problem)

---

## 2022-02-01 07:48:16 - issues channel

**Paul**

The last race at Doncaster on Saturday was 15:55 - so your question is quite confusing. But yes, two non-runners in there. Not sure if that helps. :-)

---

## 2022-01-31 23:08:03 - issues channel

**Jonjonjon**

Were there any non-runners on the 19:56 Doncaster Win Market? Apologies for the novice question, but I don't know how to read a race card or understand the results from racing websites.

---

## 2022-01-31 22:19:55 - issues channel

**Jonjonjon**

I had some voided bets today.



I know the market id, and from the Flumine logs the id, customer_order_ref. Which API calls do I need to use to look up it's status? At the moment, I only know about it from my logs.

---

## 2022-01-31 17:12:20 - general channel

**thambie1**

[https://betfairlightweight.slack.com/archives/C4H05KKMY/p1642176260006700](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1642176260006700)

---

## 2022-01-31 14:11:31 - random channel

**Jonjonjon**

In Betfair streaming files, will the first message always be a marketDefinition?

---

## 2022-01-31 13:58:16 - general channel

**Rob**

im having a quick read on how to publish to pypi and I’ll happily share an early version

---

## 2022-01-31 13:46:31 - general channel

**liam**

Locally I get around 5 markets/second (AU win markets) using bflw compared to your ~1.6, very intrigued to see your Rust code if you are getting ~40+.



Tbh I would say file decompression would be out of scope for the library and this is up to the user on a cost/ease of use case

---

## 2022-01-31 13:39:37 - general channel

**thambie1**

Can't speak to bflw, but in my java code base decompression was taking ~20% CPU, so I just started storing the files uncompressed

---

## 2022-01-31 13:33:02 - general channel

**liam**

relative to the streaming logic I doubt it would even register

---

## 2022-01-31 13:08:05 - general channel

**liam**

just seems a shame as we could have worked together and created a rust binding that plugged straight into bflw

---

## 2022-01-31 13:06:44 - general channel

**Rob**

The [http://pyo3.rs|pyo3.rs](http://pyo3.rs|pyo3.rs) rust library is pretty top notch with great documentation and build tools which is what I used to create the library, the code will be open source as soon as happy with what the python api should look like, but I hope to get it finished this week

I didnt mean to tread on anybodies toes here.

---

## 2022-01-31 12:48:08 - general channel

**Rob**

If you were interested in upstreaming some of my rust parsing code into bflw tho, I would be happy to work with you

---

## 2022-01-31 12:46:56 - general channel

**Rob**

Im just not a python dev, I doubt I would be able to contribute much of value

---

## 2022-01-31 09:32:27 - issues channel

**river_shah**

All great points, there are plenty of premium customers here, if someone from Betfair operating out of the UK could engage more here, it would be very helpful

---

## 2022-01-31 09:20:27 - issues channel

**Mo**

Thanks [@U01335QG2G3](@U01335QG2G3) and [@U01B8031PM1](@U01B8031PM1). To be clear, I'm not (just) trying to prove a point here, I am trying to understand if it's reasonable for a customer like myself to be unaware of a planned maintenance window. Is it poor communication on Betfair's part or a failing on my part?



I'm aware that the developer forum exists and that posts are created there about planned maintenance. However, I think we can all agree that aside from the official Betfair communication, the quality of posts on that forum is poor and there is no reason to use that resource other than to receive the official Betfair communication.



Is it too much to expect that one of the several Betfair employees that are members of this Slack also let us know about planned maintenance windows here?



Should Betfair be paying megabucks for consultants to tell them how to grow the exchange before sorting out some basic community engagement? Why don't we have our own [@UUUAJQZ5J](@UUUAJQZ5J)?

---

## 2022-01-31 06:47:02 - issues channel

**KG**

they’re having some issues un-splashing too, hopefully it will be resolved shortly :crossed_fingers:

---

## 2022-01-30 18:12:42 - random channel

**MacrcoPolo**

PyBetCore/PyBetMore for bflw/flumine respectively (I just like things that rhyme...)

---

## 2022-01-29 13:30:36 - random channel

**PeterLe**

there was a company called betcode Limited registered in the UK although it looks like the company has since been dissolved

---

## 2022-01-29 13:30:02 - random channel

**river_shah**

out curiosity, what was the origin of the name `flumine`?

---

## 2022-01-29 09:13:42 - general channel

**birchy**

[@U013ZS16QJZ](@U013ZS16QJZ) well if you're familiar with python, you also have the option to rewrite specific functions in C and then import them into python. But obviously you'd need to profile the code first to find the bottlenecks.

---

## 2022-01-28 21:58:28 - random channel

**liam**

That reminded me of my favourite betfairlightweight issue [https://github.com/liampauling/betfair/issues/210|https://github.com/liampauling/betfair/issues/210](https://github.com/liampauling/betfair/issues/210|https://github.com/liampauling/betfair/issues/210)

---

## 2022-01-28 21:12:55 - random channel

**birchy**

It's always difficult deciding whether to rename/refactor something. The main implications I can see are that there are already a lot of followers using bflw/Flumine and also tutorials on betfair, etc recommending it, so it's potentially breaking. Unless, of course, the intention is to create a resource that includes bflw and Flumine, plus whatever other libraries get added in the future?

---

## 2022-01-28 19:35:17 - general channel

**birchy**

This may help: [https://github.com/captain-igloo/greentop|https://github.com/captain-igloo/greentop](https://github.com/captain-igloo/greentop|https://github.com/captain-igloo/greentop)

---

## 2022-01-28 15:49:12 - random channel

**river_shah**

could the org be called `flumine` / rename this channel to it as well / refactor underlying repos, maybe `bflw` becomes a module in `flumine`

---

## 2022-01-28 14:56:20 - random channel

**Unknown**

Was looking for a spin on Flumine and found this

---

## 2022-01-28 14:49:54 - random channel

**liam**

I guess the question is would you have joined earlier and/or contributed more if the name didn't have betfair in it or was linked to the python library?

---

## 2022-01-28 14:47:30 - random channel

**James T**

I'm sort of with the others. I'm not sure a rebrand will make that much difference? So of the existing options I voted for betlightweight since it's more an evolution of the current name. Completely losing the link to bflw seems a shame. 

---

## 2022-01-28 13:27:54 - random channel

**Atho55**

PyBet makes it sound like a Python only site IMHO

---

## 2022-01-28 12:37:25 - random channel

**liam**

potentially however python is fast becoming the goto for everything, `PyBet` wouldn't stop others being included though

---

## 2022-01-28 12:07:07 - random channel

**Joel Beasley**

Are there likely to be languages other than Python in the future [@U4H19D1D2](@U4H19D1D2)?

---

## 2022-01-28 09:33:17 - random channel

**Unknown**

betfairlightweight rename..

---

## 2022-01-27 17:55:52 - general channel

**Dario Scardina**

Did you find some solution? :slightly_smiling_face: I'm also interested in it... but I've not been able to solve  this problem :disappointed:

---

## 2022-01-27 17:49:11 - general channel

**VT**

I only want to receive updates from one market at a time, so suppose I make the request for market 1.193143509, just back and lay odds, as fast as possible, that's all.



But suppose I want to trade the market, now I will receive back and lay value from market Y, so I would like this stream to send me the values of the new market only and stop searching for the previous values.



The question was how to stop this thread that your code creates, which I copied and pasted above.

---

## 2022-01-27 17:32:01 - general channel

**Peter**

[@U013ZS16QJZ](@U013ZS16QJZ) you're trying to solve a problem, but asking how to implement part of the solution you've come up with. If you share the problem, the experience in this forum may lead you to a better/easier solution.

---

## 2022-01-27 13:28:35 - general channel

**D C**

Is anyone having issues with the GPS stream today? 2 races in and no bets placed and also don't seem to have any data. I have made a new change so probably my fault but thought I would ask the question

---

## 2022-01-26 10:28:28 - issues channel

**D C**

OK that is good to know.  Probably best for me to go through the flumine code to see exactly how it works. What I have works well at present but in scaling up to event types other than horses I do feel I will need a more thoughtful approach so this is all very useful.

---

## 2022-01-26 09:37:34 - issues channel

**foxwood**

You'd be totally snookered trying to do anything like HFT but could be possible if not time critical at all. Personally I think it duplicates the baggage each program has to carry around. Now if bflw ran as an efficient shared service ie almost as part of the os so you just call into one master instance (not COM though which is snail like) ... :rolling_on_the_floor_laughing:

---

## 2022-01-26 09:27:08 - issues channel

**liam**

yeah it creates a lot of problems that need to be solved at a time where you should be focussing on strategies

---

## 2022-01-26 09:03:09 - issues channel

**Unknown**

This is 3 instances of flumine on all racing/greyhound markets running on a t2.micro placing around 20k orders a day

---

## 2022-01-26 08:48:26 - issues channel

**liam**

you use flumine don't you?

---

## 2022-01-26 08:43:17 - issues channel

**liam**

your number one problem is betfair being down, having 100x programs makes this 100x worse, trust me

---

## 2022-01-26 08:33:54 - issues channel

**liam**

Premature optimisation here, the real problem is your plan to run 100x python processes

---

## 2022-01-25 16:40:31 - strategies channel

**Unknown**

Curiouser and curiouser. Restarted PyCharm and closed  1drive. Last 2 lines in attached file keep repeating. The "runners" problem line reported reads `for x in market.market_catalogue.runners::`

---

## 2022-01-25 09:54:44 - strategies channel

**liam**

flumine/bflw trys but tbh I think its betfair side that is the problem

---

## 2022-01-25 08:07:54 - general channel

**Jorge**

No, I mean market_book.status while streaming

---

## 2022-01-24 23:44:36 - issues channel

**AP**

Not sure if this helps you [@U016TGY3676](@U016TGY3676) 



[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1637699269108700|https://betfairlightweight.slack.com/archives/C4H05ML2E/p1637699269108700](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1637699269108700|https://betfairlightweight.slack.com/archives/C4H05ML2E/p1637699269108700)

---

## 2022-01-22 14:30:48 - random channel

**Mick**

"The Stewards requested a report from Shane Crawley, trainer, as to the apparent improvement in form of Kalmira, placed first, as compared with its most recent form. The trainer reported that his charge had disappointed on its previous run when running in very quick succession. He said that his charge was freshened up for tonight's run which was off the back of a 44 day break and felt that this, along with a good break from the stalls had helped to bring about the apparent improvement in form. Having considered the evidence, the Stewards noted the content of the report."

---

## 2022-01-22 13:20:04 - random channel

**gbettle**

No problem

---

## 2022-01-22 12:48:23 - random channel

**gbettle**

In rear, raced wide early, midfield after 1f, pushed along when up the centre over 2f out, headway but edged left from over 1f out, soon close up, ridden when challenging inside final furlong, kept on to lead final 110yds (trainer said, on the improvement in form, the mare was freshened up for the return from a 44 day break and felt that this, along with a good break from the stalls had helped to bring about the apparent improvement) (op 5/1 tchd 11/2)

---

## 2022-01-22 11:22:59 - general channel

**J**

Hi, just wondering how we get horse names in python using betfairlightweight? Sorry for no doubt what's a silly question, but the only place I can find online pointed me here

---

## 2022-01-20 20:20:40 - random channel

**Lee**

I've only really used it from a django / sprint boot backend and used on a react frontend. It is a clunky, but it's a compromise of easy api calls and documentation. 

---

## 2022-01-20 18:43:15 - random channel

**Oliver Varney**

unless im generating it wrong, basically works backwards from how bflw does it

---

## 2022-01-20 13:06:10 - general channel

**James T**

Well 1p at 600 is under the min size limit of £10 min payout isn't it? 2p would be fine?



If you're using BetAngel then it would split the 1p bet into 3 transactions. 



I don't know if Flumine/BFLW has built-in functionality for placing lower than min size bets.



I might be missing something though…

---

## 2022-01-20 10:44:16 - issues channel

**liam**

this is python, joined_lower on var names, event_ids should be working

---

## 2022-01-20 09:51:57 - issues channel

**liam**

`the_event_id` * make lightweight requests if you want the raw data rather than using `_data` however to answer your question I am not sure

---

## 2022-01-20 09:36:26 - issues channel

**Ruben**

could be different markets, I assumed they were the same because the logging control was executed with almost no time difference (1ms) from `baseflumine.py:_process_cleared_market`

---

## 2022-01-20 08:50:04 - general channel

**PeterLe**

Morning, A quick question please (and sorry I should know the answer to this already).

In the following scenario	:



Place a £0.01 lay at 600

Place a £2.00 lay at 600



Would both bets be executed in a single transaction, and in approx the same amount of time? (Ie betids would be close)?



Thanks

---

## 2022-01-20 08:11:27 - issues channel

**Ruben**

I am using one of the example controls from flumine, and noticed that in `_process_cleared_markets`  the profit of a market is `None`, for a market in which `baseflumine.py:_process_cleared_market` has correctly logged the profit just before. Does this mean that `_process_cleared_market` from my control will be executed again later with the correct values?

---

## 2022-01-19 14:59:55 - general channel

**Mo**

[https://github.com/liampauling/flumine/blob/770fcf967dab590cba63350dd2ee46839363f8d1/flumine/utils.py#L113-L123](https://github.com/liampauling/flumine/blob/770fcf967dab590cba63350dd2ee46839363f8d1/flumine/utils.py#L113-L123)

---

## 2022-01-19 14:57:32 - general channel

**VT**

Hi guys, quick question, I'm not a programmer, of course it's something noticeable, I'm a gambler and trader (manual), but I have the feeling that this code is looking too ugly even by my standards.



a = [3, 3.05, 3.10, 3.15, 3.20, 3.25, 3.30]

b = 3.19



def find_tick(a, b):

     le = a[bisect_right(a, b)-1]   # less or equal

     ge = a[bisect_left(a, b)]        # greater or equal

     if abs(round(b-le, 3)) &lt; abs(round(b-ge, 3)):

         tick = le

     else:

         tick = ge

     return tick



The function returns the closest value of Betfair ticks, if the distance is equal to both sides it returns the highest tick. Is there a better way to do it?

---

## 2022-01-19 10:49:27 - strategies channel

**birchy**

Also take a look at the logging controls... [https://github.com/liampauling/flumine/tree/master/examples/controls|https://github.com/liampauling/flumine/tree/master/examples/controls](https://github.com/liampauling/flumine/tree/master/examples/controls|https://github.com/liampauling/flumine/tree/master/examples/controls)

---

## 2022-01-18 20:51:42 - strategies channel

**foxwood**

Great that's where I'll store my stuff then and sounds robust as well - saves having to have a parallel dict of markets. Yes, I'm using PyCharm and it takes a while to catch up with it's hints when its not sure what the variable is. I think your design is very effective and python does suit it even though the language frustrates me at times. Thanks :slightly_smiling_face:

---

## 2022-01-18 08:52:51 - strategies channel

**liam**

Yeah its a handy trigger to update anything you have cached, flumine uses it to trigger a new marketCatalogue request, dramatically cutting down requests

---

## 2022-01-17 10:19:15 - general channel

**Unknown**

hopefully these help [@U010GM77S4W](@U010GM77S4W); convert to BSP bets on greyhound markets lapse if there is a scratching.

---

## 2022-01-16 23:45:47 - random channel

**Aaron Smith**

[@U016TGY3676](@U016TGY3676) surely it wont be truly random, but as long as its deciding factors are independent of anything related to how betfair assigns market_ids, it its effectively random in the eyes of the betfair market_id generator. For example if i take my grandmas birthday and choose to pick all market_ids that have the last 2 digits of her birth year in it, that will have nothing to do with how betfair assigns market_ids (at least so i would hope). However, this would probs not give a 50/50 distribution. Odd/even is not random in the eyes of the betfair market_id generator, as place_market_id = win_market_id + 1 (this may not be a problem really, but its also not perfect). 1's &gt; 0's wouldnt work as mostly market_ids are counting upwards, so you ll have long streaks where there is more 0's and long streaks where there is more 1's. You can throw in sqrt or whatever, but a complication like that doesnt necessarily result in a 50/50. A simple system that is proven to be pseudo-random and guarantees a 50/50 result would surely be nicer.

---

## 2022-01-16 21:08:45 - random channel

**birchy**

Maybe I'm misunderstanding the A/B problem here, but why not loop through the market IDs and do something simple like this?

`if random`.`choice(True, False):

    groupA.append(market_id)

else:

    groupB.append(market_id)`



---

## 2022-01-16 14:06:00 - random channel

**Mo**

Depending on your requirements, nothing. The questions are:



1. What is the computational cost?

2. Does it actually assign a market ID to each group with probability 50%?

---

## 2022-01-16 13:52:07 - random channel

**Aaron Smith**

this discussion goes a little over my head i feel. What would be the problem with something like adding digits and taking it modulo 2 ?

---

## 2022-01-16 10:39:32 - random channel

**Mo**

The question of how to randomly assign market IDs to 2 groups but in a repeatable way is super interesting. I'd like to put a function for this in betfairutil. My first thought was a quasi-RNG like Halton sequence but it's not fast to calculate the n-th element of the sequence (I would use the market ID as n). I found this blog post on low discrepancy sequences: [http://extremelearning.com.au/unreasonable-effectiveness-of-quasirandom-sequences/](http://extremelearning.com.au/unreasonable-effectiveness-of-quasirandom-sequences/) which proposes a new method:



```g = 1.6180339887498948482

a1 = 1.0/g

x[n] = (0.5+a1*n) %1```

---

## 2022-01-15 20:58:17 - issues channel

**Jonjonjon**

My flumine script logs to syslog. I'm using Ubuntu. How can I stop it?

---

## 2022-01-15 13:13:50 - strategies channel

**MacrcoPolo**

(also, dictionary lookup is basically the fastest operation python can do. If you time it, you'll see it's typically on the order of nanos for simple keys and moderately sized dicts - cache miss depending)

---

## 2022-01-14 08:49:54 - issues channel

**Peter**

Betfairlightweight is a wrapper around the Betfair API, so understanding Betfair's many, many idiosyncracities and occasional limitations really helps in getting strategies up and running. Good luck.

---

## 2022-01-14 05:04:19 - issues channel

**Finn**

you can find that biz in the betfair documentation

---

## 2022-01-14 05:01:45 - issues channel

**west**

Okay thanks. I saw a previous question that got this data in market catalogue by adding this `market_projection=["RUNNER_DESCRIPTION","EVENT_TYPE","EVENT","COMPETITION","RUNNER_METADATA","MARKET_START_TIME"].` This worked but where exactly can I find this info? I couldnt seem to find it in the docs or in the source code.

---

## 2022-01-13 11:17:58 - general channel

**rob smith**

Faster than flumine that response Liam!

---

## 2022-01-13 11:15:09 - general channel

**liam**

Better still use streaming instead

---

## 2022-01-13 11:14:07 - general channel

**rob smith**

Hi guys, I am trying to put together a simple script to print current prices for in play matches. The problem I am having is that my script is not getting the current prices, it just keeps printing the same prices over and over. Can anyone see what I've done wrong? Thanks

---

## 2022-01-13 11:08:16 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/770fcf967dab590cba63350dd2ee46839363f8d1/flumine/order/order.py#L457](https://github.com/liampauling/flumine/blob/770fcf967dab590cba63350dd2ee46839363f8d1/flumine/order/order.py#L457)

---

## 2022-01-13 08:57:56 - general channel

**mandelbot**

[@U9JHLMZB4](@U9JHLMZB4) shared a script to help with that [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1639658642449300?thread_ts=1639652085.449000&amp;cid=C4HL6EZTQ](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1639658642449300?thread_ts=1639652085.449000&amp;cid=C4HL6EZTQ)

---

## 2022-01-13 08:27:40 - issues channel

**Ruben**

good morning everyone, for flumine users, is it possible that `process_closed_market` is being called twice once without the cleared orders, and once with the cleared orders? context: I am logging some KPIs after every market closes such as profit/loss, number of bets and the like, and I notice that for every event I generate two logs, and the first one does not have any profit info (due to order.cleared_order objects not being populated)

---

## 2022-01-12 16:41:10 - general channel

**Unknown**

[@U02FXEUUMRN](@U02FXEUUMRN) It depends on what is your execution flow when running your bot strategies. Using streaming api you have got updates to market start time as well, in rest api betfair did not think about that, there is no info about market start time change when querying listMarketBook on already loaded markets.



My code implantation has this method:  GetAssociatedMarkets and as original market id is returned as well, I can synchronize time of already open market, so my code has no such problems even when after initially loaded markets for instance 10 hours ago, had been rescheduled to other start times.

---

## 2022-01-12 12:05:26 - general channel

**Finn**

yeah stefan I totally get you, but the problem is not all data sources agree. Some are lazy at changing times, even the offical horse racing organisations.

---

## 2022-01-12 11:04:14 - general channel

**Stefan**

[@UUUAJQZ5J](@UUUAJQZ5J) works for betfair, so she should know better, I do not think there are any problems in market data entries, they do it semi automatically.

---

## 2022-01-12 11:04:03 - general channel

**Finn**

Thank you for checking. I’m just trying to join data from external sources (for race card info etc) and they often put a different time on the race. Not sure why. Might be an Australian problem? Happens a couple times a week/

---

## 2022-01-11 08:10:29 - random channel

**Jonjonjon**

Suppose I want to run separate WIN and PLACE strategies under one Flumine instance and one market filter. How would you recommend I manage the price filtering? My naive initial thought is to use 'check_market_book'. But is there a cleaner way?

---

## 2022-01-10 22:27:18 - random channel

**Jonjonjon**

Running `netstat -np | grep python | grep ESTABLISHED` gives me 18 lines of output. I've blanked out the IP addresses as I'm not sure if they are safe to share or not. BUt the process numbers are my flumine instances on one machine:



`netstat -np | grep python | grep ESTABLISHED`

`(Not all processes could be identified, non-owned process info`

`will not be shown, you would have to be root to see it all.)`

`tcp 0 0 YYY:46208 XXX ESTABLISHED 21053/python3`

`tcp 0 0 YYY:41776 XXX ESTABLISHED 2144/python3`

`tcp 0 0 YYY:46202 XXX ESTABLISHED 539/python3`

`tcp 0 0 YYY:56134 XXX ESTABLISHED 21053/python3`

`tcp 0 0 YYY:41990 XXX ESTABLISHED 2144/python3`

`tcp 0 0 YYY:45264 XXX ESTABLISHED 546/python3`

`tcp 0 0 YYY:46204 XXX ESTABLISHED 21053/python3`

`tcp 0 0 YYY:58348 XXX ESTABLISHED 2144/python3`

`tcp 0 0 YYY:46206 XXX ESTABLISHED 2144/python3`

`tcp 0 0 YYY:54580 XXX ESTABLISHED 546/python3`

`tcp 0 0 YYY:45262 XXX ESTABLISHED 539/python3`

`tcp 0 0 YYY:46190 XXX ESTABLISHED 2144/python3`

`tcp 0 0 YYY:46188 XXX ESTABLISHED 2144/python3`

`tcp 0 0 YYY:46212 XXX ESTABLISHED 21053/python3`

`tcp 0 0 YYY:58346 XXX ESTABLISHED 21053/python3`

`tcp 0 0 YYY:58350 XXX ESTABLISHED 21053/python3`

`tcp 0 0 YYY:54572 XXX ESTABLISHED 539/python3`

`tcp 0 0 YYY:45268 XXX ESTABLISHED 539/python3`

---

## 2022-01-10 21:46:18 - random channel

**Jonjonjon**

Does one instance of Flumine use 2 connections? I keep hitting the 20 MAX connection limits. I'm wondering if I have a stale processs somewhere as I'm only running 6 instances of Flumine.

---

## 2022-01-10 15:23:35 - issues channel

**Mo**

Any update on the withdrawal problems?

---

## 2022-01-09 20:25:38 - random channel

**Dave**

Seems inappropriate as you turnover your bankroll many times. But maybe that is the way to do it and pnl being many multiples of your bankroll shouldn't sound stupid compared to say "measly" 30% via the sp500!

---

## 2022-01-09 20:20:09 - random channel

**Mo**

What's wrong with the benchmark being investing your starting bankroll in the index?

---

## 2022-01-09 19:18:31 - general channel

**Mo**

Look at the flumine tennisexample.py which uses a BackgroundWorker to access the inplayservice. Same principle applies whether using that or some other feed

---

## 2022-01-09 16:53:20 - random channel

**Jonjonjon**

Suppose I wanted to place 10 orders in quick succession. With each subsequent order placed after the prior has been received by Flumine. Assume I have a fast connection. How long would that take?

---

## 2022-01-09 14:48:06 - random channel

**Mo**

It's a good question. My guess is no as the official scores provider is different to either the main ATP or WTA tours

---

## 2022-01-08 14:01:22 - issues channel

**Aaron Smith**

[@U01B8031PM1](@U01B8031PM1) nice to hear i m not alone, i guess if this hits multiple ppl, chances are this will be resolved more quickly

---

## 2022-01-08 13:59:35 - issues channel

**river_shah**

[@U01DVUAE2G1](@U01DVUAE2G1) I have the exact same problem

---

## 2022-01-08 12:55:16 - issues channel

**Peter**

It's a problem between Betfair and Worldpay, so the transactions are being bounced back before they get to the banks. they hope to have it resolved by Monday.

---

## 2022-01-08 12:33:08 - issues channel

**Aaron Smith**

not impossible, but i doubt it seeing that others are having the same problem at the same time. Also, when trying to redo the withdrawal (i use alternative methods -&gt; bank transfer), i get "No available payment options"), so somehow betfair erased my bank details and i cant seem to find how to add them again

---

## 2022-01-07 16:22:15 - issues channel

**C0rnyFlak3s**

Thanks liam, this really helps :heart:

---

## 2022-01-07 16:20:56 - issues channel

**Unknown**

I only from June and random countries, maybe its helpful

---

## 2022-01-07 14:27:28 - random channel

**Jonjonjon**

Can my Python code automatically create and shutdown the spot instance?

---

## 2022-01-07 14:19:35 - strategies channel

**liam**

flumine uses it to separate running instances per market, it is then used to filter orders so it cannot be used by the user

---

## 2022-01-07 13:52:48 - issues channel

**C0rnyFlak3s**

Is there a way to extract soccer competition information from the historical streaming data from Betfair? As far as I am concerned no information regarding league/competition is directly given by the hist data. The only thing that can be extracted is the team names and time of the game. However I also struggle with extracting competition information when I search for the historic marketIds in the exchange API. It seems as if I can only extract current end future competition information, hence my question if there is any way at all to know which competitions historic soccer games come from. I quite stuck here… :disappointed:

---

## 2022-01-03 13:22:07 - general channel

**VT**

Hi everyone, quick question, does anyone have a script to convert back to lay odds in 2 runner markets (over/under)?

---

## 2022-01-02 14:54:04 - random channel

**Peter**

I'm not understanding why this is a question. They're integers, so unless they are going to be so big as to require big ints, why does the number of digits matter?

---

## 2022-01-02 10:30:41 - issues channel

**Paul**

Already an issue for this at [https://github.com/liampauling/flumine/issues/541|https://github.com/liampauling/flumine/issues/541](https://github.com/liampauling/flumine/issues/541|https://github.com/liampauling/flumine/issues/541) I think

---

## 2022-01-01 18:41:30 - random channel

**mandelbot**

Anyone know of a bflw/flumine for crypto? :smile:

---

## 2022-01-01 09:57:39 - random channel

**Peter**

Although greyhounds are withdrawn on the day of the race, it's fairly rare for them to be withdrawn in the few minutes before the race when the market is active. That usually only happens if there's a problem that couldn't be spotted earlier in the day when they were caged waiting for their run time.

---

## 2021-12-31 22:36:20 - random channel

**Jonjonjon**

I'm not sure about writing stuff to hedge once bets are voided. It's a rare circumstance. Will Flumine catch voided bets?

---

## 2021-12-31 22:04:50 - random channel

**mandelbot**

check out this thread [https://betfairlightweight.slack.com/archives/C4H05ML2E/p1640699979363700](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1640699979363700)



tl;dr there was a nonrunner and all bets are voided when there's a nonrunner for greyhounds, your lay bets must've been placed after the scratch

---

## 2021-12-31 14:27:59 - strategies channel

**birchy**

Ah... [https://github.com/liampauling/flumine/pull/517|https://github.com/liampauling/flumine/pull/517](https://github.com/liampauling/flumine/pull/517|https://github.com/liampauling/flumine/pull/517) :flushed:

---

## 2021-12-31 11:30:03 - random channel

**liam**

Unless you are running multiple instances of flumine? 

---

## 2021-12-31 09:51:23 - random channel

**Jonjonjon**

I just had warning from my cloud provider that my CPU utilisation has been 90% for the last 2 hours. What sort of utilisation do others have for their Flumine machines? I just have a single vcpu and should be able to easily upgrade to 2 vcpus. It will cost around $20 a month.

---

## 2021-12-30 21:54:11 - random channel

**James T**

Yeah, higher absolute monetary stakes, but lower real life stakes like you say. Definitely a first world problem!

---

## 2021-12-30 21:08:39 - random channel

**Michael**

Haha - yeah fully agree [@USYQKE5HN](@USYQKE5HN) except that I don't think I (we?) have more at stake, less so really. At one time I couldn't pay my rent so the roof over my head was at stake. It's not now.



I think it's the opposite really, you don't have space to think about economic melt down when you can't pay the gas bill. Basically I've transitioned from just trying to get by to defending/entrenching my privilege. The latter condition is way less stressful.



Whilst I do think about financial risks I don't want to over state it because I'm basically quite care free. Trying to set your life up such that you never have to work come what may is one of a few first world problems that I think I can endure.

---

## 2021-12-30 20:02:23 - random channel

**Mo**

To be clear, masterworks is not a fund. You buy shares of individual pieces of art. 



They focus on art created since the Second World War as this has historically performed the strongest. 



If you sign up you get access to a database of art sales they have compiled so you can do independent analysis on whether you think the pieces on offer represent a good buy or not. 

---

## 2021-12-30 20:01:20 - random channel

**Michael**

One thing that's happened to me and I'm sure others is that I've started to worry about different sorts of investment risks than I used to. I'm over stressing about market fluctuations, now I think about how to protect myself from global conflict, climate change chaos or runaway inflation.

---

## 2021-12-30 19:24:46 - general channel

**Oliver Varney**

does anyone know the reason why betfair send subsequent market book with the same publish time down to the millisecond (looks like there is a different streaming update)?

---

## 2021-12-30 16:23:23 - strategies channel

**liam**

[https://liampauling.github.io/flumine/quickstart/#listener-kwargs|https://liampauling.github.io/flumine/quickstart/#listener-kwargs](https://liampauling.github.io/flumine/quickstart/#listener-kwargs|https://liampauling.github.io/flumine/quickstart/#listener-kwargs)

---

## 2021-12-30 16:22:33 - strategies channel

**liam**

Bflw/flumine will do this for you 

---

## 2021-12-30 15:40:56 - random channel

**Oliver Varney**

I guess the question is assuming the sandp goes up another 30% next year (which I personally doubt although im clueless), do people expect to increase their bankroll more then that?

---

## 2021-12-30 14:33:44 - issues channel

**birchy**

Top half of this:

[https://github.com/liampauling/flumine/blob/master/examples/backtest.py|https://github.com/liampauling/flumine/blob/master/examples/backtest.py](https://github.com/liampauling/flumine/blob/master/examples/backtest.py|https://github.com/liampauling/flumine/blob/master/examples/backtest.py)

---

## 2021-12-30 13:32:46 - issues channel

**nthypes**

This is what I added:



```market_data_filter=streaming_market_data_filter(fields=["EX_BEST_OFFERS"])```

---

## 2021-12-30 13:16:46 - issues channel

**nthypes**

`EX_BEST_OFFERS` is not working with Flumine?

---

## 2021-12-30 12:46:08 - strategies channel

**Ruben**

From a capacity/workload perspective I think flumine is perfectly suited for that. On the other hand, I know some members of this group will want to have a word about "greening out" a bet

---

## 2021-12-30 12:36:03 - strategies channel

**Shashi Khaya**

Hi all, my particular interest is in tennis markets - predicting outcomes for different levels of the scoring system (I.e. match, sets, games and points) and then opening positions (based on confidence of prediction) and closing them after the predicted event has occurred (E.g. player A wins/loses a point/game/set). I figured as there is rarely liquidity in the dedicated markets for predicting these events, it makes more sense to bet on the match_odds market and then 'green/red out' based on whether the prediction was correct - In this way you could place multiple trades on a single market. From your experience do you think this type of approach could work with Flumine or am I being naïve trying to build something of this sort?

---

## 2021-12-30 12:19:59 - random channel

**Mo**

I'd like to reassure everyone that the bflw meetup will NOT be postponed. Poll coming in the next few days

---

## 2021-12-29 13:57:59 - random channel

**Mo**

Also the conversation starting here: [https://betfairlightweight.slack.com/archives/C4H05KKMY/p1637273019237600](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1637273019237600)

---

## 2021-12-29 13:56:41 - random channel

**Mo**

[https://betfairlightweight.slack.com/archives/C4H05KKMY/p1638797982452500](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1638797982452500)

---

## 2021-12-29 13:18:45 - random channel

**D C**

Got it for Christmas but not started yet. Hoping there is something useful in there but you do need to detatch from his conclusions about profitability. Needs to move his attention to other areas as he focuses only on stuff for which analytics are capable of generating pretty accurate prices. I would sit up and pay more attention if he widened his focus but I suppose sticking to these sports (Football and US sports) helps with his own confirmation bias.

---

## 2021-12-28 21:21:05 - random channel

**PeterLe**

Yes only a tiny sample. No to the second question.

The idea behind this by the way was a POC to generate ideas for a new automation. Ive seen something in the markets thats hard to understand (for me anyway :grinning:) and I wanted to test it manually to frame it etc

I have some free time in January so will work on it, Cheers gents

---

## 2021-12-28 16:24:11 - general channel

**Mo**

Your choice of language or Python implementation is largely irrelevant. It's going to be dominated by networking 

---

## 2021-12-28 13:51:52 - general channel

**S G**

Hi All i tried using multiprocess backtest from flumine docs with jupyter json logging control and the output file orders.json doesnt seem to have all orders.  I see that jupyterloggingcontrol.py is opening file with mode set to "w". Does this mean multiprocess backtest doesnt work with juputer control?

---

## 2021-12-28 07:14:11 - issues channel

**mandelbot**

They do, at least for the AUS stuff. Would flumine get an update for a new starting time if betfair were to change it?

---

## 2021-12-28 06:12:38 - issues channel

**mandelbot**

Sometimes the official start times for events may change (for example AUS racing), does flumine refresh these times?

---

## 2021-12-28 01:36:55 - general channel

**VT**

Aeron, I used as reference a software for Betfair, the GeeksToy, it shows the market in a ladder format. When I send the order through Python, I can see it in the software. The point is that clicking directly on the software ladder would say it's almost 1 second faster. The problem is that in my little application every millisecond matters.

---

## 2021-12-28 00:45:18 - general channel

**Aaron Smith**

That doesnt sound like it has much to do with placeOrders or Python or the run time of your code (at least only very little), but with the time it takes the order to reach betfair, then for betfair to process it and then for betfair to send back a response to you.

---

## 2021-12-26 22:11:00 - issues channel

**Jimmy**

Follow up question on the above LoggingControl — is there any obvious reason why I’d be ending up with duplicates in my db from this code?

---

## 2021-12-26 17:39:01 - random channel

**Oliver Varney**

yup gonna use that for market book differences for sure. I want to batch run some code against like 85k price files, which looks like it will take a fair few hours. Just wondering if the more technical python chaps can find optimisations in the above code to reduce timings

---

## 2021-12-25 19:26:53 - random channel

**Jonjonjon**

Happy Christmas. Thanks to everyone for making BFLW and Flumine so great.

---

## 2021-12-24 10:18:59 - random channel

**liam**

There was a question in the AMA on this 

---

## 2021-12-22 20:24:35 - issues channel

**birchy**

Just as an FYI, I have an account from ~2001 and had to ask Neil to enable streaming.

---

## 2021-12-22 20:05:02 - issues channel

**Mo**

Yeah I think nowadays they activate streaming at the same time as the app key 

---

## 2021-12-22 18:47:23 - random channel

**birchy**

For those of you running Flumine backtests on Apple M1 devices, what's a rough ballpark time to run 5k markets? Currently have an old probook and it's ~15 minutes with multiprocessing on 2 cores (4 threads).

---

## 2021-12-22 15:30:14 - issues channel

**foxwood**

Possible expected behaviour, but, as a flumine noob, been exploring with marketRecorder and found that the data file saved (the one with all the mcm blocks and deltas etc) is seen by Json viewers as badly formed. Had to edit the file, inserting commas between the mcm blocks and wrapping the whole thing in {"all":[ mcm_blocks ]} to be able to view it "nicely".

---

## 2021-12-22 09:47:36 - general channel

**Techno**

Thanks [@U4H19D1D2](@U4H19D1D2) Really helpful!

---

## 2021-12-21 12:25:08 - general channel

**Techno**

Thanks I'll look into it. Silly question, but do they handle CSV files?

---

## 2021-12-21 07:47:34 - strategies channel

**Ruben**

the use of transactions seems to be helping quite a bit! :slightly_smiling_face:

---

## 2021-12-20 23:06:18 - issues channel

**birchy**

Is the limit only 200 nowadays? I started off with 1000 but have been using the Betfair API since the beginning, so maybe the limits have been changed recently...

---

## 2021-12-20 20:30:30 - issues channel

**Martin Chambers**

Working now [@UBS7QANF3](@UBS7QANF3). Appreciate the help.

---

## 2021-12-20 20:21:51 - issues channel

**Ruben**

from what I have seen so far, on my end the value is correctly stored as 0.88. The thing is that the order.remaining_size (which I don't control) is 0.879999, and this is what flumine checks

---

## 2021-12-20 20:12:59 - general channel

**Peter**

Just to note too, there is no "keep" persistence. It's a little confusing as Betfair use keep in the documentation and on the website, but the actual persistence type is "PERSIST". However if you use that you won't get the BSP, as it's purpose is to keep the bet running beyond the point at which the BSP auction is concluded.

---

## 2021-12-19 21:32:08 - general channel

**Unknown**

This might help [@U01DVUAE2G1](@U01DVUAE2G1)

---

## 2021-12-19 19:01:26 - strategies channel

**Aaron Smith**

no, it still counts per order/cancel/etc. (the transaction in flumine is a different concept than the one in the transaction limit)

---

## 2021-12-19 19:01:14 - strategies channel

**Aaron Smith**

check [https://github.com/liampauling/flumine/blob/master/flumine/execution/transaction.py](https://github.com/liampauling/flumine/blob/master/flumine/execution/transaction.py)

---

## 2021-12-19 18:58:23 - strategies channel

**Aaron Smith**

[@U011VL3CA2Y](@U011VL3CA2Y) i am using the same instance running multiple strategies on it with no problems (lately), however placing that many orders is costly

---

## 2021-12-19 18:09:17 - general channel

**Aaron Smith**

i checked out both of those files, but i am still confused :smile: In events.event.py i cant really find what calling event.event would give me for each event and in flumine.py i can see what happens when an event occurs, but i dont see what causes the event to occur (for example when would a clearedMarketsEvent be put into the handler.que ? There is a decent chance my confusion is a result of me overlooking something obvious :smile:

---

## 2021-12-19 18:03:25 - general channel

**liam**

Check out flumine/flumine.py for the logic, events/events.py for all events, best way to find its use is to right click in pycharm and find usages 

---

## 2021-12-19 16:42:28 - general channel

**Aaron Smith**

I am struggling to work with events in flumine. Where can i find what exactly hides behind each event and when exactly they are triggered? For example when `EVENT_TYPE = EventType.CLOSE_MARKET` , the event seemingly is a marketBook (but without manually checking it could ve been a market object aswell?). Also when are markets being cleared, triggering the cleared_markets event? Thanks for any pointer/help

---

## 2021-12-19 06:58:59 - issues channel

**Peter**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py)

---

## 2021-12-19 06:58:54 - issues channel

**Peter**

Yes. Streaming via Betfairlightweight is done over port 443, the standard https port. That port will also be used when you log in to Betfair, confirming that it is available to you in Essex :wink:

---

## 2021-12-18 21:14:51 - issues channel

**Bradley**

I is based in Essex, UK. I can surf the internet from my computer and can log into Betfair. Does this streaming technology use a port other than 80?

---

## 2021-12-17 21:46:43 - general channel

**Mo**

Yeah I want to cut back on my database usage

---

## 2021-12-16 21:53:25 - issues channel

**Jonjonjon**

Thanks guys. I was using `filters.market_filter`, not `filters.streaming_market_filter:man-facepalming::skin-tone-6:`

---

## 2021-12-16 21:52:38 - issues channel

**Newbie99**

```market_filter=streaming_market_filter(

                    event_type_ids=[7],

                    country_codes=['AU','NZ'],

                    market_types=['PLACE'],

                ),```

---

## 2021-12-15 19:08:58 - strategies channel

**Mo**

Each match traded as a separate Python process. Config file read on start up

---

## 2021-12-15 18:44:18 - strategies channel

**birchy**

When running Flumine strategies 24/7, I generally use a hard coded dict to store signal parameters, e.g:

`self.params = {

    'min_book': 102,

    'max_risk': 20, etc...

}`

This means that when I decide to tweak some value, I have to edit the source code and then restart the bot. In the past (pre Flumine), I've put the parameters dict in a plain text `.json` file and then dynamically load on market initiation:

 `with open(filepath) as f:

    self.params = json.load(f)`

This obviously allowed me to update parameters without stopping the bot. Is this kind of dynamic loading something that others do? Is there a nicer way to achieve this? Nowadays, I rarely change parameters once a bot is running, so not even sure if it's necessary...

---

## 2021-12-15 14:26:18 - issues channel

**Mo**

bflw defaults to looking for the credentials in your .bashprofile

---

## 2021-12-15 14:18:44 - issues channel

**Ruben**

Looking at the S3MarketRecorder from the flumine repo, I can't seem to find where are credentials/keys passed to the class for it to authenticate. I see that you can pass the bucket name to it as part of the context though, but no credentials. What am I missing?

---

## 2021-12-15 09:15:00 - general channel

**Peter C**

It's cool to see a bit behind the curtain and hear about the work you're doing on flumine

---

## 2021-12-14 10:52:38 - general channel

**Oliver Varney**

Someone will correct me if I am wrong but for the historical streaming, I dont think you need to have that set up (no account details, certs and stuff are required).

---

## 2021-12-14 10:47:26 - general channel

**Oliver Varney**

So i think your original question, which is probably the best starting point is to try to get the historical file streaming working. To do this you need to have either previously recorded files or downloaded the files off betfair (free or paid versions). Once downloaded, modify/use as a basis the code in [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py) , changing the file path to your recorded file path. Id advise setting breakpoint in your IDE and looking what the resources (data) contains. Stuff like graphing, there will be hundreds of tutorials on youtube that will be a much better resource for learning.

---

## 2021-12-14 10:42:02 - general channel

**Techno**

So an example is a program which uses Betfairlightweight?

---

## 2021-12-14 10:41:18 - general channel

**Techno**

I know the python basics, but that is all.

---

## 2021-12-14 10:39:51 - general channel

**Techno**

Sorry for the basic questions.

---

## 2021-12-14 10:37:37 - general channel

**Techno**

I'm have very limited knowledge of Python.

---

## 2021-12-14 10:31:00 - general channel

**Techno**

OK. So when run this in Python:

---

## 2021-12-13 14:53:14 - general channel

**liam**

:thumbsup: POC PR [https://github.com/liampauling/flumine/pull/539|here](https://github.com/liampauling/flumine/pull/539|here), also added a sort method to better replicate the matching engine based on side/price/order

---

## 2021-12-13 12:01:18 - general channel

**liam**

I am thinking option 2 becomes the default (more accurate as option 1 is what flumine currently does) and a flag for option 3 when you went to test potential impact on multiple strategies running at the same time etc. but welcome thoughts on this as its confusing

---

## 2021-12-13 11:59:43 - general channel

**Unknown**

Flumine smart matching, when backtesting multiple strategies what would be the expected behaviour for passive orders:

---

## 2021-12-12 12:55:28 - general channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) suggested setting interactive login = True, which should emulate the website style login and _doesn't_ need SSL certs.

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/apiclient.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/apiclient.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/apiclient.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/apiclient.py)

---

## 2021-12-12 06:58:48 - general channel

**Mo**

By default bflw will look in the /certs directory for your certificate and private key files. If you want to change this then edit the line where you construct the APIClient

---

## 2021-12-11 23:08:23 - strategies channel

**ShaunW**

No problems there [@U011VL3CA2Y](@U011VL3CA2Y). As long as you're making some sort of effort to generate commission you're golden.

---

## 2021-12-11 23:07:48 - strategies channel

**Oliver Varney**

Only base profit on small stakes with flumine

---

## 2021-12-11 14:46:09 - random channel

**Oliver Varney**

Problem with the Intel cpus is efficiency. Apple is one generation ahead in terms of processing node. Kinda feed up of doing simple tasks and battery being at zero too fast

---

## 2021-12-11 14:12:53 - general channel

**birchy**

[@U02P76UDUPK](@U02P76UDUPK) I'd recommend getting the Flumine marketrecorder example running first as it's a useful exercise to get login working and saving market data will benefit you for backtesting and analysis at a later date.

---

## 2021-12-11 09:07:52 - general channel

**Martin Chambers**

Ok, thanks [@UBS7QANF3](@UBS7QANF3).  Do you have an example of logging in through Flumine?  I am not using certificates at the moment.

---

## 2021-12-11 08:35:34 - general channel

**Mo**

Flumine will handle logging in for you

---

## 2021-12-11 08:16:19 - general channel

**Martin Chambers**

Can you advise what I do for login in that script? Appreciate the help.

---

## 2021-12-11 08:15:13 - general channel

**Martin Chambers**

Thanks [@U4H19D1D2](@U4H19D1D2) have had more of a look.  Can log in ok with bflw, but not having much joy with the flumine example as per:

[https://github.com/liampauling/flumine/blob/master/examples/example.py](https://github.com/liampauling/flumine/blob/master/examples/example.py)

---

## 2021-12-11 06:28:28 - general channel

**liam**

Recommend the examples, bflw first to get to grips with some of the endpoints and then flumine

---

## 2021-12-10 18:28:23 - general channel

**C0rnyFlak3s**

I am currently stuck at a nasty point. I want to extract goal times from O/U markets, and this all works great. However I now have the problem for goals which are scored in the second half time, that I don’t know when the second half time really started. Since games have different break lengths it is hard to extract the exact half time break from the data. What would be the most reliable market to extract the length of the half time break?

---

## 2021-12-09 17:19:46 - general channel

**Lee**

Not tested but something like this might get you started. If you have a lot of orders then wrap in a transaction to batch them.

```for market in flumine.markets:

    if market.market_book.status == "OPEN":

        for order in market.blotter:

            if order.status == OrderStatus.EXECUTABLE:

                market.cancel_order(order)```

---

## 2021-12-09 14:40:56 - general channel

**Lee**

probably depends on how you're terminating flumine, if you're using a worker to terminate i'd do it in there

---

## 2021-12-09 12:48:14 - general channel

**liam**

[https://stackoverflow.com/questions/2998215/if-python-is-interpreted-what-are-pyc-files/2998544](https://stackoverflow.com/questions/2998215/if-python-is-interpreted-what-are-pyc-files/2998544)

---

## 2021-12-08 23:22:45 - general channel

**Steve**

Thanks for the replies. It seems like maybe I misunderstood. A better question would have been what are .pyc files for in the in flumine module?

---

## 2021-12-08 17:59:21 - general channel

**NC**

Hi guys, first post. Just soaking up as much knowledge as I can get at the mo, this looks like a great resource! Has anyone implemented an RL bot using python? Or know of a good resource or place to discuss this approach?

---

## 2021-12-07 20:56:00 - general channel

**Beeblebrox**

[https://github.com/liampauling/flumine/blob/0737461323da409990d3108a158092487506aa7f/flumine/execution/transaction.py#L12](https://github.com/liampauling/flumine/blob/0737461323da409990d3108a158092487506aa7f/flumine/execution/transaction.py#L12)

---

## 2021-12-07 20:51:42 - general channel

**birchy**

In Flumine, if we wanted bets on multiple runners to be executed at the same time, does the following send each bet individually?

[https://github.com/liampauling/flumine/blob/bdd46e21b4015779bdccc30bbd5c0f1f86c90d79/examples/strategies/priceblockage.py#L73](https://github.com/liampauling/flumine/blob/bdd46e21b4015779bdccc30bbd5c0f1f86c90d79/examples/strategies/priceblockage.py#L73)

---

## 2021-12-07 15:38:03 - general channel

**Jeff Waters**

I can get their selection id's no problem, but I haven't managed to find a way of getting selection names.

---

## 2021-12-07 15:35:08 - general channel

**Jeff Waters**

Hi [@U4H19D1D2](@U4H19D1D2). I don't know. Do I need to import them, and if so how do I do that?



If you're referring to the MarketCatalogue class, I have that, as Pycharm is fine with this import:



from betfairlightweight.resources import MarketCatalogue

---

## 2021-12-07 15:30:54 - general channel

**Jeff Waters**

Thanks [@UUCD6P13J](@UUCD6P13J).



I'm assuming it does, as line 48 in [https://github.com/JeffW12345/runbacktests-python-file/blob/main/runbacktests.py](https://github.com/JeffW12345/runbacktests-python-file/blob/main/runbacktests.py) uses the same reference, and works fine.



However, I've just tried creating an explicit reference to the folder - MARKET_CATALOGUE_PATH = "C:\\Users\\User\\Desktop\\bet-project\\PRO" - and I'm still having the same issue.

---

## 2021-12-07 15:20:12 - general channel

**Jeff Waters**

Thanks [@UUCD6P13J](@UUCD6P13J)



The middleware code should be fine, as I literally just copied and pasted the code that Liam provided in this thread:



```import json

import os



from betfairlightweight.resources import MarketCatalogue

from flumine.markets.middleware import Middleware



MARKET_CATALOGUE_PATH = "PRO"  # update to correct path





# Will read and parse the market_catalogue file and add to the market object when backtesting

# Usage framework.add_middleware(MarketCatalogueMiddleware())

class MarketCatalogueMiddleware(Middleware):

    def add_market(self, market) -&gt; None:

        catalogue_file_path = os.path.join(MARKET_CATALOGUE_PATH, market.market_id)

        if os.path.exists(catalogue_file_path):

            with open(catalogue_file_path, "r") as r:

                data = r.read()

                catalogue_json_data = json.loads(data)

                market.market_catalogue = MarketCatalogue(**catalogue_json_data)```



---

## 2021-12-07 08:09:35 - issues channel

**liam**

[@UFTBRB3F1](@UFTBRB3F1) unless there is a persistent problem and/or flumine is restarted the code will continue to try and get a response, code [https://github.com/liampauling/flumine/blob/bdd46e21b4015779bdccc30bbd5c0f1f86c90d79/flumine/worker.py#L182|here](https://github.com/liampauling/flumine/blob/bdd46e21b4015779bdccc30bbd5c0f1f86c90d79/flumine/worker.py#L182|here)

---

## 2021-12-07 07:34:36 - general channel

**river_shah**

[https://stackoverflow.com/questions/2998215/if-python-is-interpreted-what-are-pyc-files/2998544](https://stackoverflow.com/questions/2998215/if-python-is-interpreted-what-are-pyc-files/2998544)

---

## 2021-12-07 07:30:02 - general channel

**liam**

No cython in flumine 

---

## 2021-12-06 21:52:41 - random channel

**James T**

If I were on Python I probably would be using flumine though!

---

## 2021-12-06 21:52:08 - random channel

**James T**

I don't actually use flumine myself. I have my own platform written in C#. 

---

## 2021-12-06 21:51:07 - random channel

**Aaron Smith**

[@USYQKE5HN](@USYQKE5HN) using flumine and it stopped you from placing more bets over transaction limit?

---

## 2021-12-06 21:00:52 - random channel

**C0rnyFlak3s**

I was wondering which approach you guys use, to extract goal scored information from the market streams. Do you check how to correct score market reacts or do you extract the information from the over/under markets?

---

## 2021-12-06 20:57:46 - strategies channel

**liam**

But do it properly by looping the strategies and updating by name rather than using the private var



`for s in flumine.strategies:`

---

## 2021-12-06 16:28:56 - general channel

**Ruben**

is the parameter `streaming_timeout`  what one should use to have process_market_book() executed even if no updates have been received?

---

## 2021-12-06 13:06:52 - general channel

**Unknown**

For what it's worth, here's a small batch file that gets you the daily files.



NB: It uses python's -m wget

---

## 2021-12-06 11:34:54 - general channel

**Mo**

To be clear this is a limitation of the *Betfair API*

---

## 2021-12-06 11:20:49 - general channel

**Ruben**

sure, no problem

---

## 2021-12-06 11:19:24 - general channel

**Ruben**

with flumine, is it possible to subscribe to events of a certain competition only? e.g. premier league soccer events only

---

## 2021-12-06 10:02:31 - general channel

**ThomasJ**

What do you mean by an "engineering problem"?

---

## 2021-12-06 09:42:01 - general channel

**ThomasJ**

[@UBS7QANF3](@UBS7QANF3) May I please be allowed to be borderline rude (or is this Q quite offensive?) by asking...

 So you said "The benefits of machine learning I'm much more sceptical about"

So if not machine learning...whereupon do you cast your gaze?

---

## 2021-12-05 22:50:31 - random channel

**KG**

I can help in Aus, not so much UK sorry gang! :confused: gotta love merch though :ok_hand:

---

## 2021-12-05 22:43:02 - general channel

**thambie1**

Fundamental approaches are overwhelmingly machine learning based. But the simplest forms of machine learning pretty much look like simple statistics

---

## 2021-12-05 22:40:01 - general channel

**Mo**

The benefits of machine learning I'm much more sceptical about

---

## 2021-12-05 22:39:46 - general channel

**Mo**

R, Python, Stan, JAGS, all inoffensive

---

## 2021-12-05 15:58:01 - random channel

**Mo**

I can't speak too much to the design of flumine but as I understand it you'll need to run two instances to get the benefit of the two vCPUs, it's not enough to run two strategies in one instance

---

## 2021-12-05 15:54:48 - random channel

**Aaron Smith**

from "sort of" can i deduce that i dont have to worry about it? would it make any difference if i had for example 1 flumine instance running 4 strategies or 2 flumine instances running 2 strategies each in terms of how efficient the cpu is used?

---

## 2021-12-05 15:48:45 - random channel

**Aaron Smith**

Hi ppl, today i ll hit you with some (potentially dumb) tech-noob questions.

Suppose i have 2 vCPUs. Am i right in the assumption that this is somewhat simular to having 2 cores? If so, does that mean python would only use one vCPU? If i had 2 different instances of flumine running, would it automatically allocate those to the 2 different vCPUs?

---

## 2021-12-05 11:50:18 - general channel

**Mo**

It's one of the most basic properties of how to price up markets in running so no it's not possible and it's hardly secret sauce

---

## 2021-12-05 11:37:39 - general channel

**Jeff Waters**

Thanks guys.



I must admit that soon after I posted my question, I was tempted to delete it, as it occurred to me that the answer to my question was self-evidently 'yes'.



A more interesting question is whether it's possible to profit from the fact that goals aren't distributed uniformly or if the market takes that into account, but I know that's not something that anyone is going to reveal! :slightly_smiling_face:

---

## 2021-12-04 21:08:52 - general channel

**Jeff Waters**

Random stats question.



Let's say a football team has a goal expectancy of 1 for a match. Assuming for the sake of simplicity that there is no added extra time and that they aren't more likely to score in one part of the match than another, does it follow that their goal expectancy per minute is 1/90 and their goal expectancy for the first half is 0.5?

---

## 2021-12-04 20:40:07 - general channel

**Jeff Waters**

Hi [@U4H19D1D2](@U4H19D1D2)



I've added the middleware file that you posted.



I then added the following test print code to see if I understood how to use the functionality correctly:



```import marketcatalogue as mc





def output_results(framework):

    # [Deleted]

    for market in framework.markets:

        # [Deleted]

        catalogue = mc.MarketCatalogueMiddleware()

        catalogue.add_market(market)

        for runner in market.market_catalogue.runners:

            print(runner.runner_name)```

I'm not having any joy, however. Where am I going wrong, please?

---

## 2021-12-04 16:59:12 - general channel

**Jeff Waters**

Hi [@U016TGY3676](@U016TGY3676)



I'm actually trying to work this out too, so I can include runner names in my backtesting output.



I'd thought that maybe they would be stored in a dictionary with the selection_id's as the keys, but I've had no joy so far.



Any help would be much appreciated.



Cheers



Jeff

---

## 2021-12-03 11:55:16 - random channel

**liam**

agreed but I would hire someone who has some real work experience in data/programming/problem solving when compared to a tutorial zombie regardless of the domain, finding the former is very difficult

---

## 2021-12-02 09:42:09 - strategies channel

**AndyL**

Must say it's never as good getting advice online as it is face to face, so hoping to get to the next meetup, and ill buy all you guys who have helped me on this journey a pint!

---

## 2021-12-02 08:34:49 - general channel

**ThomasJ**

hahaha well as a relative newcomer to Python it's been very difficult but very rewarding as it has taught me a hell of a lot.



In this instance I was trying to work out why a back order placed 3 mins before the off got matched but the exact same order placed 10 secs before the off did not. And the answer is of course position in queue which is approx. calculated in this method.

---

## 2021-12-01 09:56:13 - random channel

**D C**

I don't use bflw but I assume that it has support for listClearedOrders (what I use). If not and if it would be useful to you I can give you the script

---

## 2021-12-01 08:14:51 - random channel

**Michael**

I'd have to say that my experience with HP workstations has been quite different. One of the reasons that I like them is that they're so well put together and I've never had problems with cooling even if I max them out for hours at a time, the quality of the cases is way beyond normal consumer equipment and I've never had a problem with a power supply, fan or anything like that. I should stress that I'm talking about high end used hardware though, the sort of things that come out of professional video studios or labs, so they're made to be reliable.

---

## 2021-12-01 07:57:28 - issues channel

**liam**

Hmm, do you have lots of orders in the market and you are restarting flumine numerous times?

---

## 2021-11-30 22:52:06 - random channel

**Jonjonjon**

I'm not sure it would be that economical.



I paid about £600 for a Dell T7500 with dual X5675 Xeons a few years ago. That's 12 physical cores.



A year ago, I paid £1,600 for a PC with an AMD 3950X CPU. That's 16 physical cores.



Using [https://www.cpubenchmark.net/cpu.php?cpu=Intel+Xeon+X5675+@+3.07GHz&amp;id=1309&amp;cpuCount=2|passmark](https://www.cpubenchmark.net/cpu.php?cpu=Intel+Xeon+X5675+@+3.07GHz&amp;id=1309&amp;cpuCount=2|passmark) as a crude measure.... The X5675 has 11,616



The 3950x has 39,170.



So I paid 19.36 per passmark on the old Dell.

24.48 per passmark on the more modern machine. Passmark is a crude benchmark. But in terms of running Flumine backtesting on multiple cores, the modern machine is 2.5-3 times faster. So both machines had comparable bang per buck.



However, the older Dell runs into heating issues and I can't run it for a long time before it thermal throttles. It's a tangle of cables in there, so I'm not confident of repasting the CPU.

---

## 2021-11-30 21:37:20 - issues channel

**Tom**

If i wanted to minimise the `get_order_from_bet_id`  impact would i just have to write a custom _`_process_current_orders`_  function and replace this bit?[https://github.com/liampauling/flumine/blob/545ae68f20fc44b6a5d5abeb7c11a22380363498/flumine/order/process.py#L59](https://github.com/liampauling/flumine/blob/545ae68f20fc44b6a5d5abeb7c11a22380363498/flumine/order/process.py#L59)

---

## 2021-11-30 20:45:59 - issues channel

**liam**

Top one is from bflw itself and second is from flumine, the fact you have the top one means it’s either network or CPU as opposed to something blocking in flumine 

---

## 2021-11-29 11:00:00 - general channel

**KG**

All NSW thoroughbred and harness markets unfortunately, plus NRL, so safe to say 10% MBRs, though there is a track table that breaks down to a state level that I can share if that helps.

---

## 2021-11-28 13:03:28 - general channel

**D C**

Was thinking about this but surely there are some problems with this method? If you are placing bet on receipt of the market inplay flag in 2 different locations there will be possible variations as to when that is received so you could already lag on the placement side. Also, are you using the placeOrders respnse or the stream to set the arrival time (I get inconsistency with which one of those arrives first)? Could you possibly run order stream in 2 locations and simply compare arrival times of each bet ID off the stream as that way you take the API-NG and interaction with the price stream inplay flag receipt differences?

---

## 2021-11-27 16:52:04 - issues channel

**D C**

Don't use flumine so can't say for sure but when I  used to get this message it was because of multiple consecutive reconnection/connection attempts without any throttling.

---

## 2021-11-27 13:25:18 - general channel

**Mo**

No there isn't but streaming is cheap. Filter locally. Subscribe using the available filters then use `check_market_book` to ignore any market whose start time is greater than 60 minutes in the future

---

## 2021-11-27 10:10:13 - general channel

**D C**

Yes good point about Betfair going down. We have Virgin and it drops out a few times a month. Not the best but I don't green anymore either so its less of a problem than it used to be.

---

## 2021-11-26 19:04:17 - issues channel

**C0rnyFlak3s**

Any idea what the problem may be? [@U4H19D1D2](@U4H19D1D2)

---

## 2021-11-26 17:59:16 - issues channel

**birchy**

And then I discovered Flumine. Been downhill ever since. :joy:

---

## 2021-11-26 16:59:37 - issues channel

**Lee**

Have you tried logging using bflw and making any api call?

---

## 2021-11-26 16:46:44 - general channel

**ShaunW**

Same here [@UQL0QDEKA](@UQL0QDEKA) but I'm not seeing a consistent difference. In fact some days it's the opposite. For the record I'm not a Flumine guy so maybe that helps to narrow down or eliminate any likely cause.

---

## 2021-11-26 16:05:17 - issues channel

**C0rnyFlak3s**

Apparently in order to be recognized as either a Market file or an Event file the naming of given file, has to match the usual betfair naming convention. This helped me getting my merged file being recognized as event file, however it still doesn’t give me the concurrent updates for both markets, but only a sequential update

---

## 2021-11-26 16:00:46 - issues channel

**C0rnyFlak3s**

Weirdly flumine does not recognize the new file as either Market file nor event file, but it runs with both ‘event_processing’ True and False.

---

## 2021-11-26 15:41:44 - issues channel

**liam**

Flumine sorts the order 

---

## 2021-11-26 14:57:35 - issues channel

**C0rnyFlak3s**

alright I get it now. Thanks this was very helpful.

---

## 2021-11-26 14:46:15 - issues channel

**C0rnyFlak3s**

Alright, deleting the event file from the data folder, yielded desired result. However one more problem remains. having the ‘event_processing’ set to True in the market_filter, doesn’t yield any marketBook updates. Why could that be?

---

## 2021-11-26 14:39:32 - issues channel

**liam**

yeah this is a limitation, flumine will read the first md it finds, so this all falls down if you have an event file

---

## 2021-11-26 14:34:37 - issues channel

**Unknown**

Here is a minimal example. Flumine version 1.20.7 used

---

## 2021-11-26 14:30:38 - issues channel

**liam**

what flumine version?

---

## 2021-11-26 14:13:09 - general channel

**birchy**

Many professional poker players are bankrolled, so it's the same sort of format but obviously there would need to be confirmed success in order to get investors interested.

---

## 2021-11-26 13:33:25 - general channel

**Michael**

As you increase your stakes your edge must diminish because you have to accept a worse price. That's what makes scaling such a wicked problem.

---

## 2021-11-26 11:44:32 - issues channel

**liam**

[https://github.com/liampauling/flumine/blob/545ae68f20fc44b6a5d5abeb7c11a22380363498/flumine/markets/blotter.py#L31](https://github.com/liampauling/flumine/blob/545ae68f20fc44b6a5d5abeb7c11a22380363498/flumine/markets/blotter.py#L31)

---

## 2021-11-25 14:30:09 - general channel

**James T**

Capital just isn’t a problem if you even have a vague chance of an edge. 



But at 25% profit, on top of presumably paying 40% PC, means the trader takes home 15% of their gross winnings, and then presumably has to pay income tax on top because it becomes part of a job. 



Can’t see how you’ll attract anyone who stands a chance for you? And that’s not even talking about reaching a scale that creates a substantial business. 

---

## 2021-11-24 20:58:00 - general channel

**mon mon**

I'm using bz2 files from BF's PRO set - I had a look and they're single zipped (or bzipped), and the code has the patch section that  [https://betfairlightweight.slack.com/team/U01LD279D16|Peter C](https://betfairlightweight.slack.com/team/U01LD279D16|Peter C) mentioned - I'm using the backtest_multi.py (here [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1637689688427200?thread_ts=1637615931.411600&amp;cid=C4HL6EZTQ](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1637689688427200?thread_ts=1637615931.411600&amp;cid=C4HL6EZTQ))

---

## 2021-11-24 19:08:23 - general channel

**birchy**

[@U9JHLMZB4](@U9JHLMZB4) has nailed this. I had the same problem when using the old marketrecorder. The zip files are archives that contain the file. I ended up running a python script to unzip the files and then re-save as .gz format. There's probably a nicer way of doing it though...

---

## 2021-11-24 16:42:07 - general channel

**Peter**

On the original question from [@U02J5GMLJF6](@U02J5GMLJF6), I have had this problem too. On one occasion it proved to be because my gzip files were double gzipped, i.e. unzip them and the result was still a gzip. But that's not the only reason this occurs. I'm still looking for a solution myself or some of the files affected by this issue. Irritatingly, if I download a new version from S3, it sometimes works, once, then starts failing again, making me wonder whether the files are somehow not being closed properly at the end of the streaming.

---

## 2021-11-24 10:42:11 - random channel

**liam**

you read the [https://github.com/liampauling/flumine/blob/6216bcc233326cf07852fca9c7d39a18cee265ad/flumine/execution/transaction.py#L12|code](https://github.com/liampauling/flumine/blob/6216bcc233326cf07852fca9c7d39a18cee265ad/flumine/execution/transaction.py#L12|code) comments?

---

## 2021-11-24 10:37:16 - random channel

**Jonjonjon**

I'm trying to understand the Flumine codebase better... What the benefits of wrapping the orders into the Transaction objects?

---

## 2021-11-22 21:28:59 - issues channel

**AP**

This is the script I am using to kick it off if it helps

---

## 2021-11-22 21:18:51 - general channel

**Amit Patel**

ok will do! really appreciate the help :slightly_smiling_face:

---

## 2021-11-22 21:18:06 - general channel

**liam**

Jupyter won’t help things 

---

## 2021-11-22 21:17:29 - general channel

**liam**

[https://liampauling.github.io/flumine/quickstart/#listener-kwargs|https://liampauling.github.io/flumine/quickstart/#listener-kwargs](https://liampauling.github.io/flumine/quickstart/#listener-kwargs|https://liampauling.github.io/flumine/quickstart/#listener-kwargs)

---

## 2021-11-22 21:13:03 - general channel

**Amit Patel**

thanks for the swift reply! I have quad core but not sure if its using them all, running in jupyter notebook, anything I need to configure? also what the hell is a listener_kwarg? sorry for the noob questions

---

## 2021-11-21 20:32:05 - random channel

**Jonjonjon**

I haven't touched the code on that in several months. And don't really have the tools to answer the rest of the questions... :disappointed:

---

## 2021-11-21 20:21:17 - random channel

**Jonjonjon**

Sorry to hear that? How are you planning on adjusting? I'm going to scale back my stuff massively. The problem is that I have lots of legacy bots that I leave running in the background (this is one of them), and I can't remember a lot of stuff about it.

---

## 2021-11-21 09:45:11 - general channel

**captainonionhead**

:thumbsup: Me too!

Having only just got properly started doing this, I'm rapidly learning how many barriers to entry there are.  Having flumine as a place to start removes an enormous one, for which I'm extremely grateful, thanks!

---

## 2021-11-21 09:38:02 - general channel

**Ruben**

flumine to the rescue, I love it

---

## 2021-11-21 09:33:50 - general channel

**liam**

The latter, flumine has a control for this 

---

## 2021-11-20 09:44:12 - general channel

**ThomasJ**

[@USYQKE5HN](@USYQKE5HN) You said "And maybe I’m moving the market too which the backtest also does reflect." Are you saying Flumine backtest is able to move the market?

---

## 2021-11-20 09:27:49 - general channel

**James T**

I’ve mentioned before that I do have strategies where my closing bet does seem to be +EV for some reason. Not only that, in a way, it’s dependent on my opening bet because I’m staking based on what my opening position is (I haven’t actually tried working out how to stake without that opening bet). In the chart below opening is blue, closing is orange. 

---

## 2021-11-20 07:05:40 - general channel

**Mo**

To be clear, the comment I quoted was a comment that [@U4H19D1D2](@U4H19D1D2) has previously made. My personal view is that generally - but not always - you want to avoid greening up because it will lead to lower overall profits. So my advice is not "never green" but simply that you fully understand the implications and then decide what is the best approach for your personal circumstances. This includes having the humility to question whether you do _fully_ understand the implications

---

## 2021-11-20 06:53:25 - general channel

**Mo**

Counter argument is that it reduces volatility which can be good for growing your bankroll when you first start out

---

## 2021-11-20 02:13:56 - general channel

**Unknown**

"But isn't roundtrip the entire problem / focus when it comes to HFT?"



Yeah I think so on some level. But there was some question as to whether you should differentiate your trades between once they've completed a roundtrip, vs. "they look good according to my current valuations."



You could frame it with categories like "my roundtrip profit",  "size of my net exposure" , and "my valuation of my net exposure."



Or you could say that you don't care about the part of the profit that's actually completed a roundtrip, and only look at "my valuation of all my trades marked to now (aka total PNL)" and the "size of my net exposure".



"valuation of all my trades marked to now" is something like "roundtrip profit + valuation of my net exposure now" so they're sooort of the same thing. But my friend was suggesting focusing on "roundtrip profits (aka closed PNL)" is a mistake, it's like misparameterizing the problem, and might make you make mistakes. So instead he'd just have it summed with marking your current exposures, as your "total PNL" and use that.



Hopefully that makes it more clear/interesting! But yeah, maybe you guys are more focused on finding the right horses, while he is only focused on playing markets well without having a long term opinion.

---

## 2021-11-19 23:20:18 - general channel

**Sam Asin**

Ah sorry, maybe there are too many jargony words I use when discussing with my friends.



I guess the real question would be about how you evaluate the success/failure of given trades. I.e. If you backed a horse at 2.4 odds, but right before the event starts, the price has shifted to 2.8 odds, but then the horse wins, what sorts of things do you look at to gauge whether you thought the trade was good.



I didn't know what "greening up" means ironically, but it looks like closing out positions/hedging.



I guess for me I was thinking about when you're making/active in a market where you don't have an opinion, but maybe that's not your style.

---

## 2021-11-19 20:36:50 - general channel

**C0rnyFlak3s**

One other question, sharing data (for private use only) is probably not allowed by betfair’s terms of service, is it?

---

## 2021-11-19 20:30:32 - general channel

**C0rnyFlak3s**

Has anyone experience with purchasing the streaming data (PRO) off of betfair for 230$/month (soccer)? Is the data noisy or clean and more importantly is it worth the $ to get let’s say 2 years of data for backtesting strategies? On which data do you guys test your strategies? Self-monitored data via streaming API or purchased data from betfair or somewhere else? :slightly_smiling_face:

---

## 2021-11-19 09:10:41 - general channel

**liam**

```I had a long discussion about this with an HFT friend today and ultimately I don't think it really makes a big difference```

But isn't roundtrip the entire problem / focus when it comes to HFT?

---

## 2021-11-16 14:23:15 - random channel

**Jonjonjon**

Only th Bitfinex python api at the moment. Have not looked at it in 6 months though. Too focused on Betfair!:grinning:

---

## 2021-11-16 09:51:11 - random channel

**Jonjonjon**

Will BFLW ever use the asyncio library? Or will  the simplicity of single threaded execution be preferred?

---

## 2021-11-16 07:09:00 - general channel

**mandelbot**

[@U013ZS16QJZ](@U013ZS16QJZ) +1 what Paul said. I'm a novice programmer and had no python skills coming into Flumine yet I've managed to port all my strategies from Bet Angel to Flumine. Not as daunting as you think to get started as [@U4H19D1D2](@U4H19D1D2) has made things pretty simple. People on this slack are very helpful and have answered on many occasions my stupid/basic questions.

---

## 2021-11-16 06:45:54 - general channel

**ThomasJ**

[@U013ZS16QJZ](@U013ZS16QJZ) Please don't do what you say you're going to do. It will be well worth your while at the and there are many experts here to help. Just ask detailed and precise questions. People here love to help. Anyway think about it for a few days.

---

## 2021-11-16 06:41:10 - general channel

**VT**

Thanks [@UBS7QANF3](@UBS7QANF3), but this code is really hard to understand for those who just arrived, it will take me many hours to understand it, maybe days, weeks. All these external functions and imports, as our [@U01U24AG35W](@U01U24AG35W) said this is a lot of work when we don't have extensive documentation. It's not a matter of laziness. I'll probably give up on Flumine before I even get started, I'll stick with the most basic lightwheith options.

---

## 2021-11-16 04:35:40 - general channel

**ThomasJ**

[@U013ZS16QJZ](@U013ZS16QJZ) If you know some Python then that's a huge help.



Rather than start off with an objective in mind how about starting off with one of the examples. Any one will do. Work your way thru it thoroughly over weeks. Yes weeks or months.



There is no fulsome documentation as it would take a huge amount of time to create for a free product. And then there's the maintenance.



I did this, it was a hell of a grind. Took several/more? months. At the end of the day I am comfortable with Flumine and Betfairlightweight without being an expert. I can use things out of the box and I can make changes/hacks to core code to get what I want. Shhhh don't tell Liam :slightly_smiling_face:



I don't think there is any other way that will be of true use in the long run.

---

## 2021-11-15 22:05:02 - random channel

**D C**

Thanks Mo. Going forward it is not a problem for me but for quite a while I was polling listCurrentOrders before finally implementing order stream - hence the question to try and slightly improve the accuracy of the timestamps I have historically.

---

## 2021-11-15 21:30:17 - issues channel

**C0rnyFlak3s**

oh wow I just figured the problem. I was using a start date which was 1 day prior to where my free data started. this start date didn’t cause any problem with the other calls and filtering and everything worked fine, however with the download list request there must be some parsing problem on the betfair backend, since I change the start date to a date within the free data range it now works

---

## 2021-11-15 21:23:10 - issues channel

**Mo**

And why aren’t you using betfairlightweight?

---

## 2021-11-15 16:58:45 - random channel

**Mo**

I don't know but did you see this thread? [https://betfairlightweight.slack.com/archives/C02J4CBA0H5/p1634896059330300](https://betfairlightweight.slack.com/archives/C02J4CBA0H5/p1634896059330300)

---

## 2021-11-15 09:47:43 - general channel

**liam**

custom, betfair api is very specific although the streaming/listener design suits most

---

## 2021-11-15 08:14:57 - general channel

**liam**

You can use a background worker and then a custom event or utilise the streaming infra

---

## 2021-11-14 14:29:34 - general channel

**Finn**

If I want to bring in data from another source through a socket into flumine, can I use a background worker? Do I need to extend some of the streaming infrastructure instead? Mo once mentioned extending StreamListener, BaseStream and BaseResource for adding GPS data, I’m looking to do something similar I think. Couldn’t afford GPS though haha

---

## 2021-11-13 18:02:49 - betfair-news channel

**V**

When will the next AMA be? I think the format is pretty good here… the questions and answers were pretty insightful imo 

---

## 2021-11-13 13:19:26 - general channel

**Jono**

qq in flumine is there a way to snap /make process_market_book run on a market if there hasnt been a market_book published after a certain amount of time? Something along the lines of: last recorded market_book timestamp &gt; 60 seconds ago there for force run of process_market_book. Cheers

---

## 2021-11-12 20:36:16 - general channel

**Aaron Smith**

while i can not provide the technical details that Derek can, maybe a conformation by liam can provide a feeling of security that you can add workers with no trouble :smile: jump to: [https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1633775745333200](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1633775745333200)

---

## 2021-11-12 19:41:54 - issues channel

**Beeblebrox**

No problem. Been there done that! :joy:

---

## 2021-11-12 12:40:29 - general channel

**Newbie99**

Just in case it helps, this is what I started writing (got side-tracked, so haven't actually started using this yet, but you should be able to adapt):



```def check_and_create_json(file_path, json_input):

    file_exists = os.path.exists(file_path)

    if file_exists is not True:

        with open(file_path, 'w', encoding='utf8') as outfile:

            json.dump(json_input, outfile, sort_keys=True, indent=4, ensure_ascii=False, default=str)



    def _process_cleared_orders_meta(self, event):



        orders = event.event



        if len(orders) &gt; 0:

            market_id = orders[0].market_id

            file_path = market_closed_report_path + '/' + str(market_id) + '_order_data.txt'



            check_and_create_json(file_path, [format_betfair_order(order) for order in orders])```

---

## 2021-11-12 12:31:50 - general channel

**mandelbot**

Im running from flumine strategies folder but no CSVs there...

---

## 2021-11-12 12:04:43 - general channel

**mandelbot**

so in order to add this to a framework it's just:

```from flumine.controls.loggingcontrols import backtestloggingcontrol



control = backtestloggingcontrol()



framework.add_logging_control(control)```

?

---

## 2021-11-12 11:58:04 - general channel

**liam**

this is a good base [https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2021-11-11 16:28:12 - general channel

**Peter C**

I've been running a couple of horse racing strategies on flumine for a few months now, and been working hard on refining them. In the last couple of weeks I feel like I've hit a bit of a wall - I can't make my strategies any better, and I'm struggling to look at horse racing through a different lens - I struggle to not use the tools I have already developed or approach the problem in the same way. I'm in a bit of a rut and wondering if anyone else has any advice for kicking myself out of it? I'm feeling frustrated because the last few months I've been motivated by seeing my returns increase, but now I've peaked.

---

## 2021-11-11 15:54:19 - strategies channel

**liam**

Liquidity is the problem, doubt anyone would say US is better than UK in terms of pnl

---

## 2021-11-11 11:30:57 - issues channel

**captainonionhead**

I can't see anything in the accounts API documentation :confused:

---

## 2021-11-11 10:55:27 - issues channel

**captainonionhead**

flumine: 1.20.8

betfairlightweight: 2.15.0

---

## 2021-11-11 10:45:54 - issues channel

**liam**

what version of flumine are you using?

---

## 2021-11-11 10:25:03 - issues channel

**liam**

yeah streaming still works even if the session expires

---

## 2021-11-11 10:19:24 - issues channel

**liam**

flumine will keep the session active via the worker

---

## 2021-11-11 09:18:51 - general channel

**ThomasJ**

No I'm a relative newbie to Python. OK that's great to hear. Thx.

---

## 2021-11-11 06:33:19 - general channel

**liam**

`from flumine.utils import get_runner_book`

---

## 2021-11-09 20:46:24 - general channel

**Newbie99**

There are ways around that...if you're placing bets then [@U4H19D1D2](@U4H19D1D2) may be able to help you out.



As for your REST script, I think I might have some code for you, one sec...

---

## 2021-11-09 20:41:54 - general channel

**VT**

I only use the REST API for now, I'm learning everything, I'm a trader who works for years in football markets, but only manually through GeeksToy software.



Is the streaming functionality only available to those who have an account with the correct 'vip' token? Last time I researched it cost a few hundred pounds.

---

## 2021-11-09 19:50:44 - general channel

**Newbie99**

Are you streaming [@U013ZS16QJZ](@U013ZS16QJZ) or using the REST API?

---

## 2021-11-09 19:44:55 - general channel

**VT**

Thanks, I'm not using Flumine, just using betfairlightweight to connect the API, I need to study the codes.

---

## 2021-11-09 13:47:54 - issues channel

**Oliver Varney**

lol quite funny as I got sent a survey/ questionnaire from betfair this morning and these were the kind of questions they had on them. something like "have you been effected by markets not turning in play" and how do you feel

---

## 2021-11-09 11:14:44 - strategies channel

**V**

Anyone have any strong opinions (and willing to share!) around the various overround removal methods? Noticed that [https://cran.r-project.org/web/packages/implied/vignettes/introduction.html|https://cran.r-project.org/web/packages/implied/vignettes/introduction.html](https://cran.r-project.org/web/packages/implied/vignettes/introduction.html|https://cran.r-project.org/web/packages/implied/vignettes/introduction.html) has a new addition, using Jensen-Shannon distance. Shin seems like a go-to choice, partly because [@UBS7QANF3](@UBS7QANF3) has a Python implementation [https://github.com/mberk/shin|https://github.com/mberk/shin](https://github.com/mberk/shin|https://github.com/mberk/shin) ;)

---

## 2021-11-08 22:02:59 - general channel

**Ke**

Anyone knows how to get the ranking of the racing. In greyhound, it looks the Ranking is stored as part of event name in Win market, but the name seems to be empty in flumine.

---

## 2021-11-07 20:03:02 - issues channel

**Jimmy**

Hello. Still getting to grips with python and wondered if anyone one could help?



```datetime,marketid,selectionid,back,lay,selection_matched```

---

## 2021-11-07 09:21:03 - general channel

**Ruben**

Good morning everyone, in Flumine, is there any place in which I can store a variable and still have it available even after the stream re-starts? Context: I am trying to store the currency exchange rate to convert my bets into GBP. I have already created a worker to poll the endpoint, but I noticed that in case the stream is restarted the market.context (which is where I am currently storing the rate) gets cleaned. Ideally, I would find a place to store the exchange rate which will not get deleted/cleaned.

---

## 2021-11-06 20:27:28 - general channel

**Lee**

Setting a breakpoint and inspect the objects will be helpful to find what you need

---

## 2021-11-06 20:24:43 - general channel

**Jeff Waters**

On another matter, is there any way of checking if a market is in-play when backtesting in Flumine? I've tried looking for something like market.is_in_play or finding the actual off time so I can check if the current time is after then, but I've had no joy.

---

## 2021-11-06 19:45:22 - general channel

**Jeff Waters**

I have a 'for' loop which goes through the orders in my blotter for backtesting with Flumine - _for order in market.blotter._



I had been under the impression that _order.order_type.price_ was the requested price for the order in question, and _order.average_price_matched_ was the average price matched. However, there are instances for back bets where the requested price is higher than the average price matched. I don't understand that. Surely a back bet's average price matched for an order cannot be lower than the requested price?



I'm probably missing something obvious. Can anyone help please?



Thanks



Jeff

---

## 2021-11-06 15:30:11 - general channel

**Lewis**

Hi all,

Apologies if this is a stupid question, but is the customerRef field in the placeOrders function the same thing as the customerOrderRef that is seen elsewhere in the both the API-NG and the exchange stream api?

And so if I place an order with a customerRef set should I expect to see the rfo field in order changes messages in the exchange stream being populated with whatever I set it to?

---

## 2021-11-05 23:42:11 - strategies channel

**Adrian**

[@U4H19D1D2](@U4H19D1D2) thanks for this awesome work! just what i needed. now just have to figure out how to analyse it

---

## 2021-11-05 13:34:02 - general channel

**Ruben**

[@U01PNBCPSKT](@U01PNBCPSKT) its from the betfair documentation webpage, the section about the market data filter

---

## 2021-11-05 10:36:25 - strategies channel

**Adrian**

make it as light as you want. i'm not here to steal anyone's ideas, just want to learn how to do the analysis

---

## 2021-11-05 10:31:52 - strategies channel

**liam**

if you want I can go through this in a jupyter notebook if you think it would be helpful?

---

## 2021-11-05 10:12:50 - strategies channel

**liam**

my first question would be is that actually a positive signal, if no can it be adjusted to be positive

---

## 2021-11-05 09:22:18 - strategies channel

**Adrian**

I'm really at my whit's end here. I have all these strategies that of course don't work straight out of the box but I have no idea how to improve them. Just tweaking the parameters and backtesting is a crapshoot. Analysing the backtest results and tweaking off that is a crapshoot. Everything is a crapshoot and the only way i can think to discover anything useful before I throw my fucking computer out the window is to pour over the historical  data using some kind of software or program other than flumine/bflw.

---

## 2021-11-04 17:16:16 - general channel

**C0rnyFlak3s**

Thanks for replying to the question and giving this advice, however it lacks the answer to the question what would happen in the case I just stream data without placing bets. Would the account be terminated, the API access blocked for a limited amount of time or will nothing happen at all? Is there any source on this issue?

---

## 2021-11-04 11:32:47 - general channel

**liam**

flumine does it to calculate simulated matching via middleware

---

## 2021-11-04 11:28:26 - general channel

**Mr West**

Quick question guys, I know how much has been traded on a selection but is there a way to find out if it’s a back or lay trade?

---

## 2021-11-03 16:53:48 - strategies channel

**Peter**

Just to fill in some extra detail in case it's helpful ... For GB dogs, they will always be listed in order from 1-6 for win and place markets, so the order trap will match sort priority order, though if there's an empty trap sort priorities may only go up to 5 (or even 4). Selections in the forecast market will also always be in the same order and have the same selection_ids in every race e.g. 1-2 will always have selection_id 41419585. Note that the ids aren't contiguous, there are some gaps, even when all traps are in use. Note too that when backtesting you don't have to go back too far to find a different set of selection_ids, though the older ones were also used for every race at that time. When a trap is empty, the selection_ids combining that trap with each of the others may still appear in the forecast market data but with status "REMOVED".

---

## 2021-11-03 16:31:03 - strategies channel

**Aaron Smith**

[@U9JHLMZB4](@U9JHLMZB4) i checked for GB/IR dogs, and while sortPrio equals the leading digit of his name most of the times, i do find occasional cases where they dont match. I m not yet sure how to match by selection_id. If i want to place an order on the FC market, i would first have to know what that selection actually is, for which i would need to know the runners represented by the number-tuple given in the fc_selection name. For this i seemingly can not check sortPrio as they are unreliable and names i can only see in the market_catalogue. I could make a dictionary from the market_catalogue where i take the leading digit from the runners name (is this always equal to its race card number? or is there a better way to get this number?) and assign it to the runners selection_id. But then i need to be able to trust that this is not going to change, as i wouldnt see that in my market_book update.

---

## 2021-11-03 16:00:35 - strategies channel

**Aaron Smith**

[@U9JHLMZB4](@U9JHLMZB4) Not really, any horse/hound market really, thought i d have a look at those markets. yes/no i assume is regarding the 2nd question? First one i assume its the number from the name rather than the sortPrio? Also, if they change, how would i be able to notice that, as neither names nor sortPrio are given with a market_book  i think?

---

## 2021-11-03 15:33:44 - strategies channel

**Peter**

[@U01DVUAE2G1](@U01DVUAE2G1) I think that's sometimes yes/ sometime no kind of a question. Do you have a specific event type and country in mind?

---

## 2021-11-03 08:01:48 - issues channel

**liam**

bflw version?

---

## 2021-11-03 07:54:05 - general channel

**Alex Morton**

`price_filter = betfairlightweight.filters.price_projection(`

    `price_data=['EX_BEST_OFFERS']`

`)`

---

## 2021-11-02 11:12:35 - general channel

**Aaron Smith**

with his finger hovering the enter button you know he just pushed an update to flumine and his face tells you that he is now waiting for the disasters to happen for the flumine users while he sips his tea

---

## 2021-11-02 11:09:47 - general channel

**Aaron Smith**

looking at that picture i feel a lot less confident using bflw/flumine and blindly trusting that liam did a good job :smile:

---

## 2021-11-02 10:18:41 - general channel

**ThomasJ**

There's a lot of code in BFLW and Flumine associated with the "clk" data in the stream which I have not looked at in detail as I presume it is about catching up with missed data during a disconnection and then used by the reconnect code to "catch up". Does that about sum it up or do I need to look at it in more detail to be a top notch BFLW and Flumine user?

---

## 2021-11-02 08:14:18 - general channel

**Alex Morton**

`price_filter = `betfairlightweight`.filters.price_projection(`

    `price_data=['EX_BEST_OFFERS']`

`)`

---

## 2021-11-02 08:01:51 - general channel

**Alex Morton**

[https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/) I used this tutorial. The code I used was pretty much copied directly from the from “Get Market Books” section on this page.

---

## 2021-11-02 06:48:19 - general channel

**Alex Morton**

Hi, I’m trying to print out the best back/lay size and price for a particular race. The problem I’m running into is it seems to have a minimum size of about $18 AUD (which is 10 GBP). I can see what its doing is if theres not at least size 10 for for the best price it will go to the next best price on the ladder and add the sizes for each price until it hits 10 GBP. I would like to remove this 10 GBP limit thing so I can just see the best price regardless of the size. Right now I’m just using the tutorial code to print out runner books. If anyone knows why this happens and how to stop it please let me know. Thanks in advance.

---

## 2021-11-01 21:01:48 - strategies channel

**thambie1**

I'd suggest contacting support just to make sure. I'm telling what I've heard second hand about how to do it

---

## 2021-11-01 20:59:47 - strategies channel

**Ruben**

thanks for the help :slightly_smiling_face:

---

## 2021-11-01 20:31:40 - strategies channel

**thambie1**

I use a different currency than GBP as well. All streaming market data is in GBP, but streaming order data is in your currency. So when you are trying to remove your liquidity from the market book, you will need to do currency conversions. It sucks :cry:

---

## 2021-11-01 19:12:08 - strategies channel

**Ruben**

this is probably a very stupid question, but I notice that when I place a back bet, it appears on the marketbook as available to lay with a smaller size than what I placed, why? some liability computation on the background? e.g. back of size 10 becomes available to lay with size 8.5

---

## 2021-11-01 13:36:01 - random channel

**Mick**

I am wanting this early pace measure to help determine how much significance to place on the gaps between the horses at the finish. So a win by X lengths in a normal jog-then-sprint race should be seen as more impressive than a win by X lengths in a fast-all-the-way race.

---

## 2021-10-31 18:15:48 - strategies channel

**Ruben**

is it possible that flumine is already doing this removal of orders? I'm trying to do a controlled experiment on a market that isnt moving and I'm not seeing an order that I placed through the api as available, even though I can see it on the web version of the exchange

---

## 2021-10-31 17:58:57 - general channel

**Oliver Varney**

There is a snap function in flumine

---

## 2021-10-31 09:53:42 - issues channel

**Dave**

Maybe bflw ought to have a these constants built in :eyes:

---

## 2021-10-30 12:16:17 - betfair-news channel

**Michael**

Well this went well. I was wondering if we might get an influx of new posters from one of the other forums (like the one where they don't believe in value and can't afford pies) asking questions about PC and why they got banned when they totally can afford their losses (which are just a temporary blip) but either that didn't happen or there was frantic behind the scenes moderating so kudos to all involved.

---

## 2021-10-29 21:21:00 - general channel

**Oliver Varney**

I spoke to at least one BA user last night. He was a nice guy and was  looking to get into python and bflw, so the post was worth while :+1:

---

## 2021-10-29 10:56:39 - general channel

**ThomasJ**

In *back testing* I am trying to get some values from EX (runner) at market close. However Betfair, in the *2nd last stream*, send an "mc" that contains all vols == 0 and so BFLW makes all EXs == [].



I've been lurking about here for some months and don't recall this being mentioned, but of course I could be wrong. So this leads me to conclude I am not understanding something about collecting EX data at market close.

---

## 2021-10-29 10:38:44 - issues channel

**mandelbot**

Is this a problem with the market itself or how I'm recording them?

---

## 2021-10-29 10:33:10 - issues channel

**liam**

Same problem with that market, starts suspended and then goes straight inplay

---

## 2021-10-28 15:53:58 - random channel

**Daniel**

Thanks [@UFTBRB3F1](@UFTBRB3F1). The site has had a few major changes in the last few months and one of these was the addition of the API. The front end back side now looks more like a sportsbook but with exchange functionality. The API documentation is available if you wanted to review.

---

## 2021-10-28 12:49:15 - general channel

**EJono**

Thank you very much guys all the solutions are incredibly helpful

---

## 2021-10-28 12:17:47 - general channel

**EJono**

Really that's incredible, do you think this could be taken advantage of? Say for instance start up flumine deliberately delay the full connection of streamed markets for a minute or two then begin adding connections.

---

## 2021-10-28 11:20:24 - general channel

**Peter**

I have 1000 too and so divide my soccer streaming into two groups determined by country code. The first has GB, DE, ES, IT and FR and the second has everything else.

---

## 2021-10-28 10:23:10 - random channel

**Amanda**

Bookmakers want you to lose, they’re conmen, they’re coming along to find out how to get more money for their company. 

---

## 2021-10-27 15:31:08 - betfair-news channel

**Neil T (Betfair)**

Hi [@UFTBRB3F1](@UFTBRB3F1) - the ops teams a very aware of the problems this can cause and do already have manual checks in place to help maintain consistency.  The vast majority of these issues are the result of differences in the naming conventions used across third-party feeds; many of which are used for automated market creation.  Such inconsistencies are typically corrected at our side with reference to our internal list of id's but some do still slip through the net.

---

## 2021-10-27 13:20:20 - random channel

**Oliver Varney**

I guess one question in my mind is that are you just going to give too much information away for little volume that might signal your making moves in the WIN market also

---

## 2021-10-26 21:29:30 - general channel

**Mo**

Perfect question for [#C02J4CBA0H5|betfair-news](#C02J4CBA0H5|betfair-news) 

---

## 2021-10-26 13:15:56 - random channel

**Paul**

“Yes minister, the French have done this, but look at all the progress on problem gambling that would be reversed if we did the same”. End of discussion for a decade. IMO, natch.

---

## 2021-10-26 13:14:12 - betfair-news channel

**Newbie99**

Are there any plans to improve data harmonisation across markets? Not a massive problem for horse racing, but sometimes the runner names on other sports can mismatch (e.g. Man Utd. or Manchester United or Man United and so on). Would there be any possibility of looking at a solution to standardise naming conventions at least for the more frequent runners?

---

## 2021-10-26 12:00:58 - betfair-news channel

**George**

Thanks. There's no doubt that cross-matching is a fine idea. The problem is the way that it has been implemented.

In the example given, if the Back Player A bet at 1.32 was 'converted' (e.g. within the matching engine) into a Lay Player B bet at 4.1 then Betfair doesn't need to stand in the middle as a counterparty, and there's absolutely no rounding done at all. I can't think of anything simpler than that?

No manipulation possible in that scenario whatsoever.

No need for Betfair to stand in the middle as a counterparty.

This is how cross matching (or rather "implied liquidity") is done on every financial exchange.

---

## 2021-10-25 11:02:22 - random channel

**Oliver Varney**

Is that a database that is visualising that or something else?

---

## 2021-10-25 10:58:12 - random channel

**Unknown**

[@ULDAVFDRP](@ULDAVFDRP) No I dont think TPD are at Wexford - [https://betfairlightweight.slack.com/files/UQL0QDEKA/F019FC7CUSE/tpd_faqs.pdf](https://betfairlightweight.slack.com/files/UQL0QDEKA/F019FC7CUSE/tpd_faqs.pdf)

Ive just re played that race and you can see in image 1 (a couple of seconds before) and image 2 the point Filon touched 1.01

I layed the wrong one in that race :grinning:

---

## 2021-10-25 10:13:21 - general channel

**Aaron Smith**

I was referring to the previous question, so only talking about IP and took 1 second as an example, maybe i should ve been more clear about that.

---

## 2021-10-24 20:09:16 - strategies channel

**MacrcoPolo**

The files are human readable, you should be able to get hints by looking at the messages with 'marketDefinition' in them. I'd go direct to the answer here for you, but it's a moment to teach you how to understand what's going on :slightly_smiling_face:

---

## 2021-10-24 20:07:41 - strategies channel

**Amit Patel**

works using the file PRO-1.170258213 in the github repo so likely as you mentioned, still would love an answer for the question above though if anyone knows!



Appreciate all the help :)

---

## 2021-10-24 20:00:40 - strategies channel

**Amit Patel**

good question, not sure how to verify



just to check, when running backtesting, should I run all files for a day or can I run single files?

---

## 2021-10-24 06:34:34 - general channel

**Adrian**

What's the most Flumine way to track a specific bet? Let's say I place 3 bets with order id's 1, 2 and 3. I only want to place a fourth bet if order id 2 is fully matched? Only thing i can think of is store the order id's in a custom class.

TIA!

---

## 2021-10-23 10:51:03 - strategies channel

**Adrian**

Ok that makes sense. Thank you for your help!

---

## 2021-10-22 12:51:01 - general channel

**PeterLe**

[@U02KDRHR8AC](@U02KDRHR8AC) I (like many!) had issues getting this set up initially..I made a note in the issues channel which may help a little

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1590763027445700](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1590763027445700)

Dont forget; if you have two set set up you need to make provisions for that too

---

## 2021-10-22 11:36:36 - betfair-news channel

**thambie1**

If there were mass adoption of CFD it would increase incentives to manipulate market prices for the purposes of manipulating CFDs. It would exacerbate the problem. Spoofing is problematic, but has nowhere close to the same level  of impact. With CFD manipulation you have a customer who may make a reasonable bet, but gets shafted after the fact due to manipulation. The customer has no way to mitigate this problem, and thus the offering itself is fundamentally flawed. CFDs are an interesting idea, but with the fractured liquidity due to so many sporting events (as opposed to fewer stocks/currencies/etc), I don't think it can work.

---

## 2021-10-22 08:23:36 - issues channel

**liam**

[@U01B8031PM1](@U01B8031PM1) [https://github.com/liampauling/flumine/pull/514|1.20.5](https://github.com/liampauling/flumine/pull/514|1.20.5) building now

---

## 2021-10-21 15:31:50 - betfair-news channel

**Oliver Varney**

sweet cool and you raise good points! I would be very open for community ideas long these lines to up volumes. Bankroll can be the limiting factor for users, so any product type that allows a similar effect but more effective use of capital is a tick in my book.

---

## 2021-10-21 13:23:22 - betfair-news channel

**Neil T (Betfair)**

Hi [@U4H19D1D2](@U4H19D1D2), you are correct.  See the following from the Betfair terms and conditions that answers this question in full.

---

## 2021-10-21 11:44:52 - betfair-news channel

**Mo**

Does anyone actually purchase PRO historic data more than three years old?



If you made this freely available I think it would be great for attracting more automated bettors and for the exchange ecosystem.



Data science and machine learning are very popular skills to learn right now and people are always looking for good free data sets on which to apply and develop their skills

---

## 2021-10-21 10:46:40 - betfair-news channel

**Neil T (Betfair)**

*Post your questions here directly to Betfair on any Betfair Exchange-related topic.* 

 

*Moderation &amp; Etiquette*

*·*        Replies to a single question will be confined to a single thread and any follow-up question (on the same topic) should be posted in the same thread.

*·        DO NOT* provide your Betfair username or email address in any correspondence. 

·        Any specific Betfair account-related queries should be directed to the usual Betfair Customer Services or Betfair Developer Support channels.

·        Betfair will respond directly to the channel (Monday-Friday 10am-5pm).  

·        The channel will be open until 1700 on Thursday 28th October

---

## 2021-10-21 10:44:57 - betfair-news channel

**Unknown**

set the channel description: Post your questions here directly to Betfair on any Betfair Exchange related topic

---

## 2021-10-19 12:05:29 - strategies channel

**Adrian**

ok thanks. that's a different way to look at it. rather than trying to poinpoint a set of parameters for the first set as a whole, I should make small adjustments one by one then test eash in the test set.



How do i avoid becoming too familiar with the test set? As in how do i avoid overfitting the test set so that im not repeating the same problem

---

## 2021-10-19 11:57:54 - strategies channel

**Adrian**

i got the same problem when i used all runners instead of just top 3 and had 1700 matched bets total. exact same problem

---

## 2021-10-19 11:54:32 - strategies channel

**Adrian**

I'm not sure what you're asking. I'm not doing any machine learning. Just running a backtest over all my markets from 2-4 months ago (~10k markets) then verifying with with the last 1-2 months of markets with the exact same strategies. Not changing anything, just the target path for the data files

---

## 2021-10-18 22:40:42 - general channel

**Ke**

Is it possible to store the streamed data to a proper database, rather than individual files, which can be further used for back testing?

---

## 2021-10-18 21:13:12 - general channel

**liam**

How many threads / bets? You might want to look at a pool instead. Profiling will help tell you the issue although it can get very tricky with threads 

---

## 2021-10-18 13:33:14 - issues channel

**JC**

Hi liam, one more question relating to this - what would be the recommended way to call a background worker function only once i.e. have the interval parameter to be None (or extremely large) and the while loop in the actual worker function?

---

## 2021-10-18 06:20:07 - random channel

**Oliver Varney**

cool cheers mo Ill take a look. Secondly and kind of on the same note but has anyone attempted to represent the Available class in the cache as a numpy array (1, len(number_of_ticks) with size being represent at an predefined index?

---

## 2021-10-16 15:24:14 - issues channel

**river_shah**

`betfairlightweight==2.12.1`

---

## 2021-10-16 15:23:50 - issues channel

**liam**

What version of bflw?

---

## 2021-10-16 15:22:25 - issues channel

**river_shah**

Sometimes I get these which cause engines to hang. `tenacity` keeps retrying indefinitely. What is best way to detect and kill the framework after N retires if such a situation arises?



```python3.7/site-packages/betfairlightweight/streaming/betfairstream.py", line 225, in _receive_all

    part = self._socket.recv(self.buffer_size)

  File "/usr/lib/python3.7/ssl.py", line 1037, in recv

    return self.read(buflen)

  File "/usr/lib/python3.7/ssl.py", line 913, in read

    return self._sslobj.read(len)

socket.timeout: The read operation timed out```



---

## 2021-10-16 12:10:27 - general channel

**Mo**

Depends how reliant you are on market catalogues, sounds like streaming is unaffected due to lack of names there

---

## 2021-10-15 18:59:07 - issues channel

**Paul**

I actually have a bit of history with the exchange games API. Word of warning to anybody going near it: the documentation is utter crap and contains many, many lies

---

## 2021-10-15 06:18:27 - random channel

**Paul**

Yeah, some people find it's really helpful, others less so. I can be lazy but if I get the one major task done then I can feel I've got something important done and slack off a bit if I want/need. I know others would prefer to have a strong design doc and backlog, and then push through. I do that for my day job, but at the weekend? When I'm not quite sure what is possible and I'm learning? Not for me.

---

## 2021-10-14 20:26:52 - random channel

**Paul**

I know my employer (which is a FAANG), will pay to relocate the right people and happily put them through visa sponsorship, but the problem with out-of-country remote is tax and legal (specifically intellectual property) stuff. That seems common to all the FAANGs. Smaller companies might be more flexible, and [http://remoteok.io|remoteok.io](http://remoteok.io|remoteok.io) has worked for me in the past when I wanted to WFH back in 2018.

---

## 2021-10-14 19:59:52 - issues channel

**Paul**

The source code suggests I’m using a deprecated function anyway that will be reimplemented sometime in the future… in 2017… [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/account.py#L116-L127|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/account.py#L116-L127](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/account.py#L116-L127|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/account.py#L116-L127) :thinking_face::joy:

---

## 2021-10-13 09:45:18 - general channel

**liam**

dont use streaming for this

---

## 2021-10-13 09:44:52 - general channel

**Javier Martín Pérez**

As you can see I have used the "examplestreaming" and adapted it to get a snap of the odds for my use. Probably an odd use of the streaming too but seems to do the job other than that difficulty to stop the stream after checking the odds.

---

## 2021-10-12 21:13:01 - general channel

**liam**

Can you share some code to replicate? It’s odd that you are calling stop at all tbh when it comes to streaming unless you are trying to gracefully shut everything down 

---

## 2021-10-12 15:17:01 - general channel

**Javier Martín Pérez**

Any ideas on what am I doing wrong? Thanks for your help :).

---

## 2021-10-12 15:15:22 - general channel

**Javier Martín Pérez**

listener = betfairlightweight.StreamListener(output_queue=output_queue)

---

## 2021-10-12 14:11:38 - general channel

**Ben**

Thanks for the help guys, will have a look at these

---

## 2021-10-11 11:26:03 - random channel

**Peter**

[@UPMUFSGCR](@UPMUFSGCR) As the approach recommended by [@U01PQ9SR9MJ](@U01PQ9SR9MJ) doesn't appeal ("Windows", "defunct", "30d trial") you may be interested to know that you can do the same in python using scipy. There's a particularly good [https://stackoverflow.com/questions/6620471/fitting-empirical-distribution-to-theoretical-ones-with-scipy-python|stackoverflow post](https://stackoverflow.com/questions/6620471/fitting-empirical-distribution-to-theoretical-ones-with-scipy-python|stackoverflow post).

---

## 2021-10-11 09:53:40 - random channel

**Jonjonjon**

[@U01PQ9SR9MJ](@U01PQ9SR9MJ)  thanks for the suggestion but I am too old to try new software. And I don't have a Windows machine. I'd prefer to stick to Python.

---

## 2021-10-11 09:17:04 - random channel

**Disco**

Hello. Have a question, unrelated to bf, as there are people experoenced in IT industry: is it common for for non-uk/non-eu citizens to work for uk/irish companies remotely as a developer/QA on permanent/long contract basis? I've been working in data warehousing and etl/elt for the past 3 years (1 year fully remote) and wondering if there is any demand as pandemic made employers switch a lot of workers to remote/wfh, but maybe it's not an option for foreigners.

---

## 2021-10-10 17:37:56 - random channel

**Jonjonjon**

I was looking at genetic algos but can't seem to find a well maintained Python library for it.

---

## 2021-10-10 17:15:31 - random channel

**Aaron Smith**

is this more for a mathematical question or practical use?

---

## 2021-10-09 20:43:09 - general channel

**AndyL**

[@U4H19D1D2](@U4H19D1D2) hi, question on size reduction cancel_order, i seem to occasionally see a cancel execute, instruction report says success, i then see order status update: executable, but the size_remaining is still the old size and size_cancelled is 0. No subsequent order updates occur...

Can i force a query of order in betfair, to check actual status?

---

## 2021-10-09 11:35:45 - strategies channel

**Aaron Smith**

My technical knowledge is very limited, so i ll dig a little deeper with some probably stupid questions :smile:

If the flumine instance is running on a single core, wouldnt it still have to priotize one thread over the other?

---

## 2021-10-08 22:01:38 - general channel

**Matthieu Labour**

Hi,

For Tennis, I see markets that start w/ a `1` such as `1.188732649"` . Is it always  `1`?

I read the following for the getAccountStatement / StatementLegacyData betfair API.

```eventId: Please note: this is the Id of the market without the associated exchangeId```

Where can I get the exchangeId or can i assume it will be `1`? Thank you for your help and guidance.

---

## 2021-10-08 18:53:50 - strategies channel

**Aaron Smith**

[@U9JHLMZB4](@U9JHLMZB4) thanks for input on how to use it, i ll sit down tmr and try and get a grasp of what the best approach is, so that kind of input will surely make my day tmr easier :slightly_smiling_face:

---

## 2021-10-08 17:16:25 - strategies channel

**Aaron Smith**

never used that/dont really know what it is. I ll have a look at it and come back if any questions are left. Thanks [@UUCD6P13J](@UUCD6P13J)

---

## 2021-10-08 17:14:34 - strategies channel

**Aaron Smith**

If i want to put my placed orders in a database, what would be the best practice? processed_closed_market seems reasonable, but i dont want it doing stuff there when it could be processing market_books, so maybe a backgroundworker?

---

## 2021-10-08 16:15:28 - general channel

**George**

I looked into this and the StackOverflow answer says - don't pass `self.data` as a dictionary, pass it as a string, and this resolves the issue.

But, I don't have the option to do this with BFLW. So what should I do?

---

## 2021-10-08 16:13:06 - general channel

**George**

My problem is: TestPassword123! gets turned into TestPassword123%21 during the [http://session.post|session.post](http://session.post|session.post)() function.

---

## 2021-10-08 16:12:40 - general channel

**George**

This is a very strange question but I think it is relevant nonetheless...

When you login with BFLW you run the following code:

``` response = [http://session.post|session.post](http://session.post|session.post)(

                self.url,

                data=self.data,

                headers=self.client.login_headers,

                cert=self.client.cert,

                timeout=(self.connect_timeout, self.read_timeout),

            )```

And `self.data` looks like:

```{"username": "TestUsername", "password": "TestPassword123!"}```

---

## 2021-10-08 12:52:56 - issues channel

**Aaron Smith**

Yea i dont act on to many updates, so its fine for now.

Also, i completely buried [@U0154JA98TH](@U0154JA98TH)’s unanswered question, so i ll bring that back up:

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1633687362253900](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1633687362253900)

---

## 2021-10-08 12:49:11 - issues channel

**Aaron Smith**

mh, thats sad, but still nice i solved the main issue :smile:

---

## 2021-10-08 12:49:09 - issues channel

**Oliver Varney**

betfair transactions and flumine transactions

---

## 2021-10-08 12:48:19 - issues channel

**Aaron Smith**

just tested, everything seems to be working fine. Thanks guys! Also this is now only a single transaction? (regarding my 5k transaction limit per hour) ? If so, thats pretty neat, both problems solved in one

---

## 2021-10-08 12:01:48 - issues channel

**Aaron Smith**

of those 50 maybe 5 match, so it probs would be a problem :smile:

---

## 2021-10-08 11:47:31 - issues channel

**Aaron Smith**

Thanks Mo. 2. sounds very reasonable in this scenario, however if i recall correctly liam already included something like that into flumine, i ll have to look into that area.

---

## 2021-10-08 11:46:51 - issues channel

**Oliver Varney**

[https://liampauling.github.io/flumine/markets/#transaction](https://liampauling.github.io/flumine/markets/#transaction)

---

## 2021-10-08 11:45:20 - issues channel

**Mo**

A couple of thoughts bearing in mind I have no idea of the flumine internals:



1. Increase the thread pool size (looks like it's 32)

2. Group the bets so you're placing multiple per placeOrders call and minimising the number of calls you're making

---

## 2021-10-05 19:52:56 - issues channel

**liam**

Worker and CustomEvent [https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py](https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py)

---

## 2021-10-05 17:20:21 - issues channel

**JC**

Hi everyone, what's the recommended approach for working with the official atp/wta scores endpoint within flumine? Background worker that writes to market context? Is there a faster way, or one that would allow an immediate reaction to a score update rather than waiting for the next marketbook to process? Cheers

---

## 2021-10-05 11:16:52 - general channel

**liam**

if you do this in flumine watch out for potential race conditions on the `Market` object and `SimulationMiddleware` (untested)

---

## 2021-10-05 10:40:25 - general channel

**Lee**

They have a priority, so i believe you'll only get one based on this order [https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/cache.py#L151](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/cache.py#L151)

---

## 2021-10-04 13:53:36 - random channel

**liam**

I can help with layering income to prevent questions on deposits but haven't heard of anyone recently getting a mortgage from income

---

## 2021-10-03 09:36:14 - random channel

**Oliver Varney**

ah crap didnt realise you have been covering it, in my head for some reason I just thought as there was enough of us it was just to let them know to reserve space.  Certainly happy to help put some monies towards this time ( and buy you beer all night for the previous times)

---

## 2021-10-02 11:56:10 - general channel

**PeterLe**

Morning, I've been running Flumine a good month now...are there any housekeeping activities i should be doing; ie clearing out logs etc, or can i just run each day and forget? Thanks

---

## 2021-10-01 16:54:43 - general channel

**George**

true. i did think of that but wondered if there was a cleaner way to do it without having to unpick the strange acronyms myself which BFLW does very nicely. (e.g. with a cache=False option). but if not then fair enough

---

## 2021-10-01 16:53:11 - general channel

**liam**

Ah I see, you have streaming_update available so you can see what was updated 

---

## 2021-10-01 16:53:09 - issues channel

**Jack**

I should note I am on to support already and I've been asked to provide a connection IDs for an existing connections which I don't know how to get.

---

## 2021-10-01 16:47:23 - general channel

**George**

I've been looking at the Order Streaming today and it seems like BFLW builds a cache, adds any new orders to it and returns the whole lot. However I can imagine if you are sending a lot of orders that it might be more convenient to just return the most recent order only - this would avoid the list of orders growing huge very quickly. Is there an option to do this in BFLW? Something like cache=False?

---

## 2021-10-01 14:26:58 - general channel

**Finn**

I promise my questions will improve after a few weeks!

---

## 2021-10-01 12:43:33 - general channel

**liam**

Identical, check out the code in streams.py, it try’s to be helpful but it’s not that clever that it will combine / share certain markets etc 

---

## 2021-10-01 10:03:45 - issues channel

**Jonjonjon**

My Pycharm take 1 minute to load on Ubuntu even though I have a Samsung Evo 970 nvme.



It even loads faster if I do it from within a Lubunty virtual box on the same machine.



Does anyone have this problem?

---

## 2021-10-01 09:45:30 - general channel

**liam**

works out the box, [https://github.com/liampauling/flumine/blob/cd1e981c57baef58a529b624a17a7877cc67c676/flumine/markets/market.py#L103|code](https://github.com/liampauling/flumine/blob/cd1e981c57baef58a529b624a17a7877cc67c676/flumine/markets/market.py#L103|code)

---

## 2021-10-01 09:17:35 - issues channel

**liam**

best practice is



flumine -&gt; market_recorder -&gt; store in s3 (or similar cloud provider)



s3 -&gt; bflw historic data stream -&gt; db/file/analysis etc

---

## 2021-10-01 09:07:05 - issues channel

**Finn**

I want the book to send out of flumine for processing and storage in a db. I want the recorder so I can replay and develop that process.

---

## 2021-10-01 08:59:50 - issues channel

**Finn**

This might again be pointing to a misuse of flumine altogether.

---

## 2021-09-30 19:59:27 - strategies channel

**Beeblebrox**

Also [@U4H19D1D2](@U4H19D1D2), are the comments wrong here: [https://github.com/liampauling/flumine/blob/3674986e14d266acc739a8288d6c50183d42db14/flumine/order/trade.py#L32](https://github.com/liampauling/flumine/blob/3674986e14d266acc739a8288d6c50183d42db14/flumine/order/trade.py#L32)



It says `place_reset_seconds` is the time to wait since `runner_context.reset` and `reset_seconds` the time to wait since `runner_context.place` , but isn't it the other way round?



Similarly for the docs: [https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/docs/trades.md](https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/docs/trades.md)

---

## 2021-09-30 14:03:39 - strategies channel

**PeterLe**

Thanks Liam, I have used zero on other programs. I was just being cautious with this one on Flumine. Ill have a play around with it.

---

## 2021-09-30 12:16:19 - strategies channel

**PeterLe**

Just on the reset; I have mine set to :

```place_reset_seconds=0.14```

I think that this may be too generous as Im missing out compared with other strategies that Im not running on Flumine.

What would be the lowest you could set this to, just before it becomes irrelevant? (Ie if the code takes 10ms to run then there would be no point attributing a value to the variable anyway). It would be interesting to know how low you would go with something like for the fast inplay horse markets.

---

## 2021-09-30 11:38:01 - strategies channel

**liam**

flumine?

---

## 2021-09-30 10:38:30 - strategies channel

**Beeblebrox**

I guess my question is what conclusions can I draw from the match rate v signal?  And is there anything else people do to analyse it, other than plot a graph?

---

## 2021-09-30 09:40:55 - general channel

**Oliver Varney**

bankroll management?

---

## 2021-09-30 09:00:44 - general channel

**Oliver Varney**

If your manually picking markets with no consistent methodology then theres not much you can do, unless you use a background worker to some kind of api/database (where you manually set) which return a list of market ids for which again your would use to filter out with a wide filter

---

## 2021-09-29 22:49:42 - random channel

**Jonjonjon**

What process did you use for the selection? I'm unsure of how to choose a fund, but am considering something from here: [https://www.wealthclub.co.uk/seis-investments/](https://www.wealthclub.co.uk/seis-investments/)

---

## 2021-09-29 15:33:58 - general channel

**Finn**

I think I’m working against the Flumine ethos here trying to store stuff with sql. I guess if I store the raw stream and process into a (flawed) db I can always replay it later.

---

## 2021-09-29 14:43:46 - general channel

**Peter**

To force you also need a fairly recent version of Flumine - at least 1.19.7, I believe.

---

## 2021-09-29 11:34:32 - general channel

**Oliver Varney**

an old price will need adjusting when a runner is removed to have any kind of comparable value. imagine a three horse race with Frankel and two very poor horses. Say you have come up with a price about an hour ago which you want to lay the poor horses at and stored it somewhere (like flumine context). Frankel is a late non runner. If you dont adjust that price of the two runners left then you may think your getting an amazing lay price when in reality it may not be with Frankel removed.

---

## 2021-09-29 11:20:46 - general channel

**Oliver Varney**

Im sure someone will correct me, you either adjust a stored price (old market book) for every new non runner as they come through, or at the end with the product of adjustment factors of removed runners. Flumine adjusts orders straight away, so with a custom middleware you could call your own function and adjust the old market_book for example.

---

## 2021-09-29 11:14:06 - general channel

**liam**

right, yes if you are recording prices (not orders) and backtesting out of flumine then yes you would

---

## 2021-09-29 11:06:40 - general channel

**liam**

flumine handles it, few edge cases but it trys [https://github.com/liampauling/flumine/blob/cd1e981c57baef58a529b624a17a7877cc67c676/flumine/markets/middleware.py#L76](https://github.com/liampauling/flumine/blob/cd1e981c57baef58a529b624a17a7877cc67c676/flumine/markets/middleware.py#L76)

---

## 2021-09-29 10:58:05 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/cd1e981c57baef58a529b624a17a7877cc67c676/flumine/streams/streams.py#L83](https://github.com/liampauling/flumine/blob/cd1e981c57baef58a529b624a17a7877cc67c676/flumine/streams/streams.py#L83)

---

## 2021-09-29 09:17:43 - strategies channel

**Oliver Varney**

I feel your pain, dont know why betfair cant give at least two accounts (instead of a full TMSA) for all api key holders. I think flumine has a number of variables to control as much as possible.

---

## 2021-09-28 12:29:29 - random channel

**liam**

The team I currently work for is crying out for some real world experience in python / sql / analytics as opposed to tutorial newbies  

---

## 2021-09-28 12:28:06 - random channel

**liam**

For context this was actually before I wrote bflw

---

## 2021-09-28 11:46:00 - random channel

**liam**

I have kept a job going from a risk point of view, having an income stops the questions coming from HMRC / student loan / cv gap etc, as Jon has mentioned you can funnel it into a pension, get the perks (healthcare etc) and remove the headache of mortgages

---

## 2021-09-27 22:29:20 - general channel

**thambie1**

I've been seeing some consistent (but low levels) of conflation with my system, and after a lot of testing, I'm starting to think the problem may be on Betfair's end. I tried out bflw to see if the problem was just with my system, and also getting conflation with that too. Anyone else monitoring conflation and getting better results for &gt; 300 market updates per second?

---

## 2021-09-27 13:24:09 - random channel

**Oliver Varney**

[@UGV299K6H](@UGV299K6H) I feel its a hard conversation to get away from especially with friends, kinda feel like im constantly repeating myself and boring them to death (as well as myself at the same time) yet they still keep asking questions.

---

## 2021-09-27 13:18:22 - random channel

**Michael**

Obviously how you feel about it depends on what your overall position is in terms of finances, family and so on but if you're being sensible and putting money aside so that you could cover a gap without income then I think you can dial your worrying right down because the reality is that you will always get through. It might take longer to get a job or you might have to do something you don't love for a bit whilst you re-establish yourself but you'll get through. None of us is  watching the Taliban tighten the noose or trying to cross the channel on a lilo.



When I occasionally expressed anxiety about this sort of thing to my friends in the past they used to laugh at me because from where they were sitting it was obvious that I'd be fine. It's always obvious that other people will be fine it just never feels that way.



I don't know if it's really a good idea for you to quit your job if I'm honest - just because your record of making profits is relatively short. However you do decide to do that you could explain to your employer that you just don't need a job, offer a very long notice period, help your successor with the transition and maybe even provide a little help after you've left so that you're on the best possible terms should you need to go back.

---

## 2021-09-25 19:56:56 - general channel

**Jack**

[@U4H19D1D2](@U4H19D1D2) could you explain what you mean by this please?

&gt; min bet round down sub 2 (closure)

&gt; 

Can you only stake £0.50 per bet if you want then no problem?

---

## 2021-09-23 22:16:19 - random channel

**Dave**

typing is also helpful if you like to compile your functions with numba for example

---

## 2021-09-23 12:11:21 - random channel

**Oliver Varney**

cool interesting, I guess at that point python mirrors the syntax of statically typed languages

---

## 2021-09-22 17:45:30 - general channel

**S G**

Betfair recommends creating certs, from what i understand from your previous msg, its not needed and bflw/flumine still works smoithly without certs?

---

## 2021-09-22 12:07:49 - general channel

**ThomasJ**

Thanks Liam very much.



 `process_market_book` is dependant on `check_market_book` whereas I want all LTP history. I settled on updating the history as per my original choice of "at `update_cache &gt; if "ltp" in new_data`".



When I posted my original Q I did not realize that very deep with a flumine instance there lurked the RunnerBookCache, so I propagated the 'LTP history' to the RunnerBook.



After my enlightenment I use the cache everywhere.

---

## 2021-09-22 08:49:16 - general channel

**liam**

this help?



```    def process_market_book(self, market, market_book):

        for runner in market_book.streaming_update.get("rc", []):

            if "ltp" in runner:

                print(" ", runner["id"], runner["ltp"])```

---

## 2021-09-21 21:36:20 - issues channel

**liam**

Best practice would be to have any bflw calls in a try/except 

---

## 2021-09-21 19:48:43 - strategies channel

**Dave**

Are your filters time based by any chance? This often happens when you are imposing time based restrictions since stuff that would have matched before (which you hope to filter out) is just instead being matched later on still at -ev (provided you are not running your simulation on infinite bankroll)

---

## 2021-09-21 15:33:08 - general channel

**Matthieu Labour**

Will do. BetFairLightWeight does implement the Order stream API correct?

---

## 2021-09-21 14:07:07 - general channel

**Matthieu Labour**

Hi, Is there a hook in flumine that I can attach a custom callback that would get called whenever an order changes state (PENDING to EXECUTED for example). Thank you.

---

## 2021-09-21 11:54:07 - general channel

**Oliver Varney**

haha no I think I adapted your worker code for something else and didnt extend flumine code

---

## 2021-09-21 11:50:11 - general channel

**liam**

You already get the framework as the second var so you don't need the extra



[https://github.com/liampauling/flumine/blob/3674986e14d266acc739a8288d6c50183d42db14/examples/workers/inplayservice.py#L13](https://github.com/liampauling/flumine/blob/3674986e14d266acc739a8288d6c50183d42db14/examples/workers/inplayservice.py#L13)

---

## 2021-09-21 11:47:18 - general channel

**Oliver Varney**

```framework.add_worker(

    worker=BackgroundWorker(

        client=client,

        function=worker.test_func,

        interval=300,

        start_delay=30,

        func_kwargs={

            'flumine': framework

        }

    )

)```



---

## 2021-09-21 10:51:36 - general channel

**ThomasJ**

In Flumine, is it possible for a worker thread to have access to MarketBookCache/RunnerBookCache attributes? (Why is a long story :smile: )



If yes then how do I pass the reference via class BackgroundWorker &gt; def run to the target function?

---

## 2021-09-21 09:38:23 - random channel

**charlie_v**

On the footie facebook group I'm an admin on have a poor bloke just posted who has been limited to £100 a month deposit, he made some losses last few months but is a matchbetter, how frustrating, I am sure it will get resolved but must be so frustrating.

---

## 2021-09-21 08:55:24 - issues channel

**Jorge**

Ah, the problem is I am grouping by MARKET, and I have different strategies in the same market, so they group to NaN :smile:

---

## 2021-09-21 08:49:34 - strategies channel

**Oliver Varney**

pycharm is decent IDE for python

---

## 2021-09-21 08:36:38 - random channel

**Oliver Varney**

im not fully aware of the ins and outs, I was more thinking about is there a world whereby you could stake / help new starters with tiny banks and get a cut as a return

---

## 2021-09-21 08:04:57 - strategies channel

**Adrian**

Hi Michael thanks for helping out. Yes pretty much, except the first run I don't have any limits, I just capture as many bets as possible. Then when I say, "filter" using A, B, C, D i cut it down from 900 to 600 as you say. Then rerun with those same filters and get 1200

Just one matched bet per runner, backing only so the exposure doesn't change.

---

## 2021-09-21 07:53:27 - strategies channel

**Michael**

[@U01S1VB9X9P](@U01S1VB9X9P) do I understand your question correctly:



You have some parameters: A, B and C which produce (say) 900 bets. When you add parameter D to those 900 bets you're left with 600, but when you re-run your back-test with parameters A, B, C and D you see 1200 bets?



Could it be something to do with exposure limits? This might especially be the case if you're laying and if the subset A, B C and D generates bets at a different range of odds (shorter perhaps).

---

## 2021-09-21 01:45:51 - strategies channel

**Adrian**

Hey guys i was hoping someone with more experience could help me understand this weird problem I'm having while backtesting. I have identified some market parameters that occur on my most profitable bets. Problem is, when I make the bet placement require those conditions, my number of matched bets goes up substantially relative to those identified bets. Like double. E.g. my backtest shows 600 matched bets as the most profitable within the range of the specified parameters. But when rerun the backtest using those parameters I get 1200 bets matched. Those extra 600 do not add to the profit.



I just don't understand because I putting in parameters that limit the range of circumstances in which a bet is placed. I have even simulated removing all my other bets from the market and it still shows the same behaviour. Just wondering if anyone else has seen this behaviour? I can't understand why my matched bets number goes up when I use the same parameters?? :pleading_face:

---

## 2021-09-20 09:04:09 - general channel

**liam**

ie flumine as already handling your `able_to_proceed` logic

---

## 2021-09-20 08:57:22 - general channel

**Jeff Waters**

When doing backtesting with Flumine, is it possible to combine BSP and non-BSP bets?



When I write the following code, only the non-BSP bets appear in my results spreadsheet:



```def process_market_book(self, market, market_book) -&gt; None:

    for runner in market_book.runners:

        update_lists.vol_change_actions(runner)

        if runner.status != "ACTIVE" or not runner.last_price_traded:

            continue

        else:

            runner_context = self.get_runner_context(

                market.market_id, runner.selection_id, runner.handicap

            )

            if 360 &gt; market.seconds_to_start &gt; 0:

                # Bets are possible when no bets have been placed previously for this selection.

                able_to_proceed = True

                for order in market.blotter:

                    if order.selection_id == runner.selection_id:

                        able_to_proceed = False

                if able_to_proceed:

                    # LAY NON-BSP BET

                    # create trade

                    trade = Trade(

                        market_book.market_id,

                        runner.selection_id,

                        runner.handicap,

                        self,

                    )

                    # create order

                    price = get_price(runner.ex.available_to_lay, 3)

                    order = trade.create_order(

                        side="LAY",

                        order_type=LimitOrder(1000, 2)

                    )

                    # place order for execution

                    market.place_order(order)

                    print("Lay placed")

                    # NOW BSP BACK

                    # Create trade

                    trade = Trade(

                        market_book.market_id,

                        runner.selection_id,

                        runner.handicap,

                        self,

                    )

                    # create order

                    order = trade.create_order(

                        side="BACK",

                        order_type=LimitOnCloseOrder(2, 1.01)

                    )

                    # place order for execution

                    market.place_order(order)

                    print("BSP back placed")```

Am I doing something wrong?



Thanks



Jeff

---

## 2021-09-19 19:00:56 - issues channel

**Alessio**

brilliant, i come back after some hiatus, and there's a new flumine version. nice ! :wink:

---

## 2021-09-19 09:14:27 - issues channel

**Mo**

When creating the bflw client

---

## 2021-09-19 09:07:52 - issues channel

**birchy**

Yeah, but it's in the Flumine code

---

## 2021-09-19 09:05:30 - issues channel

**birchy**

Upgraded Flumine last night and implemented the latest marketrecorder as I wasn't previously using the gzip format. Can't fathom out what's going on here.

---

## 2021-09-18 18:21:48 - issues channel

**Aaron Smith**

i have

```flumine.config.hostname = "name"```



---

## 2021-09-18 18:13:15 - issues channel

**Aaron Smith**

I have 2 flumine instances running, it seems the orders it cant are coming from the other instance, so it makes sense it cant find those. However, i didnt have this problem before, did anything change with the update?

---

## 2021-09-17 14:55:39 - strategies channel

**ShaunW**

Thanks [@UGV299K6H](@UGV299K6H) theoretical ideal vs practical implementation? Yep that seems to characterise my problems in general. [@U01DJ4DBF9R](@U01DJ4DBF9R) I like the sound of that, a real world relationship other than the angle the earth has turned through. Although I can see issues with that too from one event to the next so the time-only option is actually becoming more appealing by the minute (or n thought cycles :blush:)

---

## 2021-09-17 13:07:48 - random channel

**Oliver Varney**

are we doing a pre xmas bflw meetup this year? Just thinking if people are keen then maybe best to get the word out super early this time.

---

## 2021-09-17 11:05:34 - strategies channel

**Michael**

Yeah personally I randomise everything in sensible ranges even when I think I'm getting it right because you'll always want the data in the future. The time it takes to for this stuff to work through depends on the complexity of the question you're answering and how good an answer you need. If it's a straight A v B type question with a well constructed trial you can get an adequate answer in a thousand markets, if you're tracking something more complex and you want a nice clean graph you might need 10k. Sometimes you'll think you've got a clear answer with a small number of markets but that tends to be illusory and you'll always be doubting your conclusion. Don't tinker too much as you'll confound your data set and your tinkering probably won't increase your profits anyway, set your thing up and leave it alone. Chances are your bets are already optimal for some part of the market, if you can work out what part that is then you can build from that.

---

## 2021-09-17 09:28:32 - issues channel

**liam**

Odd, the only way you could get this is if you somehow pulled the latest bflw (2.14)

---

## 2021-09-16 21:18:54 - issues channel

**Jonjonjon**

I'm on my dev machine, and for some reason it pulled the latest master version when I logged in this evening. I didn't think I'd done any pulling of bflw or flumine. Maybe I pressed the wrong button.

---

## 2021-09-16 21:10:29 - issues channel

**liam**

pip, requirements will always be correct and working for flumine, can only assume you have ignored?

---

## 2021-09-16 20:59:56 - issues channel

**liam**

It won’t work (yet) with latest version of bflw but the requirements are correct 

---

## 2021-09-16 20:55:42 - issues channel

**Jonjonjon**

My Flumine is broken due to the MarketBookCache update earlier today.

---

## 2021-09-16 16:40:03 - issues channel

**Dado**

MO, do you know how to request event details from an id like: 1.186997100

---

## 2021-09-16 14:56:25 - issues channel

**Dado**

ok, I had a python script that works since 5 month ago, it was stopped till today and now it doesn't work anymore...

---

## 2021-09-16 14:48:55 - issues channel

**Newbie99**

Yeah, basically if you just want thoroughbred racing then the way to do it is (if using Flumine) in check_market_book just return races with Trot or Pace not in the name

---

## 2021-09-16 14:20:00 - issues channel

**Robbie Bennett**

ok appreciate the help

---

## 2021-09-16 08:52:21 - general channel

**Adrian**

ok i think i get it. since it is recorded in `_process_cleared_orders_meta` i thought Flumine might have been updating them

---

## 2021-09-16 08:48:28 - general channel

**liam**

not sure I understand, they default to {} unless you provide data on creation or add to it later, flumine doesnt touch them

---

## 2021-09-16 08:43:05 - general channel

**Adrian**

Are the notes recorded by the logging control example persistent from the time of placing the bet? Or do they get updated when the order status changes? It seems like an obvious question but there's only one entry per bet and that's with "execution complete", so I was wondering if the notes get updated at the time of status change, or they only get created once upon order creation and not modified beyond that point?

---

## 2021-09-15 15:56:20 - issues channel

**liam**

flumine isnt that good :joy:

---

## 2021-09-15 15:51:57 - issues channel

**liam**

tbh I didn't understand why you where asking about backtesting but sharing a streaming filter?

---

## 2021-09-15 15:51:13 - issues channel

**Aaron Smith**

ah, i think i solved it :smile: Obviously adding EX_LTP into the market_data_filter wont help if i didnt have it in there when recording :clown_face:

---

## 2021-09-15 15:36:09 - issues channel

**Aaron Smith**

Hey ppl, i want to access the last_traded_price, however it returns None (while backtesting).

I use:

```market_data_filter = betfairlightweight.filters.streaming_market_data_filter(

        fields=["EX_BEST_OFFERS", "EX_MARKET_DEF", "EX_LTP"], ladder_levels=1)```

---

## 2021-09-15 08:03:56 - issues channel

**liam**

upgrade flumine

---

## 2021-09-14 22:08:33 - random channel

**Jonjonjon**

Are you much of a Poker player? I keep dabbling with rules-based approaches, with dice to help mix things up. I've yet to become successful.

---

## 2021-09-14 14:53:42 - general channel

**liam**

yep, streaming will pull in Executable bets

---

## 2021-09-13 10:20:30 - random channel

**D C**

As for pitch conditions [@U01LD279D16](@U01LD279D16) that is quite a subjective thing and does it really factor that much in a game that lasts 3 hours? Genuine question as I don't enjoy/watch T20 but in a test match pitch condition is crucial for the first day but you even see some of the former professional players have varying opinions on these things.

---

## 2021-09-13 06:35:37 - random channel

**liam**

Poison pill [https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py|https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py](https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py|https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py)

---

## 2021-09-12 23:25:23 - random channel

**Jonjonjon**

What is the recommended way to stop a flumine application? In particular if I want to pull all orders before allowing the process to terminate?

---

## 2021-09-12 21:02:44 - strategies channel

**S G**

Cheers [@U4H19D1D2](@U4H19D1D2) That should do. guess thats exactly what I am after. I am using marketrecorder from flumine examples. I presume market_id.json (ex: 1.187440878.json) is the market catelogue file

---

## 2021-09-12 18:50:53 - general channel

**Ke**

what string i should use for fill or kill order? i can see in flumine's code that i can do that by setting time_in_force='FillOrKill', but betfair api takes the string "FILL_OR_KILL". I guess I should use 'FillOrKill' in Flumine, but just want to double check.

---

## 2021-09-12 18:29:23 - strategies channel

**liam**

Not sure I understand but there is middleware for ingesting the marketCatalogues when backtesting



 [https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py|https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py](https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py|https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py)

---

## 2021-09-12 17:55:00 - general channel

**admiral**

Apologies as this is probably a dumb question, but how do I get the market books from a 1.xxxxxxx file?

---

## 2021-09-12 17:28:02 - strategies channel

**S G**

I could read all json files ahead and can add meta data to the above output. I was wondering if there is any trick  or functionality in flumine that can do this automatically

---

## 2021-09-12 14:27:42 - general channel

**S G**

or just write some python logic to deal with it?

---

## 2021-09-12 14:26:48 - general channel

**S G**

Another question, can we tell API to match bets at the best available price? for example backing a selection may result in less profit than laying opponent for the same stake?

---

## 2021-09-12 14:21:36 - general channel

**Mo**

Correct but not very Pythonic. e.g.



```def get_total_volume(runner):

    return sum(entry['size'] for entry in runner.ex.traded_volume)```

---

## 2021-09-12 10:51:04 - general channel

**Jeff Waters**

Hi Stefan



The reason I am using Python is because Flumine and Betfair Lightweight are written in Python. I figured it made far more sense for me to use programs that someone has created than spend countless hours reinventing the wheel by making my own from scratch in a language that I'm more familiar with. :slightly_smiling_face: Plus, increasingly my knowledge of Python could have other benefits - for example, if I wanted to do some machine learning.

---

## 2021-09-12 10:44:37 - strategies channel

**Oliver Varney**

imo I wouldnt think its worth building out something complicated into flumine itself

---

## 2021-09-12 10:43:32 - strategies channel

**Oliver Varney**

I just use a worker to a database personally

---

## 2021-09-12 10:42:22 - strategies channel

**liam**

I currently just restart because I am normally changing the code rather than the parameters/context but maybe we could make things easier in flumine for this to be possible 

---

## 2021-09-12 10:21:26 - general channel

**Stefan**

[@U013K4VNB6D](@U013K4VNB6D) interesting, so you are familiar with other programming language but you chose to use python. Are you familiar with  IronPython? It is good to ask you as you know C#.

---

## 2021-09-11 21:49:56 - strategies channel

**PeterLe**

Thanks [@UUE6E1LA1](@UUE6E1LA1)  I only ever use their value too. It makes my head hurt just thinking about how to calculate it myself :smile:

---

## 2021-09-11 20:44:37 - strategies channel

**birchy**

Was thinking about it today. Before I started using Flumine, I accessed the API with my own polling library and always used a 'settings.pkl' file which was basically a pickled dictionary of parameters/trigger values. I had a separate script that I ran when I wanted to change anything (due to having to re-pickle the file) but nowadays I'm much less paranoid about security and would probably just use a CSV. Don't know why I didn't port it to my Flumine bots. :thinking_face:

---

## 2021-09-11 17:53:20 - random channel

**Mo**

Tenacity. The Python package not the character trait

---

## 2021-09-11 16:54:08 - general channel

**Jeff Waters**

Java, Python, JS and C#. Been programming for 2 years, so still a relative newbie

---

## 2021-09-11 10:41:37 - random channel

**Aaron Smith**

on that note, whats wrong with:

```filter=betfairlightweight.filters.streaming_market_filter(

    event_type_ids=[4339, ],

    country_codes=['GB', 'IE'],

),```

?

---

## 2021-09-11 10:41:10 - random channel

**Aaron Smith**

yesterday when changing the market filter from market_filter to streaming_market_filter, somehow the AUS markets managed to find their way in. For all of the ppl on AUS greyhounds, your welcome for that easy cash, i hope you pay me back some time :smile:

---

## 2021-09-11 06:47:02 - general channel

**Stefan**

[@U013K4VNB6D](@U013K4VNB6D) and with what programming languages are you familiar? You know python, and what others?

---

## 2021-09-10 17:55:42 - general channel

**Aaron Smith**

When should one use a market_filter and when a streaming_market_filter?

---

## 2021-09-10 12:27:31 - general channel

**George**

Does BFLW's streaming code handle missed heartbeats and auto-resubscribe? Or does the user have to write some kind of checking?

---

## 2021-09-10 09:07:40 - general channel

**liam**

The `Market` object contains a helper method for accessing other event linked markets:

```place_market = market.event["PLACE"]```

---

## 2021-09-10 09:07:24 - general channel

**liam**

[https://liampauling.github.io/flumine/quickstart/#event-processing](https://liampauling.github.io/flumine/quickstart/#event-processing)

---

## 2021-09-10 08:34:30 - strategies channel

**Mo**

Not at all, it's just a way of smoothing the data which helps with the sample sizes involved

---

## 2021-09-09 22:32:40 - general channel

**Sam Asin**

or if I should try to go through the help desk or something?

---

## 2021-09-09 16:00:12 - issues channel

**JFP**

Kept playing around, figured out the problem and got it working, very simple when you have the correct instructions. The betfair "Certificate Generation with XCA" tutorial is good enough up until the export part. The export instructions do not align with the current available XCA version. The first part of the current export instructions says to export .pem from priviate key tab (IGNORE THIS INSTRUCTION). The next part of the instructions is correct, export .crt file (perm*.crt, latest edition) from certificates tab (this is the file to be uploaded to betfair security settings). The next step (not in instructions) is to stay on the certificates tab and export 'pem + key (*.pem)' file, this is the file that needs to be stored in your certs_path directory. The non-interactive login worked using this process.

---

## 2021-09-09 15:24:02 - general channel

**liam**

common design pattern in python to try and use certain libraries and then fall back to the included

---

## 2021-09-09 15:23:19 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/eb08f1c400c0c5d61dacfd618aa93d5aceec15ac/betfairlightweight/compat.py#L11|magic](https://github.com/liampauling/betfair/blob/eb08f1c400c0c5d61dacfd618aa93d5aceec15ac/betfairlightweight/compat.py#L11|magic)

---

## 2021-09-09 04:18:17 - issues channel

**JFP**

Sure this is very basic problem, if there are posts about this it would be great if someone could point me in the right direction. Thanks

---

## 2021-09-08 23:35:02 - general channel

**Unknown**

My thanks to [@U01SCPDTV5J](@U01SCPDTV5J) and [@UPMUFSGCR](@UPMUFSGCR) for the advice re. using output to a file (and to everyone else who has helped me with this program).



My program can now create two CSV files - one for markets and one for bets - which log all the data I need. Plus, it can do about 8-9 markets a second.



Light at the end of the tunnel! :grin: Cheers, guys!

---

## 2021-09-08 21:43:57 - general channel

**Jack**

There are a couple of example logging controls I think in the flumine repo :+1:

---

## 2021-09-08 21:40:52 - general channel

**Jack**

You want to use a logging control to write out to something persistent like a csv file, JSON, or to a database. 

Then filter that down or run queries over it to get the figures you are looking for. 

Might be overkill just for profit but when you start digging into things a little deeper you'll need this most likely.

---

## 2021-09-08 21:24:24 - general channel

**Jeff Waters**

I'm trying to use multi-processing for my backtesting. 



The challenge I am having is getting a total profit/loss figure for all the markets combined. I have four cores, meaning the display_results method is called four times, resulting in four different 'total profit and loss' totals. 



I have explored using global 'running total' variables and global lists containing profit and loss figures for each market, to no avail. This included creating a module with its own list, but that didn't work. Each time a new processor called the display_results method, the list in the module was wiped clean. I've also tried the same approach with a dictionary, with market ids as keys, but had the same problem.



Any suggestions?

---

## 2021-09-08 15:51:05 - random channel

**Jack**

Got £200 for keyboard and mouse from work so just figuring out how to use it :drooling_face:

---

## 2021-09-08 15:49:45 - general channel

**Jono**

would running flumine.run() in separate thread to main cause issues? i'd quite like to use an azure app service to let my test strategies run and be able to send requests to it and get simple responses back indicating how its performing. Im having trouble keeping the keeping the endpoint open once the flumine loop has started and so this idea of moving it to a separate thread came about after digging through stackoverflow. Does anyone know if this is viable to move the long term running of the flumine strategies to a different (non-main) thread whilst main stays open to receive and process other requests/tasks. Also Im using the flask api python package to create the endpoint. Thanks!

---

## 2021-09-08 14:09:46 - issues channel

**Peter C**

I started using middleware to add execution.complete orders to market.blotter on stream restart with liam's help yesterday. The middleware is working (which is really great), but it appears to be effecting my logging, which relies on the trade notes. Looking through the provided code I can't tell whether the middleware should be picking up order.trade.notes and adding them to the blotter. Should the notes be collected, and if not is there a way of picking them up?

---

## 2021-09-08 12:58:54 - general channel

**D C**

OK great. Thanks Mo. Problem must reside elsewhere then. Cheers.

---

## 2021-09-08 12:58:13 - issues channel

**Mons___das**

Hi ppl,

I ve been running the s3MarketRecorder for a while now and it seemed to be doing its job (havent worked with the data a lot yet, so cant confirm its all correct). I just realized i ve got a tmp folder with 4.4gb worth of files. Some of these are unpacked streaming data, some are randomly named directories filled with unpacked and packed streaming data and maybe some market catalogues. Anyone knows how these stacked up there ?

---

## 2021-09-08 11:47:08 - general channel

**Lee**

I'm not sure on the best approach here but with your current approach a unique key might be useful but i would try to limit / restrict where you're adding/removing/updating data to preferable a single place.

For example, how often will your worker run? will you only trigger bets based on your api response? maybe the worker could do all this logic adding to `market.context` and then `process_market_book` just triggers bets based on this.

This might not be a great idea / best practice but might give you some  ideas on how to approach it.

---

## 2021-09-08 11:16:00 - general channel

**Jono**

the worker is not strating its on thread and is waiting for the response. I didnt want want to mess with anything thread related as i wasnt sure if that would interfere with the rest of flumine

---

## 2021-09-08 11:02:07 - general channel

**Mo**

Python is inherently single threaded so there will be no concurrent access to worry about 

---

## 2021-09-08 09:36:26 - general channel

**Unknown**

[https://betfairlightweight.slack.com/files/UBS7QANF3/F012WG50U8K/image_from_ios.jpg](https://betfairlightweight.slack.com/files/UBS7QANF3/F012WG50U8K/image_from_ios.jpg)

---

## 2021-09-08 09:30:28 - general channel

**Jeff Waters**

I hate Macs. Whenever my mum asks me to help her with her Mac, I find myself muttering 'tool of the devil' under my breath! :joy:



That said, I'm sure they are perfectly fine if you're used to them, but I've been using Windows for literally decades.

---

## 2021-09-08 08:42:36 - general channel

**Mo**

I don't think it's bad advice - sometimes much easier to throw money at a problem than try to solve a hard technical issue

---

## 2021-09-07 15:44:20 - general channel

**liam**

it would solve this problem but create many more

---

## 2021-09-07 13:53:50 - general channel

**liam**

flumine version?

---

## 2021-09-07 13:38:54 - general channel

**Unknown**

aaannndddd wwhhhaatttssss thhhehehehe problem?

---

## 2021-09-07 13:14:57 - random channel

**Mo**

Cheers. I certainly want to get content out there, the question is what is the best way to do it. I've talked before about doing a book and doing mentoring

---

## 2021-09-07 11:34:09 - issues channel

**Peter C**

That's got it (I hope!). Thank you for your help

---

## 2021-09-07 11:33:50 - general channel

**Adrian**

I cannot for the life of me figure out how to get the underround calc into the notes. I'm using:

`underround = _calculate_underround(market_book.runners)`

                    `order2 = trade.create_order(`

                    `side="LAY",`

                    `order_type=LimitOrder(2, self.context["stake"],`

                        `persistence_type="LAPSE"),`

                    `notes=OrderedDict(underround=round(underround, 4))`

                    `)`

                    `market.place_order(order2)`

`def _calculate_underround(runners: list) -&gt; float:`

    `return sum(`

        `[`

            `1 / r.ex.available_to_lay[0]["price"]`

            `for r in runners`

            `if r.ex.available_to_lay`

        `]`

    `)`

But nothing ever appears in the notes in the logging csv output. There is a notes field already there but it's always empty.

---

## 2021-09-07 10:24:19 - general channel

**Stefan**

[@U013K4VNB6D](@U013K4VNB6D) Bot sdk contains C# bot examples as well, and as my framework is written in .net you can use it from any programming language the .net offers, so even in iron python, you can simply recode for instance this code in any .net supported language:



[https://github.com/StefanBelo/Bfexplorer-BOT-SDK/blob/master/TestStreamingAPI/Program.fs](https://github.com/StefanBelo/Bfexplorer-BOT-SDK/blob/master/TestStreamingAPI/Program.fs)



When I am totally bored in my day job I can do it and recode that same code to Visual basic and C#

---

## 2021-09-07 10:20:28 - general channel

**Jeff Waters**

Do you think the reason that you don't get offers to help with source code is simply because F# is a pretty niche language that few people are able to program in?



For example, when I search for F# jobs in the UK on Indeed, I get 75 ads, whereas when I search for C# jobs, I get 8,064 ads.

---

## 2021-09-07 10:17:09 - general channel

**Unknown**

I may consider to open source data analyzer part, as I use scripts for showing charts, so some users could be able to share such scripts, but really my experience is that it is just waste of my time. Well yes some people know how to use google, and they had found my github sporadically, but all that ends only asking me to build some bespoke bots for them, so none collaboration on source code.



App can execute scripts, like this one

---

## 2021-09-07 09:48:08 - general channel

**Stefan**

It is data recorded by my app, yes from streaming api

---

## 2021-09-07 09:47:24 - general channel

**Jonjonjon**

Is it the streaming data, with up to 20 updates per second?

---

## 2021-09-07 09:38:38 - random channel

**Jonjonjon**

His video's don't actually contain any info on how to bet. He just has click-bait titles, and then really vague content

---

## 2021-09-07 09:31:39 - random channel

**Oliver Varney**

Yes probably why it was one of his best! Nothing like a good rant vs some professional person not answering the question you ask  Realistically we should be somewhat greatfull for him bringing in less competitive money onto the exchange through the people who watch his videos.

---

## 2021-09-07 08:54:17 - random channel

**D C**

Yes its a fair point. I just find the whole thing a bit hypocritical to be honest. In my experience alcohol abuse and smoking cause far more harm but people can be "trusted" to make decisions for themselves in this regard. I say all this as someone who until recently had lost a lot of money gambling over the years and at times been close to developing a problem. Point is that had these restrictions been in place during some of my more problematic spells, I would simply have placed bets manually or asked others to place them on my behalf. I genuinely think it solves nothing.

---

## 2021-09-07 06:37:31 - general channel

**liam**

How many cores do you have? Python/bflw/flumine will happily use all of them and max them out if backtesting 

---

## 2021-09-06 22:12:16 - random channel

**Jonjonjon**

[https://github.com/liampauling/flumine/pull/488](https://github.com/liampauling/flumine/pull/488)

---

## 2021-09-06 19:39:47 - general channel

**liam**

[@U013K4VNB6D](@U013K4VNB6D) you really want to be using [https://liampauling.github.io/flumine/quickstart/|listener_kwarg](https://liampauling.github.io/flumine/quickstart/|listener_kwarg)s to turbo charge the backtest 

---

## 2021-09-06 19:34:21 - general channel

**Jeff Waters**

Thanks Thambie



I'll have a go at multiprocessing (though it may be beyond my current Python abilities, which are rather modest!).

---

## 2021-09-06 18:11:48 - general channel

**ShaunW**

I find just being organised is easier than a tech solution or spending money. I test a few strategies at the same time, log enough info to allow many ways to look at it afterwards and run them overnight locally. I'm not a flumine user so I can't compare but takes me about 15hrs to run 12months of UK horses with 2 or 3 fairly intensive strategies. I never find I'm sat waiting for it with nothing to do because each run creates more than a day's work.   Similar approach to the recent question about disk full warnings, the answer is to just be organised enough not to get them, scheduled archiving etc.

---

## 2021-09-06 16:24:53 - general channel

**Unknown**

I found this with the search: [https://betfairlightweight.slack.com/files/U01SCPDTV5J/F02C21VMQ1J/multiprocessing_backtest_py.py](https://betfairlightweight.slack.com/files/U01SCPDTV5J/F02C21VMQ1J/multiprocessing_backtest_py.py)

---

## 2021-09-06 13:35:06 - general channel

**PeterLe**

Thanks, but Ive had some great help from the folk on here

---

## 2021-09-06 11:14:53 - general channel

**Peter**

Doesn't need to wait until market close, which carries the risk of losing order data if something interrupts the stream or the market closure doesn't come through for any other reason. I have a database logging control that inserts orders during _process_order() and updates them during _process_cleared_orders_meta()

---

## 2021-09-06 10:48:44 - issues channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/backtest/simulated.py#L376](https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/backtest/simulated.py#L376)

---

## 2021-09-06 09:31:05 - general channel

**Oliver Varney**

sending stuff to a database for cataloging can be done post market using flumine logging control (I think its a on market close event), unless you really really need it somewhere in a relatively decent time frame.

---

## 2021-09-06 08:11:38 - general channel

**Mo**

If it's blocking I/O such that the thread can yield then it's OK. But if you block the entire application for 4 - 5 seconds you will have major problems

---

## 2021-09-06 08:04:08 - general channel

**Mo**

However really that worker needs to be a separate process because you don't want to hold things up while you make an expensive database insertion

---

## 2021-09-06 08:03:16 - general channel

**Mo**

I'm not a flumine user but I think a generic approach to this would be to have a queue that you push requests for database insertion on to and then a worker that pulls off the queue and does the actual insertion

---

## 2021-09-05 17:50:51 - general channel

**Jeff Waters**

Thanks Jack



I know how to access a particular file, viz something like:



markets = ["tests/resources/PRO-1.170258213"] (from [https://github.com/liampauling/flumine/blob/master/examples/backtest.py](https://github.com/liampauling/flumine/blob/master/examples/backtest.py))



What I'm not clear is how to get my program to go through the entire directory tree and extract every bz2 file. Would I need to do a traversal of the directories, using something like this? [https://www.pythoncentral.io/how-to-traverse-a-directory-tree-in-python-guide-to-os-walk/](https://www.pythoncentral.io/how-to-traverse-a-directory-tree-in-python-guide-to-os-walk/)

---

## 2021-09-05 15:25:02 - general channel

**Mo**

Global interperer lock. It means Python is inherently single threaded

---

## 2021-09-05 12:26:47 - general channel

**Mo**

I have to say even though I do things this way I agree with [@ULDAVFDRP](@ULDAVFDRP) and [@U4H19D1D2](@U4H19D1D2) - it sounds like the problems you are currently experiencing have much simpler solutions for now

---

## 2021-09-05 12:20:36 - general channel

**liam**

However I wouldn’t recommend the complication unless you are trying to solve something, I wouldn’t consider the connection limit a problem to solve 

---

## 2021-09-05 12:17:45 - general channel

**Jonjonjon**

[@U4H19D1D2](@U4H19D1D2) do you have any thoughts on the cleanest way to do this with Flumine?

---

## 2021-09-05 11:03:25 - general channel

**Oliver Varney**

For me at least strategies are associated with a sub account, and config is loaded from a database on start up, so I typically run a single process for an account which just loads in multiple strategies. Not sure if others do similar, I guess it may depend on where / how you code your logic

---

## 2021-09-05 00:33:12 - issues channel

**Adrian**

I am having the same problem. I've been looking into the code to try and learn how it works after Liam said it shouldn't be happening, but knowing it's probably my code that's wrong

---

## 2021-09-04 23:09:54 - general channel

**Lee**

Streaming is lightweight

---

## 2021-09-04 22:57:49 - general channel

**Jonjonjon**

So I have a cronjob that runs every 10 minutes. It runs a Python script that watches markets that are starting in the next 10 minutes. When those markets close, the Python script is suppose to close too.



It closes them when it detects that flumine has zero open markets. i.e.



```if len(framework.markets.open_market_ids) == 0:

    [http://main_logger.info|main_logger.info](http://main_logger.info|main_logger.info)('No more open markets, terminating')

    framework.handler_queue.put(TerminationEvent(framework))```



---

## 2021-09-04 21:37:35 - general channel

**Lee**

You could probably do something like flumine.streams but why would you want todo that?

---

## 2021-09-04 21:29:53 - general channel

**Jonjonjon**

What if I want to do it from within Flumine in realtime, rather than after the event?

---

## 2021-09-04 21:08:49 - general channel

**Jonjonjon**

When starting a flumine session, what's the recommended way to identify whether or not the streams have connected or not yet?

---

## 2021-09-04 12:07:29 - strategies channel

**birchy**

For laying, would there be anything wrong with using either `stake = target / price` or `stake = target / (price - 1)`, where `target = random.choice([£10, £15])` at the market level?



To be more specific, the question is: regarding market impact/exploitation, is it better to use a flatter stake such as £5 rather than a calculated £4.85?

---

## 2021-09-04 10:15:48 - general channel

**liam**

Yep, currently no public property for you to store info, ideally we would add `RunnerContext.context` for this in flumine itself

---

## 2021-09-04 03:30:34 - issues channel

**Adrian**

No haven't touched it but more than a few of my markets are incomplete due to dropouts so maybe it's that. Anyway I am trying a different approach with regard to how many bets i place so if I see the same problem then i'll know it's something else

---

## 2021-09-03 21:27:53 - issues channel

**Jonjonjon**

can a single flumine sessions use more than one connection?

---

## 2021-09-03 21:22:48 - issues channel

**liam**

Are you using latest version of bflw 

---

## 2021-09-03 19:36:56 - strategies channel

**Beeblebrox**

I guess like any job really.  Anyway, thanks for your help again.

---

## 2021-09-03 19:28:28 - strategies channel

**Beeblebrox**

:joy: great... Genuine question, do you actually enjoy what you do?  For me, it's just a side project with a chance to learn some new things and make a bit of money.  But if it was my sole income I'm not sure I'd particularly enjoy it.

---

## 2021-09-03 18:34:56 - strategies channel

**Oliver Varney**

naive question, but IP does £2 or £4 really make a difference, are volumes that tight?

---

## 2021-09-03 18:31:32 - strategies channel

**Michael**

[@U01MPC0GUK1](@U01MPC0GUK1) I'd lean towards £2 and £4 if that were the question - but £2 and £3 is probably a better idea.

---

## 2021-09-03 15:36:41 - random channel

**Mo**

I guess the problem is the number of combinations (runners). Not sure whether it's both a problem in the backend (API) and how to display it on the frontend or whether it's just a display issue that could be solved with a better user interface

---

## 2021-09-03 13:51:34 - issues channel

**mandelbot**

I had this problem and it turned out it was an issue with how I was recording the markets. Did you change that code at all?

---

## 2021-09-03 13:35:57 - general channel

**Pedro Lima Monteiro**

Hi. I am facing a problem that is not specific of this library but I am looking for any help since I ran out of ideas as to why this is happening. My connection to betfair exchange stream api is reset by betfair every 30 minutes at approximately minute 2 and minute 32 of every hour. Any idea as to why this is happening? Any kind of help is appreciated. Thank you.

---

## 2021-09-03 10:39:02 - issues channel

**Adrian**

Obviously it's never going to clear if it keeps triggering, so best to never trigger it hey. Sorry for the stupid question!

---

## 2021-09-03 10:15:08 - issues channel

**liam**

the logs will tell you the problem, all the examples have logging enabled, whats the problem?

---

## 2021-09-03 10:08:59 - issues channel

**Adrian**

I don't know how to make the logs work for both so I can only see what the logging control creates

---

## 2021-09-02 20:37:06 - random channel

**Jonjonjon**

I was getting an insurance quote from Aviva, and one of the questions asked if I was a professional footballer, entertainer, gambler or student. Why would being a professional gambler affect the premium?

---

## 2021-09-02 11:21:51 - random channel

**Peter**

Their T&amp;Cs include the ability to gub you or close your account, however that's no indication as to how quickly they apply those actions. For me the real problem with bookmakers is the execrable odds offered for the dogs.

---

## 2021-09-02 09:29:40 - general channel

**liam**

trades have a [https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/order/trade.py#L48|date_time_created](https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/order/trade.py#L48|date_time_created) you can use

---

## 2021-09-02 03:40:35 - general channel

**JK**

What would be the best way to read in my prices from a CSV every x minutes using flumine? any suggestions where to put it? thanks in advance

---

## 2021-09-01 17:19:55 - random channel

**liam**

If so I have helped pay for it :man-facepalming:

---

## 2021-09-01 07:50:52 - general channel

**liam**

Although Adrian its a 5 second job to read the first line of a streaming file to work out the marketType from the definition ([https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/streams/streams.py#L42|this](https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/streams/streams.py#L42|this) is how flumine does it anyway)

---

## 2021-08-31 08:07:38 - general channel

**liam**

1. Yes that is correct, FIFO queue

2. You can do that, note there is a warning [https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/baseflumine.py#L128|log](https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/baseflumine.py#L128|log) if the MarketBook is delayed by over 2s from publishTime. Conflation would be a separate issue where your connection (or CPU) is limited and unable to read off the socket quick enough, this would not be impacted or caused by the handler_queue size

3. Have a look at the [https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/baseflumine.py#L149|code](https://github.com/liampauling/flumine/blob/f0e7e6542942d00685ceb6d72951456684998739/flumine/baseflumine.py#L149|code), its called when processed by the queue and before strategies etc are called

---

## 2021-08-30 15:23:13 - general channel

**Mons___das**

A broad customer base is fundamental for any exchange. If a certain threshold is surpassed, the exchange would collapse into a dry desert pretty quickly. I think the problem is that betfair has little to no motive to push the exchange and the marketing campaigns from bookmakers are way bigger. Also some of main the advantages just can not be advertised by betfair itself. Get better odds? Kinda implies bad odds on the sportsbook, but sure this one goes. Dont actually get banned when winning? Well, this is a big advantage of the exchange, but no way betfair would say that :smile: I think its partially up to the players to showcase the exchanges advantages. As much as ppl like Caan (at least before his vids got a slightly negative touch towards betfair) and that guy selling courses and posing with his big winnings are doubted here, those guys are doing the big players a big favor with how many ppl they attract

---

## 2021-08-30 12:07:29 - general channel

**Steve**

Just a 3 quick questions to clarify how the flumine queue works. Firstly, it seems that both the order stream and market stream fill the same handler_queue - so if I get an order update arrive just before a market update the order update will need to be processed before the process_market_book function starts processing the market stream update? Is that right? Or can orders and a marketbook be processed asynchronously? Secondly, is the best way to check if a backlog of updates is building up in the queue just to check with handler_queue.qsize() - or do I just have to rely on looking for a True conflation flag in streamingupdates? Finally, if a market_definition update is received. When will it be reflect in the attributes of the Market object in flumine - when that information is first received - or when that marketbook gets to the front of the handler_queue and is processed?

---

## 2021-08-30 06:00:28 - strategies channel

**Adrian**

Seems I'm just confused. Like, I'm looking at something that's telling me some basic truth but I don't know how to interpret it

---

## 2021-08-30 02:10:31 - strategies channel

**ShaunW**

Is this chunking a (by)product of the tools you're using ie simpler, faster, indicative enough? The output from my analysed data extracts and backtest/sims is very granular and viewing the output as smooth or chunky are equally easy.  I don't use the Flumine/Python stuff, so I'm not alway sure how much the methods advocated are driven by how that works.  Time is valuable though so if it's primarily about quick and dirty I get it, you can usually see the story in 640x480 without having to go full 4k.

---

## 2021-08-28 17:41:17 - general channel

**Dave**

Pretty sure you can access the bet delay from the market object in flumine I think (or marketbook object, can't remember)

---

## 2021-08-28 10:49:12 - strategies channel

**Jonjonjon**

Yes. Or edge. A possible problem with using profit is that, if you are doing single bets (or back to lay) per market, the analysis might not take into account partial fills.

---

## 2021-08-27 14:11:20 - general channel

**Mo**

It doesn't make sense to use Flumine to convert them

---

## 2021-08-27 13:15:17 - general channel

**Steve Roach**

Thanks for that, Mo. I'll see what I can do with that.



In the meantime, do you know if there is a Flumine example for the same result?

---

## 2021-08-27 09:54:20 - general channel

**liam**

Have a read of the [https://github.com/liampauling/flumine/blob/6f4782901eb7abdf1a68786d575be5dd111d79b8/flumine/markets/blotter.py#L103|code](https://github.com/liampauling/flumine/blob/6f4782901eb7abdf1a68786d575be5dd111d79b8/flumine/markets/blotter.py#L103|code)

---

## 2021-08-27 09:28:10 - general channel

**JK**

is the best way to find current total exposures on a selection using flumine to use `blotter.get_exposures()`? and if so, what does `matched_profit_if_win` and `matched_profit_if_lose` mean? e.g. if I have a matched back $2 stake @ $10, and a matched lay $1 stake at $10, would `matched_profit_if_win` return $18 profit, or $9 profit? and what would `matched_profit_if_lose` return? thanks in advance

---

## 2021-08-27 07:32:20 - general channel

**JK**

thanks [@UPMUFSGCR](@UPMUFSGCR) thats very helpful. Will try make it quicker than that.



[@U9JHLMZB4](@U9JHLMZB4) how do you choose to receive updates less frequently?

---

## 2021-08-26 17:07:36 - general channel

**Pedro Lima Monteiro**

I am not against writing to a file that I am after capable of reading.

I just want to have the data stored in the database as fast as possible and was wondering if anyone had experienced the same issue and looking for a possible solution.

---

## 2021-08-26 17:05:57 - general channel

**liam**

Assuming the delay isn’t a problem just create a thread pool to process the data / send to mongo although I would question why you just don’t record the data to a text file 

---

## 2021-08-26 17:00:32 - general channel

**liam**

Assuming you are using the queue to read the data it is likely you are exhausting your CPU, have you monitored to isolate the bottleneck? Easy alternative would be to record streaming data to a txt file (or redis) and then use a separate process to send to mongoDB

---

## 2021-08-26 10:18:09 - general channel

**S G**

Just a follow up question on wide filter for a stream. Do this hit 200 market limit at all?

---

## 2021-08-26 09:55:53 - general channel

**George**

Morning guys, I am starting to use BFLW streaming to get market data and I am wondering about how connections are used / managed. I have heard somewhere that BF allows you to use up to 10 connections but I don't really know how to make the best use of that. I am assuming BFLW default behaviour is just to use one connection?

---

## 2021-08-25 21:46:42 - random channel

**Crofty**

You did a fine job. Helped even more by the fact it wasn't on YouTube and you weren't saying "For more videos like this, smash that subscribe button"

---

## 2021-08-25 17:34:54 - general channel

**Peter**

As to how to deal with it, given that none of the data has changed, I'd simply not worry about it. I do have scripts that process the closed data, but they wouldn't care which of the closure messages the processed or whether the 2nd overwrote the first since the data is the same. Does this give you a specific problem?

---

## 2021-08-25 13:50:04 - random channel

**Jeff Waters**

I'm not sure that you necessarily need a degree in maths. If you can self-teach, and be able to demonstrate that you know your stuff through programs you've written and your answers to interview questions, I think that would be sufficient. It might even be an advantage, as it would show initiative and a passion for the subject. However, you may find that, by the time you get to that stage, you know enough to profit from your knowledge independently (and don't need to work for someone else).

---

## 2021-08-25 12:48:41 - general channel

**Van**

could you try changing the URL in betfairlightweight/streaming/betfairstream.py ?

---

## 2021-08-25 09:30:37 - general channel

**liam**

Join github and I can help

---

## 2021-08-25 09:28:13 - random channel

**Dave**

This reminds me of a story about a caretaker who worked for a prestigious high-school with very competitive places. He'd offer to 'help' get your kid in if you paid him, and if your kid didn't get accepted then you got your money back. Genius.

---

## 2021-08-25 02:10:47 - strategies channel

**Van**

The “run it” is the hard part. I tried RNN years ago, but I could not find a standard set of practices how to organise the input data, so I was flailing. I also couldn’t “get” how it was supposed to incorporate time besides hand-wavy explanations

---

## 2021-08-24 10:04:43 - general channel

**Adrian**

ah yes. ok, i think this is what Mo was talking about. Rather than just saving to csv or whatever. he suggested postgresql

---

## 2021-08-24 09:39:33 - general channel

**liam**

look up python inheritance

---

## 2021-08-24 09:27:52 - general channel

**Adrian**

I think where my brain disconnected is where you have in the Flumine docs  `import LoggingControl` but that doesn't do anything. only `backtestloggingcontrol.BacktestLoggingControl()` does something. I don't even need to import LoggingControl

---

## 2021-08-24 09:14:41 - general channel

**Adrian**

Yes thanks. I just had an idea to put

`BacktestLoggingControl = backtestloggingcontrol.BacktestLoggingControl`

`control = BacktestLoggingControl()`

`framework.add_logging_control(control)`

and it created the output.txt file i need.

there's probably a neater way to do it? but that's the step i was missing. how to call it from flumine

previously i just had control = LoggingControl()

---

## 2021-08-24 08:16:24 - general channel

**liam**

So if you look at the code for `LoggingControl` you can see its just a base class (it doesn't do anything) you need to write your own, here is a simple example that uses one of the callbacks [https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2021-08-24 07:54:34 - general channel

**Adrian**

I've added

`from flumine.controls.loggingcontrols import LoggingControl`

`control = LoggingControl()`

`framework.add_logging_control(control)`

and imported the backtestloggingcontrol example, but i can't figure out how to call it (i.e. save the profit figure to disk)

---

## 2021-08-24 07:33:30 - general channel

**Adrian**

Nope i didn't even consider there was an example. I copied the relevant code and it works a treat, thanks! Like i said, dumb question :laughing:

---

## 2021-08-24 01:36:52 - general channel

**Adrian**

Possibly another stupid question, but I've spent an hour searching through threads. How do I get the backtest to show me the actual profit for the runner/market? I know it's placing bets because the second last update is showing "Market cleared" "order_count": 13" and the last update showing "Market closed" "transaction_count_total": 13". But nowhere does it show the outcome of those bets :thinking_face:

---

## 2021-08-23 15:50:29 - general channel

**birchy**

Oh right. I had just assumed it was automatic. What are the potential bottlenecks in Flumine? i.e. regarding market data and bet placement?

---

## 2021-08-23 15:47:38 - general channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) does Flumine automatically handle the requests session?

---

## 2021-08-23 15:22:29 - general channel

**JK**

logs, very helpful!

---

## 2021-08-23 14:57:59 - general channel

**JK**

Hi all, I am writing my first flumine bot (been running bf bots using polling API for awhile but it's time to make the switch), but I can't seem to place an order. When I use the example from  [https://github.com/liampauling/flumine/blob/master/examples/example.py](https://github.com/liampauling/flumine/blob/master/examples/example.py), if i print the order object i get "Order None: None", and if i print the response from `market.place_order(order)`, i get `False`. Does anyone know what I am doing wrong? Thanks heaps

---

## 2021-08-23 12:47:56 - general channel

**liam**

replace is hacky, how are you linking flumine orders to betfair? BetId?

---

## 2021-08-23 12:33:02 - general channel

**Steve**

BTW. I'm definitively one of the people out there who want the buy a liam and the crew a beer. Hope you're earning some lucrative consulting gigs on the back of your work with lightweight and flumine. Thanks for your all effort.

---

## 2021-08-23 11:55:45 - strategies channel

**Mo**

You should be able to do everything in flumine

---

## 2021-08-23 11:52:43 - strategies channel

**Jeff Waters**

I've written a backtesting program using flumine, which uses JSON files. I currently manually extract each file to a directory, one by one.



From this conversation, it sounds like I'd be better writing a script using Betfair Lightweight, and working with the bz2 files?



Is that correct?

---

## 2021-08-23 11:38:15 - strategies channel

**Mo**

The big question is what do you want to do with the files:



If you're using flumine to backtest then you can patch open with smart_open so it doesn't matter if your prices files are bz2 (historic) gzip (scraped) or uncompressed. It also handles reading directly from S3 and other cloud services.



If you just want a list of market book dictionaries:



```from betfairutil import read_prices_file

market_books = read_prices_file(path_to_prices_file)```

Again, the prices file can be compressed, uncompressed, in S3, stored locally, whatever.



If you just want to look at the file and you're on a Unix based operating system (including I assume Windows subsystem for Linux) then you can just do



```bzless historic_data_file.bz2```

in your terminal

---

## 2021-08-23 11:30:56 - strategies channel

**Adrian**

Well there's that. I presume bflw can do that. But I interpreted S G's question like he wanted to manually extract it

---

## 2021-08-23 11:29:00 - strategies channel

**Mo**

Why don't you want to run the deltas through betfairlightweight so you're dealing with the full market books?

---

## 2021-08-23 11:18:42 - strategies channel

**Adrian**

that's just what i learned first. how to use json

---

## 2021-08-23 11:06:19 - issues channel

**Adrian**

thanks for helping me find the problem

---

## 2021-08-23 10:12:25 - general channel

**Steve**

i also run something similar under the process_orders function. It has the same problem.

---

## 2021-08-23 08:49:45 - strategies channel

**S G**

I have got basic historic data files and they are all in .bz2 format. Looks like there is a bz2 package in python that can read file without decompressing. What do you recommend for reading these file decompress manually vs using bz2 package?

---

## 2021-08-22 13:03:42 - random channel

**Oliver Varney**

I thought Richard conducted himself well / very professionally, but questions are normally answered with high level answers with no push back.

---

## 2021-08-22 12:59:43 - random channel

**Lee**

I've not really had any of the frustrations that they talk about. I do get his points but think Caan's probably over hyped/exaggerated some of his problems.

---

## 2021-08-22 06:46:59 - strategies channel

**Adrian**

Initially yes I was running through a month of data but moved towards focussing more on alpha within markets. All I had was my eyes to see it did pretty good at predicting ltp movements but when I put it in practice the execution broke down. This was before I learned about bflw/flumine backtesting capabilities

---

## 2021-08-22 06:39:55 - strategies channel

**Oliver Varney**

not sure I understand this also, but ignoring fully flumine backtesting did you do historical testing based purely on the best availables and bsp? ML prediction should be instant basically and id guess training should take no more then a hour or so unless your DeepMind :joy:

---

## 2021-08-22 01:19:09 - strategies channel

**Adrian**

[@UPMUFSGCR](@UPMUFSGCR) you say human eyeballs are better.. what do you mean? I don't have the skills to do things like multiple linear regression or the market knowledge to come up with arbitrary rules. ML is my one tool i know how to use, i just don't know where to apply it

---

## 2021-08-21 23:27:20 - strategies channel

**Jonjonjon**

If you've learned Python in 3 months, that is a very useful skill.

---

## 2021-08-21 23:24:07 - strategies channel

**Adrian**

One of the major problems I faced was being unable to backtest due to the way ML is a black box, so that was never going to end well flying blind. By blind I mean real world results not just getting good results on a test/validation set, because that's easy enough to fool onself

---

## 2021-08-21 21:05:38 - issues channel

**Jeff Waters**

Thanks for clarifying, Lee. I've just tried that - I've updated my repository - but I'm still getting the same problem.



I've considered creating a Blotter object and adding orders to it, but I suspect that would be the wrong approach, as I get the impression that should happen without me having to explicitly invoke it.

---

## 2021-08-21 11:11:01 - strategies channel

**S G**

FYI, I added flumine to virtual env in pycharm, but it doesnt seem to have examples folder

---

## 2021-08-21 11:10:31 - strategies channel

**S G**

Hi All, trying to import MarketRecorder class from [https://github.com/liampauling/flumine/tree/720eb8168a18bbea62042d3fd0a67a0550b19e9e|flumine](https://github.com/liampauling/flumine/tree/720eb8168a18bbea62042d3fd0a67a0550b19e9e|flumine)/[https://github.com/liampauling/flumine/tree/720eb8168a18bbea62042d3fd0a67a0550b19e9e/examples|examples](https://github.com/liampauling/flumine/tree/720eb8168a18bbea62042d3fd0a67a0550b19e9e/examples|examples)/[https://github.com/liampauling/flumine/tree/720eb8168a18bbea62042d3fd0a67a0550b19e9e/examples/strategies|strategies](https://github.com/liampauling/flumine/tree/720eb8168a18bbea62042d3fd0a67a0550b19e9e/examples/strategies|strategies)/marketrecorder.py

---

## 2021-08-20 10:41:40 - issues channel

**George**

Yeah, the issue only lasted a few hours, not that this really helps you now that it's Friday...

---

## 2021-08-20 08:21:27 - issues channel

**mandelbot**

If your code isn't in the flumine bin I think you will have to import flumine?

---

## 2021-08-19 10:09:10 - general channel

**user34**

I have a non-Flumine BFLW implementation that checks the upcoming matches every 24 hours and then starts streams that only subscribe to the ones in competitions I'm interested in. It's possible start a separate stream for each 1000 markets so 5k markets is only 5 streams.

---

## 2021-08-19 09:50:59 - general channel

**liam**

Check out the blotter.py code, few helper functions in there for exactly that (on mobile so can’t link right now)

---

## 2021-08-19 07:42:22 - general channel

**Peter**

When I made that request it was pointed out that I already had 1,000 markets per stream (to be fair I thought I only had 200, so that was useful information). But even that wasn't enough. So I split my streams into major and minor competitions and also filter on market types with less major competitions but more market types for them. If I want to make changes to the streaming for any reason, I also have to be careful to restart them on a Monday morning, when there are less matches in the pipeline, as it's the number of markets when you start the stream that matters.

---

## 2021-08-18 17:34:40 - general channel

**D C**

Maybe someone can help me with this observation? Given my above post on the conflate flag, I now see that I am getting one response packet with the conflate flag set true at regular intervals roughly every 15 seconds. Can anyone suggest any plausible reason for this? It seems far too regular to be purely random. I still can't decide if this is a problem or not but the regularity of this message has dug into my OCD a little bit and I am struggling to find a sensible reason.

---

## 2021-08-18 15:56:19 - general channel

**D C**

Not sure how old my documentation is but thought I would bring it up incase anyone else is looking for "conf" instead of "con". If indeed anyone considers getting the conflate flag to be a problem at all

---

## 2021-08-18 15:50:07 - general channel

**D C**

Does anyone routinely check for the conflate flag set in the price stream?? If so do you consider it a problem?

---

## 2021-08-18 15:16:51 - random channel

**Lee**

yep [https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/flumine/worker.py#L228](https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/flumine/worker.py#L228)

---

## 2021-08-18 15:06:50 - random channel

**Lee**

I've just noticed in your logs you're running with paper_trade=True, that will be the problem as you won't have any orders

---

## 2021-08-18 15:05:00 - random channel

**Lee**

The one with level is the one you're looking for, which is the `_process_cleared_markets` method called from baseflumine and your one should be just after this

---

## 2021-08-18 15:04:05 - random channel

**Newbie99**

Actually I say that, this is the message in the above:



```INFO:flumine.baseflumine:Market cleared```

not market _level_ cleared, is the above expected?

---

## 2021-08-18 13:56:37 - strategies channel

**S G**

Has anyone tried running strategies/python code in raspberry pi?

---

## 2021-08-18 12:14:02 - strategies channel

**liam**

3 is certainly something I want to look at developing as an alternative middleware in flumine, I just wonder if it would actually be more accurate than the current logic (obviously stake size dependant)

---

## 2021-08-18 08:43:45 - random channel

**liam**

On your test do you have orders on the market? [https://github.com/liampauling/flumine/blob/720eb8168a18bbea62042d3fd0a67a0550b19e9e/flumine/worker.py#L250](https://github.com/liampauling/flumine/blob/720eb8168a18bbea62042d3fd0a67a0550b19e9e/flumine/worker.py#L250)

---

## 2021-08-17 14:49:19 - random channel

**Newbie99**

Still can't get this working, I can see the control is added to the framework here:



```framework.add_logging_control(MyLoggingControl())```

and I can see from the logs that it is definitely added.



The meta event I can see is sent here and if I try to capture that it works fine:



[https://github.com/liampauling/flumine/blob/720eb8168a18bbea62042d3fd0a67a0550b19e9e/flumine/baseflumine.py#L314](https://github.com/liampauling/flumine/blob/720eb8168a18bbea62042d3fd0a67a0550b19e9e/flumine/baseflumine.py#L314)).



So I'm missing a step I think, I can see the ClearMarketsEvent is being sent here, but the control never seems to receive this event:



[https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/flumine/worker.py#L252](https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/flumine/worker.py#L252)



I presume its something blindingly obvious, but I'm missing it!

---

## 2021-08-17 13:43:42 - random channel

**Lee**

The one caveat to that is the cleared market call will only group orders from that flumine instance but you could easily create your own worker that does similar

---

## 2021-08-17 13:36:23 - random channel

**Newbie99**

Apologies, I'm probably being dense, but in order to use that approach, do I not need to tweak the source code (which I was hoping to avoid), I'm perhaps missing the obvious in how I can get that into a custom class (e.g. that backtest logging control example), without adjusting some of the source (of course if that is the only way so be it, not a problem, was just hoping to avoid it if pos)?

---

## 2021-08-17 13:27:38 - issues channel

**Unknown**

Got it [@U01LD279D16](@U01LD279D16) thanks - [https://betfairlightweight.slack.com/files/UPMUFSGCR/F013J0H5F3M/backtest_multi.py](https://betfairlightweight.slack.com/files/UPMUFSGCR/F013J0H5F3M/backtest_multi.py)

---

## 2021-08-17 13:12:59 - issues channel

**Jack**

[https://github.com/liampauling/flumine/issues/478](https://github.com/liampauling/flumine/issues/478)

---

## 2021-08-17 12:54:40 - random channel

**Lee**

There's already a worker that does this for you [https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/flumine/worker.py#L226|here](https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/flumine/worker.py#L226|here) and be able to process [https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/controls/loggingcontrols.py#L68|here](https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/controls/loggingcontrols.py#L68|here)

---

## 2021-08-17 12:50:25 - random channel

**Newbie99**

Looking at logging controls, particularly this example (which I have up and running fine):



[https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py)



Am I correct in saying that currently the best way to capture net profit (i.e. market level grouping of cleared orders, including com) at the same time would be to make a seperate call to list_cleared_orders (with market grouping) when the ClearedOrdersMetaEvent event comes through (currently I just make 2 calls periodically for market and order level, but the logging control approach seems a bit neater than my current approach)?



Appreciate its probably the obvious answer (I've had a look through baseflumine and I think my assumption is correct, but just wanted to check), I'm just always paranoid about making too many API calls!

---

## 2021-08-17 05:53:19 - strategies channel

**Mo**

1. Use `group_by='MARKET'` argument

2. Call the function once an hour and save the results to database

3. Your database table should have 2 columns: betfair_market_id and cleared_order_summary

4. I suggest using postgresql because then your cleared_order_summary can be of type json(b)

5. Do an upsert when updating: if the market ID doesn't already exist then insert. If it does exist then replace the cleared_order_summary with what you just received from Betfair

6. For efficiency you can utilise the `settled_date_range` argument. For example, only get markets settled in the last 24 hours when your script runs

---

## 2021-08-16 16:55:12 - strategies channel

**Van**

Question about a site like [http://footystats.org|footystats.org](http://footystats.org|footystats.org). Any idea whether I can just pay for 1 month, download all the data and then unsubscribe?

---

## 2021-08-16 15:59:13 - strategies channel

**Unknown**

Something to get you started in horse racing: [https://betfairlightweight.slack.com/files/UBS7QANF3/FV582N4CE/lessmann2010.pdf](https://betfairlightweight.slack.com/files/UBS7QANF3/FV582N4CE/lessmann2010.pdf)

---

## 2021-08-16 15:58:30 - strategies channel

**Unknown**

Seminal paper for football: [https://betfairlightweight.slack.com/files/UBS7QANF3/F010NTJJK88/dixoncoles.pdf](https://betfairlightweight.slack.com/files/UBS7QANF3/F010NTJJK88/dixoncoles.pdf)

---

## 2021-08-16 15:02:20 - issues channel

**ShaunW**

I've had similar connection issues today (briefly in the early hours of the morning, ie 8am:slightly_smiling_face:) . but OK now. I mention it because I don't use bflw etc so that isn't where any issues lie although [@U4H19D1D2](@U4H19D1D2) probably knows that already.

---

## 2021-08-16 11:52:17 - general channel

**George**

i think the problem with the values they give is that they are stale.

---

## 2021-08-16 11:23:13 - general channel

**Newbie99**

Does that help?

---

## 2021-08-16 10:31:39 - strategies channel

**S G**

how to best organise the files?

---

## 2021-08-16 10:31:15 - strategies channel

**S G**

Thanks Mo, always helpful

---

## 2021-08-16 09:51:49 - strategies channel

**Mo**

Both can work, personally I prefer to keep them in flat files. I think [@ULDAVFDRP](@ULDAVFDRP) puts them in a database

---

## 2021-08-16 09:50:26 - strategies channel

**S G**

One more question, any best practices for storing historic data? like use a database with normalisation or store in file per market etc

---

## 2021-08-16 08:18:31 - general channel

**Peter**

Step 1 is obtaining the data, which most of us do using the marketrecorder to which [@U016TGY3676](@U016TGY3676) has linked.



Step2 is using Flumine to stream that data. It will build the market cache (including the ladders) and you can then extract the information that you think will be useful to whatever ideas you have for strategies.

---

## 2021-08-16 00:08:03 - general channel

**Steve Roach**

Thanks for that, [@U016TGY3676](@U016TGY3676) . I was looking for something more standalone and, also, not just storing raw data but processed.



Maybe something like [https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py|https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py|https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py) but one that builds the ladder as well.

---

## 2021-08-15 23:35:53 - general channel

**birchy**

[https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py|https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py|https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py)

---

## 2021-08-15 23:01:07 - general channel

**Steve Roach**

I’d like to start building a history of market data with Flumine. Can anyone point me some code to get me started?

---

## 2021-08-15 11:52:31 - issues channel

**ThomasJ**

Sorry, already added issue to Flumine.

But given the confusion caused by Betfair perhaps just ditch the recording of total_matched on every update in BFLW.

ie drop the the thing entirely - it's not used anywhere other than Flumine AFAIK. And if someone needs to know runner total traded then `sum([vol['size'] for vol in runner.ex.traded_volume])` suffices.

Anyway no need to reply just throwing my thoughts in.

---

## 2021-08-15 11:27:52 - issues channel

**liam**

It’s a bflw issue but changes might need to be added to flumine, I can look at this tomorrow 

---

## 2021-08-15 10:43:34 - issues channel

**AR**

Thanks for your help, this solved the issue :)

---

## 2021-08-15 05:42:38 - issues channel

**AR**

Awesome! Doing it in BFLW

---

## 2021-08-14 15:29:46 - general channel

**liam**

Tbh I think the bar is very low, just make some bets and you will be fine, if you have problems send me a message 

---

## 2021-08-14 14:13:43 - random channel

**Laybot McBackbot**

Thanks guys. I agree with both of you. I guess it's just my OCD, one is not enough -- I want to beat of all them, and that's not helping me. I guess I really need to focus on fully exploiting the market that I already know how to be profitable.

---

## 2021-08-14 12:39:41 - random channel

**Michael**

I can't agree with that [@UEA14GBRR](@UEA14GBRR) - I think the markets are quite different, just look at the volumes if nothing else. Regarding what you mean by 'cracked' what I'm really getting at is that it probably doesn't make sense to move on from (say) UK racing just because you're making a few quid per market. There's far more capacity in UK racing, if your profits from Aus are the same as UK then maybe you're not exploiting the UK to the fullest - in which case have you really 'cracked' it? If you're thinking about how to get the best return on your time just expanding into new markets isn't the only option. UK racing has room to give more income than anyone could spend - might your time be better spent getting more out of that?

---

## 2021-08-14 08:52:39 - random channel

**Laybot McBackbot**

Thanks, all! Very happy to hear that some people have cracked them all. Now I just need to figure out how to do it myself.

---

## 2021-08-13 20:05:42 - random channel

**Laybot McBackbot**

Question: How many of you bet/trade all AU + US + GB/IRE races and doing well at all of them?  I don't have problem being profitable at GB/IRE races but for months I have not been able to crack AU markets and all the $$$ I made from former I lost them trying to crack the latter. I also get mixed results for the US markets, but that's probably due to both the markets liquidity and volatility.

---

## 2021-08-13 19:59:46 - random channel

**Michael**

...and totally not a stupid question by the way.

---

## 2021-08-13 19:41:02 - random channel

**Oliver Varney**

Not sure if this is a stupid question, but if you took the IP mid odds at lets say 1f out across all races, how accurate are they on average at the percentage chance of winning?

---

## 2021-08-13 11:29:06 - general channel

**Rach**

And how does streaming work in general for you? It's mandatory to implement it if you want to get tick/data right?

---

## 2021-08-13 10:52:33 - general channel

**Mo**

[@U9JHLMZB4](@U9JHLMZB4), I thought the problem with your one without prices was the controls weren't displayed, not the lack of prices?

---

## 2021-08-13 10:42:38 - general channel

**PeterLe**

morning folks, simple question please...for the price ticks away function in flumine utils, can you use the LTP as well as the back/lay? if so, would it be like so: new_target_price = price_ticks_away(runner.last_price_traded, 2) thanks in advance

---

## 2021-08-13 07:23:35 - general channel

**Mo**

Icons solved by this workaround: [https://github.com/googlecolab/colabtools/issues/1302](https://github.com/googlecolab/colabtools/issues/1302)

---

## 2021-08-13 07:20:26 - general channel

**Mo**

Looks like the problem is the graph even though I can get the graph working by itself. There are also some issues even when the dashboard can be brought up including:



1. The slider for navigating through the market doesn't work

2. None of the icons on the buttons display

---

## 2021-08-13 06:47:06 - random channel

**Adrian**

Thanks. That's something I should be focusing more on. My problem is I've started with a system that can't be backtested (easily). So maybe that's the way forward

---

## 2021-08-12 22:55:13 - general channel

**Michael**

[@U4H19D1D2](@U4H19D1D2) not using Flumine - is there any reason not to pass a session to the client?

---

## 2021-08-12 21:04:12 - general channel

**Jan**

[@UBS7QANF3](@UBS7QANF3) in your presentation you said it would be nice if people had easy access to a hosted python environment, so they don't need to go through the struggles setting environments up. I think google colab serves that case pretty well.



I've set up the dashboard branch in a colab, so all non coders can basically just upload their market file and use your dashboard right away:

[https://colab.research.google.com/drive/1D362tW_TkPQdxX7UXqiLgTWZIZIcOmxr?usp=sharing](https://colab.research.google.com/drive/1D362tW_TkPQdxX7UXqiLgTWZIZIcOmxr?usp=sharing) (if you intend to use it, please make a copy for yourself, after all this is "colab", so people can see and interrup what you're doing).

---

## 2021-08-12 14:42:37 - random channel

**Oliver Varney**

Im probably missing the obvious but, im trying to answer the questions, what was the adjusted price I requested, what was the adjusted price I matched at ( I can grab this either from the order or cleared orders) and the relation. Im not sure about the adjusted request price part

---

## 2021-08-12 11:36:34 - general channel

**Mo**

You go to Betfair via Cloudflare so the important question is what Cloudflare does

---

## 2021-08-12 11:23:51 - general channel

**Mo**

Cloudflare documentation states they keep connections open for 900 seconds after the last request. I suggest you test to confirm this 

---

## 2021-08-12 11:08:04 - general channel

**liam**

However flumine has been designed so that you can use your own middleware and simulation logic if you want to

---

## 2021-08-12 11:04:45 - general channel

**Oliver Varney**

[https://liampauling.github.io/flumine/quickstart/](https://liampauling.github.io/flumine/quickstart/)

---

## 2021-08-12 10:55:47 - general channel

**Oliver Varney**

stupid question incoming, but does this mean I should be passing a session into the apiclient for flumine, not sure if I currently do but worth a check by the sounds

---

## 2021-08-12 10:46:04 - general channel

**George**

so if i pass an aiohttp session to the client then maybe i can use async without rewriting BFLW?

---

## 2021-08-12 10:34:54 - general channel

**liam**

tbh I don't really understand your question, however when simulating orders you have two parts, the initial place and check if a match occurs and then the constant check to see if an updated marketBook results in a match on the executable order



the code `_calculate_process_traded` is doing the latter, checking the piq (position in queue) and then the size remaining to see if `update_matched` needs to be called

---

## 2021-08-12 07:46:24 - random channel

**Beeblebrox**

That's a question only you can answer surely, but if I wasn't enjoying something or I wasn't gaining anything from doing it, either financially or through learning new things, then I'd definitely stop and do something else. Life's too short.

---

## 2021-08-12 06:30:52 - random channel

**Mo**

Not exactly because I don't consider my profits small and I don't think liquidity or competition are big problems for me but the existential threat of being completely dependent on Betfair does keep me up at night

---

## 2021-08-11 17:30:40 - issues channel

**birchy**

Although I agree that gambling addiction is a problem for some, this is potentially damaging for us: "_Maximum stakes may also be imposed"_

---

## 2021-08-11 15:08:38 - general channel

**D C**

I've seen a few of you talking about Redis and from what I understand (limited) it is a RAM based database. Is it inherently thread safe?

---

## 2021-08-11 14:37:11 - general channel

**George**

would I not have to rebuild a lot of BFLW to send the request myself

---

## 2021-08-11 14:31:07 - general channel

**George**

yes, i'm asking about the scores API, and the reason I am asking is because they don't have a streaming version so it's their own fault if they get too much traffic

---

## 2021-08-11 14:24:15 - general channel

**George**

maybe i wasn't clear about the use case. i know how to do polling in the background in a thread, but i want to do asynchronous polling to increase the frequency

---

## 2021-08-11 13:53:54 - general channel

**George**

do you mean use multithreading rather than python 3's built-in async/await?

---

## 2021-08-11 12:24:16 - random channel

**Oliver Varney**

sorry I havent explained this well, and thanks for the above, the request is getting called from a baseendpoint class which makes a request to an external service and returns a type of baseresource. Ive just checked bflw and it also uses the Type[BaseResource] convention.

---

## 2021-08-11 12:20:56 - random channel

**Oliver Varney**

yup I was more questioning the correct typing convention to use, i.e. the Type[] part

---

## 2021-08-11 12:16:20 - random channel

**Oliver Varney**

Boring question incoming for the python typing nerds, is there a correct way to say the input should be any type of BaseResource or anything that extends that? is Type[BaseResource] correct?

---

## 2021-08-11 11:55:09 - general channel

**George**

Hi All! When using the Scores API there's no streaming alternative so I'm wondering whether anyone makes asynchronous requests. As far as I know it's not possible to do this using BFLW because the BaseEndpoint uses requests rather than aiohttp. Is that right? Has anyone else solved this problem / come up with a better idea?

---

## 2021-08-11 09:01:31 - issues channel

**liam**

Its the same as in `process_market_book` all orders are in the blotter which you can get from `market.blotter` a few helper functions in there as well so worth reading the [https://github.com/liampauling/flumine/blob/4f6fa1b9a2ab4c70f6bcec5888a012c17d47a3c0/flumine/markets/blotter.py#L43|code](https://github.com/liampauling/flumine/blob/4f6fa1b9a2ab4c70f6bcec5888a012c17d47a3c0/flumine/markets/blotter.py#L43|code)

---

## 2021-08-11 08:22:53 - strategies channel

**Adrian**

[@U9JHLMZB4](@U9JHLMZB4) yep that's what I'm trying to do, simply getting the value between my order and bsp. it will help me reduce my commission, which is my main competitor atm

---

## 2021-08-11 03:13:31 - strategies channel

**mandelbot**

Once BSP is compiled it will adjust your stake according to the liability you requested. This is done by betfair not flumine.

---

## 2021-08-10 16:25:42 - general channel

**Jono**

That sounds like a great way to tackle this problem. Thanks very much!

---

## 2021-08-10 15:53:44 - random channel

**PeterLe**

yea in-play [@U0128E7BEHW](@U0128E7BEHW) , just testing the waters with Flumine, very cautious for now. the objective really was just a bit of fun and to show that someone with a tiny knowledge of Python (ie such as me) can cobble something together.

---

## 2021-08-10 10:49:32 - strategies channel

**Unknown**

And when I run the bet_analysis.py



$ python bet_analysis.py

---

## 2021-08-10 02:00:58 - strategies channel

**Adrian**

The problem with hedging is execution. It's not viable in low liquidity markets as you usually just end up getting matched on the shitty side more often than the ev side

---

## 2021-08-09 23:09:02 - strategies channel

**Unknown**

I've been doing some backtesting with flumine.



With hedging, the equity curve is a straight line.

Without hedging it is very bumpy.



Using hedging gives me a better night's sleep.

---

## 2021-08-09 16:55:28 - general channel

**liam**

You can either purchase from betfair or use flumine to record your own 

---

## 2021-08-09 16:35:28 - general channel

**liam**

Flumine does other things to be quick [https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4|https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4](https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4|https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4)

---

## 2021-08-09 16:32:37 - general channel

**S G**

so, was wondering if anyone noticed any thing at all with Flumine

---

## 2021-08-09 16:27:50 - general channel

**Mo**

A lot of these problems are solved with pyrsistent, type hints and a good IDE

---

## 2021-08-09 16:20:40 - general channel

**S G**

I started playing with flumine and betfairlightweight. They are good libraries, but its just me taking time to adjust to python world

---

## 2021-08-09 16:17:05 - general channel

**S G**

good to hear that you recreated flumine in Java

---

## 2021-08-09 16:16:40 - general channel

**thambie1**

Which? My repo is private. Flumine, betfairlightweight, and betfair sample code; are all public.

---

## 2021-08-09 16:14:42 - general channel

**thambie1**

I'm using java myself. You can either spend your time recreating flumine (I did), or getting comfortable with python.

---

## 2021-08-09 16:14:04 - general channel

**S G**

I m more a Java guy, so finding it time consuming to use python library betfairlightweight

---

## 2021-08-09 16:13:16 - random channel

**S G**

Hi guys, is there any java implementation libraries similar to betfairlightweight?

---

## 2021-08-09 16:12:21 - general channel

**S G**

Hi guys, is there any java implementation similar to betfairlightweight?

---

## 2021-08-09 16:11:37 - random channel

**Jonjonjon**

This may be a dumb question, but do any UK bookies offer API access?

---

## 2021-08-09 12:08:47 - random channel

**liam**

Thoughts on [https://www.youtube.com/watch?v=1u3sSGuPhWg|this](https://www.youtube.com/watch?v=1u3sSGuPhWg|this)? Personally I think he has completely missed the point, first of all he isn't going to get the prices manually and secondly the reason he isn't getting the prices is because HT is good, the tips are free so whats the problem :confused:

---

## 2021-08-08 11:37:38 - strategies channel

**Dave**

[@UBS7QANF3](@UBS7QANF3) yeah I think the liklehood of something useful being in the friendlies that isn't already covered by data from competitive leagues is quite low. So in the absence of any expert saying "no, wait, you can extract X which is very useful", I will just ignore friendlies :slightly_smiling_face:



[@UGV299K6H](@UGV299K6H) indeed, I suppose my question should have been phrased "from common knowledge, would one be an idiot to exclude friendlies from assessing the strength/scoring ability/etc of a team, or would one not be missing out".



[@ULDAVFDRP](@ULDAVFDRP) they are quite a huge chunk of a the games in the past few months, probably if you sorted a list of competitions by game count over the last month or two they'd have the highest game count. At the same time the last few months are the quietest periods for football so they are quite irrelevant for most of the year

---

## 2021-08-08 11:02:26 - strategies channel

**Mo**

I guess this question only applies if you're trying to derive your own estimate of team strengths?

---

## 2021-08-08 10:10:16 - strategies channel

**Dave**

Probably a good thing competition-wise, maybe not so much a good thing learning-wise :sweat_smile: and ahh fair enough, I will consider my question answered hah. Cheers.

---

## 2021-08-07 11:52:22 - random channel

**Thomas JAMET**

Definitely off topic of the original thread but is there a library similar to the BFLW library that uses the Pinnacle API and integrates with Flumine?

---

## 2021-08-07 11:06:52 - random channel

**Mo**

I think it's a question of being able to get (a lot) more down at a similar price (for some markets)

---

## 2021-08-07 10:46:50 - random channel

**Mo**

There's no official way to set up a syndicate. You'll need to create a syndicate agreement. Up to you whether you want this checked over by a solicitor. That will be your justification for your banking activity but if the bank starts to question your transfers they will run a mile even with the syndicate agreement

---

## 2021-08-07 10:40:12 - random channel

**Thomas JAMET**

Yes, this is part of the question. Ideally, we want to have a single account and then share from that account, i.e. pooling the bankroll (and the PnL).

---

## 2021-08-07 07:52:18 - general channel

**thambie1**

Does blfw/flumine ever hit conflation issues when subscribing to a ton of markets?

---

## 2021-08-06 18:46:44 - strategies channel

**Jonjonjon**

[@U016TGY3676](@U016TGY3676) good question!

---

## 2021-08-06 16:41:07 - strategies channel

**liam**

Yeah he certainly needs an invite to the next bflw meet

---

## 2021-08-06 14:36:05 - strategies channel

**Mo**

To actually answer your question, you're just calculating the test statistic correct? That is not limited to [0, 1]

---

## 2021-08-06 14:20:12 - strategies channel

**gbettle**

Hope this is the right channel for a quick question about chi - I'm getting some really weird results.

---

## 2021-08-06 13:42:56 - strategies channel

**Jonjonjon**

Is the question deliberately vague? Are people willing to put out some examples of what they mean? At some point I want to work limit orders a set distance from fair value, but the logic for that will be more complicated than just hitting stuff, so I have not done it yet.

---

## 2021-08-06 13:08:01 - strategies channel

**Mo**

I figured it was not really a sensitive question unlike past polls

---

## 2021-08-06 12:45:53 - issues channel

**Mo**

The problem is your internet connection

---

## 2021-08-06 12:36:35 - issues channel

**Adrian**

When I get this: ""You have exceeded your max connection limit which is: 10 connection(s).You currently have: 11 active connection(s)", how does Flumine know how many connections I have?

---

## 2021-08-06 12:00:35 - strategies channel

**liam**

yeah its certainly a journey, I guess the point I am making is that it takes experience to really understand matching/execution from the point that it is very easy to impact it (good and bad) as well as how to take advantage, lets be honest, so called 'pros' with decades of experience are oblivious and currently paying an almighty price

---

## 2021-08-06 10:54:32 - strategies channel

**Jonjonjon**

The story above was when I was a futures trader at a firm.



I'm now employed as a quant Dev at a bank doing risk management stuff. There isn't much crossover, but it's all Python work.



What do you do?

---

## 2021-08-05 20:09:17 - strategies channel

**S G**

Thanks for the reply, Mo. I will read through the docs and will ask more questions if I have any

---

## 2021-08-05 19:16:18 - strategies channel

**Mo**

Have you read the [https://liampauling.github.io/flumine/|documentation](https://liampauling.github.io/flumine/|documentation) and looked at the [https://github.com/liampauling/flumine/tree/master/examples|examples](https://github.com/liampauling/flumine/tree/master/examples|examples) ?

---

## 2021-08-05 11:39:58 - random channel

**PeterLe**

Morning; Quick question please re this var...max_selection_exposure: float = 500,

if you had two selections A&amp;B and you had a £2 lay bet matched on each (lets say at 2), would the selection exposure be -£2 for each or would it be 0? Thanks

---

## 2021-08-04 17:34:19 - strategies channel

**Michael**

This is why I'm so glad bflw exists and rest easy in the confidence that superior minds are taking care of things.

---

## 2021-08-04 16:04:41 - strategies channel

**Jono**

Thank you guys its been incredibly helpful

---

## 2021-08-04 15:49:09 - general channel

**liam**

In stationary traffic at the moment so can’t check but cleared orders tell you a rf has been applied, not sure about currentOrders / streaming, have you checked the docs?

---

## 2021-08-04 15:43:47 - strategies channel

**Newbie99**

For your first point [@U4H19D1D2](@U4H19D1D2) created a Middleware example here: [https://github.com/liampauling/flumine/blob/master/examples/middleware/orders.py](https://github.com/liampauling/flumine/blob/master/examples/middleware/orders.py)



I use (my own adapted version of) that to get orders on startup.

---

## 2021-08-04 15:39:56 - general channel

**Peter C**

What is the most flumine way to check whether a runner has had a reduction factor applied? Will average_price_matched be updated when a runner is removed, or do I need to compare the market_book at placement/off and apply the reduction factors myself?

---

## 2021-08-04 12:21:38 - general channel

**river_shah**

No actual compilation needed in bflw itself. For a second I thought there was some cython like stuff going on

---

## 2021-08-04 11:28:43 - strategies channel

**liam**

Also very dependant on market, ie liquidity, when I start asking myself this question I spend weeks looking into it before realising it was me causing the issues; over staking, creating other [similar] strategies, basically reaching market capacity

---

## 2021-08-04 09:58:32 - general channel

**Jono**

Quick question,  the documentation in the link that [@UBS7QANF3](@UBS7QANF3) sent previously it states that:



*Please note:* EXECUTION_COMPLETE (fully matched) orders are only returned when transitioning from EXECUTABLE to EXECUTION_COMPLETE. The full details of EXECUTION_COMPLETE orders can only be viewed using listCurrentOrders/listMarketBook using orderProjections.



I was wondering if this applies to the stream that process_order func is triggered by? more specifically when an order transitions from EXECUTABLE to EXECUTION_COMPLETE i am assuming this causes process_orders to run but then in follow up runs are orders with an EXECUTION_COMPLETE status brought through in the "orders" variable or to access them is a request for either listCurrentOrders/listMarketBook required. Thank you!

---

## 2021-08-04 09:26:17 - general channel

**Jonjonjon**

[@UBS7QANF3](@UBS7QANF3) and [@U4H19D1D2](@U4H19D1D2): Thanks for helping me look at this. I will go away and ponder. It's definitely shown a good use case for betfairviz!

---

## 2021-08-04 09:03:21 - general channel

**Peter C**

If we don't update flumine before the API changes will it continue to work?

---

## 2021-08-04 09:01:09 - general channel

**liam**

FYI bflw [https://github.com/liampauling/betfair/blob/master/HISTORY.rst#2130-2021-08-03|2.13.0](https://github.com/liampauling/betfair/blob/master/HISTORY.rst#2130-2021-08-03|2.13.0) released to handle 09/08 API change, flumine also upgraded [https://github.com/liampauling/flumine/blob/master/HISTORY.rst#1198-2021-08-03|1.19.8](https://github.com/liampauling/flumine/blob/master/HISTORY.rst#1198-2021-08-03|1.19.8) (can now record order stream data)

---

## 2021-08-04 08:04:25 - general channel

**Unknown**

The next update you can see this, flumine matches it with the traded volume at 5.3, I can only assume the volume at 5.4 and 5.5 was matched in the engine/xm, I don't see a problem?

---

## 2021-08-04 07:59:22 - general channel

**Unknown**

Using betfairviz, I am not seeing any updates at that time, will check flumine now

---

## 2021-08-04 07:41:15 - general channel

**Jonjonjon**

It's the PRO data file for the flumine tests

---

## 2021-08-03 22:07:17 - general channel

**Jonjonjon**

Suppose I want to find the line of the PRO market data file in the flumine test cases, corresponding to datetime 2020-04-01 03:34:55.151000, How do I find it?



Using datetime.timestamp(), I get 1585708495, which is not in the file

---

## 2021-08-03 20:01:39 - random channel

**Mo**

Yeah but I'm kicking myself for not working out how to make evince full screen ahead of time

---

## 2021-08-03 16:13:43 - general channel

**liam**

Yes however do a check first and this is assuming you are using python &gt;= 3.7

---

## 2021-08-03 13:13:42 - random channel

**liam**

thinking about how we can plug betfairviz straight into flumine and use it as a backtester visualiser

---

## 2021-08-03 13:12:40 - random channel

**Oliver Varney**

is order stream recording supported like market stream in flumine [@U4H19D1D2](@U4H19D1D2)?

---

## 2021-08-03 12:27:33 - random channel

**Mo**

bflw inside joke :muscle:

---

## 2021-08-03 11:36:40 - random channel

**thambie1**

No tree sets in python?

---

## 2021-08-03 11:36:19 - random channel

**liam**

oh so tiny size, just use Mo's code, but to answer your question sets aren't ordered

---

## 2021-08-03 11:29:55 - random channel

**Michael**

Quick python question if that's ok:



Are sets always ordered? When I google it says 'no' but if I make a set - like set([1, 3, 4, 4, 2, 5]) and print it it always seems to come out in order. What's going on there?

---

## 2021-08-03 11:06:16 - issues channel

**Mons___das**

i can use % all the way, thats no problem

---

## 2021-08-03 11:01:40 - issues channel

**liam**

and what python library are you using to communicate with the db?

---

## 2021-08-03 10:57:06 - issues channel

**liam**

that bottom line is the problem, don't think f strings work correctly try:



```cursor.execute(f"INSERT INTO {table} {columns} VALUES %s" % values)```

---

## 2021-08-03 09:55:35 - issues channel

**Mons___das**

Hey guys! I am trying to put the marketCatalogue you get from the MarketRecorder in a DB. For one column, i just want to dump the whole marketCatalogue json in. Somehow this doesnt work. For hounds, when overwriting the "rules" in the marketCatalogue, it then worked. Now for horses, it still doesnt work. I wondered if there is any special character in the marketCatalogue that could cause this problem?

---

## 2021-08-03 09:46:57 - random channel

**Oliver Varney**

the entire class would obviously have to have default values, but typically I would have to add these into the database anyways.

---

## 2021-08-03 08:47:29 - random channel

**Oliver Varney**

bit of a random question, but trying to understand a best practice. I am wondering if your get data from a source that is a dict with many levels deep and your are converting it into classes, if one of the attributes of a class sometimes gets a data attribute which itself may have a few levels, when its not included in the dict from the data provider, would you initialise that variable to None, or would you propagate that down to the lowest level and set the variables to none in each of the classes (sorry if this doesnt make hard to explain).

---

## 2021-08-02 17:50:58 - strategies channel

**Michael**

Yes it's a problem - well you've got 6 months to a year to wait so you have time to develop something more mid-market. Maybe see if you can extract the critical bit of insight that (you hope) makes this work and apply it to some more moderate odds bets. Bet at 1.5 to 3 and you'll never have to wait more than a month.

---

## 2021-08-02 08:04:07 - issues channel

**liam**

If you want it added to the `runner_context` create an issue on github and I can add it, never seen the value so there are currently no helper functions for it

---

## 2021-08-01 09:41:01 - issues channel

**Jonjonjon**

[https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/order/order.py#L35|https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/order/order.py#L35](https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/order/order.py#L35|https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/order/order.py#L35)

---

## 2021-08-01 09:33:50 - issues channel

**Jonjonjon**

To get your coding-fu up to scratch, you could look through the flumine source code on GitHub. That will give you the answer to your question above. The link above will take you to the module of interest.

---

## 2021-07-31 21:11:27 - general channel

**thambie1**

Question about the marketVersion in the placeOrders request. Does anyone know if the marketVersion check is performed after or before the bet delay?

---

## 2021-07-31 09:08:44 - issues channel

**Jonjonjon**

[https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/markets/blotter.py#L47|https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/markets/blotter.py#L47](https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/markets/blotter.py#L47|https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/markets/blotter.py#L47)

---

## 2021-07-30 16:33:36 - issues channel

**Dirk**

I'm using this tutorial: [https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/)

---

## 2021-07-30 13:16:29 - issues channel

**Adrian**

actually I didn't realise it could autocomplete bflw/flumine which is why i ignored it. I thought it was just generic autocomplete

---

## 2021-07-30 13:06:17 - issues channel

**Adrian**

ok that's about 80% of my questions solved then :joy:

---

## 2021-07-30 11:59:21 - general channel

**Jono**

thank you for that section [@U9JHLMZB4](@U9JHLMZB4) it looks very helpful

---

## 2021-07-30 10:19:19 - general channel

**Beeblebrox**

There's this function to return a price a certain number of ticks away from another price:



[https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/utils.py#L139](https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/utils.py#L139)

---

## 2021-07-30 10:06:51 - general channel

**Jono**

i think method 2 might be my port of call. if market conditions are looking good after the initial bet it might be worth placing odds at one tick better than whatever is currently listed. Ive written my own function for doing this but seems cumbersome and not very "flumine" like. do you know if there is a good way of correctly identifying the odds value which is the next tick along from what is offered?

---

## 2021-07-30 08:58:22 - issues channel

**liam**

marketCatalogue or in the [https://github.com/liampauling/betfair/blob/6991a6a51363bae5fe5940f647b5cf7a4e7113cb/betfairlightweight/resources/streamingresources.py#L131|marketDefinition](https://github.com/liampauling/betfair/blob/6991a6a51363bae5fe5940f647b5cf7a4e7113cb/betfairlightweight/resources/streamingresources.py#L131|marketDefinition)

---

## 2021-07-30 08:55:58 - issues channel

**Adrian**

ahhh that's probably the reason. i've seen those kind of markets before. i dont know how to check

---

## 2021-07-30 08:24:19 - general channel

**Jono**

Im viewing this as a problem of first rasing the exposure to a certain level with back bets then bringing it back to 0 with lay bets.



A question in a similar vain would be is there an acknowledged way to cash out from a market or selection using flumine/bflw

---

## 2021-07-30 08:04:50 - issues channel

**liam**

? the logs will tell you the problem

---

## 2021-07-30 07:55:09 - issues channel

**Adrian**

Has anyone had issues getting two bets on horses on one pass of flumine? I can do it on greyhounds and other horses without a problem, i.e. back &amp; lay at the same time. But for some reason with some races it only like one at a time

---

## 2021-07-29 20:02:48 - general channel

**PeterLe**

Ok thanks Liam, I’ll check that out. Looking forward to experimenting with Flumine.  Hope the hangover has gone from last night :smile:

---

## 2021-07-29 19:56:42 - general channel

**liam**

Yep no problem with that, ideally you would pass the username as an argument into the script (sys.argv) so that you are keeping things dry, no point in copying a file just to change a single var 

---

## 2021-07-29 10:07:20 - general channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/order/order.py#L314](https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/order/order.py#L314)

---

## 2021-07-29 10:05:17 - general channel

**liam**

You guys have picked a bad day for all these questions 

---

## 2021-07-29 10:04:43 - general channel

**moseley82**

Hi guys hoping this is a simple one, looking at this doc here [https://betfair-datascientists.github.io/api/apiPythontutorial/#cancelling-orders](https://betfair-datascientists.github.io/api/apiPythontutorial/#cancelling-orders) and it gives instructions on how to cancel by Market ID, but does anyone know how to cancel by Bet ID or Selection ID?

---

## 2021-07-29 09:51:08 - random channel

**Dirk**

I'm not entirely sure what this slack group actually is about, but in fact, I was trying to login to Betfair using python using betfairlightweight but couldn't manage. I've set up the certificates and found my (delayed) app key. Upon following the tutorial on [https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/) I got stuck at the moment of actual login. Is there anyone keen on helping a newbie out? You can send me a private message

---

## 2021-07-29 09:38:02 - general channel

**Beeblebrox**

There's some helper functions shown here for just this: [https://github.com/betfair-down-under/knowledgeShare](https://github.com/betfair-down-under/knowledgeShare)

---

## 2021-07-29 08:05:56 - general channel

**Greg**

Hi all. Have done some searching but nothing stands out to me. (At the risk of overfitting ) I have a bot running but would like to exclude Trot and Pace races (my father in law has some experience as a bookie on harness races so there is good reason here) Is there a simple way to do this via Flumine/BFLW? thanks in advance

---

## 2021-07-28 11:40:09 - general channel

**James**

Thanks for all your help

---

## 2021-07-28 11:31:43 - general channel

**Oliver Varney**

May be worth taking a look at threading in python

---

## 2021-07-27 14:26:59 - general channel

**James**

Would storing in a dictionary be the best option using the python route?

---

## 2021-07-27 13:34:38 - general channel

**liam**

Can you not keep it simple and just use python? Will be much quicker than anything involving a db

---

## 2021-07-27 13:16:13 - strategies channel

**Oliver Varney**

yup cool, what I thought but thought id double check. plenty of :beer: coming your way  tomorrow for all the help

---

## 2021-07-27 12:28:11 - strategies channel

**liam**

Either works tbh, `process_orders` is the 'flumine' way of doing it as that function will be called whenever there is an update to the order so you will be able to fire in the second straight away rather than wait for a marketBook update

---

## 2021-07-27 06:00:08 - general channel

**Steve**

When I am processing orders in flumine with the def process_orders() function I can't figure out why when I iterate through the orders with [order.responses.current_order for order in orders] some orders have a current_order objects and others don't. Anyone know why?

---

## 2021-07-27 05:35:19 - general channel

**Mo**

I think it's pretty clear the problem is you're trying to read a compressed file as an uncompressed file (or possibly assuming the wrong compression type). Why did you remove that condition from line 77?

---

## 2021-07-26 20:50:09 - general channel

**Matthieu Labour**

I believe `1626986519.301084` is a valid epoch.  No, flumine has no issue. This is how I recorded the data.

---

## 2021-07-26 12:30:51 - general channel

**George**

ok, i've read through the code now. it's a completely different paradigm to bflw.

---

## 2021-07-26 12:13:28 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/examples/strategies/marketrecorder.py#L69](https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/examples/strategies/marketrecorder.py#L69)

---

## 2021-07-26 11:05:54 - general channel

**liam**

or copy flumine

---

## 2021-07-26 11:05:45 - general channel

**liam**

use flumine

---

## 2021-07-25 17:13:08 - general channel

**George**

ok thanks for your help

---

## 2021-07-25 17:12:23 - general channel

**liam**

Flumine sets this to false by default and does a few other things to be quicker :wink:

---

## 2021-07-25 16:30:48 - general channel

**George**

what's the difference between logging the raw market book delta updates and logging the raw streaming data

---

## 2021-07-25 16:29:33 - general channel

**liam**

Most record the raw streaming data to a file for backtesting later 

---

## 2021-07-25 16:22:48 - general channel

**George**

aren't they the same thing as what you'd get as the market_book.streaming_update

---

## 2021-07-25 16:07:18 - general channel

**liam**

From a user perspective logging would go [https://github.com/liampauling/betfair/blob/6991a6a51363bae5fe5940f647b5cf7a4e7113cb/examples/examplestreaming.py#L74|here](https://github.com/liampauling/betfair/blob/6991a6a51363bae5fe5940f647b5cf7a4e7113cb/examples/examplestreaming.py#L74|here) and you wouldn’t touch the bflw library logging but then I am not sure what you are trying to do? 

---

## 2021-07-25 16:04:31 - general channel

**George**

i don't know how to regain flexibility over that without subclassing the listeners, adding in a logger argument and rewriting every function that includes 'logger' to be 'self.logger'

---

## 2021-07-25 15:43:23 - general channel

**George**

Hi, just looking at logging market books using bflw streaming. In the listener.py file the logger is defined at the top as a global variable. I am finding this a bit inflexible, for example when I want to log two races into separate files with different logger 'names'. Is there a better way to do this? I was hoping maybe to feed a pre-prepared logger into the listener when creating the listener object?

---

## 2021-07-25 01:53:49 - issues channel

**Adrian**

I managed to offload all the blocking code into a separate process all together. Slight loss of functionality but now Flumine is free to operate without obstacles

---

## 2021-07-24 21:18:00 - random channel

**Jonjonjon**

Are there any plans to update the flumine backtester so that simulated orders remove liquidity from the exchange?

---

## 2021-07-24 09:08:45 - issues channel

**river_shah**

Try this: [https://zeromq.org/languages/python/|https://zeromq.org/languages/python/](https://zeromq.org/languages/python/|https://zeromq.org/languages/python/)

---

## 2021-07-24 08:17:04 - issues channel

**Mo**

Do you currently use ZMQ? Do you use a Python package for it?

---

## 2021-07-24 05:46:34 - issues channel

**Adrian**

I've toyed with asyncio but i think that will screw up the flumine threads

---

## 2021-07-24 05:44:54 - issues channel

**Adrian**

What's the best way to run code asynchronously with Flumine? I have some blocking code that I cannot reduce anymore.

---

## 2021-07-23 08:27:00 - issues channel

**liam**

the type hinting in bflw is a half arsed job tbh, needs to be cleaned up with mypy, I just cba

---

## 2021-07-23 08:25:59 - issues channel

**Oliver Varney**

[https://stackoverflow.com/questions/19302530/python-generator-send-function-purpose](https://stackoverflow.com/questions/19302530/python-generator-send-function-purpose)

---

## 2021-07-23 08:04:50 - issues channel

**Mo**

Shouldn't the type hint of this function be `Generator[List[dict]], None, None]`? [https://github.com/liampauling/betfair/blob/6991a6a51363bae5fe5940f647b5cf7a4e7113cb/betfairlightweight/streaming/betfairstream.py#L343](https://github.com/liampauling/betfair/blob/6991a6a51363bae5fe5940f647b5cf7a4e7113cb/betfairlightweight/streaming/betfairstream.py#L343)

---

## 2021-07-23 07:35:09 - general channel

**liam**

Any reason you need to use numpy?

---

## 2021-07-23 07:34:17 - general channel

**Adrian**

i think what i mean to say is creating numpy arrays from market_book.runner data a legitimate way of doing it or is there a more flumine-like way

---

## 2021-07-23 07:28:05 - general channel

**liam**

The logic is heavily optimised however bflw is designed that you can pass in your own listener and read the raw updates or create your own logic 

---

## 2021-07-23 07:26:55 - general channel

**Adrian**

i see, so is the update to market book the first thing that happens upon streaming update? Just wondering if there's any point looking for something faster than market_book updates

---

## 2021-07-23 07:24:31 - general channel

**Adrian**

i mean what does streaming update do

---

## 2021-07-23 07:22:37 - general channel

**Adrian**

thanks Mo i don't really know how to interpret this code

---

## 2021-07-23 07:21:25 - general channel

**Adrian**

awesome. thanks. that gives me options.

the second question i'm just trying to figure out if it's faster to read the file or get the price from market_book.runners

---

## 2021-07-22 16:47:28 - random channel

**D C**

Bit cheeky of them to give people grief when it is their incorrect settlement that has caused the problem!

---

## 2021-07-22 14:33:03 - general channel

**George**

bflw

---

## 2021-07-22 11:43:14 - general channel

**RDr**

Hi [@U4H19D1D2](@U4H19D1D2), Please I have a question about the example in [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py) . Where I can find the full list of exact names of the columns/details I can output to the text file? (...  other than the already listed ones in: output.write( ...  market_book.publish_time, market_book.market_id, market_book.status, market_book.inplay, runner.selection_id, runner.last_price_traded or "" ...). Would the names be different to what's shown in [https://historicdata.betfair.com/Betfair-Historical-Data-Feed-Specification.pdf](https://historicdata.betfair.com/Betfair-Historical-Data-Feed-Specification.pdf) ?

---

## 2021-07-22 10:37:34 - strategies channel

**Michael**

My experience of this sort of thing for IP racing is that too much optimisation becomes futile quite quickly, especially if your variables behave differently at different prices because optimal execution pricing and matching rates change at the same time. After years of face rubbing I now take a rough and ready approach and then go to the park safe in the knowledge that that'll get me 95% of the benefit with 2% of the effort.



Specifically: I might approach your problem by splitting the price ranges up into sensible chunks and treat each chunk separately. For each chunk make thresholds for each variable (assuming each can return an adequate profit on its own) then look at each variable below that threshold and make a function of the two variables that gets you to a good profit just in that chunk of prices. Keep the format of that function the same across the price chunks but vary the vectors (I think that's the right term, you know - the multipliers). Once you've done all the chunks you can either just use that as a trigger as is or you can look at your vectors and write a reasonable function to get each vector from the price. Job done.



I know that's not mathematically very sound and it's not particularly satisfying but you know as well as I do that the real problem is optimising execution prices and stakes rather than trigger thresholds anyway.

---

## 2021-07-22 08:53:18 - strategies channel

**Oliver Varney**

one problem with win/lose is there a massive class imbalance, which you will have to offset / deal with if you want your optimisation to work

---

## 2021-07-22 08:33:09 - strategies channel

**Jonjonjon**

I've had problems making tree methods hold out-of-sample.

---

## 2021-07-22 08:32:32 - strategies channel

**liam**

i am not very prepared for these questions, let me come back with some graphs

---

## 2021-07-21 12:05:42 - general channel

**Aaron Smith**

[@UT6593JBH](@UT6593JBH) pretty sure this is not implemented within flumine, however it should be rather easy to calculate yourself. Just note that this only works on WIN markets (or any market with a single winner that is)

---

## 2021-07-21 11:59:54 - general channel

**Steve**

Does anyone know if there is a built in function in lightweight or flumine which calculates the matched profit if win for a selectionId that incoprorates the backs/lays which have been matched on other runners? The get_exposures function in the market blotter only seems to look at the backs/lay matched on a specific runner. I'm essentially looking for the website displays in the red/green numbers on the left hand side when a trade gets matched. Thanks

---

## 2021-07-21 10:31:35 - random channel

**liam**

Yep, certainly a need for this and agreed on it being visual, can probably start with a just a simple diagram and description on bflw/flumine and how they interact at a high level before dropping down to the different threads and queues etc

---

## 2021-07-21 10:05:05 - random channel

**liam**

cool, I think this place can be a bit daunting to a newbie but it seems the best discussions have come about the simple questions

---

## 2021-07-21 08:27:56 - issues channel

**Aaron Smith**

Do you have multiple instances of flumine running with 2 strategies from diffrent instances placing orders on the same market?

---

## 2021-07-21 03:15:55 - issues channel

**Peter**

betfairlightweight is a thin wrapper around the Betfair API,  If you give it invalid prices or sizes it will simply pass them to Betfair which will reject the transaction if either is invalid.  There is no magical adjustment or correction.



I wouldn't recommend simply using the last traded price as a substitute, that will pick up va;ues on either side of the spread and may not correspond to what your startegy needs. Better would be to familiarise yourself with the parts of the Betfair documentation that explain what prices and sizes are valid where you are (prices are universal, but valid sizes can vary depending on your country).



I agree with [@UPMUFSGCR](@UPMUFSGCR) that moving onto Flumine is a naturally progression, though it can take some time to get your head around it. But the responsibility for ensuring that you are using legitimate prices and sizes will still rest with your code.

---

## 2021-07-20 23:36:45 - random channel

**Adrian**

Thanks Andy. Have you tried flumine? I think it's amazing but I know i'm only scratching the surface

---

## 2021-07-20 23:26:25 - random channel

**Andy B**

I'll second that notion Adrian.  At this stage I am still far more comfortable with my own code, although I have finally implemented somethign with betfairlightweight.

---

## 2021-07-20 23:08:48 - random channel

**Adrian**

I'm curious how you guys use flumine, whether you have a lot of your own custom code in there or if you use the libraries extensively. I ask because I got tons of my own code, classes and functions to get it up and running how I need it, but only because I am a laymen when it comes to understanding how flumine works and don't really know how to utilise its potential.

---

## 2021-07-20 22:28:29 - issues channel

**Hamish Z**

I think I followed the XCA page exactly, no need to alter.If not successful, also try OpenSSL using command line from windows. Hope this help.

---

## 2021-07-20 14:16:46 - issues channel

**Luka**

[@UBS7QANF3](@UBS7QANF3) I have tried rounding the `price` to a single decimal place but this hasn't seemed to helped.

---

## 2021-07-20 14:13:43 - issues channel

**Luka**

So I am using `betfairlight` I still haven't quite understood how that interacts with `Flumine`

---

## 2021-07-20 14:12:14 - issues channel

**Jonjonjon**

Look at this for rounding to nearest price:



[https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/utils.py#L93-L103](https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/utils.py#L93-L103)

---

## 2021-07-20 14:09:49 - issues channel

**Jonjonjon**

It could be account related, or could be a Flumine constraint. When the system logs the failure, is there more detailed information available?

---

## 2021-07-20 13:44:43 - issues channel

**Luka**

[@UPMUFSGCR](@UPMUFSGCR) Would this be related to the amount of money in the account? The bets I am placing are calculated as a percentage of my bankroll so they are not close in size to my account funding.

---

## 2021-07-17 10:09:51 - general channel

**Oliver Varney**

nw, [@U4H19D1D2](@U4H19D1D2) great design with flumine has thought of most things :+1:

---

## 2021-07-17 10:08:07 - general channel

**Jono**

thank you for your help

---

## 2021-07-17 10:02:44 - general channel

**Jono**

yes but i was thinking i could just remove some of the logic and just have it run the "flumine.handler_queue.put(TerminationEvent(flumine))" line in order to halt the code. I would also alter the parameters in the BackgroundWorker to execute after 10s. Does this seem plausible or did you have something else in mind for the termination of the code?

---

## 2021-07-17 09:50:44 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py|https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py](https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py|https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py)

---

## 2021-07-17 09:49:10 - general channel

**Jono**

what would be the proper way to terminate a flumine session ie stop all strategies? say after 10 seconds of run time following the flumine.run() i wanted to halt and review the logs?

---

## 2021-07-17 09:14:11 - general channel

**Steve**

Also does anyone else have issues handling the max_selection_exposure parameter ?  Following on from my previous question - can I just confirm if this calculation is based on the orders.status has confirm by the BF. I keep finding my replacing orders (when I cancel and place simalteanously) violate this safeguard.

---

## 2021-07-17 09:05:46 - general channel

**Steve**

With flumine if I reference the pricesize attribute of a current order which has a status such "REPLACING" or "UPDATING" do I get the exist price and size - or what it is changing to? In other words do the attributes of an order object in flumine change when I send the instruction to replace/update or do they change when the exchange confirms that the change has been made?

---

## 2021-07-16 10:37:09 - issues channel

**Hamish Z**

hi , the problem is solved now. Just in case someone have similar situation with XCA, the solution is updated here.

---

## 2021-07-16 09:20:44 - random channel

**Oliver Varney**

I think what would be nice if slack had a way of doing an anonymous chart style response (not sure if this is a thing). Id be interested in this question but as a scatter with years experience on the y axis and stake/ traded volume on the y axis. Getting the buckets correct with a poll is quite hard without knowing roughly the distribution of responses.

---

## 2021-07-15 12:27:14 - issues channel

**Hamish Z**

May I know how to solve this problem? thanks

---

## 2021-07-14 11:06:13 - general channel

**liam**

if only there where some helpful docs for this sort of thing

---

## 2021-07-14 09:22:54 - strategies channel

**Dave**

Focussing on diversifying has helped

---

## 2021-07-14 07:46:48 - strategies channel

**liam**

You deleted your message :joy:



But to answer your question I think its fine to hedge when starting off (yes I have changed my tune) however if you start going below the 20% lifetime then I would think about trying to pay more commission/maximising your profit by taking only value. Do you know what your lifetime comm percentage is?

---

## 2021-07-14 06:36:48 - general channel

**liam**

In that case you are probably better off looking at the app api, but as Andrew is probably hinting at this isn’t a problem to be solved using python or just firebase 

---

## 2021-07-14 03:20:17 - general channel

**Andrew**

Have you read the general API specs on the Betfair API developer pages? What language do you want to use? Firebase is just your data store, if I’m right?

---

## 2021-07-13 21:00:16 - strategies channel

**thambie1**

[@UGV299K6H](@UGV299K6H) I still ask myself that question when I get downswings on proven successful strategies :joy:. Some of us are just paranoid, I still can't believe my simple strategies haven't been overtaken yet

---

## 2021-07-13 20:42:51 - strategies channel

**Michael**

Right [@U01PJ5YMFBJ](@U01PJ5YMFBJ) but your back test is only 6k markets. I doubt that that's really enough to give you a good idea how volatile your returns should be. To be honest though the fact that this question is even arising is not a good sign.

---

## 2021-07-13 20:28:19 - strategies channel

**AndyL**

@Michael im not an MCfan, although there's several ways to skin that one...im not convinced all are helpful

---

## 2021-07-13 08:55:17 - issues channel

**Andy B**

I'm pretty sure I am just overlooking it, but does betfairlightweight have a method that returns the event start time, not the market open time?  Trying to work out how I can grab this without having to scrape it and I would be surprised if it wasn't an API value.  I have looked at the API doco, but if it is there, it didn't stand out to me.

---

## 2021-07-13 06:44:19 - strategies channel

**liam**

Few helper functions in the `market.blotter` have a look at the [https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/markets/blotter.py#L85|code](https://github.com/liampauling/flumine/blob/a7aff28371b1a7a30122dfd76a1effcee4ddc127/flumine/markets/blotter.py#L85|code) 

---

## 2021-07-12 11:18:57 - strategies channel

**Adrian**

If I wanted to track an order in flumine so that my follow up order only goes through once the first has been fully matched, which functions should I be looking at? Thank you!

---

## 2021-07-11 18:07:04 - issues channel

**Mons___das**

[@U4H19D1D2](@U4H19D1D2) oh jesus i m not thr brightest light out there :smile: I clicked in the streaming folder and never clicked out again. Respect to you for diagnosing such stupid mistake correctly :smile:

---

## 2021-07-11 17:28:52 - issues channel

**liam**

All assuming you have passed True for the catalogue [https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/examples/strategies/marketrecorder.py#L40|context](https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/examples/strategies/marketrecorder.py#L40|context) 

---

## 2021-07-11 17:27:54 - issues channel

**liam**

Are you looking in the catalogue key? [https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/examples/strategies/marketrecorder.py#L260|https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/examples/strategies/marketrecorder.py#L260](https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/examples/strategies/marketrecorder.py#L260|https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/examples/strategies/marketrecorder.py#L260)

---

## 2021-07-11 17:17:55 - issues channel

**Mons___das**

I suspected that could be the case and opened the a few of the smallest files and they all looked like streaming updates to me with many updates and changing prices. A market catalogues should only hold one big json i think?

---

## 2021-07-11 10:36:43 - strategies channel

**Adrian**

I hope nobody is getting sick of me asking questions yet :sweat_smile:

For the more statistically adept of you here, would you be able to recommend a method of analysing predictive/leading indicators? Say I have one particular independent variable (x) and the last traded price (ltp) and I put these two together to make some assumption about x's effect on ltp. What is this method called? TIA!

---

## 2021-07-10 18:48:17 - general channel

**Mo**

Definitely sounds like a certificate problem but I’m not a Windows guy so can’t help with the generation 

---

## 2021-07-10 11:55:36 - general channel

**Dave**

With the above parallel example, wouldn't it be better to instantiate 24 flumine instances in parallel with n_markets/24 passed to each, rather than have 24 workers instantiate a flumine instance each time they are processing a market?

---

## 2021-07-10 11:47:46 - general channel

**Unknown**

I'm no python guru but I used the  [https://betfairlightweight.slack.com/files/UPMUFSGCR/F013J0H5F3M/backtest_multi.py|backtest_multi.py](https://betfairlightweight.slack.com/files/UPMUFSGCR/F013J0H5F3M/backtest_multi.py|backtest_multi.py)  file uploaded by [@UPMUFSGCR](@UPMUFSGCR) in the files repository. Even if it doesn't do exactly what you need, I'm sure it will give you plenty of food for thought!

---

## 2021-07-10 09:49:36 - issues channel

**liam**

Currently no, check out the logic [https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/flumine/baseflumine.py#L144|here](https://github.com/liampauling/flumine/blob/4da58825ae529ddde2b3bfee2a434b20ed41ec3c/flumine/baseflumine.py#L144|here) 

---

## 2021-07-10 09:41:45 - issues channel

**Adrian**

In Flumine, is there any way of checking that a market no longer exists? It seems that once the market is closed and or removed from the market book that it won't be checked in `check_market_book` , so how does one refer to such a market. Or is there a better way to do it before the market disappears? Thanks

---

## 2021-07-10 08:40:13 - random channel

**Scott**

Thanks [@U01DCR5PXDY](@U01DCR5PXDY) I’ll take a look. Wasn’t sure if anyone had a simple results database from the past few years they could query total goals = 2

---

## 2021-07-10 08:30:10 - general channel

**liam**

Np, more info at the bottom of this page, probably needs to be moved to a dedicated page [https://liampauling.github.io/flumine/quickstart.html|https://liampauling.github.io/flumine/quickstart.html](https://liampauling.github.io/flumine/quickstart.html|https://liampauling.github.io/flumine/quickstart.html)

---

## 2021-07-10 08:21:26 - random channel

**thambie1**

[@U0223J9067R](@U0223J9067R) You'd be able to answer questions like that better and more easily with a dataset like this ([https://www.kaggle.com/hugomathien/soccer](https://www.kaggle.com/hugomathien/soccer)), than with the one I'm using. For me to answer a question like that I'd have to write a custom backtest, and spend hundreds of cpu hours running it. Perhaps others on here have their data in more suitable formats

---

## 2021-07-10 08:11:31 - general channel

**liam**

Flumine replicates the queue and uses the delta, traded amounts per price to simulate matching. It isn’t perfect and as you mention double counting liquidity is possible and market impact is not replicated however it’s pretty good at giving you a base at reasonable stakes even inplay/volatile markets. This is ignoring XM which makes things even trickier!



Instead the framework has been designed so that you can use your own middleware if required to better handle conditions you might be simulating. 

---

## 2021-07-10 07:35:14 - general channel

**liam**

It’s a wrapper so doesn't, flumine is the framework and does via the simulated middleware 

---

## 2021-07-09 17:09:59 - random channel

**liam**

Deadline today for the hackathon [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1625155535217600|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1625155535217600](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1625155535217600|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1625155535217600)

---

## 2021-07-09 16:29:42 - issues channel

**D C**

Can't you use the market type filter? I don't use BFLW but the API itself allows you to filter by market types (win/place etc)

---

## 2021-07-09 13:22:35 - general channel

**liam**

wait till you use flumine

---

## 2021-07-09 13:16:10 - general channel

**James**

Only used it for a few days but betfairlightweight is the dogs nuts. Great work by Liam and all involved

---

## 2021-07-09 11:23:18 - random channel

**Peter C**

Just checked - that's it I think. Sorry, stupid question, should have thought about it.

---

## 2021-07-09 08:43:52 - random channel

**PeterLe**

Just out of interest, you mentioned that you saw your position in betangel yesterday…do you use flumine exclusively to place your bets and betangel to provide you with visuals ?

---

## 2021-07-09 08:26:34 - random channel

**Oliver Varney**

silver lining as that was the final straw and pushed me to go full auto with my own stuff and kindly [@U4H19D1D2](@U4H19D1D2) was just releasing flumine at that point

---

## 2021-07-09 08:17:54 - general channel

**Oliver Varney**

okay cool, yes that all I could see by searching the bflw resources. How long do marketbooks stay active post closing of the market?

---

## 2021-07-09 00:56:58 - general channel

**Unknown**

[@U026A2YDLDQ](@U026A2YDLDQ) here's code I've used (in bflw) to split ANZ racing names to pull out race length:



```# splitting race name and returning the parts 

def split_anz_horse_market_name(market_name: str) -&gt; (str, str, str):

    # return race no, length, race type

    # input samples: 

    # 'R6 1400m Grp1' -&gt; ('R6','1400m','grp1')

    # 'R1 1609m Trot M' -&gt; ('R1', '1609m', 'trot')

    # 'R4 1660m Pace M' -&gt; ('R4', '1660m', 'pace')

    parts = market_name.split(' ')

    race_no = parts[0] 

    race_len = parts[1] 

    race_type = parts[2].lower() 



    return (race_no, race_len, race_type)```

---

## 2021-07-08 18:10:20 - issues channel

**Matthieu Labour**

Done. [https://github.com/liampauling/flumine/pull/462](https://github.com/liampauling/flumine/pull/462)

---

## 2021-07-08 16:01:54 - general channel

**PeterLe**

Yes me too, If I can find out how to switch it on :grinning:

---

## 2021-07-08 14:52:36 - issues channel

**Matthieu Labour**

In my use case, i record inplay scores and market book data to the same market file to preserve the sequencing. Sure I could preprocess the file before re-playing them into flumine. But i was hoping flumine could ignore the lines it does not expect and can’t process.

---

## 2021-07-08 09:58:06 - general channel

**Ivan Zhou**

Does anyone know of a way to pull the distance of a horse race? Can't seem to find it in the documentation

---

## 2021-07-08 07:29:19 - general channel

**Adrian**

Thanks, no need to apologise. I don't yet have the vocabulary for what I'm seeing so my questions are long winded

---

## 2021-07-07 17:38:30 - issues channel

**Mons___das**

so i see the standard way would be no database but only a s3 bucket?

Yes i ve heared bets need to be placed, i will do so. Cant hurt to dip into the real thing anyway :smile:

---

## 2021-07-07 17:36:30 - issues channel

**liam**

So you would only pass into flumine what you want to backtest, have a look at the examples however you can filter market type 

---

## 2021-07-07 17:35:05 - issues channel

**Mons___das**

I wasnt planning on recording every single market, but for example if i wanted horses, football and greyhounds, i would want to be able to choose which ones of those i put into my backtest? I also may want to filter between countries, leagues, or other things i may find important later on. Maybe that already very efficently doable without a db and i m overseeing something though, i m not very experienced with neither flumine or databases :smile:

---

## 2021-07-07 17:25:37 - issues channel

**Peter**

You could of course import that catalogue data into a database if that's how you roll.

---

## 2021-07-07 16:01:17 - random channel

**Oliver Varney**

15 mins was enough to confirm everything we already knew about Jason, shame the questions were weak and didnt go further to challenge his responses

---

## 2021-07-07 14:57:58 - random channel

**Oliver Varney**

or streaming

---

## 2021-07-07 14:53:31 - random channel

**Unknown**

I don't have back to 2017 but here's volumes (summed) for the last 12 months from recorded data. Might be helpful comparison.

---

## 2021-07-07 14:37:04 - random channel

**liam**

2016/17 is when they stopped supplying the old historic data and moved to the current streaming format

---

## 2021-07-07 14:36:39 - random channel

**liam**

big question is do you trust that data

---

## 2021-07-07 12:16:40 - general channel

**Mo**

Cheers, that's very helpful

---

## 2021-07-07 06:10:02 - general channel

**KG**

there's quite a lot of complexity to how BSP works - these are the resources I find valuable in helping to understand the logic:

• Overview: [https://docs.developer.betfair.com/pages/viewpage.action?pageId=4392566](https://docs.developer.betfair.com/pages/viewpage.action?pageId=4392566) 

• Detailed explanation: [https://promo.betfair.com/betfairsp/FAQs_theBasics.html](https://promo.betfair.com/betfairsp/FAQs_theBasics.html)

• Worked examples of the reconciliation process: [https://promo.betfair.com/betfairsp/FAQs_detailedWorkings.html](https://promo.betfair.com/betfairsp/FAQs_detailedWorkings.html) - particularly this one 

• How the projected odds work:  [https://promo.betfair.com/betfairsp/FAQs_projectedOdds.html](https://promo.betfair.com/betfairsp/FAQs_projectedOdds.html)

• FAQs in plain English: [https://www.betfair.com.au/hub/betfair-starting-price-faqs/](https://www.betfair.com.au/hub/betfair-starting-price-faqs/)

---

## 2021-07-06 11:23:21 - general channel

**liam**

theoretically, assuming non runner removals are handled correctly (which they should be), out of interest why are you looking this deep? Found a problem?

---

## 2021-07-06 11:20:34 - general channel

**ThomasJ**

Thanks Liam. Just so I am 100% sure.

Class RunnerBookSP self.back_stake_taken = [PriceSize(**i) for i in _backStakeTaken_] will only ever at most contain 1 element in the List?



BTW your effort in creating BFLW and maintaining it is simply amazing. Thank you.

---

## 2021-07-06 11:02:55 - random channel

**Jonjonjon**

Do people use execution algos such as TWAP to help them execute more size?

---

## 2021-07-06 09:50:35 - random channel

**Newbie99**

Haha I agree, but I have no idea how to detect whether a market can have runners settled before the end (other than simply knowing its that type of market) and otherwise it means running for all markets.

---

## 2021-07-05 22:49:24 - general channel

**Matthieu Labour**

Question with respect to Pinnacle. Wondering what is the maximum bet amount and if there is a difference between a market opening and right before the event. Does anyone have thoughts on that?

---

## 2021-07-05 19:26:27 - general channel

**thambie1**

So many questions.. Does bet365 really have an official API? If so, why? And why would you want to use it?

---

## 2021-07-05 13:22:22 - general channel

**liam**

Not sure tbh but this is the description in the streaming docs, I assume some sort of concatenation takes place rather than 150 m/s delay on each update, send an email to Neil

```Please note: The virtual price stream is updated ~150 m/s after non-virtual prices. Virtual prices are calculated for all ladder levels.```

---

## 2021-07-05 09:05:21 - general channel

**D C**

Starting to question everything I know/thought I know now. So does this mean that the virtual prices are calculated whenever new real prices change, or that the process itself is delayed and the delay refers only to the stream pushing the virtual prices?

---

## 2021-07-05 08:15:18 - general channel

**D C**

I remember getting caught out by this myself when I first added streaming to my code base.

---

## 2021-07-05 07:39:02 - general channel

**birchy**

As [@UBS7QANF3](@UBS7QANF3) has said, are you requesting virtual prices to get the same display as the website? By default, bflw and Flumine display the actual prices rather than Betfair's virtual ones. The response will have 'atb' for actual prices and 'batb' if they're virtual.

---

## 2021-07-05 01:41:27 - general channel

**Adrian**

so that begs the question which method do i use now instead

---

## 2021-07-05 01:25:26 - general channel

**Unknown**

Hi MacrcoPolo, I just looked more, and I found that the the raw data part of the market book object has the correct info, but the fancier betfairlightweight one (the market_book.runners. etc one) which is where I was getting my data from, only has the 1.01 and 1000 odds that I described before. I've got a few pictures, hopefully I'm not spamming the group too much:

---

## 2021-07-05 01:10:20 - general channel

**Will Morrison**

I'm doing it from betfairlightweight, not flumine. And 1: Yes, I'm logged in, 2: Active key (not delayed)

---

## 2021-07-05 01:08:27 - general channel

**MacrcoPolo**

(Might be wrong here, I don't use flumine, but this would be my guess)

---

## 2021-07-05 01:08:02 - general channel

**MacrcoPolo**

I don't use flumine, but I would have to guess that it's because the last traded price and size hasn't changed?

---

## 2021-07-05 01:06:54 - general channel

**MacrcoPolo**

Usual questions: 1. Are you logged in to the website? 2. Are you using a delayed key?

---

## 2021-07-04 18:20:41 - strategies channel

**Mo**

The problem with how it’s been implemented in the Betfair API is you can be filled at prices below what you request provided your average price is as good or better than what you requested. This means you can get some negative EV junk thrown in which you avoid if you handle the cancellation yourself 

---

## 2021-07-04 12:30:51 - strategies channel

**D C**

I see what you mean [@U0128E7BEHW](@U0128E7BEHW) but I kind of interpreted the question as "Are your methods of identifying value fundamental or price driven". I answered fundamental as I don't use market data as an input.

---

## 2021-07-04 10:44:26 - strategies channel

**D C**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) you are doing it again - flitting from one idea to another. If you were a baker there would just be piles of uncooked dough all over the place and not a loaf of bread in sight! Pursue an idea to completion before moving on to another sport. You've been given plenty of ideas and pointers of what direction to take. At this stage I will say that I don't think this slack is actually helping you at all - it may be that you are just getting too many suggestions. I would take ONE idea that has been suggested and logout of here for at least a week and work hard on that one area.

---

## 2021-07-03 23:27:56 - issues channel

**Adrian**

i found this. is it possible to call them manually rather than every x seconds?

[https://github.com/liampauling/flumine/blob/4924616d3764ab5ea861a21a72054dc93d812d61/docs/workers.md](https://github.com/liampauling/flumine/blob/4924616d3764ab5ea861a21a72054dc93d812d61/docs/workers.md)

---

## 2021-07-02 21:42:23 - strategies channel

**AndyL**

Stepping back a bit from this haystack search... thinking why would value or the destination of BSP be determined by some tiny pattern of wom, price action, or whatever tech...? Just doesn't sound sensible, the crowd knows what it wants at time "now", but I can't see how it can predict in any form of technical indicator future BSP

All i know is what is value "now", ie. A price above/below "now", but I cant have that or at least not enough to cover spread &amp; commission and some spare...

Hmmm,seems an impossible problem

---

## 2021-07-02 06:29:01 - strategies channel

**ShaunW**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) that's not really similar to what I do.  I'd obviously do the whole returns vs time/price etc but I wouldn't start charting vs a whole new nest of snakes like wom.  I'm still not sure what you mean by spike "height" (and presumably depth), there's so many considerations and ways to measure something like that which is why I (and [@UN1497LJC](@UN1497LJC)) see them as so hard to define. What you seem to be desribing is just a change in price from 10s prior, a 'spike' would definately need some rate of change characteristic (calculus?).  Lastly try to be a bit more questioning about throwaway phrases like "volume change",  how many ways can you think of to measure it? Absolutes won't work as some markets are 1,000 and some 1,000,000.  Percentages aren't great either because £100 is big on a £1,000 market but you won't find many 50grand bets on the ½mil markets, so what would be a meaningful measure given the algo has to perform at scale?   In short, reduce the breadth and increase the depth of your thinking.

---

## 2021-07-02 05:24:47 - issues channel

**Rob (NZ)**

sorry for the newbie question just trying to get my head around it

---

## 2021-07-02 05:24:38 - issues channel

**Rob (NZ)**

Just using the example.py  Flumine code  , updated it with my account and API key etc, I then just changed the amount from $2 to $10 (the $2 didnt seem to work)  but then it started loading multiple positions into the market...   im just using juypter notebook to start with ...   is that by design and I should code in some logic to do it only once?

---

## 2021-07-01 15:22:36 - random channel

**river_shah**

potery seems promising: [https://python-poetry.org/](https://python-poetry.org/)

---

## 2021-07-01 15:19:44 - random channel

**river_shah**

Anyone use poetry for python dependency management? I have a mix of private package repos and pypi. Wondering what the best practices circa 2021 are. raw pip and requirements.txt seems rife for dependency confusion attacks among many other issues.

---

## 2021-07-01 15:18:04 - strategies channel

**ShaunW**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) when I said "how do you define a spike" and you said "height" that's a tad dismissive and not really providing enough info to help you. So "height" relative to what? Is that %diff or %relative to the high/low figure? What min/max volume? (presumably not 1p) , what duration? (30s isn't a spike 500ms is), what min overround and does anything vary over time? And many many other factors. As [@U01B8031PM1](@U01B8031PM1) says these things should take you much longer to think about and explore. Yes you need to fail fast but that only works when you can emphatically say you have covered everything. Far from having 'done' spikes I don't think you've even fully defined what one is? Maybe we're all a bit thick but you blaze through topics we'd take months to work on. I tried to keep that short but every tiny aspect could/should fill a book.

---

## 2021-07-01 14:52:35 - strategies channel

**AndyL**

So I have my own WoM which is very similar to that, and yes that does help

---

## 2021-07-01 08:21:01 - general channel

**KG**

I think Flumine would be a good option for you [@UH9MMLXAS](@UH9MMLXAS)

---

## 2021-07-01 07:55:20 - general channel

**liam**

Depends what you mean by logging? Have a read of flumine if you want to see how that does it (single logging queue with plug/play logging controls) as well as python logging using the jsonlogger library 

---

## 2021-07-01 06:28:06 - general channel

**Rob (NZ)**

Hey all , random question, does betfairlightweight by default output any logging of bets, i havent created any but just wondering does it write output anywhere....

---

## 2021-06-30 03:26:13 - issues channel

**Matthieu Labour**

Should the event_ids list be passed directly to get_scores? No need for the for loop I believe. [https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py#L16](https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py#L16)

---

## 2021-06-29 21:03:20 - strategies channel

**Mo**

Who is to say flumine is more accurate?

---

## 2021-06-29 20:49:40 - random channel

**D C**

no I'm testing something new out from home - thats why I have a strong suspicion it could be a problem my end but I thought I would ask the question just in case.

---

## 2021-06-29 20:44:43 - strategies channel

**AndyL**

Data mining needs to be as accurate as Flumine backtest emulation

---

## 2021-06-29 08:10:30 - random channel

**Ke**

Anyone knows how to access pinnacle from UK?

---

## 2021-06-29 07:32:02 - random channel

**LK**

I've never seen anything other than 0 for handicap. Cannot think of a reason why it would be needed for horses or dogs. The term handicap means something different for horses and dogs compared to team sports. To answer your question: handicap for dogs and horses always zero.

---

## 2021-06-28 22:57:22 - strategies channel

**Andrew**

At the risk of my help again being misconstrued, help the reader by labelling your axes. 

---

## 2021-06-28 18:47:19 - strategies channel

**liam**

Yep that’s what I do, intermediary step of plotting the distribution to give a better idea of groups and graphs always help 

---

## 2021-06-28 18:41:04 - strategies channel

**Peter C**

I've definitely been helped by the conversations your questions spark

---

## 2021-06-28 18:29:02 - strategies channel

**AndyL**

All the info is here, so hopefully it's helping many..

---

## 2021-06-28 17:44:14 - strategies channel

**AndyL**

So this may seem a silly question, but when you say "on each line", what do you mean by "line"?

---

## 2021-06-28 16:32:32 - strategies channel

**MacrcoPolo**

Asking good questions to your data is better than knowing the answers goatiwish, keep plodding along :slightly_smiling_face:

---

## 2021-06-28 13:35:05 - general channel

**Lee**

[https://github.com/liampauling/flumine/blob/master/examples/controls/analysis.ipynb](https://github.com/liampauling/flumine/blob/master/examples/controls/analysis.ipynb)

---

## 2021-06-28 13:34:24 - general channel

**Unknown**

Hey, was just checking out the flumine github page and saw this screenshot of a notebook but couldn't find it in the repo. Can anyone point me to it? Thanks in advance!

---

## 2021-06-28 11:46:06 - strategies channel

**AndyL**

[@UBS7QANF3](@UBS7QANF3) [@U4H19D1D2](@U4H19D1D2) thank you both, you've been super helpful

---

## 2021-06-28 07:24:57 - issues channel

**liam**

Yes, in the context as per the example  [https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/backtest.py#L28|https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/backtest.py#L28](https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/backtest.py#L28|https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/backtest.py#L28)

---

## 2021-06-27 22:35:17 - strategies channel

**D C**

Plotting data helps you understand relationships between variables visually

---

## 2021-06-27 22:34:57 - strategies channel

**D C**

Consider this [@U01PJ5YMFBJ](@U01PJ5YMFBJ) - what is the price difference at one tick for prices under 2.0 and what is the price difference for one tick at prices over 100.0 ? That in itself does not preclude linearity but can you see why this difference MIGHT cause a problem?

---

## 2021-06-27 19:00:54 - strategies channel

**Michael**

I don't think that's fair [@U01PJ5YMFBJ](@U01PJ5YMFBJ) you've had a lot of help. This isn't some self help yoga goop bullshit forum.

---

## 2021-06-27 18:53:17 - strategies channel

**liam**

Agreed, note that flumine is designed so that you can plug and play your own simulation logic to optimise for certain conditions. However I think there certainly needs to be some better docs surrounding it’s limitations 

---

## 2021-06-26 22:31:02 - strategies channel

**AndyL**

Rebuilt python3.8 seems to have resolved it

---

## 2021-06-26 15:53:58 - general channel

**PeterLe**

[@U026A2YDLDQ](@U026A2YDLDQ) check out the github repo here : [https://github.com/liampauling/](https://github.com/liampauling/)

You need to take a look at BetfairLightweight and Flumine

All the docs are there, good luck

---

## 2021-06-26 10:48:34 - random channel

**Mo**

[@U01S1VB9X9P](@U01S1VB9X9P) think about it like this. What you are trying to do - run multiple strategies on multiple markets which operate some X seconds before an event starts - is very common. If it's common, flumine can handle it

---

## 2021-06-26 09:20:38 - issues channel

**Peter**

An excellent question [@UQL0QDEKA](@UQL0QDEKA)! If it's pre-planned, you can fire a termination event from within the code, but if you're already running continuously and want to stop to tweak strategies, I don't know how you'd get the event in there. I wonder if [@U4H19D1D2](@U4H19D1D2) has any advice on this ...

---

## 2021-06-26 08:10:30 - random channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/baseflumine.py#L120](https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/baseflumine.py#L120)

---

## 2021-06-26 07:54:32 - random channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/markets/market.py#L126](https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/markets/market.py#L126)

---

## 2021-06-26 07:52:28 - random channel

**Mo**

Are you using flumine?

---

## 2021-06-26 07:43:44 - random channel

**Mo**

Good question, I don't know. [@UQ379K087](@UQ379K087)?

---

## 2021-06-26 07:38:51 - issues channel

**Mo**

Maybe [@UUUAJQZ5J](@UUUAJQZ5J) can help

---

## 2021-06-26 07:32:31 - issues channel

**Peter**

That said, 2 is very restrictive. I'd recommend dropping a note to [mailto:bdp@betfair.com|bdp@betfair.com](mailto:bdp@betfair.com|bdp@betfair.com), explaining that you're using BFLW with separate connections for markets and orders, and ask that they increase the number of connections that you can have.

---

## 2021-06-25 20:10:23 - strategies channel

**Mo**

It’s a good point, I don’t use flumine for backtesting either

---

## 2021-06-25 19:59:14 - strategies channel

**Dave**

It's difficult to build a good general purpose backtest framework. Flumine does a decent job but as a general purpose backtester it cannot make assumptions that a specific backtester could make in order to better simulate reality.

---

## 2021-06-25 19:30:28 - strategies channel

**AndyL**

Isn't that Flumine ?

---

## 2021-06-25 19:20:50 - strategies channel

**thambie1**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) You're getting way ahead of yourself. Problem 1: find value. Problem 2: Optimize capturing value. You're skipping to problem 2, when you haven't worked out problem 1.

---

## 2021-06-25 19:19:39 - strategies channel

**Michael**

There's no simple answer to a question like that, you have lots of options and it depends on the scenario, but if there's edge available to take I'd generally just take it.

---

## 2021-06-25 16:47:25 - general channel

**Will Morrison**

market_data_filter = streaming_market_data_filter(

        fields=["EX_MARKET_DEF", "EX_BEST_OFFERS", "EX_TRADED", "EX_TRADED_VOL", "EX_LTP"], ladder_levels=x

    )

where if I make x greater than 10, I still only get ten ladder levels in the market_book it creates. Is there a way for me to get deeper information?

---

## 2021-06-25 16:46:23 - general channel

**Will Morrison**

Heya guys! It's been ages since I messaged on here, but I've been doing lots of work with betfairlightweight lately and learning a lot. Thanks Liam! So I have a case where I want to look deep in a market book, but according to the API documentation ladderLevels can only be 1-10. That is, the way I'm currently subscribing to my market is:

---

## 2021-06-25 16:04:18 - random channel

**Mo**

Do you know exactly which of the markets is broken? I suspect the raw file has a problem 

---

## 2021-06-25 12:04:51 - strategies channel

**Jorge**

[@UGV299K6H](@UGV299K6H) to answer your question of why do you want to know? - I'd like to know it to compare different strategies

---

## 2021-06-25 12:02:16 - strategies channel

**Peter C**

For what it's worth I asked the question because I am quite sceptical of backtest results and wanted to gain some knowledge about whether they can be trusted when offering. Your answer was probably more what I actually needed.

---

## 2021-06-25 10:58:34 - general channel

**liam**

It’s the logic to trigger a snap, handy on stale/low liquidity markets [https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/streams/marketstream.py#L65|https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/streams/marketstream.py#L65](https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/streams/marketstream.py#L65|https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/streams/marketstream.py#L65)

---

## 2021-06-25 10:52:46 - strategies channel

**Michael**

I don't know what your experience level is but if you're a new-ish player then honestly I think you're better off not asking that question, don't expect anything just find out.

---

## 2021-06-25 08:25:32 - random channel

**Mo**

Samantha Murray Sharan vs Marta Kostyuk is the match in question

---

## 2021-06-25 00:45:11 - general channel

**Adrian**

Is there a way to control the login/logout process with Flumine? It seems to be automatic when calling framework.run

Edit: I should add that I'm using the non-interactive login with certs. There are separate commands in bflw for this that I control with a GUI, so wondering if Flumine has the same functionality or is it inextricably linked with the run call

---

## 2021-06-24 15:50:27 - general channel

**James**

Can anyone recommend a decent host for a mysql database? Thanks

---

## 2021-06-24 11:22:49 - general channel

**Adrian**

[@U4H19D1D2](@U4H19D1D2) thanks for your patience. I figured it out (with [@U010GM77S4W](@U010GM77S4W)’s help as well) and now have a folder full of streaming data files! yahoooo!

---

## 2021-06-24 11:13:56 - general channel

**Adrian**

where i'm running my script from not the flumine directory

---

## 2021-06-24 11:08:15 - general channel

**D C**

I have a generic question that I can't answer because I don't request virtual prices off the stream currently. If I request virtual prices and XM is not active on the market, does the stream still push the bdatb/bdatl fields or does it suppress them? If it does send them out, are they simply identical to the batb/batl fields?

---

## 2021-06-24 11:00:36 - general channel

**mandelbot**

ie if you're running from flumine &gt; examples then put it in flumine &gt; examples &gt; strategies

---

## 2021-06-24 09:33:55 - general channel

**Adrian**

[@UBS7QANF3](@UBS7QANF3) thanks, what is the "standard format" and "prices file" you are referring to? Are these generated by Betfair or BFLW/Flumine?

---

## 2021-06-23 14:18:12 - general channel

**liam**

Could do with a helper function on that 

---

## 2021-06-23 13:57:42 - general channel

**Joe**

Works perfectly, thanks a lot, just had to add the other market into the streaming filter

---

## 2021-06-23 13:46:56 - general channel

**Lee**

I've not tested but `market.flumine.markets.markets.get(market_id)` might work

---

## 2021-06-23 13:33:44 - general channel

**Lee**

This might help [https://github.com/liampauling/flumine/blob/master/flumine/execution/transaction.py#L12](https://github.com/liampauling/flumine/blob/master/flumine/execution/transaction.py#L12)

---

## 2021-06-23 13:30:31 - general channel

**Joe**

Hi all, is it possible to send orders to different markets from within the process_market_book function in flumine rather than just the one that called that function? I can send the orders using bflw as a workaround but that means they don't get published to the flumine orders list and can't work out how to pull them into the process orders function if not

---

## 2021-06-23 11:48:29 - random channel

**Peter**

[@UQL0QDEKA](@UQL0QDEKA) You can run multiple instances of Flumine. Each instance will only run the strategies that you explicit add to it. So it's possible to run one instance that just does data collection and a different one to execute your strategies. Though backtesting would be done locally against your recorded data and wouldn't involve any real money.

---

## 2021-06-23 10:54:13 - general channel

**Peter**

Couple of quick questions about the values in the info property of the trade class:

1. orders is a list, which has me wondering what I’m missing as I would have expected a trade to belong to a single order

2. Also wondering what offset_orders are?

---

## 2021-06-23 10:48:44 - issues channel

**Newbie99**

[https://github.com/liampauling/flumine/issues/455#issue-928070153](https://github.com/liampauling/flumine/issues/455#issue-928070153)



Will update once I've been able to replicate.

---

## 2021-06-23 09:16:06 - general channel

**Adrian**

[@UQL0QDEKA](@UQL0QDEKA) on the surface yes but really it was Flumine requesting a new login when running `framework.run()` so the 2FA was de facto expired

---

## 2021-06-23 08:25:17 - general channel

**Adrian**

Hmm maybe you're right. If Flumine isn't using my active login then it won't see the full password, since I set that up via a separate function

---

## 2021-06-22 17:18:24 - general channel

**Sam Asin**

So I'm getting ready to turn on some new strategies with new code and such, and I was thinking of trying to limit how liquid my account funds are in case there are problems while I turn it on small. I was thinking for the next couple weeks while I'm testing it out, I could manually just go into a futures market that's far away, like next EPL season or NFL super bowl winner or whatnot, and make a big offer at 1.01 that would never be matched, where the market won't have a reason to change for like 12 months, and thus lower my account's liquidity so the automation can't do anything too nuts. Is this something that people do? Are there some downsides to this that I'm not thinking of? Do y'all do something similar or another trick for the same outcome when you are doing a ton of changes?

---

## 2021-06-22 16:53:08 - strategies channel

**Michael**

[@U01PQ9SR9MJ](@U01PQ9SR9MJ) "price" normally means odds, but you can take your choice of which odds you're looking at and money available might be part of that. The rest of your question is for everyone to figure out on their own.

---

## 2021-06-22 15:34:21 - general channel

**mandelbot**

Yes for horse races thats the way I record SP, so not sure how to do it with greyhounds

---

## 2021-06-22 14:36:58 - general channel

**Jonjonjon**

I haven't seen a function, but isn't it just in runner.sp.actual_sp?



[https://github.com/liampauling/betfair/blob/ee4488ddb4f4bee775450f7497c08ea0fb470e9b/examples/examplestreaminghistorical.py#L35-L51](https://github.com/liampauling/betfair/blob/ee4488ddb4f4bee775450f7497c08ea0fb470e9b/examples/examplestreaminghistorical.py#L35-L51)

---

## 2021-06-22 14:28:00 - issues channel

**Betbot Coder**

if anyone else has same or similar problem please let me know!

---

## 2021-06-22 12:26:03 - general channel

**D C**

Thanks very much [@UBS7QANF3](@UBS7QANF3) very helpful as always.

---

## 2021-06-22 12:23:27 - general channel

**Mo**

I don't think the 50ms is forbidden knowledge but it's probably one of those things buried deep in the API documentation. What I have more easily found is that, indirectly, we have:



• Virtual prices are updated 150ms after the non-virtual stream: [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API#ExchangeStreamAPI-Marketdatafieldfiltering/MarketDataFilter](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API#ExchangeStreamAPI-Marketdatafieldfiltering/MarketDataFilter) - i.e. they are on a 200ms cycle

• listMarketBook is not supposed to be called more than 5 times a second: [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listMarketBook](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listMarketBook) - because there won't be (virtual) updates more frequently than this

---

## 2021-06-22 11:39:23 - general channel

**liam**

Good idea, confusion sometimes stems from resources / lightweight / flumine style mix 

---

## 2021-06-22 11:24:07 - general channel

**Aaron Smith**

it is. NearPrice is the bsp if the market was to start at that very moment, however i think near price is not calculated with every update, which probs makes it rather unreliable. There are documentations on how bsp is calculated, you could try and calculate it yourself, however i m not sure if its possible due to bets that are placed as a limit order but have persistance type == MarketOnClose, i dont think you can distinct them from bets without that persistant type. I guess theoretically you could reverse engineer  those bets when you get a new nearPrice and from there on calculate the bsp on your own until the next nearPrice shows up ? :smile:

---

## 2021-06-22 08:49:42 - general channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) have you thought about adding a `__repr__` method to `PriceSize` to help the newbies?

---

## 2021-06-22 08:18:39 - strategies channel

**Michael**

Just to be clear [@U01PJ5YMFBJ](@U01PJ5YMFBJ): I don't know anything much about data science - I'm just telling you what I do and not claiming it's 'best'. Others could certainly offer more qualified advice particularly on how to do things in computationally efficient ways.

---

## 2021-06-22 08:14:34 - strategies channel

**Michael**

If you really want to re-make the book in order to price everything properly then you'll need to do a bit more than that but that's the basic workflow that I use for understanding signals. A lot of people (most?) don't bother re-pricing everything as it's sufficient to simply identify when one runner is 'out' and bet accordingly. You don't need to re price all runners or even the runner in question to do that.

---

## 2021-06-22 07:58:28 - general channel

**mandelbot**

[@U01S1VB9X9P](@U01S1VB9X9P) check out flumine [https://github.com/liampauling/flumine](https://github.com/liampauling/flumine) and the docs [https://liampauling.github.io/flumine/](https://liampauling.github.io/flumine/)

---

## 2021-06-22 07:44:49 - general channel

**liam**

It’s .prices in bflw 

---

## 2021-06-21 12:02:44 - random channel

**Newbie99**

[https://github.com/liampauling/flumine/issues/453#issue-926097024](https://github.com/liampauling/flumine/issues/453#issue-926097024)

---

## 2021-06-20 19:45:27 - strategies channel

**PeterLe**

HI [@U4H19D1D2](@U4H19D1D2) Yes the fill/kill was just an example. Im not sure I put my original question across properly and it went off at a tangent a little; I was more interested in how to apply the linear regression technique in general. Now all the kids/grandchildren have gone home, Ill get some thinking time :grinning:

---

## 2021-06-20 11:16:16 - strategies channel

**D C**

I'd be interested to hear about that too - particularly in the example you have raised because it seems like a problem that would be very tricky to tackle in a linear fashion. Seems more like an optimisation problem but one that is wrapped up with how good/competitive your ask prices are (i.e. if you are offering a bad price (from your perspective) you'll get matched very fast).

---

## 2021-06-20 09:57:42 - strategies channel

**mandelbot**

which book is that? the man who solved the market?

---

## 2021-06-19 22:08:51 - strategies channel

**Jonjonjon**

I just use matplotlib because I'm used to it. There are prettier packages out there, but I keep forgetting how to use them.

---

## 2021-06-19 15:04:31 - strategies channel

**ShaunW**

Adding sophistication won't help if you haven't got a grip on the basics. It's not a magic bullet and all you'll do is make the same mistakes, but faster. It's on that list of "if it's that simple then we'd all be doing it". I think [@U4H19D1D2](@U4H19D1D2) and [@UBS7QANF3](@UBS7QANF3) have some interesting things to say about ML and it's not always complementary.

---

## 2021-06-19 12:11:08 - strategies channel

**birchy**

Same question as [@UUE6E1LA1](@UUE6E1LA1)...

When you "plotting" I presume you mean on a graph?

---

## 2021-06-19 09:33:42 - strategies channel

**PeterLe**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) just curious what your background is? Did you say you are an engineer of some description? You seemed to pick up Python quickly

By the way I don’t think there is any such thing as a stupid question if you don’t know the answer. I for one am learning off your posts

---

## 2021-06-19 09:33:22 - strategies channel

**AndyL**

[@U01DVUAE2G1](@U01DVUAE2G1) i was just being curious given previous discussions, not going to jump into it, but the YouTube refs i will take a look at for interest

I think my asking too many questions is annoying, i probably ought to let the few 100 other members have their turn

---

## 2021-06-19 09:29:31 - strategies channel

**Aaron Smith**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) That wasnt a stupid question, just a sign your knowledge of ML is limited (just like mine). If you read up a little on ML, you will surely understand why ML can theoretically be good at predicting crowd behaviour. Personally i wouldnt recommend you to go down that route yet though. I m rather certain there is easier ways to make your first profits, even if those would be small in the beginning and ML could give you higher returns. The first step should be making some profits at all, once that barrier is broken (which can be hard enough) you can look out for bigger projects. Also another downside i see to the ML approach as a starter is that you often times dont fully understand why you are making money (you probs have an idea if you managed to make a profitable strat with it, but its surely not clear what is going on).

---

## 2021-06-19 09:14:26 - strategies channel

**AndyL**

Ill stop asking the stupid questions.. found  hole, back in it now!

---

## 2021-06-19 08:59:00 - strategies channel

**AndyL**

I like asking questions and provoking discussions, i also hope it doesn't just help me

---

## 2021-06-19 08:39:29 - strategies channel

**Oliver Varney**

Even before any of this though I think the advise was to go away and understand how the markets work first. This cant be done in a day then you come back ask a series of questions and hope someone will give away their golden recipe. Be honest with yourself, do you want to find the answer yourself or do you want someone to tell you the answer. From all the conversations ive seen its the latter.

---

## 2021-06-19 07:56:32 - strategies channel

**AndyL**

Thanks [@U012XF5CNPN](@U012XF5CNPN) [@U9JHLMZB4](@U9JHLMZB4) your answers help a lot, makes sense, as you say i was thinking about it the wrong way round!

---

## 2021-06-18 23:32:17 - strategies channel

**Paul**

You are assuming you know the answer and just need to figure out the tools to help you prove it. Change it around: assume you don’t know anything and use the tools to ask questions. If that doesn’t appeal to you, this is definitely going to be very hard work and not very enjoyable.

---

## 2021-06-18 23:30:31 - strategies channel

**Paul**

Your question is “how would ML solve these specific problems”. You need to change the way you think. A better question is “ML is good at x, y and z. How can I use that to get an edge?”

---

## 2021-06-18 23:00:01 - strategies channel

**AndyL**

Dumb question warning! Q: why would ML be any good at predicting crowd behaviour? Ie.a market? How can it predict participants? What would you use as inputs, fundamentals or technicals?

---

## 2021-06-18 10:57:37 - random channel

**Unknown**

My son and myself were behind this one some time ago; think the guy owns a company that sells applications, hence the plate :grinning:  Think you need one with Flumine Liam :grinning:

---

## 2021-06-17 23:24:13 - random channel

**AndyL**

[@U4H19D1D2](@U4H19D1D2) ha, hadn't seen this, quite ironic given my question in [#CTPL3R3FU|strategies](#CTPL3R3FU|strategies)

---

## 2021-06-17 17:20:19 - strategies channel

**ShaunW**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) that's why actual pl doesn't mean much,  and why tracking your theoretical pl helps your sanity. Sh!t happens but thankfully is usually reasonably fair value sh!t.

---

## 2021-06-17 17:16:50 - strategies channel

**Peter**

Slightly embarrassed to admit this, but I have data for this question. In 239,794 greyhound races between December 2016 and (coughs) a few minutes ago, 712 went off before the scheduled start time. So it is a thing, but not very common as (hat tip to [@U01HPRM31G8](@U01HPRM31G8)) greyhound racing is existentially dependent on the bookies.

---

## 2021-06-17 16:11:43 - general channel

**Crofty**

Good point re the above, DC and opened up another question for me - when the markets are opened and that type of money appears at 1.01, is it Betfair customers like people in this group or is it the people who seed the markets?

---

## 2021-06-17 15:52:45 - general channel

**Oliver Varney**

similar to my question a month or so ago about who is the fool in the situation, as there are a few guys in here that are happy to back into those prices, yet are not getting stung from what I understood (correct me if im wrong)

---

## 2021-06-17 15:50:18 - general channel

**Crofty**

General question - when horses get beaten at 1.01, does anybody know if the majority losing backers tend to be manual players or automated ones?

---

## 2021-06-16 15:25:30 - strategies channel

**AndyL**

[@UQL0QDEKA](@UQL0QDEKA) apologises wrong person! It was [@U016TGY3676](@U016TGY3676) s comment i was referring to: [https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1623458534154600?thread_ts=1623458534.154600&amp;cid=CTPL3R3FU|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1623458534154600?thread_ts=1623458534.154600&amp;cid=CTPL3R3FU](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1623458534154600?thread_ts=1623458534.154600&amp;cid=CTPL3R3FU|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1623458534154600?thread_ts=1623458534.154600&amp;cid=CTPL3R3FU)

---

## 2021-06-16 12:25:40 - strategies channel

**Unknown**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) I struggle to see why you are flitting from one market type to another (Aus, Greys) other than hope you strike it lucky. Anyway, before the racing resumed last year I went into the data and selected a series of odds and rank/odds as groups then set them up to update to a table. So for over 1 year they have been updating, some good others so bad that they have been replaced. You are more than welcome to look at the list, pick any out that may interest you and I will post the underlying criteria. These are what I think this forum calls fundamentals so will probably be of no interest to many but someone may be generous enough to also test any selection you may make to at least check your newly developed Python skills. UK Racing only.

---

## 2021-06-16 07:51:31 - strategies channel

**AndyL**

The edge size was my worry, hence questions yesterday.... 

To come up with these i actually took PeterLe's suggestion thinking about simpler situations and how crowd might be reacting, so seemed good it came up with something albeit small... but in reality im not sure im going to find much more..

---

## 2021-06-15 20:19:20 - issues channel

**liam**

You tried just using some bflw code to confirm the orders are returned? No reason that code wouldn’t work unless it’s greater then 1k

---

## 2021-06-15 20:14:57 - issues channel

**liam**

This is the filter stopping it [https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/middleware/orders.py#L23|https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/middleware/orders.py#L23](https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/middleware/orders.py#L23|https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/examples/middleware/orders.py#L23)

---

## 2021-06-15 16:54:19 - general channel

**river_shah**

sure, just use a PRO data file that is free. dont get basic or advanced. This is strictly to get your feet wet with python and replaying data back (doesn’t matter that it is old at this stage)

---

## 2021-06-15 16:40:12 - general channel

**Aaron Smith**

Were you planning to use lowest layer to place some bets in order to not get banned by betfair for only scraping data? I havent checked lowest layer and not sure if its usable for that. If you need to place a bet here and there to keep betfair happy while you get your data+python skills going, i would certainly still make a strat myself. Just put some idea that you think could very theoretically work into action. Make sure to only place bets on runners with low price spread and make sure not to place to many orders and 2 pound per bet obviously. You wont lose a lot and maybe gain some knowledge about how stuff works while keeping yourself safe.

---

## 2021-06-15 16:37:58 - general channel

**Scott**

Makes sense. Thanks, I’ll work on python first before worrying about getting the data. 

---

## 2021-06-15 16:16:31 - general channel

**Scott**

Trying to run before I can walk again, I’m wanting to start collecting data whilst I learn enough python to understand what’s going off.. do I run marketrecorder and lowestlayer side by side or should I be referencing lowest layer somewhere in marketrecorder? 

---

## 2021-06-15 11:50:35 - issues channel

**Scott**

Thanks [@UBS7QANF3](@UBS7QANF3) it was a problem with the path. Changed to absolute and it’s logged in successfully! 

---

## 2021-06-15 11:28:34 - issues channel

**Mo**

What exactly are you running? Are you entering commands into a Python console? Are you running a Python script?

---

## 2021-06-15 11:04:15 - issues channel

**Mo**

I use bflw but not flumine 

---

## 2021-06-15 10:53:29 - issues channel

**thambie1**

[@UBS7QANF3](@UBS7QANF3), given you have your own tech stack, how do you know so much about bflw?

---

## 2021-06-15 08:25:41 - issues channel

**Jonjonjon**

This function was written to handle missing prices:



[https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/utils.py#L104](https://github.com/liampauling/flumine/blob/6d7ed2eed5a1a111949d0feb4ffe11f9be28efec/flumine/utils.py#L104)

---

## 2021-06-13 11:20:24 - random channel

**D C**

[@UBS7QANF3](@UBS7QANF3) you are right there but he only did that off the back of cricket trader Mark Iverson asking legit questions about the credibility of it many many months prior. Him and his toxic mate "GeeksToy" were mainly looking for clicks and likes there.

---

## 2021-06-13 10:25:21 - random channel

**Oliver Varney**

no mention of bflw or flumine, youve missed a trick there [@U4H19D1D2](@U4H19D1D2) :joy:

---

## 2021-06-12 18:05:08 - strategies channel

**thambie1**

Yeah, I did this full time for 9 months before breaking through :thinking_face:.. but then again I built my own version of bflw and flumine in that time too

---

## 2021-06-12 11:59:45 - strategies channel

**PeterLe**

It was interesting reading [@U016TGY3676](@U016TGY3676) story. I remember my dad having a bet each Saturday (5p Yankee!, 55p). At the time I had just started my first paper round at 12 and he would often ask me to stop by the bookies to put a bet on for him at 12!

Just on a side topic, my youngest son has obviously noticed me toiling away learning Python and just recently he said "I think Id like to learn that dad whilst I have the summer free" so Ive set him up pycharm and he has access to my Udemy course

Just an interesting contrast between what I had with my dad and him checking the 'form' and ringing the selection with his pen and how things are more high tech today :grinning: I often wonder what my dad would think if he knew how many bets I was doing each day

---

## 2021-06-11 21:02:48 - strategies channel

**mandelbot**

Mine take significantly longer than this. Should I be using the C BFLW or normal?

---

## 2021-06-11 16:30:42 - strategies channel

**ShaunW**

@goatwish you say the python is taking a long time to run. Compared to what?  



Sounds like a case of choosing something from your ToDo list you can do rather than what needs to be done? Looking busy might work in the PAYE job but you can't cherry pick the jobs now. :wink:

---

## 2021-06-11 12:47:10 - strategies channel

**Aaron Smith**

I suspect [@UBS7QANF3](@UBS7QANF3) is gonna throw a bunch of maths at us to make him look smart, when what i really want is an easy step by step guide on how to buy that yacht

---

## 2021-06-11 10:33:26 - strategies channel

**D C**

You are starting off in a stronger position than I did because you have BFLW/flumine and getting good advice from people on here who are making a shitload of profit every year.

---

## 2021-06-11 10:22:40 - strategies channel

**D C**

I would also add that when you are feeling frustrated with it all, taking a break for a couple of days can help. Nothing worse than getting pissed off because something you think should work doesn't work.

---

## 2021-06-11 10:15:06 - strategies channel

**Unknown**

So i spent 4months part time watching ladders with BA last year which helped alot

Ive had numerous discussions on market dynamics and getting value, which is where i am at with my current bot, and my main concentration. I want to work on  this more.

---

## 2021-06-11 09:49:52 - strategies channel

**liam**

We do need some bflw stash…

---

## 2021-06-11 09:29:12 - strategies channel

**Mo**

I don't think it helps that there are so many opinions going around that he can pick the ones that appeal to him rather than the ones that are going to help him

---

## 2021-06-11 09:25:45 - strategies channel

**Michael**

The basic problem here is that [@U01PJ5YMFBJ](@U01PJ5YMFBJ) doesn't want to do the difficult/hard work bit. That's fine if he's not interested in succeeding.

---

## 2021-06-11 07:45:54 - strategies channel

**AndyL**

Thanks [@U9JHLMZB4](@U9JHLMZB4), yes realise the data issue but that's gathering in the background 

Need to spend a bit of time optimizing my python as it's taking a long time each run

---

## 2021-06-11 06:59:41 - general channel

**Peter**

[https://betfair-datascientists.github.io/api/apiPythontutorial/|Old but still a really good place to start](https://betfair-datascientists.github.io/api/apiPythontutorial/|Old but still a really good place to start)

---

## 2021-06-10 18:33:29 - random channel

**thambie1**

The ones who solved limit poker sure did

---

## 2021-06-10 18:33:12 - random channel

**Oliver Varney**

The guys who solved poker, I'm sure they published their paper straight away ....

---

## 2021-06-10 15:07:12 - strategies channel

**Scott**

more +ev bets = more profits.. think ive solved it

---

## 2021-06-10 14:25:32 - strategies channel

**Oliver Varney**

Basically my view is that it's best to learn how to walk before running, suboptimal but it's about getting your foot in the door and not getting discouraged

---

## 2021-06-10 14:07:22 - strategies channel

**Scott**

Is that purely to reduce bankroll swings?

---

## 2021-06-10 10:14:27 - general channel

**Jono**

no problem thank you for digging into it

---

## 2021-06-10 10:00:17 - general channel

**Jono**

sounds fantastic could you possibly send me a quote i can search for in the slack group to find liams postings or the rough date of his postings. no problem if its a pain to find just let me know and ill go digging

---

## 2021-06-10 09:31:51 - general channel

**Dermot**

There’s no technical limitation in flumine but betfair limit you to 200 markets (per subscription) by default. You can message them to get that increased though 

---

## 2021-06-10 09:20:19 - general channel

**Jono**

ah right ok. i just read some earlier posts in this forum where someone mentioned  "it may be worth firing up betangel (if you have it ) in ladder mode so you can visualise what the data from bflw / flumine provides" . I was wondering if this was indeed the case and some of the data provided through betangel makes use of the two packages. i mean if you are going to stream betfair data why not use the best stuff thats already available, it makes sense.

---

## 2021-06-10 09:08:07 - general channel

**D C**

There are 2 ways to get price data from betfair - streaming API and API-NG. Streaming is faster and more efficient - just becuase something uses streaming does not mean it uses BFLW - any application that has permission to use the streaming API can do so.

---

## 2021-06-10 08:38:18 - strategies channel

**Jonjonjon**

[@U01PJ5YMFBJ](@U01PJ5YMFBJ) To get you started at Michael's question:



"At the trivial level it looks easy: Do half of all bets at 2 win? But when you think about it it's not that simple."



What if the market (best back/lay) is at 2.0 / 10.0, and you get matched at 2.0. How often do you win?



What if the market is 1.5 / 2.0. How often do you win?



If people have been telling you to trade standard technical analysis nonsense, they might try to categorise strategies into mean reverting and trend following. But they don't point out that if you are constantly crossing the back/lay spread without good fundamental reason, then you're probably going to lose.

---

## 2021-06-10 00:02:31 - issues channel

**John**

this is a good example [https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/example.py](https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/example.py)

---

## 2021-06-10 00:01:31 - issues channel

**John**

[@U024BRSPXGD](@U024BRSPXGD) check this out [https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/priceblockage.py#L40](https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/priceblockage.py#L40)

---

## 2021-06-09 23:27:05 - issues channel

**Unknown**

Hi, I started using the API, but I have no idea how to get the (lay and back) values ​​of a horse race. Does anyone have a basic example or a link so I can start this development?

---

## 2021-06-09 23:20:19 - strategies channel

**Jonjonjon**

People here will generally be able to help with better code. It's just that they are less likely to give you secret sauce. But an SMA implementation is not secret sauce.

---

## 2021-06-09 23:19:45 - strategies channel

**Jonjonjon**

So try using this to profile the code: [https://docs.python.org/3/library/profile.html](https://docs.python.org/3/library/profile.html) , and then if it's a bottleneck, people here can help.

---

## 2021-06-09 23:18:21 - strategies channel

**AndyL**

I wouldn't know how to start to prove it!

---

## 2021-06-09 23:01:08 - strategies channel

**AndyL**

I only got flumine up and running 3weeks ago..

---

## 2021-06-09 23:00:41 - strategies channel

**Jonjonjon**

Which markets take an hour to process? I think I can do 1,000 AU horse markets in a few minutes using Flumine.

---

## 2021-06-09 21:18:07 - strategies channel

**Atho55**

An opinion on how to find value in the pre market would be appreciated [@U4H19D1D2](@U4H19D1D2)

---

## 2021-06-09 15:58:56 - strategies channel

**Newbie99**

...it does, but especially when starting out, bankroll management is important too. There is a balance between maximum value and variance.



Everyone on here has differing bankroll sizes, some can take larger variance (or simply have a substantial edge) and therefore they have no need to ever green up, for some it may make sense (whilst accepting this will erode value) to hedge sometimes.

---

## 2021-06-09 12:06:55 - random channel

**Lee**

i used to use it at my previous two companies, might be able to help with some basic config

---

## 2021-06-09 02:46:34 - random channel

**Steve Roach**

Digging into some of the documentation and a couple of random questions occurred to me:

• API-NG: what does the NG stand for?

• What is the difference between bflw &amp; flumine? Is there overlap in functionality?

---

## 2021-06-08 23:47:26 - issues channel

**Lee**

Use this function [https://github.com/liampauling/betfair/blob/ee4488ddb4f4bee775450f7497c08ea0fb470e9b/betfairlightweight/filters.py#L68|https://github.com/liampauling/betfair/blob/ee4488ddb4f4bee775450f7497c08ea0fb470e9b/betfairlightweight/filters.py#L68](https://github.com/liampauling/betfair/blob/ee4488ddb4f4bee775450f7497c08ea0fb470e9b/betfairlightweight/filters.py#L68|https://github.com/liampauling/betfair/blob/ee4488ddb4f4bee775450f7497c08ea0fb470e9b/betfairlightweight/filters.py#L68)

---

## 2021-06-08 19:00:53 - general channel

**Peter C**

OK thanks, I can sort that. Sorry for the confusion, thanks for you help - I didn't really realise how the conflate worked.

---

## 2021-06-08 18:53:36 - general channel

**liam**

You need bflw logs 

---

## 2021-06-08 12:21:06 - strategies channel

**Jonjonjon**

DOing this also helps reduce the number of orders I place.

---

## 2021-06-08 00:47:05 - general channel

**Steve**

Yep. Run hundreds of markets using the same code, never a problem. Just one market where it seemed to be sending a change message rather than the whole orderbook.

---

## 2021-06-07 13:16:39 - general channel

**Steve**

Using flumine, I added a market to my script tonight. Got the message to say that the market had been added ("INFO:betfairlightweight.streaming.stream:[MarketStream: 2001]: 1.171635649 added, 2 markets in cache"). But when I got the first message for this market it included the market defintion info - but only gave me a very incomplete orderbook. On the website I can see that on the back side there are over 30 different prices - but the message I received only had 2 (and they weren't even the best prices for each side). Any ideas why I wouldn't be getting the full orderbook - when for all the other markets in my script I am? Is this a common problem?

---

## 2021-06-05 14:42:24 - random channel

**Mo**

You know there is a distinction between these place markets in the market type? (PLACE vs OTHER_PLACE). It makes it very easy for API users to focus on the main Place market. My guess is the problem here is not the number of markets but the general problem of how to attract liquidity to a sport/market type that people aren’t really interested in

---

## 2021-06-05 14:12:47 - random channel

**Oliver Varney**

9 meets all in a short period of time cant help also

---

## 2021-06-04 19:11:03 - general channel

**Phil Anderson**

[@U016TGY3676](@U016TGY3676) Thanks. I had something in place using the mround function and 'if' depending on which band the number fell in. A lookup table probably would've been easier! I think I found the problem anyway, there were a couple of numbers in the calculation that weren't rounded. I'll have to run it a bit to see if it's sorted.

---

## 2021-06-04 11:03:26 - issues channel

**James McKenzie**

seems a different problem to the one described earlier

---

## 2021-06-04 08:55:25 - general channel

**Mo**

[https://docs.python.org/3/library/typing.html#typing.Union](https://docs.python.org/3/library/typing.html#typing.Union)

---

## 2021-06-04 08:50:23 - general channel

**Mo**

This is "only" for type hints; they are not necessary for this code (or any code that uses them) to run but it is best practice to use them as it makes your code clearer and your IDE will be able to analyse your code and ensure that e.g. the function is returning a value that is the correct type as the hint



In this case, the hint is saying that the `market_book` parameter is EITHER (Union) a `MarketBook` (defined in bflw) OR a `dict`. The intention is for the function to work whether you are using bflw in lightweight mode (generates `dict`s) or not (generates objects of the class `MarketBook`)

---

## 2021-06-02 09:04:42 - general channel

**Mo**

I'm sure you're right [@U4H19D1D2](@U4H19D1D2) as I recall similar but impossible to find any reference to it in the documentation

---

## 2021-06-01 18:41:47 - issues channel

**Newbie99**

If it helps, I can see the original bet_id for the original £3 bet was different to the bet_id above, so it has to have been replaced

---

## 2021-06-01 18:17:39 - issues channel

**Newbie99**

[@U4H19D1D2](@U4H19D1D2), I've been using that middleware for a bit now and all seems to be good, all EXECUTION_COMPLETE orders come through as expected.



Additionally, Flumine was picking up all EXECUTABLE orders from previous sessions (if created in Flumine), however I noticed one order never gets picked up.



It was created by Flumine in a previous session and all other orders from previous sessions that remain executable are picked up.



The only thing I can see that is different about this one, is that the exposure is very small (LAY 33p @ 1.43 is the size_remaining), is the small size stopping it being picked up?



 I'm just checking if it exists as follows:



``` def process_orders(self, market, orders):



        if market.market_book is not None and \

                market.market_book.status not in ['CLOSED','SUSPENDED']:



            for order in orders:

                if str(order.bet_id) == '234892683410':

                    print(order.bet_id)```

---

## 2021-06-01 18:00:21 - random channel

**Crofty**

When companies like Star Lizard talk about placing client bets into the market, how do people become clients of Star Lizard - is it people who are high net worth individuals for example? I hope that isnt a silly question!

---

## 2021-06-01 08:51:39 - strategies channel

**AndyL**

As you point out i now have aus and greyhound stream data courtesy of flumine

---

## 2021-05-30 17:09:42 - general channel

**John**

Right I see. Yep moving the logging to the main file works well. flumine's logging format is very nice. I will try to use that. Thanks a lot [@U4H19D1D2](@U4H19D1D2)!

---

## 2021-05-29 19:57:55 - general channel

**liam**

And a simple example [https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2021-05-29 19:57:16 - general channel

**liam**

[https://liampauling.github.io/flumine/controls/|https://liampauling.github.io/flumine/controls/](https://liampauling.github.io/flumine/controls/|https://liampauling.github.io/flumine/controls/)

---

## 2021-05-29 10:42:35 - random channel

**Jonjonjon**

Mine says Betfair Refunds too. HSBC haven't questioned why I get so many refunds

..

---

## 2021-05-29 09:46:43 - random channel

**liam**

yeah any large amounts going in/out are going to be questioned but a lot of the checks are automated and from experience anything with the word 'bet' in gets red alerted :face_palm: As [@U01B8031PM1](@U01B8031PM1) the TM checks work off normal vs abnormal behaviour so if you are consistent you can fly under the radar

---

## 2021-05-29 09:44:40 - random channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) that implies they are mainly if not exclusively looking at who the transaction is coming from as otherwise surely they would still question why you are receiving large sums of money through PayPal?

---

## 2021-05-29 09:43:25 - random channel

**liam**

I use paypal as a layer to prevent questions (had issues before when trying to get a mortgage) the issues is that its limited per week (cost to betfair)

---

## 2021-05-29 09:20:14 - random channel

**river_shah**

I've had both BF and my bank block transactions at the start, had to talk to humans on both ends to explain to them the reason for transfers. Haven't been a problem for a couple of months. 

---

## 2021-05-29 08:00:34 - random channel

**Michael**

I withdraw weekly, like [@UBS7QANF3](@UBS7QANF3) Says you don't need much float. In the past I've let it run up and made large withdrawals without problems except that they get held up on BF end.

---

## 2021-05-29 07:31:15 - random channel

**Mo**

I would imagine that most strategies have relatively modest bankroll requirements and it doesn't make sense to have a lot of money sitting in your Betfair account. Surely it's better to have it in products that are covered by the FSCS guarantee? My question is whether anyone has experienced any problems with their bank when making large withdrawals from Betfair?

---

## 2021-05-29 06:17:24 - random channel

**Oliver Varney**

maybe a naive question, but do people withdraw often as they trust the bank more as [@U01DCR5PXDY](@U01DCR5PXDY) has said or for other reasons such as having other investments they want to service? Or are they happy to run it up and re-pump the money into new strategies?

---

## 2021-05-28 23:07:12 - random channel

**thambie1**

To be clear the amount of money I have on my account is less than my total winnings. If anything I'm being the coward by not keeping more on there, haha. It's a combination of trusting my bank more than Betfair, and wanting to minimize risk should my bot go haywire and blow my bankroll.

---

## 2021-05-28 19:25:11 - random channel

**Oliver Varney**

they should of put the bflw drinks meetup in there :wink:

---

## 2021-05-27 15:05:19 - issues channel

**kieran**

Ah, thank you, that solved it.

---

## 2021-05-27 13:13:23 - random channel

**MacrcoPolo**

Problem is the holdings look like utter trash

---

## 2021-05-27 13:06:52 - random channel

**MacrcoPolo**

I do overall find sports more interesting, but it's far more time consuming (betfair api is pretty shit) compared to working with crypto exchanges

---

## 2021-05-27 11:10:30 - general channel

**liam**

Now [https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/lowestlayer.py#L39|added](https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/lowestlayer.py#L39|added) and stored in the order notes

---

## 2021-05-27 11:09:48 - general channel

**liam**

Simple [https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/priceblockage.py#L9|example](https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/priceblockage.py#L9|example) added, no grouping (needs to be added in the trigger func) but shows best practice on where to store the data, does this help?

---

## 2021-05-27 11:08:55 - general channel

**liam**

Now [https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/marketrecorder.py#L129|updated](https://github.com/liampauling/flumine/blob/6f0541d2ba57ab0cbf9389a560e9a41d1ad01cfc/examples/strategies/marketrecorder.py#L129|updated)

---

## 2021-05-27 09:39:33 - general channel

**thambie1**

Despite the documentation, I found this to be untrue.

---

## 2021-05-26 11:51:14 - issues channel

**liam**

Are you using flumine or just bflw?

---

## 2021-05-26 10:41:39 - issues channel

**Jorge**

This seems to be working for Streaming but not for the `market_filter` argument passed in `list_market_catalogue`

---

## 2021-05-26 10:40:29 - issues channel

**Jorge**

International games do not have a country_code, so adding None to the list of country_codes we pass in streaming_market_filter allows us to get data from these markets

---

## 2021-05-26 09:52:01 - issues channel

**Jorge**

Hi guys, how do you filter by country_codes = [None]? I know bflw takes care of this, but curious what Request do you send to filter those.

---

## 2021-05-25 21:26:33 - strategies channel

**AndyL**

Ill iterate not a problem

---

## 2021-05-25 13:21:19 - random channel

**Mo**

Apologies to anyone here with a genuine gambling problem

---

## 2021-05-25 12:46:55 - random channel

**Oliver Varney**

The answers seem to be typical management response that either answer a separate question or provide no real detail. A fair few questions about IP liquidity for horses

---

## 2021-05-25 10:47:45 - issues channel

**liam**

using python?

---

## 2021-05-25 10:34:16 - issues channel

**Tony**

I believe it is because I need to use our Vendor ID and the betfairlightweight doesn't use that

---

## 2021-05-25 10:16:37 - issues channel

**liam**

Got any code? Any reason you aren’t using bflw? At a guess you are using the wrong endpoint 

---

## 2021-05-25 08:06:38 - random channel

**Oliver Varney**

might be another stupid question but, you know they say PC money goes to get new customers onto the platform (advertising etc), but after all that cost is said and done, are PC customers more worthwhile to betfair in terms of profit then our counterparts who we take money off.

---

## 2021-05-24 16:38:36 - random channel

**Jonjonjon**

YOu are right [@ULDAVFDRP](@ULDAVFDRP). The way things stand, I'm working totally solo, and terrified of giving a helping hand to anyone I know, incase it subsequently gets me in trouble for PC avoidance.

---

## 2021-05-24 16:16:55 - random channel

**Jonjonjon**

What if you wanted to help out your cousin? Would they suddenly become a higher rate payer?

---

## 2021-05-24 10:14:10 - general channel

**Peter**

[@U0223J9067R](@U0223J9067R) I doubt you'll find too much help on Google, so don't be afraid to ask here. There's a bit of an implicit assumption here that you have a basic level of competence, but with some Python experience and a year of DS behind you, you should be comfortably over that threshold.

---

## 2021-05-24 10:09:40 - general channel

**Scott**

makes sense [@UBS7QANF3](@UBS7QANF3), ill apply for a bf API key today and make a start, apologies in advance as I'm sure there will be many more newbie questions in the future, I will obviously try google first!

---

## 2021-05-24 10:02:59 - general channel

**Mo**

It sounds like you are already capable of writing Python to some extent so personally I recommend you just start playing around with the bflw examples: [https://github.com/liampauling/betfair/tree/master/examples](https://github.com/liampauling/betfair/tree/master/examples). I think it's always best to learn by doing something related to your end goal

---

## 2021-05-24 08:36:35 - general channel

**magiclevinho**

Dear Sirs, My problem is i can't get "traded volume" data. It is always empty. I tried both price projection setting ex_traded=True, and ex_traded=False too.

---

## 2021-05-24 08:18:12 - random channel

**PeterLe**

Im right in the process now of setting up my will; LPA’s and trusts. There is nothing more certain that we are all going to die one day.

Ive documented how to access my account and given those instructions to my daughter/sons.

10 years or go my best friend died early and I helped his wife maintain her Betfair account for many years, withdrawing 5 figs each Christmas. It helped his son through University. 



In terms of passing it on to someone, I can imagine that (and taking James T /Liam as an example), the information would be useless unless it was passed to someone who had the knowledge how to use [http://it.In|it.In](http://it.In|it.In) that case you could pass it to someone on the understand(or gentlemens agreement) that a percentage of the profits that seemed from that IP was passed to their loved ones. I think that would be a fair agreement.

---

## 2021-05-22 19:53:10 - issues channel

**liam**

[https://github.com/liampauling/flumine/blob/44ceeed0fa77b9d16dc8034d0935244a65ccc0b2/examples/middleware/orders.py#L38|https://github.com/liampauling/flumine/blob/44ceeed0fa77b9d16dc8034d0935244a65ccc0b2/examples/middleware/orders.py#L38](https://github.com/liampauling/flumine/blob/44ceeed0fa77b9d16dc8034d0935244a65ccc0b2/examples/middleware/orders.py#L38|https://github.com/liampauling/flumine/blob/44ceeed0fa77b9d16dc8034d0935244a65ccc0b2/examples/middleware/orders.py#L38)

---

## 2021-05-22 19:48:24 - issues channel

**Newbie99**

Line 63, surely the same problem occurs as per my description, i.e. orders.response.current_order never gets populated and so the size_matched remains at 0?

---

## 2021-05-22 19:45:50 - issues channel

**Newbie99**

No sorry, I mean in terms of the [http://flumine.order.xxx|flumine.order.xxx](http://flumine.order.xxx|flumine.order.xxx)

---

## 2021-05-22 19:35:59 - general channel

**liam**

Agree with the above, flumine has flags for skippping pre play data when backtesting :wink:

---

## 2021-05-22 18:32:03 - issues channel

**Newbie99**

[@U4H19D1D2](@U4H19D1D2) this may well be intended behaviour, but it seemed a bit odd.



Using your middleware example (as opposed to my adjusted one we spoke about previously): [https://github.com/liampauling/flumine/blob/5b0d3f24a3e27dc6d50d8de9f154df326d37924e/examples/middleware/orders.py](https://github.com/liampauling/flumine/blob/5b0d3f24a3e27dc6d50d8de9f154df326d37924e/examples/middleware/orders.py)



Line 63: `order = trade.create_order_from_current(current_order, order_id)`



This appears to reset the size_matched and size_remaining (presumably as it was never intended to be used for EXECUTION_COMPLETE orders).



So as an example, this quick test:



```print({'timeline': 'before trade.create_order_from_current', 'bet_id': current_order.bet_id, 'status': current_order.status,

       'size': current_order.price_size.size, 'size_remaining': current_order.size_remaining, 'size_matched': current_order.size_matched})

order = trade.create_order_from_current(current_order, order_id)

print({'timeline': 'after trade.create_order_from_current', 'bet_id': order.bet_id, 'status': order.status,

       'size': order.order_type.size, 'size_remaining': order.size_remaining, 'size_matched': order.size_matched})```

Produces:



```{'timeline': 'before trade.create_order_from_current', 'bet_id': '233585245155', 'status': 'EXECUTION_COMPLETE', 'size': 3.45, 'size_remaining': 0.0, 'size_matched': 3.45}

{'timeline': 'after trade.create_order_from_current', 'bet_id': '233585245155', 'status': None, 'size': 3.45, 'size_remaining': 3.45, 'size_matched': 0.0}

{'timeline': 'before trade.create_order_from_current', 'bet_id': '233997105844', 'status': 'EXECUTABLE', 'size': 16.67, 'size_remaining': 16.67, 'size_matched': 0.0}

{'timeline': 'after trade.create_order_from_current', 'bet_id': '233997105844', 'status': None, 'size': 16.67, 'size_remaining': 16.67, 'size_matched': 0.0}

{'timeline': 'before trade.create_order_from_current', 'bet_id': '233997105880', 'status': 'EXECUTABLE', 'size': 17.64, 'size_remaining': 17.64, 'size_matched': 0.0}

{'timeline': 'after trade.create_order_from_current', 'bet_id': '233997105880', 'status': None, 'size': 17.64, 'size_remaining': 17.64, 'size_matched': 0.0}```

So whilst for the EXECUTABLE bets it works as expected, for the first one, it presumably sets size_remaining == size, rather than validating against current_order.size_remaining and current_order.size_matched.



Obviously there is an easy enough work around, but if middleware is expected to be used for this purpose then could it be worth updating the functionality here (assuming you can replicate and its not just some weird quirk happening only to me of course)?

---

## 2021-05-22 09:12:58 - general channel

**Dave**

Oh I thought you were pretty pro with flumine already [@UQL0QDEKA](@UQL0QDEKA) so not sure if you're just pulling my leg here! Nevertheless, shove it in process_market_book :)

---

## 2021-05-21 23:00:05 - strategies channel

**Paul**

There are situations where if you do the working out you might find you’re unable to get where you want to be. Solving for the bets you need might be complex enough - especially on multiple positions in the same market - is perhaps the numerical optimisation problem that [@U0135SLHQBW](@U0135SLHQBW) was pointing towards maybe. A dunce like me would reach for a green up algorithm or unwind, and go again, but that might not be the most efficient route by far.

---

## 2021-05-21 20:12:19 - issues channel

**Unknown**

I suspect the problem occurs in the bit starting at line 157

---

## 2021-05-21 20:06:01 - general channel

**liam**

It would be good to add to the examples and I am happy to code them up, what do you want to see / what would help explain?

---

## 2021-05-21 19:40:42 - general channel

**Lee**

did you see this example too? [https://github.com/liampauling/flumine/blob/master/examples/strategies/lowestlayer.py](https://github.com/liampauling/flumine/blob/master/examples/strategies/lowestlayer.py)

---

## 2021-05-21 18:08:28 - general channel

**AndyL**

So as it stands i would need multiple python instances?

---

## 2021-05-21 18:02:57 - general channel

**AndyL**

Yes, or running in separate python processes

---

## 2021-05-21 17:27:58 - issues channel

**liam**

It was from a different running instance of flumine 

---

## 2021-05-21 16:24:11 - issues channel

**Newbie99**

However I can only replicate if manually cancelling an order in the Betfair GUI. If I place an order, then cancel all within Flumine it appears to handle as expected.

---

## 2021-05-21 11:35:25 - issues channel

**Newbie99**

One question though, if there are no executable orders on startup, i.e. only execution_complete coming through the middleware. Why would the issue persist still for new orders created during the session?

---

## 2021-05-21 11:27:05 - issues channel

**Newbie99**

potentially nothing tbh, I just thought for these types of markets that can go on forever it could be problematic down the road

---

## 2021-05-21 11:25:45 - issues channel

**liam**

whats wrong with thousands of orders? flumine is heavily optimised for this

---

## 2021-05-21 11:18:01 - issues channel

**Newbie99**

Okay cool, will see if I can come up with a workaround for now and will post once done (in case it helps anyone else)

---

## 2021-05-21 10:49:53 - strategies channel

**Kai**

The latter. I think the way I dealt with it when I had a related problem was to just look at the payoffs and maximize expected growth directly

---

## 2021-05-21 10:17:15 - issues channel

**liam**

what version of flumine for those logs?

---

## 2021-05-21 10:16:47 - issues channel

**Newbie99**

from a logic / code perspective, so I don't overload you, what bit would help?

---

## 2021-05-21 10:12:32 - issues channel

**Newbie99**

all I did was manually click cancel in the GUI, my bot sees exposure is &gt; or &lt; x and places an order accordingly. I'll attach the updated logs and can give you some of the logic if you like, but not sure the latter will help much?

---

## 2021-05-20 11:47:33 - issues channel

**agberk**

Am I right in thinking this potentially blocks indefinitely?



[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L198](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L198)



From [https://docs.python.org/3/library/socket.html#timeouts-and-the-connect-method](https://docs.python.org/3/library/socket.html#timeouts-and-the-connect-method)



&gt; The `connect()` operation is also subject to the timeout setting, and in general it is recommended to call `settimeout()` before calling `connect()`

---

## 2021-05-20 09:50:10 - random channel

**Dave**

Agreed the manual stuff is super dull. I am happy with my low volatility, high sharpe autonomous money printer, even if it's a tiny printer :joy: (for avoidance of doubt, I do mean my bflw powered strategies, not an actual printer)

---

## 2021-05-20 09:46:20 - random channel

**Greg**

yeah-the manual stuff bores me to tears and finding value there does appear to be a mugs game..unless you are part of an exclusive club ( it seems). 'Should have started on python years ago..better late and all that:grin:

---

## 2021-05-20 09:22:04 - general channel

**liam**

You can then use [@UUCD6P13J](@UUCD6P13J) [https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py|middleware](https://github.com/liampauling/flumine/blob/master/examples/middleware/marketcatalogue.py|middleware) to load it back in for backtesting

---

## 2021-05-20 09:20:02 - general channel

**John**

No problem at all! I appreciate you were trying to help really.

---

## 2021-05-20 09:16:04 - general channel

**liam**

store the catalogue, the s3 recorder does this by default [https://github.com/liampauling/flumine/blob/a58380b2775f4741bb5dd6d737ee717fe8abfaf2/examples/strategies/marketrecorder.py#L214](https://github.com/liampauling/flumine/blob/a58380b2775f4741bb5dd6d737ee717fe8abfaf2/examples/strategies/marketrecorder.py#L214)

---

## 2021-05-20 09:15:24 - general channel

**John**

Thanks [@U4H19D1D2](@U4H19D1D2) for pointing this out. I would like to differentiate between pace and thorough bred races. I wonder what's the best way/place to do this in flumine please could you/anyone give me a pointer? Thanks!

---

## 2021-05-19 23:24:28 - general channel

**Lee**

Add EX_MARKET_DEF to the streaming filter

---

## 2021-05-19 23:06:26 - general channel

**Sam Asin**

definitely not a stupid question

---

## 2021-05-19 23:05:08 - general channel

**Dave**

This might be a stupid question by why not compute PNL yourself from ClearedOrder objects? Yes there are quirks in PNL computation such as the one you've seen with To Score markets, but should be fairly straightforward otherwise?

---

## 2021-05-19 20:19:49 - strategies channel

**MacrcoPolo**

I think limit was solved pre-2010, but not 100%

---

## 2021-05-19 20:18:26 - strategies channel

**MacrcoPolo**

Was this around the time that limit texas hold em was solved?

---

## 2021-05-19 18:46:27 - strategies channel

**Paul**

My intuition says just factoring in existing positions into new bet sizing is going to be where this ends up, but will take a look.

---

## 2021-05-19 18:41:51 - strategies channel

**Mo**

Can stick to backing if that helps

---

## 2021-05-19 13:14:46 - strategies channel

**Ewan**

Yeah, I'm sure you do! Its like the old Monty Hall problem, always does my head in! :joy:

---

## 2021-05-19 13:11:43 - strategies channel

**user34**

I read that thesis a while ago and I remember that most of the results are numerical for the interesting questions.

---

## 2021-05-19 11:56:49 - random channel

**D C**

Be aware though that TPD directly requires (required) you to be running off a static IP. That might have changed now and its not a problem for everyone but something to bear in mind. Must easier if you can get it from Betfair.

---

## 2021-05-19 11:41:06 - general channel

**AndyL**

Quick question, i set the marketrecorder running yesterday and it terminated itself at 00:04 last night, no reboot of the vps 

Is there some flumine timeout or anything that might have caused it to terminate?

Ive set it running again .. will see if it happens again tonight

---

## 2021-05-19 11:09:10 - general channel

**Jono**

i know its a broad question but just curious if anyone benefits from the erratic motions in the market generally surrounding a suspension

---

## 2021-05-19 09:17:59 - random channel

**Jonjonjon**

Some people might be more suited to this sort of work. I'd have no idea how to run a service or retail company

---

## 2021-05-18 17:47:02 - random channel

**Crofty**

Good point. I've been self-employed since 2003 (non gambling) and prefer the simplicity of working alone. Without a doubt, I could earn a lot more if I had a team but I know from helping someone run their company, that finding good people is the toughest part.

---

## 2021-05-18 10:23:47 - issues channel

**liam**

that should work, use the helper function though rather than the private _var

---

## 2021-05-17 23:00:57 - issues channel

**Lee**

Try upgrading flumine, the __ call__ method I think was changed to be not mandatory 

---

## 2021-05-17 21:15:27 - issues channel

**Lee**

it's because the OrdersMiddleware class has the init method [https://github.com/liampauling/flumine/pull/437/files#diff-dae24ee21ed02d5552079cb23302f678d32cfa8f30d20885222eef2e545ae81eR18](https://github.com/liampauling/flumine/pull/437/files#diff-dae24ee21ed02d5552079cb23302f678d32cfa8f30d20885222eef2e545ae81eR18)

---

## 2021-05-17 21:14:46 - issues channel

**Lee**

if you're using the example you need to instantiate OrdersMiddleware with flumine which i think in your case might be framework. i.e. `framework.add_market_middleware(OrdersMiddleware(framework))`

---

## 2021-05-17 15:59:00 - issues channel

**liam**

middleware [https://github.com/liampauling/flumine/pull/437/files#diff-dae24ee21ed02d5552079cb23302f678d32cfa8f30d20885222eef2e545ae81e|example](https://github.com/liampauling/flumine/pull/437/files#diff-dae24ee21ed02d5552079cb23302f678d32cfa8f30d20885222eef2e545ae81e|example) added on how to add execution complete orders on startup

---

## 2021-05-17 15:21:29 - issues channel

**liam**

[@UFTBRB3F1](@UFTBRB3F1) can you try [https://github.com/liampauling/flumine/pull/437|1.18.11b0](https://github.com/liampauling/flumine/pull/437|1.18.11b0) works on my side

---

## 2021-05-17 14:34:23 - random channel

**MacrcoPolo**

God I know. I also asked them the million dollar question (which everyones been discussing) which was: "How on earth are you going to scale this?"

---

## 2021-05-17 11:40:10 - random channel

**D C**

I guess it depends. Most academic types I have encountered do what they do for love of the subject alone. That said I most of those worked in a uni and I have never met anyone with Phd working in a finance/gambling related field. A "typical" uni academic type would have no problem working on an isolated project without any thought about if it would make them money or not.

---

## 2021-05-17 11:26:28 - random channel

**D C**

I suppose it opens up an interesting question. Given 15 employees with a Phd do they all work together on one thing under someone managing a project, or would they be off as solo players trying to develop their own profitable strategies to cover more surface area in the markets? If the former, must be a tough taks from a management perspective.

---

## 2021-05-17 11:03:49 - random channel

**D C**

Not to demean education it but a Phd can be very overrated and I think if people really knew what it takes to get one and some of the internal "tricks" that supervisors use to get their students over the finish line, they would be both shocked and appalled. I am sure its not the case at top instutitions but places lower down the foodchain dodgy things certainly happen. I've personally found my Phd to be way more of a hindrance to me than a help in this game but that could be down to subject area and it could be due to my own shortcomings and incompetence. Others may disagree here but I wasted literally years trying fancy stuff that never worked based on knowledge I had acquired that I thought could be applied - again though, lack of success could be down to my own shortcomings. I did a masters degree in statistics and that has been WAY more useful.

---

## 2021-05-17 07:03:41 - general channel

**liam**

Note that it’s .price in bflw and [“price”] in flumine as we patch the resource so things are faster 

---

## 2021-05-17 06:16:52 - general channel

**Oliver Varney**

[@U012PA3M7ST](@U012PA3M7ST) it may be worth firing up betangel (if you have it ) in ladder mode so you can visualise what the data from bflw / flumine provides. The available_to_back and available_to_lay should be sorted so index 0 will be the first price available to back at or lay at. get_nearest_price may look complicated in terms of implementation to you but the result should be fairly simple and should act as expected. It may be worth wring a few test case and see if your results match your expectation from your input.

---

## 2021-05-16 20:11:48 - issues channel

**liam**

Set it on the client [https://github.com/liampauling/flumine/blob/8c69f49f28c145c9f4ca4d0130067e4277975c4e/flumine/clients/baseclient.py#L24|https://github.com/liampauling/flumine/blob/8c69f49f28c145c9f4ca4d0130067e4277975c4e/flumine/clients/baseclient.py#L24](https://github.com/liampauling/flumine/blob/8c69f49f28c145c9f4ca4d0130067e4277975c4e/flumine/clients/baseclient.py#L24|https://github.com/liampauling/flumine/blob/8c69f49f28c145c9f4ca4d0130067e4277975c4e/flumine/clients/baseclient.py#L24)

---

## 2021-05-16 20:09:33 - issues channel

**Graham**

someone asked a similar question and you posted [https://betfairlightweight.slack.com/archives/C4H05ML2E/p1618580169102400](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1618580169102400)

---

## 2021-05-16 19:48:27 - issues channel

**liam**

There is a flag in the flumine client to use that however I assume you want to start using certs?

---

## 2021-05-16 19:43:07 - issues channel

**liam**

Can you get bflw to work by itself? What python version / os are you using?

---

## 2021-05-16 15:19:40 - issues channel

**Oliver Varney**

I only ask as the stream doesnt return fully matched orders on restart, im not sure if liam added logic to flumine to grab fully matched orders. Although it doesnt sound like this case if you say it wasnt matched

---

## 2021-05-16 15:16:49 - issues channel

**Newbie99**

No, as in I placed an order via Flumine (unmatched), compeltely shut down, then started up again.

---

## 2021-05-15 18:22:25 - random channel

**liam**

Yep seamless use bflw 

---

## 2021-05-14 17:01:09 - strategies channel

**Michael**

Calculating it is simple the question is how best to use it.

---

## 2021-05-14 16:44:30 - random channel

**Jonjonjon**

Does he use BFLW?

---

## 2021-05-14 15:27:05 - general channel

**liam**

Yeah almost certainly, run a threading.enumerate to find out how many. My question is why so many updates 

---

## 2021-05-14 15:08:01 - general channel

**Misha**

I store in my database all historical tennis points - around 50 million

---

## 2021-05-14 15:06:58 - general channel

**Misha**

The power of a database is the ability to do complex queries on millions of records almost instantaneously, and a well-optimised good database will easily cope with 100s of millions of records and more

---

## 2021-05-14 15:05:31 - general channel

**Jono**

well it does have its inefficiencies for sure. I feel having an independant script take regular snapshots of the listed orders will help improve things - among other things itll also just be useful to know if i can append unique strings to say 5 orders and then retrieve those orders and associated strings. Looping back to can you pull through a beftair accounts current orders along side the references they were orignally placed with?

---

## 2021-05-14 14:56:04 - general channel

**Dave**

Orders can be modified unexpectedly days after settlement tbf so a database isn't too bad a choice given this mutability. But I'd agree that for data at this scale, flat files are way better generally.

---

## 2021-05-14 14:48:02 - general channel

**MacrcoPolo**

I might change my username to IHateDatabases...

---

## 2021-05-14 14:11:11 - general channel

**Newbie99**

[@U0154JA98TH](@U0154JA98TH) are you streaming or using the REST API (if the former you can get them from the order stream and if the latter you need to make an API call using list_current_orders (or cleared if settled)?

---

## 2021-05-13 22:47:59 - strategies channel

**D C**

It's pretty much break even and I am working on tweaking it. It's funny because I've heard a lot of people say that TPD is unlikely to help anyone who was not already profitable IP but for me its the opposite - getting something profitable on TPD has given me greater insight into the general IP markets. I feel I am close to getting it "right" but I have been here before. Totally agree about the diversity though and hopefully I will get something soon. Truth be told I have had quite a few health issues and an operation a couple of months ago and motivation for analysis and coding has been very low. Really been cranking the handle each day. My work ethic should improve over the coming weeks though.

---

## 2021-05-13 21:52:13 - strategies channel

**birchy**

General question for the inplay horse racing players...was March a tough month and April the polar opposite?

---

## 2021-05-13 19:12:06 - random channel

**Mo**

It's helpful for me if you vote even if you're happy with how it's looking (23rd or 24th) so I can get a better idea of numbers

---

## 2021-05-13 19:07:08 - random channel

**Mo**

Last call to get your vote in for the date of the meetup before I start looking for a venue. This is obviously dependent on everything opening up on 21st June as planned which last I heard has been called into question

---

## 2021-05-13 16:06:37 - issues channel

**Peter**

Ah. OK. I thought that the backtesting was confirming the liquidity. I guess I got overconfident because backtesting has been absolutely awesome at perfectly replicating every real world problem I've run into up until now.

---

## 2021-05-13 15:53:56 - general channel

**Peter**

Like [@U016535QCJ2](@U016535QCJ2) said. There is a marketrecorder example in the Flumine repo that sows how to collect streamed data but you still need to make selections as to sports, countries and markets and Betfair will limit the number of markets you can have in a stream so that would be another reason why you couldn't have them all.

---

## 2021-05-13 15:46:08 - general channel

**santibat**

HI, is there a Github repo that has already worked out how to download all the data from the api? (all sports, all dates)

---

## 2021-05-13 08:45:32 - strategies channel

**Greg**

Thanks Liam. Not aware of anything I've changed and all the other imports seem to work as default .Sorry for another dumb questions-change the imports how?

---

## 2021-05-13 06:57:36 - general channel

**Oliver Varney**

Do you just mean the second index in the list of available to back /lay? might also be worth looking in the flumine utils and using get_nearest_price

---

## 2021-05-13 01:08:50 - general channel

**Greg**

managed to place a bet using Flumine-bit of a win:grin: My limited brain can't see how to place a bet at best price -1 tick for example though.Looking through examples but if someone can point me at a simple command that would be great.Thanks.Enjoying the process

---

## 2021-05-12 20:29:09 - strategies channel

**AndyL**

Bflw &amp; flumine sound a great project

---

## 2021-05-12 08:32:48 - strategies channel

**Unknown**

Graph showing why stake/bankroll is so important..



This was only a 25% increase in size resulting in only a 0.01% point reduction in matching but almost destroying all profit :face_palm:

---

## 2021-05-11 20:38:38 - strategies channel

**AndyL**

I had to think a bit on that one, so yes, but that's partly as I enjoy the communities, bet angel and this slack. Ive had tons of help and advice from great people. I also enjoy the software, as im an engineer. What adds doubt is the continual lack of any success,  that weighs a bit..

---

## 2021-05-11 10:38:56 - random channel

**liam**

just patch it, in flumine we [https://github.com/liampauling/flumine/blob/master/flumine/patching.py|patch](https://github.com/liampauling/flumine/blob/master/flumine/patching.py|patch) the price size by not converting to py objects so you could just do the same to numpy arrays

---

## 2021-05-11 10:26:35 - strategies channel

**Peter C**

further back than I thought [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1615899464083500](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1615899464083500)

---

## 2021-05-11 10:17:24 - random channel

**Jonjonjon**

How hard would it be to refactor BFLW, so that it returns the price/sizes as lists ornumpy arrays? I see that the data comes from the market cache. When profiling my backtests, they spend a lot of time converting "price/size lists of dicts" into numpy arrays. I feed these into my numba-compiled pricing functions, which is why they need the conversion. So I guess I'm wondering whether or not it's common for people to feed the market data into numerical pricing functions, and whether or not enough people would like the data in array-format, for this to be worth doing.

---

## 2021-05-11 09:58:35 - strategies channel

**Peter C**

Thanks for your thoughts - helped me straighten out my thinking a bit

---

## 2021-05-11 09:50:21 - strategies channel

**Peter C**

So perhaps I should view it as using information from the market that I view as effecicent to help me price information that I consider less efficient?

---

## 2021-05-11 08:12:52 - general channel

**Alessio**

Since we were chatting about it the other day, re: databases, [https://www.narrator.ai/blog/using-postgresql-as-a-data-warehouse/](https://www.narrator.ai/blog/using-postgresql-as-a-data-warehouse/) contains a bunch of tricks for O(100M) tables

---

## 2021-05-09 00:30:39 - general channel

**Sam Asin**

so back with random commission crap, does this make sense to anyone? I actually decided to contact the help desk about it this time:

---

## 2021-05-08 23:30:44 - strategies channel

**Mo**

If you're questioning things after 2 days and can't take that size of loss I think you need to ask whether this is for you

---

## 2021-05-08 19:18:34 - general channel

**D C**

It doesn't answer your question but I am sure I read somewhere they were pulling this down to 12 hours

---

## 2021-05-08 17:01:03 - general channel

**Sam Asin**

My background isn't really HFT, I just helped my friend with some stats etc. for his job a bit, and was looking at it as he was doing it, but yeah he could see it. I don't know if that's true for all exchanges, just the one time I was looking at one!

---

## 2021-05-08 15:15:43 - strategies channel

**Michael**

In truth I've no idea how picture players come up with their prices, I just know how to spot when they're getting it wrong.

---

## 2021-05-08 14:57:28 - strategies channel

**Oliver Varney**

I may be being stupid and asking a real noob question here as I dont know the ins and out of IP, but is it a forward project of what you think will occur and be value after the IP delay, i.e. someone laying at 1.03 thought that the chance of the horse falling was greater then 3%

---

## 2021-05-08 11:42:44 - general channel

**liam**

You get the cleared order object [https://github.com/liampauling/flumine/blob/4924616d3764ab5ea861a21a72054dc93d812d61/flumine/order/order.py#L78|https://github.com/liampauling/flumine/blob/4924616d3764ab5ea861a21a72054dc93d812d61/flumine/order/order.py#L78](https://github.com/liampauling/flumine/blob/4924616d3764ab5ea861a21a72054dc93d812d61/flumine/order/order.py#L78|https://github.com/liampauling/flumine/blob/4924616d3764ab5ea861a21a72054dc93d812d61/flumine/order/order.py#L78)

---

## 2021-05-08 08:32:49 - general channel

**Peter**

@Alex. the broad approach makes sense, but as [@UFTBRB3F1](@UFTBRB3F1) says, Flumine already does all the heavy lifting for you. Wrapping your head around it and refactoring your approach into the framework isn't trivial and takes some time, but once there, you'll wonder why you ever tried to do it all yourself, Knowing when a game has ended isn't trivial from the market_book unless you just need to know that it's over, with no time constraint, in which case a market.status of CLOSED would do it. If you need something more timely there is an undocumented scores API that BFLW can access for you.

---

## 2021-05-08 00:17:15 - strategies channel

**Michael**

I wouldn't say you were wrong necessarily [@U016TGY3676](@U016TGY3676), we all find our own ways of doing things. Still - I'm glad if that's helped you find another perspective.

---

## 2021-05-07 23:17:19 - general channel

**Newbie99**

[https://github.com/liampauling/flumine](https://github.com/liampauling/flumine)

---

## 2021-05-07 22:49:04 - general channel

**Lee**

[https://github.com/liampauling/flumine/blob/master/flumine/order/trade.py#L31|https://github.com/liampauling/flumine/blob/master/flumine/order/trade.py#L31](https://github.com/liampauling/flumine/blob/master/flumine/order/trade.py#L31|https://github.com/liampauling/flumine/blob/master/flumine/order/trade.py#L31)

---

## 2021-05-07 14:25:51 - random channel

**Oliver Varney**

[@U01B8031PM1](@U01B8031PM1) trying to set some bait out for a bflw poker night where he can take all our money :joy:

---

## 2021-05-07 13:02:05 - general channel

**Rich**

That happens when the database engine tries to order the entire table, then you only actually want a few rows from it.

---

## 2021-05-07 12:37:48 - general channel

**Dave**

Enabling row compression also can help provided your bottleneck is not in CPU but rather holding the index in RAM.

---

## 2021-05-07 12:36:44 - general channel

**Dave**

Generally the problem is most easily solved by chucking more money at it.

---

## 2021-05-07 12:32:59 - general channel

**Rich**

Is most of it historical? could you archive into another table, and only keep x days/months in the current tables? (or [https://www.digitalocean.com/community/tutorials/understanding-database-sharding](https://www.digitalocean.com/community/tutorials/understanding-database-sharding))

---

## 2021-05-07 12:09:10 - general channel

**liam**

Anyone got experience in optimising their database (MySQL) when approaching 100m+ of rows? Indexes aren't cutting it anymore so looking at partitions however my issue is that I always have to join 3 tables to get the data I want market (1m+), trade (100m+) and order (100m+), or I might create another table/materialised view / UNF data warehouse style that sits on top

---

## 2021-05-07 09:38:39 - issues channel

**Jonjonjon**

There can't be that many people using the replace orders function if I'm the first one to hit this problem. Doesn't anyone else like to move their exit orders around, setting the price to track "fair value"?

---

## 2021-05-06 14:45:43 - random channel

**Oliver Varney**

Yer wont be happening anytime soon I can guarantee that, although the +12k profit lost alone from 1.01 positions in april would of helped

---

## 2021-05-06 14:37:57 - random channel

**liam**

there seems to be an endless supply of 'joe bloggs' on there and as you have probably seen the question of how do i create automation to back at 1.01 gets asked daily on BA

---

## 2021-05-06 13:59:34 - strategies channel

**AndyL**

So let me check, so beating bsp is say bsp is 4.0, if i get a back bet on at 5.0 i beat it...

The problem with my test was most of my  bets over a period of a week lost, so even if they beat bsp, over the week I may have been unlucky side of the probability curve...

---

## 2021-05-06 12:42:34 - strategies channel

**AndyL**

Thank you for your down to earth advice [@UGV299K6H](@UGV299K6H), I do have a day job so this is part time when I have spare time, but being an engineer myself I have intrigue in trying to conquer this problem, although I do get frustrated easily! but I like your moto on life... cheers

---

## 2021-05-06 12:02:40 - strategies channel

**Michael**

I don't know if that always helps them. My technical skills have always been very weak and still are. I have almost no understanding of statistics as it's generally set out although I sometimes find that I've been using the same concepts, I just didn't know the names or the notation. I struggle with some really basic maths things like re-arranging equations and I find it very hard to understand academic papers so I don't usually bother with them. The good side of all that is that I had to learn about gambling from the ground up in ways that I could understand, so I discovered the significance of the over-round and 'invented' notions like expected value on the back of envelopes rather than being taught them. I think that helped me. I remember right at the start wondering why you couldn't make money just by laying horses because _"surely they lose more than they win."_ Then I went and figured out why that wasn't true (which took me hours). I gradually figured out the relationships between various market forces and how sometimes markets could be out of balance and so it went on.

---

## 2021-05-06 06:48:35 - strategies channel

**Oliver Varney**

I like to think I have no clue what value is :joy:, im the stupid human who managed to frame a learning task that predicts what the market will do with a few python libraries and some dodgy code, the brains is the algo.

---

## 2021-05-06 00:08:28 - general channel

**Sam Asin**

I am pretty sure there are detailed discussions in here somewhere about commissions and I'll do a search and find them before actually asking a question, but yeah, for the less sophisticated/newer people like me, be careful abotu this stuff, it is sometimes absurdly high. Probably quickly becomes worth the work to figure out how you should minimize your commissions, even if you don't make that much money.

---

## 2021-05-05 15:14:31 - general channel

**Oliver Varney**

The update frequency can be controlled, but if for example your requirement is to raise a trade off the back of an market book update, send it to an api somewhere update the database and get a response, you can just choose to skip updates till you have that response. In this situation you wont block the main thread and backlog market books

---

## 2021-05-05 15:07:31 - general channel

**Oliver Varney**

if an iteration is a market book update then you will never be able to keep up whatever approach, if its once you made a trade and your waiting for that to update your database should be okay assuming you not looking to run high frequency strategies

---

## 2021-05-05 15:03:32 - general channel

**Jono**

would flumine allow for the afformentioned post to a database after each "iteration" or would this cause problems?

---

## 2021-05-05 15:00:30 - general channel

**Oliver Varney**

Id 100% advise looking at flumine, [@U4H19D1D2](@U4H19D1D2) has provided a gem

---

## 2021-05-05 15:00:09 - general channel

**Jono**

just bflw not flumine

---

## 2021-05-05 14:59:54 - general channel

**Oliver Varney**

or betfairlightweight?

---

## 2021-05-05 14:59:41 - general channel

**Oliver Varney**

are you using flumine ?

---

## 2021-05-05 10:53:11 - general channel

**Mo**

[@U0154JA98TH](@U0154JA98TH) I think you could probably still benefit from a rearchitecture. I doubt you want the component that's placing bets to be accessing the database directly. For example, you could use a separate component accessing the Betfair order stream to update the orders n the database

---

## 2021-05-05 10:35:16 - general channel

**Jono**

the database is never going to be available to me locally so wouldnt i still have to make a post request surely? in which case im still held up waiting for the post response before being able to carry on - goin the traditional python request route anyway

---

## 2021-05-05 10:31:19 - general channel

**Jono**

There is an app that uses the database to display current orders and changes to them across multiple betfair accounts and this is away of keeping track of them all. It also has a few other book keeping purposes like linking bets to corresponding events,strategies, and platforms

---

## 2021-05-05 10:27:02 - general channel

**Oliver Varney**

why do you need to make a request to a database if you dont mind me asking?

---

## 2021-05-04 10:26:25 - random channel

**Peter**

Don't think that's an answerable question :wink: It depends on the learner's preferred learning style, the quality of the materials available in different media, and the learner's objectives e.g. being bang up to date v grasping the fundamentals.

---

## 2021-05-04 08:28:20 - random channel

**Jonjonjon**

This is unrelated to Sports, but what do people think is the fastest way to learn Solidity for an experience Python developer? A book? A video course?

---

## 2021-05-03 02:49:52 - general channel

**Steve**

Just picking up flumine. It's bloody awesome, thanks Liam and co. Quick questions. Firstly does anyone have some code for adding in the heartbeat API under the strategies start function?

---

## 2021-05-01 12:53:42 - issues channel

**mandelbot**

[@UBS7QANF3](@UBS7QANF3) I'm not finding the documentation for this, would you direct me to it?

---

## 2021-05-01 12:47:54 - general channel

**liam**

Flumine does it out the box or use bflw low level gen as [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py|per](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py|per) 

---

## 2021-05-01 12:45:31 - general channel

**Jorge**

My issue is how to convert a recorded file into MarketBook objects

---

## 2021-05-01 12:39:48 - general channel

**liam**

Like the example? [https://github.com/liampauling/flumine/blob/master/examples/strategies/pricerecorder.py|https://github.com/liampauling/flumine/blob/master/examples/strategies/pricerecorder.py](https://github.com/liampauling/flumine/blob/master/examples/strategies/pricerecorder.py|https://github.com/liampauling/flumine/blob/master/examples/strategies/pricerecorder.py)

---

## 2021-05-01 12:39:39 - general channel

**Jorge**

Is there any function in flumine/bflw that I can use to convert a streaming recorded file to a time series of "best available to back" and "best available to lay"?

---

## 2021-04-30 16:13:05 - strategies channel

**AndyL**

Noone really tells you how to make it work... so as someone above said "ingenuity" is a real need I think, you can burn 1000s of hours, but without some clever something or other I think it's a struggle

---

## 2021-04-30 14:58:37 - general channel

**mandelbot**

Indeed I think I can play around with the middleware to adjust my list as well. What do you mean by use flumine's list?

---

## 2021-04-30 14:57:23 - general channel

**Oliver Varney**

what are you trying to do ? is this for backtesting or something? if its not part of the standard workflow of flumine, such as you have captured a price from one hour ago and you want to calculate a price delta, you will need to store a list/ use flumines list which get updated when a removal comes through then if in this example you are comparing prices across time you will need to adjust any old captured prices to reflect any removals that have occurred inbetween the time periods.

---

## 2021-04-30 14:53:13 - strategies channel

**Michael**

Funny but I've never had a motivation problem, sometimes more the opposite - I can get a bit obsessed and have to take myself away from it. I can certainly see the value of having people to bounce off though.

---

## 2021-04-30 14:50:14 - general channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/dfbad123dcdce6ee7573d23b53a5772dee9d7f38/flumine/markets/middleware.py#L75](https://github.com/liampauling/flumine/blob/dfbad123dcdce6ee7573d23b53a5772dee9d7f38/flumine/markets/middleware.py#L75)

---

## 2021-04-30 14:41:53 - strategies channel

**Mo**

I think they’re two very distinct stressors. As far as having high overheads, the strategies comfortably cover them every month so the only worry would be an existential threat that means you’re left having to pay the costs with no income. However, costs can be gotten out of (the power of the limited liability company). As for the pressure of not letting down colleagues, I think this is pretty much exclusively a positive thing as it can be hard to be motivated working for yourself in a vacuum. And then there are the many positive aspects to sharing the work load and the stresses and enjoying a collaborative problem solving environment that [@USYQKE5HN](@USYQKE5HN) has touched on

---

## 2021-04-30 12:21:01 - issues channel

**thambie1**

For once I'm having a problem with streaming rather than rest api. Can't open streaming connection

---

## 2021-04-30 10:39:55 - strategies channel

**James T**

I think the one underrated trait I can think of is “ingenuity”. That’s sort of being able to think of creative ways of solving problems. It’s one word to combine problem solving, creativity, initiative, and resourcefulness. People who don’t like to have “standard” day jobs like me and Michael I think tend to have this trait. Without some ingenuity I think a person would struggle. 

---

## 2021-04-30 10:33:50 - strategies channel

**Michael**

I used Excel to start with - literally a spreadsheet linked to Gruss. Then VBA, then I moved to Python and started using BFLW when streaming came in.

---

## 2021-04-30 09:26:08 - random channel

**Newbie99**

Yeah, the problem is, in windows there's no way to unblock a particular port (in linux you can whitelist)!

---

## 2021-04-30 06:18:14 - random channel

**KG**

we're really interested in seeing the impact on different customer groups [@ULDAVFDRP](@ULDAVFDRP) and hopefully we can use the learnings to help develop the idea further

---

## 2021-04-29 14:45:07 - random channel

**Oliver Varney**

problem is you get picked off if your offering

---

## 2021-04-29 11:09:05 - general channel

**Newbie99**

hmmm, this is going to get complicated isn't it, as then I need to capture them somehow as obviously the don't get added to the blotter.



As a plan b, I did think of starting up a separate BFLW order stream in a background worker and then just capture any orders not in flumine.markets, but (even assuming that approach works) then I'm using up a valuable stream (although logically when I reach the point where I need all the streams, hopefully all the non-flumine stuff will be fully on flumine so I guess that probably doesn't matter too much)!

---

## 2021-04-28 18:14:39 - general channel

**Lee**

[https://github.com/liampauling/flumine/blob/66089f81a8d5cd7f74ffe2d864745e823cb6bf51/flumine/order/process.py#L99](https://github.com/liampauling/flumine/blob/66089f81a8d5cd7f74ffe2d864745e823cb6bf51/flumine/order/process.py#L99)

---

## 2021-04-28 18:14:23 - general channel

**Newbie99**

I presume all orders are snapped somewhere and the ones that aren't placed in Flumine just discarded tbh, I just haven't found exactly where! I thought I might be heading in the right diretcion, but perhaps not!

---

## 2021-04-28 18:05:12 - general channel

**Lee**

but accessing the orders not placed by flumine might be a problem

---

## 2021-04-28 18:04:35 - general channel

**Lee**

the orders are stored in the blotter on a per market basis (correct me if i'm wrong) so you could try something like this

```for market in flumine.markets.markets:

    for order in market.blotter:

        print(order.bet_id)```

---

## 2021-04-28 13:36:05 - issues channel

**moseley82**

Ah, that appears to be the problem! Curious as to why it used to work and now it doesn't, and not really sure why I set it like that in the first place... regardless, thanks for casting your eyes over it and picking it up

---

## 2021-04-27 10:41:31 - strategies channel

**Lee**

still not really sure how to take advantage of it but have and AB test running an idea

---

## 2021-04-27 10:34:19 - strategies channel

**liam**

[https://github.com/liampauling/flumine/blob/master/HISTORY.rst#1170-2021-02-22|1.17.0](https://github.com/liampauling/flumine/blob/master/HISTORY.rst#1170-2021-02-22|1.17.0) things changed, previously orders where batched per update, from 1.17 they are executed immediately unless you control via the transaction context manager

---

## 2021-04-27 10:25:03 - strategies channel

**liam**

this is a good [https://github.com/liampauling/flumine/blob/dfbad123dcdce6ee7573d23b53a5772dee9d7f38/flumine/execution/transaction.py#L12|read](https://github.com/liampauling/flumine/blob/dfbad123dcdce6ee7573d23b53a5772dee9d7f38/flumine/execution/transaction.py#L12|read)

---

## 2021-04-27 10:22:34 - strategies channel

**Lee**

Just trying to understand how the default behaviour works in code.

Do the following two pieces of code not do the same thing as [https://github.com/liampauling/flumine/blob/master/flumine/markets/market.py#L79|this line](https://github.com/liampauling/flumine/blob/master/flumine/markets/market.py#L79|this line) is is made within the transaction context so execute will be called after every `place_order` call?

```market.place_order(order)```

and

```with market.transaction():

    market.place_order(order)```



---

## 2021-04-27 08:09:58 - strategies channel

**liam**

~Note that if they are on the same instance the default behaviour is for the orders to be batched/placed in the same request,~ you can control this through the use of [https://liampauling.github.io/flumine/quickstart/#order-placement|transactions](https://liampauling.github.io/flumine/quickstart/#order-placement|transactions)

---

## 2021-04-27 00:27:47 - general channel

**John A**

Quick question; does the betfair racing data purchase contain placed markets?

---

## 2021-04-26 20:12:08 - random channel

**Newbie99**

Essentially it is something like that...the problem is unlike linux the only way I can see to config anything is via the client GUI

---

## 2021-04-26 15:13:22 - general channel

**Phil Anderson**

It's Ok I figured it out - wouldnt work with bet_target_size. Just had to change it to size. Thanks for your help :+1:

---

## 2021-04-24 16:35:59 - strategies channel

**Jonjonjon**

Very pretty charts! Though I don't have an answer to your question....

---

## 2021-04-23 00:45:24 - general channel

**KG**

yeah seconding [@U4H19D1D2](@U4H19D1D2)’s point, also it's a lower barrier of entry to use bflw instead of Flumine, particularly for less dev-centric users, which is the primary target here.



and [@U0155J92A7Q](@U0155J92A7Q) is right, should be able to replace with Advanced data set or recorded Streaming files with the same result :ok_hand:

---

## 2021-04-22 13:29:04 - general channel

**liam**

a disclaimer is certainly needed, but [@UGV299K6H](@UGV299K6H) summed it up recently by saying how if you can make money without TPD then including it someway will certainly help

---

## 2021-04-22 11:34:44 - general channel

**Jorge**

This tutorial is very complete! What is the advantage of backtesting this way vs flumine?

---

## 2021-04-22 03:42:42 - general channel

**KG**

there's also a new tutorial up that goes with the above, walking through the back testing process using bflw: [https://betfair-datascientists.github.io/historicData/backtestingRatingsTutorial/](https://betfair-datascientists.github.io/historicData/backtestingRatingsTutorial/)

---

## 2021-04-22 03:42:04 - general channel

**Unknown**

FYI the recording of this session on using bflw to backtest ratings is now available on YouTube: [https://www.youtube.com/watch?v=0UfPdeghuN8&amp;t=1s](https://www.youtube.com/watch?v=0UfPdeghuN8&amp;t=1s)

---

## 2021-04-21 10:28:38 - issues channel

**Peter C**

Yeah I get the same, I must be doing something dumb somewhere else in my code. Thanks again for your help - it's been really useful

---

## 2021-04-21 09:36:37 - issues channel

**Peter C**

Sorry, maybe the file I sent doesn't show the problem very well. When backtesting, I have this problem on active runners I have been laying pre-off - so I don't think it's isolated to non-runners. Sometimes my recorded files don't contain any SP info - these files cause problems (but so do some that have the SP info) - is it normal for some files to be missing the SP info?

---

## 2021-04-20 17:06:19 - general channel

**klozovin**

is it possible to only start streaming markets once they turn in-play? looking at MarketFilter options it doesn't seem to be the case...

---

## 2021-04-19 18:20:28 - general channel

**nthypes**

one question: price action in other runners does have a direct impact in each runner ? This influence is high, medium or irrelevant?

---

## 2021-04-19 17:11:21 - general channel

**Peter**

That's a bit of an "it depends" type question. It depends on your wider infrastructure and how you want to manage your environment variables (as that's where you'll probably want to put these credentials). Some people put them in their .bashrc or .zshrc files so that they are loaded when a user account logs in.

---

## 2021-04-19 16:51:38 - general channel

**Razvan Gheorghe**

I think I got more close to start the script under my local. Nice journey in python :)).

Can you please help me find the file where I have to place credentials for the betfair api?

---

## 2021-04-19 10:24:33 - issues channel

**Oliver Varney**

so did the new flumine version rate limit the logs as expected liam?

---

## 2021-04-18 07:24:48 - general channel

**Peter**

That suggests you haven't instantiated the framework before trying to run it. Are you basing your script on one of the example scripts that comes with Flumine?

---

## 2021-04-18 06:58:44 - general channel

**Razvan Gheorghe**

What aproach would you take for this? Open API connection from a cloud instance of flumine and get thse data in the web aplication to can create reports, keeping logs, etc?

---

## 2021-04-18 06:57:02 - general channel

**Razvan Gheorghe**

Yes, I will have to probably display data in a website, is more reliable for me than only use on desktop aplication. And probably to use flumine as a backend  for interacting with betfair api.

---

## 2021-04-18 06:43:06 - general channel

**Razvan Gheorghe**

And I didn't catch yet how to start the platform on my localhost, ubuntu20.10.

---

## 2021-04-18 06:42:18 - general channel

**Razvan Gheorghe**

I'm a bit sucked right now, because I have no previous experience with python, just some django.

---

## 2021-04-18 06:41:26 - general channel

**Razvan Gheorghe**

I also think when you are dealing with a big amounts of data and you have so much requests python will be a better alternative for this use case.

---

## 2021-04-18 06:38:26 - general channel

**Peter**

Welcome [@U01UNG783B5](@U01UNG783B5) I'm also a Laravel developer (since version 3) and the developer and maintainer of this [https://github.com/petercoles/Betfair-Exchange/|PHP Betfair Exchange API package](https://github.com/petercoles/Betfair-Exchange/|PHP Betfair Exchange API package). If I could offer some advice from that perspective. If you don't already know it, learn Python. You can trade with PHP scripts, but Python is better-suited, hugely better tooled for this activity (especially Betfairlightweight and Flumine), and a fairly straightforward jump from PHP.

---

## 2021-04-17 20:58:07 - random channel

**river_shah**

I want to become better informed about the ethical issues around jump racing and use of whips in horse racing. If I go to animal abuse prevention sites, it is extremely one sided and and there is a similar myopia when I go to the racing industry websites. Sports conservatives don’t particularly feel there is a problem or want change. Seems like both sides are talking their own books. Are there any forums or websites you can recommend that will help me understand the issues in a balanced way around these aspects of horse racing? Any BHA white papers / fact findings or other resources will be welcome.

---

## 2021-04-16 16:52:39 - issues channel

**liam**

Yeah it’s a var on the flumine client 

---

## 2021-04-16 14:36:09 - issues channel

**liam**

ie [https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/examples/example.py#L68|here](https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/examples/example.py#L68|here)

---

## 2021-04-16 14:34:38 - issues channel

**Jono**

is there a way to pass this location to the bflw login() method that flumine executes?

---

## 2021-04-16 10:27:40 - issues channel

**liam**

Sorry 3 lines as you have to change the client and FlumineBacktest framework, it then takes the raw streaming files (betfair or self recorded)

---

## 2021-04-16 10:27:01 - issues channel

**Jorge**

Are those market_catalogue files or streaming files?

---

## 2021-04-16 10:14:37 - issues channel

**liam**

You mean the one line [https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/examples/backtest.py#L25|change](https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/examples/backtest.py#L25|change)? :sunglasses:

---

## 2021-04-16 10:13:41 - issues channel

**Jorge**

Aha, okay I still have to figure out how to use the recorded data for backtest purposes

---

## 2021-04-16 09:47:25 - issues channel

**liam**

np, I have now updated the [https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/examples/strategies/marketrecorder.py#L190|example](https://github.com/liampauling/flumine/blob/1213faebdb8176268ee663a80d48854edacb6872/examples/strategies/marketrecorder.py#L190|example) to handle

---

## 2021-04-15 16:13:25 - strategies channel

**Jono**

will get cracking on that then. thanks for the help everyone, as always its been invaluable :grin:

---

## 2021-04-15 16:10:40 - strategies channel

**Jono**

sounds good are there any other docs beyond the github, or other example strats i should look into? no problem if not, the repo certainly has a lot to digest and get started on

---

## 2021-04-15 16:08:38 - strategies channel

**Mo**

I suspect you can optimise a lot of it away. But short answer is yes flumine is the way to go

---

## 2021-04-15 16:08:36 - strategies channel

**liam**

:point_up:dictionaries are quick (for python) have a look at the bflw streaming implementation 

---

## 2021-04-15 15:45:25 - strategies channel

**James T**

With streaming, the “program loop” is no longer governed by fetching data and processing that fetched data, and more constantly receiving data and reacting to what’s in that data. 

---

## 2021-04-15 15:40:03 - strategies channel

**Jono**

definietly want to restructure a lot of what has been written so far so want to make sure im putting the first foot right with the betfair side of things. Would you recommend flumine as the go to for building out a fast paced strat like what im talking about?

---

## 2021-04-15 15:39:57 - strategies channel

**James T**

I’m not familiar specifically about flumine’s inner workings so others will have to comment on its asynchronous / parallel processing...



But with regards to the streaming API, you get market price updates as soon as they happen on every market. So it’s not requesting data at defined intervals anymore. When a price changes on any market, you are notified within a few ms. You then process (eg. place a bet) based on that price update. 



There is a chance that two different markets or matches happen to update at the same time, and that is where you might need to consider asynchronous calls or parallel processing of placing / calculating bets if you don’t want one market to be processed sequentially behind another. 



But the simple fact that you are receiving information immediately as it changes will already be a massive gain on checking everything every 20 secs. 

---

## 2021-04-15 15:38:24 - strategies channel

**Jono**

their are two other apis i have to call for a successful iteration, firtst to a database then to a client who then finally executes the bf orders/alterations. Each back and forth is in the range of 3-5 seconds and since everything runs sequentially the times do begin to climb to worrying levels as number of events increase

---

## 2021-04-15 15:33:17 - strategies channel

**Jono**

Do you know if any of the operations are carried out in parallel either top level in flumine executing strategies simultaneousl or for bflw requesting market books for all events of a given eventTypeId? My own (very primitive) framework performs everything sequentially one event after another as im not terribly experienced in asynchronous programming but feel it would beneficial in this scenario. No problem if your uncertain of the inner workings

---

## 2021-04-15 15:26:00 - strategies channel

**James T**

Bear in mind I don’t use either - that’s just my understanding of it. I’m more of a C# developer, but if I had no knowledge and didn’t have my own framework already, I’d have probably started with bflw and flumine. 

---

## 2021-04-15 15:21:58 - strategies channel

**Jono**

Sounds great :slightly_smiling_face: are there different areas where one is better than the other? Why would someone choose flumine over their own bflw loops and routines and vice versa? Want to make sure the next version is built correctly

---

## 2021-04-15 15:18:28 - strategies channel

**James T**

Betfair Streaming API is exactly what you want for this. And BetfairLightweight and Flumine is an easy way for you to get into that if you have no other means already. 

---

## 2021-04-15 09:31:31 - random channel

**Mo**

Another good question that we haven’t considered. I would say that the persisted data would need to be hosted somewhere public

---

## 2021-04-15 09:28:28 - random channel

**Dave**

This is cool. Question about "must use publicly available data" - where does "realtime data scraped from public sources and persisted" fall with respect to this constraint?

---

## 2021-04-15 09:11:15 - random channel

**Mo**

Good question, hadn’t actually considered it! Probably too much of a conflict of interest...

---

## 2021-04-14 12:04:04 - random channel

**Lee**

Had a reply from Neil:

This issue was raised with our dev team yesterday. I'll let you know as soon as this has been resolved. Sorry for the inconvenience caused in the meantime.

---

## 2021-04-14 11:46:43 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/C4H05KKMY/p1616952574408400](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1616952574408400)

---

## 2021-04-14 11:19:24 - random channel

**James T**

Haha, good question. I would class them as second line support as they should know more than basic customer service and phone support. Still haven’t been the most help in the past though. 

---

## 2021-04-14 11:17:04 - random channel

**Mo**

Best just to email Neil if it's a technical problem IMO

---

## 2021-04-14 11:15:55 - general channel

**liam**

bflw has a variable called `elapsed_time` see it being logged here [https://github.com/liampauling/flumine/blob/66089f81a8d5cd7f74ffe2d864745e823cb6bf51/flumine/execution/betfairexecution.py#L275](https://github.com/liampauling/flumine/blob/66089f81a8d5cd7f74ffe2d864745e823cb6bf51/flumine/execution/betfairexecution.py#L275)

---

## 2021-04-14 11:14:57 - general channel

**Chris C**

Great, that makes sense. Next question: How do you even measure rtt?

(date_time_placed - date_time_created) ?

---

## 2021-04-14 10:32:28 - strategies channel

**liam**

depends on the book structure and language or is this a more theoretical question?

---

## 2021-04-13 13:42:44 - general channel

**Jono**

ok no problem thanks for clarifying its been a great help :slightly_smiling_face:

---

## 2021-04-13 12:44:35 - general channel

**Jono**

Hey everyone. i was wondering if along side the score and timeline objects giving insight to the current state of a football/rugby match there was a way of determining the team currently in possession of the ball? I understand some games are limited by what the api actually has available to return (ie small games not having retrievable scores) but in  general is there a parameter or class which indicates the team in possession? cheers for any help

---

## 2021-04-13 09:11:21 - general channel

**liam**

np, few examples here as well [https://github.com/liampauling/flumine/tree/master/examples/controls](https://github.com/liampauling/flumine/tree/master/examples/controls)

---

## 2021-04-13 08:50:33 - general channel

**liam**

Logging control [https://liampauling.github.io/flumine/advanced/#logging-controls](https://liampauling.github.io/flumine/advanced/#logging-controls)

---

## 2021-04-12 17:08:34 - general channel

**Jorge**

Hi [@U4H19D1D2](@U4H19D1D2),  for this case, shouldn't he substitute `self.recorder_id = 'his_local_directory'` [https://github.com/liampauling/flumine/blob/66089f81a8d5cd7f74ffe2d864745e823cb6bf51/examples/strategies/marketrecorder.py#L33|here](https://github.com/liampauling/flumine/blob/66089f81a8d5cd7f74ffe2d864745e823cb6bf51/examples/strategies/marketrecorder.py#L33|here) ?

---

## 2021-04-12 11:47:50 - general channel

**liam**

However bflw can handle this without an issue when backtesting and the data betfair sell also has this problem but obviously isn't as clean

---

## 2021-04-11 22:53:40 - random channel

**MacrcoPolo**

Frustrating problem I'm dealing with. Does anyone see duplicate publish times in their data? I.e a message with a specific pt, then followed up with another message with a diff clk, but the same publishtime?

---

## 2021-04-11 17:04:18 - general channel

**azevedo**

[@U01L8D326AK](@U01L8D326AK) you can specify “EX_ALL_OFFERS” when setting up streaming 

---

## 2021-04-11 15:42:39 - general channel

**Taking Value**

`Remove File = True` `Force Update =  False` . Wasn't entirely certain what Force up update is for.  `update after initial closure` is its description in the MarketRecorder class but I am uncertain what it was updating so left it as default False in the context KWARG that is fed to the class.  I have a work around of sorts but every time I have needed a work around with bflw or Flumine to date its just because I didn't get what I was doing with it. Trying to prevent months of using a work around that will likely cause me issues int the long run by getting the solution now.

---

## 2021-04-09 18:42:23 - general channel

**Taking Value**

Sorry each race not each runner. I have edited it accordingly.



Using betfairlightwait. When I set it up a few months ago I just set it record all updates from all races intto one text file each day. I have been segregating the data into a txt file for each race afterwards. Finally got the time to get back to it now and want to set it to record one file per race. Uncertain how to do it. Do I need one stream per race ?

---

## 2021-04-08 18:29:08 - general channel

**William Martin**

thanks Peter, thats a great help, I managed to get the data I wanted as a result.



Is there a cheat sheet anywhere with team IDs for example?

---

## 2021-04-08 16:44:06 - general channel

**Chris**

[@U01U34X8LHE](@U01U34X8LHE) You can create a variable which gets the current time and adds 1 day to it, example here; [https://www.geeksforgeeks.org/python-datetime-timedelta-function/](https://www.geeksforgeeks.org/python-datetime-timedelta-function/)

---

## 2021-04-08 13:00:32 - random channel

**Jonjonjon**

I just place exit orders at "fair value" after entries get filled. But I don't adjust the exit orders as fair value changes. At some point I need to do some flumine backtesting to test whether or not adjusting the exit orders will be good or not

---

## 2021-04-08 12:23:49 - general channel

**Rich**

Has anyone seen an issue with Flumine where it won't correctly match bets on basic (per minute) data but works fine on per-second data?

---

## 2021-04-08 06:07:26 - general channel

**liam**

I am confused, each runner? or each race? Are you using flumine?

---

## 2021-04-07 22:14:20 - general channel

**Taking Value**

Is there a method that can be called on market_book.streaming_update to segregate each race in the update into its own json/txt file or is this something I would have to code up myself. I am asking for logging purposes. Currently recording all market updates to one file and segregating them into individual races later, its in efficient. Want to record from the stream to a file unique to each race.

---

## 2021-04-06 21:48:36 - random channel

**Jonjonjon**

Could this line also cause similar issues?



[https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/order/process.py#L116](https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/order/process.py#L116)

---

## 2021-04-06 19:36:53 - general channel

**ian mcneill**

Hi [@UBS7QANF3](@UBS7QANF3) - thanks for this - I'm trying to plug this into the multiline JSON that flumine creates. I've desearalized the JSON into the marketbook object - it should be a case of adjusting the keys to match what I need in the DF or is there a more efficient method of creating a single DF (my thoughts are this would need to be 3d with PT as one axis and the runners as another?

---

## 2021-04-06 16:15:46 - general channel

**thambie1**

The default is 10 simultaneous streaming connections for the streaming API

---

## 2021-04-05 09:34:43 - general channel

**Peter C**

As an aside to this question - what is the worst losing streak you've been on? I've had a frustrating weekend even though I (think) I've beaten BSP both days. Obviously only 2 days but it'd be interesting to hear about other people's losing runs whilst I try and work out whether I am genuinely taking value or not.

---

## 2021-04-04 21:15:51 - random channel

**Jonjonjon**

Interesting. A shame they don't do Python benchmarking!

---

## 2021-04-04 12:32:40 - random channel

**James T**

I’m not a massive germaphobe but I do use a simple fully washable mouse and keyboard. I’m sure basically everyone snacks at their computer but it happens to be one of the least hygienic places. Also when I wash them every month or so it’s like I’ve got a brand new device again! It also solves the problem of choice paralysis because there’s basically zero choice out there. Both are fine for regular use and gaming, but it would be nice to have a few more advanced ones available. My mouse is just a wired two button and scroll wheel thing, and the keyboard is basic too, but at least has a num-pad! I think my brand is Seal Shield. They last for years too. 

---

## 2021-04-04 10:02:06 - strategies channel

**Atho55**

I have a football related question. At the start of a match there are odds for each correct score. Once a goal is scored and the dust has settled are the new correct score odds in any way relative to the original odds or are they now newly derived odds based upon the goal time and score. Have started to build a tool that returns the outcomes of past games based upon the Event Minute (goal time) and Actual Score and looking to do a check on the odds that BF offer during the game. This is 6m and the score is 1-0 from the Premiership. Is there a source of data anywhere that I can be pointed at. [http://prntscr.com/113swwm](http://prntscr.com/113swwm)

---

## 2021-04-04 08:54:41 - random channel

**Mo**

Very much a random question but can anyone recommend a good mouse? I've bought this one: [https://www.amazon.co.uk/Wireless-Patuoxun-Computer-Cordless-Adjustment/dp/B01ESZJSUK](https://www.amazon.co.uk/Wireless-Patuoxun-Computer-Cordless-Adjustment/dp/B01ESZJSUK) a couple of times but the mouse wheel starts slipping after about 6 months or less of usage which is super annoying. I'm a bit overwhelmed by all of these gaming mouse options all of which seem to have terrible software you need to use if you want to customise LED colours or DPI or whatever and probably aren't supported by Linux. All I care about is something that is built to last and comfortable to use

---

## 2021-04-02 13:30:41 - general channel

**river_shah**

Is this the recommended setting for placing orders in play please?

```flumine.config.async_place_orders = True```



---

## 2021-04-01 11:58:27 - general channel

**Alessio**

(Also with a system with streaming queues, no matter the tech, good luck with finding where things broke and which state the system is in)

---

## 2021-04-01 09:08:52 - general channel

**charlie_v**

What odds will people give me for betfair api being stable today...

---

## 2021-03-31 19:46:53 - general channel

**Ruben**

[@U01C12ZEADQ](@U01C12ZEADQ) I tried to look around for odds streaming services that included [http://betfair.com|betfair.com](http://betfair.com|betfair.com) exchange but the only things I found are crazy expensive services (starting at a few thousand/month) for syndicates and such

---

## 2021-03-31 18:36:54 - general channel

**Alessio**

i'd put 5 euros on 'database down' (unreplicated hot-cold RDBMS)

---

## 2021-03-31 15:54:57 - general channel

**Alex A**

I have some mates who like a random gamble, and if you ask them how they’re doing it’s always “Roughly even” and then you show them how to access Net Deposits on whatever bookie they’re using and they see that they’re down hundreds.

---

## 2021-03-31 13:31:54 - general channel

**James T**

I think it’s now recognised that although an exchange is effectively a better offering for casual punters because of the lower margins, the problem is that it costs more to acquire those customers (I think mainly because of the increased complexity of using an exchange). This means a traditional sportsbook is always going to be more profitable on a per customer basis. It turns out that the average punter isn’t actually that price sensitive and the simplicity of a sportsbook basically wins. I wonder if that’s ever going to change?

---

## 2021-03-31 13:12:39 - general channel

**Mo**

The CEO recognises that the exchange is their USP but whether he can successfully act on that is another question

---

## 2021-03-31 10:45:03 - general channel

**charlie_v**

so if betfair api comes back , anyone going to bother today? it will fall over again today won't it

---

## 2021-03-31 10:11:07 - general channel

**charlie_v**

I like him, because I made a lot of money from smarkets over the year,helped me buy a house so....

---

## 2021-03-31 10:06:58 - general channel

**charlie_v**

The fun of the betfair api, would have  presumed after such a long period of time they would have got it stable.

---

## 2021-03-30 06:49:53 - general channel

**river_shah**

Does flumine support muxing data across market files to backtest multiple markets simultaneously? Use case is racing win vs place or football over unders vs each other 

---

## 2021-03-29 13:05:32 - general channel

**Mo**

Right, so the key thing that seems to be missing from that is the use of streaming which the example I linked to covers

---

## 2021-03-29 13:03:34 - general channel

**Rob (NZ)**

Awesome thanks I'll check that out.... I was using [https://betfair-datascientists.github.io/api/apiPythontutorial/|https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/|https://betfair-datascientists.github.io/api/apiPythontutorial/)

---

## 2021-03-29 12:58:34 - general channel

**Mo**

I'm not sure if you're referring to the betfairlightweight examples but all of the data you need is trivially available from streaming and the market catalogues so this is a good place to start: [https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2021-03-29 12:38:07 - general channel

**Rob (NZ)**

Hey all. Hope everyone is well.. I'm just wondering if someone could describe the best way to approach getting the following data...   I'm using python and betfairlightweight and trying to get a table that would have one row per race for nz and aussie gallops that are coming up . On that row something that described how long till the start of the race and then which runner is the favourite and what its projectes bsp or last traded price is... ideally this would be refreshing as the odds and races come and go...    any thoughts on a approach

---

## 2021-03-29 12:15:03 - general channel

**Oliver Varney**

I dont think so, I think the decision was not to add, as it would lead to people all requiring custom solutions . [https://github.com/liampauling/flumine/issues/267](https://github.com/liampauling/flumine/issues/267)

---

## 2021-03-29 11:19:45 - general channel

**Rich**

Is there any built-in functions in flumine to give current cash-out (green up) profit/loss?

---

## 2021-03-28 17:57:43 - general channel

**Sam Asin**

thanks for all the help!

---

## 2021-03-28 11:48:22 - general channel

**Ruben**

Good morning everyone, question about Flumine: Say my bot crashes and I re-start it. On start up, is it possible to "poll" existing orders previously placed to avoid placing them again? I imagine this would somehow be prepopulating the blotter on start up? Any advice against doing this?

---

## 2021-03-27 08:37:19 - random channel

**Oliver Varney**

[@U4H19D1D2](@U4H19D1D2)is it worth rate limiting this logger.warning / does anyone do this? Or do people get value having at every market book update? [https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/baseflumine.py#L123](https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/baseflumine.py#L123)

---

## 2021-03-26 20:20:23 - random channel

**Michael**

Nice for a new player to get a bit of reassurance, and you have less impact on the market which is helpful too.

---

## 2021-03-26 17:29:00 - random channel

**Oliver Varney**

[@U4H19D1D2](@U4H19D1D2) Not that ive had a chance to look at IP yet, but I think you have got a lightbulb going about how to approach :+1:

---

## 2021-03-26 17:28:08 - random channel

**liam**

Your problem is getting matched, not the delay 

---

## 2021-03-26 09:00:28 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/markets/blotter.py#L68](https://github.com/liampauling/flumine/blob/62b40ad11988ecab039b3b822bc70779aed64bca/flumine/markets/blotter.py#L68)

---

## 2021-03-26 08:17:00 - general channel

**Isaac Martinat**

For tennis database, do you know about this open source one: [https://github.com/JeffSackmann/tennis_atp|https://github.com/JeffSackmann/tennis_atp](https://github.com/JeffSackmann/tennis_atp|https://github.com/JeffSackmann/tennis_atp)? I was going to work on it this week, but if OnCourt is better, I will buy their license.

---

## 2021-03-26 02:06:54 - general channel

**Misha**

[@U0160E9HS2G](@U0160E9HS2G) - regarding name matching: the parsed OnCourt data/database IS our tennis stats database, so all matches get matched back to an OnCourt tournament and OnCourt players. This gives a tournament id and players ids for current matches that allow for historical player and tournament data to be used for current matches

---

## 2021-03-26 00:23:16 - general channel

**Misha**

As well as using 3 databases, a lot of views and stored procedures, the parsing code for all the data comes to about 6000 lines of C# code

---

## 2021-03-26 00:21:09 - general channel

**Misha**

I have all the points in a database (around 45 million)

---

## 2021-03-25 23:50:52 - general channel

**JC**

Also yes I foresee matching betfair's names and identifiers with my own to be a an upcoming problem

---

## 2021-03-25 23:49:18 - general channel

**JC**

Do you have the whole updating process automated as well from launching the OnCourt application to populating your database with parsed new information?

---

## 2021-03-25 22:30:47 - general channel

**Misha**

Re OnCourt: Only running the application will update the database. The code to update and rules are in the application

---

## 2021-03-25 19:47:57 - general channel

**JC**

I've managed to reverse engineer the historic scores as previously mentioned (with help from someone in this slack), but yeah could also work for updates

---

## 2021-03-25 19:38:36 - general channel

**Mo**

I haven’t yet worked out how to update the database without running the application but I’m certain it’s possible

---

## 2021-03-25 08:09:52 - strategies channel

**Mo**

Easily solved with a Monte Carlo simulation, yes

---

## 2021-03-24 12:12:25 - general channel

**Peter C**

If I run a backtest of aus racing markets in flumine, does it take account of the extra fees for those markets or do I need to factor them in myself?

---

## 2021-03-24 07:23:40 - issues channel

**Jorge**

Hi guys, in the marketrecorder example, [https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py), what would be a case when `context['force_update'] == True` is useful? For me, some files remained locally after the S3 upload, is 'force_update' designed for these cases?

---

## 2021-03-23 22:27:56 - strategies channel

**Beeblebrox**

Yeah, I guess it's a good enough approximation as things will average out in the general mish mash.  Interesting problem though.

---

## 2021-03-23 19:40:12 - strategies channel

**Michael**

Yeah I hope so [@U016TGY3676](@U016TGY3676) I wasn't getting at you just sympathising. I'm not sure how to calibrate how much loss to expect. My position is a little different in that perhaps I have a bit more experience, but I don't really expect any significant loss. I'm not really suggesting _'asking for more value'_ I'm talking about only posting bets when there's a stronger signal of value, how much value you ask for is then a separate consideration. That shouldn't give you the adverse selection you're talking about. Say for example your signal was weight of money - there's obviously a range of possible values and you're going to have to make a decision that when WOM &gt; X that's when you bet. So if that's your new bot I'd set X nice and high for a kick off. Obviously that's a very simplistic example but you can apply the same principal to anything you might automate, the decision to bet is essentially binary but there are continuous thresholds underlying it that can be adjusted. This is super simple if you're estimating EV but even if you're not you should be able to identify when your signals are stronger and confine yourself to those opportunities to start with. I'd be really suspicious of a trigger that was totally binary, to me it seems like common sense that you should be able to characterise a given opportunity as more or less profitable.

---

## 2021-03-23 10:11:07 - strategies channel

**Jonjonjon**

There is a max trade count option, in flumine strategies, to limit how many bets you can fire off

---

## 2021-03-23 09:09:11 - strategies channel

**mandelbot**

Im down about 500 pounds so far on test stakes though the bets that I have taken have beaten BSP so far. Will keep it running for the rest of the month. I doubt I'm over fitting as I haven't filtered it at all (except im not taking bets &gt; 100) and it is based on what I've personally noticed happen in the markets. I'll run your montecarlo code and see, might PM you with some noob questions at some point :D

---

## 2021-03-22 21:40:57 - strategies channel

**birchy**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1615824484140500?thread_ts=1615824484.140500&amp;cid=C4HL6EZTQ|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1615824484140500?thread_ts=1615824484.140500&amp;cid=C4HL6EZTQ](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1615824484140500?thread_ts=1615824484.140500&amp;cid=C4HL6EZTQ|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1615824484140500?thread_ts=1615824484.140500&amp;cid=C4HL6EZTQ)

---

## 2021-03-22 20:07:38 - general channel

**Ian**

Hi all, does anyone have a good tutorial or reference site on plotting json data using plotly. I'm looking at plotting the data from flumine - managed to process the JSONL into a single JSON object and looking to start simple by plotting the TV of each market along the time, using buckets of time, then the RC. I'm assuming that selecting the relevant elements of the JSON directly will be more performant than creating a simple DF with the require data. Any pointers appreciated.

TIA

---

## 2021-03-22 19:47:00 - strategies channel

**PeterLe**

[@U010GM77S4W](@U010GM77S4W) [@U016TGY3676](@U016TGY3676) uploaded a Monte Carlo python file last week. Check that out before writing your own, it’s easy to run

---

## 2021-03-22 13:17:44 - general channel

**Pierino S**

ok cheers [@U9JHLMZB4](@U9JHLMZB4) for that, i have heard the Betfair scores are not that accurate, so good to have that confirmed here. Good tip about the Redis option, I see its tailor-made for open source database caching. I had paid someone to code something a long time ago and it was really cracking, just then something broke and it became unusable !! Just giving all this stuff a fresh look.

---

## 2021-03-22 11:40:05 - general channel

**Peter**

@*Pierino Schiavone BFLW can be used to access the undocumented Betfair scores API only, but I suspect the consensus here would be that that service isn't very accurate and you'd be better off running a separate process to ingest this sort of data from a more reliable source, caching it locally (e.g. with Redis or similar) and then reading it as needed for your BFLW/Flumine strategies.*

---

## 2021-03-22 11:26:22 - general channel

**liam**

I see, and that is a problem because? 

---

## 2021-03-22 10:30:26 - general channel

**liam**

The code should give a good overview of whats what [https://github.com/liampauling/flumine/blob/master/flumine/controls/loggingcontrols.py](https://github.com/liampauling/flumine/blob/master/flumine/controls/loggingcontrols.py)

---

## 2021-03-22 10:22:28 - general channel

**liam**

You have the python logs or you can use the `loggingcontrol` class

---

## 2021-03-22 09:25:59 - general channel

**Dave**

I suppose the real question is how much are you willing to pay for an atomic place+cancel. For most people, presumably that figure is 0.

---

## 2021-03-21 23:31:10 - general channel

**Pierino S**

Hi, there were some mental results in the football these last couple of days....e.g. Bologna beating Juventus, West Ham blew a 3 goal lead against Arsenal. Does bflw take inputs from score type feeds, like flashscore or along those lines &amp; place bets according to the user's logic ?

---

## 2021-03-21 15:45:09 - random channel

**Mo**

Good question... I’d need to have a think about that

---

## 2021-03-21 14:45:57 - random channel

**Unknown**

Thanks to everyone who made suggestions for Python visualisation packages. The reason I was asking is because I am working on this: [https://github.com/mberk/betfairviz](https://github.com/mberk/betfairviz). Sometimes I find myself wanting to quickly get a sense of a MarketBook object and the dict representation is hard to parse visually

---

## 2021-03-21 03:23:57 - general channel

**Misha**

The only problem you may have is in very low liquidity markets, where you are asking for more volume than is really on offer (excluding the default "catch-all" offers that are often left there to match "mistakes"). But I would never bet into these markets as it just isn't worth the effort (and this comes from someone who bets on ITF matches)

---

## 2021-03-20 20:31:18 - random channel

**Jonjonjon**

My account is littered with them. And Godaddy support aren't good at answering questions on that sort of stuff

---

## 2021-03-20 19:54:22 - strategies channel

**birchy**

[@U01H1ALH18F](@U01H1ALH18F) synchronised clock is important because Flumine compares local time to response timestamp. On Linux/Mac you can use an NTP daemon. I also had issues similar to yours on startup when subscribing to 1000's of markets.

---

## 2021-03-20 17:51:00 - general channel

**D C**

That is a different question isn't it.

---

## 2021-03-20 17:28:34 - general channel

**Mo**

I can’t answer any flumine questions :wink:

---

## 2021-03-20 17:20:18 - general channel

**Oliver Varney**

Is one advantage of that betfair implementation is that if the min fill size is not met the market never sees the order, I don't know if this is true but a question I've always had?

---

## 2021-03-20 17:12:02 - general channel

**Ruben**

probably a stupid question, but why do you care about the individual prices at which your order is matched, as long as the VWAP is above the price you specified? the fact that it is FoK guarantees that everything gets matched, or nothing gets matched

---

## 2021-03-20 15:38:47 - random channel

**Dave**

[https://quant.stackexchange.com/questions/7826/how-does-hansons-market-maker-lmsr-work](https://quant.stackexchange.com/questions/7826/how-does-hansons-market-maker-lmsr-work) oh so this must be referring to the same Hanson :slightly_smiling_face:

---

## 2021-03-19 21:44:28 - random channel

**V**

The problem is that Jason himself doesn’t know what he wants 

---

## 2021-03-19 21:43:48 - random channel

**Oliver Varney**

My main problem is its not an exchange, they just want a platform where they trade their own money

---

## 2021-03-19 20:06:15 - random channel

**Paul**

But you can reduce the problem by throwing more money at it, and that takes a few clicks and you’re done, so :shrug: 

---

## 2021-03-19 18:56:49 - random channel

**Lee**

Adding to what Peter said, since the latest optimisations to bflw + flumine, my cpu usuage in prod has pretty much halved

---

## 2021-03-19 18:50:14 - general channel

**Lee**

off the top of my head you might be able todo something in a worker like following. no idea if this works and probably not great practice to access private variables but might help point in the right direction

```for stream in flumine.streams:

   if stream._running```

---

## 2021-03-19 16:25:02 - issues channel

**Jorge**

PR finished: [https://github.com/liampauling/flumine/pull/397](https://github.com/liampauling/flumine/pull/397)

---

## 2021-03-19 15:22:53 - issues channel

**Peter C**

ok, thanks for your help. An easy solve!

---

## 2021-03-19 15:20:35 - issues channel

**Peter C**

Thanks for your help. Is this acceptable from betfair's point of view? I don't want to stream markets for a day and a half only to use the last 10 minutes if this is not considered acceptable usage

---

## 2021-03-19 12:37:18 - random channel

**Alessio**

Tbh, I think Python straight is not necessarily a good one. A very common infographic backend is d3 (javascript).

---

## 2021-03-19 12:28:48 - random channel

**Mo**

Can anyone recommend some resources for drawing things in Python which aren’t plots? For example, infographics, rendering tables, maps etc ?

---

## 2021-03-19 07:17:55 - issues channel

**Jorge**

Hi guys, why is flumine polling account balance every 2 mins? Is it possible to turn this off when recording market data only?

---

## 2021-03-18 18:15:12 - general channel

**Atho55**

[@U01J98RDHRN](@U01J98RDHRN) I have a spreadsheet that has Home Win odds v Actual result that I can post if it helps. Lo tech approach

---

## 2021-03-18 18:04:17 - general channel

**Sam Asin**

thats the main problem with elo it seems, main reason why trueskill sounded better

---

## 2021-03-18 18:04:14 - general channel

**Mo**

Details of TrueSkill are too opaque. Easy to update the ratings but almost impossible to work out how to make predictions from them

---

## 2021-03-18 18:02:46 - general channel

**Sam Asin**

is trueskill not very popular out of curiosity? any sense of that? the only r package i could find looked pretty shit, and the python one i saw didn't look mindblowing either

---

## 2021-03-18 09:21:07 - random channel

**Misha**

But you need to design the database first, not update it manually

---

## 2021-03-18 09:20:39 - random channel

**Misha**

So the version control is part of the database design software, which automates the updates (generates the necessary SQL)

---

## 2021-03-18 09:20:02 - random channel

**Misha**

You can - but to do this you really need some database design software that generated DDL update queries

---

## 2021-03-18 09:04:01 - random channel

**Oliver Varney**

hmm yer seems like a nightmare, the thing I would like to be able to do (and maybe it exsists) is to be able to right click in SSMS / Azure data studio / SQL editor, alter proc make some changes commit and push then apply to the database

---

## 2021-03-18 08:58:44 - random channel

**Misha**

As a solo developer I don't bother trying as the difficulties outweigh the benefits. I just take regular database backups so I can recover

---

## 2021-03-18 08:53:51 - random channel

**Oliver Varney**

conceptually I would like to be able to just track all the objects in my database over time and better test for regressions

---

## 2021-03-18 08:52:00 - random channel

**Mo**

A problem I've never solved

---

## 2021-03-17 19:47:43 - general channel

**Oliver Varney**

there was a thread recently where i asked a similar question, might be able to find via the search

---

## 2021-03-17 19:19:27 - strategies channel

**Alessio**

and flumine re-scrapes. it dumps the latest as you can see

---

## 2021-03-17 13:06:11 - random channel

**D C**

Well that just leads to the question at what point do you get an account manager??

---

## 2021-03-17 11:14:17 - random channel

**Chris C**

Thanks guys, really interesting. I guess I have really underestimated how the implied commission can help.

---

## 2021-03-17 08:57:54 - strategies channel

**Jonjonjon**

Flumine's single process keeps things simple. I've been playing with Bitfinex's Python API. It is multithreaded, and that causes a headache with preventing duplicate orders being fired off.

---

## 2021-03-17 08:47:55 - strategies channel

**liam**

flumine, simple single process event driven, I don't want to start this again though :joy:

---

## 2021-03-17 08:37:38 - strategies channel

**Jorge**

Looks simple, and does flumine keep the connection with S3 always open? And appends lines to the files? Or does it upload the local files?

---

## 2021-03-17 08:24:10 - strategies channel

**Alessio**

And if yuo read the code: [https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py)

---

## 2021-03-17 08:07:16 - strategies channel

**liam**

Yep, this is a client setting [https://github.com/liampauling/flumine/blob/d9c0d51a94c32cb5972d45a0806791cd1e72e56b/flumine/clients/baseclient.py#L26](https://github.com/liampauling/flumine/blob/d9c0d51a94c32cb5972d45a0806791cd1e72e56b/flumine/clients/baseclient.py#L26)

---

## 2021-03-17 07:58:44 - strategies channel

**Jorge**

Okay I will use flumine and have another process convert the files to a csv readable format

---

## 2021-03-16 21:38:21 - random channel

**Alessio**

hey man, random question, where did you find this one? I was looking at my browser around the site and realized I don't see where (and how often) they call that endpoint :slightly_smiling_face:

---

## 2021-03-16 20:08:16 - strategies channel

**liam**

You still get access to the MarketBook once processed through the streaming.historical function but the data is stored as deltas, space saving is huge compared to saving full market books 

---

## 2021-03-16 17:30:25 - strategies channel

**Jorge**

Yes, bflw is using deltas but converts these 'mcm' messages to a readable MarketBook object

---

## 2021-03-16 17:25:52 - strategies channel

**Jorge**

Okay thanks! I am using bflw for recording because I find it simpler to use the MarketBook object returned by Streaming instead of the 'mcm' messages

---

## 2021-03-16 15:35:18 - issues channel

**river_shah**

`MarketStream` and `OrderStream` each consume a connection. Each instance of flumine will consume two connections

---

## 2021-03-16 12:54:46 - general channel

**Lee**

I guess my question is more around if you have a 10 runner race, at some point during the race at least 9 are going to appear back value against a starting price but they're not. Once you're in play i'm not really understanding how SP is relevant.

---

## 2021-03-16 12:00:26 - strategies channel

**Tom**

Thanks for the above [@U016TGY3676](@U016TGY3676). Are most here using Flumine or Betfairlightweight please?

---

## 2021-03-16 11:10:58 - strategies channel

**Jonjonjon**

Yes. I think I do. Your comment about flats and jumps inplay has also given me some food for though. Thanks for the helpful ideas!

---

## 2021-03-16 10:38:19 - strategies channel

**Jorge**

Flumine's MarketRecorder creates a 'market_id' file and appends the MarketChangeMessage ('mcm') messages that come from Streaming to it, right?

---

## 2021-03-16 10:29:11 - strategies channel

**Jorge**

In the example above, does flumine use S3 to store the recorded data? I'm not using flumine right now but this looks very interesting! (I keep the data in my local machine so it is getting huge)

---

## 2021-03-16 08:53:00 - general channel

**Oliver Varney**

Im not too sure what your trying to get out of the questions. People in this slack group work for months to years to come up with strategies. It appears maybe you just want a little bit of fun around chelts which is all good so just enjoying the racing and bet responsibly, its very likely that your bets will be random and therefore the outcome random.

---

## 2021-03-16 08:51:21 - strategies channel

**birchy**

[@U01Q94VE1AB](@U01Q94VE1AB) make marketrecorder your first priority.

[https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py)

---

## 2021-03-16 08:35:56 - general channel

**Jonjonjon**

Another question...



Do you produce a point forecast for the true price, a range of likely values, or something else?

---

## 2021-03-15 20:08:11 - general channel

**Sam Asin**

good question, I have no idea really

---

## 2021-03-15 15:23:12 - random channel

**MacrcoPolo**

Liam when is the next bflw meetup once the pubs open?

---

## 2021-03-15 12:21:46 - random channel

**Michael**

I suppose that's a question of reasonable marketing an how the course is described. There are certainly some on the wrong side of that line.

---

## 2021-03-15 11:50:28 - random channel

**Paul**

For example, if you are interested in a fundamentals approach, and you haven't read the (freely available) Benter paper - even though it might not be very helpful today - and thought about it, can you quantify exactly what it is you are hoping an academic is going to help you with before you spend your money that could be part of your bankroll?

---

## 2021-03-15 11:14:41 - general channel

**liam**

the historical endpoint just allows you to view/list/download the files, the streaming endpoint then allows you to process the data as the files themselves just contain recorded streaming data which is images + deltas so you need to do some processing (bflw is heavily optimised for just this :slightly_smiling_face:)

---

## 2021-03-15 10:02:32 - general channel

**Steve Roach**

So, [@U4H19D1D2](@U4H19D1D2) does bflw pump the data straight through from the files or do you do much processing on the way through?

---

## 2021-03-15 09:51:26 - general channel

**Misha**

Streaming data

---

## 2021-03-15 09:50:55 - general channel

**Misha**

Betfair Australia is NOT run like Betfair UK, thankfully. They can be very helpful

---

## 2021-03-15 09:50:00 - general channel

**Misha**

Basically Betfair Australia is run as a highly customer-focused organisation, so if you are nice and helpful, they can help you out with data access and other stuff

---

## 2021-03-15 09:10:18 - general channel

**Steve Roach**

Can anyone tell me what is the difference between BFLW and Flumine?

---

## 2021-03-14 21:39:50 - random channel

**D C**

Its a fair point. But I think it likely that most people here in the money do so via automation. Some of the stuff listed on the course sounds a lot like the sort of questions people ask here (how to calculate my EV etc) so that is why I posted it. Clearly it won't be for everyone.

---

## 2021-03-14 08:22:43 - random channel

**Mo**

Alignment of data feeds with Betfair price data is a big problem. The best solution is collect both yourself in real time. In the absence of that, you will have to do the best you can, for example:



1. Restrict yourself to backtesting only the first half, assuming here that the start of the match is more accurately capture by the inPlay flag than the second half

2. The trigger described above

3. Time when first half markets close + X minutes

4. Identify when OU goals markets odds start decaying again

5. Use some combination of these methods to narrow down the window in which the first half must have started

---

## 2021-03-13 22:28:01 - strategies channel

**Michael**

Thinking about it; we don't seem to talk much about evaluating your process but I think it's one of the best things you can do. _'Was what I've just done likely to produce a bullshit outcome'_ is a really important question that could either give confidence or raise your level of statistical vigilance.

---

## 2021-03-13 17:42:08 - strategies channel

**James T**

Of course the other issue is how to close at BSP without knowing what it will be. That’s more of an execution puzzle, and there’s several ways to do it. None of them will be perfect, but all of them should be close enough. So you’ll still end up with some open bet going into the race. 



Or you could close perfectly at the scheduled off. But then you’d be taking prices which causes extra slippage. 

---

## 2021-03-13 14:27:25 - random channel

**Aaron Smith**

Correctly configuring field filters can help by:

• Reducing the size (and time) of initial images

---

## 2021-03-13 14:08:59 - strategies channel

**Mo**

100% valid to question if BSP is the true price but these assessments are a starting point

---

## 2021-03-13 14:03:02 - strategies channel

**Paul**

I'm surprised by the notion that BSP is straight called out as fair price. I've not looked but are you saying that BSP consistently reflects winning percentages (2.0 = 50% win rate, 1.5 = 66.6%, 10.0 = 10%, and so on)? I've not looked because I've assumed it's not helpful

---

## 2021-03-12 19:54:51 - random channel

**Paul**

That was back in 2019 I think. I don't think I marked it as possible ponzi in my head, but I decided to keep my money away because _any_ moral behaviour questions at that level (even if it's being an arse to subordinates), is enough to make me worry about integrity

---

## 2021-03-12 16:01:07 - issues channel

**liam**

Bflw will give you every update 

---

## 2021-03-12 15:32:31 - issues channel

**Jorge**

In bflw, does the Market Data Streaming return info for CLOSED markets?

---

## 2021-03-12 13:42:14 - general channel

**Stefan**

Yes, you are right. First I thought races under 1m are started from stalls, but noticed 2m races started from stalls as well. So it is maybe question of racecourse, or race type?

---

## 2021-03-12 12:10:10 - issues channel

**liam**

use the [https://github.com/liampauling/flumine/blob/3175e4f4a1fa115c9d41294958fee67005a38bc7/flumine/markets/blotter.py#L74|blotter](https://github.com/liampauling/flumine/blob/3175e4f4a1fa115c9d41294958fee67005a38bc7/flumine/markets/blotter.py#L74|blotter)



```market.blotter.selection_exposure(...```

---

## 2021-03-12 08:36:30 - random channel

**Jonjonjon**

Poor guy. That is the problem with that sort of investmet. Your capital is always at risk.

---

## 2021-03-11 14:16:49 - strategies channel

**Jonjonjon**

I don't think it's as black and white as that.



Suppose a market has a BATB price of 2.0. Mr Flumine User improves the price by offering 2.02. Mr Caan comes along and takes the best price.



If Mr Flumine User wasn't there, MC would have received odds of 2.0 vs 2.02. So he is better off with lots of Flumine users offering prices.

---

## 2021-03-11 12:00:08 - random channel

**river_shah**

well, lets not discount flumine and bflw. amazing libraries!!

---

## 2021-03-11 09:30:08 - general channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2021-03-10 17:44:54 - general channel

**Aaron Smith**

what functions are being called eventually comes down to what event you are getting. The main run thread is the flumine class. From there on you can follow down each path to see what is happening

---

## 2021-03-10 11:28:45 - random channel

**river_shah**

sorry if this is more stack overflow question

---

## 2021-03-10 10:30:20 - random channel

**liam**

You can make python pretty fast (hopefully proved that with bflw/flumine), C comes at a cost in terms of time/maintenance, happy to look at code if you want?

---

## 2021-03-10 10:28:21 - random channel

**Michael**

On a related topic - can I add to [@U01B8031PM1](@U01B8031PM1)'s question and ask if it makes sense to re-write complex functions in C and what the threshold is for when that might become worthwhile?

---

## 2021-03-10 10:06:42 - random channel

**river_shah**

function params and return objects are smallish numpy arrays. can use pre allocated shared mem buffers but that will be a small optimisation

---

## 2021-03-10 10:05:09 - random channel

**river_shah**

what is the best way to achieve async, long running function evaluation that is compute heavy without blocking the main thread in python? want to fire off a function with some parameters, main thread keeps running, and then get called back when it is done with the results provided. function orchestration can take time (so process pool pickling etc is acceptable delay as long as main thread not blocked for too long). don’t think asyncio is what I am looking for. Don’t want to introduce zmq pub sub complexity.

---

## 2021-03-10 08:06:47 - general channel

**Dave**

Question about BSP: The BSP docs constantly talks about involving "exchange" bets in the reconciliation. I thought BSP reconciliation only Involved those that have specifically marked to participate in BSP (i.e take sp/market on close/limit on close). What are they referring to when they mention "exchange bets" here?

---

## 2021-03-09 20:29:40 - random channel

**MacrcoPolo**

it's a common question - I believe the situation is that you can't cancel an order without an order id, so you can't cancel an order until you have a reply after N seconds.

---

## 2021-03-09 18:20:31 - strategies channel

**MacrcoPolo**

Not quite, you thought correctly - sample proportional to the number of bets in the markets, but it's the same as treating each bet independently. The idea is you wouldn't run this procedure once, you'd do it over and over generating a lot of subsamples, but the problem is it doesn't solve the problem :disappointed:

---

## 2021-03-09 17:43:20 - strategies channel

**Michael**

....maybe I'm not following you. _Edit for anyone struggling to follow: I was misunderstanding him, I thought he was randomly choosing a subset of markets based on how many bets were in each market. That would have addressed the problem of some markets having more bets than others at the cost of a lot of data. In fact he's re-using the markets over and over, hence my comment below._

---

## 2021-03-09 17:29:28 - strategies channel

**Michael**

Again - a question not an opinion: but isn't taking one sample per match quite a lot worse because it over represents events where you had few bets and under-represents others where you had many? Surely that's a bigger problem than the independence of the bets..

---

## 2021-03-09 17:23:33 - strategies channel

**MacrcoPolo**

I'd probably bootstrap sample over the matches, then draw one order from each match in this case - agreed it's not an easy problem

---

## 2021-03-09 16:45:34 - strategies channel

**Mo**

But I think this is an interesting, unsolved problem

---

## 2021-03-09 16:12:40 - strategies channel

**Michael**

I'm not a stats person so this is a question not an opinion: If you had only one bet per market you wouldn't have this problem right? And if all your bets were stuck by different people such that each person had only one bet per market each person would happily evaluate their own single bet markets in isolation and we'd have no problem with that. So if there's no causal relationship between the bets themselves  (IE you're not 'greening up') and the only link between them is that you placed them isn't it reasonable to treat each bet as if it was a separate market with a separate outcome? Obviously this is wrong - but wouldn't it get you to an acceptable answer?

---

## 2021-03-09 14:48:30 - strategies channel

**Mo**

Correct, it's a tough problem

---

## 2021-03-09 13:52:22 - general channel

**Jonjonjon**

The problems with these sorts of books, is that the authors can only really give some starting points for further research. Or perhaps some interesting analysis techniques. But it's against their interests to give away a full working method.

---

## 2021-03-09 08:25:07 - general channel

**Jonjonjon**

Nice. Please let us know when it's on Amazon, or if you need help with proof reading!

---

## 2021-03-08 22:03:08 - random channel

**Aaron Smith**

yeah, in a real world situation this will probably be over simplified, i was just aiming to solve the math questions asked. I dont know anything about cricket really :smile:

---

## 2021-03-08 21:37:21 - general channel

**Beeblebrox**

I presume other people use that endpoint with no problems?

---

## 2021-03-08 20:03:29 - general channel

**D C**

[@U01NU8PTC5Q](@U01NU8PTC5Q) the problem with helping people with programming is that often it is only possible to help with specific questions. Like if you post some code and explain what doesn't work, then someone can probably spot quite quickly what the issue is. It is really hard to give general advice though. It is not a lack of willingness to help, it is just a very hard task turning someone with no coding experience into a competent programmer via a forum. With programming you have to really get stuck in to learn how it works. The more you do that the more you learn and the more precise questions you can ask. [@U01B8031PM1](@U01B8031PM1) advice above is definitely the way to start. It is daunting task to learn to program from scratch but there are so many resources available. It is very frustrating to start off but it really does become very rewarding very quickly when you start to make progress. The effort really is worth it!

---

## 2021-03-08 19:55:12 - general channel

**Pierino S**

hi [@U01B8031PM1](@U01B8031PM1) yes did take a look at that, like i said, its cool for coders, but it went right over my head. in the area where i'm an expert, i definitely help people out, nothwithstanding how silly their questions seem. no such thing as a silly question, the school i went to.

---

## 2021-03-08 19:21:21 - general channel

**river_shah**

[@U01NU8PTC5Q](@U01NU8PTC5Q) recommend that you please follow the examples here: [https://github.com/liampauling/flumine](https://github.com/liampauling/flumine) and [https://github.com/liampauling/betfair](https://github.com/liampauling/betfair) the people on this slack channel are more than helpful, but best to self serve as much as possible especially for basics. also recommend first having a primer on python and coding (udemy and other many online resources), that way the members of this channel will be better able to help you concretely.

---

## 2021-03-08 18:37:16 - general channel

**Alessio**

I think he wants his trades.. try looking around here: [https://betfair-datascientists.github.io/api/apiPythontutorial/#get-cleared-orders](https://betfair-datascientists.github.io/api/apiPythontutorial/#get-cleared-orders)

---

## 2021-03-08 18:31:46 - general channel

**Dave**

You'll most likely want to record it yourself ([https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py))

---

## 2021-03-08 15:48:31 - random channel

**D C**

I agree with you here but if using binomial then we are assuming probabilities of each time winning are identical for each game. I can't help but feel that Binomial distribution is not quite right for this problem though. I mean take a MLB were the choice of starting pitcher has a massive effect on price. Is it not more accurate to just enumerate all possible outcomes using the respective probabilities for each distinct pair of probabilities. I feel that this question should have a simpler answer than what I am trying to make of it though.

---

## 2021-03-08 13:31:26 - issues channel

**liam**

Here is the streaming logic where bflw defaults to [https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/cache.py#L197|None](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/cache.py#L197|None) (its the same for the runners) but I would agree this should be update to 0 so the response is the same as a marketbook request with nothing matched

---

## 2021-03-08 13:22:19 - general channel

**Aaron Smith**

I have to agree with michael, the promotion idea came to my mind aswell. In the end the post was only a showcase of psychoffs success and a question of if you could reverse engineer his trades. Its pretty obvious that by only using his pnl, thats pretty close to impossible, so i m not sure if he truely wanted a serious answer to that question. However there is some way that immedialty comes to mind if you want to know his way of thinking - his courses.

---

## 2021-03-08 13:21:23 - general channel

**Michael**

Yes I agree that the substantive question is interesting.

---

## 2021-03-08 13:20:44 - general channel

**Mo**

I 100% agree with you that this psychoff guy has had more than enough attention here although I think the original question and discussion was a useful contribution. I think the question about reverse engineering bets is also a legitimate one and is actually a very interesting topic

---

## 2021-03-08 13:20:05 - general channel

**Michael**

After all the same question could  have been raised without any reference to a particular individual and without a picture of a P&amp;L page.

---

## 2021-03-08 13:11:39 - general channel

**Michael**

I'm not a suspicious person, so I look forward to seeing your questions on other matters addressed.

---

## 2021-03-08 13:01:59 - issues channel

**liam**

Is this from streaming?

---

## 2021-03-08 10:05:00 - general channel

**Unknown**

Hi, psychoff posted his profit on Brighton-Leicester and his P&amp;L for that section of the day in response to a question, see it attached. Is there a way to get the trades for the market, it might be possible to reverse-engineer his trade on this market and hence his mode of thinking ?

---

## 2021-03-06 20:16:15 - general channel

**Beeblebrox**

One query I have with the LoggingControls is how do you know what the `event.event` property is in each of the class methods?  Looking at the examples I can see that for `_process_cleared_orders(self, event)` `event.event` is a list of orders and for `_process_end_flumine(self, event)` it's the `framework`.



Having looked through the code it's not immediately clear to me how you'd work this out for the other methods.  Can anyone point me in the right direction?

---

## 2021-03-06 15:16:09 - strategies channel

**D C**

Fine. I wish you well and hope you are profitable. I am only speaking out because you are spreading opinions that are at odds with fundamental probability theory and I question the legitimacy of your knowledge given that is the case.

---

## 2021-03-06 15:10:08 - strategies channel

**Misha**

I'm certainly not telling anyone how to bet, because every system is unique

---

## 2021-03-06 11:22:50 - strategies channel

**Misha**

So in effect I have no idea how to recognise where a price is inherently wrong. I only know when my price is different from the market

---

## 2021-03-05 21:31:12 - strategies channel

**AndyL**

only because i'm a novice with no idea of how to make money in these markets at the moment, so i'm trying to pick up ideas/knowledge...

---

## 2021-03-05 16:21:38 - general channel

**liam**

There is for the main resources as you can do object.json() [https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/resources/baseresource.py#L18|https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/resources/baseresource.py#L18](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/resources/baseresource.py#L18|https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/resources/baseresource.py#L18)

---

## 2021-03-05 10:20:23 - issues channel

**liam**

releasing 1.17.6 now which should prevent any race condition by storing the tradeId [https://github.com/liampauling/flumine/pull/385](https://github.com/liampauling/flumine/pull/385)

---

## 2021-03-05 10:13:24 - issues channel

**liam**

so theoretically yes as python dicts are ordered from py3.5+ but trusting the order is a bit flaky

---

## 2021-03-05 09:46:22 - issues channel

**liam**

depends, what version of python are you using?

---

## 2021-03-04 20:37:53 - random channel

**Jonjonjon**

Does anyone create command line interfaces with Python?



I want to display a table of prices on the command line, with the numbers changing as prices update. I don't want to keep printing new tables.

---

## 2021-03-04 20:34:36 - strategies channel

**PeterLe**

Thanks Mo, yes I think on the face if it, it seems a simple question, but there's many aspects that has had me thinking lately. Anyway Cheers Mo for your thoughts

---

## 2021-03-04 11:31:32 - general channel

**Jono**

Thanks, that clears this problem up.

---

## 2021-03-04 09:12:57 - issues channel

**Oliver Varney**

yes would be an initial problem [@UBS7QANF3](@UBS7QANF3)

---

## 2021-03-03 23:23:29 - strategies channel

**Paul**

I seem to recall Benter giving a talk where he said this was actually the harder bit of the problem he’d worked on. Finding winning horses was relatively simple, it was the bet sizing and then dealing with the money following them when the boards started flashing where it got tricky...

---

## 2021-03-03 23:09:14 - strategies channel

**Michael**

It's kinda frustrating that I was trying to offer some genuine advice to the questioner and now it's swamped in all this crap.

---

## 2021-03-03 21:19:00 - strategies channel

**Misha**

Helps if you know how they bet :wink:

---

## 2021-03-03 16:19:23 - general channel

**Jonjonjon**

Is there a betfair problem now? I've had nothing settled since 15:07

---

## 2021-03-03 16:19:02 - general channel

**liam**

likely to be due to the above issue with market settlement, first line is saying an order has come through the stream but isn't present locally, second line is saying the market for said order isn't available locally (probably because it has closed and been removed from flumine)

---

## 2021-03-03 16:17:40 - general channel

**Aaron Smith**

seen the first line for the same reason as jon, 2nd line i cant find in either flumine nor bflw (unless its new in v1.17 or higher)

---

## 2021-03-03 09:14:15 - general channel

**liam**

The trade will complete as whenever an order status is updated it checks, via this [https://github.com/liampauling/flumine/blob/9a6ad8847c7e86129215d057888ba2b7b89ba0ac/flumine/order/order.py#L84|func](https://github.com/liampauling/flumine/blob/9a6ad8847c7e86129215d057888ba2b7b89ba0ac/flumine/order/order.py#L84|func) so the user shouldn't have to do it manually as such

---

## 2021-03-03 09:01:17 - general channel

**captainonionhead**

:thumbsup: thanks - I've been looking through the code for this.  I guess my question boils down to: is the expected usage of this something like:



• Create Trade()

• Create Orders() from Trade

• Use Market.transaction() to place orders

• Call Trade.complete_trade() &lt;- i.e. call this explicitly to indicate no further orders to be created on this Trade object?

&lt;elsewhere&gt;

• Use the Trade.complete property to check whether the trade has actually completed

---

## 2021-03-03 08:46:58 - general channel

**liam**

Logic is [https://github.com/liampauling/flumine/blob/9a6ad8847c7e86129215d057888ba2b7b89ba0ac/flumine/order/trade.py#L80|here](https://github.com/liampauling/flumine/blob/9a6ad8847c7e86129215d057888ba2b7b89ba0ac/flumine/order/trade.py#L80|here), tbh it’s not perfect and there are a few edge cases around it and I know a few have written their own trade classes instead 

---

## 2021-03-03 00:38:27 - strategies channel

**MacrcoPolo**

Helps if you realize that not a lot of people are thinking in this value-seeking way. People trade for different reasons and at different times, and this creates the noise in the market.

---

## 2021-03-02 21:53:36 - strategies channel

**AndyL**

thanks James for your help, it's given me lots to think about, cheers

---

## 2021-03-02 19:12:25 - strategies channel

**Beeblebrox**

That's great, very helpful.  I'd not thought of splitting up the in sample set into train/test data sets too.

---

## 2021-03-02 18:30:31 - issues channel

**Lee**

think this is the place [https://github.com/liampauling/flumine/blob/b1717c7b13909d15fae865c88ecfd2108a4786d6/flumine/markets/markets.py#L27](https://github.com/liampauling/flumine/blob/b1717c7b13909d15fae865c88ecfd2108a4786d6/flumine/markets/markets.py#L27)

---

## 2021-03-02 13:11:30 - strategies channel

**James T**

Sorry, I also realised I confused your initial question with the one goatiwish posted around the same time. 

---

## 2021-03-02 13:04:54 - strategies channel

**James T**

Oh, no I don’t think any sort of questions are excluded. Just that there’s more of a specific type of expertise here.

---

## 2021-03-02 13:00:26 - strategies channel

**Atho55**

Tbh I did not realise that I might be guilty of backfitting because the event result I presented has not yet happened rather than present a result that has. Fair point James T which is why I asked the question in my 1st post. I have skimmed the posts and could not see anything that specifically excluded other concepts.

---

## 2021-03-02 11:00:26 - issues channel

**liam**

Can you try [https://github.com/liampauling/flumine/pull/385|v1.17.6b0](https://github.com/liampauling/flumine/pull/385|v1.17.6b0)

---

## 2021-03-02 10:59:57 - issues channel

**liam**

Can you try [https://github.com/liampauling/flumine/pull/385|v1.17.6b0](https://github.com/liampauling/flumine/pull/385|v1.17.6b0)

---

## 2021-03-02 10:48:05 - strategies channel

**Atho55**

"The Rank is at the top and assumes all meetings/all races follow the script for that day". From the 1st Post. If it says Lay Rank 2, you Lay Rank 2 at every race at every meeting. Yes it`s a different approach hence my question in post 1.

---

## 2021-03-02 10:21:03 - strategies channel

**Oliver Varney**

is the green cells profit? if so how can you get £297.16 profit from a £25 lay? Not trying to be negative, just trying to understand and potentially help save time

---

## 2021-03-01 22:00:41 - strategies channel

**birchy**

How good are your Flumine updates? :face_with_hand_over_mouth:

Seriously though, I'm currently enumerating a range of parameter combos to find the sweet spot and hopefully not end up overfitting. I'll let you know how it went next month.

---

## 2021-03-01 21:08:41 - general channel

**Lee**

conflate is the frequency of streaming updates from betfair

---

## 2021-03-01 20:55:33 - general channel

**Beeblebrox**

OK, thanks, that's helpful.



Looking at the code and docs `streaming_timeout` is set to None by default.  It says it calls `snap()` every x seconds if set.  I presume `snap()` just means it sends the most up to date data from the stream?  There's also a `conflate_ms` option when instantiating - how does that differ from `streaming_timeout`?

---

## 2021-03-01 19:59:10 - issues channel

**Peter C**

Hi Liam, I'm struggling to recreate the matching issue but I'll keep trying and get back to you. To answer your other question, when an order is matched in 1.17.5 that isn't matched in 1.16.3 that order is matched 300-1000 seconds after placement

---

## 2021-03-01 19:47:06 - general channel

**Lee**

I hd a large difference in commission again this week from the api and pc page.

```api profit == pc page

api profit - api commission == profit and loss page

api commission != pc commission```

I'm not sure how the first two sums above can match but commission is not even close. Question for BDP?

---

## 2021-03-01 15:15:11 - issues channel

**liam**

yeah I think flumines original design did lend to multi markets but its now in a much better shape because of the refactor

---

## 2021-03-01 14:35:56 - issues channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) Well done on the recent Flumine updates. Even on my shitty old hardware, the backtests are significantly faster. How did you manage such a big optimisation?

---

## 2021-03-01 11:00:18 - issues channel

**liam**

It is likely that its due to the order you are processing the markets and this line [https://github.com/liampauling/flumine/blob/bbd145b7f18a63790fa844e9a0cdc9bab3991542/flumine/controls/clientcontrols.py#L62|here](https://github.com/liampauling/flumine/blob/bbd145b7f18a63790fa844e9a0cdc9bab3991542/flumine/controls/clientcontrols.py#L62|here). If the first market you process is actually the last chronological market then the reset will never get called, try ordering the markets first, I do this before getting the markets

```market_ids.sort()  # in creation order ```

or just disable the control

```client = clients.BacktestClient(

    transaction_limit=None,

)```

---

## 2021-02-28 17:37:07 - strategies channel

**Michael**

I think the premise of the question (that you have to 'beat' other successful players) is wrong. It's not like bad players never strike a good bet. You can just take their good bets off them - there's plenty of that to go round. Obviously there's a limit to the total pot but that's not of much concern to a new player. Also a new player will typically delighted with what a more experienced player might consider dregs not worth the bother.

---

## 2021-02-28 15:52:16 - random channel

**Alessio**

hey mate.. I started hitting this one today as well.. exactly identical.. did you manage to figure out where the problem was?

---

## 2021-02-27 13:33:17 - general channel

**Oliver Varney**

This is my understanding, hopefully someone will correct me if im wrong (Ive never digged deep into it as its a useless number most of the time on the site), but say you backed £1000 at 4.0 and the horse moved in to 2.0 you would need to lay £2000 I believe. If in the ladder there was only £2 @ 2.0 then, £1998 @1.01 it would basically say your position is worthless as it would calculate down to that, it may however take into account cross matching, not sure on this. Betangel watchlist view is what you want in terms of how to get a rough idea of the EV of you current positions

---

## 2021-02-26 19:24:53 - general channel

**Michael**

Yeah it mentioned multiples which are often insane value. It's a question of how much they're taking out of the middle though.

---

## 2021-02-26 19:21:54 - general channel

**Oliver Varney**

I guess the issue is that they probably only want help on one off bets as you say rather than giving you the option to pick and choose horses in each race across the whole festival

---

## 2021-02-26 18:26:36 - issues channel

**Newbie99**

[https://github.com/liampauling/flumine/issues/382#issue-817570814](https://github.com/liampauling/flumine/issues/382#issue-817570814)

---

## 2021-02-26 09:31:31 - general channel

**Jorge**

Okay perfect, if  `data.get("statusCode") != "FAILURE"` it means that the Streaming is working fine, right?

---

## 2021-02-26 08:47:40 - general channel

**Unknown**

Hi [@U4H19D1D2](@U4H19D1D2), just getting back to this.. I overrode the `stream.on_data` [https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/listener.py#L111|func](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/listener.py#L111|func) so that I store

`data.get("statusCode")` and `self.status`. This is enough for me, as this 2 variables are updated with every heartbeat, right?

---

## 2021-02-26 08:26:06 - general channel

**Misha**

This isn't a new problem

---

## 2021-02-25 18:33:07 - general channel

**William Martin**

no problem, I could have explained better lol

---

## 2021-02-25 18:32:20 - general channel

**Alessio**

Oh i thought you needed from outside betfair API, sorry i completely misunderstood the question.. lol

---

## 2021-02-25 18:14:15 - general channel

**William Martin**

[@U01C12ZEADQ](@U01C12ZEADQ) no problem, I was initially looking at match data but decided to scale back to just outright markets as they are more static

---

## 2021-02-25 18:03:24 - general channel

**Alessio**

actually, can't help there. i am only aware of places for per-match rather than per competition ...

---

## 2021-02-25 17:18:47 - general channel

**Oliver Varney**

[@U01C12ZEADQ](@U01C12ZEADQ) maybe able to help?

---

## 2021-02-25 09:44:03 - general channel

**Aaron Smith**

His profits may be legit, but thats about it. If you sell your ideas for 2.5k, thats only really worth it when you expect those ppl and however more they may spread the ideas will not make more than 2.5k with it, otherwise it would hurt his buisness more than it helped him. He is basically running a course where he doesnt want you to actually suceed, i m certain he is not giving away his true edge in any of those courses. Even if you need an income to stay in the UK, any buisness makes more sense than that. Just open the 10millionth bar in the UK and be done with it. Less time investment (as you can delegate it) and more profitable (under the assumption you are actually giving away your edge)

---

## 2021-02-25 07:01:22 - general channel

**Misha**

What is a fast feed? Given that anyone can get the streaming data with the same delay

---

## 2021-02-25 05:37:57 - general channel

**Mo**

Personally I would like to help but it’s not worth it to me to jeopardise my relationship with Betfair by redistributing data I don’t have the rights to

---

## 2021-02-24 15:23:22 - issues channel

**liam**

this will be the source of you problem, I can only assume the stream fails (betfair or network issue) a reconnect is attempted but the filter is a list of empty marketIds so it attempts to connect to all markets

---

## 2021-02-24 15:15:56 - issues channel

**Aaron Smith**

market_filter = betfairlightweight.filters.market_filter(market_ids=market_ids)

    market_data_filter = betfairlightweight.filters.streaming_market_data_filter(fields=["EX_BEST_OFFERS", "EX_MARKET_DEF"],                                                                                          ladder_levels=1)



len(market_ids) is roughly 90

---

## 2021-02-24 13:26:32 - general channel

**river_shah**

simple. this works. no more warnings one host and container.

```hostname = "{}_{}".format(socket.gethostname(), instance_id)

flumine.config.hostname = hostname```



---

## 2021-02-24 13:09:16 - general channel

**liam**

```from flumine import config```

---

## 2021-02-24 13:08:59 - general channel

**liam**

use containers :wink: / flumine != Flumine

---

## 2021-02-24 08:44:04 - general channel

**Jorge**

Yep I should invest some time in learning how flumine works, thanks for the tip:smile:

---

## 2021-02-24 08:38:34 - general channel

**Oliver Varney**

might be a code rework [@U0155J92A7Q](@U0155J92A7Q) but id recommend looking at flumine

---

## 2021-02-24 08:36:45 - general channel

**Oliver Varney**

orders are cached by flumine meaning I wont keep resending

---

## 2021-02-24 08:36:11 - general channel

**Oliver Varney**

nar flumine save my ass now

---

## 2021-02-24 08:26:21 - general channel

**liam**

but when failing the stream will be under a [https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/listener.py#L208|503](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/listener.py#L208|503) `listener.status` or connection will not be possible

---

## 2021-02-24 08:25:06 - general channel

**liam**

create your own listener or patch so that you can update the `stream.on_heartbeat` [https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/stream.py#L46|func](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/stream.py#L46|func)

---

## 2021-02-24 08:23:22 - general channel

**Jorge**

Hi, I'm using Order Streaming in bflw and I'd like to implement a hearbeat that tells my bots if the Streaming is working. How do you guys parse the HEARTBEAT messages?

---

## 2021-02-23 11:40:46 - general channel

**Oliver Varney**

just trying to scope out how to efficiently use logs / sentry better, at INFO level there are many request that it could get lost in

---

## 2021-02-23 06:50:47 - general channel

**Oliver Varney**

in terms of flumine [@U4H19D1D2](@U4H19D1D2) what is the expected behaviour, for the streams to shutdown?

---

## 2021-02-22 20:25:42 - general channel

**birchy**

Has anyone ever had any problems with scraping data from the spurtingwife website? This is more about being IP banned or throttled rather than actual code issues. I've always been courteous and used a `sleep(1)` but am wondering if that's actually necessary?

---

## 2021-02-22 18:03:13 - general channel

**river_shah**

My global account loss limit was set too low so a lay bet kept meeting validation inside flumine but betfair would reject, the algo was unaware of bf rejection and tried to insert the bet again and again. to top it off I was on a coffee walk and did not see the flumine warning logs about too many transactions

---

## 2021-02-22 17:56:26 - general channel

**Lee**

would `self.client.chargeable_transaction_count` help?

---

## 2021-02-22 11:54:27 - general channel

**river_shah**

also, how do I access total `transaction_count` from the framework please? I see the following code, but unsure how to access `self.framework.?transaction_count`:



```class MaxOrderCount(BaseControl):



    """

    Counts and limits orders based on max

    order count.

    Only prevents placeOrders if limit is

    reached.

    """



    NAME = "MAX_ORDER_COUNT"



    def __init__(self, flumine, client: BaseClient):

        super(MaxOrderCount, self).__init__(flumine)

        self.client = client

        self.total = 0

        self.place_requests = 0

        self.cancel_requests = 0

        self.update_requests = 0

        self.replace_requests = 0

        self._next_hour = None

        self.transaction_count = 0```



---

## 2021-02-22 10:59:24 - general channel

**Oliver Varney**

cool cheers :raised_hands: and are you also sending stuff up from try and except blocks or simply still using logging and it is captured by sentry via logging ? apologies if these are basic silly questions, just trying to get a sense of how to use it best

---

## 2021-02-21 21:51:15 - general channel

**Beeblebrox**

There is a Python library for reading and writing to Google sheets if you really want to go down that route: [https://www.twilio.com/blog/2017/02/an-easy-way-to-read-and-write-to-a-google-spreadsheet-in-python.html](https://www.twilio.com/blog/2017/02/an-easy-way-to-read-and-write-to-a-google-spreadsheet-in-python.html)

---

## 2021-02-21 21:06:18 - general channel

**Pierino S**

ok did not see this Flumine strategies so will load and see how i get on with that one. thks.

---

## 2021-02-21 20:54:47 - general channel

**birchy**

Sounds like hard work to me. Be easier to learn python in the long run, particularly given that you'll need to learn it to be able to develop strategies in bflw/Flumine anyway.

---

## 2021-02-21 20:49:54 - general channel

**Pierino S**

Am wondering if its possible to get it feeding directly into Google Sheets ? Am not at all versed in Python and am confident with Google Sheets. I'm really expert in Excel, but am warming to Google Sheets with all its collaborative and web-based functionality which do out-smart Excel.

---

## 2021-02-21 20:46:52 - general channel

**Pierino S**

Hi how's everyone ? I just downloaded the betfairlightweight and got it working in Python, its all very cool.

---

## 2021-02-21 14:28:13 - general channel

**liam**

TerminationEvent [https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py|https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py](https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py|https://github.com/liampauling/flumine/blob/master/examples/workers/terminate.py)

---

## 2021-02-21 13:03:54 - general channel

**Peter C**

To add on to the list discussion from above, am I right in thinking that if you were adding items to a list and streaming more than one market at once, for example pushing the most recent price from each runner to a list, that each runner[i] from each market would end up in the same list? If so, how do you get round this?

---

## 2021-02-21 12:42:22 - general channel

**river_shah**

sometimes flumine fails to connect (not enough connections available for example). how / where do I set retry timeout please?

---

## 2021-02-20 19:01:06 - issues channel

**liam**

You should use a worker for this as per the example [https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py](https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py)

---

## 2021-02-20 18:16:53 - general channel

**liam**

Not populated when streaming 

---

## 2021-02-20 18:01:59 - issues channel

**liam**

Bflw warning is likely to be network if your CPU is only 15%, the 2s warning is bad, what are you doing that takes 2s???

---

## 2021-02-20 18:00:42 - issues channel

**Angelos**

don’t think it’s possible to split the markets into multiple threads(correct me if i’m wrong) so i’m thinking of creating multiple python runs where i would split the markets in multiple shells

---

## 2021-02-20 17:58:50 - issues channel

**Angelos**

got the same issue today as well. flumine processes everything on a single thread, so if you’ve got a lot of markets to go through, then it might not be able to process everything in less than 2 seconds

---

## 2021-02-20 13:10:24 - random channel

**Jonjonjon**

Does anyone know how to use Python to do transactions on the Cake crypto currency?

---

## 2021-02-19 19:52:19 - general channel

**Oliver Varney**

have you looked at the API documentation: [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listEvents](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listEvents)

---

## 2021-02-19 19:50:23 - general channel

**William Martin**

noob question but I am trying to pull in premier league matches but for the life of me I can't find the ID for the Premier League, is there a place in the betfair documentation that has a list of the different league and market IDs?

---

## 2021-02-19 16:16:31 - general channel

**liam**

mentioned because recently scraping / python has been used, not sure on the profitability of some of the guys on there but probably worth a skim

---

## 2021-02-19 08:10:50 - general channel

**Mo**

All we can definitely say is that zero bets would be problematic

---

## 2021-02-19 06:32:43 - general channel

**liam**

And same with [https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/resources/streamingresources.py#L32|runner](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/resources/streamingresources.py#L32|runner) name 

---

## 2021-02-18 11:27:42 - issues channel

**Alessio**

but flumine does it, no?

---

## 2021-02-18 10:53:33 - general channel

**river_shah**

Thanks for the input [@U0128E7BEHW](@U0128E7BEHW) While the public endpoint is good, I am hesitant to use it. Complexity in terms of data capture, one has to build the data archive over time and it feels that one is always one step away from evoking betfair’s ire. Sometimes throwing money at the problem is a good enough solution (so betgenius can enjoy their monopolistic rent collection).

---

## 2021-02-18 10:49:02 - general channel

**John A**

What’s the delay on in football data, that’s the problem. Is it just someone watching the game on sky?

---

## 2021-02-18 10:38:44 - random channel

**Aaron Smith**

i m far from being a coding expert, but does your IDE effect your output? Its still python generating the output? :thinking_face:

---

## 2021-02-18 10:27:42 - random channel

**Jonjonjon**

So if I update my code to the following, it prints out 2 lines:



```import logging

from pythonjsonlogger import jsonlogger

import time



new_logger = logging.getLogger(__name__)



# This should only get run once

new_logger.setLevel([http://logging.INFO|logging.INFO](http://logging.INFO|logging.INFO))



# formatter = logging.Formatter("%(asctime)s - %(levelname)s - %(message)s")



custom_format = "%(asctime) %(levelname) %(message)"

formatter = jsonlogger.JsonFormatter(custom_format)

formatter.converter = time.gmtime



stream_handler = logging.StreamHandler()

stream_handler.setFormatter(formatter)

new_logger.addHandler(stream_handler)



[http://new_logger.info|new_logger.info](http://new_logger.info|new_logger.info)('hello')```

output:



`{"asctime": "2021-02-18 10:26:36,642", "levelname": "INFO", "message": "hello"}`

`INFO:__main__:hello`



How can I update that to input print out 1 line?

---

## 2021-02-18 08:26:55 - general channel

**Mo**

Use the conflate_ms parameter to set the frequency of streaming updates 

---

## 2021-02-17 14:29:23 - general channel

**liam**

[https://liampauling.github.io/betfair/streaming/|docs](https://liampauling.github.io/betfair/streaming/|docs) not good enough?

---

## 2021-02-17 14:29:08 - general channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2021-02-17 14:28:35 - general channel

**Jon K**

Does anyone know any 'total idiots guide' to streaming using Python based on this page ?

[https://github.com/liampauling/betfair](https://github.com/liampauling/betfair)

---

## 2021-02-17 10:23:01 - general channel

**Jono**

ok no problem, thanks for the help

---

## 2021-02-17 10:21:48 - general channel

**Mo**

Ah right, well some people on here are not Python developers and don't use bflw but I would still expect them to use a library rather than constructing the requests by hand

---

## 2021-02-17 10:20:57 - general channel

**Jono**

was wondering why in your initial replies to my question about account retrieval you said "If you're using bflw..." implying i might be accessing the api some other way

---

## 2021-02-17 10:19:19 - general channel

**Mo**

Never, why can't you just use bflw?

---

## 2021-02-17 10:17:12 - general channel

**Jono**

ah right no problem, also do you ever find yourself manually constructing the the request you send to bf eg:



`{"jsonrpc": "2.0", "method": "SportsAPING/v1.0/listClearedOrders", "params": {"betStatus":"SETTLED", "groupBy":"BET", "betIds": ['bet_id']}, "id": 1}`

---

## 2021-02-17 08:26:14 - general channel

**Angelos**

oh wow. flumine is where i am trying to get at! great work!

---

## 2021-02-17 07:58:50 - general channel

**liam**

This isn’t something we would add to bflw as it is just a wrapper to the API but sounds like something handy for flumine 

---

## 2021-02-16 21:28:21 - general channel

**Jonjonjon**

Has anyone tried using this with flumine backtesting?



[https://medium.com/distributed-computing-with-ray/how-to-scale-python-multiprocessing-to-a-cluster-with-one-line-of-code-d19f242f60ff](https://medium.com/distributed-computing-with-ray/how-to-scale-python-multiprocessing-to-a-cluster-with-one-line-of-code-d19f242f60ff)

---

## 2021-02-16 17:17:14 - general channel

**Angelos**

hey, does anyone know if we got anything that would help in terms of figuring out which runner points at what kind of bet?



ie. i’m working towards creating an enum with all the possible bets and implementing something like this:



```get_odds(market_catalogue, MATCH_ODDS, HOME_WIN, BACK) -&gt; List[PriceSize]```

wonder if the library already has something like this

---

## 2021-02-16 13:25:23 - general channel

**Mo**

And start using streaming

---

## 2021-02-16 13:02:10 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/cache.py#L233|runner](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/cache.py#L233|runner)

---

## 2021-02-16 13:01:52 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/cache.py#L224|market](https://github.com/liampauling/betfair/blob/f370d111d2e7adf1ca4221fc8cc4b028e4b2b2f8/betfairlightweight/streaming/cache.py#L224|market)

---

## 2021-02-16 13:00:22 - general channel

**Robert**

I can see from the streaming that they are not adding up but need to make sense of where this fails.  If its their raw data need to extract an example.

---

## 2021-02-16 12:59:44 - general channel

**Robert**

Im looking at the runner_matched in the historic data.  I asked betfair about why sum runner matched =/= total matched and they asked me to provide example.  Could someone explain to me or point me to documentation to how the data we download from betfair historic works and how you calculate the total_matched and runner_matched from this data.

---

## 2021-02-16 12:43:53 - general channel

**Jon K**

Quick question, I'm just using the following filter to get the best prices:

price_filter = betfairlightweight.filters.price_projection(

    price_data=['EX_BEST_OFFERS']

)



However, if I look on the site itself, they're not the best prices.

I take it, this is Betfairs Cross Matching offering the prices on the site ?

---

## 2021-02-16 08:19:59 - general channel

**Mo**

If you're using bflw then make sure to use lightweight mode

---

## 2021-02-16 08:09:05 - general channel

**Jono**

Morning everyone im trying to access deposit and withdrawal info from various bf accounts. I was wondering the best way to do this. Ideally id like to pull through a list of the recent account transaction information excluding money placed on bets. What is the best way for me to do this? Iterating to test out different end points is taking about an hour an attempt due to things out of my control so was wondering if there is an already established best method. Any help is greatly appreciated Thanks

---

## 2021-02-15 16:42:47 - issues channel

**RicHep**

i used to have a website that finds steamers on betfair and compares to oddchecker, then displays better odds at the bookies, used to make 5-10 grand a month in 2012-2017, you could run up 10k in a ladbrokes account no problem, now it’s impossible

---

## 2021-02-15 14:30:13 - random channel

**river_shah**

does anyone have some tv / streaming viewership numbers for horse racing events please? curious to see what the general viewers like to watch. matched volume is obviously a proxy for viewer interest but I am sure things get skewed by horse traders.

---

## 2021-02-15 09:54:31 - strategies channel

**Michael**

Actually I think that might be the best question: _"Is this sensible?"_ You don't normally need a number for that.

---

## 2021-02-15 08:33:30 - strategies channel

**Michael**

This kind of question comes up a lot but I don't really get why - the answer is always 'just run it with small stakes and find out.' The only scenario where I can see it being important is if you have only a small number of events to bet on (NFL maybe). For something where there are thousands of events stretching off into the future you  can just let time remove doubt and until it's done so there's no reason to scale except for silly human impatience. Rushing to scale is always the wrong call. If you're going to play this game well you need to be calm, level headed and patient. Don't fantasise, don't catastrophise, just wait, and whilst you're waiting; do something else.

---

## 2021-02-15 03:14:49 - general channel

**Sam Asin**

Oh man, I probably need to think about this a bit more just to get to the point where I can follow your explanations well. I may ask ya some more questions later, thanks for trying to explain it to me Misha!

---

## 2021-02-15 03:09:32 - general channel

**Sam Asin**

gotcha, my question about those mechanics was specific to tennis since its the one you know, just trying to be sure i understand it correctly. (bids and offers go away while the ball is in play, being hit back and forth, and then after a point is won, before the next begin, bids and offers come in)

---

## 2021-02-15 03:06:54 - general channel

**Sam Asin**

no worries if i'm asking too many dumb questions haha

---

## 2021-02-14 20:06:59 - general channel

**tobsve**

aha, okey. then I was lucky then as I could find the answer of my question in the log :slightly_smiling_face:

---

## 2021-02-14 19:55:31 - issues channel

**PeterLe**

Well in truth it took a couple of weeks, so unless you really have to, id probably give it a miss.I had an account manager to help sort it out and he was brilliant actually (I didnt have any purchases though)

---

## 2021-02-14 19:53:39 - general channel

**tobsve**

Hi guys! I assume this question has been asked before, but I just can't get a grip on the [https://github.com/liampauling/betfair.git|locale](https://github.com/liampauling/betfair.git|locale) as I am from sweden, i need to change go API request to .se but I just can't understand what variable I should pass with [https://github.com/liampauling/betfair.git|locale](https://github.com/liampauling/betfair.git|locale) Tried with SE, .SE, sweden, swe etc

---

## 2021-02-14 18:32:02 - issues channel

**Newbie99**

(I've only ever tried from Europe if that helps at all)

---

## 2021-02-14 18:07:42 - issues channel

**Jonjonjon**

Has anyone else had the same problem? I'm now wondering if I will have issues if I ever go on holiday abroad.

---

## 2021-02-14 17:04:21 - general channel

**klozovin**

when streaming, what does _bflw_ do if there's no response from Betfair for longer than `heartbeatMs` ?

---

## 2021-02-14 13:57:27 - general channel

**liam**

[https://liampauling.github.io/betfair/streaming/](https://liampauling.github.io/betfair/streaming/)

---

## 2021-02-14 13:56:39 - general channel

**liam**

streaming

---

## 2021-02-13 21:03:58 - general channel

**Newbie99**

[https://github.com/liampauling/flumine/blob/master/flumine/utils.py](https://github.com/liampauling/flumine/blob/master/flumine/utils.py)

---

## 2021-02-13 08:44:25 - general channel

**Stefan**

[@U01NDEXURBK](@U01NDEXURBK) most of developers here use different programming languages. My bots are programmed in C# and F# so .net programming languages, but I use R and python to integrate ML to my F# betfair bots.

---

## 2021-02-13 05:13:07 - general channel

**Misha**

Yes. On using the Python libraries I don't comment, But there is a lot of other general discussion here that is worthwhile, and when you work solo or in a team of two, it's good to see other ideas

---

## 2021-02-13 04:51:05 - general channel

**Ryan**

Are you coding in C#? Most of the discussion here seems to be around python.

---

## 2021-02-11 18:28:03 - issues channel

**AP**

Quick q about submitting a lay order that uses a target payout with flumine. It looks like the size variable is still required to submit an order in that way when I think it’s superseded by the target size variable?

---

## 2021-02-11 12:02:28 - strategies channel

**Jonjonjon**

I'm currently trying to search for a different source of "alpha" that scales better. My inplay research hasn't really borne any fruit. So I might start staring at horse racing prices a long way before races start. Hence my initial question this morning

---

## 2021-02-11 11:58:32 - strategies channel

**Jonjonjon**

I'm pretty sure they have market impact, so plugging them into a flumine backtest would not help.

---

## 2021-02-11 11:53:57 - strategies channel

**Jonjonjon**

I think my automated bots started in 2013, mainly on horse and dogs. It took around 2 years for me to become relatively consistent. As you can tell from my stupid questions, I'm still learning a lot.

---

## 2021-02-11 10:39:30 - strategies channel

**D C**

That is an interesting question but you have to assume "yes" but in ways that would be unknown to all but a very few. Imagine the horse travels badly on the way to the venue and has been upset significantly - this could have a huge impact but might only manifest itself in horse body language later. And that would need to be seen by skilled horse readers and only a few of those would notice it prior to parading.

---

## 2021-02-10 15:18:30 - general channel

**Michael**

Yes I understand that and I've absolutely no notion of how you tackle the US taxation thing. If I were in our shoes I think I'd be a bit concerned about potentially making an entirely legitimate activity open to question by adding layers of complexity. A lot of freelancers have their own limited companies and employ themselves, tax issues aside I'd prefer that to owning the company and hiring the person. Ideally you don't want to own a company that doesn't function like a normal company (customer is also beneficial owner) if you can avoid it.

---

## 2021-02-10 14:48:58 - general channel

**Michael**

You can just hire your help 'retail' [@U01DCR5PXDY](@U01DCR5PXDY) - on occasions when I've hired specialists that's what I've done - it's just a simple free lance contract like getting someone to tile your bathroom.

---

## 2021-02-10 14:06:21 - strategies channel

**Unknown**

The main problem I find is that (real_start-x) is super important in terms of price efficiency, and being able to actually know this would be useful. Liam's post about the race status API is probably the closest one can get to approximating this I guess, though still possibly not precise enough :(

---

## 2021-02-10 13:28:25 - strategies channel

**Aaron Smith**

all good, thanks for preparing me for the problem then :smile:

---

## 2021-02-09 16:55:28 - general channel

**thambie1**

May want to hire some help soon, plus I'm a US citizen which complicates things.

---

## 2021-02-09 16:55:28 - issues channel

**liam**

so `logging` as set up per the examples will tell you what is happening/happened, loggingcontrol is for storing order/market/trade data in a csv/database/api but has it its limitations in that you need to wait for market closure for a few of the functions to be called.



It sounds like you just want logs?

---

## 2021-02-09 16:14:24 - issues channel

**ricky**

I used backtestloggingcontrol from the example,



When i run flumine to place a bet, i want to check if my bet matched/umatched in betfair website.

Without waitting for market close, is there a way to check price_matched, size_matched for immediate feedback?



I tried add def _process_order(self, event) in backtestloggingcontrol, but "price_matched", "size_matched" field is not accurate from _process_order, sometime work sometime not.

---

## 2021-02-09 11:14:19 - issues channel

**ricky**

Sorry if it have been asked before,

The default conflate_ms is None, but what is the betfair cycle time (how quick betfair can push an update to flumine)?

---

## 2021-02-09 10:44:33 - issues channel

**liam**

streaming_timeout should be used on quiet markets [https://liampauling.github.io/flumine/advanced/#parameters](https://liampauling.github.io/flumine/advanced/#parameters)

---

## 2021-02-09 10:43:09 - issues channel

**ricky**

i am not sure what streaming_timeout  does? but should i use both conflate_ms = 2000, and streaming_timeout = 2 to reduce the warning?

---

## 2021-02-09 10:32:12 - issues channel

**liam**

and your using flumine to place the order?

---

## 2021-02-09 09:53:50 - issues channel

**ricky**

System clock synchronized: yes (via timedatectl command)

i have two flumine instances running at the same time, CPU loading could reach 40% for one instance.

These are the only two tasks running in VM.

---

## 2021-02-08 15:40:26 - general channel

**Mo**

[https://github.com/liampauling/flumine/blob/0b0bb9d8b7a2ca94c05996284692bccaede679c1/flumine/utils.py#L103-L113](https://github.com/liampauling/flumine/blob/0b0bb9d8b7a2ca94c05996284692bccaede679c1/flumine/utils.py#L103-L113)

---

## 2021-02-08 15:32:19 - general channel

**Jon K**

Hi all, Just got back into programming strategies using the Betfair API after a 10 year absence :slightly_smiling_face:

Quick question, is there a simple way of adding / subtracting tick values via the API ?

I remember I used to have a function that I could send any number at and say round up/down so e.g. if I sent it 5.07 it would send back 5.1 (as that is an accepted tick value for Betfair).

I don't really want to re-invent the wheel again if this functionality now exists via the API, any ideas ?

---

## 2021-02-08 14:28:56 - general channel

**liam**

use docker and it will be fine, but yeah you would have to

```flumine.config.hostname = "myuniqueuuid"```

---

## 2021-02-08 14:04:40 - general channel

**liam**

available by default when running under a different [https://github.com/liampauling/flumine/blob/0b0bb9d8b7a2ca94c05996284692bccaede679c1/flumine/config.py#L8|host](https://github.com/liampauling/flumine/blob/0b0bb9d8b7a2ca94c05996284692bccaede679c1/flumine/config.py#L8|host)

---

## 2021-02-08 13:57:22 - general channel

**Aaron Smith**

how do i go about running 2 instances of flumine?

---

## 2021-02-08 13:05:39 - strategies channel

**Michael**

No. You set probability to 1/your matched odds. That's what [@UBS7QANF3](@UBS7QANF3) means by step 1. You don't need to concern yourself with other runners. To be honest; it looks like your understanding of basic probability is very weak. You will need to improve that to make any headway with this kind of thing so I'd suggest you start there rather than worrying about the significance of your results. Knowing that they are or aren't significant probably won't help you with anything anyway.

---

## 2021-02-08 12:23:36 - strategies channel

**liam**

Aka Monte Carlo simulation, [@UBS7QANF3](@UBS7QANF3) do you have something developed in python for this to hand?

---

## 2021-02-08 12:09:41 - random channel

**D C**

Don't get me wrong, I keep a close eye on Augur platform. How is the market outcome resolved on Wager platform??

---

## 2021-02-08 12:06:14 - random channel

**D C**

DOGE is shit everyone knows that. But this is part of the problem - you place a bet and your winnings could be eroded or augmented based on market sentiment.

---

## 2021-02-07 23:00:20 - random channel

**MacrcoPolo**

I know someone who moved over just after Christmas with help from their company - it's not impossible

---

## 2021-02-07 16:25:22 - strategies channel

**Jonjonjon**

Has anyone had success with using the favourite as an indicator for inplay horse racing?



I have been focussing my analysis on looking at inplay racing, when the odds are very volatile, which I have defined as (sum(1/[low price])&gt;X, where X is some parameter greater than 1.0. But this filter is not really helping. I get great in-sample results but awful out-of-sample results.

---

## 2021-02-07 14:59:22 - random channel

**D C**

I've been told that my problem with Wolves is "not uncommon".

---

## 2021-02-06 10:56:28 - general channel

**Misha**

Shows that there are many ways to approach the same problem :wink:

---

## 2021-02-05 18:51:24 - issues channel

**liam**

I would try creating a bflw stream and bump the timeout to see if that is he issue 

---

## 2021-02-05 16:32:00 - strategies channel

**Oliver Varney**

just to clarify [@U016TGY3676](@U016TGY3676) me and [@U4H19D1D2](@U4H19D1D2) were talking about two different things confusing each other, I didnt phrase my initial response very well, apologies. basically I change  the customer_order_ref property on the order class, and encode internal information that can be linked back to IDs in my database. Therefore can rebuild the trade if necessary directly from betfair. I think best practice however is to use logging.

---

## 2021-02-05 16:29:54 - strategies channel

**AP**

Because flumine puts the name hash in the order ref 

---

## 2021-02-05 15:15:20 - strategies channel

**birchy**

And presumably you then have some framework to re-run "what-if" type questions against data from MarketRecorder?

---

## 2021-02-05 15:11:26 - strategies channel

**birchy**

And therein lies the problem, I want to save enough data to be useful but also avoid finding out in 3 months that I've missed something crucial. :grinning:

---

## 2021-02-05 15:02:30 - strategies channel

**birchy**

Don't suppose you have some code available for that? Undecided on what format to use (CSV, database, pickle, etc)?

---

## 2021-02-05 13:52:19 - strategies channel

**liam**

You then change [https://github.com/liampauling/flumine/blob/3b819f5370499ccb249edcd3bb21fbaa7f4ba6f6/flumine/streams/orderstream.py#L28|this](https://github.com/liampauling/flumine/blob/3b819f5370499ccb249edcd3bb21fbaa7f4ba6f6/flumine/streams/orderstream.py#L28|this) as well?

---

## 2021-02-05 13:47:19 - strategies channel

**birchy**

OK. Am implementing polling listClearedOrders to get history and was going to use that for identifying the strategies. It's fine for my own frameworks, but not the Flumine ones.

---

## 2021-02-05 13:39:52 - strategies channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) is this used internally by Flumine? i.e. can it be changed by users?

[https://github.com/liampauling/flumine/blob/3b819f5370499ccb249edcd3bb21fbaa7f4ba6f6/flumine/order/orderpackage.py#L49](https://github.com/liampauling/flumine/blob/3b819f5370499ccb249edcd3bb21fbaa7f4ba6f6/flumine/order/orderpackage.py#L49)

---

## 2021-02-05 01:09:41 - general channel

**Paul McMahon**

Hi all, new kid question - I’ve been looking at a variety of different options, and I think i’ve settled on getting my own app key. I understand the cost is 200 quid - My query is how much “testing” and “development” against the delayed interface needs to be done before them handing over the real-time key?

---

## 2021-02-04 18:58:05 - issues channel

**river_shah**

works from inside a docker container on the same host…wondering if I blew something in an openssl update (same code between container and host so I think problem resides in base os)

---

## 2021-02-04 13:20:14 - issues channel

**mandelbot**

bflw 2.11.1

---

## 2021-02-04 13:20:06 - issues channel

**liam**

bflw?

---

## 2021-02-04 13:19:46 - issues channel

**mandelbot**

flumine 1.15.3

---

## 2021-02-04 13:16:56 - issues channel

**mandelbot**

Absolutely nothing, straight out of the box flumine and bflw

---

## 2021-02-04 10:35:01 - strategies channel

**Jonjonjon**

Yes, thanks Michael, it's the more relevant number for my question.

---

## 2021-02-04 10:08:02 - strategies channel

**liam**

i average around 50%, the problem with 1% is that you will really struggle to scale / market capacity is likely to kill you

---

## 2021-02-04 09:02:16 - general channel

**Newbie99**

[@U016535QCJ2](@U016535QCJ2) yes good point, I had forgotten about that, also switching away from Chrome helped (but that might just be something on my local machine), other browsers seem to work better (e.g. Brave, even Edge)!

---

## 2021-02-04 07:00:21 - general channel

**Mo**

Yeah I had problems with the US president market but using average odds made them go away

---

## 2021-02-04 00:42:01 - random channel

**Misha**

1. The Betfair API does have information about injuries (but no WTA at the moment, and I don't think it covers the Australian season)

---

## 2021-02-04 00:41:02 - random channel

**Misha**

So to answer the questions directly:

---

## 2021-02-04 00:30:00 - general channel

**Sam Asin**

unfortunately for now that's the only way I'm manually doing trades, sometimes I have a bflw code that does stuff but sometimes i just wanna make hand decisions.

---

## 2021-02-03 16:49:34 - issues channel

**liam**

assuming this log is from [https://github.com/liampauling/flumine/blob/dff610d5929d1c98cd39aa57ae1cab05ca7c4a87/flumine/execution/betfairexecution.py#L66|here](https://github.com/liampauling/flumine/blob/dff610d5929d1c98cd39aa57ae1cab05ca7c4a87/flumine/execution/betfairexecution.py#L66|here) it is because the `order.status` hasn't been updated yet, ie the update from order stream hasn't come through. Currently use that as the golden source however happy to discuss changing this

---

## 2021-02-03 15:07:11 - strategies channel

**Alessio**

I guess that's one problem with this whole shebang: there's only one company, and you are a "marginal case" for regulators most of the time

---

## 2021-02-03 13:12:55 - random channel

**Robert**

as a more general point: lets say I want to get hold of a dataset for UK horse racing (e.g historical sectional data) and its not easily accessible online.  But I suspect someone out there may have collected this data.  Does anyone have any tips or contacts who might be able to help with this?

---

## 2021-02-03 12:34:20 - random channel

**liam**

I see [https://apply.workable.com/longshot-systems-ltd/j/DC5582D1E0/|longshot systems](https://apply.workable.com/longshot-systems-ltd/j/DC5582D1E0/|longshot systems) are hiring, not sure if anyone on here works for them? / I wonder if they use bflw?

---

## 2021-02-03 12:32:03 - strategies channel

**Michael**

[@U01A3B4SBDZ](@U01A3B4SBDZ)is your income being legally questioned in some way? If so what country are you in?

---

## 2021-02-03 12:25:54 - strategies channel

**jp**

Yes, I have a 10-12 year history of bets, out of which the last 7-8 years are stored in a database, so a lot of data for statistics in there.

---

## 2021-02-03 09:59:57 - random channel

**Newbie99**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1610917619044400](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1610917619044400)

---

## 2021-02-03 08:35:57 - random channel

**Alessio**

Yes that's very distilled experience. The book is a bit "arrogant" i'd say, i.e. it sounds like "these are the problems you will find, here is THE MIGHTY SOLUTION"

---

## 2021-02-02 09:29:00 - issues channel

**liam**

Note this is becoming a lot cleaner in the PR mentioned [https://betfairlightweight.slack.com/archives/C4H05ML2E/p1612194646142600|here](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1612194646142600|here)

---

## 2021-02-01 17:21:58 - general channel

**birchy**

That would be a decent tool for the bflw/flumine examples

---

## 2021-02-01 15:50:46 - issues channel

**liam**

[@U016TGY3676](@U016TGY3676) refactor [https://github.com/liampauling/flumine/pull/371|here](https://github.com/liampauling/flumine/pull/371|here) I am seeing a 10x decrease in CPU usage when subscribed to 1000+ markets but not fully tested yet and a pretty major refactor so be careful

---

## 2021-01-31 10:58:25 - strategies channel

**Oliver Varney**

good explanation kind of what I was getting at [@U01DVUAE2G1](@U01DVUAE2G1). [@UUE6E1LA1](@UUE6E1LA1) yes 100% agree, just something ive run into now as a result of flumine providing the facility / framework to easily add more and more strategies. Long term all strategies are +EV.

---

## 2021-01-31 10:31:47 - strategies channel

**Aaron Smith**

How would you approach the same question if you had 1 strat with high variance? Probably (depending on your risk aversity and your bank account) you wouldnt go all in on a high risk strat. If you have a solution to the problem for 1 strat, you could view your correlated strats as 1 and apply same solution. For example you can share max_runner_exposure between the two

---

## 2021-01-30 17:16:22 - issues channel

**Jorge**

Understood, well for me it works to get it from current_orders.streaming_update['id'] everytime I need it

---

## 2021-01-30 17:13:52 - issues channel

**liam**

Well for streaming it makes sense so we could add it but wouldn’t want it on the resource as it would confuse those who use polling and see it as None all the time and could theoretically contain multiple markets orders 

---

## 2021-01-30 17:07:41 - issues channel

**Jorge**

Hi, when Streaming Orders, what is the best way to get the market_id from a CurrentOrders object? I am currently extracting in from current_orders.streaming_update['id'].

---

## 2021-01-30 12:37:10 - issues channel

**Dave**

If flumine had a multi-process mode, would be awesome.

---

## 2021-01-30 12:28:46 - issues channel

**liam**

Did that upgrade help?

---

## 2021-01-30 12:08:00 - issues channel

**liam**

the problem is that it was designed to group orders together into a single request where possible, this is fine for my use case/strategies but not great if you want to process a lot of markets

---

## 2021-01-30 12:03:06 - issues channel

**liam**

so resource creation/processing is, the problem is that on every update the main thread checks every market to see if there are orders to process, this is fine when you have &lt;250 markets but the problem becomes O(n2)

---

## 2021-01-30 11:42:59 - issues channel

**Misha**

It's possible to process a lot of markets, but you have to be super-efficient and do very little in the main processing thread. I'm not sure how Flumine is architected, but I tend to allocate pre-processing of the stream to other threads

---

## 2021-01-30 11:39:59 - issues channel

**liam**

come monday that CPU should be much lower as I am going to refactor the order execution logic, out of interest what version of bflw are you using?

---

## 2021-01-30 11:09:28 - issues channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) possibly, but I'm aiming for 10+ sports and would need different filters for each sport. I'd probably be better off making this a polling bot and calling markets list and caching the IDs I want to keep. My CPU is already at 80% with 10 second conflated streaming and I've only added 2 sports. :rolling_on_the_floor_laughing: 

Can now see the limitations of streaming vs polling, which presumably is why Betfair still have both available.

---

## 2021-01-29 20:03:25 - general channel

**Dave**

Lack of delay for passive should help!

---

## 2021-01-29 12:22:58 - general channel

**Oliver Varney**

probably been asked before but i cant find it in the search, but in flumine on backtesting is there a function / attribute for profit?

---

## 2021-01-29 09:02:53 - general channel

**Misha**

I got an exact total from my database of full results, and also from parsing all steam data from 2015

---

## 2021-01-28 18:43:38 - general channel

**Robert**

for the old data I have runner total_matched which is too small compared to the market total_matched (but dont see this problem with recent data)

---

## 2021-01-28 17:43:49 - strategies channel

**Michael**

....but again that's problematic because you only run out of appetite in certain types of market.

---

## 2021-01-28 17:38:49 - strategies channel

**Michael**

It's the most crazy making problem we face.

---

## 2021-01-28 17:01:55 - strategies channel

**Jonjonjon**

I just use Python's random number generator, as I don't know if there is any pattern in the final digit

---

## 2021-01-28 16:51:46 - general channel

**Robert**

thanks for the help

---

## 2021-01-28 15:27:42 - general channel

**liam**

how are you parsing this? bflw?

---

## 2021-01-28 13:22:35 - general channel

**Alessio**

also, frequent scoring, the scarcity of goals in soccer is an interesting problem

---

## 2021-01-28 10:23:09 - general channel

**thambie1**

One thing I've gathered is that they're more concerned with rest API usage than streaming API. So focusing your scraping on streaming is likely safer.

---

## 2021-01-28 09:58:12 - general channel

**Jono**

anything in the documentation that states exactly what you can and cant get away with in terms of retrieving the odds or pinging the api?

---

## 2021-01-28 09:19:20 - issues channel

**Lee**

have a look at how flumine uses `max_order_exposure` and `max_selection_exposure`

---

## 2021-01-28 09:05:50 - issues channel

**thambie1**

pretty nice... gotta read some more flumine code tomorrow :slightly_smiling_face:

---

## 2021-01-28 09:04:55 - issues channel

**liam**

flumine does, not sure it has ever fatally crashed

---

## 2021-01-27 19:59:35 - random channel

**MacrcoPolo**

same question about their natural gas

---

## 2021-01-27 19:59:18 - random channel

**Unknown**

if it helps:

---

## 2021-01-27 19:55:42 - random channel

**Newbie99**

Have you had problems with IG out of curiosity, or is it just the offering?

---

## 2021-01-27 19:45:57 - random channel

**Newbie99**

IG Index have an API too (streaming for Indices &amp; commodities + equities on request) and REST for everything else.



The tax implications are probably more relevant for financial markets, plus of course leverage (i.e. do you self declare as a professional and get greater leverage but lose guaranteed stop loss protection, for example).

---

## 2021-01-27 16:44:22 - random channel

**Jonjonjon**

It could be answer to the question of what to do with Betfair winnings.

---

## 2021-01-27 09:56:53 - general channel

**Misha**

It was for a client, so when I moved on, the client kept the database

---

## 2021-01-27 09:48:46 - general channel

**Misha**

My first "foray" into sports stats was building a cricket stats database back in 2004. I had a database of every bit of data you could get from Test and ODI scoreboards, going back to the first Test in 1876 and the first ODI

---

## 2021-01-25 09:42:29 - strategies channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) what's the thinking behind using the middle price from the previous update, rather than the current middle? [https://github.com/liampauling/flumine/blob/051d71304dfc9a8fdf6bc309a9e03cb22c6d8494/flumine/markets/middleware.py#L170](https://github.com/liampauling/flumine/blob/051d71304dfc9a8fdf6bc309a9e03cb22c6d8494/flumine/markets/middleware.py#L170)

---

## 2021-01-25 09:23:34 - general channel

**liam**

now released [https://github.com/liampauling/flumine/blob/master/HISTORY.rst#1160-2021-01-25|1.16.0](https://github.com/liampauling/flumine/blob/master/HISTORY.rst#1160-2021-01-25|1.16.0) (test first)

---

## 2021-01-25 08:39:02 - general channel

**Jonjonjon**

Is it compatible with the latest flumine?

---

## 2021-01-24 16:52:29 - general channel

**river_shah**

cheers to [@U4H19D1D2](@U4H19D1D2) and all other contributors. before flumine, writing a robust strat from scratch was months. now it is a week (if you already have the business logic ideas worked out that is)

---

## 2021-01-24 16:46:37 - general channel

**Taking Value**

Can I just check what the different intended functions is of bflw vs flumine. Broadly speaking is it that bflw is for data collection and that flumine is for placing orders and logging those orders?

---

## 2021-01-24 13:58:34 - general channel

**liam**

You can get that from bflw as well in metadata 

---

## 2021-01-23 15:02:25 - issues channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) I'm developing my first Flumine middleware. Just to confirm, if I want to add runner info to the market, is it correct to add it to `market.context` , or should it be added somewhere else? Can middleware add data to a `RunnerBook` ?

---

## 2021-01-23 13:42:09 - general channel

**thambie1**

Ah, time to read some flumine code :slightly_smiling_face:

---

## 2021-01-23 13:41:53 - general channel

**Mo**

I was just asking because I believe flumine takes care of getting the market catalogues for you

---

## 2021-01-23 13:41:28 - general channel

**thambie1**

Curious though, what in the above message tipped you off to me not using flumine?

---

## 2021-01-23 13:23:46 - general channel

**thambie1**

Wrote my own before I found out about bflw/flumine

---

## 2021-01-23 13:23:11 - general channel

**Mo**

You’re not using flumine?

---

## 2021-01-22 17:06:46 - general channel

**thambie1**

Thanks jptrader! Gonna have to start making listMarketCatalogue requests then. Follow up question, is making 100 simultaneous rest api requests considered bad behavior?

---

## 2021-01-21 23:27:20 - random channel

**Misha**

To get it right I parsed the lot, over and over again, putting the data in a database checking, updating, then doing it again

---

## 2021-01-21 16:46:24 - general channel

**Mo**

bflw doesn't use the application key for that endpoint does it?

---

## 2021-01-21 15:24:46 - issues channel

**Jonjonjon**

[@UE72WCRR8](@UE72WCRR8) Yes, I use Flumine. And [@U4H19D1D2](@U4H19D1D2) already pointed out that the problem I had is probably unrelated to yours.

---

## 2021-01-21 15:19:47 - issues channel

**liam**

is it exactly as per the bflw example?

---

## 2021-01-21 15:19:40 - issues channel

**jhaa**

[@UN1497LJC](@UN1497LJC) is that flumine? I use plain bflw.

---

## 2021-01-21 15:02:32 - issues channel

**liam**

sharing the code might help us guess

---

## 2021-01-21 13:34:25 - issues channel

**Lee**

no problem for me either

---

## 2021-01-21 13:33:51 - issues channel

**D C**

no problems for me in the last at lingfield

---

## 2021-01-21 11:18:31 - strategies channel

**Alessio**

(the real problem is taxes :D)

---

## 2021-01-21 11:17:22 - strategies channel

**river_shah**

That being said throwing money at the problem also has constraints. Been in plenty of interviews with candidates from deep mind etc who with a straight face expect a huge sign on bonus having zero experience in finance or any provable commercial success

---

## 2021-01-21 09:46:03 - strategies channel

**liam**

its user configurable in flumine with a `streaming_timeout` var which snaps the cache

---

## 2021-01-21 09:24:03 - strategies channel

**liam**

example here of how we raise a logging warning [https://github.com/liampauling/flumine/blob/051d71304dfc9a8fdf6bc309a9e03cb22c6d8494/flumine/baseflumine.py#L119](https://github.com/liampauling/flumine/blob/051d71304dfc9a8fdf6bc309a9e03cb22c6d8494/flumine/baseflumine.py#L119)

---

## 2021-01-21 09:19:26 - strategies channel

**Jonjonjon**

The time between the streaming update being sent from Betfair, and my code in `process_market_book` being able to process it.

---

## 2021-01-21 06:53:05 - general channel

**Misha**

To run two market strategies (different markets) do you need two instances of flumine?

---

## 2021-01-21 06:50:53 - general channel

**Misha**

The question was about using 2 connections per market set (if I got that right), so you can be subscribing to 5 sets of markets

---

## 2021-01-21 06:45:52 - general channel

**Misha**

Not sure what the question is - can you expand?

---

## 2021-01-20 18:51:16 - random channel

**Mo**

Don’t get too excited I’m not sure it will solve your point by point data problems 

---

## 2021-01-20 17:41:18 - strategies channel

**Chris**

[@UUE6E1LA1](@UUE6E1LA1) the larger stake/bankroll customers get matched at the higher prices and then scales downwards to smaller bankrolls/stake amounts. This is what I was told by someone who has trialed it on a modest bankroll that it wasn’t really worth it as the bigger edges are gobbled up by the whales 

---

## 2021-01-20 17:20:35 - general channel

**river_shah**

Sorry Liam, I am being dense here. Could you please expand on what this means? `MarketStream` uses one socket and `OrderStream` another and one instance of flumine will then take two connections?

---

## 2021-01-20 16:54:52 - random channel

**Jonjonjon**

[@U4H19D1D2](@U4H19D1D2) By patch, do you mean doing something on my side instead of making a change to the bflw codebase? Something like this?

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1608035327035400?thread_ts=1608012009.025500&amp;cid=C4HL6EZTQ](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1608035327035400?thread_ts=1608012009.025500&amp;cid=C4HL6EZTQ)

---

## 2021-01-20 15:15:29 - random channel

**Jonjonjon**

Has anyone had problems with overheating hard drives?



I have a Samsung Evo 970 plus NVME. And 3950X cpu. I'm using it to backtest with Flumine on 32 cores.



So when that happens, my machine is looping through 32 files at the same time. And the NVME gets to over 70C.



I'm wondering if it could be better to load the full files to RAM, and then iterate over them from RAM. This will obviously use more RAM, but the files are smaller anyway. Perhaps the user could specify which method they want to use?



What do you think [@U4H19D1D2](@U4H19D1D2)?



This is the bit that I'm thinking of refactoring: [https://github.com/liampauling/betfair/blob/10b268673923dcfaf3847b28ddcd963f775661c5/betfairlightweight/streaming/betfairstream.py#L331-L356](https://github.com/liampauling/betfair/blob/10b268673923dcfaf3847b28ddcd963f775661c5/betfairlightweight/streaming/betfairstream.py#L331-L356)

---

## 2021-01-20 12:39:05 - general channel

**D C**

Yes I get that quite a bit. It's not a problem as I was assuming that any cancellation call would count. But that said if I cancel a batch of 50 and they have all matched that counts as 50 towards the total if I understand correctly. I will have to adjust my code to not count if bet cancelled successfully and to count for each failure within a batch response. I suppose a partial match still counts as a successful cancellation?

---

## 2021-01-19 19:12:55 - issues channel

**liam**

Cheers, I think we are always going to have problems with these undocumented endpoints and resource creation, lightweight mode gets around this of course but raw dicts aren’t for everyone 

---

## 2021-01-19 08:57:21 - general channel

**river_shah**

does flumine support async order_package handling? is doing this sufficient to get async behaviour but still keep all risk and blotter objects in good state?

```order_package.async_ = True

self.handler_queue.put(order_package)```



---

## 2021-01-18 18:35:36 - issues channel

**liam**

So where are your certs? I guess not in /certs as per the bflw example?

---

## 2021-01-18 18:35:11 - issues channel

**Diniz**

with the same arguments I'm passing to bflw

---

## 2021-01-18 18:05:11 - issues channel

**liam**

Python version? OS? Are you getting this on login?

---

## 2021-01-18 17:50:00 - general channel

**Matthieu Labour**

Hi, I am looking for guidance in flumine again.

`MarketBook` has a list of `RunnerBook`

`MarketBook` has `MarketDefinition`. `MarketDefinition` has a list of `MarketDefinitionRunner`

`MarketDefinitionRunner` has `name` but `RunnerBook` does not.

Hence when one wants to retrieve a `RunnerBook` by `name`, one has to first retrieve the runner in the list of `MarketDefinitionRunner` then use the `selection_id` (should we use the handicap too?) to retrieve the `RunnerBook`. Is it correct? Thank you!

---

## 2021-01-18 12:30:17 - issues channel

**Jorge**

Well, the size of my python lists (as returned from pympler) increases non-stop (for ex. 500MB after 1 hour of running the process). But I guess some of these are being removed?

---

## 2021-01-18 11:55:07 - issues channel

**Jorge**

I had this problem before using bflw so it is most probably not that. It is stable, but a single process takes up to 80MB RAM for me, and I am not storing big amounts of data so I want to optimize it...

---

## 2021-01-18 10:18:39 - general channel

**river_shah**

how to I request betfair to disconnect all of my api connections please? seems like two connections are stuck in a bad state

---

## 2021-01-18 10:06:34 - general channel

**azevedo**

Hey guys! What’s the best way to deal with voided bets inplay? (e.g. when Betfair fails to suspend on a red card in football and then voids some bets while still inplay) 

Does something come through in streaming?

---

## 2021-01-18 05:47:45 - issues channel

**liam**

Are you able to login with bflw ok?

---

## 2021-01-15 18:35:43 - random channel

**liam**

[https://github.com/liampauling/flumine/blob/2adcd24379e07dfc1a017ffcc7895d99102814ee/flumine/order/order.py#L223|https://github.com/liampauling/flumine/blob/2adcd24379e07dfc1a017ffcc7895d99102814ee/flumine/order/order.py#L223](https://github.com/liampauling/flumine/blob/2adcd24379e07dfc1a017ffcc7895d99102814ee/flumine/order/order.py#L223|https://github.com/liampauling/flumine/blob/2adcd24379e07dfc1a017ffcc7895d99102814ee/flumine/order/order.py#L223)

---

## 2021-01-15 17:50:57 - general channel

**Aaron Smith**

hey guys, quick question: whats the market_type for the AvB market in horse racing? cant seem to find it somehow

---

## 2021-01-15 14:12:52 - strategies channel

**Unknown**

Not read that one; I was going to suggest this for in-running football: [https://betfairlightweight.slack.com/files/UBS7QANF3/F010A4MK9MY/dixon1998.pdf](https://betfairlightweight.slack.com/files/UBS7QANF3/F010A4MK9MY/dixon1998.pdf) although treating time as discrete and using a Markov chain simplifies the math significantly

---

## 2021-01-15 13:27:20 - general channel

**JC**

Yeah was looking to group all the updates that occur within an interval, and checking there wasn’t a flumine way. No worries will work something out 

---

## 2021-01-15 12:37:28 - general channel

**JC**

Ok so there’s not a way to handle it in flumine? 

---

## 2021-01-15 11:34:36 - random channel

**D C**

You just feel that bookies know full well who the problem gamblers are but are currently allowed to pretend that they don't and let it slide. Ultimately though, only a problem gambler themself can make that decision to seek help.

---

## 2021-01-15 11:09:55 - random channel

**James T**

Yeah, that’s talked about a bit in the “unintended consequences” section - that people might just move to black markets for example. I think anything related to addictions is a tricky problem to solve. 

---

## 2021-01-15 11:03:07 - random channel

**D C**

At the end of the day, if people are genuinely addicted to gambling they will find a way to do it. Be it some dodgy bitcoin casino or worse. Encouraging people to seek help and getting bookies to flag problem accounts and act on it has to be better. After all, they already KNOW about most of these problem accounts but are clearly allowed to get away with doing nothing about it (other than target them with free bet offers and other stuff that fuels addiction).

---

## 2021-01-15 02:01:27 - strategies channel

**birchy**

Good to hear some confirmation of what I'd concluded myself after trying a few indicators over the years. My own 'indicators' are basically combinations of `IF n &gt; x`  type statements.

Going back to the stats conversation from earlier, I'd like to start off investigating linear regression. What libraries are recommended? NumPy?

---

## 2021-01-14 23:42:02 - random channel

**James T**

Just in case people aren’t aware, there’s a Gambling Commission public consultation on gambling harm and interventions going on. Here’s a link in case anyone wants to make their own comments (you don’t have to answer all questions, but you may find page 7 or 11 relevant for example):



[https://consult.gamblingcommission.gov.uk/author/remote-customer-interaction-consultation-and-call|https://consult.gamblingcommission.gov.uk/author/remote-customer-interaction-consultation-and-call](https://consult.gamblingcommission.gov.uk/author/remote-customer-interaction-consultation-and-call|https://consult.gamblingcommission.gov.uk/author/remote-customer-interaction-consultation-and-call)

---

## 2021-01-14 17:23:24 - strategies channel

**Crofty**

9 pints of scrimmy!



When I was at school, if you weren't good at a subject, you generally didn't get the attention you needed. Now I'm in a situation where maths would be really helpful, it would be great to be able to have resources that simplify it right down.

---

## 2021-01-14 08:50:37 - general channel

**liam**

Flumine 

---

## 2021-01-14 08:50:34 - general channel

**Unknown**

Is this in betfairlightweight Streaming or flumine?

---

## 2021-01-14 08:47:24 - strategies channel

**Christian Tox**

Maybe check out fastai. I am a big fan.. some emphasis on how to read academic papers too 



[https://www.fast.ai|https://www.fast.ai](https://www.fast.ai|https://www.fast.ai)

---

## 2021-01-14 08:34:20 - strategies channel

**Unknown**

HR: [https://betfairlightweight.slack.com/files/UBS7QANF3/FV582N4CE/lessmann2010.pdf](https://betfairlightweight.slack.com/files/UBS7QANF3/FV582N4CE/lessmann2010.pdf)



Tennis: [http://www.strategicgames.com.au/PhD.pdf](http://www.strategicgames.com.au/PhD.pdf)

---

## 2021-01-14 08:34:08 - general channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) used to do that when I was using my own none-streaming library. My bots would get the mc as json/dict at init, then only update on a version change. The mc is not really mission critical, it's only useful for initial market filtering.

---

## 2021-01-14 08:28:36 - strategies channel

**birchy**

Yeah, I agree that there's no direct correlation between SLOC and £££. Hell, I've coded loads of 10 liners over the years that could empty my account funds in a matter of minutes. :joy: The question was more of a "can it be done".

---

## 2021-01-14 07:15:01 - strategies channel

**Mo**

I'm sure if you asked for help understanding a specific paper you'd get some feedback (even if it's just from me :joy:)

---

## 2021-01-13 20:54:02 - strategies channel

**John A**

Question for Academics “If you’re so smart, why aren’t you rich?” 

---

## 2021-01-13 14:16:49 - issues channel

**river_shah**

Thanks [@UBS7QANF3](@UBS7QANF3) Appreciate your help as always

---

## 2021-01-13 14:07:26 - issues channel

**Mo**

That is the filter for virtual prices but you can request EX_ALL_OFFERS and EX_BEST_OFFERS_DISP simultaneously; if your prices file contains both then bflw will prioritise the *non-virtual prices*

---

## 2021-01-13 13:57:35 - issues channel

**Oliver Varney**

can someone confirm what the streaming_market_data_filter would be for the betfair pro files. [@UBS7QANF3](@UBS7QANF3) you said their volumes were non virtual right ?

---

## 2021-01-12 12:48:02 - general channel

**Matthieu Labour**

Haha. Ok. Let’s say I have a prediction engine that runs outside of flumine and wants to trigger an order through flumine. How would you recommend the recommendation engine to send messages to Flumine?

---

## 2021-01-12 09:46:15 - general channel

**Carsten**

really appreciate all the help liam. :pray:  on top of all this, im also learning a ton. :slightly_smiling_face:

---

## 2021-01-12 09:20:47 - general channel

**liam**

do you know how to use dev tools in your browser?

---

## 2021-01-12 09:16:34 - general channel

**Carsten**

sorry if its noob questions. :disappointed:  Should i have a automated beting program access on the website ?

---

## 2021-01-12 08:38:12 - general channel

**Carsten**

[@U4H19D1D2](@U4H19D1D2) Just tried without certificate. Using betfairlightweight i get a 200 SUCCES in response.  In script it then looks for this: session_token = re.findall(

    "ssoid=(.*?);", resp.headers["Set-Cookie"]

My response in headers - set-cookie is:

wsid=********-54b0-11eb-b2c0-********; Domain=.[http://betfair.com|betfair.com](http://betfair.com|betfair.com); Path=/, vid=********-54b0-11eb-b2c0-*********; Domain=.[http://betfair.com|betfair.com](http://betfair.com|betfair.com); Expires=Wed, 12-Jan-2022 08:29:16 GMT; Path=/

Just changed some of the ID to ***.. Dont know if they are personal

---

## 2021-01-11 19:32:05 - general channel

**Carsten**

Hi everyone Im new in here. Just started out exploring the betfair api. Im not an experienced programmer either, but do know my basic python, and a bit of api as well. Being from Denmark there is some special things that need to be done. Trying to follow the guide to Non-interactive, but having trouble with the certifications.  Failing for me here: *Create a certificate signing request (CSR..  Also trying one of the scripts from the forum, that should be good to go, but i dont get a ssoid in my response.. Hope someone is able to help and guide me in the right direction.* 

---

## 2021-01-11 10:55:55 - general channel

**Dilla**

I mean the website. I don't know how to code yet:)



Enetpulse used to be always worse at Grand Slam tournaments

---

## 2021-01-11 10:29:06 - general channel

**river_shah**

my base image is `FROM python:3.7`

---

## 2021-01-11 10:28:24 - general channel

**river_shah**

login to betfair fails for me when using docker (no problems using local host / am providing the certs inside docker through mount). has anyone using docker seen this please?

---

## 2021-01-10 19:18:27 - strategies channel

**liam**

I have this predicament quite a lot but if the market has capacity just hit it with both and just optimise as time goes on, obviously this isn’t that simple if they are working off the same signals and likely to start impacting each other from a feedback / matching point of view. But I assume with football / low odds you won’t have this problem anyway?

---

## 2021-01-10 17:39:13 - strategies channel

**Michael**

^ above refers to [@U0128E7BEHW](@U0128E7BEHW)'s original question.

---

## 2021-01-10 14:59:28 - general channel

**river_shah**

question for horse traders please: which months should I censor over the past 12 months as not being representative of typical market behaviour / liable to break backtests due to covid

---

## 2021-01-09 17:44:59 - general channel

**thambie1**

[@ULDAVFDRP](@ULDAVFDRP) From reading the Betfair documentation, that seems to be the case

---

## 2021-01-09 15:15:47 - strategies channel

**liam**

If used middleware then all your strategies can use it, simulated already has what you want [https://liampauling.github.io/flumine/markets/#middleware|https://liampauling.github.io/flumine/markets/#middleware](https://liampauling.github.io/flumine/markets/#middleware|https://liampauling.github.io/flumine/markets/#middleware)

---

## 2021-01-09 13:13:46 - issues channel

**Lee**

I've just been looking through the codebase to understand why markets are not clearing and calling my log control for an hour but i'm not sure i quite understand it.

```2021-01-08T13:31:29.835886969Z app[prod.1]: {"asctime": "2021-01-08 13:31:29,835", "levelname": "INFO", "message": "Market 1.177713641 closed", "market_id": "1.177713641", "date_time_closed": "2021-01-08T13:31:29.835544"}

2021-01-08T13:31:29.838371374Z app[prod.1]: {"asctime": "2021-01-08 13:31:29,837", "levelname": "INFO", "message": "Market closed", "market_id": "1.177713641", "client": {"….

2021-01-08T14:35:15.808288346Z app[prod.1]: {"asctime": "2021-01-08 14:35:15,807", "levelname": "INFO", "message": "Removing market 1.177713641", "client":

2021-01-08T14:35:15.808770984Z app[prod.1]: {"asctime": "2021-01-08 14:35:15,808", "levelname": "INFO", "message": "Market removed", "market_id": "1.177713641"}

2021-01-08T14:37:43.073071965Z app[prod.1]: {"asctime": "2021-01-08 14:37:43,072", "levelname": "INFO", "message": "1.177713641: x cleared orders found, more available: False"}

2021-01-08T14:37:43.076750659Z app[prod.1]: {"asctime": "2021-01-08 14:37:43,074", "levelname": "WARNING", "message": "Market 1.177713641 not present when clearing", "market_id": "1.177713641",

2021-01-08T14:38:15.168358314Z app[prod.1]: {"asctime": "2021-01-08 14:38:15,168", "levelname": "INFO", "message": "Market level cleared", "market_id": "1.177713641", "profit": x, "bet_count": x}```

Based on these logs it seems like at 13.31

1. we get a market closed event as the `market_book.status = "CLOSED"` 

2. triggers [https://github.com/liampauling/flumine/blob/master/flumine/baseflumine.py#L252|this](https://github.com/liampauling/flumine/blob/master/flumine/baseflumine.py#L252|this) code and adds the market to the `cleared_market_queue` 

3. a worker polls betfair for the cleared orders for the market and will retry until success

4. on success updates my log control (doesn't get here until 14:38)

Then 14:35 the market is removed which seems like it was called based on [https://github.com/liampauling/flumine/blob/master/flumine/baseflumine.py#L293|this](https://github.com/liampauling/flumine/blob/master/flumine/baseflumine.py#L293|this) line (which happens after at least 1 hour). But I don't see the "Market closed" log again so was this method called somewhere else or the code stuck inbetween or just betfair updating status to `CLOSED` late?

---

## 2021-01-09 12:30:59 - issues channel

**liam**

Watch out when backtesting and persistence as we don’t have much logic surrounding it [https://github.com/liampauling/flumine/issues/192|https://github.com/liampauling/flumine/issues/192](https://github.com/liampauling/flumine/issues/192|https://github.com/liampauling/flumine/issues/192)

---

## 2021-01-09 12:17:02 - issues channel

**Ruben**

good morning everyone, I'm backtesting a market with flumine, pre-event, and I'm submitting a `LimitOrder` with `persistence_type = 'LAPSE'` . The market is supposed to turn in-play at 20:15:00. Looking at `order.responses.place_responses`  I see this order was placed at 20:15:38. Why could this be? The market turned inplay later than expected?

---

## 2021-01-08 08:08:12 - random channel

**Michael**

How do you treat normal bumpers? Don't they present the much the same problem?

---

## 2021-01-07 14:59:06 - issues channel

**liam**

yep, docs [https://liampauling.github.io/flumine/advanced/#logging-controls|here](https://liampauling.github.io/flumine/advanced/#logging-controls|here)

---

## 2021-01-07 14:53:33 - issues channel

**birchy**

Based on this? [https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py)

---

## 2021-01-07 14:50:13 - issues channel

**liam**

flumine way of doing this is to use loggingcontrol class to record all your orders/trades to either csv/db/api

---

## 2021-01-07 14:36:00 - issues channel

**liam**

flumine uses it internally so you can't use it for anything custom

---

## 2021-01-07 14:15:49 - general channel

**Taking Value**

Ok cool, I will start there and let you know how it goes. Thanks for your help all.

---

## 2021-01-07 14:06:47 - general channel

**Taking Value**

Pretty certain the way I process the data is the biggest problem followed by the 1 row at a time.

---

## 2021-01-07 14:05:40 - general channel

**Taking Value**

[@UBS7QANF3](@UBS7QANF3) I am inserting one row at a time and thought this would be a problem so looked into other ways to do it. However when I stopped the insert function the code still took a long time to run so I concluded that it wasn't the rate limiting step.

---

## 2021-01-07 14:01:24 - general channel

**Mo**

You're not inserting into the database one row at a time are you?

---

## 2021-01-07 14:00:03 - general channel

**Taking Value**

I suspect the problem is related to me only coding for just over a year. All otehr problems have always been with my code up till now.

---

## 2021-01-07 13:50:12 - general channel

**Taking Value**

Good question. I don't know is the honest truth. I was strapped for time when I set up the listeners and have limited coding experience so just messed about with the files to make sure all market updates that were streamed were recorded to txt files. Got GB's of data in my S3 buckets, finally have had time to come back and process it over Christmas. Its great, its got all the data I need but it takes too long for me to process the files. Thinking of going back and only recording market updates every 5 secs.

---

## 2021-01-07 13:45:37 - general channel

**liam**

You a bflw user?

---

## 2021-01-07 11:55:05 - general channel

**Misha**

I do a fairly quick poll for settled bets - every 15 seconds to check and write them to a database. I usually have the data available close to 30 seconds after a tennis market is closed

---

## 2021-01-07 11:53:40 - general channel

**Misha**

I have every bet I have attempted in a database, including cancelled bets (about 700,000 in the last 3 months), Queries take less than a second, no matter how I group the bets and summarise them

---

## 2021-01-07 11:45:45 - general channel

**birchy**

TBH, I've never seen the advantage of a database vs reading CSVs? Both need custom python code and for a simpleton like me, reading a CSV doesn't require anything beyond Python, whereas a database ALSO requires database knowledge.

---

## 2021-01-07 11:41:12 - general channel

**birchy**

Yeah, am going to implement `listClearedOrders` in bflw, probably polling once a day or something like that. Never used databases, it always looks like another language to learn.

---

## 2021-01-07 11:36:03 - general channel

**Misha**

Start with every field from the listClearedOrders API call (there are quite a lot of fields). Store the results in a database and you have the first steps to analysis

---

## 2021-01-06 17:18:26 - general channel

**liam**

My problem is I don’t know where the problems are going to be till it changes 

---

## 2021-01-06 07:12:32 - random channel

**Sam Asin**

i'll keep working my way through and ask questions as they come up!

---

## 2021-01-06 07:11:42 - random channel

**Sam Asin**

thanks [@UBS7QANF3](@UBS7QANF3) this is all really helpful

---

## 2021-01-06 00:33:07 - random channel

**Sam Asin**

Yeah I'm gonna assess a bit more what I can do differently now that I know what's going on. Gotta think through how to change it. Gonna work on it myself for a while and I can ask again if I have problems, but best way to learn I find is to muddle a bit.

---

## 2021-01-05 12:57:10 - issues channel

**liam**

[https://github.com/liampauling/flumine/issues/358|#358](https://github.com/liampauling/flumine/issues/358|#358)

---

## 2021-01-05 10:23:29 - issues channel

**liam**

There is an issue for this, flumine needs to be updated, welcome a pr on it 

---

## 2021-01-05 10:19:19 - issues channel

**Lee**

[https://github.com/liampauling/betfair/blob/0818be2d30b0e27d354ed48c50d8c9545d0f691f/betfairlightweight/baseclient.py#L56|here](https://github.com/liampauling/betfair/blob/0818be2d30b0e27d354ed48c50d8c9545d0f691f/betfairlightweight/baseclient.py#L56|here) it looks like you can provide `italy` as the locale to the client. are you doing that already?

---

## 2021-01-05 09:39:27 - random channel

**Mo**

I think it's a perfectly legitimate way to think about bankroll

---

## 2021-01-05 09:39:02 - random channel

**Oliver Varney**

am I thinking about bankroll wrong / naively

---

## 2021-01-05 09:37:33 - general channel

**liam**

magic [https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/streams/streams.py#L46|here](https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/streams/streams.py#L46|here)

---

## 2021-01-05 09:35:52 - general channel

**liam**

is this flumine?

---

## 2021-01-05 09:35:29 - random channel

**Mo**

If you really do base it on some global bankroll then you should really take account all of the existing bets or simultaneous bets to be placed

---

## 2021-01-05 09:25:34 - random channel

**river_shah**

re 50 bets, if bets are independent and your mean edge and variance computations are reasonable I’d still treat bank roll as the same. on expectation your bankroll grows proportionally to mean edge.

---

## 2021-01-05 09:11:34 - random channel

**river_shah**

Clearly paying what they pay, I assume staff turnover is going to be fairly high. How does IP get controlled in such situations? Mono repo’s out of the question and keep everything very siloed / locked down?

---

## 2021-01-05 08:58:01 - general channel

**liam**

There is a helper function for this in filters 

---

## 2021-01-05 08:53:06 - general channel

**bogdan**

market_filter is ok because I don't use streaming

---

## 2021-01-05 07:58:06 - strategies channel

**liam**

Flumine will update based on the catalogue 

---

## 2021-01-05 07:45:34 - strategies channel

**mandelbot**

AUS racing start times often change, does this get updated in flumine when it's updated on betfair?

---

## 2021-01-04 22:30:27 - general channel

**Charlie 303**

if you're using a list_ (NG api) function, you use market_filter.  if you're trying to use the filter for streaming, you need to use streaming_market_filter

---

## 2021-01-04 21:21:41 - general channel

**bogdan**

Hello,I want to get the horse markets from New Zealand in the next day (I fount the symbol for it is NZ), but even though I specify this, sometimes I get markets from AUS, USA. Do you know why? Below is my filter:





thoroughbreds_event_filter = betfairlightweight.filters.market_filter(

    event_type_ids=[7],

    market_countries=['NZ'],

    market_start_time={

        'to': (datetime.datetime.utcnow() + datetime.timedelta(days=1)).strftime("%Y-%m-%dT%TZ")

    }

)



For example using this filter I got this market: [https://www.betfair.com/exchange/plus/horse-racing/market/1.177574798](https://www.betfair.com/exchange/plus/horse-racing/market/1.177574798), which is an AUS race

---

## 2021-01-04 14:18:12 - general channel

**Alessio**

there's a bunch of util functions in flumine to get the nearest valid price exactly for this :slightly_smiling_face:

---

## 2021-01-04 12:18:15 - general channel

**Chris C**

Maybe a bit dodgy, but simple. At restart I poll current_orders and do this:

framework.handler_queue.put(flumine.events.events.CurrentOrdersEvent([current_orders]))

---

## 2021-01-04 12:04:16 - general channel

**Oliver Varney**

pseudo code is roughly, call list_current_orders, create the trade (for which the orders will sit on), from the CurrentOrders, create the flumine orders and append to the trade, add the orders into the market.blotter, add the trade into whereever you store it for later access (most people use the context dicts)

---

## 2021-01-04 11:54:16 - general channel

**Oliver Varney**

dodginess remains within flumine._add_market (for now, havent had time to move it)_

---

## 2021-01-04 10:22:28 - general channel

**Newbie99**

If its just a lost connection flumine should retain the info automatically, however if its a manual stop or lengthily cut out (i.e. where it can't immediately reconnect) then you would need to make a REST API call to get the info (list current orders probably from what you're saying is what you need).

---

## 2021-01-03 18:13:58 - strategies channel

**liam**

Yeah so you have a lot of orders all going in at the same time, we can’t really simulate that sort of behaviour accurately.



What you are probably seeing is flumine continually matching against the same liquidity causing more orders to get fired in and then get ‘matched’ when in reality this won’t happen especially Inplay 

---

## 2021-01-03 17:51:35 - strategies channel

**Mo**

I'm not sure how flumine handles disconnections when scraping but I've seen something similar on files I've scraped myself when there's a gap in the stream due to a disconnection

---

## 2021-01-03 17:22:43 - strategies channel

**liam**

have a look at `order.simulated.matched` for a list of indiv matches [https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/backtest/simulated.py#L28](https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/backtest/simulated.py#L28)

---

## 2021-01-03 17:06:03 - strategies channel

**Ruben**

Good evening everyone, about Flumine: to analyze when the orders one posts are getting matched, is there a better way than looking at order.date_time_execution_complete?

---

## 2021-01-03 16:32:57 - issues channel

**liam**

This is betfair so it can be a string, helper function [https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/utils.py#L112|here](https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/utils.py#L112|here) that flumine uses 

---

## 2021-01-03 16:22:31 - general channel

**liam**

yep and then pass to flumine, you could of course filter using the `check_market_book` function but that would result in you processing the entire file which is a waste of cpu

---

## 2021-01-03 15:47:59 - strategies channel

**liam**

market delay is simulated in flumine, BPE is on by default when backtesting, do you have it on your account? What market types? Stake size?

---

## 2021-01-03 15:13:37 - general channel

**liam**

Processing a market is expensive so I would filter before you get to that point, ie know the markets you want or open them up and take a peak at the marketDefinition on the first line before even getting to flumine 

---

## 2021-01-03 12:32:35 - general channel

**steve**

ok thanks mate. ill have a look into streaming then

---

## 2021-01-03 12:31:43 - general channel

**Mo**

If you use streaming in conjunction with SP_PROJECTED you will get the near and far BSPs but I don't know how you can get them using the REST API, if it's even possible

---

## 2021-01-03 12:30:47 - general channel

**Mo**

SP_PROJECTED is streaming specific so it's not surprising it doesn't work

---

## 2021-01-03 12:29:00 - general channel

**Mo**

Sorry I misread your code, I thought you were using streaming

---

## 2021-01-03 10:51:19 - general channel

**Mo**

```(venv) mberk@mberk-desktop:/tmp $ ./venv-373/bin/python benchmark.py 

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 45216.03it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 45572.29it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 44281.82it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 45045.24it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 45123.00it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 45002.55it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 44920.42it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 44952.91it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 44624.22it/s]

100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:00&lt;00:00, 44506.68it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 10/10 [00:04&lt;00:00,  2.05it/s]

4.88512659072876```

---

## 2021-01-03 09:54:35 - strategies channel

**liam**

info properties on the order and trade are the best, it's what is used for the jupyter poc [https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/order/order.py#L251](https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/order/order.py#L251)

---

## 2021-01-03 05:20:25 - strategies channel

**liam**

Yeah bump to around 3s and then plot profit against seconds to match, in flumine this is `order.elapsed_seconds_executable` however this will be dependant on if you are taking prices / how far from the centre of the book etc.



It will underplay matching rates (mainly due to xm) but you still need something profitable

---

## 2021-01-03 01:08:59 - general channel

**B3tfairDev**

hello, I've got a question about betfairlightweight. I wanted to implement a Timer function that calls some betfairlightweight functions but apparently Timer and threading functions in python 3 are not supported by betfairlightweight. What is the appropriate way to call a function with a timer or a function in the future in python 3?

---

## 2021-01-02 22:47:21 - general channel

**Charlie 303**

Thanks fair enough.  In my nascent phase I'm figuring if im paying commission it means im mkaing profitable transactions = good problem to have :wink:

---

## 2021-01-02 21:21:14 - strategies channel

**birchy**

Thanks guys, you've confirmed my own thoughts. In particular, I'd prefer to see &gt;2% in order to cover commission. PC is not an issue yet, and unlikely to be due to the churning nature of some other bots I have running (they're +EV, but only just) and have been ticking along for many years, so my lifetime commission is colossal. Currently enumerating through trigger combinations... should have an answer by 2022. :joy: 

Am curious what [@U4H19D1D2](@U4H19D1D2) thinks, as he has previously mentioned that Flumine generally underplays the match rates?

---

## 2021-01-02 18:23:23 - general channel

**Matthieu Labour**

Following up. Do u think this approach would work as well? [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1609433260374700](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1609433260374700) with a file with timestamps clock events that one wants to inject. And for InPlay, I would have a background worker generates CustomClockEvent? Thank you!

---

## 2021-01-02 17:12:07 - general channel

**Unknown**

So for context here is one instance of flumine on a micro, all racing win markets (but 2 streams) with about 10 strategies 

---

## 2021-01-02 17:08:51 - general channel

**Alessio**

There's no set up yet :wink: Free tier is T3.Micro . It's going to be flumine.. to start it will try to enter ~ 10% of the markets.. so uhm.. 5-6 at the same time?

---

## 2021-01-02 12:33:08 - general channel

**Mo**

This is 373:



```mberk@mberk-desktop:/tmp $ ./venv-373/bin/python benchmark.py 

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6116.54it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6117.33it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6093.97it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6100.20it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6107.77it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6096.63it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6119.97it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6113.64it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6103.55it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21919/21919 [00:03&lt;00:00, 6109.20it/s]

100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 10/10 [00:35&lt;00:00,  3.59s/it]

35.89195704460144```



---

## 2021-01-02 10:12:24 - general channel

**Michael**

Thanks that's really helpful.

---

## 2021-01-02 10:11:58 - general channel

**D**

I understood that the try/except approach was 'pythonic' and recommended?

---

## 2021-01-02 09:07:40 - general channel

**Mo**

Still easily solved by having an exchange enum column

---

## 2021-01-01 17:46:31 - random channel

**Sam Asin**

I mostly need to figure out how to do more of my stuff by using, like, lists of data.frames maybe? And other sorts of structures. I'm imagining you guys aren't writing groupby all the time?

---

## 2021-01-01 15:30:52 - issues channel

**Alessio**

Correct, but modern databases with granular locking mechanism have evolved quite a lot. And the new wave is even more around that. I know Redis's author and he spent most of his time engineering exactly around this stuff.

---

## 2021-01-01 12:38:20 - issues channel

**D C**

I'm very confused by what people mean by "decimal" here? Is this python speak for double precision floating point arithmetic or a library of some kind?

---

## 2021-01-01 12:21:58 - issues channel

**Dave**

Hmm - often it is not required to measure it if you know the impact already. E.g. one simple optimisation in python is to assign functions on objects to variables. If you're appending a large number of items to a list, you will probably want to do `push = mylist.append` and use `push(myitem)` in your loop rather than  `mylist.append(myitem)` . Someone might call it premature optimisation as it would take a laaarge number of case for the gains to be really material, but you may end up facing such a large number of calls during backtesting.

---

## 2021-01-01 12:13:16 - issues channel

**Dave**

Python3 uses cdecimal which is significantly faster than the old decimal implementation. But still, being able to backtest + review results quickly IMO is super important. And if you backtest on a large number of markets then what might seem negligible on a single-maeket basis ends up adding up if you go through millions of markets. Especially if you have these "negligible inneficiencies" everywhere

---

## 2021-01-01 12:12:48 - issues channel

**Misha**

[@UBS7QANF3](@UBS7QANF3) - there are certain things in common that don't change with language. I would be surprised if Python isn't pretty efficient at handling decimals

---

## 2021-01-01 12:10:09 - issues channel

**Misha**

Premature optimisation is a very common problem

---

## 2021-01-01 12:09:00 - issues channel

**Mo**

[@U016535QCJ2](@U016535QCJ2) seems a bit irrelevant to comment on C#'s Decimal implementation when we're talking about flumine

---

## 2021-01-01 11:53:31 - general channel

**Graham**

^ all in python fyi

---

## 2021-01-01 11:47:06 - issues channel

**liam**

Yeah there is flumine blocking it if it violates one of the controls or the actual place request failing in which case you have to wait till the status updates 

---

## 2021-01-01 11:42:08 - issues channel

**Alessio**

that's because the order is not in sync with the status on the other side though, not just flumine refusing it

---

## 2021-01-01 11:02:20 - general channel

**Dave**

I think [@U01A64T6DJQ](@U01A64T6DJQ)’s question about participant breakdown definitely has some basis. E.g. on some financial exchanges it is even possible to restrict matching against a set of cptys who you may believe is particularly sharp or have a post-trade profile that is quite poor/toxic. If you trade on shorter horizons you could benefit from not matching against such cptys. Anyways not that Betfair offer such functionality anyway, just a side point

---

## 2021-01-01 10:51:41 - general channel

**Graham**

I remember in the earlier days it was ridiculous what they were doing. Just copying prices from BF - to the point you could put an order up in BF and Smarkets simultaneously in an illiquid market and it would match on Smarkets no problem

---

## 2021-01-01 03:50:09 - general channel

**nthypes**

It helps to understand market micro structure

---

## 2020-12-31 18:12:51 - general channel

**Oliver Varney**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2020-12-31 18:11:31 - general channel

**Oliver Varney**

betfairlightweight can load in files, build and update a cache and stream them (it will save you alot of headache). You do realise the file messages are deltas? I think you can put dummy values in for login details (if im not mistaken)

---

## 2020-12-31 17:45:58 - general channel

**Oliver Varney**

what about using betfairlightweight / flumine (there is historical stream functionality)?

---

## 2020-12-31 15:58:22 - general channel

**Mo**

Yeah I wouldn’t put that in a database 

---

## 2020-12-31 15:56:34 - general channel

**Oliver Varney**

so no need to manually load them back when you start / restart a stream (how / does this effect flumine)?

---

## 2020-12-31 15:42:56 - general channel

**nthypes**

Anybody handles with PostgreSQL @ scale?



I'm storing 100k lines per day. It's viable in long run ?

---

## 2020-12-31 15:16:41 - general channel

**liam**

nothing generic but just finished a [https://github.com/liampauling/betfair/pull/372|PR](https://github.com/liampauling/betfair/pull/372|PR) to add matches to the streaming output which would be the easiest way

---

## 2020-12-31 14:28:51 - issues channel

**MacrcoPolo**

(That said... I've spent the past few days working on an inference problem, so maybe I'm full of shit?)

---

## 2020-12-31 13:14:31 - random channel

**MacrcoPolo**

It's great for general stats work and cutting edge stats (since the standard is still to write your new inference technique in R I believe) but I too find it slightly vile. I also find that the IDEs for python are just better... . R always felt not-quite-turing complete to me

---

## 2020-12-31 13:04:50 - general channel

**nthypes**

[https://betfairlightweight.slack.com/archives/C4H05KKMY/p1609411414466400](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1609411414466400)

---

## 2020-12-31 13:01:39 - issues channel

**Mick**

I am using price_filter = betfairlightweight.filters.price_projection(price_data=['EX_BEST_OFFERS'])

---

## 2020-12-31 11:03:16 - random channel

**Oliver Varney**

also when flumine restarts the hourlys restart also

---

## 2020-12-31 10:51:19 - random channel

**Alex B**

Even without flumine, this is pretty basic stuff to get right :man-facepalming:

---

## 2020-12-31 10:49:41 - random channel

**Alessio**

Not everybody relies on the well thought out stuff like flumine :slightly_smiling_face:

---

## 2020-12-31 10:19:15 - random channel

**Alessio**

i''m not familiar with data.table, though. my main complaint about R is the lack of any meaningful documentation. There's documentation, but it explains ZERO of any gotchas that there may be. It looks like i'm trying to work in perl

---

## 2020-12-31 10:11:41 - random channel

**Alessio**

written by statisticians, with no real documentation

---

## 2020-12-31 10:09:14 - random channel

**Sam Asin**

only messing with python a bit to try out your package tbh :smile:

---

## 2020-12-31 09:59:14 - random channel

**Alessio**

(but i know how to exit it)

---

## 2020-12-31 08:34:11 - random channel

**liam**

I only know how to use PyCharm and nano 

---

## 2020-12-31 08:04:17 - random channel

**Mo**

I like the database tools

---

## 2020-12-31 07:03:58 - strategies channel

**Oliver Varney**

populate the CSV's into a database and sum + rank and it should give you an idea of most traded I believe. Obviously there are variables quality / class of the race will effect the amount traded. Like in the UK/IRE a grade 1 / class 1 will trade alot more then a cold winters midweek chase at Plumpton

---

## 2020-12-31 04:58:00 - issues channel

**Sam Asin**

Real analysis etc. is just so good for practicing thinking through problems.

---

## 2020-12-31 00:12:07 - general channel

**Misha**

Request from the API (from the request/response API, not the streaming API)

---

## 2020-12-30 23:30:40 - issues channel

**Misha**

Last lesson from Pure Maths: take time to understand the problem, so that you can break the bigger problem into a number of smaller problems. The better you understand the subject, the smaller those individual problems are, and the easier they are to "solve"

---

## 2020-12-30 23:26:33 - issues channel

**Misha**

So it is possible to get there (but certainly not the only or main way) without using any suggested techniques. Basically pure problem solving

---

## 2020-12-30 23:21:34 - issues channel

**Misha**

Also remember the anecdote from one of my lecturers. When he couldn't solve the question to get his PhD (was too hard), he changed the question to something easier, and then solved that

---

## 2020-12-30 23:19:55 - issues channel

**Misha**

Another thing I remember from my exams: "Read the question, then read it again, and then when you are halfway through, read it again". This is to make sure you are solving the right problem

---

## 2020-12-30 23:18:35 - issues channel

**Misha**

Basically being taught how to "think", and how to "solve problems", which is basically what underlies Pure Maths, is the key

---

## 2020-12-30 17:53:01 - general channel

**Alessio**

Is your problem aligning streams?

---

## 2020-12-30 17:52:41 - general channel

**Artur Gräfenstein**

Hmm, I don’t know how accurate that is. Or how to check that well. Streams are also mostly delayed and can’t compare it properly.

---

## 2020-12-30 17:22:36 - strategies channel

**Ruben**

With Flumine, when backtesting several markets, are limits such as the transaction_count reset to 0 after every market?

---

## 2020-12-30 12:36:51 - random channel

**Oliver Varney**

Cool cheers chaps I think ive answered the question looking back at the backtesting. thanks for the input :+1:

---

## 2020-12-30 11:54:51 - issues channel

**mandelbot**

Well that's the question isn't it

---

## 2020-12-30 11:47:48 - random channel

**Oliver Varney**

hopefully that somewhat makes sense as a question

---

## 2020-12-30 11:47:39 - random channel

**Oliver Varney**

not to sure how to phase this question, but maybe describing the situation will help. Yesterday there was a horse (matties mountain,limerick 3:25) which all my algos piled in to and built up some big positions. Looking at the off the price had doubled (5-&gt;11), typically an awful sign right. looking at its form to see if the algos had gone awol it had won last run ( i know this doesnt mean much in isolation, but it was not like it had been pulled up 3 times running). The horse won with a bit in hand. I do have some straegies that catch drifters, but I guess at what point do you stop continuing to build up a larger and larger position when you algo says it was good value. Furthermore, because its a rare case was I right and the market just completely wrong, or was it luck that it won. Do people evaluate this somehow?

---

## 2020-12-30 10:03:52 - issues channel

**Alessio**

[https://github.com/liampauling/flumine/blob/dabcaab5853ed71e95eed1c076706a41ded334e9/flumine/markets/blotter.py](https://github.com/liampauling/flumine/blob/dabcaab5853ed71e95eed1c076706a41ded334e9/flumine/markets/blotter.py) interestingly

---

## 2020-12-30 09:44:40 - issues channel

**Mo**

I don’t know, I don’t use flumine :wink:

---

## 2020-12-30 09:43:44 - issues channel

**Alessio**

'profit' of flumine should already do that, no?

---

## 2020-12-30 09:11:01 - random channel

**Jonjonjon**

This is more random then usual, but has anyone here had problems getting their coinbase accounts verified?

---

## 2020-12-29 20:51:50 - strategies channel

**jp**

If EX_ALL_OFFERS_DISP is enabled when streaming, will also non-virtual prices be delayed? I thought they were not, but not sure about this...

---

## 2020-12-29 18:35:06 - general channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/order/order.py#L303](https://github.com/liampauling/flumine/blob/707a81990d1c51d64e964c781c5e700fe58646de/flumine/order/order.py#L303)

---

## 2020-12-29 18:32:35 - general channel

**Ruben**

Hi everyone, quick Flumine question: to increase/reduce the size of an order, should I create/cancel orders to obtain the desired size, or is there a specific method that does that? I have seen `update_order()`  but that seems to only update the `persistence_type` of the order, thanks a lot

---

## 2020-12-29 17:48:38 - strategies channel

**liam**

Would be a cool addition to flumine.. :sunglasses:

---

## 2020-12-29 13:40:49 - strategies channel

**MacrcoPolo**

I'd suggest just literally getting a pen and paper out, writing down the formulas you need and then taking a snapshot of a market from betfair and playing in excel to get it working correctly before moving it to python

---

## 2020-12-29 12:15:50 - strategies channel

**liam**

Correct, logic here [https://github.com/liampauling/betfair/blob/52b5732c0704294ee162f11853612cb5100352b1/betfairlightweight/streaming/cache.py#L108|https://github.com/liampauling/betfair/blob/52b5732c0704294ee162f11853612cb5100352b1/betfairlightweight/streaming/cache.py#L108](https://github.com/liampauling/betfair/blob/52b5732c0704294ee162f11853612cb5100352b1/betfairlightweight/streaming/cache.py#L108|https://github.com/liampauling/betfair/blob/52b5732c0704294ee162f11853612cb5100352b1/betfairlightweight/streaming/cache.py#L108)

---

## 2020-12-29 11:56:53 - strategies channel

**Mo**

In terms of Betfair streaming you can request both but my understanding of the code is that betfairlightweight will prioritise the non-virtual price stream in terms of what it puts into the runner books

---

## 2020-12-29 11:19:02 - strategies channel

**Misha**

There is a limit where volume will come into play, but that will be a very "nice" problem to have

---

## 2020-12-29 11:07:37 - strategies channel

**PeterLe**

The difference between having XM on and off is very subtle in stable markets, often it is just the amount at the price that is different. This can have a slightly -ve effect (ie if you see a price at 10.5 and lay £10 at 11 you may only get £2 matched at 10.5 and £8 at 11 etc, here is a video i did 10 years or so ago which shows a single market with XM on and adjacent XM off. If you pause the video at points you can see the differences. [https://www.youtube.com/watch?v=3njy483sL-w](https://www.youtube.com/watch?v=3njy483sL-w) it helped me fall asleep many times over the years thinking how to get the best out of it :grinning:

---

## 2020-12-29 10:15:21 - strategies channel

**Oliver Varney**

quite an interesting AI problem maybe

---

## 2020-12-29 10:14:04 - strategies channel

**Oliver Varney**

I guess this also raises the question if people can calculate virtual prices faster than the 150 milliseconds ?

---

## 2020-12-29 10:12:04 - strategies channel

**Oliver Varney**

cheers mate, always learning new stuff, appreciate the help.

---

## 2020-12-29 09:59:41 - strategies channel

**mandelbot**

Is there an option on BFLW to turn virtual streams on/off?

---

## 2020-12-29 09:53:21 - strategies channel

**Mo**

Well you can request either the virtual prices or the non virtual prices using streaming 

---

## 2020-12-29 09:52:30 - strategies channel

**Misha**

I use the same prices from the streaming API (as reflected by the web site)

---

## 2020-12-29 07:30:01 - strategies channel

**Mo**

Your database is wrong

---

## 2020-12-29 00:16:17 - strategies channel

**Misha**

Just checked my database for tennis - cross matching is not used for tennis

---

## 2020-12-28 20:43:07 - strategies channel

**PeterLe**

[@U016TGY3676](@U016TGY3676) not sure if you’ve seen this; its not the code, but it gives an explanation that may help [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Additional+Information](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Additional+Information) (half way down)

---

## 2020-12-28 19:51:12 - strategies channel

**birchy**

Has the betfair XM algorithm been published or is it a closely guarded secret? Looking to replicate in python...

---

## 2020-12-28 13:10:38 - general channel

**nthypes**

Yes, makes sense. Bayes help us dealing with uncertainty as you said. Since we know that the horse is the most traded, we have a fact here. So makes no sense using Bayes.

---

## 2020-12-27 15:45:03 - general channel

**PeterLe**

Just a quick question please to the statisticians amongst you..When analysing a set of results and faced with a choice of either using a T-Test or Monte Carlo, would you have a preference? Thanks in advance

---

## 2020-12-27 15:30:20 - general channel

**liam**

Yeah context and a custom worker / event with a callback, check out the inplayservice [https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|example](https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|example) 

---

## 2020-12-27 15:18:57 - general channel

**Oliver Varney**

I think people use the context fields for user data. In the worker you can pass flumine in as a param, then find your market in flumine.markets and populate the context dict

---

## 2020-12-27 15:18:40 - general channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/ab25ef0fcfd42cff461145c0f83fc43f8a9a0ca3/flumine/markets/market.py#L27](https://github.com/liampauling/flumine/blob/ab25ef0fcfd42cff461145c0f83fc43f8a9a0ca3/flumine/markets/market.py#L27)

---

## 2020-12-27 14:58:36 - general channel

**Rory**

Part of my motivation of moving to flumine is to remove all the custom stuff I've written, which flumine handles now. I like your suggestion of having process_market_book place each trade as it becomes available from the decision maker.

---

## 2020-12-27 14:52:04 - general channel

**Oliver Varney**

FYI flumine handles all the streaming - both market and order

---

## 2020-12-27 13:22:24 - strategies channel

**liam**

thinking of edge cases where users have stored python objects in the context fields but tbh json is always going to be easier

---

## 2020-12-27 13:15:29 - strategies channel

**AP**

I actually leveraged this example.



[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1605132356439000|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1605132356439000](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1605132356439000|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1605132356439000)

---

## 2020-12-27 13:08:49 - strategies channel

**liam**

yeah this is doing the heavy lifting [https://github.com/liampauling/flumine/blob/ef7ace33a73cc8265201f372a0071e4c761640b2/examples/controls/jupyterloggingcontrol.py](https://github.com/liampauling/flumine/blob/ef7ace33a73cc8265201f372a0071e4c761640b2/examples/controls/jupyterloggingcontrol.py)

---

## 2020-12-27 13:05:30 - strategies channel

**liam**

this is the [https://github.com/liampauling/flumine/pull/353|branch](https://github.com/liampauling/flumine/pull/353|branch) focus was mostly on a generic json format which had all the metadata but can be easily added to

---

## 2020-12-27 11:33:34 - issues channel

**JC**

Is there an order type in bflw where if it is not filled at in_play==True, it will take BSP?

---

## 2020-12-26 22:55:08 - random channel

**JC**

My aim is also to turn profitable in 2021! And to keep learning and improving my knowledge, skills and strategies. Hopefully I will be able to help others in this community as well, as it has been an essential resource for me as well as a source of inspiration. Thanks to the guys who made it and to everyone for the debates and long may your automated profits continue :grin:

---

## 2020-12-26 21:05:22 - random channel

**Misha**

Started here when we had problems in April/May. No way could I work with everyone stuck at home

---

## 2020-12-26 19:09:50 - random channel

**AP**

+1 again, Flumine made it so easy to get strategies up and running quickly and it is extremely reliable. Thanks Liam!

---

## 2020-12-26 18:25:12 - general channel

**Dave**

[@U01A64T6DJQ](@U01A64T6DJQ) might be useful for many if you just post it as an open question

---

## 2020-12-26 18:08:52 - random channel

**Lee**

+1 for flumine. Liam will definitely not be short of beers when we’re allowed to meet. Cheers Liam

---

## 2020-12-26 18:05:22 - random channel

**Mo**

Having another bflw meet-up 

---

## 2020-12-26 17:58:02 - random channel

**Oliver Varney**

[@U4H19D1D2](@U4H19D1D2) thanks alot for flumine, I had started something similar but your expertise and superior coding made flumine a must have :+1: Multiple beers coming your way next time we cross paths :beer:

---

## 2020-12-26 17:42:50 - general channel

**Mo**

Not really sure how to answer how to avoid it... you should know what you have sitting in the market

---

## 2020-12-26 17:36:37 - general channel

**Ruben**

This is probably a dumb question, but here it goes anyway: can you get matched with your own orders? does betfair allow that? If not, how can it be avoided?

---

## 2020-12-26 11:09:01 - general channel

**Mo**

I have found having a database table containing meta data for S3 objects to be useful so you can use that for searching rather than making S3 API requests

---

## 2020-12-25 19:09:24 - general channel

**Ruben**

`country_codes`  is for streaming_market_filter()

---

## 2020-12-25 17:30:35 - general channel

**bogdan**

thoroughbreds_event_filter = betfairlightweight.filters.market_filter(

    event_type_ids=[7],

    market_countries=['NZ'],

    market_start_time={

        'to': (datetime.datetime.utcnow() + datetime.timedelta(days=1)).strftime("%Y-%m-%dT%TZ")

    }

)

---

## 2020-12-24 13:54:39 - random channel

**Mo**

[@U016535QCJ2](@U016535QCJ2) I think you should be careful about being too precious about things. What you think is secret sauce is probably already known by many people. I don't think [@U4H19D1D2](@U4H19D1D2) has done himself any damage by making bflw and flumine open source and has gained many valuable contributions from the community

---

## 2020-12-24 13:49:31 - random channel

**Mo**

[@U01EYDA8345](@U01EYDA8345) the more I think about it, the more I think this is a good idea and I would be happy to contribute if it helps

---

## 2020-12-24 13:21:59 - random channel

**Misha**

Yes - historical may not be that problematic. I have already done this as a one-off and get about 95% of the matches on Betfair mapped (from 2015)

---

## 2020-12-24 10:19:38 - random channel

**Artur Gräfenstein**

For tennis we can use your knowledge to help other developers. :smile:

---

## 2020-12-24 09:44:07 - random channel

**Misha**

Good question - a lot of effort I exepct

---

## 2020-12-24 09:41:46 - random channel

**Misha**

Even for tennis. my area, it is fiendishly difficult to get right. And I have spent a lot of time refining how to do this

---

## 2020-12-24 09:39:29 - random channel

**Artur Gräfenstein**

So I thought, probably other developers have the same problem and I could start to make the information already gained publicly available through an API.

---

## 2020-12-24 09:38:02 - random channel

**Mo**

It's a hard problem. Being able to deal with it is a technological edge

---

## 2020-12-24 09:37:25 - random channel

**Artur Gräfenstein**

No existing API, but I keep running into the problem that I want to use information from different platforms but have no easy way to link the events.

---

## 2020-12-23 22:23:54 - random channel

**Jonjonjon**

Are there any Spyder experts here? I'm trying to shift from the IPython console to the edit, using CTRL+Shift+e. But it just prints e in the console. I can go from the editor to the console using CTRL+SHIFT+I

---

## 2020-12-23 15:30:41 - general channel

**Crofty**

New guy here.



Manually traded for 4 years and realise would be sensible to explore automation properly.



My first task is to learn python.

---

## 2020-12-23 14:06:42 - general channel

**Newbie99**

[https://github.com/liampauling/flumine/blob/master/flumine/markets/blotter.py](https://github.com/liampauling/flumine/blob/master/flumine/markets/blotter.py)



Selection exposure might be what you're after?

---

## 2020-12-23 14:06:12 - general channel

**liam**

I think there are a few helper functions in the blotter 

---

## 2020-12-23 13:55:07 - general channel

**birchy**

Quick question regarding Flumine...to get the matched bets liabilities for each runner, do we need to calculate in process_orders() or are they already calculated but I've not found the parameter yet?

---

## 2020-12-23 09:19:41 - issues channel

**Michael**

One of the problems with your * 1.02 for example is that it will effect different prices differently and that will skew your analysis, it also includes assumptions that we know aren't true - like the spread being the same across all prices. If you're not careful you can end up introducing all kinds of kinks in your analytical road. That's why I would prefer to keep your analysis as close to the source data as you can and then just discount it when you're all done.

---

## 2020-12-20 17:42:17 - random channel

**V**

This may be one of those “those that know won’t say” questions :smirk:

---

## 2020-12-19 15:44:35 - general channel

**Jorge**

I'm happy to help with the refactor. It'd be very useful if the CurrentOrders class had a matched_backs_dict and matched_lays_dict as attributes!

---

## 2020-12-19 15:28:18 - random channel

**Michael**

[@UQL0QDEKA](@UQL0QDEKA) - Yes - I think this can be a real problem. Part of my distaste for the euphemisms is that they enable people to pretend that they're not problem gamblers. Gambling is dangerous and can ruin your life. I think it's important that we keep sight of that and don't sugar coat it.

---

## 2020-12-19 14:43:45 - random channel

**Mo**

I think that is exactly the problem [@UFTBRB3F1](@UFTBRB3F1) which I am trying to address

---

## 2020-12-19 12:59:59 - random channel

**Misha**

Note the above: I have conceded that under the definition, what I do constitutes gambling. But you need to look at the original source of the argument, which is how do you describe what you do to others (to which you said you are a gambler). So you win the argument, but that is a moot point in the context of how one might answer the question to others

---

## 2020-12-19 12:41:50 - random channel

**Mo**

You are of course welcome to answer that question however you want



But you said that you have never gambled which is utterly false (unless I have misunderstood your own venture and you personally do not place any bets)



You might have your own incorrect definition of what gambling means but standardised definitions exist for very good reasons, such to facilitate the exchange of ideas. This is not about agreeing to disagree

---

## 2020-12-19 12:26:56 - random channel

**Misha**

I think we will just have to agree to disagree. The original thread was about "what do you do" in response to a question from others. My views are how I approach that question as I have been asked a lot of times. Based on the arguments here, I respond somewhat differently to others

---

## 2020-12-19 11:36:43 - random channel

**D C**

[@U016535QCJ2](@U016535QCJ2) I don't really understand the question - my job description is "data scientist" if that is what you are asking. In terms of sophistication, I speak with a chap who makes shitloads of money on football basically by getting team/match status news way ahead of other people. There is no "sophistication" in that approach so to speak but he makes lots of profit. What I have is way more computer/algorithm based but I would swap my bank balance with him if offered the chance. He is a professional gambler - would you say that was a fair desrciption? I am sorry but I just cannot see how someone who uses algorithms/analysis should be viewed any differently to someone who reads the racing post and places their bets manually over the counter at the bookies.

---

## 2020-12-19 10:50:50 - general channel

**Jorge**

Hi guys, I'm trying to get the matched orders using an order stream. In github docs: "'price point' matched backs and matched lays are stored in the order cache in matched_lays / matched_backs." How can I access those? Do I need to look into the CurrentOrders.streaming_update?

---

## 2020-12-19 10:28:23 - random channel

**D C**

[@ULDAVFDRP](@ULDAVFDRP) The link in terminology I understand and I have even seen people use the logic that using an exchange is a "trade" of opinions but I see it simply as placing a bet where the party accepting the risk is not necessarily a bookie. A lot of people (particularly on social media) like to distance themselves from the term "gambling" and not always because they are trying to sell tips or some useless ebook on how to "trade betfair". I understand there are times when you may want or need to distance yourself from the term (for example, I recently asked some questions about mortgage providers and gambling transactions) but I am instantly distrusful of people who try and label what we do as anything other than what it actually is. It is not really OUR problem (well, SHOULD not be our problem) that a lot of people in society (usually those who have never set foot in a bookmaker) seem to regard this game as murky or undesirable.

---

## 2020-12-19 09:46:37 - general channel

**Artur Gräfenstein**

This is my problem because I often stay in Germany and always have to use a proxy. It should not be tied to the current location, but to the home of the account owner. Betfair checks that in a pretty detailed way. I had to send in quite a few documents.

---

## 2020-12-19 08:01:48 - general channel

**Misha**

Still is. They go from a standard geolocation database that might be weeks out of date

---

## 2020-12-18 12:36:44 - issues channel

**Matthieu Labour**

`_requires` does not conform with the string parser `home/xxx/.local/lib/python3.6/site-packages/pkg_resources/_vendor/packaging/requirements.py` The parser does not like when the token starts with `_`

---

## 2020-12-18 12:30:51 - issues channel

**Matthieu Labour**

It craps out when importing bflw as a dependency in another project that is pipenv. I will put a dummy project together to show the issue

---

## 2020-12-17 16:42:23 - general channel

**Oliver Varney**

Start with the examples on the github for flumine and betfairlightweight. Maybe watch some basic python programming youtube tutorials, then read through the flumine / betfairlightweight code. Some advice, you will have to be more proactive if your looking to get anywhere with this. It kind of seems you dont have a game plan and are asking for someone just to give you the  answer for how to make money.

---

## 2020-12-17 16:33:05 - general channel

**Bradley**

Now, I haven't programmed with Python before but have knowledge of programmin languages and electronics so I could understand and perhaps implement something some day. I just need basic stuff. 



If you can provide, I apreciate it.

---

## 2020-12-17 16:11:29 - issues channel

**Mo**

There's two different things to consider here:



1. If you request the displayed prices, do you get them when accessing ex.availableToBack on a runner? It depends what else you asked for:

```    def serialise_available_to_back(self) -&gt; list:

        if self.available_to_back.prices:

            return self.available_to_back.serialise

        elif self.best_display_available_to_back.prices:

            return self.best_display_available_to_back.serialise

        elif self.best_available_to_back.prices:

            return self.best_available_to_back.serialise

        else:

            return []```

2. Does bflw virtualise the book for you? No

---

## 2020-12-17 16:11:03 - issues channel

**liam**

Flumine returns whatever you ask it to return based on the market_filter 

---

## 2020-12-17 15:50:34 - issues channel

**Unknown**

Not sure that Flumine does return virtual prices?

---

## 2020-12-17 15:50:20 - issues channel

**thambie1**

tangent question, does bflw have code to virtualize the order book or perform cross matching among &gt; 2 runners?

---

## 2020-12-17 15:47:06 - issues channel

**Mo**

The cross matched prices will be in the bdatb etc fields in the streaming data as opposed to atb

---

## 2020-12-17 13:12:38 - random channel

**MacrcoPolo**

random idea... is it possible to have a channel consisting of just curated 'best threads'? Not sure if slack allows copying that easily, but figured it might save answering the same questions over and over

---

## 2020-12-16 18:00:51 - general channel

**Oliver Varney**

id recommend doing a little bit of reading of the general chat, then coming up with some specific questions, rather then a broad question if your looking for advice. Maybe try and explain your situation (where are you in your journey) + goals and what you are trying to learn.

---

## 2020-12-16 10:54:28 - strategies channel

**birchy**

[@UPCNDMPSN](@UPCNDMPSN) yes, I do all of those things where the ROI is &gt; 0. Which is not very often. :grinning:

[@UQL0QDEKA](@UQL0QDEKA) Up until a ~6 months ago, when I was using my own polling library, I used nothing but real money as I didn't have a reliable backtesting method and would rather spend the time working on "real" strategies. Then I started using Flumine for it's streaming capability and realised that it was possible to lose money 100x faster than I did previously, so chickened out in favour of backtesting. :joy:

---

## 2020-12-16 07:07:55 - general channel

**liam**

Python?

---

## 2020-12-15 19:41:19 - general channel

**Alessio**

is your problem mainly prefetching during backtest? because there you just read stuff once

---

## 2020-12-15 19:34:35 - general channel

**Mo**

Great question but I don’t know 

---

## 2020-12-15 19:07:54 - general channel

**Alessio**

Youu can wrap the HistoricalDataStream with a 'GzipHistoricalDataStream' if you don't want to patch it.  But that's because i'm not a native pythonist and i didn't know you could patch builtins :stuck_out_tongue:

---

## 2020-12-15 15:25:53 - random channel

**river_shah**

plus watch the videos, cute girl who knows machine learning. win / win

---

## 2020-12-15 12:55:25 - general channel

**river_shah**

wow…thats it. and here I was looking deep through the innards of flumine

---

## 2020-12-15 12:52:40 - general channel

**river_shah**

I am sorry but I am not entirely clear on how and where I do so in flumine

---

## 2020-12-15 12:42:35 - general channel

**river_shah**

[@U4H19D1D2](@U4H19D1D2) how may I use the bz2 file directly with a flumine backtest please? for example this will fail:

---

## 2020-12-15 12:25:05 - general channel

**river_shah**

Ok, the bz2 file gets read by the flumine engine /bflw stream as is?

---

## 2020-12-15 11:44:41 - strategies channel

**PeterLe**

Thanks [@UGV299K6H](@UGV299K6H) I think the ink must have run out of my printer, although the kids still think it is free flowing! :grinning: (The original question went off at a tangent a little, surprised there weren't more comments overall. Would be interested to know how many user licences were issued for TPD )

---

## 2020-12-14 00:48:30 - random channel

**Michael**

That's not his situation. He's putting in money. Even if he wasn't; if you know that the law is being broken and you participate in it then you're part of the enterprise and in this case there would really be no ambiguity about that. That's why a getaway driver is held responsible for a robbery whilst an unwitting taxi-driver wouldn't be even though they might provide an identical service. Like I said, I don't think he needs to worry because in real life the chances of anyone coming after him are negligible, but he wants to know where he stands and it's quite clear that he would be part of the enterprise and answerable for his role in any law breaking. Whether there is any illegality is another question, I don't know what the law is on the Isle of Mann.

---

## 2020-12-13 15:18:49 - random channel

**Alessio**

It depends a lot on the country. IANAL, but the main problem is not the legal requirement or not, but the fact that you never want to be on the other side of an AML check, they are pretty..invasive (and they tend to freeze all your assets if they have some doubt, *then* ask questions -- at least that's what i hear from some of the bank compliance friends).

---

## 2020-12-13 14:58:34 - general channel

**thambie1**

Ahh, that must be why I missed it. I was aware of some inplay stuff for other sports but was pretty confident there was nothing official for soccer. But cool to see that bflw got the unofficial stuff working!  I'm not using bflw which is why I never came across it, but gonna have to read up on that section of the code :slightly_smiling_face:

---

## 2020-12-13 14:52:47 - general channel

**liam**

For example Lee made an example which updates the Market object with the catalogue when backtesting [https://github.com/liampauling/flumine/blob/master/examples/middlewares/marketcatalogue.py|https://github.com/liampauling/flumine/blob/master/examples/middlewares/marketcatalogue.py](https://github.com/liampauling/flumine/blob/master/examples/middlewares/marketcatalogue.py|https://github.com/liampauling/flumine/blob/master/examples/middlewares/marketcatalogue.py) 



Although [@UUCD6P13J](@UUCD6P13J) you should optimise this to only be called on the add_market function as it’s currently being called on every update 

---

## 2020-12-13 14:52:42 - general channel

**Unknown**

There is also an official scores API which currently just has scores for tennis: [https://betfairlightweight.slack.com/files/UBS7QANF3/FU7E3UTDF/scores_api_tennis.pdf](https://betfairlightweight.slack.com/files/UBS7QANF3/FU7E3UTDF/scores_api_tennis.pdf)

---

## 2020-12-13 14:51:07 - general channel

**liam**

You can do what you want, middleware is called on each marketBook update [https://liampauling.github.io/flumine/markets/#middleware|https://liampauling.github.io/flumine/markets/#middleware](https://liampauling.github.io/flumine/markets/#middleware|https://liampauling.github.io/flumine/markets/#middleware)

---

## 2020-12-13 14:48:52 - general channel

**Matthieu Labour**

Can flumine be the middleware and extended such that one can add an additional stream of messages?

---

## 2020-12-13 14:48:50 - general channel

**thambie1**

Huh?!?! I was under the impression that betfair doesn't provide any services for in-play soccer scores, etc. Can you give me a link to the documentation?

---

## 2020-12-13 14:47:30 - general channel

**thambie1**

[@UUE6E1LA1](@UUE6E1LA1) Hmm, good to know. I'm currently have very tight liability controls such that I can't lose much on any given soccer event. But I was not aware this was a failure scenario. Question though, what is VAR?

---

## 2020-12-13 02:52:30 - general channel

**Misha**

If you plan to make money from it I suspect you will have a problem with the IP of providing prices from other sites. The "dodgy" ones may not care, but the legit ones, like Sportsbet, certainly won't be amused

---

## 2020-12-13 02:26:15 - general channel

**Misha**

Beyond that, two questions immediately come to mind. 1) Is this an app that people would want? 2) What do you get out of it?

---

## 2020-12-12 19:42:50 - general channel

**Lennart**

I realise that this might be a super open-ended question but do you know what drives pr-event volatility in horse racing?

---

## 2020-12-12 19:40:48 - general channel

**Lennart**

Hello everyone - another basic question: what markets provide decent volatility whilst working without delay (which I guess is all pre-play?) ? So far I'm seeing some volatility in the last few minutes leading up to horse races

---

## 2020-12-12 18:10:58 - general channel

**Alessio**

in general if you don't need c++-based stuff like numpy you can just pack them in a zip and use them as a layer, for a lot of other things like numpy there are pre-built layers you can just add.. in the end I was happy to skip docker :stuck_out_tongue:

---

## 2020-12-12 12:09:29 - general channel

**Alessio**

[@U4H19D1D2](@U4H19D1D2) hey mate, when you ran Lambdas over the market files, how do you usually ship BFLW? you use a containerized image? or a zippie?

---

## 2020-12-11 23:44:01 - random channel

**Michael**

I've done exactly the same as James and established a few bank accounts just in case. My feeling is that the shortest possible audit trail would be best if questions were ever raised so I've never done any kind of laundering.

---

## 2020-12-11 23:33:06 - random channel

**James T**

For me (and most other individual gamblers), nothing special, just peace of mind if HMRC were to audit me I know I have someone with experience to respond for me. For big syndicates, a good accountant is probably very important to build the right company structure to avoid taxes and so on. 



I imagine receiving lots of money from gambling on a consistent basis would raise question marks from many people (including some banks) who don’t understand the industry. 



Part of me wonders whether my bank just doesn’t know it’s gambling related. My Betfair withdrawals appear as “sporting exch client” rather than “Betfair” on my statement. I think that’s because larger withdrawals go through a different pipeline to smaller withdrawals. So maybe the name doesn’t get flagged up? :man-shrugging:

---

## 2020-12-11 23:22:50 - strategies channel

**Misha**

I won't answer that question directly, but you absolutely have to take care to not overfit here

---

## 2020-12-11 19:06:44 - random channel

**Amanda**

I’m guessing you guys aren’t making much money from the Betfair API if you have to apply for a mortgage? I just pay cash.

---

## 2020-12-11 19:04:20 - random channel

**D C**

Thanks chaps that is all very helpful stuff.

---

## 2020-12-11 19:02:36 - random channel

**James T**

Yep, I went with a broker in the past for a mortgage and they were very helpful. (I used John Charcol). Just be very honest about your situation. They know exactly what checks and information each bank needs so they can advise on the best choice. 



Re: bank accounts, I’d advise withdrawing winnings into an established bank account so it has less chance of raising alarms. I’ve heard that banks are getting stricter with money laundering checks, and my accountant says having somewhere to withdraw money to is becoming a bigger problem for big winners than actually winning the money is. It may actually be better to create a new account to receive your work income for 3-6 months for the mortgage application than to switch where you’re transferring winnings. 



Some mortgage lenders will want to see statements from all your bank accounts and some just your current account where you receive your work income. The brokers will know. 

---

## 2020-12-11 17:42:42 - random channel

**mandelbot**

If you need any help with the painting let me know :art:

---

## 2020-12-11 16:28:58 - random channel

**Lee**

So in the short term some sort of diversified fund (depending on which) is probably the best way to invest and excess winnings? Or are there potential problems with that too?

---

## 2020-12-11 16:07:04 - random channel

**Lee**

Bit of a broad question for the full timers in the uk - how do you give yourself an "income" to get finance on things like a mortgage on an investment property?

---

## 2020-12-11 13:19:12 - strategies channel

**Newbie99**

The recent chat on here about BPE has been quite interesting, since I've started looking at in-play I've definitely noticed some ridiculous fills where the odds have clearly drifted, so I can completely see the logic as to why people get it switched off, however I did have two questions, that hopefully someone could clarify?



Lets say the market is 40/50 you back @ 48, presumably if someone tries to lay @ 60 they match you @ 48, but what would happen if you both had BPE turned off?



Second question, lets say as you place your back order @ 48 during the 1 second delay the price moves, so the market is now 50/60, your order doesn't get executed, but what happens to it, does it behave like a standard cancelled order, or does it just sit there in some sort of Betfair limbo unless you explicitly cancel it?

---

## 2020-12-11 08:15:01 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/ab25ef0fcfd42cff461145c0f83fc43f8a9a0ca3/flumine/streams/marketstream.py#L13|yep](https://github.com/liampauling/flumine/blob/ab25ef0fcfd42cff461145c0f83fc43f8a9a0ca3/flumine/streams/marketstream.py#L13|yep)

---

## 2020-12-11 08:14:04 - general channel

**Charlie 303**

does flumine handle stream connection retries automatically? e.g does it already incorporate the goodies in the bflw prod example: [https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2020-12-10 16:57:45 - general channel

**Michael**

Be aware that Summer flat racing data won't help you much with NH racing in the winter.

---

## 2020-12-10 11:44:46 - general channel

**Jonjonjon**

As a baseline, how long is the delay? Can it cause problems?

---

## 2020-12-09 14:40:28 - issues channel

**Mick**

(my first ever post - forgive me if I'm breaking all the rules!)... I have made some BACK bets successfully but now when I tried my first LAY bet with instruction={'orderType': 'LIMIT', 'selectionId': 2548529, 'side': 'LAY', 'limitOrder': {'price': 8.4, 'persistenceType': 'LAPSE', 'size': 2.332857142857143}} i get place_orders.status = FAILURE .. can't fathom why. Don't know where to begin diagnosing this problem. Any suggestions?

---

## 2020-12-09 14:27:30 - general channel

**Robert**

"If false, runners may be added to the market" yeah had seen this but wasnt sure about the cases this might cover

thanks lots for the help -- I will look into this -- solves our problem nicely if it works

---

## 2020-12-09 14:20:30 - general channel

**Robert**

I know how to get whether a horse is a reserve runner or not using the market catalogue.  I was wondering if there is a way to check if there is a reserve runner still (and not declared runner or non runner yet) but with no care about which horse that is.  And ideally not requiring continuous updating of the market catalogue.  Perhaps using numberOfRunners and numberOfActiveRunners?

---

## 2020-12-09 13:48:44 - general channel

**mandelbot**

Have to say, the more I delve into bflw and flumine the more I enjoy the process. I am learning python through using it and can't think of a better way to learn. Thanks to Liam and the rest of the developers and sorry for all the past and future newbie questions :smile:

---

## 2020-12-09 10:28:29 - general channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/ab25ef0fcfd42cff461145c0f83fc43f8a9a0ca3/flumine/baseflumine.py#L113](https://github.com/liampauling/flumine/blob/ab25ef0fcfd42cff461145c0f83fc43f8a9a0ca3/flumine/baseflumine.py#L113)

---

## 2020-12-08 18:52:22 - general channel

**Oliver Varney**

strange,  some of the decisions on the streaming side initialisation seem a little backwards to me. They seem to prefer making the user do two separate requests (i.e. not sending matched positions) to get to a current state

---

## 2020-12-08 18:26:04 - general channel

**liam**

To other wrapper maintainers / those not using bflw did you know that the rc streaming update may not include all runners and the marketDefinition.runners needs to be used as well to build a correct marketBook? 

---

## 2020-12-08 17:07:11 - general channel

**liam**

Because we [https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4|patch](https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4|patch) it in flumine 

---

## 2020-12-08 16:06:23 - general channel

**Robert**

Although the market catalogues don’t have versions in their response according to betfair documentation. Seems a bit broken since you can can’t connect them easily then to the market books which does have versions. 

---

## 2020-12-07 19:45:46 - issues channel

**liam**

Started with a [https://github.com/liampauling/flumine/issues/344|task](https://github.com/liampauling/flumine/issues/344|task) and an initial [https://github.com/liampauling/flumine/pull/340|commit](https://github.com/liampauling/flumine/pull/340|commit) 

---

## 2020-12-07 17:15:05 - issues channel

**jhaa**

no I use plain betfairlightweight. My average processing time is &lt; 0.01s

---

## 2020-12-07 15:46:51 - general channel

**D C**

You can supply a minimum fill amount to a fill or kill.Other than  that you can't place a bet but demand that only part of it gets matched.... Unless I misunderstand the question

---

## 2020-12-07 13:40:34 - general channel

**Mo**

It’s a good question and I can’t confidently answer but I’m pretty sure it counts as a single transaction

---

## 2020-12-07 13:39:55 - general channel

**D C**

I have had a quick look but can't find the answer. Might seem a stupid question but for the purposes of bet limits per hour numbers, does a fill or kill type order count as a single order if it is NOT matched or is there a hidden or implied cancellation order actioned?

---

## 2020-12-06 18:17:01 - strategies channel

**Alessio**

ok i think we agree. it's a matter of how to benchmark it

---

## 2020-12-06 17:41:15 - strategies channel

**Oliver Varney**

apologies if these are stupid questions I dont use any bookies/ pinnacle

---

## 2020-12-06 16:19:56 - strategies channel

**Oliver Varney**

I think that's a question no one will answer if they have

---

## 2020-12-06 08:48:35 - strategies channel

**liam**

Some discussion [https://github.com/liampauling/flumine/issues/267|here](https://github.com/liampauling/flumine/issues/267|here)

---

## 2020-12-06 08:15:58 - general channel

**Will Morrison**

market_filter = streaming_market_filter(

    market_ids=market_id_list

)

market_data_filter = streaming_market_data_filter(

    fields=["EX_MARKET_DEF", "EX_BEST_OFFERS"], ladder_levels=5

)

---

## 2020-12-06 07:45:04 - general channel

**Will Morrison**

It seems like my market_book objects never contain data for runner.last_price_traded, or any other price-related stuff like total_available, total_matched, etc. Is this a problem that anyone else has seen before?

---

## 2020-12-05 21:06:05 - issues channel

**Jonjonjon**

Thanks [@U4H19D1D2](@U4H19D1D2). I have raised this:



[https://github.com/liampauling/flumine/issues/347](https://github.com/liampauling/flumine/issues/347)

---

## 2020-12-05 17:31:45 - general channel

**Oliver Varney**

flumine is very flexible, it seems like quite a few places could easily do most stuff

---

## 2020-12-05 17:29:07 - general channel

**Oliver Varney**

might be a silly question (havent really looked into the class that much), but generally what is the purpose of the middleware

---

## 2020-12-05 06:58:43 - general channel

**liam**

I will add that to the docs, best practice:



```from flumine.markets.middleware import Middleware



class CustomMiddleware(Middleware):

    def __call__(self, market) -&gt; None:

        pass  # called on each MarketBook update



    def add_market(self, market) -&gt; None:

        print("market {0} added".format(market.market_id))



    def remove_market(self, market) -&gt; None:

        print("market {0} removed".format(market.market_id))```

---

## 2020-12-05 02:48:33 - general channel

**Charlie 303**

In case it helps others, the following is a very basic way to add middleware:

```class Middleware:

    def __init__(self, market):

        pass

   

    def __call__(market) -&gt; None:

        pass

    

    def add_market(market) -&gt; None:

        print('new market added')

        pass



    def remove_market(market) -&gt; None:

        pass



#...etc...

framework = Flumine(client=client)

framework.add_market_middleware(Middleware)```

---

## 2020-12-05 02:33:42 - general channel

**Charlie 303**

Figured that this is where Middleware comes into play, but could only find one example at [https://github.com/liampauling/flumine/blob/master/flumine/markets/middleware.py](https://github.com/liampauling/flumine/blob/master/flumine/markets/middleware.py)....

---

## 2020-12-04 23:54:44 - general channel

**Charlie 303**

thanks! been focused on the mechanics of bflw i forgot to rtfm on flumine :wink:

---

## 2020-12-04 22:01:52 - issues channel

**Jonjonjon**

[https://en-betfair.custhelp.com/app/answers/detail/a_id/408/~/exchange%3A-in-a-horse-race%2C-how-will-non-runners-be-treated%3F](https://en-betfair.custhelp.com/app/answers/detail/a_id/408/~/exchange%3A-in-a-horse-race%2C-how-will-non-runners-be-treated%3F)

---

## 2020-12-04 21:56:06 - general channel

**Lee**

Here’s an example of how flumine does it [https://github.com/liampauling/flumine/blob/master/flumine/worker.py#L120|https://github.com/liampauling/flumine/blob/master/flumine/worker.py#L120](https://github.com/liampauling/flumine/blob/master/flumine/worker.py#L120|https://github.com/liampauling/flumine/blob/master/flumine/worker.py#L120)



---

## 2020-12-04 21:44:56 - issues channel

**Jonjonjon**

Ah nice. Thanks for that [@UD9D2794H](@UD9D2794H). I think I made a mistake with the horse that got taken out... Caius marcus is what I had the problem with. Let me investigate more...

---

## 2020-12-04 21:12:37 - general channel

**Charlie 303**

(not sure if this is an appropriate question) can you give me an example of what kind of opportunities [@U4H19D1D2](@U4H19D1D2)? does this imply that 'riskless' arbs do still occur when bf's xm algo doesn't properly balance the book? For some reason I cant shake the idea that *most of the opportunities one might see in the non-virtual book are going to be squashed in reality by XM...but if you're saying some creep through due to XM not being accurate, how would you know that will be the case?

---

## 2020-12-04 11:36:29 - random channel

**Misha**

My software copes with it because the historical streaming data has the full ladder

---

## 2020-12-04 11:34:46 - random channel

**Mo**

Streaming is cheap so seems like premature optimisation

---

## 2020-12-04 05:10:25 - general channel

**Ben**

Hopefully a simple question, but is there a way to access trade history for a runner in runner books? I can get a listing of all available to back and available to lay offerings, but is there somewhere in the cache for each runner where I can find trade prices and volumes?



I know the stream sends that information, but can't seem to find out how to access if via the bflw classes

---

## 2020-12-03 20:07:00 - issues channel

**birchy**

And then I remembered I'd written a tutorial: Betfair API-NG - Creating SSL Certificates ([http://bespokebots.com|bespokebots.com](http://bespokebots.com|bespokebots.com)[http://www.bespokebots.com/betfair-ssl-certs.php|)](http://www.bespokebots.com/betfair-ssl-certs.php|))

:man-facepalming:

---

## 2020-12-03 19:50:56 - strategies channel

**liam**

Logging control, see example [https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|here](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|here), if you look at the class you can see all the events it receives. I and a few others send the data to an API but you can just log to a csv / db 

---

## 2020-12-03 18:27:14 - issues channel

**Gabriel**

Hey guys, I was just wondering if there is a way to access my current betfair balance within flumine?

---

## 2020-12-03 17:50:13 - issues channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/order/order.py#L249](https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/order/order.py#L249)

---

## 2020-12-03 17:20:36 - issues channel

**liam**

so that first log is the response from Betfair, the second is flumine, we currently wait for the order stream to return the order so you will see `Pending, Executable, Execution Complete` (logic in process.py) however I might change this to handle based on the response, do you see another log after this?



I am unable to replicate your issue and I don’t understand why you are getting the warnings as you shouldn’t, have you changed some of the code base?

---

## 2020-12-03 16:06:57 - strategies channel

**Michael**

No. You're either under-thinking it or thinking it wrong. Excess of thinking in not the problem.

---

## 2020-12-03 15:55:21 - random channel

**PeterLe**

[@U016TGY3676](@U016TGY3676) well helps with commission :+1:

---

## 2020-12-03 15:01:57 - random channel

**Artur Gräfenstein**

It would also be interesting how high the turnover through bflw is. Betfair may want to charge you a super premium commission for providing  Bflw. :grinning:

---

## 2020-12-03 13:20:31 - random channel

**PeterLe**

Just noticed that Salesforce has agreed to buy Slack for $27bn :astonished:, I bet some of the collectives minds on here could build something similar :grinning:…makes you wonder how much BetfairlightWeight is worth now Liam :grinning:

---

## 2020-12-03 13:10:43 - issues channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/execution/betfairexecution.py#L69](https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/execution/betfairexecution.py#L69)

---

## 2020-12-03 12:54:38 - general channel

**Chris**

[@UBS7QANF3](@UBS7QANF3) thanks, I was using the API explorer and seeing it was passing "virtualise": "true", in a bad habit of comparing the API-NG and the Streaming API when I should just be reading the docs, my bad

---

## 2020-12-03 12:51:46 - general channel

**Chris**

With the streaming API when collecting the marketbook info with the API-NG you have the option to "virtualise" which shows the back/lay prices of the opposite side of the books as the price like the website does, if I want to do this when using using streaming do I need to calculate these prices myself by using both sides of the market, or is there some other way I am not aware of?

---

## 2020-12-02 22:02:47 - issues channel

**birchy**

Thanks for the info. Can't remember how to generate them now. Been a few years since I last did my SSL certs. :flushed:

---

## 2020-12-02 19:51:49 - general channel

**Mo**

I’m so regular I don’t need the documentation 

---

## 2020-12-02 19:48:00 - general channel

**Mo**

My suggestion is start the documentation repo and put an FAQ page in it 

---

## 2020-12-02 17:17:11 - issues channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) would it not be better to use just one format for price/size? Bit confusing for newbies. I know I certainly got caught out by the .price/['price'] thing in Flumine.

---

## 2020-12-02 17:03:50 - issues channel

**liam**

Is that code from flumine? Doesn’t look like it 

---

## 2020-12-02 17:01:34 - issues channel

**Jonjonjon**

Is it related to the patching that happens here:



[https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/__init__.py#L12-L14](https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/__init__.py#L12-L14)

---

## 2020-12-02 16:56:04 - issues channel

**birchy**

```available_to_back = runner.ex.available_to_back[0].price

available_to_back = runner.ex.available_to_back[0]['price']```

It's a bit nicer to create a function for getting the price/size as it may also be None. Or you can use:

```from flumine.utils import get_price, get_size```



---

## 2020-12-02 16:26:13 - general channel

**Chris**

I am very low turnover and they had no problem increasing me to 1k

---

## 2020-12-02 12:48:40 - general channel

**Misha**

But that's less of a problem for a fully automated system than minor injuries during the match

---

## 2020-12-02 12:18:49 - general channel

**Mo**

No streaming, not even for the official scores endpoint (due to licensing reasons)

---

## 2020-12-02 10:53:20 - general channel

**Oliver Varney**

In flumine, do fully cancelled orders that have no match at all remain in the market blotter ?

---

## 2020-12-02 10:10:55 - random channel

**Artur Gräfenstein**

What was the problem? big commissions?

---

## 2020-12-02 10:09:29 - random channel

**Jonjonjon**

I don't work with them. But I'm a customer of both. I don't use Betdaq anymore though as I could not work out how to make money on it

---

## 2020-12-02 10:03:03 - random channel

**Jonjonjon**

To be honest, I had a very low fill rate (under 1%) when I started and it wasn't a problem. Betdaq didn't like it too much though and sent me an angry email

---

## 2020-12-01 12:23:59 - strategies channel

**liam**

Cool, the streaming_timeout will also have an impact as this will snap the stream and send through the queue 

---

## 2020-12-01 10:25:45 - general channel

**D C**

As I see it, the market data tells the story overall but there are some things that are good to know - early red card in a football match for example. I really asked the question as there are a lot of these endpoints that appear to keep popping up and knowing how to analyse web traffic is only going to be more useful as time goes by.

---

## 2020-12-01 10:23:38 - general channel

**Misha**

Tennis is a 3 (or 5) second delay, and being a second faster isn't really going to help. But being 10 seconds behind can be a problem

---

## 2020-12-01 10:21:12 - general channel

**D C**

well yes but it is good to have the knowledge of how to access it if/when it does become available. Betfair football scores are so far behind reality I cannot see how anyone finds them useful

---

## 2020-11-30 18:08:46 - general channel

**MacrcoPolo**

I think in general, you have to read up on general async concepts from computer science (futures, promises and such) to understand how/why it's done like that in python

---

## 2020-11-30 18:07:13 - general channel

**MacrcoPolo**

Async in python is pretty tricky I find though, not a lot of great documentation out there...

---

## 2020-11-30 18:05:30 - general channel

**Alessio**

interesting, how do you put something like flumine into an asyncio framework? you have an asyncfunc that polls from it ?

---

## 2020-11-30 18:01:34 - general channel

**MacrcoPolo**

Re the convserations above, I use tornado to keep things async, single stream pushes data for consumption by multiple strats (I don't use flumine though - rolled my own)

---

## 2020-11-30 12:05:35 - general channel

**D C**

On the topic of Python and elementary questions, does Python have a decent and reliable asynchronous HTTPS client package/library/component?

---

## 2020-11-30 11:46:14 - general channel

**Lennart**

Hi everyone, Sorry to crash the party with what I'm sure is a pretty elementary question - I was surprised to see that the place_order()  function doesn't execute before the in-game delay has lapsed

---

## 2020-11-30 11:01:38 - general channel

**liam**

Yeah I use a streaming timeout / snap (built into flumine) to give a constant update 

---

## 2020-11-30 10:55:23 - general channel

**liam**

Streaming is super lightweight so just create a new stream per process, I don’t agree with the design of having a single stream that all your process use (unless you are running at a large scale.. [@UBS7QANF3](@UBS7QANF3) I think you disagree with me)

---

## 2020-11-30 08:31:49 - random channel

**Misha**

You can actually make a profit on the win market like this on tennis with one other piece of information (tested on all matches since streaming started in 2015) :wink:

---

## 2020-11-29 20:23:25 - issues channel

**Aaron Smith**

I can not test it right now, but after a deeper look it actually seems very possible that this is exactly what happend. (dont know how thought, its all been started by flumine and from the same computer)

---

## 2020-11-29 17:56:11 - issues channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/order/process.py#L74](https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/order/process.py#L74)

---

## 2020-11-29 17:50:47 - issues channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/order/process.py#L19](https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/order/process.py#L19)

---

## 2020-11-29 17:46:05 - random channel

**Newbie99**

that was via flumine, wasn't in lightweight mode.



Will try and replicate and report back...

---

## 2020-11-29 17:42:51 - random channel

**liam**

You running bflw in lightweight mode?

---

## 2020-11-29 17:21:22 - issues channel

**Oliver Varney**

my process is this, I override _add_market in the flumine file, I call the list_current_orders, loop through current_orders and recreate the trade and add the orders to that trade, then store somewhere suitable so that its accessible in the main flumine functions (check_market_book,process_market_book, process_orders functions)

---

## 2020-11-29 17:13:43 - issues channel

**liam**

Ah so this message is when you have an order that wasn’t created by the flumine instance, we certainly can cache it so the warning only prints once 

---

## 2020-11-29 17:11:03 - issues channel

**liam**

I assume you are getting this because you have restarted, flumine will try and pull the order in 

---

## 2020-11-29 10:35:58 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/orderstream.py#L51|https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/orderstream.py#L51](https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/orderstream.py#L51|https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/orderstream.py#L51)

---

## 2020-11-29 10:35:34 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/streams.py#L111|https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/streams.py#L111](https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/streams.py#L111|https://github.com/liampauling/flumine/blob/4f08f389a3c5c2722b60252055b143cfdfefb0f7/flumine/streams/streams.py#L111)

---

## 2020-11-29 10:17:03 - general channel

**Oliver Varney**

Morning all, is there a preferable function to create orders from in flumine, i.e process_market_book or process_orders or another place ?

---

## 2020-11-28 06:31:58 - issues channel

**liam**

Here is the logic [https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/backtest/simulated.py#L312|https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/backtest/simulated.py#L312](https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/backtest/simulated.py#L312|https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/backtest/simulated.py#L312)

---

## 2020-11-27 16:20:25 - general channel

**liam**

Should be another before or after which tells you why, you using an old version of flumine?

---

## 2020-11-27 13:44:31 - general channel

**Christian Tox**

Hey everyone, quick question regarding streaming: Is it allowed to run more than one streamer to subscribe to more than 200 markets? Or how do you guys overcome this constraint (if possible)?

---

## 2020-11-27 13:24:17 - general channel

**liam**

Just loop all the orders and sum? We don’t have any specific helper functions for this [https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/markets/blotter.py#L26|https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/markets/blotter.py#L26](https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/markets/blotter.py#L26|https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/markets/blotter.py#L26)

---

## 2020-11-27 10:13:50 - random channel

**Mo**

I like Pythonista but have never used it for something as complex as that. Sounds like this would be better conceived as a web app you can access using the browser on your phone

---

## 2020-11-27 10:12:50 - random channel

**PeterLe**

Morning Folks, I was thinking of building a very simple Python program that I can run on my iphone that can access my master account; obtain the balance on each sub account and provide an overall tally for the day

I just wonder if any of you do this already and the best way to do it ?

Ive never run python on my iPhone before so not sure the best app (Pythonista ?)

No doubt some of you have elaborate dash boards etc I dont need anything fancy, Im just in interested in the single number for the day

Thanks in advance for any guidance

---

## 2020-11-27 09:21:57 - general channel

**Alessio**

At the time, diveintopython3 was good for me

---

## 2020-11-27 09:20:34 - general channel

**A**

Morning. Can anyone recommend a decent book for Python programming suitable for experienced programmers in other languages?

---

## 2020-11-26 16:39:33 - random channel

**MacrcoPolo**

Calls _enter_ and _exit_ methods when entering or exiting the block. See `___exit___`  on `BaseFlumine`

---

## 2020-11-26 16:37:06 - random channel

**Lee**

random question, what is the `with self` doing in this context [https://github.com/liampauling/flumine/blob/master/flumine/backtest/backtest.py#L34](https://github.com/liampauling/flumine/blob/master/flumine/backtest/backtest.py#L34)?

---

## 2020-11-26 12:47:00 - general channel

**Oliver Varney**

accessed via market.market_book in flumine

---

## 2020-11-26 12:38:53 - general channel

**Oliver Varney**

in flumine / maybe also bflw when a runner is removed, I am right in what I am seeing that market_book.runners removes it from its list but market_book.market_definition.runners does not ?

---

## 2020-11-25 22:33:59 - general channel

**Newbie99**

if you're on a delayed key then it will look weird, tbh I found it pretty much impossible for streaming with the delayed key!

---

## 2020-11-25 17:56:09 - general channel

**Lee**

The betfairlightweight and flumine docs are pretty helpful too. Plus going through the examples and reading the code i found useful.

[https://liampauling.github.io/betfair/streaming/](https://liampauling.github.io/betfair/streaming/)

[https://liampauling.github.io/flumine/](https://liampauling.github.io/flumine/)

---

## 2020-11-25 17:54:14 - general channel

**A**

That's good to know. Thanks. Long shot... but is there anywhere with better documentation than Betfair's website? Or am I just going to have to get used to it/&gt;

---

## 2020-11-25 15:32:07 - general channel

**Lee**

you need to import `from betfairlightweight.resources import MarketCatalogue`

---

## 2020-11-25 14:14:38 - general channel

**Lee**

flumine has middleware functionality, i just do something like the following

```class MarketCatagloueMiddleware(Middleware):

    def __call__(self, market):

        with open(catalogue_path) as f:

            market.market_catalogue = MarketCatalogue(**json.loads(f.read()))



flumine.add_market_middleware(MarketCatalogueMiddleware())```



---

## 2020-11-25 14:11:23 - general channel

**Artur Gräfenstein**

Yes the runner names would be really helpful on first message! It would take the load off their API as well.

---

## 2020-11-25 13:56:39 - general channel

**liam**

makes the requests in 25 [https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/worker.py#L117|chunks](https://github.com/liampauling/flumine/blob/c466dc6a076719f0fbb5886bfcded1c400f50207/flumine/worker.py#L117|chunks) so will depend on your ping + number of markets but the logs will tell you

---

## 2020-11-25 13:39:08 - general channel

**birchy**

OK, it's related to:

```market_filter= bflw.filters.streaming_market_filter(

    event_type_ids=['7'],

#    country_codes=['GB'],

),```

Works fine when I use the GB filter.

---

## 2020-11-25 13:06:29 - general channel

**Lee**

I use this [https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L185](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L185)

---

## 2020-11-25 13:01:06 - general channel

**Lee**

Flumine makes the market catalogue call for you. You can access it at `market.market_catalogue`

---

## 2020-11-25 12:58:54 - general channel

**A**

I'm looking at the same here -&gt; [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1606258538466600](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1606258538466600)

---

## 2020-11-25 12:31:27 - general channel

**Alessio**

also, you should be using the streaming API instead of polling for prices

---

## 2020-11-25 09:39:12 - random channel

**Oliver Varney**

Is there any reason why creating many flumine instances using the multiprocess.Process wouldnt work. Not sure if ive missed something out as when I call flumine.run() its seems like the MarketStream and Orderstreams are added and the workers are started but I cant see any market_book events come through. the rough idea was to split strategies onto a few separate accounts (mainly keeping LAY and BACKs seperate) then launch an instance for each account from one service process

---

## 2020-11-25 09:33:59 - general channel

**liam**

Sentry is great / helps me sleep 

---

## 2020-11-25 09:15:59 - general channel

**Oliver Varney**

Id get value out of that personally, anything to help find my inefficient code

---

## 2020-11-25 08:30:24 - general channel

**Artur Gräfenstein**

I’ve already looked for such a database where several team spellings are listed, but couldn’t find anything. Will make my own.

---

## 2020-11-25 08:25:51 - general channel

**Mo**

I agree with [@U016535QCJ2](@U016535QCJ2), name matching is the way to go. You will need to employ a variety of techniques:



1. Normalisation - e.g. replace all dashes with spaces, make everything lower case, substitute tokens like "utd" with "united"

2. Exact matching

3. Fuzzy matching such as Levenshtein distance

4. Maintaining a database of manually curated mappings when it's simply too difficult to derive the mapping programmatically. For example, a female tennis player gets married and changes her surname. One data source has her maiden name, another has her married name. Football teams change their names as well, for example due to mergers

---

## 2020-11-25 07:58:26 - general channel

**Misha**

As I said, it's not a simple problem to solve. I have probably spent a week on development of my matching system over the past year

---

## 2020-11-25 05:55:19 - general channel

**Oliver Varney**

Just out of interest but how are people splitting strategies out in terms of running it. How many individual strategies are they running on an instance of flumine?

---

## 2020-11-24 20:00:23 - issues channel

**brightcake**

lifesaver! All of the solutions on SO didn't seem to be much help

---

## 2020-11-24 19:55:09 - general channel

**liam**

Flumine will send all place requests through the use of packages if required / if it can but that is just to save on threads/CPU cycle 

---

## 2020-11-24 19:47:51 - general channel

**liam**

Flumine still uses placeOrders, streaming is just for market data (listMarketBook) and order data (listCurrentOrders)

---

## 2020-11-24 19:41:51 - general channel

**birchy**

Forgive my stupidity, but I've often wondered why we have Trades _and_ Orders? For polling, it's just a case of building a list of bets and firing them off via `placeOrders` but I have no idea how streaming handles this. I probably need to RTFM.

---

## 2020-11-24 19:33:55 - general channel

**Oliver Varney**

most likely to coupled as I extend the trade class and abstract alot away from flumine.

---

## 2020-11-24 19:33:46 - general channel

**birchy**

Oh nooooo, what have I started now? :man-facepalming::joy:

Surprised the stream doesn't auto reload the previous state, or at least have an option to do so. Bit of an oversight on Betfair's behalf.

Good to see that you've embraced this and have a potential solution already. Regarding my initial problem...what's the recommended way to cancel all unmatched/executable bets on exit/loss of heartbeat using Flumine?

---

## 2020-11-24 19:29:55 - general channel

**liam**

Sweet, what’s the design for this? When do you do it in the flumine startup?

---

## 2020-11-24 19:01:04 - general channel

**liam**

Yeah it’s a streaming limitation, need to inject the complete orders on startup, if someone creates an issue I am happy to pick this up as it shouldn’t be too difficult, the issue is any trade/order state which is then lost but it’s never going to be perfect 

---

## 2020-11-24 16:29:57 - general channel

**mandelbot**

Whats the best way to grab a price n seconds ago in flumine?

---

## 2020-11-24 15:50:53 - general channel

**liam**

[@ULDAVFDRP](@ULDAVFDRP) I believe you do some clever stuff within the trade, flumine will pull in the active orders but not the trade count although we probably could? 

---

## 2020-11-24 15:22:06 - general channel

**Artur Gräfenstein**

It doesn’t solve my problem. I already have a clean database. The problem is the linking to Betfair. Because Betfair doesn’t use unique ids my bot may miss some matches because its an unknown id.

---

## 2020-11-24 14:51:06 - general channel

**Alessio**

Yes, you can use external databases that are a bit more clean

---

## 2020-11-24 13:27:05 - general channel

**liam**

Yes, example [https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|here](https://github.com/liampauling/flumine/blob/master/examples/workers/inplayservice.py|here) 

---

## 2020-11-24 13:25:22 - general channel

**Artur Gräfenstein**

Yes it may be. In any case, this means that Betfair has solved this very poorly. I thought Betfair was the non plus ultra API.

---

## 2020-11-24 13:18:46 - general channel

**Artur Gräfenstein**

From the point of view of a database design, this makes no sense because it means redundancies.

---

## 2020-11-24 12:59:57 - general channel

**sartux**

last question :slightly_smiling_face: what is the method for listing all open orders?

---

## 2020-11-23 21:19:58 - general channel

**Misha**

But the P&amp;L page has had problems for a long time, and I never rely on it

---

## 2020-11-23 20:11:57 - strategies channel

**Michael**

Haha - glad to help. You won't find anything comparable on the BF forum it's mostly me trying to convince half wits that yes probability does exist and yes it does matter.

---

## 2020-11-23 19:23:00 - strategies channel

**Matthieu Labour**

The way I understand [@U01EYDA8345](@U01EYDA8345)’s question is, will there be a point where there won’t be an edge anymore like a game that has been resolved.

---

## 2020-11-23 18:56:40 - strategies channel

**Michael**

Ja, das ist kein Problem

---

## 2020-11-23 18:48:03 - strategies channel

**Michael**

I think your assumption that looking for +EV means forecasting an outcome might be the problem.

---

## 2020-11-23 17:04:49 - strategies channel

**Alessio**

No no they are totally acceptable, but you are saying "price movement implies change in ev". Sounds sane, and on paper it may work if you define price movement by the rules I/you/we think drive the market (it goes to 0EV within a certain time, all information gets incorporated into the market etc..). Question is whether we are right at making those assumptions or not.

---

## 2020-11-23 16:22:55 - strategies channel

**Michael**

It's not a trick question.

---

## 2020-11-23 14:44:14 - strategies channel

**AP**

It’s easy to do with BSP because all of the data is downloadable in CSV format and flumine has made it easy to do with in-play bets too 

---

## 2020-11-23 14:38:01 - general channel

**dan2002**

ok i will use the helper. Thanks.

---

## 2020-11-23 14:35:53 - issues channel

**Matthieu Labour**

Yes :slightly_smiling_face:. A question for me w/ respect to backtesting is should it be done within Flumine or should it be done as a separate system. As I go deeper into the source code, I would be happy to help if i can be relevant. Thank you!

---

## 2020-11-23 14:34:56 - general channel

**liam**

You have a helper property called complete as well, check out the logic [https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L159|https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L159](https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L159|https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L159)

---

## 2020-11-23 14:34:05 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L26|https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L26](https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L26|https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/order/order.py#L26)

---

## 2020-11-23 14:32:51 - general channel

**dan2002**

Hi Liam, if i place an order, then I want to cancel it before place another one so betfair is not going to count exposure on both of my orders at the same time. How to i do it in flumine? what value of  order status shall i wait for?

---

## 2020-11-23 14:23:40 - general channel

**liam**

Yeah controls are important, flumine would block this, thinking about adding a request counter within bflw itself that could be used to prevent this happening 

---

## 2020-11-23 12:35:50 - general channel

**Dave Simonds**

No, my own code that I’ve been running for about 3 years now, don’t worry, flumine is fine, this is my own doing

---

## 2020-11-23 12:31:34 - general channel

**liam**

Dave you using flumine?

---

## 2020-11-23 10:33:22 - general channel

**Mo**

[https://slack.com/intl/en-gb/help/articles/201658943-Export-your-workspace-data#export-data](https://slack.com/intl/en-gb/help/articles/201658943-Export-your-workspace-data#export-data)

---

## 2020-11-23 10:17:30 - general channel

**Jonjonjon**

Would it be easy to add `market_version` when placing orders with Flumine?

---

## 2020-11-23 08:38:34 - general channel

**Unknown**

removed an integration from this channel: [https://betfairlightweight.slack.com/services/B01FH6AHWJ0|outgoing-webhook](https://betfairlightweight.slack.com/services/B01FH6AHWJ0|outgoing-webhook)

---

## 2020-11-22 10:11:39 - strategies channel

**liam**

I would like it to have a python focus but obviously applicable to all languages, brings us back to creating a community page / site or similar, I really like what [https://pysport.org/|pysport](https://pysport.org/|pysport) have done

---

## 2020-11-22 09:24:37 - strategies channel

**liam**

Nope I have just been copying some of the chats from you and [@UBS7QANF3](@UBS7QANF3) over the past few months, any idea on how to lay it out?

---

## 2020-11-21 22:40:22 - issues channel

**birchy**

Flumine monkey patches datetime

---

## 2020-11-21 22:27:55 - issues channel

**Jonjonjon**

I think flumine does. It is not something I'm doing directly

---

## 2020-11-21 17:38:02 - strategies channel

**birchy**

Problem is, I have hundreds of ideas that lead to other offshoots and before I know it I'm looking at something else. :grinning:

---

## 2020-11-21 16:49:25 - strategies channel

**Michael**

Sometimes you see a question and think _"yeah actually I don't think I'll give that away"_ and there are a few things that some people know about but don't talk about but then why should they? I've built my knowledge over more than a decade I'm not going to post it all up for the world to see for free. Even so there's still more valuable, honest and well founded advice given here than I think you can find anywhere else.

---

## 2020-11-21 16:26:04 - strategies channel

**Michael**

Oh I don't think that's fair.. Of course no one gives away their special sauce recipe but I do try to help with methodology, the basics of market dynamics and so on. Some people are fully across all that stuff already but plenty aren't.

---

## 2020-11-21 16:21:30 - strategies channel

**Michael**

The thing is it's hard to formulate a nice way of saying _"I've done well at this and it's been great but I don't think you should waste too much time on it because the reality is that most people fail and it's far more likely that you'll be on that team than this one."_ Even though obviously that's the truth. So instead you answer the questions and try to help even though you know it's probably for nothing at best.

---

## 2020-11-21 16:13:14 - strategies channel

**PeterLe**

...and if your only tool is a hammer, then every problem looks like a nail

---

## 2020-11-21 16:00:42 - strategies channel

**Oliver Varney**

I think partially the reason why you may feel discourage is those that have had success are positive about the experience on here but dont tell you how much work it took and people maybe get the wrong expectation (from my experience at least). I always come back to the idea that if its easy then everyone would be doing it and it would be worthless. probably not helpful but it is reality.

---

## 2020-11-21 13:15:54 - general channel

**Lee**

actually it seems like `place_requests` is total requests made since flumine was running. place_requests from previous hour + transaction_count from last hour

---

## 2020-11-21 10:08:32 - issues channel

**Lee**

You only want to check whatever price you’re posting [https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/examples/strategies/lowestlayer.py#L46|here](https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/examples/strategies/lowestlayer.py#L46|here)

---

## 2020-11-21 02:32:00 - issues channel

**liam**

I have tried everything, I use pympler now to track objects it’s much easier than trying to understand gc 



[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1602168934132000|https://betfairlightweight.slack.com/archives/C4H05ML2E/p1602168934132000](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1602168934132000|https://betfairlightweight.slack.com/archives/C4H05ML2E/p1602168934132000)

---

## 2020-11-21 02:27:37 - random channel

**liam**

I replied a while ago on [https://www.betangel.com/forum/viewtopic.php?t=21823|BA](https://www.betangel.com/forum/viewtopic.php?t=21823|BA) about the problem 

---

## 2020-11-21 02:27:07 - random channel

**liam**

[@ULDAVFDRP](@ULDAVFDRP) as you are aware market impact will be your problem

---

## 2020-11-21 00:42:47 - general channel

**Charlie 303**

has anyone used betfairlightweight within an asyncio project?

---

## 2020-11-20 21:55:11 - general channel

**Charlie 303**

Thanks [@U7E6NE1DM](@U7E6NE1DM) that's helpful to know.

---

## 2020-11-20 21:31:52 - random channel

**Jonjonjon**

Something from information theory might help. I'm no expert. It's what someone told me

---

## 2020-11-20 21:27:19 - random channel

**Jonjonjon**

I lay at BSP when my exit orders don't get filled before the race starts, using PERSIST_ON_CLOSE order type. It's stupid, but it helps other people on here to buy Ferraris.

---

## 2020-11-20 18:09:12 - issues channel

**Lee**

You can use this line just change it from uploading to s3 but write to a file [https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/examples/strategies/marketrecorder.py#L178|https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/examples/strategies/marketrecorder.py#L178](https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/examples/strategies/marketrecorder.py#L178|https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/examples/strategies/marketrecorder.py#L178)

---

## 2020-11-20 14:28:58 - random channel

**Artur Gräfenstein**

I’m glad I can access betfair api directly.

---

## 2020-11-20 13:47:59 - random channel

**Michael**

Betfair is awesome for winning players, fully legit, almost unlimited scale and they help you. I honestly don't see why small/new players would bother looking elsewhere - except maybe to skim off a bunch of sign up offers to get going (although that's not nearly what it used to be).

---

## 2020-11-20 11:36:10 - general channel

**Alessio**

yes, but an algorithm is only as good as the data you feed in. machine learning is garbage in, garbage out, independently from how much data you put

---

## 2020-11-20 11:26:19 - general channel

**Artur Gräfenstein**

Interesting disscussion in the thread. [@U016535QCJ2](@U016535QCJ2) said that it would be almost impossible not to overfit. Isint it the way you find a profitable strategie? You are overfiting it to see if under your defined conditions you will be profitable. You just need to make sure that every filter/definition has enough testcases by its own. If thats the case the overfitting is not a problem.

---

## 2020-11-20 11:20:02 - general channel

**brightcake**

Yeah, i'm currently trying to set it up for soccer and it seems like external data would definitely be extremely helpful. But for now I wanted to try something with only using recorded data as a proof-of-concept before trying anything more advanced.

I haven't really thought about it from value perspective, definitely something for me to think about

---

## 2020-11-20 11:10:20 - general channel

**Alessio**

it is definitely a classif problem, i think the problem though it depends on the sport. for soccer, since it's a scarce-goals game, it's almost like a random event, so you need to use a lot of side data imho. other sports where you have more clear signal somebody is winning during the match, it's probably easier (that's my 2c)

---

## 2020-11-20 11:08:54 - general channel

**Alessio**

not much, for now I only look at markets with extra data on the side to help understanding how dangerous it is to enter now

---

## 2020-11-20 11:08:04 - general channel

**brightcake**

[@U01C12ZEADQ](@U01C12ZEADQ) have you done much in the way of price prediction on Betfair? I'm trying to set it up as a classification problem at the moment and just wondering if there has been some success in this area.

---

## 2020-11-20 10:43:02 - strategies channel

**Artur Gräfenstein**

Im not using this python library. I have wirtten my own libs to fit my needs. As a result I get an ecxel file with graphs and all data I need to understand what is going on. Maybe I can show it later to you if that is what you want to see.

---

## 2020-11-20 09:27:00 - general channel

**Misha**

I am working on tennis (with one other colleague), and our goal is to come up with a probability at any point in any match. If we get this better than the market, we win. Only in the last step do we take our probability and work out how to beat the market

---

## 2020-11-20 06:55:31 - general channel

**Mo**

[@U01FSSHULHE](@U01FSSHULHE) I would suggest that you start by transforming the historic data files into tabular format:



• One row per publish time, selection and price

• Up to you and factors such as your available storage whether you want to do filtering at this stage or not. For example, do you want to keep all prices and have a depth column or just generate the table for the best prices

• Other filtering considerations might include whether you want to only output pre-event data

Put this in a database along with:



• Market level data such as market start time, jump vs flat, distance, race course etc. etc.

• Not immediately a requirement but useful to have at some stage: horse level data

Now you can very easily join and filter to, for example, say you want the best prices on all horses 5 minutes before the scheduled off for all flat races alongside what the horse's eventual starting price was

---

## 2020-11-19 19:26:33 - issues channel

**brightcake**

Strange, I am not doing anything to modify the price at which I'm feeding into flumine. Any ideas as to what could cause this?

---

## 2020-11-19 19:19:49 - issues channel

**Oliver Varney**

[https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/utils.py#L77](https://github.com/liampauling/flumine/blob/fdcf9961330f9807f18029ad7120999d0d62af93/flumine/utils.py#L77)

---

## 2020-11-19 15:08:07 - general channel

**Artur Gräfenstein**

What are you guys working on or what are you doing with BFLW? If anyone want to share his secret.. :smile:

---

## 2020-11-19 13:47:25 - general channel

**Michael**

It won't be a problem.

---

## 2020-11-19 13:42:00 - general channel

**birchy**

You can place 5000 bets an hour via betfair API

---

## 2020-11-19 12:09:41 - general channel

**Newbie99**

My intention was to use node, but then I found this Slack group and decided with the support on offer here it was far better for me to switch to Python, so I pretty quickly abandoned the node idea and just started using Python + BFLW (and more recently Flumine too)!

---

## 2020-11-19 11:58:11 - general channel

**D C**

I use nodejs for certain things. The async nature makes it a great choice IMO (I only place inplay bets) but because I am not an "expert" node coder I tend to use it for fairly simple tasks (price pulling and FoK bet placement off simple triggers) - nothing large scale or overly complex but that is down to my own limitations with the language (not a node expert by any stretch and my code is no doubt very "ugly" to purists - but it gets the job done efficiently and dev time is fast). Decent package support too - didn't take me long to find a good https client tool and decompression package at all. I personally don't use BFLW but if I were coming to this game as a newbie it would certainly be my first choice because of the feedback from other users here and the helpful nature of a lot of the experienced members.

---

## 2020-11-18 09:42:37 - strategies channel

**birchy**

Nice job [@UBS7QANF3](@UBS7QANF3). I didn't realise that you could call CPython directly from C, I'd always assumed that extensions were meant to be native C code that added something that didn't exist already.

---

## 2020-11-18 09:31:34 - random channel

**Mo**

I don't think you personally should care about that but I was asking these questions becaues I was wondering what the requirements would be for my operation to take your bets

---

## 2020-11-18 09:11:48 - random channel

**Michael**

The Indian BF clones/partners/whatever they are have been known to welch on bets without much justification, for example alleging market manipulation on very thin grounds. I helped provide evidence for one syndicate which had been done out of several hundred thousand with no real reason (horse racing). That whole world is very murky and best approached with caution.

---

## 2020-11-18 08:10:11 - strategies channel

**Mo**

I think it takes roughly 83% of the time as the original Python

---

## 2020-11-17 22:11:13 - general channel

**Vincent Mele**

Apologies if this is an obvious question, but is there a way to go from a json serialised MarketBook object to a new MarketBook object?

```#m_book is a valid MarketBook

j = m_book.json()



# Solution is:

copied_m_book = MarketBook(**json.loads(j))```

---

## 2020-11-17 21:34:32 - strategies channel

**Alessio**

given the implementatino of python sort it may be they already do insertion sort on small sized lists, so indeed not sure how much you can get there, if that's the case

---

## 2020-11-17 20:52:06 - general channel

**birchy**

Anyone know of a way to track approximate progress from python multiprocessing? This is specifically for Flumine backtesting but I have no idea how long the backtest will take. In single processes, it's easy enough to keep track of the market count vs total markets (file paths) and calculate % progress, but it's not so easy when multiprocessing.

---

## 2020-11-17 19:12:12 - strategies channel

**brightcake**

How do you guys manage closing out of positions in play within the Flumine framework?

The way I am currently looking at it seems a bit messy... Creating a dictionary with placed orders and then using this dictionary to place the opposite order once some condition is met.

---

## 2020-11-17 18:57:25 - strategies channel

**Mo**

Not sure if you mean some of the functions in the Available class or just some functions more generally; regarding the former, I couldn't easily work out if it's possible to attach a method written in C to a class defined in Python. Regarding the latter: possibly but [@U4H19D1D2](@U4H19D1D2) directed me to the Available class being the bottleneck so that's where I started

---

## 2020-11-17 12:21:17 - general channel

**Mo**

betfairlightweight can handle the official historic data. Start here: [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2020-11-17 12:03:34 - strategies channel

**D C**

Just wondering really if I could reuse any C++ code within a Python project in future  basically

---

## 2020-11-17 11:53:06 - strategies channel

**D C**

OK. I will educate myself in this regard especially now I am having to learn Python myself.

---

## 2020-11-17 11:50:59 - strategies channel

**Mo**

Just to be precise, I am rewriting things in C but as a Python extension using the Python C API rather than a standalone application

---

## 2020-11-17 11:46:57 - strategies channel

**Mo**

By object creation I'm talking about creating Python objects

---

## 2020-11-17 11:46:43 - strategies channel

**Mo**

By reference counting I'm talking about how you need to manage the reference count of Python objects when using the C API so it can do garbage collection

---

## 2020-11-17 11:43:23 - issues channel

**Mo**

The `streaming_update` is the raw mesage from the stream

---

## 2020-11-17 11:42:59 - issues channel

**Jorge**

Yes, that's my question. What is the difference (if any) between the streaming_update and the market_book consolidated in the cache?

---

## 2020-11-17 11:40:00 - issues channel

**Alessio**

also isn't the streaming_update just the pdate while the market_book is consolidated in the cache?

---

## 2020-11-17 11:36:07 - issues channel

**Jorge**

Hi, what is the difference between getting market_book.runners[0].ex.available_to_back[0].price and market_book.streaming_update['rc'][0]['batb']? (assuming they are the same runner_id)

---

## 2020-11-17 11:34:59 - issues channel

**Ruben**

In my case, the support guy I'm speaking to sais that I've made 50 million requests in 3 months (I haven't, I'm just using the market_recorder.py straight from the flumine repo), and also sais he won't provide any more info or breakdown on the particular requests

---

## 2020-11-17 08:19:40 - issues channel

**Jorge**

Hi guys, is it possible to get the Streaming Market Data in Euros when using betfairlightweight? My account is in EUR, not in GBP. For example, I'd like to get the available_to_back sizes in EUR.

---

## 2020-11-17 08:16:57 - strategies channel

**Mo**

From my perspective, I don't think that simply porting the Available class to C is a particularly promising optimisation. I think a big problem is the number of objects that are created and the port won't change that. I started working on it more because it's somewhere to start and I've never written an entire Python class in C before despite using the Python C API to write plenty of functions

---

## 2020-11-16 21:39:04 - issues channel

**liam**

Yeah that isn’t right as it only uses streaming and then the odd catalogue request 

---

## 2020-11-16 21:18:52 - issues channel

**Misha**

Assume that the data you are requesting is not very time sensitive - anything that changes rapidly comes through the streaming API. To monitor all data for all tennis markets (every match, every market) worldwide I am doing about one request per second. So there should be no reason to hit the request API anywhere near as frequently as that

---

## 2020-11-16 21:05:09 - issues channel

**Ruben**

After talking to someone from the bdp support team, it appears my account was closed because I have made almost 50 million data requests in the last three months. That comes down to about 6 requests/second. Is that possible from just using the default flumine market_recorder? that's all I was doing...

---

## 2020-11-16 19:51:51 - issues channel

**brightcake**

Quick Flumine code question: does the selection_id attribute of the Trade object give the runner id?

---

## 2020-11-16 17:49:13 - general channel

**Chris**

I can't see anyway in `streaming_market_filter` to filter based on the events start time, is that because it's not possible, or I am looking in the wrong place? I notice there is `time_range` too but not sure how or if I can use that with streaming

---

## 2020-11-16 13:40:26 - strategies channel

**liam**

Starting looking into optimising bflw and noticed that `create_resource` (the most expensive call in the entire library) was being called twice when using the generator :face_palm:



[https://github.com/liampauling/betfair/compare/task/historical-gen-double-call|Removing](https://github.com/liampauling/betfair/compare/task/historical-gen-double-call|Removing) this has almost halved the processing time for a market so should make a massive difference when used for backtesting

---

## 2020-11-16 13:39:56 - random channel

**Mo**

Yeah I use loads and have never had a problem

---

## 2020-11-16 10:50:20 - issues channel

**Jonjonjon**

My flumine script stops running after a few hours. I'm not seeing anything in the logs to indicate why. Has anyone else seen this before?

---

## 2020-11-16 06:12:22 - general channel

**liam**

Yeah that would help although some users might get a lot of logs from it, could add a variable? log_validation or similar 

---

## 2020-11-15 18:42:57 - general channel

**Ryan Clapham**

Evening, quick question is it possible to record the available lay price with the runners selection id? Thanks

---

## 2020-11-15 17:31:12 - general channel

**Alessio**

question for the footies.. do you have any way to compute the length of the halftime in a specific soccer match?

---

## 2020-11-14 10:15:18 - issues channel

**Misha**

Swings and roundabouts: I can't get discounts on commission via a different plan, but I do have access to historical streaming data through contacts here

---

## 2020-11-13 21:24:53 - issues channel

**Michael**

No - even if you're a good customer they don't like you streaming anything you don't bet on, for example if you bet only on Tennis they won't let you harvest Football for very long.

---

## 2020-11-13 21:23:28 - issues channel

**Ruben**

yes, I will from now on, I thought that as far as I was streaming, it was okay

---

## 2020-11-13 20:07:45 - issues channel

**Ruben**

for reference, I have been collecting data using flumine's market_recorder for about a month, no bets placed

---

## 2020-11-13 18:57:44 - issues channel

**thambie1**

Looks like my account was closed with no notification or warning at all. According to support chat due to "business grounds due to market data control reasons". Didn't look like escalating with them would be fruitful so I put in a ticket through the developer support program. Given that they closed my account at 4pm on a Friday, looks like I'll have to wait till Monday for a response. If anyone has any suggestions or advice on how to resolve this please let me know!

---

## 2020-11-13 15:53:31 - strategies channel

**river_shah**

[@U4H19D1D2](@U4H19D1D2) is C bflw actively under development? I want become a better C dev and a concrete project such as porting strategies from python to C will definitely be good impetus

---

## 2020-11-13 15:45:26 - strategies channel

**liam**

quite enjoying learning about C (can see why python is what it is) and with a lot of the CPython code having c modules I like how pure it is

---

## 2020-11-13 11:36:18 - issues channel

**Chris**

I see it as GB on the API-NG, does that mean the data is different between the streaming &amp; the API-NG, I assumed it was the same but just being presented in a different manner

---

## 2020-11-13 08:38:26 - strategies channel

**John T**

Happy to help out if I can

---

## 2020-11-13 08:38:14 - strategies channel

**John T**

A couple of books that I found helped a bit were python cookbook 3rd edition (chapter 15) and Programming Python, 4th Edition Chapter 20 on Python/C integration

---

## 2020-11-13 07:15:06 - strategies channel

**Michael**

Fully behind your perfectionism though... that's why we have BFLW.

---

## 2020-11-12 23:01:05 - strategies channel

**Michael**

[@U4H19D1D2](@U4H19D1D2) - Maybe I'm missing something or not understanding the problem (probably) but why not just buy a computer with more cores? Even I back-test across a bunch of cores and I'm way behind the pack in terms of programming. I just use multiprocessing and a pool which I'm sure isn't the best approach but it's a whole lot quicker than learning C.

---

## 2020-11-12 20:05:16 - strategies channel

**Mo**

No, Python extension written in C

---

## 2020-11-12 19:45:53 - strategies channel

**liam**

Hmm seems like some secret club where no one needs help as everyone is already an expert 

---

## 2020-11-12 19:40:39 - strategies channel

**Alex B**

Yep, multithreading in python is only really useful if your threads are waiting on network, disk, etc.  They won’t help with compute-heavy parallelism.  Traditionally in python you’d do this by vectorising your code (e.g. numpy), but backtesting doesn’t really fit into that paradigm all too well.

---

## 2020-11-12 19:24:34 - strategies channel

**klozovin**

don't think I've ever seen any other Python impelmentation except the CPython one

---

## 2020-11-12 19:20:51 - strategies channel

**klozovin**

maybe some alternative Python implementation, PyPy possibly...?

---

## 2020-11-12 19:05:41 - strategies channel

**liam**

Got any resources for the C API seems to be very limited info online other than the docs and a few stackoverflow questions 

---

## 2020-11-12 18:56:34 - strategies channel

**Mo**

I’m still available to write any C code if it helps

---

## 2020-11-12 15:20:25 - general channel

**Chris**

Thanks, and I guess the obvious question coming is, is there a limit to the number of streams that can then be opened?

---

## 2020-11-12 15:09:38 - general channel

**Chris**

Probably a silly question but when streaming and hitting the limit of the number of markets (`SUBSCRIPTION_LIMIT_EXCEEDED`) - is that limit per stream that is opened, or across all streams?

---

## 2020-11-12 14:49:25 - issues channel

**lil_algo**

Solved it! "sweden" did the trick :slightly_smiling_face:

---

## 2020-11-12 11:01:10 - general channel

**Mo**

Adding `verify=False` here: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/login.py#L48](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/login.py#L48) is a workaround

---

## 2020-11-12 09:15:05 - general channel

**Mo**

Add a handler to the `'flumine'` logger

---

## 2020-11-12 09:13:52 - issues channel

**Oliver Varney**

and my code cancels stale orders after a period of time, so after that time it repeatably tried and flumine just kept sending.

---

## 2020-11-12 09:12:18 - general channel

**Jonjonjon**

Lots of flumine modules contain this at the top:



```logger = logging.getLogger(__name__)```

What is the best way to send log all of them to a single file?

---

## 2020-11-12 09:10:51 - issues channel

**Oliver Varney**

[@U4H19D1D2](@U4H19D1D2) just herd from another person who has the identical issue, dont believe they use flumine at all

---

## 2020-11-12 06:34:31 - issues channel

**Oliver Varney**

and forwarded it onto Neil and helpdesks

---

## 2020-11-12 00:02:11 - issues channel

**Oliver Varney**

hmm, I have got an order here unmatched that I cant cancel, either through the front end (website) or flumine

---

## 2020-11-11 18:50:50 - issues channel

**Josh**

thanks, I'll poke around and see what I can figure out. Just explicitly using `round` seems to have solved the immediate issue

---

## 2020-11-11 18:44:40 - issues channel

**Josh**

No, just standard Python floats. This issue seems to have cropped up when I upgraded from bflw 2.7.2 to 2.10. I was definitely seeing some floating point issues in some of the prices (e.g. 2.52999999), so I'm not making sure to round(x, 2) everything

---

## 2020-11-11 18:37:48 - issues channel

**liam**

Are you passing in a weird data type? Numpy?

---

## 2020-11-11 17:44:18 - issues channel

**Unknown**

No I record them using the flumine marketrecorder

---

## 2020-11-11 17:18:22 - general channel

**Mo**

Then the file can be dropped into my Windows VM and opened in Tableau. Way way faster than connecting Tableau directly to a database

---

## 2020-11-11 15:03:58 - issues channel

**Remi**

While streaming, if I get an updated market_book from the queue and I change the object like this:

```runner = market_book.runners[0]

runner.ex.available_to_back[0].size += 1.0```

---

## 2020-11-11 15:02:09 - issues channel

**Jorge**

Yes, this is for the streaming case, got it!

---

## 2020-11-11 14:56:22 - issues channel

**Mo**

So I mean that betfairlightweight handles renewing the session token for API-NG calls

---

## 2020-11-11 14:53:37 - issues channel

**Mo**

That is correct but betfairlightweight handles that for you

---

## 2020-11-11 08:18:48 - issues channel

**Jorge**

Hi, when Streaming, is it possible to get information about the market like event_name? The name of the runners would also work for me

---

## 2020-11-10 22:23:28 - strategies channel

**JC**

Is there any python code in betfairlightweight/ flumine for working with the betfair in-running GPS API?

---

## 2020-11-10 20:41:30 - general channel

**klozovin**

it would seem so to me, too... but the way [@U01A92RPAEP](@U01A92RPAEP) phrased his question seemed like there should be another way :slightly_smiling_face:

---

## 2020-11-10 18:15:01 - general channel

**Miroslav**

Hi,



I have the following questions, as far as I am aware William Hill API generates system delay on placing single/multple bets:

• Does betfair exchange API has it?

• So have you ever try to negate/remove this delay?

---

## 2020-11-10 14:53:12 - general channel

**liam**

Flumine uses streaming for markets and orders so you shouldn't have an issue, [@UU1URJ8L8](@UU1URJ8L8) have you asked for a subscription bump?

---

## 2020-11-10 14:47:46 - general channel

**klozovin**

could you say how many requests were you making? at least a ballpark figure... btw, glad you got that resolved!

---

## 2020-11-10 14:47:25 - general channel

**Remi**

Sorry for the many dumb questions. Coming at it more from a math background than from software engineering background.

---

## 2020-11-10 14:45:19 - general channel

**Chris**

In a similar situation where I was using bflw rather than flumine and had my account suspended, back up and running now and trying to get my head around flumine, to confirm if I am getting data with flumine betfair don't have an issue with that like they do with the REST API?

---

## 2020-11-10 14:37:18 - general channel

**liam**

the latter, you subscribe and then new markets are added once available with bflw doing the hard work

---

## 2020-11-10 14:29:48 - general channel

**Remi**

So now I am back! Going to do this streaming thing.

---

## 2020-11-10 12:30:01 - issues channel

**liam**

Streaming is lightweight, subscribing is costly, ignore the markets you don’t want 

---

## 2020-11-10 12:24:22 - issues channel

**Jorge**

My use case is I want to subscribe for market_books of the market_ids I have bots in, and when I launch a new bot I want to add it to the streaming (and remove it from streaming when it stops running)

---

## 2020-11-10 12:21:51 - issues channel

**Jorge**

Hi again, what is the best way to change the streaming.stream.market_filter when the streaming is already running?

Right now I am stopping the streaming, creating another Streaming object and starting it. Using the *[https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|examples/examplestreamingerrhandling.py)* as base code.

---

## 2020-11-10 11:30:45 - random channel

**Newbie99**

in the rules:



If there is any material change to the established role or any ambiguity as to who occupies the position, then Betfair may determine, using its reasonable discretion, how to settle the market based on all the information available to it at the relevant time. Betfair reserves the right to wait for further official announcements before the market is settled.

---

## 2020-11-10 10:15:50 - general channel

**Newbie99**

There may be a better way, but I use a background worker (in flumine) that polls the racecard api and can get track, going etc. from that

---

## 2020-11-10 10:13:48 - general channel

**Oliver Varney**

morning, does anyone know if there is a filter that can be applied to streaming to only stream all weather races?

---

## 2020-11-10 09:32:50 - random channel

**liam**

Interesting how it work, looks to pull in the historic streaming data and then cycle through, however the matching process is a load of crap :laughing:

---

## 2020-11-10 09:26:49 - issues channel

**Jorge**

Aha, I was missing that! Not used to use external libraries in Python myself. Thanks so much liam!

---

## 2020-11-10 09:19:58 - issues channel

**liam**

```        'betfairlightweight': {

            'handlers': ['consoleHandler'],

            'level': 'INFO',

            'propagate': False

        },```

---

## 2020-11-10 09:19:48 - issues channel

**liam**

I added bflw to the loggers and it works fine

---

## 2020-11-10 09:09:19 - issues channel

**Jorge**

Hi, is it possible to configure logging with a dictConfig, _logging.config.dictConfig(dict_log_config)_, when using betfairlightweight?

---

## 2020-11-10 08:57:16 - random channel

**liam**

Having instant notifications when things go to shit helps me not work :grin:

---

## 2020-11-09 19:23:50 - general channel

**liam**

Sure, can you create an issue? It would be on this line [https://github.com/liampauling/flumine/blob/364988c715176ba5d4bc3b2478ca3b38a287f993/flumine/backtest/simulated.py#L204|https://github.com/liampauling/flumine/blob/364988c715176ba5d4bc3b2478ca3b38a287f993/flumine/backtest/simulated.py#L204](https://github.com/liampauling/flumine/blob/364988c715176ba5d4bc3b2478ca3b38a287f993/flumine/backtest/simulated.py#L204|https://github.com/liampauling/flumine/blob/364988c715176ba5d4bc3b2478ca3b38a287f993/flumine/backtest/simulated.py#L204)

---

## 2020-11-09 19:17:57 - general channel

**dan2002**

No, Today I placed an limit order of less than £10 exposure for market on close Persistence type , it didn’t get filled. [@U4H19D1D2](@U4H19D1D2) is it possible modify flumine backtest for this so it won’t get filled in backtest either? Thanks.

---

## 2020-11-09 14:57:22 - general channel

**dan2002**

In flumine, if i place an limitorder with persistance type as market on close. will it be possible for my order get matched soon after i place it, or i have to wait until the SP action to get matched there?

---

## 2020-11-09 10:46:26 - general channel

**liam**

Reminder that this is happening tomorrow, not sure what the impact will be on order streaming if you are not running v2.10.0

---

## 2020-11-09 08:41:29 - issues channel

**Jorge**

Seems to be working, thanks liam! I also had to upgrade pip and python3-dev

---

## 2020-11-09 08:39:53 - general channel

**liam**

You can either log every order as it is created through `_process_order` or at the closure with `_process_cleared_orders_meta` that latter contains a list of all flumine `Order` objects for that particular market as per this [https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|example](https://github.com/liampauling/flumine/blob/master/examples/controls/backtestloggingcontrol.py|example)

---

## 2020-11-09 08:32:33 - issues channel

**liam**

this help? [https://github.com/liampauling/betfair/issues/343](https://github.com/liampauling/betfair/issues/343)

---

## 2020-11-08 18:00:17 - strategies channel

**PeterLe**

Good question, well normally Id say greater than 0, but for the sake of this particular question lets say &gt; 6 figures

---

## 2020-11-08 11:48:37 - strategies channel

**Newbie99**

tbh scathing is good (IMO), I'd rather ask a ton of dumb questions and get scathing answers that actually help, rather than ask a load of questions and get fluffy nice answers that don't!

---

## 2020-11-08 11:43:23 - strategies channel

**mandelbot**

I personally would benefit a lot from a few more sample code examples. Takes me too much time to figure out things like how to place an order x minutes before the off :joy:

---

## 2020-11-08 11:42:33 - strategies channel

**Mo**

Generally I'd agree with that [@UPMUFSGCR](@UPMUFSGCR) but I think in this case the problem is that the right reading material doesn't yet exist. And [@U016TGY3676](@U016TGY3676) wants to address that

---

## 2020-11-08 11:25:19 - strategies channel

**Mo**

In other words, if people have specific questions they should ask away

---

## 2020-11-08 11:24:09 - strategies channel

**Mo**

I hope I've made it clear that I'm happy to try to help anyone no matter how basic their questions are and that any scathing criticism is intended tongue in cheek

---

## 2020-11-08 11:22:05 - strategies channel

**Mo**

In the past we have discussed having some kind of "recipes" documentation/GitHub repository although I think that was more focused on the software development side of things

---

## 2020-11-08 11:16:38 - strategies channel

**birchy**

Morning everyone. Since I've been asking "dumb" questions regarding strategies/markets/etc, I've received a number of PM's from members on here encouraging me to ask more similar questions because they are also learning. It's fairly obvious that there are a small number of professionals on here and a significant number of wannabes. I'm definitely one of the latter.

Based on this, I'm wondering if any of you pros would be willing to put together a list of suitable reading/learning materials for noobs? Understanding the fundamentals of how the markets operate, how to find edges, how to calculate value, what tools you consider essential (nn's, ai, Bayes, indicators, etc) would be a great starting point.

---

## 2020-11-08 10:47:07 - strategies channel

**Jonjonjon**

Same market. Basically, a time series built up from multiple market book updates from the streaming api.

---

## 2020-11-08 10:33:52 - random channel

**Mo**

I am referring to streaming. There is no point in using the REST API to request prices, for scraping purposes or otherwise

---

## 2020-11-08 08:31:39 - random channel

**stephencornelius**

Are you talking about their original REST API (they refer to it as API-NG) such as this code refers to? [https://github.com/betfair/API-NG-sample-code](https://github.com/betfair/API-NG-sample-code)





Or their streaming API which this code refers to? [https://github.com/betfair/stream-api-sample-code](https://github.com/betfair/stream-api-sample-code)





The BetfairLightweight Client allows you to access both API's.





The fact you refer to scraping leads me to believe youre talking about their API-NG as with the streaming API you dont make requests to endpoints, you subscribe to what you want once and then the data gets pushed to you in real time. Therefore if operating correctly you wont miss any data which you can always do when making api requests. Which is why I say the historic might not be representative enough of the data im actually receiving.

---

## 2020-11-08 07:30:13 - random channel

**liam**

They seem to base it on API requests of which streaming isn’t included 

---

## 2020-11-07 14:59:23 - strategies channel

**birchy**

Yeah, overfitting is a problem. I need to get a lot more data anyway, as 1200 markets is not really enough.

---

## 2020-11-07 14:44:59 - strategies channel

**birchy**

[@UGV299K6H](@UGV299K6H) I've generally found the same thing, but I've only recently started using Flumine because it has a simulated matching engine and I recall [@U4H19D1D2](@U4H19D1D2) saying it tends to underplay the matching.

---

## 2020-11-07 14:19:13 - strategies channel

**birchy**

Ohhh...no... I've not been doing that as I assumed the Flumine matching engine would do that. Maybe [@U4H19D1D2](@U4H19D1D2) will confirm?

---

## 2020-11-07 14:12:43 - strategies channel

**Mo**

I don’t use flumine so I don’t know how things are implemented but I mean ensuring that if you take £2 of liquidity that it’s not there for you to take it again

---

## 2020-11-07 13:18:43 - strategies channel

**Mo**

Is this backtesting with flumine? Does it remove matched bets from the order book to avoid double counting liquidity?

---

## 2020-11-07 11:04:58 - general channel

**birchy**

In Flumine backtesting, is there a parameter that shows the total risk or liability for all matched bets on a market?

---

## 2020-11-05 20:55:16 - general channel

**liam**

If you are streaming you should be fine, the recent closures have been because people have been making silly amounts of requests with little or no commission paid 

---

## 2020-11-05 16:56:31 - general channel

**Jono**

no problem, ill be sat here at the desk all evening :slightly_smiling_face:

---

## 2020-11-05 14:43:13 - issues channel

**John T**

My second question on using the library. Looks like in the cache.py file the 'mb' and 'ml' values are recorded and stored into the OrderBookRunner. However when serialise_orders is called it looks like only the unmatched_orders are serialised? Are the 'mb' and 'ml' values returned anywhere?

---

## 2020-11-05 10:16:11 - random channel

**Alex A**

Random question, but all these 1000 odds available to back on Betfair in the US Election, are people really tying up millions in capital by making £11749 at odds of 1000 available to back on Tim Kaine?

---

## 2020-11-05 09:56:00 - random channel

**Alessio**

instead of having to think defensively all the time (like you need to do in python, where you hunt that seldom None) you get into a different paradigm

---

## 2020-11-05 09:44:40 - random channel

**D C**

Perl CAN be written in a legible manner. The problem you can achieve the same things with ugly hard to read code. It is probably a lot better now. Not touched it for years but I would probably still use it now for some quick and easy text file manipulations.

---

## 2020-11-05 09:40:40 - issues channel

**liam**

Released in [https://github.com/liampauling/flumine/pull/316/commits/0299f44990215a4fa6b70d6080d4e213e3bfec77|1.14.4](https://github.com/liampauling/flumine/pull/316/commits/0299f44990215a4fa6b70d6080d4e213e3bfec77|1.14.4)

---

## 2020-11-05 09:39:45 - random channel

**Jonjonjon**

Well, a lot of us are locking ourselves into bflw/flumine. But fortuntely it is open source

---

## 2020-11-05 09:28:30 - random channel

**D C**

[@UN1497LJC](@UN1497LJC) Well I have the hairline of someone in their early 90s which doesn't help....

---

## 2020-11-05 09:07:18 - general channel

**Chris**

I was purely using the REST Api, no streaming

---

## 2020-11-05 09:05:10 - general channel

**Newbie99**

This is quite worrying, how can you tell if you are using too much data and is it all streaming, or a combination of REST calls too? Also, it seems a bit over-zealous from Betfair, why not suspend an account and drop an e-mail explaining the problem?

---

## 2020-11-05 08:13:20 - random channel

**liam**

I have a suite of integration tests that run through all strategies through a handful of markets and check the profit/order count is the same. Found this to be very helpful and helps me sleep at night 

---

## 2020-11-04 20:50:17 - issues channel

**Jonjonjon**

When testing this, by:



Placing a bet for £2.

Cancelling £0.50, leaving £1.50.

Replacing the bet...



The original bet shows £1.50 size cancelled, £0.50 size remaining. Should it be £2.00 size cancelled, £0.00 size remaining instead?



If so, I think the problem is caused by these lines:



[https://github.com/liampauling/flumine/blob/a5d7b8f50cf7350df5e23ba2228902b967eaee7b/flumine/backtest/simulated.py#L138-L143](https://github.com/liampauling/flumine/blob/a5d7b8f50cf7350df5e23ba2228902b967eaee7b/flumine/backtest/simulated.py#L138-L143)

---

## 2020-11-04 09:14:40 - issues channel

**liam**

Opted for the size that is actually placed based on the API response [https://github.com/liampauling/flumine/pull/315](https://github.com/liampauling/flumine/pull/315)

---

## 2020-11-04 08:34:20 - issues channel

**liam**

[https://github.com/liampauling/flumine/pull/313](https://github.com/liampauling/flumine/pull/313)

---

## 2020-11-03 23:40:19 - issues channel

**Jonjonjon**

Should this be replaced with:



```self.size_cancelled += _size_reduction```

[https://github.com/liampauling/flumine/blob/a5d7b8f50cf7350df5e23ba2228902b967eaee7b/flumine/backtest/simulated.py#L138](https://github.com/liampauling/flumine/blob/a5d7b8f50cf7350df5e23ba2228902b967eaee7b/flumine/backtest/simulated.py#L138)



If not, multiple cancellations give strange results.

---

## 2020-11-03 23:34:09 - issues channel

**Jonjonjon**

Should this be replaced with:



`size=order.size_remaining`



[https://github.com/liampauling/flumine/blob/a5d7b8f50cf7350df5e23ba2228902b967eaee7b/flumine/order/trade.py#L112](https://github.com/liampauling/flumine/blob/a5d7b8f50cf7350df5e23ba2228902b967eaee7b/flumine/order/trade.py#L112)



If not, suppose way lay £2@30.0.

We then cancel £0.50, so that the bet becomes £1.5@30.0



If we subsequently replace the order, with price 40.0, it currently becomes replaced with a bet of £2@40, while I would expect it to be replaced with a bet of £1.5@40.0

---

## 2020-11-03 09:35:47 - general channel

**Michael**

Hi all,

Just starting out and a little confused by streaming, the example here: [https://liampauling.github.io/betfair/streaming/](https://liampauling.github.io/betfair/streaming/) works for me. However this seems to print the market only when the Market itself is changed, ie added, goes in play or is closed/finished. How then do you fetch the regular price changes (very often) that you would see in listMarketBook from the stream? Do I need to used Snap()? or do I need some form of separate cache that subscribes to events as briefly mentioned here [https://support.developer.betfair.com/hc/en-us/articles/360000402291-Market-Order-Stream-API-How-does-it-work-](https://support.developer.betfair.com/hc/en-us/articles/360000402291-Market-Order-Stream-API-How-does-it-work-) ?

---

## 2020-11-01 17:47:29 - general channel

**Remi**

And the answer to every single question I ask via the chat service is ‘your account has been closed’.

---

## 2020-11-01 15:57:05 - random channel

**D C**

So there is no problem generating new certificates? Can you have multiple certs or are existing ones invalidated once you attach a new one. I am not very informed on the finer aspects of SSL really. It is that long ago that I cannot remember how you create them but I know the API documentation describes this. I had some similar issues with openssl 1.1.1 and some framework issues because linux distros won't upgrade to 1.1.1 . I am sure there are good reasons for that but it is all rather distracting when all you want to to is refine strategies rather than deal with the SSL nuts and bolts.

---

## 2020-11-01 15:29:06 - random channel

**Twatter**

Random question on Betfair website - Does anyone know if it's possible to find a list of cancelled bets after the event from your account page? e.g. Unmatched bets that have been set to Cancel when an event goes in-play?

---

## 2020-10-31 14:23:07 - general channel

**Goldpan**

and ur not selling tips or services I suppose. I'm thinking it has something to do with the API, but really u need to contact them again. An article I found might help. [http://www.betfairprotrader.co.uk/2016/07/accounts-being-closed-at-betfair.html](http://www.betfairprotrader.co.uk/2016/07/accounts-being-closed-at-betfair.html)

---

## 2020-10-30 11:50:24 - issues channel

**Misha**

No, but given that every message sent has been going through the same single line of code, if there was a protocol problem I would have seen it a long time ago

---

## 2020-10-30 11:21:08 - issues channel

**Misha**

And that's running at least one, if not more, streaming API connections 24/7 since the beginning of 2018

---

## 2020-10-30 11:11:50 - issues channel

**Misha**

Have received this 6 times in 9 days, but never seen it before that (same streaming code running for well over 2 years)

---

## 2020-10-30 08:54:54 - general channel

**liam**

There is [https://github.com/liampauling/flumine/pull/306|now](https://github.com/liampauling/flumine/pull/306|now) pending the minor change in baseflumine.py

---

## 2020-10-30 00:35:28 - general channel

**AP**

Is there an example of how to deal with an order through LoggingControl?

---

## 2020-10-29 21:45:36 - general channel

**klozovin**

how does bflw handle when there's `Infinity` as a value for `totalAvailable` or a `size` in listMarketBook response? what does that even mean when Betfair sends it...

---

## 2020-10-29 19:45:59 - issues channel

**birchy**

Was going to raise a PR but I have nfi how to do it. :flushed:

---

## 2020-10-29 19:09:37 - issues channel

**birchy**

[@U4H19D1D2](@U4H19D1D2) is it worth adding these to Flumine `utils.py` ?

```def ticks_spread(price1: float, price2: float) -&gt; int:

    """returns number of ticks between price1 and price2"""

    try:

        return PRICES.index(as_dec(price2)) - PRICES.index(as_dec(price1))

    except:

        return 0



def runner_vwap(runner: RunnerBook) -&gt; Optional[float]:

    """returns runner vwap calculated from EX_TRADED"""

    try:

        tt = 0.0

        tw = 0.0

        for pd in runner.ex.traded_volume:

            tt += pd['size']

            tw += pd['size'] * pd['price']

        return tw / tt

    except:

        return```

---

## 2020-10-29 12:23:29 - issues channel

**John T**

Just moved to using the betfairlightweight library (why didn't I do this earlier) to replace the one I wrote. So far managed to replace most of my own functionality  by just deleting big chunks of code. The first issue I have found is how do I save the raw data from BF as well as pass it back to the listener so I can use it for replay? I may just be missing something very simple?

---

## 2020-10-29 08:03:50 - general channel

**river_shah**

what is the correct way to login to betfair without needing username or password please? is there ssh only support? [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login) have the certs etc generated, currently just pass username and password as plain text in my python script. would like to make this secure.

---

## 2020-10-29 08:01:24 - issues channel

**Mo**

I _always_ set `lightweight=True` for that endpoint because of the number of times Betfair have sent through data that conflicts with the documentation

---

## 2020-10-28 22:48:42 - general channel

**dan2002**

another question about example.py,, it intended to cancel £1.51 of the £2 order, but i always see the whole £2 order get cancelled instead? Anyone know why? Thanks.

---

## 2020-10-28 21:28:25 - general channel

**dan2002**

Hi I can not see any number been set explicitly in flumine BetfairStream for variable conflateMs when i run example.py, is the default value 50ms ?

---

## 2020-10-27 18:23:40 - issues channel

**Mo**

I'm not aware that's a problem either

---

## 2020-10-27 18:23:15 - issues channel

**Mai**

nothing, i think that was the problem. didnt place a single bet before askimg

---

## 2020-10-27 17:00:23 - general channel

**Seabass**

Got it, that it makes it really inefficient to process the data though. It would be really helpful if Betfair had a field indicating if it was just a currency update. I will give your suggestion a try though, thanks!

---

## 2020-10-27 16:40:57 - general channel

**Seabass**

No, but I saw he had answered a similar question on Betfair's FAQ, I will send him a message. Thanks!

---

## 2020-10-27 14:58:40 - general channel

**Jono**

is there a attribute to in the runner class that lets you know if its listed in the home or away slot for markets where that applies like football, rugby etc? If not not is there a convenient way of determining this? Im looking through basic historical handicap data and am trying to determine the selection in question is the home or away team, cheers

---

## 2020-10-27 04:27:30 - issues channel

**AP**

Yeah thinking it’s a setting in the flumine order validation 

---

## 2020-10-25 15:49:05 - issues channel

**RichL**

Hmm, problem is probably that orjson returns bytes, not python unicode strings.

---

## 2020-10-25 15:44:55 - issues channel

**Vitaly**

I've returned to 1.11.2. It works fine.

Looks like with updating flumine I should change something in my logger. But can't understand what exactly. Can someone suggest?

---

## 2020-10-25 09:22:57 - general channel

**liam**

So the restrictive filter is your problem 

---

## 2020-10-25 09:22:18 - general channel

**Alessio**

select a bunch of markets (via event filter -&gt; market_filter, not a streaming filter)

---

## 2020-10-25 09:18:21 - general channel

**Alessio**

(i could launch an entire flumine framework for each of those markets, but looks a bit overkill lol)

---

## 2020-10-23 19:51:43 - general channel

**Seabass**

Thanks! I used Plotly and Python. The chart is for a soccer game.

---

## 2020-10-23 10:51:52 - general channel

**liam**

Do you mean flumine? Would never change bflw to adjust data that comes from the source

---

## 2020-10-23 09:42:36 - general channel

**Jonjonjon**

I'm wondering if it's worth updating BFLW to exclude those funny data points. Though given the simulated execution delay, and the tiny sizes of those false fills, it shouldn't have much impact on backtesting.

---

## 2020-10-23 09:37:35 - general channel

**Mo**

Looks like ggplot2 theme so either ggplot2 in R or seaborn in Python is my guess

---

## 2020-10-22 23:46:33 - general channel

**Seabass**

Hi, I'm still working on getting a time and sales file generated from the pro market data. You guys were right that when the quantity is not exactly double what was removed from the order book, it is generally because of cross-matching. I am a little confused about how to handle what seems to be currency rounding. Is there any documentation about when Betfair would send trd updates because of currency rounding? These strange updates seem to happen close to the hour change.

---

## 2020-10-22 13:21:35 - strategies channel

**birchy**

In Flumine backtesting, does the matching code replicate the queue system? i.e. if I place a bet at a price with £100 in front of me, does it match the £100 before my bet is matched?

---

## 2020-10-22 11:51:30 - general channel

**ricky**

Yes i am recording data, i wrote class similar to pricerecorder.py ( i stored raw data like back,lay price with other additional data into a file).

If i selected the wrong stream_class, like marketdata to record data, it is likely to cause the CPU overload problem?

---

## 2020-10-22 11:29:52 - general channel

**ricky**

Before i left streaming_timeout unset. The default should be None. I didnt config stream_class either,  because if i set stream_class=DataStream, check_market_book wont called, i left stream_class by default value.

---

## 2020-10-22 11:18:31 - general channel

**ricky**

Thanks Liam, i just upgraded to the latest version. I will set streaming_timeout to None and give a try.

---

## 2020-10-21 14:29:03 - general channel

**liam**

handicap is runner handicap (check out the betfair api docs as its required for orders)

---

## 2020-10-21 12:16:15 - general channel

**ricky**

In football, how to filter UEFA champions league?

i am using flumine,  is there any country_codes in streaming_market_filter for international match?

If i only filter in check_market_book with competition.id i got "trying to subscribe to 1706 markets whereas max allowed number was: 1000"

---

## 2020-10-21 08:16:29 - issues channel

**river_shah**

reverted python back to 3.7. just leaving a note here to say that python 3.9 and macos catalina play very badly together at this point so avoid the change if you can

---

## 2020-10-20 18:12:13 - general channel

**Jonjonjon**

Good question. I am just using Flumine for backtesting at the moment.

---

## 2020-10-20 16:10:24 - general channel

**D**

Hi Peter, I don't think the Python version / library location is really an issue. Once the layer is there you can just import bflw as you normally would. The trickiest thing for me was the certs part. I created a folder in the Lambda for the certs and used this line of code to reference it iirc: certs = r'task/certs'

---

## 2020-10-20 15:18:48 - general channel

**Peter**

First is the paths available for python layers on Lambda. Seems I need to root the package at python/lib/python3.x/site-packages/, so the layer gets bound to the version of python I'm using when I create the Lambda function and I'd need to recreate a new layer if I want to upgrade my version of python, which is a bit of a pain.

---

## 2020-10-20 08:53:12 - general channel

**Peter**

Lambda layer for Betfairlightweight. Before trying to build my own, which i suspect will be difficult on a Mac without learning some docker, I wondered whether anybody here already has one working?

---

## 2020-10-20 07:18:18 - general channel

**James Norman**

Thank you very much PeterLe, that guide was very helpful and I've managed to login with it. Much appreciated.

---

## 2020-10-19 23:24:57 - general channel

**Newbie99**

I believe [@U4H19D1D2](@U4H19D1D2) may be able to help you out with key activation if need be

---

## 2020-10-19 22:35:58 - general channel

**Theo Caplan**

Also this is just using bflw rather than flumine

---

## 2020-10-19 20:13:15 - issues channel

**birchy**

In Flumine backtesting, should `market_catalogue` be populated? I have the following path structure:

`marketdata/marketCatalogue` and `marketdata/streaming`

I can preload the marketCatalogue JSON for parsing pre-backtest, but was wondering if it should already be loaded in `check_market_book()`?

---

## 2020-10-19 19:23:36 - general channel

**Jono**

hey all is it possible to alter an orders handicap market instead of cancelling it and having to place the cancelled amount in a new order at the new desired handicap? Thanks for the help.

---

## 2020-10-19 16:34:32 - general channel

**liam**

Uses the bflw streaming filter for country_code, you can't filter streaming data by start date so just ignore anything you don't want

---

## 2020-10-19 16:30:01 - general channel

**dan2002**

how do i select market based on market start date and country code? streaming_market_filter in Flumine dosn;t have market start date . Thanks

---

## 2020-10-19 09:49:22 - general channel

**river_shah**

hope everyone had a good weekend. trying to look at starting prices, have tried a dozen or so races but SP object is always empty pre inplay. I am using betfair advanced data. do I need to change anything to data filter fields please? my understanding is that `sp.near_price` should start displaying expected starting price before race goes inplay

```selection_id = {int} 12126337

sp = {SP} &lt;flumine.patching.SP object at 0x7fe1187e0cc8&gt;

 actual_sp = {NoneType} None

 back_stake_taken = {list: 0} []

 far_price = {NoneType} None

 lay_liability_taken = {list: 0} []

 near_price = {NoneType} None

status = {str} 'ACTIVE'

total_matched = {float} 700.52



fields = ["EX_ALL_OFFERS",

          "EX_MARKET_DEF",

          "SP_AVAILABLE",

          "SP_TRADED",

          "EX_TRADED"]```



---

## 2020-10-19 08:20:51 - general channel

**Mo**

Not sure I can be of much further use to you then. I think [@UQL0QDEKA](@UQL0QDEKA) might have some tips, I seem to remember him having and solving similar problems

---

## 2020-10-19 07:08:17 - general channel

**Mo**

Certificate creation instructions are here: [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login#Non-Interactive(bot)login-CreatingaSelfSignedCertificate](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login#Non-Interactive(bot)login-CreatingaSelfSignedCertificate). What problems specifically are you having?

---

## 2020-10-18 12:07:05 - general channel

**Alessio**

(didn't want to speak bad of flumine :P)

---

## 2020-10-18 12:00:46 - general channel

**Alessio**

funnily, flumine does that, but it doesn't send that info to the strategies

---

## 2020-10-17 23:42:26 - issues channel

**Lee**

I had the same issue the other day, it’s a problem with orjson 3.4. I just downgraded orjson version but can also try below 

---

## 2020-10-17 20:01:38 - general channel

**Ruben**

question about order logging to flumine users: those that log the status of your orders, do you do it because it is the only way to rebuild your position in case of a failure? for posterior data analysis? because you don't trust betfair?

---

## 2020-10-17 11:19:08 - general channel

**Rob (NZ)**

is there any good example tutorial videos of setting up and running things like Flumine ,

---

## 2020-10-17 11:12:50 - issues channel

**Rob (NZ)**

so i was missing those attributes, cheers for the help

---

## 2020-10-17 11:07:41 - issues channel

**Rob (NZ)**

should I be putting my password into a specific file? (this is to get flumine running)

---

## 2020-10-16 13:50:25 - random channel

**Alessio**

(btw, to upload you can start from boto3 python pkg)

---

## 2020-10-16 13:48:30 - random channel

**Mo**

Maybe a dumb question maybe not but have you compressed them?

---

## 2020-10-16 12:10:24 - general channel

**dan2002**

another question is that in example.py,do process_market_book and process_orders run on different threads?

---

## 2020-10-16 11:06:11 - general channel

**Lee**

there's some good examples [https://liampauling.github.io/flumine/](https://liampauling.github.io/flumine/) and there's also a couple of examples in the repo

---

## 2020-10-16 10:15:04 - random channel

**D C**

I think on the Betfair side things are not helped by the fact that there are multiple place markets sometimes. Particularly in larger fields.

---

## 2020-10-16 09:42:22 - general channel

**liam**

Take a list and chunk it [https://github.com/liampauling/flumine/blob/master/flumine/worker.py#L107](https://github.com/liampauling/flumine/blob/master/flumine/worker.py#L107)

---

## 2020-10-15 18:30:14 - general channel

**Seabass**

This makes it a lot more complicated to generate the time and sales file. Got it, thank you for the help!

---

## 2020-10-15 18:25:32 - general channel

**Seabass**

Okay, I think that makes sense. It's similar to implied orders on a derivatives exchange. Okay, I will check it out in more detail, thank you for the help [@U4H19D1D2](@U4H19D1D2) and [@UBS7QANF3](@UBS7QANF3)!

---

## 2020-10-15 13:30:23 - random channel

**D C**

Thanks [@U4H3EEV45](@U4H3EEV45) that is very helpful indeed.

---

## 2020-10-15 10:19:33 - random channel

**Jonjonjon**

Random question... But is the RTX 2060 a gaming graphics card? If so, would it be useful on Linux?

---

## 2020-10-15 09:43:57 - random channel

**Twatter**

(actually - the only drivers I've ever had problems with on Linux are Blu ray drivers/drives, but these days most laptops don't come with them anyhow...)

---

## 2020-10-14 12:57:03 - general channel

**river_shah**

cool, I’ll see how to do it.

---

## 2020-10-14 12:31:27 - strategies channel

**ricky**

Did any one have problem withdraw money from bookmarker? ( like Novibet )



My Novibet account suspended 12 weeks ago, because i request to withdraw money, even after i sucessful verfitication my account.

Every time when I asked Novibet customer service to update the status of my account. They will reply as "the review of your account by the responsible department is still in progress we do not have any further information to share at the moment. As customer service they cannot provide any time frame for this review. And ask me to wait."

It already 12 weeks now without any lucks.



There are two things I probably can do now

1. wait for Novibet update

2. complaint to AskGamblers or the operator's ADR service IBAS.



Any suggestions on this issue?

---

## 2020-10-14 02:43:12 - general channel

**AP**

When using flumine, is there a method to extract how many seconds has elapsed since a market went in-play?



I'm guessing it's not: `elapsed_seconds_closed`

---

## 2020-10-13 23:04:58 - strategies channel

**Mo**

No because you need to take an opinion on the relationship between the probabilities and how to infer them from each market

---

## 2020-10-13 18:08:57 - general channel

**azevedo**

flumine MarketRecorder handles network issues already right? just wanted to ask what happens on restart. say your connection was down for 15mins, would you miss the data/updates that happened during that period?

---

## 2020-10-13 15:53:47 - general channel

**Lee**

[https://github.com/liampauling/flumine/blob/master/flumine/backtest/backtest.py#L135](https://github.com/liampauling/flumine/blob/master/flumine/backtest/backtest.py#L135)

---

## 2020-10-13 15:52:31 - general channel

**Jonjonjon**

Does flumine simulate the inplay delay when backtesting?

---

## 2020-10-12 20:32:56 - strategies channel

**birchy**

The Mrs is pretty good at helping to spend it as well. If she knew what I was doing, she'd be writing a list of things we "need". :flushed:

---

## 2020-10-12 19:54:35 - strategies channel

**Lee**

You do have `max_selection_exposure` to help you too, it really helps me feel more comfortable

---

## 2020-10-12 17:21:48 - general channel

**liam**

The way flumine monkeypatches datetime that will cause all sorts of issues, there will be a clean way to do this but I can't think right now however its on my todo list

---

## 2020-10-12 17:14:04 - general channel

**Ruben**

Is there any example script on how to merge individual market files recorded with the PriceRecorder into an event file, so as to backtest several markets of an event simultaneously?

---

## 2020-10-12 15:32:32 - general channel

**liam**

it took them 5 years to get to position to sell streaming data

---

## 2020-10-12 14:44:25 - general channel

**Mo**

Yes I scrape the market catalogues I an interested in on an hourly basis and upsert into RDS. However, I don't use flumine

---

## 2020-10-12 10:26:19 - strategies channel

**liam**

and to answer [@U016TGY3676](@U016TGY3676) question, average of 4.49% ROI (profit/size_matched) across all strategies/markets this month

---

## 2020-10-12 10:13:05 - strategies channel

**Remi**

Related to the ROI question, how many bets are you able to get matched per day on average?

---

## 2020-10-12 09:04:16 - general channel

**liam**

bflw [https://github.com/liampauling/betfair/blob/master/HISTORY.rst#290-2020-10-12|2.9.0](https://github.com/liampauling/betfair/blob/master/HISTORY.rst#290-2020-10-12|2.9.0) now released, minor change to only call the clear stale cache on every new market rather than every update (thanks @synapticarbors) Any issues let me know

---

## 2020-10-12 08:34:16 - general channel

**Ruben**

I thought it wasn't possible to backtest several markets simultaneously with flumine?

---

## 2020-10-12 07:22:38 - general channel

**river_shah**

flumine does not remove closed markets in backtest as otherwise it will remove blotter objects and will lose simulated pl etc

---

## 2020-10-10 16:31:01 - general channel

**Lee**

no problem

---

## 2020-10-10 16:30:53 - general channel

**ricky**

[@UUCD6P13J](@UUCD6P13J) Looks good, i will give a try, thank you for your help.

---

## 2020-10-10 16:23:04 - general channel

**ricky**

market_filter=streaming_market_filter(

        event_type_ids=[1],

        market_types=[

            "MATCH_ODDS",

            "OVER_UNDER_25",

        ],

        country_codes=["GB"],

    ),



If above is the high level market filter, Any example how to filter only "premier league" in check_market_book?

---

## 2020-10-09 21:48:26 - issues channel

**Lee**

I tested these two files on flumine 1.12.0 and works fine so there's definitely a regression.

---

## 2020-10-09 21:46:47 - issues channel

**Jonjonjon**

[@UUCD6P13J](@UUCD6P13J) The problem is because I'm iterating over a list of orders that include the order violations.

---

## 2020-10-09 21:44:09 - issues channel

**Jonjonjon**

Thanks [@U016535QCJ2](@U016535QCJ2).



[@U4H19D1D2](@U4H19D1D2) - do you think we need to make BFLW adjust for this scenario? Or perhaps do some analysis to see how often we get crossed prices?

---

## 2020-10-09 21:41:51 - issues channel

**Misha**

Tennis streaming data contains quite a few of these

---

## 2020-10-08 21:38:02 - general channel

**birchy**

Probably being a twat here...but when backtesting with Flumine, I'm seeing orders in the blotter with status `EXECUTABLE` and a `simulated.profit != 0.00` which seems wrong to me. I know bets can be partially matched, but that should give us one part `EXECUTION_COMPLETE` and one part `EXECUTABLE` with a zero P&amp;L as it hasn't been matched?

---

## 2020-10-08 19:54:24 - random channel

**Newbie99**

I read point 3 as covering [@UU1URJ8L8](@UU1URJ8L8)'s point (I think). What I believe [@UGV299K6H](@UGV299K6H) is saying there is that in specific markets you could have a unique scenario (and this only works if bankroll is limited), where (very simplistically) the following could occur.



Lets say you only have £10 in your account, nothing more, you do the following:



fair value = 3 (or higher, doesn't matter so long as its above 2.9)

trade 1: back £10 @ 3

trade 2: lay £10 @ 2.9

trade 3: lay £10 @ 2.9



You now have a +EV bet, with the same risk going in-play, but your return is higher, than had you initially taken the +EV bet and layed £10 @ 2.9 initially.



At least I think that's (simplistically) the point (obviously if not bankroll limited you could just lay in larger size).

---

## 2020-10-08 19:54:06 - random channel

**river_shah**

in the idealised setting, you’d invest 100% of the bankroll.

---

## 2020-10-08 19:52:03 - random channel

**river_shah**

no, in the case of arbitrage you max out to your bankroll + leverage. i am speaking here theoretically. lots of things go bump in arbs.

---

## 2020-10-08 19:20:52 - random channel

**Michael**

3: As [@UBS7QANF3](@UBS7QANF3) has illustrated: in situations where a market will support escalating stakes some well judged -EV hedging can facilitate better growth of bank roll. Whether this is workable in practice depends on the specific character of markets in question. In markets that won't support escalating stakes Mo's illustration is not applicable.

---

## 2020-10-08 18:13:12 - random channel

**Mo**

I don’t disagree with you but I did have that in mind with odds that are not extreme, a medium size edge on the initial bet and the idea of a pre-event bet followed by a hedge in-running. I think that football or tennis markets could easily support the kind of sizes we’re talking about with a six figure bankroll

---

## 2020-10-08 18:09:31 - random channel

**Michael**

I could sign up to this without problem if the title was different. 'Why hedging at -EV is optimal' implies it's always or usually optimal - which in fairness is not what I think you mean.

---

## 2020-10-08 17:10:00 - random channel

**Mo**

For illustration purposes it has to be specific. I agree there are shortcomings, such as not taking account of commission, that the bank cannot scale infinitely (but the flip side is that practically speaking once the bank reaches a small enough size you are wiped out), and that the mean of the unhedged final return is greater than the mean of the hedged. However, I don’t believe that any of these things affect the conclusion and with an 83% better median return there is a lot of wriggle room for the conclusion to be the same, just not as large a disparity. Personally I think that you saying for almost all cases always bet with +EV is _exactly_ the problem. This is simply not true and rules like this persist the misinformation. Everyone can benefit from negative EV hedges to grow their bankroll faster and larger. 

---

## 2020-10-08 14:46:12 - random channel

**Mo**

This is not intended to address the question of stop losses specifically although I think it might be possible to reframe it without much effort. I am only showing that there are situations where not only is it good to place a negative EV bet but it is in fact optimal. 

---

## 2020-10-08 12:59:25 - random channel

**Jonjonjon**

We seem to have diverged quite a lot from the original point of the question.



Could/should we implement offset orders within Flumine framework? Or should users who wish to use them implement their own solutions?

---

## 2020-10-08 12:10:09 - random channel

**liam**

Your maths is wrong, when you treat the two bets separately the second will show negative EV (as expected). I believe the problem lies in the combing the two probabilities at the different times, once the selection drifts to 3 its chance of winning changes and thus the initial probabilities can no longer be used.



I don't think its mathematically possible to accurately predict win, win with drift and lose as you have with 0.27, 0.24 and 0.48 because the last two are related. What you can say is that the the selection drifts to 3.0 72% of the time which means 72% of the time we place the negative EV bet.

---

## 2020-10-08 09:42:21 - general channel

**liam**

[https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4](https://github.com/liampauling/flumine/commit/64ae76f0cb5571a040ce9904febf35df733931c4)

---

## 2020-10-08 09:42:11 - general channel

**liam**

We patch it flumine because people complained it wasn't fast enough  [https://github.com/liampauling/flumine/blob/b1717c7b13909d15fae865c88ecfd2108a4786d6/flumine/patching.py#L2](https://github.com/liampauling/flumine/blob/b1717c7b13909d15fae865c88ecfd2108a4786d6/flumine/patching.py#L2)

---

## 2020-10-08 09:41:34 - general channel

**liam**

Ahh is this within flumine?

---

## 2020-10-08 09:41:13 - general channel

**river_shah**

have looked at the comment as well. sorry trying to understand further. why is direct attribute access not working (stackoverflow was not helpful).

---

## 2020-10-07 22:26:56 - random channel

**Michael**

Sorry I mis-read your question - Probabilities do change in time so it's rational to place different bets at different times. In the scenario you mention it was first rational to place your initial back bet at 2.01 (or whatever better than 1.5) and later it might be rational to place a lay bet anywhere better than 2 because the situation has changed, but those two bets have no relationship to each other, they are two separate +EV bets. The fact that they're both in your account rather than being struck by two different people is of no significance.

---

## 2020-10-07 21:34:57 - random channel

**Michael**

Our example gives us 3 points that we can put on the graph to help us plot the line. A bet with a very negative EV (that's your back bet at 1.01) would be virtually certain to match, so you have a point on your graph at the top left hand corner. A bet with a very positive EV (your back at 1000) would be extraordinarily unlikely to match – so that's a point in the bottom right corner. Your 0EV bet (backing at 2) goes in the middle of the X axis, and it was likely but not certain to match so it's almost at the top of the Y. Now that you've got three points you can guess the shape of the curve that connects them, for these purposes it doesn't matter exactly what shape you draw, all that matters is that you can see that the right hand half of the line (where the +EV bets are) slopes down from a probability a little bit below 1 (slightly less than certain) to almost 0 (virtually impossible).

---

## 2020-10-07 15:54:41 - random channel

**Michael**

Then you know that you're going to get a +EV bet and a -EV bet and that the +EV one will out-weigh the -EV so overall you'll be matching +EV bets. We're all making individual -EV bets all the time because we can't avoid it, that's fine. It's knowingly matching -EV bets that's the problem and when you 'trade out' that's what you're doing. EDIT: You might also be getting 2 +EV bets because the 0EV price was mid-spread.

---

## 2020-10-07 14:14:46 - random channel

**Jonjonjon**

In my personal (using BFLW, not Flumine) code, I have code that does automatic offsets.



So I try to enter with a fill or kill. If that gets filled, it places the offset order. This is a limit. Not a stop. I don't use stops. I scale my bets such that I am willing to ride out any potential loss on an individual trades.



However, if I did not use a fill or kill, the logic could be complicated. As what should the code do if there is only a partial fill? What if it is partially filled, and the appropriate hedge size is not a valid bet size?



What if it is partially filled in really small clips? A bot that hedged every small clip could run afoul of transaction limits/costs.



What if the user wants to cancel the original, partially filled trade, and the hedging state is left in a mess due to reasons stated above?

---

## 2020-10-07 14:11:26 - random channel

**liam**

[https://github.com/liampauling/flumine/issues/267#issuecomment-687744021](https://github.com/liampauling/flumine/issues/267#issuecomment-687744021)

---

## 2020-10-07 14:10:19 - random channel

**Newbie99**

Anyway we digressed there slightly....I think the original point was about whether offsetting orders should be included in flumine, in a roundabout way I was saying I thought for some they might be useful (even if not optimal)!!! :zipper_mouth_face:

---

## 2020-10-07 13:57:57 - random channel

**Jonjonjon**

I almost wish I hadn't asked the original question.

:older_man:

---

## 2020-10-07 13:53:54 - random channel

**Michael**

That's their problem. The maths is the same.

---

## 2020-10-07 13:46:45 - random channel

**Newbie99**

No problem at all, its not personal and I'm not claiming I can do so, I'm merely engaging in the debate :slightly_smiling_face:

---

## 2020-10-07 13:42:42 - random channel

**Twatter**

I can't help but translate this into the Stock market world. If an investor took a position on a stock/company, then the best positions are made when the price is lower than perceived value of the company. But that might not eb true forever...

---

## 2020-10-07 13:42:11 - random channel

**Newbie99**

I would argue that question can not be answered without knowing timescale

---

## 2020-10-07 11:08:39 - random channel

**liam**

Bankroll is crucial, my understanding is that traders look around the 1-3% ROI mark with the focus on turnover to get the profit up. When I started I was the worst at getting value and then hedging but when you look at the results it just doesn't make any sense.



[@UBS7QANF3](@UBS7QANF3) I am surprised you don't agree, finding value is the hard part, why give it away?

---

## 2020-10-07 10:59:02 - random channel

**Mo**

People don’t have infinite bankrolls. The ability to remain solvent and be able to place future bets is important for maximising long term wealth

---

## 2020-10-07 10:41:04 - random channel

**Jonjonjon**

[@U4H19D1D2](@U4H19D1D2) I like your comment here:



[https://github.com/liampauling/flumine/issues/267](https://github.com/liampauling/flumine/issues/267)



_*Stop Loss*_

_Basically Hedge used by those who want to lose money quickly.._

---

## 2020-10-07 09:44:32 - random channel

**Jonjonjon**

Within my own code, I plan on changing it to help identify entry/exit trades. Hopefully it could be useful for other people, and it won't increase the risk of collisions so it will be safe.

---

## 2020-10-07 08:50:57 - random channel

**Remi**

Obviously old bflw could still be available to them

---

## 2020-10-07 08:23:21 - issues channel

**liam**

yeah anyone who uses bflw, but note this instance is processing every racing market and around 15k orders per day

---

## 2020-10-07 08:21:51 - issues channel

**Lee**

oh so people who use bflw with their own framework will probably see the same issue?

---

## 2020-10-07 03:53:51 - general channel

**ChickenMAn**

Sup everyone. Python developer and football lover. Think I'm in the right place.

---

## 2020-10-06 22:54:51 - general channel

**Misha**

It is the ONLY guaranteed way to match a bet you place and the bet updates coming through the streaming API, and doesn't rely on any state management in your own software (as long as you store the bet requests, or give that field enough information to uniquely identify any bet)

---

## 2020-10-06 17:09:59 - general channel

**liam**

the book will be up to date if streaming

---

## 2020-10-06 15:36:01 - general channel

**Oliver Varney**

in flumine that is. I have changed it to suit my requirements

---

## 2020-10-06 14:34:14 - general channel

**Mo**

Depends if flumine relies on that reference being unique

---

## 2020-10-06 14:33:25 - general channel

**Jonjonjon**

I'm wondering....



Will the gods of clean code and Python damn my soul if I hack this:



```self.id = str(uuid.uuid1().time)```

And take the first 4 characters to store my own string of data

---

## 2020-10-06 14:27:05 - general channel

**Jonjonjon**

So I'm trying to mak  my new bflw/flumine code stateless.

---

## 2020-10-06 14:26:44 - general channel

**Jonjonjon**

I've had difficulties in the past storing stuff in databases. I'm not a full-time pro like yourself. So in choosing to use a MySql database a few years ago, my system is now very hard to migrate.

---

## 2020-10-06 14:22:13 - general channel

**Mo**

In what way does Flumine use it?

---

## 2020-10-06 11:24:47 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/63b119ddda855572a4f436810e719e4b70dd22bb/examples/examplestreaminghistorical.py#L34](https://github.com/liampauling/betfair/blob/63b119ddda855572a4f436810e719e4b70dd22bb/examples/examplestreaminghistorical.py#L34)

---

## 2020-10-06 11:04:32 - random channel

**Remi**

For my phone etc I always dread updating to the new version but I feel with python it always improves :slightly_smiling_face:

---

## 2020-10-06 11:02:28 - random channel

**Remi**

[https://docs.python.org/release/3.9.0/whatsnew/3.9.html](https://docs.python.org/release/3.9.0/whatsnew/3.9.html)

---

## 2020-10-06 06:36:15 - issues channel

**Misha**

Is Python/Flumine running as a 32-bit application or a 64-bit application?

---

## 2020-10-06 06:30:48 - general channel

**liam**

Flumine uses bflw so should be the same but the amount of points / conflation is based on how quickly you can pull the data off the socket 

---

## 2020-10-05 23:10:51 - issues channel

**Jonjonjon**

Thanks Connor. Are they susceptible to heat problems?

---

## 2020-10-05 20:00:24 - random channel

**Newbie99**

Sorry, I meant when streaming

---

## 2020-10-05 19:28:26 - issues channel

**Connor Jardine**

Hi, I’m having issues running etfairlightweight on a raspberry pi, just wondering if anyone has been successful and if they can help me with the issue? Thanks :)

---

## 2020-10-05 15:39:33 - general channel

**Ian**

Hi all, quick question -I’ve had a scan of the BF api docs and would I be correct in thinking that the only the runnerId is available from the stream and to collect additional meta (e.g. runner name, trainer - for horse markets) the API-NG needs to be used?

---

## 2020-10-05 14:19:58 - general channel

**ricky**

[@UUCD6P13J](@UUCD6P13J) Thank you for your message, by default, everything save to one output.txt file? do you know how to configure each football matches save to individual files?

How you manage each files ( or market id) with corresponding event name?

---

## 2020-10-05 09:55:00 - random channel

**Mo**

No problem :+1:

---

## 2020-10-05 09:53:56 - random channel

**D C**

Even better a full list of them. Google is not proving to be at all helpful in this regard.

---

## 2020-10-04 22:37:19 - strategies channel

**Misha**

Dust - has caused all my overheating problems

---

## 2020-10-04 15:58:03 - strategies channel

**Jonjonjon**

When I reapplied thermal paste on my laptop it did not help that much. So it's probably a job left to the competent.:disappointed:

---

## 2020-10-04 15:57:07 - strategies channel

**Mo**

Yeah it sounds like a thermal paste problem

---

## 2020-10-04 15:56:37 - strategies channel

**Jonjonjon**

Would reapplying thermal paste on the cpu help? Or upgrading the cooler? Also, if it is dusty and clogged, that will make it hotter. I reduced temps on my gpu from 90c to 85c by using an air duster on it.

---

## 2020-10-03 06:21:49 - issues channel

**liam**

Yeah only from the stuff you buy [https://github.com/liampauling/betfair/blob/63b119ddda855572a4f436810e719e4b70dd22bb/betfairlightweight/resources/streamingresources.py#L32|https://github.com/liampauling/betfair/blob/63b119ddda855572a4f436810e719e4b70dd22bb/betfairlightweight/resources/streamingresources.py#L32](https://github.com/liampauling/betfair/blob/63b119ddda855572a4f436810e719e4b70dd22bb/betfairlightweight/resources/streamingresources.py#L32|https://github.com/liampauling/betfair/blob/63b119ddda855572a4f436810e719e4b70dd22bb/betfairlightweight/resources/streamingresources.py#L32)

---

## 2020-10-02 11:50:54 - random channel

**Misha**

But the latest developments throw everything "up in the air" anyway. Hard to see how today's news is good for Trump though

---

## 2020-10-01 14:50:28 - general channel

**Misha**

I run each application using their own streams, but I can pretty much run everything in one application (any number of strategies can be implemented in the same engine). My rationale is that the streaming API is very efficient, so I see no reason to duplicate that functionality to "share" streams. You are only limited by the number of streaming connections, which is 10, but each streaming connection can have its market limit increased from 200 upwards

---

## 2020-09-30 21:56:57 - general channel

**klozovin**

there's no need to auth and/or send session token when using _inplayservice_? (not using the Python wrapper, just trying something out in the console)

---

## 2020-09-30 11:37:04 - random channel

**Misha**

My view would be that market making with Betfair and various sports is very specific, and you would probably do best by studying the particular markets and poring through the data. I can tell you that there is basically nothing in common between making markets for pre-play horse racing (have done that) and the market making employed for in-play tennis (have studied that in detail). Background info is always good, but nothing beats detailed experience. So would help (of course) but probably not to any great extent

---

## 2020-09-30 09:09:11 - general channel

**liam**

Yeah pending is an internal flumine status to say it is going through execution 

---

## 2020-09-28 22:09:30 - issues channel

**birchy**

I have a favour to ask...I've been offered a GPS feed via Betfair, so am wondering if anyone can point me to some python source code to get started with? Have also asked betfair, but obviously they're all at home with their feet up right now.

---

## 2020-09-28 16:39:05 - general channel

**Mo**

Yes, it's intended for use on Betfair historic data or files scraped using flumine

---

## 2020-09-28 16:11:07 - random channel

**liam**

flumine uses streaming so the marketBook does not contain orders as per the docs

---

## 2020-09-28 13:42:18 - random channel

**liam**

I thought you have to create them yourself when not python

---

## 2020-09-28 13:14:59 - random channel

**river_shah**

not sure about pycharm, but certainly for clion + python plugin have managed to get all include directories and python paths to work seamlessly together. all autocomplete and reference look ups work for a mixed code project.

---

## 2020-09-28 12:08:08 - general channel

**darren b**

Hey, I'm just starting out. I've downloaded and extracted some historic data for a market. Is there a simple way to view this as a line chart using python? Or would I need to carry out some pre-processing of the data to get it to work properly? Thanks

---

## 2020-09-27 19:41:57 - random channel

**Oliver Varney**

as [@U4H19D1D2](@U4H19D1D2) said, if your doing basic stuff why not just use flumine / betfairlightweight

---

## 2020-09-27 19:40:30 - random channel

**Jonjonjon**

Is redis suitable for storing/querying Betfair streaming files?

---

## 2020-09-26 22:03:54 - strategies channel

**PeterLe**

hi [@UGV299K6H](@UGV299K6H) I think the 'problem' i have is that because ive been using a successful system all these years, i find myself gravitating back to that method. I think if anything i've muddied the water by adding new inputs (remember Occams razor?). I was hoping to use the data solely to discover new ideas and methods. So still very much exploring I love the challenge, thats what keeps most of us doing it day in day out! Edit: I was reading around this last night and it falls into "the Law of the instrument" category (See wiki). Ie if you only have a hammer, then every problem to solve looks like a nail..cognitive bias. I guess just being able to recognise this is a step forward to growth :grinning:

---

## 2020-09-26 21:50:25 - strategies channel

**PeterLe**

I meant using the data once fully implemented. Ive only ever done in-play (horses), Id prefer not to say why, but I actually think that this is the easiest area to master. My initial intention by adding the GPS feeds were to use that data as the primary criteria for new in play systems, but Ive not found that yet. If anything Ive found Ive been using the data to bolster existing in-play strategies.  There must be many people reading this who dont have the GPS feeds thinking they are missing out (I did too). I may be wrong (as Ive only had this a couple of weeks), but my truly honest opinion is that if a person cant make money off the standard API data in play, then this feed isn't going to turn a losing trader into a profitable one. If you are a profitable trader already, then it like getting a new set of tools, but you still need to learn how to use them

---

## 2020-09-26 21:48:12 - general channel

**Unknown**

But....



Suppose one thousand £2.00 bets were placed at 2.00 (assuming that is fair value).



The 2% payer would expect to win £980. Lose £1000.



Adding that to some scenarios in my spreadsheet, I can see it beating 5%/50%, while helping to keep the Total Charges% above %.



But I guess the ability to bet at 2.00 fair value isn't really possible.

---

## 2020-09-26 19:47:15 - strategies channel

**PeterLe**

[@U016TGY3676](@U016TGY3676) if you can’t get via Betfair, you could drop George Swindells (TPD) an email and see if they would give you a trial at a reduced rate. He’s a good guy and very helpful. Just a note on the GPS feeds in general. I found it a strep learning curve and it’s def not a silver bullet

---

## 2020-09-26 17:15:50 - strategies channel

**Michael**

It's problematic though because the data is inconsistent.

---

## 2020-09-26 17:07:27 - strategies channel

**birchy**

Based on the no response, I guess I may be the latter. :thinking_face: 

[https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1601129635034400|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1601129635034400](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1601129635034400|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1601129635034400)

---

## 2020-09-26 17:00:01 - general channel

**azevedo**

hey guys! a quick question on football. does bf ever change (at in-play) the line ranges it offers for handicaps (-4.0 to +4.0) and total goals (0.5 to 8.5)? Im talking about rare high-scoring cases, have there been precedents where they added extra lines say 9.5, 10.5 total goals etc. ?

---

## 2020-09-26 16:07:05 - general channel

**Michael**

The question of whether you can keep yourself out of a higher PC bracket in the future is more complicated than it first appears too.

---

## 2020-09-26 14:22:53 - strategies channel

**birchy**

What are your thoughts on the Betfair API `ScoresAPING/v1.0/listRaceDetails`? I've been experimenting with it for getting race status but I'm not yet convinced it can be relied on.

---

## 2020-09-25 17:12:52 - issues channel

**Mo**

Python's sort of irrelevant here, it's your shell that expands `~` to your home directory. I wouldn't expect any programming language to make the substitution

---

## 2020-09-25 17:10:38 - issues channel

**D**

Ah, yeah I am - I’m a newbie to python. What does the `/` resolve to? I assumed it was project root?

---

## 2020-09-25 16:37:31 - issues channel

**Mo**

Are you using `~/certs` in Python? Because I doubt it will expand `~` to your home directory

---

## 2020-09-25 11:14:02 - issues channel

**Misha**

A quick question: why did you decide to send out periodic snapshots when there are no updates?

---

## 2020-09-25 11:04:37 - issues channel

**liam**

Yeah the framework pushes out all MarketBook updates through the event queue but then it also sends out snaps every x `streaming_timeout` seconds, which means when comparing the publish time to the current time it will create this warning as it is technically stale data but in reality it's not. Need to look at maybe adding a flag to any updates which are from a snap to then prevent this warning

---

## 2020-09-25 10:18:45 - strategies channel

**Mathias Tejs**

I'm interested in the same question for football/soccer and so far the best I've found [http://whoscored.com|whoscored.com](http://whoscored.com|whoscored.com) which has a lot of event-data on the shots, passes etc. during the game and [http://www.football-data.co.uk|www.football-data.co.uk](http://www.football-data.co.uk|www.football-data.co.uk) has historically provided odds for a lot of games - cup games are missing unfortunately. Would love to hear what other people use :slightly_smiling_face:

---

## 2020-09-24 20:28:53 - general channel

**klozovin**

that's 10 streaming connections, regular request/response HTTP API is not affected by that?

---

## 2020-09-24 19:38:32 - strategies channel

**Newbie99**

I know this question gets asked a lot, but its impossible to go back and search back far enough!!



I'm trying to decide which provider to get a one off download of historical result data (just results with basic meta stuff, nothing too crazy), going forward I can get what I need from recording etc, but want a one off data dump. There's plenty of places, but anywhere to avoid/any stand out provider?

---

## 2020-09-24 15:40:48 - general channel

**Chris C**

Hi all,

quick question on the max number of connections / sockets with betfair. For my account it's currently set to 10. Has anyone had success increasing the number of max connections?

---

## 2020-09-24 14:42:34 - general channel

**Dave**

I am at a point where I want to transition from a dedicated process that collects my tick data (your epic flumine client [@U4H19D1D2](@U4H19D1D2) ) to something that just dumps whatever the strategies would be recieving, so the data collection is really just a small component in the grand scheme of things (and one use case for pub/sub). Thanks all!

---

## 2020-09-24 14:34:20 - general channel

**agberk**

We actually do the republishing with redis; for a component which just wants to consume particular data I don't want there to be a dependency with the Betfair API

---

## 2020-09-24 14:30:04 - general channel

**Misha**

I'm with [@U4H19D1D2](@U4H19D1D2) on this one. Just use the streaming API internally to each client. Why complicate things

---

## 2020-09-24 14:25:00 - general channel

**liam**

Betfair distributed event stream using kafka -&gt; streaming client (nice and simple per client and scalable as Betfair handle that)



Betfair distributed event stream using kafka -&gt; streaming -&gt; redis -&gt; client (not simple and involves redis scaling)



You would basically be replicating the problem betfair has already solved and then trying to solve it again yourself

---

## 2020-09-24 14:20:22 - general channel

**Dave**

It is good to know it's not CPU intensive tho (running flumine has proved that tbh) - less cores to pay for in the end!

---

## 2020-09-24 14:19:13 - general channel

**Oliver Varney**

Think [@U4H19D1D2](@U4H19D1D2) right, streaming is cheap. My use case is not just to store the current state from the stream

---

## 2020-09-24 14:17:34 - general channel

**liam**

Using bflw you can subscribe to all racing and it won't even touch your CPU

---

## 2020-09-24 14:17:05 - general channel

**liam**

Why bother? Betfair already does this for you through kafka -> streaming

---

## 2020-09-24 12:50:29 - issues channel

**Andrey Yunoshev**

I downgrade to flumine==1.6.3, and everything OK with streaming timeout 0.1 - have any warning. But it just mean old version not have this warning at all?

---

## 2020-09-24 12:32:44 - issues channel

**Andrey Yunoshev**

Streaming timeout = 2s

---

## 2020-09-24 12:26:14 - issues channel

**liam**

Streaming timeout at 0.1 won’t help as it will process extra snaps every 0.1s 

---

## 2020-09-24 09:31:53 - general channel

**river_shah**

can orders inserted via api / flumine be visualised in tools such as betangel ladders and manually cancelled if the need ever arises?

---

## 2020-09-23 16:44:02 - general channel

**liam**

if you want race data / results use the [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/racecard.py|raceCard](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/racecard.py|raceCard) endpoint that the site uses

---

## 2020-09-23 13:32:27 - general channel

**Twatter**

Interesting little reverse engineering and stuff - github has a number of code entries for the text "betstream-view", but ultimately I'm not sure of how to capitalise on this data! Looks helpful to others though...

---

## 2020-09-23 12:27:53 - general channel

**JonM**

Hi all, just wondering how people tend to end their Flumine frameworks once kicked off with framework.run()?  I'm wondering about more graceful ways than using a keyboard interrupt or killing the process!

---

## 2020-09-19 09:35:55 - general channel

**Taking Value**

Does anyone here work on Betdaq too? If so is their a similarly excellent python library that is the equivalent of betfairlightweight that you would recommend.

---

## 2020-09-18 13:07:10 - general channel

**Jorge**

Anyway, my question regarding Betfair acting as a Market Maker was directed to see if there is room for market making strategies

---

## 2020-09-18 11:30:13 - general channel

**Jorge**

Hey guys, one general question, does Betfair act as a Market Maker providing liquidity in the markets?

---

## 2020-09-18 10:32:18 - issues channel

**liam**

here is the [https://github.com/liampauling/flumine/blob/52d31acab3dd7aa4194e6c5ee2aef67405c4c877/flumine/streams/datastream.py#L99|logic](https://github.com/liampauling/flumine/blob/52d31acab3dd7aa4194e6c5ee2aef67405c4c877/flumine/streams/datastream.py#L99|logic) if your interested, all streams use it

---

## 2020-09-18 08:33:31 - issues channel

**Dave**

It's possible! DO droplet. I'll have a peek through the logs. How does flumine handle network issues? Just reconnect and re-subscribe to markets once network is available again?

---

## 2020-09-18 07:00:24 - issues channel

**liam**

Sounds like it’s your network then, logs might help, are you on the cloud?

---

## 2020-09-18 06:49:55 - issues channel

**Dave**

During streaming, let me gather more info then (thought it may be a known issue!). Cheers

---

## 2020-09-18 06:37:40 - random channel

**Peter**

They do generate a fair bit of heat. But it's never risen to the level of a problem (except on very hot days when the wife instructs me to close them down to avoid overheating the office).

---

## 2020-09-18 06:13:54 - issues channel

**liam**

That doesn’t do [https://liampauling.github.io/flumine/advanced/#parameters|anything](https://liampauling.github.io/flumine/advanced/#parameters|anything) when recording data, do the timeouts come when subscribing or during streaming?

---

## 2020-09-17 22:10:52 - random channel

**Jonjonjon**

[@U9JHLMZB4](@U9JHLMZB4)  Did any of your machines have overheating problems? I was told that mixing high end processors with cheap motherboards causes heating problems.

---

## 2020-09-17 13:59:58 - issues channel

**agberk**

Might not care about supporting python3.5 anymore but just to let you know - the recent `orjson==3.3.0` dependency is only available on python &gt;=3.6; had an issue with a 3.5 venv

---

## 2020-09-17 09:31:44 - general channel

**D C**

[@U4H19D1D2](@U4H19D1D2) Can you expand on this "the ability to know if the market has moved right at the point of matching is very valuable.. HFT guys would kill for this" ? I am somewhat confused as to how this is helpful. I mean if you match at a larger price than you ask for you assume the market has drifted and if you don't get matched immediately (or after IP lag) then you know the market price has come in. If subject to a IP delay, the stream will update you on the market movement during that delay. I get the feeling I am missing something and I am not sure if it's something obvious or something very subtle?

---

## 2020-09-17 09:10:12 - general channel

**Jono**

Morning everyone, i was wondering how to correctly make use of the historical streaming service. Can the .bz2 files outputted from the examplehistoricdata script be used immediately in the examplestreaminghistorical script?

---

## 2020-09-16 23:52:57 - random channel

**Misha**

[@U0160E9HS2G](@U0160E9HS2G) - I can't vouch for the official scores endpoint, but the website scores don't have it. You need access to the navigation part of the Betfair API to check, but sometimes you can discern by the name of the tournament. A combination of keeping your own tournament lookups in conjunction with checking the ATP/WTA/ATP Challenger/ITF Mens/ITF Womens calendars will give you the data

---

## 2020-09-16 22:39:33 - general channel

**Ruben**

When backtesting with Flumine, since -I believe- market files are processed one after another, am I right in assuming that, in process_market_book(), market.event will contain only the market that we are processing?

---

## 2020-09-16 14:28:27 - issues channel

**liam**

you shouldn't get that with just bflw, I would try without your code to try and isolate

---

## 2020-09-16 14:26:47 - issues channel

**jhaa**

I am likely missing something that is not in bflw but in my own code

---

## 2020-09-16 13:40:58 - strategies channel

**JC**

Where there is an in-play delay, is it possible to cancel/ reduce size or in any way change/update a bet during the delay before it is offered to the market? Also (this is a noob question) when would it be useful to use replace_orders() or update_orders() and do the same in-play delay rules apply to their usage as well?

---

## 2020-09-15 09:24:02 - general channel

**D C**

It's funny. As a mathematician I spend all my time thinking about how to generate an accurate value for a runner probability. Then you realise that even if you get there you have to contend with lots of other practical issues around how to optimise profits based on things like that.

---

## 2020-09-15 09:04:10 - general channel

**liam**

it being the potential problem

---

## 2020-09-15 07:39:34 - general channel

**Oliver Varney**

[@U016TGY3676](@U016TGY3676) one problem with updating it constantly is that if you can get the information ahead of time you can manipulate the market (not sure if this somewhat happens currently)

---

## 2020-09-14 19:12:17 - issues channel

**liam**

That’s a ram/CPU issue however orjson is quicker thus uses less CPU so it will help but sounds like you need to profile 

---

## 2020-09-14 17:57:36 - issues channel

**liam**

[https://github.com/ijl/orjson#numpy](https://github.com/ijl/orjson#numpy)

---

## 2020-09-14 17:56:08 - issues channel

**liam**

so orjson can do that but it's an option, can you not convert to a python float beforehand?

---

## 2020-09-13 21:33:00 - issues channel

**Ruben**

makes sense [@UFTBRB3F1](@UFTBRB3F1), thanks for the help [@UUCD6P13J](@UUCD6P13J)!

---

## 2020-09-13 21:28:05 - issues channel

**Newbie99**

I'll have to defer to [@U4H19D1D2](@U4H19D1D2) for that, but my guess is that when recording the data it makes sense to capture the streaming data, take a snapshot of the market catalogue and then include that, rather than attempt to somehow get the market catalogue separately (as it isn't streamed)

---

## 2020-09-13 21:27:19 - issues channel

**Lee**

market catalogue is a separate from the streaming data. You can record the data in a similar way to the market stream here [https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L186|https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L186](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L186|https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L186)

---

## 2020-09-13 21:18:48 - issues channel

**Ruben**

When backtesting with flumine, is it expected for the `market.market_catalogue` object to be `None` in all calls to `process_market_book()` ? The `market`  object seems to be populated, but the attribute `market_catalogue`  which is what I use to access selection names, is always `None`

---

## 2020-09-13 13:18:02 - general channel

**D C**

OK I will start with youtube. I agree with you [@UBS7QANF3](@UBS7QANF3) - this is how I usually go about things but I need to know WHAT I need to sign up for before doing so. I think all devs are used to shitty documentation. I guess maybe I start with a few youtube videos for overview then sign up and get stuck in.

---

## 2020-09-13 13:15:49 - general channel

**Mo**

I really feel you have to learn by using it. The documentation is shit and there are a vast number of services they offer so I think you just need to get stuck in

---

## 2020-09-12 12:42:10 - general channel

**Michael**

Is there documentation on how that works anywhere?

---

## 2020-09-11 22:46:33 - issues channel

**Jonjonjon**

I just added it here: [https://github.com/liampauling/flumine/issues/270](https://github.com/liampauling/flumine/issues/270) HOpefully my thoughts make sense

---

## 2020-09-11 21:15:12 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1595766099328400|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1595766099328400](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1595766099328400|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1595766099328400)

---

## 2020-09-11 18:38:49 - general channel

**liam**

I believe it will be what [@UFTBRB3F1](@UFTBRB3F1) is seeing with the queue filling up due to low ram, see issue [https://github.com/liampauling/flumine/issues/269|269](https://github.com/liampauling/flumine/issues/269|269)

---

## 2020-09-11 12:06:04 - issues channel

**DH**

Not with `async=True` though, if I've understood correctly? (just updated my initial question for clarity)

---

## 2020-09-11 12:02:31 - issues channel

**DH**

I'll investigate - when I look at my streaming latencies (published time vs utcnow()) they're very close to 10ms. And other requests like listing markets are around 20ms. :thinking_face:

---

## 2020-09-11 09:23:39 - issues channel

**liam**

Np mate, you are helping us all :slightly_smiling_face: my normal use cases means I don't hit these problems

---

## 2020-09-11 02:07:08 - general channel

**Chris**

Can you give more info here?

I am using the default filter and received trd messages in the mcm messages earlier today.

Default Filter:

```DEFAULT_MARKET_DATA_FILTER = filters.streaming_market_data_filter(

    fields=[

        "EX_ALL_OFFERS",

        "EX_TRADED",

        "EX_TRADED_VOL",

        "EX_LTP",

        "EX_MARKET_DEF",

        "SP_TRADED",

        "SP_PROJECTED",

    ]

)```

Example Data:

`{"op": "mcm", "pt": 1599764467703, "clk": null, "mc": [{"id": "1.172246112", "rc": [{"atl": [[12, 350.85]], "trd": [[12, 7019.34]], "tv": 18660.5, "id": 48317}], "tv": 181019.99}]}`

---

## 2020-09-11 00:21:59 - general channel

**nthypes**

Something strange is happening. The "mcm" message is not streaming _trd_ deltas. Is this normal ?



This is my filter:



```      marketDataFilter: {

         fields: ["EX_BEST_OFFERS_DISP","EX_BEST_OFFERS","EX_ALL_OFFERS","EX_TRADED","EX_TRADED_VOL","EX_LTP","EX_MARKET_DEF","SP_TRADED","SP_PROJECTED"],

         ladderLevels: 2

      }```

---

## 2020-09-10 21:41:28 - general channel

**Chris**

Yes, they were sent by flumine on the same machine with the same vpn session

---

## 2020-09-10 21:40:09 - general channel

**Lee**

Were the previously matched orders sent by flumine on the same machine? I believe it filters the orders by hostname

---

## 2020-09-10 21:37:54 - general channel

**Unknown**

I have matched orders that were originally sent from flumine but I don't see them getting added to the blotter. Is there a different way that I am supposed to access them?

Included screenshot to provide context. Mainly, the blotter length is two, which represents the two active orders but does not include the previous matched orders that have net exposure. Note that the matched orders were sent by flumine session that was killed and they potentially filled while flumine was not listening (not sure if this makes a difference)

---

## 2020-09-10 20:17:35 - general channel

**liam**

If they were created by flumine then yes

---

## 2020-09-10 17:04:06 - general channel

**Chris**

Do matched and unmatched orders that existed in a market before starting flumine ever get added to the blotter after starting flumine? From some light testing yesterday I didn't see them getting added but I could be mistaken.

---

## 2020-09-09 19:50:26 - general channel

**Jonjonjon**

For the backtests in question, I was only looking at the last 10 minutes before a race.

---

## 2020-09-09 16:49:26 - general channel

**Jonjonjon**

Wasting lots of time tinkering with my new machine. My Ryzen 9 3950X  can backtest 1,000 markets, using Flumine, in 45 seconds.

---

## 2020-09-09 16:47:38 - general channel

**Jonjonjon**

Alas for that bit of my code base it is using BFLW only. I'm currently using Flumine for my backtesting, but that has yet to bear any fruit.

---

## 2020-09-09 16:36:09 - general channel

**liam**

your using flumine yeah?

---

## 2020-09-09 16:01:46 - general channel

**Jonjonjon**

[https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1591873545205700?thread_ts=1591861538.194100&amp;cid=CTPL3R3FU](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1591873545205700?thread_ts=1591861538.194100&amp;cid=CTPL3R3FU)

---

## 2020-09-09 14:07:41 - general channel

**liam**

I don't recognise those docs as it doesn't even match up with the streaming API but the 200 limit is a 200 limit and you would need to get it raised by emailing bdp

---

## 2020-09-09 12:49:09 - general channel

**Misha**

A more pertinent question is "is your peak detection algorithm accurate enough to be useful"? Very easy to implement an algorithm, much harder to determine whether the results are useful

---

## 2020-09-09 12:13:23 - general channel

**D C**

[@U013MLED3V1](@U013MLED3V1) Sorry - I used to work as a researcher in surface metrology so to me your question is very deep and the answer depends on scale, goals, resource restrictions and assumptions. But I understand you just want a fast answer and maybe something quick and "dirty". But ML is surely overkill for such a problem.  FWIW I would look at applying some type of discrete wavelet transform but again that is probably overkill depending on your needs. Hope you find an answer that matches your requirements.

---

## 2020-09-09 12:07:06 - general channel

**Unknown**

Thanks [@UUE6E1LA1](@UUE6E1LA1) but my question was really simple, a name of algorithm, if it is common one, for instance from ML, or stock indexes, any one here is using. From answers, no one here is using peak detection, at least from those ones replying. I implemented 3 types of algorithm, from screenshots is clear which one I will use.

---

## 2020-09-09 08:30:12 - strategies channel

**Remi**

I have a question about generating commission. Am I generating (implied) commission if return in a market is exactly 0.00 ?

E.g. I lay a runner at 2.00 and then back the runner at 2.00

OR I back runnerA at 2.00 and then I back runnerB at 2.00 and one of them wins

Both cases same stake size for each bet.

---

## 2020-09-08 22:42:24 - general channel

**Misha**

[@U013MLED3V1](@U013MLED3V1) - no general algorithm will work. Some prices are forced one way by the way money is put on the prices. In-play is influenced by scores. You can't come up with a good general solution when you are solving different problems

---

## 2020-09-08 12:56:52 - general channel

**Unknown**

[@UUE6E1LA1](@UUE6E1LA1) I have just tried to implement zscore smoothed algorithm, and applying that for historical prices traded on selection or just last couple of points my app recorded. Have a look at screenshot, on the left side you have got my code and test chart, on the right side algorithm applied on betfair data. My question is what other devs here use? Or if there was anyone trying to use ML, or really simply naive algorithm, just to compare couple of last time traded prices and from std  to detect up or down signal when detecting peak or negative peak. I am looking for any feedback, experience others have got.

---

## 2020-09-08 11:52:10 - general channel

**D C**

That is quite a big question [@U013MLED3V1](@U013MLED3V1) and depends exactly what you mean by a peak. It can have a very simple answer or a very complex one.

---

## 2020-09-08 09:36:15 - general channel

**liam**

how i do it [https://github.com/liampauling/flumine/blob/274c002debbaf875e0d954fc366ba8d7b3e2a512/flumine/worker.py#L165](https://github.com/liampauling/flumine/blob/274c002debbaf875e0d954fc366ba8d7b3e2a512/flumine/worker.py#L165)

---

## 2020-09-08 09:35:29 - general channel

**Oliver Varney**

morning all, probably a very basic question, but wit the list_cleared_orders more available, once ive got the initial paginated results whats the best way to access the next results?

---

## 2020-09-08 08:47:07 - issues channel

**Ruben**

I see, thanks to both of you for the help!

---

## 2020-09-08 08:43:05 - issues channel

**Mo**

Yes, it's a known problem with ujson

---

## 2020-09-06 20:28:00 - general channel

**ricky**

[@UBS7QANF3](@UBS7QANF3) Problem solved, you are absolutely right. Previously i got my market_type value wrong. thanks.

---

## 2020-09-06 13:45:57 - issues channel

**Ruben**

thanks for the help, will try monitoring, see if I catch it

---

## 2020-09-06 13:00:18 - general channel

**ricky**

Sure, i will check, thank you for your help.:+1:

---

## 2020-09-06 10:25:18 - issues channel

**Jonjonjon**

The problems I had yesterday all had "Kill" at the end of the log files, and were due to lack of RAM. Have you tried monitoring your RAM usage? I do it using the top or htop commands.

---

## 2020-09-04 04:19:57 - general channel

**Peter**

A flat file is just a file. Flat indicates that it has no hierarchy (unlike say a database which is normally a collection of related files), so if you dump json to a file that's "flat" since the file itself has no special structure (even if it's content does).

---

## 2020-09-03 18:42:52 - general channel

**liam**

If you want less change the streaming_timeout or change that code 

---

## 2020-09-03 18:42:27 - general channel

**liam**

On an update or every 0.25s (default) if there are executable orders in the market [https://github.com/liampauling/flumine/blob/274c002debbaf875e0d954fc366ba8d7b3e2a512/flumine/streams/orderstream.py#L51|https://github.com/liampauling/flumine/blob/274c002debbaf875e0d954fc366ba8d7b3e2a512/flumine/streams/orderstream.py#L51](https://github.com/liampauling/flumine/blob/274c002debbaf875e0d954fc366ba8d7b3e2a512/flumine/streams/orderstream.py#L51|https://github.com/liampauling/flumine/blob/274c002debbaf875e0d954fc366ba8d7b3e2a512/flumine/streams/orderstream.py#L51)

---

## 2020-09-03 18:31:16 - general channel

**Chris**

Is there an easy way to see what new data was sent that ends up triggering a CURRENT_ORDERS event? Does the CURRENT_ORDERS event only get called if I receive new order data?

Context: I am streaming data for a single market and am sending sample trades for a single runner in that market. The test trade that I sent is not getting filled (it is a lay order at 1.01). Despite that, I am getting ~10 CURRENT_ORDERS events for ever one MARKET_BOOK event.

---

## 2020-09-03 16:25:11 - general channel

**ricky**

Anyone know how traded volumed calcuated in betfair?

I place a £3 back bet @ 3.30, it shows the traded volumed changed is £6.

I place a £3 Lay bet @3.9, it shows the traded volumed changed is 6.

But when I place a another £5 draw Lay bet @3.95, it shows the traded volumed changed is 5, i can see at the same time home and away traded volumed changed.



My question: traded volume is alway double the normal bet/Stake value? Why lay traded volume sometime show double sometime not?

---

## 2020-09-03 10:47:44 - general channel

**Lee**

[@U019HMPCQT0](@U019HMPCQT0) you also could use flumine, there's an example how to record the streaming data to files and upload to S3 [https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py|here](https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py|here)

---

## 2020-09-03 09:55:24 - general channel

**Taking Value**

If you don't have teh price data in a database how do you back test?

---

## 2020-09-03 09:54:56 - general channel

**Mo**

I don’t think many of us are in the habit of storing price data in a database

---

## 2020-09-02 19:10:07 - general channel

**Chris**

What does the ORDER_PACKAGE event represent? I am trying to self-serve here but I don't see it listed in the documentation at [https://liampauling.github.io/flumine/design/](https://liampauling.github.io/flumine/design/). Thanks in advance

---

## 2020-09-02 10:53:24 - general channel

**liam**

Cheers, one test fails on flumine but its because the transaction limit has changed from 1k to 5k

---

## 2020-09-02 09:00:34 - general channel

**liam**

Looking for beta testers for [https://pypi.org/project/betfairlightweight/2.8.0b0/|2.8.0b0](https://pypi.org/project/betfairlightweight/2.8.0b0/|2.8.0b0) going to beta first because of the change to orjson (was ujson) PR [https://github.com/liampauling/betfair/pull/330|here](https://github.com/liampauling/betfair/pull/330|here)

---

## 2020-09-01 01:58:17 - issues channel

**Lisa**

Hi, I'm hoping this will be a quick and simple issue but I can't download betfairlightweight. Has anyone come across any issues before? looks like it is to do with ciso8601. any ideas? thanks

---

## 2020-08-31 16:46:43 - general channel

**Mo**

You can find the definition here: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py)

---

## 2020-08-31 16:45:27 - general channel

**Mo**

If you are using the streaming API with betfairlightweight

---

## 2020-08-31 16:12:38 - general channel

**ricky**

Hi there,

I am using streaming API, I have two questions,

1) When i receive all three (home, away, draw) back/lay prices from runner books, How do i check which array index is for home game?  I observed in football game the order of return value (home, away, draw) from each runner books are changed per match. (e.g Match 1 runner_book return: Away, Draw, Home; Match 2 runner_book return: Home, Draw, Away;)

2) If i create filter with two market types "MATCH_ODDS" and "OVER_UNDER_25" , when new streaming data get update, how can i check this update is from which market type?

---

## 2020-08-31 13:05:41 - general channel

**Angelos**

yea that makes sense!



but i have just discovered this library, so in the past i created my own client wrapper.



so unless betfairlightweight didn’t do anything special with the api responses i should be safe!

---

## 2020-08-31 13:02:34 - general channel

**Mo**

If you use betfairlightweight then you’ll be able to access streaming data in the same structures you’d get back from using listMarketBook or listCurrentOrders

---

## 2020-08-31 13:01:40 - general channel

**Mo**

You need to ask BDP for your app key to be enabled for streaming 

---

## 2020-08-30 18:26:45 - general channel

**Unknown**

I am still on a trial key until next week or so but am getting traded volume so you may have a different problem here as well. Make sure you are requesting the fields

```fields=[

    "EX_ALL_OFFERS",

    "EX_TRADED",

    "EX_TRADED_VOL",

    "EX_LTP",

    "EX_MARKET_DEF",

    "SP_TRADED",

    "SP_PROJECTED",

]```

[https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Exchange+Stream+API)

---

## 2020-08-29 17:30:54 - general channel

**birchy**

it's the botpkg that I'm importing into each bot as it contains a large number of helper functions and I prefer to manage them as a single source for all bots rather than have multiple copies. With the symlink, it's simply `import botpkg` in each bot. It works, but I'm wondering if there is a nicer way?

---

## 2020-08-29 17:21:46 - general channel

**birchy**

To all you Python experts...have any of you got a nice solution to importing from a folder/package which is several directories higher than the python script doing the import? e.g. package is located at:

`/home/birchy/betfair/botpkg`

and bots are located at something like:

`/home/birchy/betfair/bots/laying/laybot/laybot.py`

`/home/birchy/betfair/bots/backing/backbot/backbot.py`

etc...

Currently using a symlink but it's not the prettiest solution...

---

## 2020-08-29 14:47:40 - random channel

**liam**

Assuming you are streaming you have `market_book.streaming_update`

---

## 2020-08-29 13:06:16 - issues channel

**jhaa**

I got a segmentation fault after running a bot using the streaming api for like half a day.



Never seen a SIGSEGV in python before.  I did not have the python faulthandler module enabled so I do not have a backtrace.

---

## 2020-08-29 06:43:14 - random channel

**liam**

Yep agree with all of that however you can adjust the streaming `conflate` to reduce the amount of updates if required 

---

## 2020-08-28 22:33:32 - random channel

**Chris**

Would be interested in Liam's perspective here as well. Particularly w/r/t any architectural or Python-specific implementation details but I think in general the guideline is to ensure you have efficient one-pass (O(1)) implementations for any stats / math / decision making that you are doing on each market update

---

## 2020-08-28 20:42:32 - general channel

**Taking Value**

Hi everyone, first off - thanks to whoever built this library. As a novice python and mongodb coder it has made my life a lot easier.

---

## 2020-08-28 08:48:32 - general channel

**Jono**

Morning guys, simple question. When filling out the size field for a LAY bet is this value the stake  or liability to be placed?

---

## 2020-08-27 20:20:31 - general channel

**liam**

It certainly is, so `market.event` will give you a dictionary of all markets for the current market eventId, or you can access the full market list with `self.flumine.markets`

---

## 2020-08-27 19:49:33 - general channel

**Ruben**

when processing a market_book with flumine (i.e. process_market_book()), is it possible to access the other markets?

---

## 2020-08-27 17:19:23 - random channel

**liam**

my assumption is that the issue is to do with the later orders (if there is still a problem), and that `def validate_order` is blocking

---

## 2020-08-27 10:33:20 - random channel

**Lee**

[@U016TGY3676](@U016TGY3676) i'd recommend to always use the version number e.g. `flumine==1.11.1`

---

## 2020-08-27 09:35:24 - random channel

**liam**

[@UF3AYKZMW](@UF3AYKZMW) just pushed a tennis [https://github.com/liampauling/flumine/pull/264/files|example](https://github.com/liampauling/flumine/pull/264/files|example), the design of flumine is to use workers and callbacks to continually poll the scores endpoint out of the main loop and make available for all markets that sit in that event using the `market.context`

---

## 2020-08-27 04:58:17 - general channel

**InvestInHorses**

I'm a developer and I think I know where to start.. But there is a lot of data and hopefully this is a helpful community. Look forward to participating :slightly_smiling_face:

---

## 2020-08-26 21:00:39 - random channel

**Mo**

Take a look at some of these methods [@U016535QCJ2](@U016535QCJ2) mentioned here: [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1596104343458200|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1596104343458200](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1596104343458200|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1596104343458200). Not all of them are implemented in bflw but for example you might find the method for getting the in play events helpful 

---

## 2020-08-26 18:49:18 - random channel

**liam**

[@UFTBRB3F1](@UFTBRB3F1) gone for a minor refactor to move the logic which I think makes things simpler [https://github.com/liampauling/flumine/pull/262/files](https://github.com/liampauling/flumine/pull/262/files)

---

## 2020-08-26 11:20:47 - general channel

**Jorge**

I'm asking because I'm starting my career as a developer at a quant hedge fund and being playing with Betfair API for a year now, thinking about dedicating more time to BF

---

## 2020-08-26 10:48:51 - issues channel

**ricky**

[@UBS7QANF3](@UBS7QANF3) what do you mean virtual price stream? before i used streaming, i previously pollling the data via lightweightAPI every 5 seconds, i remembered this peak data still occured.

---

## 2020-08-26 10:07:07 - issues channel

**ricky**

I am using streaming API, for inplay football game, I am recording home game lay price,

Below is the snopshoot of what i got,



Lay price

...

2.54

2.54

280.0   --- unexplained high value

280.0   --- unexplained high value

2.64

2.64

...



During this time, market_book.status is "open", market_book inplay status is "True". ( no goal no card no threat at the time)



I need plot all lay price, have a peak data in the middle is not ideal, my question is what is the best way to filter this unexplained high value. (Of cource i want to avoid if a team is in big lead, in this case the price will be high )

---

## 2020-08-26 09:56:42 - random channel

**liam**

[@U016TGY3676](@U016TGY3676) in regards to treatment its very much a two way street, have you ever spoken to anyone on the premium team? Obviously being a PC payer helps but they really do prioritise us auto guys as they always want more liquidity

---

## 2020-08-26 09:28:24 - general channel

**PeterLe**

Morning, A similar background for me; Electrical/Electronic engineer; Vax/PDP Systems engineer (80’s/90’s). Account Manager (At one time I worked for a a large American corp and was the account manager to Betfair :grinning:). Spent time at Hammersmith/Gibraltar, still in Account Management. Although I did Contemplate going full time at one point, I still enjoy my job. Money not really the sole motivator for me, Ive given around 40% of my lifetime profits to help others in my family and a couple of close friend who fell on hard times. Can’t describe that feeling of helping others, a pound is a lot when you don’t have it. Just love the challenge of going toe to toe with some of the sharpest minds out there. See you on the back straight in a couple of hours :grinning:

---

## 2020-08-26 08:19:31 - random channel

**liam**

Yep since March 2018, I believe it helps but its been mentioned in the premium newsletter a few times, not sure on the current license situation

---

## 2020-08-25 14:55:14 - general channel

**Twatter**

Well.. I'm giving it a shot and suppose will be interesting to see what comes of it. Worst case scenario is I'm learning how to put a flumine/BFLW bot together so if I uncover something else then I can implement it quicker. But yeah... if I wasn't restricted to about 50p EW bet at Bet365 on a 7.0 odds horse, then I probably won't be here!

---

## 2020-08-25 14:50:05 - general channel

**Twatter**

The main problem is that bookies know that the EW bets we taking are mis priced and they ban/restrict you to pennie

---

## 2020-08-25 14:48:17 - issues channel

**Jono**

ill shoot any questions i have about the inplayservice response once ive got something up and running, cheers for the help!

---

## 2020-08-25 13:43:03 - issues channel

**liam**

I would put it here [https://github.com/liampauling/flumine/blob/5c87ea49e1cc6feeb3e83655a3624fb359dadd1d/flumine/backtest/simulated.py#L58](https://github.com/liampauling/flumine/blob/5c87ea49e1cc6feeb3e83655a3624fb359dadd1d/flumine/backtest/simulated.py#L58)

---

## 2020-08-25 13:31:56 - issues channel

**Lee**

was just looking how to get the runner status in an efficient way

---

## 2020-08-25 12:12:44 - random channel

**PeterLe**



Afternoon all, quick question please; we’re the TPD GPS feed present at the first race today? Thanks

---

## 2020-08-25 10:52:16 - random channel

**Newbie99**

The replace logic I was testing (which is where I'm theorising the problems occur is very similar to the example code):

---

## 2020-08-25 10:51:34 - random channel

**Newbie99**

The indents came out a bit weird there, but that's essentially it for now, its a super simple script, just familiarising myself with Flumine at the mo (runner_list is just a list of dicts with runner info)

---

## 2020-08-25 10:39:33 - general channel

**Jonjonjon**

Thanks. It's for a bit of my bot that isn't migrated to bflw yet :sweat:

---

## 2020-08-24 22:49:45 - general channel

**Unknown**

Dumb q to help maintain my sanity - What do EX and SP stand for?

Context: market_book --&gt; runners list --&gt; runner --&gt; EX, SP

---

## 2020-08-24 18:31:54 - general channel

**Lee**

Yeah, i just asked them to increase and no questions were asked

---

## 2020-08-24 10:57:41 - general channel

**liam**

Tried to explain it [https://liampauling.github.io/flumine/trades/#parameters|here](https://liampauling.github.io/flumine/trades/#parameters|here), `place_reset_seconds` is seconds since the last order was reset i.e. complete where as `reset_seconds` is just seconds since the last place on that runner

---

## 2020-08-24 10:13:59 - general channel

**liam**

```market_filter = streaming_market_filter(

    event_type_ids=["1"], market_types=["MATCH_ODDS", "OVER_UNDER_25"], event_ids=[29958270]

)```

---

## 2020-08-24 09:15:37 - general channel

**ricky**

All, I am using streaming API, i was able to get match odds and traded volume data, now i want to get additional "OVER_UNDER_25" Back/Lay price and traded volume.

I used below filter to set market_types to "OVER_UNDER_25", but no "OVER_UNDER_25" data return, Any suggestions?



market_filter = streaming_market_filter(

    event_type_ids=["1"], market_types=["MATCH_ODDS", "OVER_UNDER_25"], market_ids=["1.172086373"]

)

---

## 2020-08-23 15:18:47 - general channel

**liam**

So streaming data contains all/any updates which is probably 50-100x more data to process over a markets lifetime. This doesn’t include the limiting to 30minutes, however you can limit the data to process in flumine with the following on the market filter `”... listener_kwargs”: {“seconds_to_start”: 600, “inplay”: False}`

---

## 2020-08-23 12:38:30 - general channel

**Misha**

In fact I process the historical stream for tennis in two phases. Firstly I pre-parse the full stream to get a list of one-second summaries for all markets and all times. Then I can process this to get specific snapshot prices and put them into a database

---

## 2020-08-23 11:23:08 - general channel

**birchy**

In Flumine or my lib?

---

## 2020-08-23 11:04:57 - general channel

**Misha**

Just for my own curiosity, how many "streaming price updates" do you process per second (roughly)?

---

## 2020-08-21 17:26:58 - general channel

**john walsh**

Here is another anomaly.  I coded in the [https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/)

---

## 2020-08-21 12:27:38 - general channel

**Stefan**

Yes, you are right, but what I meant was really not about adapting new language, a learning curve, because if you program for some time, it is actually no problem, you can switch to any programming language in reasonable time.

---

## 2020-08-21 12:25:14 - general channel

**Stefan**

[@U9JHLMZB4](@U9JHLMZB4) we are old ones here, well I am only 54 :slightly_smiling_face: [@UUE6E1LA1](@UUE6E1LA1) node.js is not type safe, maybe if you use typescript. Just from my experiences working with clients coming from your world (node.js, php), there is always a lot of problems in their code.

---

## 2020-08-21 11:33:13 - general channel

**Peter**

[@U013MLED3V1](@U013MLED3V1) Given that list (over the course of 40 years I've acquired a similar one) Then Python would surely be some way from the bottom of your preferences.

---

## 2020-08-21 11:23:21 - general channel

**Stefan**

[@UUE6E1LA1](@UUE6E1LA1) in what programming languge are you programming these day? Historically I went from 8080 assembler (well yes that is not programming language), basic, c, visual basic, pascal, c++, lisp, php, C#, Objective-C, F#, python, and many more but I count only those programming languages I made some app used by others. Yes I am not expert in python, and frankly to say it will not happen language of my choice.

---

## 2020-08-21 10:46:19 - general channel

**john walsh**

I tried to do something that I logically thought would work.  It did not, so I wanted to know was it my fault or was it not a function of betfairlightweight. I accepted others opinion that it was not a function of betfairlightweight and was happy with that so "onwards and upwards" to other things.  It is not the only thing I have done with betfairlightweight which work so I am happy to forget about greyhounds for the moment and work on other things.

---

## 2020-08-21 10:42:13 - general channel

**D C**

[@U013MLED3V1](@U013MLED3V1) Because I am not a python programmer.

---

## 2020-08-21 10:41:13 - general channel

**Stefan**

[@UUE6E1LA1](@UUE6E1LA1) Data are available, so my reply was why you did not put them to python code making john happy.

---

## 2020-08-21 10:33:48 - general channel

**D C**

[@U013MLED3V1](@U013MLED3V1) I thought that the problem was that to be that people are not able to get that data all the time. If you have the solution then maybe you can explain how to get this data to [@U0187TRCGAZ](@U0187TRCGAZ). Perhaps I have misunderstood things.

---

## 2020-08-21 08:46:52 - general channel

**Unknown**

[@UUE6E1LA1](@UUE6E1LA1) data are available, so what is the problem here?

---

## 2020-08-20 21:16:42 - general channel

**liam**

Use the market version to prevent the order executing inplay (not implemented in flumine yet)

---

## 2020-08-20 21:03:53 - general channel

**Jonjonjon**

Suppose I want to hedge/green a matched back bet with a lay. The lay is in the order book. I want to move the lay order (either up or down), while adjusting the size so that it will still hedge/green the back bet correctly. What is the best way to do that in Flumine?

---

## 2020-08-20 19:03:01 - general channel

**Mo**

It’s an undocumented endpoint used internally by Betfair so they are the only people who could answer your question as to why it is not on there

---

## 2020-08-20 18:18:58 - general channel

**Mo**

I guess I wasn’t clear: you are not getting any data because the data does not exist _on the race card endpoint,_ regardless of what you might see on the website. Using R instead of Python won’t make the slightest difference. 

---

## 2020-08-20 18:09:21 - general channel

**john walsh**

Since nobody seems to have the answer to my query, I will plough the lonely furrow and of course I can use "R" as an alternative to Python which has no problem handling the greyhounds.  I have also developed a very good football application in VIsual Studio which I am sure can be adapted.

---

## 2020-08-20 15:32:46 - general channel

**john walsh**

Obviously there is not an easy solution in Betfairlightweight or somebody could tell me what I was doing wrong.  So, obviously it is not my mistake.  And yes, there are alternatives but Betfairlightweight is an excellent piece of code so it would be nice to use it.

---

## 2020-08-20 14:47:16 - general channel

**Twatter**

[@U0187TRCGAZ](@U0187TRCGAZ) Does the same Market IDs work via the Betfair API website?

---

## 2020-08-20 14:28:23 - random channel

**Mo**

Most of the time (but not always!) the Weatherbys ID is the same as the Timeform ID if that helps

---

## 2020-08-19 20:39:29 - issues channel

**JojoBeans**

I contacted to support to enable streaming (I'm on an old delayed key) and they said they did but perhaps not...

---

## 2020-08-19 20:39:28 - issues channel

**liam**

You need to send an email to bdp and get your app key authorised for streaming 

---

## 2020-08-19 19:46:35 - issues channel

**liam**

Try with a listener like this example [https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2020-08-18 20:34:59 - random channel

**liam**

Change this line [https://github.com/liampauling/flumine/blob/69d68904b4ae0c8ba3c0d60991c3a6a38066040d/flumine/execution/baseexecution.py#L44|https://github.com/liampauling/flumine/blob/69d68904b4ae0c8ba3c0d60991c3a6a38066040d/flumine/execution/baseexecution.py#L44](https://github.com/liampauling/flumine/blob/69d68904b4ae0c8ba3c0d60991c3a6a38066040d/flumine/execution/baseexecution.py#L44|https://github.com/liampauling/flumine/blob/69d68904b4ae0c8ba3c0d60991c3a6a38066040d/flumine/execution/baseexecution.py#L44)

---

## 2020-08-18 12:16:40 - general channel

**Mo**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1594903864009900?thread_ts=1594903864.009900](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1594903864009900?thread_ts=1594903864.009900)

---

## 2020-08-18 12:01:36 - random channel

**Twatter**

[@UBS7QANF3](@UBS7QANF3) Static discharge - haven't had a problem with stuff like that... I suppose if you're wearing a balloon suit and rolling around on the carpet for an hour or so whilst vacuuming then might be an issue... but for shoving a cleaner over a vent I would have said it be fine for a few seconds...

---

## 2020-08-18 11:52:16 - random channel

**Twatter**

[@UBS7QANF3](@UBS7QANF3) Just run a hoover over those filters - it'll help a bit.. no need to turn it off...

---

## 2020-08-18 11:50:59 - random channel

**Unknown**

That's how I've done my fans. I'm not sure if the rear/roof exhaust fan is helping much. But the guys who built it tied the lower/front 120mm's power cables with a load of other stuff, and I'm scared of breaking something if I cut the cable tie.

---

## 2020-08-14 18:40:54 - general channel

**Mo**

Yeah I don't use flumine for scraping. Doesn't make sense to me to compress single files as zips but maybe [@U4H19D1D2](@U4H19D1D2) had his reasons?

---

## 2020-08-14 18:33:28 - general channel

**birchy**

from smart_open import s3_iter_bucket                   

                                                 

bucket = 'mybucket'                           

                                                 

for key, content in s3_iter_bucket(bucket, worke$

    print(content)                               

    exit()



This returns the file bytes. The data was saved using Flumine  S3MarketRecorder which creates .zip files. Reading the docs, it appears that smart_open doesn't natively support zip, so is there a way to force unzipping?

---

## 2020-08-14 18:06:07 - issues channel

**Mo**

Seems a bit pointless. Use bflw and spend your extra time developing profitable strategies

---

## 2020-08-14 18:05:30 - issues channel

**Jono**

I will try using " everywhere to rule that out. Im constructing my own request just to try and understand what is going on at base level. bflw makes all the processes extremely headache free so obviously im not doing this testing for efficiency

---

## 2020-08-14 11:50:39 - general channel

**Lee**

ladder_levels is only set to 3 but hope it helps

---

## 2020-08-12 13:18:49 - general channel

**Lee**

in that example open is being patched with smart_open, in the readme there is an example of how to read from s3 without downloading before

---

## 2020-08-12 13:05:21 - issues channel

**Lee**

cool i think i understand the problem, my first thought was i was misunderstanding the purpose of the order type

---

## 2020-08-12 13:03:54 - issues channel

**liam**

or remove the status if on this line [https://github.com/liampauling/flumine/blob/9a047934458899f4f452a10f9fa6375fd37a0ade/flumine/markets/middleware.py#L121](https://github.com/liampauling/flumine/blob/9a047934458899f4f452a10f9fa6375fd37a0ade/flumine/markets/middleware.py#L121)

---

## 2020-08-12 13:01:54 - issues channel

**liam**

[https://github.com/liampauling/flumine/blob/9a047934458899f4f452a10f9fa6375fd37a0ade/flumine/order/process.py#L59](https://github.com/liampauling/flumine/blob/9a047934458899f4f452a10f9fa6375fd37a0ade/flumine/order/process.py#L59)

---

## 2020-08-12 13:00:56 - issues channel

**liam**

I see the problem

---

## 2020-08-12 12:52:19 - issues channel

**liam**

Whats the market type, confident it has SP / it becomes reconciled? [https://github.com/liampauling/flumine/blob/master/flumine/backtest/simulated.py#L41](https://github.com/liampauling/flumine/blob/master/flumine/backtest/simulated.py#L41)

---

## 2020-08-10 19:57:28 - general channel

**Jonjonjon**

In Chrome, I get the same problem as you. But in Firefox it is fine

---

## 2020-08-10 19:56:13 - general channel

**Jonjonjon**

[@UV6F64HPG](@UV6F64HPG) I've had a problem with the "Exchange Profit and Loss" page for a few weeks.



I can see my P&amp;L for the last day or 2. But if I try to view the P&amp;L for the last 7 days or more, it tells me "There were not results for that request" too.

---

## 2020-08-10 19:43:14 - general channel

**Douglas Hickling**

Hi,

I have no experience with streaming API’s and I am trying to work out how to use the Betfair one. I was wondering if anyone could point me in the direction of any material that may help me understand it?

Also I have been using Jupiter notebooks for the snapshot API, however I understand that isn’t suitable for the streaming api, what do you use?

Thanks for the help.

---

## 2020-08-10 17:00:02 - general channel

**Peter**

I'm having the problem that [@UV6F64HPG](@UV6F64HPG) described. Was working fine earlier today, but now it's not returning any results,

---

## 2020-08-10 16:40:51 - general channel

**Amanda**

Quick question, anyone else unable to access the ‘Exchange Profit &amp; Loss’ option from the Betfair Exchange web page?  Just says ‘There were no results for that request’

---

## 2020-08-08 23:07:52 - strategies channel

**ricky**

I have question about snap listener, by definition "Instead of waiting for an update you can snap the listener to get an up to date version of the data."

However, i didn't see any difference with or without snap listener via streaming,  the question is what is the expect behaviour for snap? if the streaming update automatically, why and when to use snap? I put my example code in below.

---

## 2020-08-08 12:44:10 - strategies channel

**Mo**

Use streaming including EX_TRADED in your market_data_filter

---

## 2020-08-08 12:42:42 - strategies channel

**Unknown**

Hi All, this is my first post, Does anyone know how to get *All* traded volume using betfairlightweight or Streaming API as shown in below figure?

---

## 2020-08-08 10:38:15 - general channel

**liam**

Looks like you are using non [https://liampauling.github.io/betfair/advanced/#lightweight|lightweight](https://liampauling.github.io/betfair/advanced/#lightweight|lightweight) mode so you are getting python objects

```traded_volume = [&lt;PriceSize&gt;]

for traded in traded_volume:

    print(traded.price, traded.size)```

---

## 2020-08-08 10:23:44 - strategies channel

**Michael**

Happy to help!

---

## 2020-08-08 09:12:06 - general channel

**liam**

And then [https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/resources/baseresource.py#L35|https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/resources/baseresource.py#L35](https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/resources/baseresource.py#L35|https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/resources/baseresource.py#L35)

---

## 2020-08-08 08:31:32 - general channel

**Oliver Varney**

Morning guys, not too sure if I had too many beers last night and am having a blonde moment this morning, my understanding is that betfair times are UTC, although in flumine it appears the market_book.publish_time is UTC (although no timezone info set on the datetime object) and publish_time_epoch is BST (or one hour ahead). Should int(market_book.publish_time.timestamp()*1000) == market_book.publish_time_epoch

---

## 2020-08-07 18:46:23 - issues channel

**Mo**

Yeah the documentation has some issues...

---

## 2020-08-07 18:25:14 - strategies channel

**Mo**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1595421580229700](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1595421580229700) :sunglasses:

---

## 2020-08-07 15:41:13 - general channel

**liam**

Regarding the bflw talk, any objection to Betfair being involved? Potential for Neil and/or Betfair head of liquidity to join

---

## 2020-08-07 14:17:22 - general channel

**Newbie99**

Does anyone have the generic betfair help desk e-mail (not the API one), I need to send them a screenshot of something?

---

## 2020-08-07 12:00:02 - strategies channel

**PeterLe**

[@UUE6E1LA1](@UUE6E1LA1) Sorry to hear about the job, but there is some great help on here and hopefully you will look back in the future and think it a godsend! Thanks for pointers too.

---

## 2020-08-07 11:53:12 - strategies channel

**D C**

The data is useful but as others have mentioned, there are sometimes some hideous inaccuracies in it. I do think that the data provides many possible angles of attack but there are many issues to be aware of. I have come across many banana skins and dodgy happenings, but this slack group has been so useful in that regard with the more experienced users basically explaining that these things are "the norm". Biggest problem I have found is identifying anyone who actually DOES use it. Again this slack has been excellent in that regard when something goes wrong at least you can confirm that others are seeing the same rather than it being your own code that is at fault. I would say that if you are expecting highly accurate positional data you will be disappointed BUT it is still very useful. From a profit point of view it has helped me deal with no income after I lost my job at the end of May. It is safe to say that I would be very close to the bottom of the food chain in terms of the GPS players here but even I am making it pay.

---

## 2020-08-06 20:13:18 - issues channel

**Dave**

I managed to avoid the segfaults I was getting by downgrading ujson. Can't remember which version to, sorry :( [https://betfairlightweight.slack.com/archives/C4H05ML2E/p1589528696364100](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1589528696364100)

---

## 2020-08-06 14:08:43 - strategies channel

**D C**

Hence the question so I can get the bot to just block placement if it happens again. I know its early days for Ripon but the sensors are the same as anywhere else you would hope.

---

## 2020-08-06 13:27:42 - general channel

**Ruben**

One quick question about the Event.time_zone attribute; does this refer to the timezone of event.start_date, or to the timezone in which the event will take place? In which case I would assume all event start dates are in UTC

---

## 2020-08-06 11:42:36 - general channel

**PeterLe**

[@UBS7QANF3](@UBS7QANF3) [@U4H19D1D2](@U4H19D1D2) The last meet up we had was great, but i was thinking that for a future one, maybe we could all throw a £10 in and hire a large meeting room at a local hotel, we could bring laptops and the more experience guys could help the less so. ie have it as a workshop drop in and then beer afterwards :slightly_smiling_face: just an idea

---

## 2020-08-06 11:12:55 - general channel

**Jonjonjon**

[@U4H19D1D2](@U4H19D1D2) Would you be able to throw in some content on how to use Docker with Flumine?

---

## 2020-08-06 09:53:23 - general channel

**Misha**

BTW, I'm on here because I am always looking to learn, and everyone has a different background, so it's good to see what others are doing. Always gets me thinking about how to improve what I do

---

## 2020-08-05 22:37:33 - general channel

**Jonjonjon**

Unless my Python is out of date, you'll need the multiprocessing version of the Queue: [https://docs.python.org/3/library/multiprocessing.html](https://docs.python.org/3/library/multiprocessing.html)

---

## 2020-08-05 20:33:23 - random channel

**liam**

Surely your site would have to become huge for transfer costs to be a problem 

---

## 2020-08-05 13:32:25 - general channel

**Jono**

Hey guys is it possible to get a print out of an accounts appKey through just the corersponding bf account username and password using bflw?

---

## 2020-08-05 06:32:11 - general channel

**liam**

Do you not? Should be `market_book.streaming_update` [https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/streaming/cache.py#L222|https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/streaming/cache.py#L222](https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/streaming/cache.py#L222|https://github.com/liampauling/betfair/blob/a639787bee11e0cbd135bf0e7bfeb171217f78d7/betfairlightweight/streaming/cache.py#L222)

---

## 2020-08-04 21:53:58 - general channel

**Jonjonjon**

In Flumine, when backtesting, we don't get the streaming_update when process_market_book is called. Would it be easy to add?

---

## 2020-08-04 16:57:54 - general channel

**Michael**

From TPD: Hmm .... we had an issue I thought had been resolved. Apologies. Will report back ASAP.

---

## 2020-08-04 08:32:39 - general channel

**SrFabio**

Does anyone have any (unofficial) documentation for the betfair's CashoutService? Looking specifically at possible response body. The cashout endpoint seems to return 200 status code even when the cashout fails

---

## 2020-08-04 08:12:39 - general channel

**Oliver Varney**

[@U4H19D1D2](@U4H19D1D2) probably some code myside but have youdone some work on flumine / bflw listMarketCatalogue polling

---

## 2020-08-03 21:20:00 - general channel

**Pete**

[@U4H19D1D2](@U4H19D1D2) Sorry to bother you with this, but do you have a decent contact in the VIP desk? I can't get anywhere with the eejits at the normal help desk.

---

## 2020-08-03 11:49:42 - general channel

**liam**

yeah having the same problem, seen this before and it normally sorts itself out

---

## 2020-08-03 10:32:03 - general channel

**liam**

yep, my understanding is that python uses the os for this, i have attempted to use a custom adapter but that caused all sorts of connection issues

---

## 2020-08-03 10:26:06 - general channel

**Misha**

[@U4H19D1D2](@U4H19D1D2) - yes. You should be able to do this in Python as well

---

## 2020-08-03 10:22:53 - general channel

**liam**

i currently make a GET to `[https://api.betfair.com](https://api.betfair.com)` to prime on creation but it just seems wasteful, with python i want more control over the socket sometimes

---

## 2020-08-03 09:48:55 - general channel

**liam**

[@UUCD6P13J](@UUCD6P13J) this work for you? [https://github.com/liampauling/flumine/pull/249/commits/ece3e463488c7e3ced2f2d76afd7282844e6b914](https://github.com/liampauling/flumine/pull/249/commits/ece3e463488c7e3ced2f2d76afd7282844e6b914)

---

## 2020-08-03 08:53:02 - general channel

**liam**

i just wonder if this problem has been solved

---

## 2020-08-03 08:43:06 - general channel

**liam**

hmm my problem is a sudden burst where i can have 10+ session in use, theses then get added to a queue LIFO resulting in some becoming stale

---

## 2020-08-03 08:38:06 - general channel

**liam**

linux/docker, whatever python is using

---

## 2020-08-03 08:32:35 - general channel

**Mo**

The documentation states the connections are closed after 3 minutes

---

## 2020-08-01 12:09:03 - general channel

**birchy**

Thanks again [@UBS7QANF3](@UBS7QANF3). I'll plan out what I actually need and then make a decision cos I've got too many questions right now. :joy:

---

## 2020-07-31 08:50:10 - general channel

**Lee**

Using flumine. There is already a poll worker which gets the market catalogue. Ideally i'd like to dump that data to a file in a similar way it does with the market_book and load it in on the historical stream. I'm also assuming that's the idea/plan [@U4H19D1D2](@U4H19D1D2) had.

I could save it to a db but seems like it’s added to the market book for a reason

---

## 2020-07-31 08:43:10 - general channel

**Mo**

How generally are you talking? Just poll it every X minutes and upsert into a database

---

## 2020-07-30 17:22:11 - general channel

**Oliver Varney**

yes I had a older version of streaming code running, but updated to that new code and couldn't remember which / if any parameter controlled it

---

## 2020-07-30 17:22:08 - general channel

**Newbie99**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2020-07-30 17:21:02 - general channel

**Newbie99**

have you got the streaming class example from github?

---

## 2020-07-30 13:11:00 - issues channel

**Mo**

If it makes you feel any better, I spent a long time looking at it to try to help and I didn’t spot the problem

---

## 2020-07-30 12:58:11 - issues channel

**birchy**

I also regularly find the answer just after I posted the question. :grinning:

---

## 2020-07-30 11:15:48 - general channel

**Mo**

Right, I don't think that's implemented in betfairlightweight but you're not using it are you?

---

## 2020-07-30 10:57:59 - general channel

**Unknown**

[@U016535QCJ2](@U016535QCJ2) [@UBS7QANF3](@UBS7QANF3) this is an example of an event from 2 days ago where my recorder seemed to start approximately 30 mins late. In this case one whole set had been completed by the time recording commenced. I think that if this is a problem with my code, it's that it considers the market to be settled if a `list_market_catalogue` response is empty for the event id twice in 2 minutes, which triggers an upload to s3 and removal of the local file. This might be a premature way of considering the event to be over, and if the code starts tracking the game once it becomes available again, it will just overwrite the first part that was recorded when it uploads the new version to S3. Or it's just a problem with the inplayservice endpoint lol...

---

## 2020-07-29 12:39:33 - general channel

**Mo**

It's hard to say if your code is a problem without knowing exactly how you're doing it

---

## 2020-07-29 11:37:51 - general channel

**JC**

Hi guys, - question for those of you who are using the undocumented inplayservice to record/analyse tennis scores. I have set up my recorder and I am noticing often that scores only seem to become available about 30 minutes into the match so quite often my recordings are starting at 4-4 or 3-4 etc. Is this normal or is there something wrong in my code?

---

## 2020-07-29 11:16:08 - general channel

**Misha**

I view a selection id as an internal Betfair identifier used within a market. Their may be a pattern of the use of selection ids across markets for the same event, but I have never seen documentation that guarantees this, so I don't assume it

---

## 2020-07-29 10:35:38 - general channel

**Robert**

thanks for the help all

---

## 2020-07-29 10:31:39 - general channel

**Robert**

a related question -- I know sometimes betfair will remove a market book -- does it ever remove and then add back in a market book?

---

## 2020-07-29 10:26:21 - general channel

**Robert**

for now I will just start later since I used to start it an hour later since I used to and didnt see this problem before -- if issue still happens I will poll it

---

## 2020-07-29 10:21:14 - general channel

**Robert**

it sort of doesnt change the question even if I update it throughout the day -- I need to know how it changes because maybe half way through the day they change the market catalogues and I need to know what sort of changes they can make

---

## 2020-07-29 10:16:34 - general channel

**Robert**

Hi, I have a question about market catalogues. We request market catalogue at about 9-9.30 in the morning from betfair and use that throughout the day. I have noticed that sometimes events are added to the market catalogue at later times and this causes us issues.  Does anyone know the rules about when new events are added or removed from the market catalogue, is there any guarantees about time?

---

## 2020-07-28 18:08:56 - issues channel

**Mo**

Right. You might find it easier to deal with a large number of orders using streaming 

---

## 2020-07-28 12:07:08 - issues channel

**liam**

[@UF3AYKZMW](@UF3AYKZMW) its much easier using bflw :slightly_smiling_face: [https://github.com/liampauling/betfair/blob/master/examples/exampleone.py](https://github.com/liampauling/betfair/blob/master/examples/exampleone.py)

---

## 2020-07-28 11:52:52 - issues channel

**mlpanda**

Hey, perhaps a simple question but can't seem to find an answer to it; when I obtain the `marketId` for the next horse race using:



```def getMarketCatalogueForNextGBWin(eventTypeID):

    if (eventTypeID is not None):

        print ('Calling listMarketCatalouge Operation to get MarketID and selectionId')

        now = datetime.datetime.now().strftime('%Y-%m-%dT%H:%M:%SZ')

        market_catalogue_req = '{"jsonrpc": "2.0", "method": "SportsAPING/v1.0/listMarketCatalogue", "params": {"filter":{"eventTypeIds":["' + eventTypeID + '"],"marketCountries":["GB"],"marketTypeCodes":["WIN"],'\

                                                                                                                                                             '"marketStartTime":{"from":"' + now + '"}},"sort":"FIRST_TO_START","maxResults":"1","marketProjection":["RUNNER_METADATA"]}, "id": 1}'```

How can I then get the corresponding `eventId` and `raceId` for that given `marketId`?

---

## 2020-07-28 08:32:42 - issues channel

**liam**

[https://github.com/liampauling/flumine/pull/245](https://github.com/liampauling/flumine/pull/245)

---

## 2020-07-28 08:22:54 - issues channel

**liam**

[@UPMUFSGCR](@UPMUFSGCR) haven't upgraded flumine to handle 2.7.0 yet so will need to use 2.6.0

---

## 2020-07-28 02:22:13 - issues channel

**Unknown**

shouldnt the "flumine" be "framework". ([https://liampauling.github.io/flumine/quickstart/](https://liampauling.github.io/flumine/quickstart/))

---

## 2020-07-27 20:29:18 - strategies channel

**liam**

ORDER on a new order, CLEARED_ORDERS when the market is closed and CLEARED_ORDERS_META for the flumine order object on cleared status if you want to record extra data e.g. seconds to match 

---

## 2020-07-27 15:52:21 - general channel

**birchy**

Thanks for the tips [@U0136FHM84T](@U0136FHM84T), I'll be back with more stupid questions when I get time to investigate further. :grinning:

---

## 2020-07-27 15:24:26 - general channel

**liam**

so its event driven, processing one market at a time however if you want to access another market you can:

```# event markets contains a dictionary of all event related markets

event_markets = market.event



# all markets (need to create a property for this)

all_markets = self.flumine.markets  # &lt;flumine.markets.Markets&gt; object```

---

## 2020-07-27 12:22:11 - strategies channel

**AP**

Terraform looks very good, definitely going to try and learn how to use it

---

## 2020-07-27 11:36:04 - strategies channel

**D C**

But my crap approach aside, my question stands

---

## 2020-07-27 11:04:53 - general channel

**Oliver Varney**

yer was talking about myself personally on that part. some strategies bankrolls are not set up to cope with bets riding for me personally.

---

## 2020-07-27 11:02:01 - general channel

**Oliver Varney**

bflw this is, not sure if flumine has a way

---

## 2020-07-27 10:53:02 - general channel

**liam**

logic is here [https://github.com/liampauling/flumine/blob/master/flumine/execution/betfairexecution.py#L207](https://github.com/liampauling/flumine/blob/master/flumine/execution/betfairexecution.py#L207)

---

## 2020-07-27 10:46:06 - general channel

**liam**

for streaming? flumine waits and uses the http response so it should be fine

---

## 2020-07-27 09:50:10 - general channel

**Oliver Varney**

[@U4H19D1D2](@U4H19D1D2) With flumine order status, does pending mean sent to betfair but no confirmation message (i.e. no bet_id)? Im guessing that many market books could be processed before the bet response comes back from betfair?

---

## 2020-07-26 18:56:26 - general channel

**Dermot**

Whatever suits yourself. I use one project with a mix of python and go, but if you prefer to separate then go for it. There’s no wrong way, except for your current method :wink:

---

## 2020-07-26 18:36:09 - strategies channel

**SrFabio**

For me the cashout started to be problematic if I had more than one runner traded because of how the price moves dramatically against my position (on one of the runners) and it's hard to match the hedge stake on that runner -- only tried with delay API key but I anticipate the same sort of issue happen with prod api key too

---

## 2020-07-26 17:52:55 - strategies channel

**richard**

haha indeed. I’m using it for scalping on dogs. Problem 1 - work out which way the price is going. 2. trade out for a sure profit.

---

## 2020-07-26 17:30:34 - strategies channel

**SrFabio**

Not a dumb question don't worry...I've been dabbling myself in these fields for a couple of months too, getting the equation is only half of the problems to solve xD

---

## 2020-07-26 15:35:06 - strategies channel

**richard**

[@U013Z24LD0U](@U013Z24LD0U) thank you! sorry if the next question is a bit dumb, but how would you calc backReturn and layReturn? Would they be if they win. eg. backReturn = stake*odds and lay = stake

---

## 2020-07-26 13:56:11 - strategies channel

**birchy**

Ah ok. I'm seeing 12ms for London and 11ms for Ireland. Haven't checked the actual streaming response times yet as I only created the Ireland instance for testing. Is it even worth me comparing the two?

---

## 2020-07-26 12:13:20 - strategies channel

**PeterLe**

[@U016TGY3676](@U016TGY3676) Just send the API key to Neil and ask (him nicely) for it to be made active for streaming

---

## 2020-07-26 10:31:39 - general channel

**PeterLe**

Morning Quick Question please. Will a certificate that i created on my windows PC run OK on my macbook too? ie is it associated in any way with the OS, or is t just a digital certificate. Thanks in advance

---

## 2020-07-26 09:16:05 - general channel

**liam**

I have never actually tested it but streaming is always going to be faster over a large sample, with API-NG you would have to get lucky on your request to receive the response before the stream. But thinking about it a socket is always going to be quicker than http

---

## 2020-07-26 02:12:48 - general channel

**Misha**

My view is that it's a lot better to just use the streaming as it has all the bets in one place and doesn't rely on A) waiting for a bets response, and B) parsing the bets response. The only issue you can have is that when you initially subscribe it doesn't return your current matched orders

---

## 2020-07-26 01:35:27 - general channel

**qwerty.nat**

howdy all, what is the general consensus, when placing an order to do it async and subscribe to the orders streaming feed, or synchronously and wait for reply?  And infact anyone done any work on response times between streaming order responses vs the api ng endpoints return times?

---

## 2020-07-25 17:07:32 - general channel

**liam**

Yep, there are some nuances with current orders and the market book has extra stuff like the definition, worth reading the bf + bflw docs 

---

## 2020-07-25 16:52:43 - general channel

**Mo**

Here you go then: [https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2020-07-25 16:48:59 - general channel

**liam**

[https://liampauling.github.io/betfair/streaming/|https://liampauling.github.io/betfair/streaming/](https://liampauling.github.io/betfair/streaming/|https://liampauling.github.io/betfair/streaming/)

---

## 2020-07-25 16:48:07 - general channel

**Jorge**

Maybe it's time for me to move to betfairlightweight and streaming:slightly_smiling_face:

---

## 2020-07-25 16:47:35 - general channel

**Mo**

Streaming is much better

---

## 2020-07-25 16:45:42 - general channel

**Mo**

The market definition is for streaming data only

---

## 2020-07-25 16:42:03 - general channel

**Jorge**

I'm interested for the marketBook one, how can I get it to display market_definition? I am currently not using streaming but my own endpoint calls

---

## 2020-07-25 16:37:30 - general channel

**liam**

It’s in the marketCatalogue or in the marketBook.market_definition (streaming only) [https://github.com/liampauling/betfair/blob/737e17f8d864c8bfae0a995f69a13b9550f1e78d/examples/exampleone.py#L45|https://github.com/liampauling/betfair/blob/737e17f8d864c8bfae0a995f69a13b9550f1e78d/examples/exampleone.py#L45](https://github.com/liampauling/betfair/blob/737e17f8d864c8bfae0a995f69a13b9550f1e78d/examples/exampleone.py#L45|https://github.com/liampauling/betfair/blob/737e17f8d864c8bfae0a995f69a13b9550f1e78d/examples/exampleone.py#L45)

---

## 2020-07-25 16:23:14 - strategies channel

**Twatter**

Newbie question - I'm assuming basic market strategies like any inter market arbs or dutching whole field when book &lt; 100% is pretty much non existent these days?

---

## 2020-07-25 12:55:30 - general channel

**eduard**

:wave: hi everyone, got a quick question about vendor web app streaming api access ? Are we meant to create a connection for each user ? They seem to mandate on behalf of user headers for the connection session token

---

## 2020-07-24 15:08:25 - issues channel

**Jon**

i.e. how to get runner names

---

## 2020-07-24 15:01:46 - issues channel

**liam**

Or wrap it in a function and forgot about it [https://github.com/liampauling/flumine/blob/4de6cdfeb6aa1a1a12f25a87bc9db176efa18985/flumine/utils.py#L90|https://github.com/liampauling/flumine/blob/4de6cdfeb6aa1a1a12f25a87bc9db176efa18985/flumine/utils.py#L90](https://github.com/liampauling/flumine/blob/4de6cdfeb6aa1a1a12f25a87bc9db176efa18985/flumine/utils.py#L90|https://github.com/liampauling/flumine/blob/4de6cdfeb6aa1a1a12f25a87bc9db176efa18985/flumine/utils.py#L90)

---

## 2020-07-24 14:49:01 - issues channel

**Mo**

My bad, I based my code on streaming data

---

## 2020-07-24 14:40:13 - issues channel

**Michael**

Not that I'm in any position to teach anyone Python... but here goes: If you just want to know what attributes and object has you can print [d for d in dir(MarketBook) if not d.startswith('__')]

---

## 2020-07-24 14:33:59 - issues channel

**Jon**

actually it seems the bf visualizer is helpful for seeing the structure of objects: [https://docs.developer.betfair.com/visualisers/api-ng-sports-operations/](https://docs.developer.betfair.com/visualisers/api-ng-sports-operations/)

---

## 2020-07-24 14:23:23 - issues channel

**Jon**

i'm a total noob at python so i don't even know how to examine this [&lt;MarketBook&gt;] thing

---

## 2020-07-24 14:08:36 - issues channel

**Mo**

I think someone shared such a thing in the past but you won’t be able to find it because of limited history on Slack. 



We intend to add recipes like this to the documentation but there isn’t one yet. 



In the meantime, look at the `.ex` field on each runner and the `.availableToBack` and `.availableToLay` fields on that

---

## 2020-07-24 13:59:59 - issues channel

**Jon**

hi, is a noob question okay?

---

## 2020-07-24 09:55:02 - issues channel

**Andrey Yunoshev**

also look like `INFO:flumine.baseflumine:Market closed` spamed too much, not like it really happens

---

## 2020-07-24 09:17:14 - issues channel

**Andrey Yunoshev**

flumine-1.10.1

---

## 2020-07-24 09:14:46 - issues channel

**Andrey Yunoshev**

[@U4H19D1D2](@U4H19D1D2) as you have time, I trying profile my using flumine, and found - [https://monosnap.com/file/7jWykosfQKwxtyAwNlIMKI5DNkKvU6](https://monosnap.com/file/7jWykosfQKwxtyAwNlIMKI5DNkKvU6) - most of time using blotter process_orders function. look like wired? this is not ok, right?

---

## 2020-07-23 12:55:06 - issues channel

**Andrey Yunoshev**

I mostly thinking about betfair API itself

---

## 2020-07-23 12:49:05 - issues channel

**PeterLe**

[@UBS7QANF3](@UBS7QANF3), [@U4H19D1D2](@U4H19D1D2) [@UGV299K6H](@UGV299K6H) API keys sorted now; yes I made the exact same mistake; i used the Username as the application name

All sorted now!

Lets hope i can make good use of the new accounts! :grinning:

Great community; thanks for help guys

---

## 2020-07-23 12:04:58 - issues channel

**Mo**

Yeah, checking my notes that was indeed the problem

---

## 2020-07-23 12:03:25 - issues channel

**Mo**

Now that you mention it, I think that was my problem as well

---

## 2020-07-23 11:59:18 - issues channel

**Michael**

I had the same problem, in my case I think it was because I was trying to use the account login name as the application name.

---

## 2020-07-23 10:04:50 - issues channel

**liam**

Have you tried another name? I had the same problem and I think it was to do with either the length or the addition of special chars

---

## 2020-07-22 19:45:14 - strategies channel

**birchy**

What problems did you have with tagadab?

---

## 2020-07-22 19:03:41 - general channel

**birchy**

[@UBS7QANF3](@UBS7QANF3) [@UGV299K6H](@UGV299K6H) I've been running various reincarnations of 15+ year old "value" strategies for....15+ years. All simple mathematical strategies that earn pocket money rather than a salary. I took the decision to distance myself from studying form, sport stats, etc about 10 years ago because my conclusion was that those are already built into the betfair prices/bookie odds and are being compiled by sophisticated learning algorithms. I've never had enough time or intelligence to get into the depths of machine learning to a level where I would be competitive.

TBH, I'm now very surprised that I make any profit at all with my dumb "if...if...if...bet...goto next market" type strategies!

---

## 2020-07-22 18:38:20 - general channel

**steve**

not sure how to approach this situation

---

## 2020-07-22 18:19:02 - general channel

**birchy**

I'm late to the party as usual. Interesting reading about the GPS feeds, I didn't even know they existed! To the professionals among us: would you say that 3rd party data sources are essential nowadays or can decent profits be made from simple strategies based on nothing but the Betfair API data?

---

## 2020-07-22 08:05:25 - general channel

**Misha**

I think the P&amp;L page has had some problems in the last 24-48 hours. Not sure that this is your issue, but on another group there have been a few complaints

---

## 2020-07-21 19:39:59 - general channel

**azevedo**

[!here](!here) Hey guys! A question with regards to new transaction charges from 1st September. [@U4H19D1D2](@U4H19D1D2) posted about this on 30th June. see link below.



would this stuff really apply to the bigger guys? i.e. are those limits enforced per master accounts or only per sub accounts? (because you can have 10s of sub accounts and you could just distribute your activity appropriately to avoid any transaction charges)



[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1593541203173200|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1593541203173200](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1593541203173200|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1593541203173200)

---

## 2020-07-21 14:35:10 - general channel

**JT**

Ok. That works as well. I probably need to upgrade my bflw version. Thank you!

---

## 2020-07-21 14:31:47 - general channel

**JT**

It seems the current library is setting it to 1.1

Line 133 ([https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py))

@property

def url(self) -&gt; str:

return "[https://ips.betfair.com/inplayservice/v1.1/](https://ips.betfair.com/inplayservice/v1.1/)"

---

## 2020-07-21 14:30:13 - general channel

**JT**

Just realised the problem, for some reason, the url it was querying was v1.1. Changing it to v1 resolved it.

I am

---

## 2020-07-21 14:27:13 - general channel

**Mo**

What version of bflw?

---

## 2020-07-21 10:31:16 - general channel

**Unknown**

[@U016TGY3676](@U016TGY3676) +1 on s3, here is my monthly bill for a shit load of streaming data (compressed)

---

## 2020-07-20 22:22:34 - general channel

**birchy**

I'm just getting to grips with Flumine in my (limited!) spare time and have got MarketRecorder running. Just wondering what the recommended method is for filtering markets such as "if tv &gt; 50K"? Or would you generally capture ALL data? Or perhaps save only data 15 mins til start?

---

## 2020-07-20 21:18:08 - general channel

**JonJonJon**

Is there problems viewing P&amp;L today? I can't see anything more than 3 hrs ago

---

## 2020-07-20 20:29:42 - general channel

**Mo**

If you’re starting out go with Flumine

---

## 2020-07-20 19:08:14 - general channel

**steve**

[@UBS7QANF3](@UBS7QANF3) pythonista looks perfect but seems to be ios only. any suggestions for android? thanks in advance

---

## 2020-07-20 18:50:54 - general channel

**Mo**

Pythonista

---

## 2020-07-20 18:43:39 - general channel

**steve**

does anyone know of an app to run python on mobiles? need to web scrape too

---

## 2020-07-20 14:44:39 - random channel

**liam**

there is in flumine [https://github.com/liampauling/flumine/blob/master/flumine/utils.py#L77](https://github.com/liampauling/flumine/blob/master/flumine/utils.py#L77)

---

## 2020-07-20 14:43:58 - random channel

**Jono**

thanks thats good to know. is there a "fit to appropriate bracket" function in the bflw repo? I wrote my own for a previous script to do this but have fallen prey to using my own untested functions before

---

## 2020-07-20 14:18:19 - random channel

**Lee**

Nope, no problems. The only thing downsides i would say is the battery life was pretty average and the camera was in the bottom of the screen so everyone ends up looking up your nose

---

## 2020-07-20 14:17:01 - random channel

**Chris**

Lenovo Ideapad's have been no problem for me to run Linux on with minimal fuss/problems, and they're widely available

---

## 2020-07-20 12:55:16 - general channel

**liam**

[@U016535QCJ2](@U016535QCJ2) I think you may be misunderstanding the problem i am trying to solve, this is in regards to backtesting / simulated order matching and pricing after a removal

---

## 2020-07-20 12:50:58 - general channel

**Michael**

Both things happen frequently - runners are removed in the last few minutes with suspension and re-forming and others are removed from the market after the race after having refused to start or caused a problem of some kind. This is not new.

---

## 2020-07-20 11:48:08 - general channel

**liam**

[@ULDAVFDRP](@ULDAVFDRP) got a branch that can handle non runners, voids and updates prices, you able to give it a test your side? [https://github.com/liampauling/flumine/pull/239](https://github.com/liampauling/flumine/pull/239)

---

## 2020-07-19 23:28:02 - general channel

**Misha**

I don't use Python (but find this group a useful resource), but if you try to log a lot of data to disk, say for example streaming updates, the disk IO can hold up normal processing. For small writes its find to do in sequence, for larger/more frequent writes its better to do in another thread

---

## 2020-07-19 23:23:58 - general channel

**Ruben**

won't Python's GIL make it indifferent to log in the same thread vs in another one?

---

## 2020-07-19 11:18:25 - general channel

**Unknown**

[@UBS7QANF3](@UBS7QANF3) exit problem solved :slightly_smiling_face: I won the battle against rounding ahhahah

---

## 2020-07-19 08:11:20 - general channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) - have you considered using `TypedDict`s? [https://www.python.org/dev/peps/pep-0589/](https://www.python.org/dev/peps/pep-0589/)

---

## 2020-07-18 19:31:30 - general channel

**Dave**

I personally have not used it, sorry! This message ( [https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1592148816290700|Click here](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1592148816290700|Click here) ) has some of the raw endpoints as well, but really all you need to do is replicate what the browser is doing. I'm not sure if it only works with the default website appKey though. I'll let others who've used it chime in though, hopefully they can point you in a better direction.

---

## 2020-07-18 14:10:14 - general channel

**Dave**

(or to the mid if the spread is too wide, but figuring out the "true" mid is a complex problem in itself)

---

## 2020-07-18 13:21:03 - general channel

**Dave**

[https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1592159363298400](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1592159363298400)

---

## 2020-07-18 12:30:00 - general channel

**Unknown**

I ask you a trivial question, is there a function to know the current profit on a market?

Example

---

## 2020-07-17 15:28:23 - strategies channel

**liam**

Obviously a biased opinion but integrating bflw should just involve deleting a shit ton of code

---

## 2020-07-17 15:07:30 - strategies channel

**Mo**

Good luck, here to help

---

## 2020-07-17 14:43:36 - strategies channel

**Mo**

I'm not trying to be an asshole but your code is not great in my opinion. I mean you're not even using requests instead of urllib. This makes it hard for me to engage with your code when I really genuinely believe the correct answer is for you to switch to betfairlightweight. I can see how it might seem like you're taking two steps back to do it but once you do then you have a great community and ecosystem to support you

---

## 2020-07-17 14:34:18 - strategies channel

**Mo**

Switch to betfairlightweight

---

## 2020-07-17 12:08:55 - general channel

**Mo**

This is what I do:



1. Maintain a database table for each bet status (SETTLED, CANCELLED, VOIDED, LAPSED)

2. Every hour, for each bet status, find the most recent settledDate from the database table

3. Use listClearedOrders to get all orders from (and including!) settledDate onwards

4. Upsert the orders into the database

---

## 2020-07-17 09:19:40 - general channel

**sartux**

I'm a very scrupulous programmer, maybe it's just my mental problem hahahah

---

## 2020-07-17 08:46:02 - general channel

**Oliver Varney**

[https://help.smarkets.com/hc/en-gb/articles/115001431011-How-to-calculate-a-hedge-bet](https://help.smarkets.com/hc/en-gb/articles/115001431011-How-to-calculate-a-hedge-bet)

---

## 2020-07-17 08:45:27 - general channel

**sartux**

the "problem" of the best price has been solved, I wanted to create a function that simulates the betfair cashout. Then an exit cycle until the win / loss is balanced in all selections



how do you cash out?

---

## 2020-07-17 07:47:24 - general channel

**Oliver Varney**

morning chaps, I have a variety of the pro files in both zip file format and bz2 formats. How do people go about opening these / patching without extracting in bflw /flumine. Is there some kind of param im missing or libraries work using ?

---

## 2020-07-16 15:36:51 - general channel

**Mo**

That's right. I think for licensing reasons, they are not allowed to make the official endpoint streaming. I have never got a clear answer from Neil how frequently we're allowed to poll it but I would assume every 0.2 s which is the limit for listMarketBook.



The website hits the inplayservice endpoint every 10 seconds so polling it more frequently than that could be considered risky. I've personally not had any push back doing it once a second.

---

## 2020-07-16 14:49:00 - general channel

**JC**

So do you think it would be best to put a marketCatalogue data request as part of the flumine set up or just as a separate process? How do you access the betgenius feed?

---

## 2020-07-16 14:05:05 - general channel

**Misha**

Different app key than streaming?

---

## 2020-07-16 14:02:40 - general channel

**Misha**

Last question on the scores: only a JSON RPC endpoint? No REST?

---

## 2020-07-16 13:51:04 - general channel

**Mo**

For tennis scores, you have two options. For ATP and WTA main tour events, Challengers and Grand Slams excluding Australian Open you can use the “official” scores endpoint: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py)



For everything else such as ITF, exhibition matches, Hopman Cup, Davis Cup etc you can use the undocumented inplayservice: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py)

---

## 2020-07-15 16:24:39 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/flumine/baseflumine.py#L143](https://github.com/liampauling/flumine/blob/master/flumine/baseflumine.py#L143)

---

## 2020-07-15 12:35:49 - strategies channel

**Michael**

Ah sorry I didn't notice that - even so the questions above are all the type of thing you should be considering. That graph might be terrific in one situation and no good at all in another.

---

## 2020-07-15 12:34:08 - strategies channel

**Lee**

I’m guessing the first question is for me as the graphs are Liams.

I can wait I’m just getting impatient :grin:

---

## 2020-07-14 15:23:01 - general channel

**liam**

if that was set as a list you have a problem but again a new listener is created each time so shouldnt be a problem

---

## 2020-07-14 15:19:53 - general channel

**liam**

`streaming_update = None`

---

## 2020-07-14 15:15:52 - general channel

**liam**

lol I forgot a new listener is created on each run, so was questioning the use of `[0]`

---

## 2020-07-14 15:10:19 - general channel

**Mo**

I've done this:



```class StreamingUpdateListener(StreamListener):

    streaming_update = None



    def snap(self, market_ids: list = None) -&gt; list:

        result = super().snap(market_ids)

        if result:

            if self.lightweight:

                result[0]['streaming_update'] = self.streaming_update

            else:

                result[0].streaming_update = self.streaming_update

        return result



    def _on_change_message(self, data, unique_id):

        self.streaming_update = data['mc'][0]

        super()._on_change_message(data, unique_id)```

---

## 2020-07-14 14:28:54 - general channel

**Mo**

`HistoricalGeneratorStream` calls `self.listener.snap()` which means the `streaming_update` field of the `MarketBook` is `None`. Is there a canonical way to ensure that these updates are on the `MarketBook`s?

---

## 2020-07-13 13:20:40 - general channel

**liam**

yeah Neil probably wont be able to help, you could try the generic premium mailbox [mailto:priority@betfair.com|priority@betfair.com](mailto:priority@betfair.com|priority@betfair.com)

---

## 2020-07-11 12:31:41 - issues channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2020-07-08 18:49:59 - general channel

**Unknown**

[@U016TGY3676](@U016TGY3676) [@U4H19D1D2](@U4H19D1D2) I remember that they trialed Cross matching in March 2010 and then they switched it on for Lingfield on Tuesday 23 rd Nov 2010. I remember the day very clearly as I thought it would be the end of the gravy train :grinning:, I scaled my stakes down to the minimum on Lingfield that day and kept a screen shot of the very first race :grinning:, so it wasnt XM that started the decline for me. Birchy, if it helps inspire you, they are some of the guys/girls on here that are making 5 figures and even 6 figures a month, so stick with it :grinning: (Cant believe that was ten years ago?)

---

## 2020-07-08 18:37:43 - general channel

**liam**

You mean your not using bflw? [https://github.com/liampauling/betfair/blob/master/examples/examplehistoricdata.py|https://github.com/liampauling/betfair/blob/master/examples/examplehistoricdata.py](https://github.com/liampauling/betfair/blob/master/examples/examplehistoricdata.py|https://github.com/liampauling/betfair/blob/master/examples/examplehistoricdata.py)

---

## 2020-07-08 12:34:55 - general channel

**Oliver Varney**

another question also, is the variable stop in trade meant to be used as a trade size variable?

---

## 2020-07-08 11:42:27 - general channel

**Oliver Varney**

morning, question on flumine, whats the best way to check exposure match and unmatched orders for a runner

---

## 2020-07-07 20:24:10 - general channel

**birchy**

Plus my understanding of Python is very basic as I've never had any formal training, so only used what I actually needed. I'm such a dinosaur, that I only looked into threading about a week ago!

---

## 2020-07-07 20:17:27 - general channel

**birchy**

Yeah, Flumine certainly makes life easy! I implemented streaming in a matter of minutes, whereas adding it to my library would of taken a few days of coding/testing. TBH, it wasn't obvious at first what Flumine actually did when reading the docs. I initially thought/assumed that it was a mining library based on the name: flu-mine.

---

## 2020-07-07 20:09:27 - general channel

**liam**

Yeah I certainly visited your forum, bflw can be a bit complicated when reading the code as it’s designed to be easy to use whilst matching the api endpoints. If you are used to polling then streaming is a complete breeze! Flumine is very much in beta so welcome any feedback, I know the docs need to be improved but there isn’t that much code to read through if you want to work out how it works 

---

## 2020-07-07 20:00:25 - general channel

**liam**

Hi Birchy, I used your library when I first started so thanks for sharing that :grinning: Regarding backtesting flumine takes streaming data you record yourself and anything you purchase from betfair 

---

## 2020-07-07 19:59:06 - general channel

**birchy**

I've been polling data for the last 16 years, so please forgive my stupidity. :grinning:

TBH, I've not read the streaming docs in any detaiI, but was of the impression that "conflate_ms" was basically a self-defined throttle?

Flumine seems to be the way forward for a "new" bot and I know for a fact that my code libraries are too far detached to be able to integrate easily, so I'll be starting from scratch with this new "tool".

---

## 2020-07-07 19:54:13 - general channel

**Mo**

If you're starting from scratch (in a Python sense), flumine is the way to go for both recording data and backtesting but I've personally never used it so I'll let others comment on that

---

## 2020-07-06 21:17:35 - random channel

**Lee**

Maybe a bit of a newbie question but in a recent horse race the website says BSP 5.41 but in the stream I got BSP 6.82. What causes this difference?

```{"adjustmentFactor": 11.628, "status": "ACTIVE", "sortPriority": 4, "bsp": 6.818947736265255, "id": 12660148}```

---

## 2020-07-05 18:38:23 - random channel

**SrFabio**

does it not like quoteValue being a string? I'd be extremely surprised if that was the issue but I think we all seen things on the Betfair API that don't look amazing

---

## 2020-07-05 15:14:28 - general channel

**sartux**

I know, but for my size i dont have problem

---

## 2020-07-05 14:39:45 - general channel

**D C**

Ah right that explains why I have never seen this. I never knew of the existence of this github but I guess that is what happens when you go via intermediaries. Wonder what else I am missing. Many thanks indeed for that info though [@UBS7QANF3](@UBS7QANF3) that helps explain quite a few of the weird things I have seen on the feed.

---

## 2020-07-05 14:30:24 - general channel

**D C**

Any chance you could point me in the direction of that documentation? I've not come across any reference to that at all so far. I wonder what else I am missing now when it comes to the "quirks" of the system.

---

## 2020-07-05 14:29:13 - general channel

**Mo**

The documentation explicitly states direct strikes to the tracker from the whip can generate those kind of readings

---

## 2020-07-05 12:22:53 - strategies channel

**liam**

Forgot to actually answer your question, but things have now settled back down, still better than before but during lockdown the markets where different (less lower hanging fruit) 

---

## 2020-07-05 10:54:49 - general channel

**sartux**

yes, but the problem is solved trivially by increasing the size or



IF coverSize &lt;minBook:

   coversize = minBook



it's a no problem :)

---

## 2020-07-05 10:01:48 - general channel

**sartux**

why do you have to face this problem if you can solve it from the beginning?

---

## 2020-07-05 09:58:56 - general channel

**SrFabio**

Hey that doesn't answer my question :wink:

---

## 2020-07-05 09:28:08 - general channel

**sartux**

the controls are very simple, 2-digit rounding and, for Italy, a minimum bet of € 2



so with an IF and a Round you solve the problem

---

## 2020-07-05 09:26:23 - general channel

**sartux**

Do betfair APIs also provide match statistics? (shots on goal, total shots, possession of the ball, etc.)



If they don't provide them, what do you recommend that I can use with the bot?

---

## 2020-07-04 07:17:15 - general channel

**Michael**

Just for the avoidance of doubt - I'm not saying that statistical tests are never helpful, just that sound thinking should be applied to what techniques are appropriate to the situation,

---

## 2020-07-03 15:29:58 - general channel

**Mo**

Use the undocumented inplayservice endpoint: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py)

---

## 2020-07-03 10:36:18 - issues channel

**liam**

I see what you are saying, quick google and it says lists are thread safe [https://stackoverflow.com/questions/6319207/are-lists-thread-safe](https://stackoverflow.com/questions/6319207/are-lists-thread-safe)

---

## 2020-07-03 10:30:09 - general channel

**Eswyn**

And flumine will check the condition for every stream update, right?

---

## 2020-07-03 10:20:16 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/flumine/markets/market.py#L98|yep](https://github.com/liampauling/flumine/blob/master/flumine/markets/market.py#L98|yep)

```market.market_start_datetime```

---

## 2020-07-03 10:19:08 - general channel

**Eswyn**

Right, but how do I identify the ones I _do_ want? Can it be done with flumine?

---

## 2020-07-03 10:17:37 - general channel

**liam**

You would have to filter by market or eventId but streaming is so cheap I wouldn't bother, just ignore the ones you don't want

---

## 2020-07-03 10:16:45 - general channel

**Lee**

(when i'm trying to word these questions it's giving me ideas of places i might be going wrong / things to test)

---

## 2020-07-03 10:01:51 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1591956822252700|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1591956822252700](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1591956822252700|https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1591956822252700)

---

## 2020-07-03 07:32:42 - general channel

**Mo**

Is the Bot Executor tool implemented in flumine?

---

## 2020-07-02 18:04:34 - general channel

**Mo**

Yes, streaming is the way to go

---

## 2020-07-02 18:02:46 - general channel

**FlyingFish**

Managed to do it with looping the markets list and time.sleep() but looking at it now and the streaming really looks like a better option.

Streaming won't be static, as you mentioned, and will allow for expansion to other bots in the future.

---

## 2020-07-02 16:25:55 - general channel

**liam**

[@U0147CTRM8E](@U0147CTRM8E) you can use either, flumine obviously does a lot of the heavy lifting for you but streaming makes this easy as you can just subscribe to your markets and place when requierd

---

## 2020-07-02 14:29:05 - general channel

**Newbie99**

[@U0147CTRM8E](@U0147CTRM8E) do you mean streaming by chance, you can then kick things off in the morning and leave it running all day (or longer)?

---

## 2020-07-02 12:19:57 - general channel

**FlyingFish**

Hi everyone,

decided to switch from R to python with BFLW and trying a very basic bot.

What is the best approach to place bets near the off on a selection of races?

In R i use taskScheduler but was wondering if there is a more efficient way to accomplish this only with BFLW/Flumine.

---

## 2020-07-01 20:04:06 - general channel

**Jonatan (skyw)**

Yeah I just can't see how that would help me if they limit the number of logins :)

---

## 2020-07-01 14:59:46 - general channel

**Jonatan (skyw)**

Don't know if it's the bflw solution but you can access the prices traded in the stream update. I think its available in each market book.

---

## 2020-07-01 14:13:31 - general channel

**Mo**

That won't help and you should ask [@U4H19D1D2](@U4H19D1D2) to get your key activated for free. But best price execution can and will still happen and it is still a positive thing for you

---

## 2020-06-30 20:52:18 - issues channel

**Dave Simonds**

I think i remember seeing somewhere in the documentation that its OK to do if its for greening up.



you’re right, it is a hack but the only legitimate way you can green-up if only 50p of a larger steak gets matched

---

## 2020-06-30 20:10:49 - general channel

**sartux**

but in this way I miss the withdrawal and therefore cause me the problem. I, on the other hand, would like to book the quota I choose and remain on hold, as I do manually

---

## 2020-06-30 19:34:25 - general channel

**liam**

Speak to Neil, bdp or account manager, never go through the help desk 

---

## 2020-06-30 19:33:46 - general channel

**Pete**

and I can't even get someone on their help desks who knows what they are, or where I can see them on my account

---

## 2020-06-30 14:54:47 - general channel

**Jorge**

I am not following your questions at all, sorry, maybe others can help

---

## 2020-06-30 12:05:58 - general channel

**Jono**

Hey everyone, just a quick one this time. I was wondering if it was possible to check games on the exchange for event_id, selection_id, ko time/date etc without certain betfair account details. Ive seen in a few of the examples in the lightweight repository that some operations dont require valid usernames, passwords, appKeys or sessionTokens to be entered (specifically examplestreaminghistorical.py and exampleracecard.py). Is it possible using betfairlightweight to alter the scripts I have already written to retrieve the above mentioned game details such that I no longer have to enter any credentials? Any help is greatly appreciated.

---

## 2020-06-30 11:59:57 - issues channel

**LK**

not sure how to reach them about something like this.

---

## 2020-06-30 11:56:26 - issues channel

**LK**

the market in question does not seem to exist on betfair, yet it was streamed

---

## 2020-06-30 10:47:45 - general channel

**Unknown**

this is the problem!!!

---

## 2020-06-30 09:38:52 - general channel

**sartux**

[@U0155J92A7Q](@U0155J92A7Q) I inspected the request in case of cash out and I saw that the operation can also be closed with GET variables, there is only one problem ...



[https://cashout-service.betfair.it/cashout-service/transactional/v1.0/cashout?_ak=######&amp;alt=json&amp;currencyCode=EUR&amp;marketId=1.170987782&amp;quotePercentage=100&amp;quoteValue=0](https://cashout-service.betfair.it/cashout-service/transactional/v1.0/cashout?_ak=######&amp;alt=json&amp;currencyCode=EUR&amp;marketId=1.170987782&amp;quotePercentage=100&amp;quoteValue=0)



it works only if you are logged in via browser. how could we solve it?

---

## 2020-06-29 16:44:47 - general channel

**sartux**

I have searched the documentation but cannot find an answer to the problem.



Is there a method that returns the percentage of the book to me or do I have to calculate it?

---

## 2020-06-29 13:24:50 - strategies channel

**liam**

[@UUCD6P13J](@UUCD6P13J) this is now available in [https://github.com/liampauling/flumine/blob/master/HISTORY.rst#180-2020-06-29|1.8.0](https://github.com/liampauling/flumine/blob/master/HISTORY.rst#180-2020-06-29|1.8.0), currently very [https://github.com/liampauling/flumine/blob/master/flumine/markets/market.py#L66|simple](https://github.com/liampauling/flumine/blob/master/flumine/markets/market.py#L66|simple)



```place_markets = market.event.get("PLACE")  # [&lt;Market&gt;, ..]



event_markets = markets.event  # {"PLACE": [&lt;Market&gt;], "WIN": [&lt;Market&gt;], "EACH_WAY": [&lt;Market&gt;]}```

---

## 2020-06-29 10:53:27 - issues channel

**Andrey Yunoshev**

multiple stream not help in case flumine

---

## 2020-06-29 10:45:58 - general channel

**sartux**

at the moment I solved with the cashout formula, it is not accurate to the cent but it is not a problem, it is obvious that if cashout via POST worked it would be the best solution

---

## 2020-06-29 10:45:09 - issues channel

**Dylan**

will betfairlightweight track all AUS markets even outside the event?

---

## 2020-06-29 09:28:56 - general channel

**Jorge**

Anything more I can help regarding cashing out?

---

## 2020-06-28 23:06:22 - general channel

**Newbie99**

Its not as simple as that, in that there is are multiple ways to 'cash out' depending on exactly what you're looking to do. There has been a bit of chat about being able to place an API call to the actual Betfair cash out (private) API, but its not in the docs, so there isn't too much info on it (other than a bit on this chat a few days ago).



It may be worth having a quick search as you can see some of the recent chats about cash out logic and then hopefully someone will have attempted the same approach as you and will be able to help.

---

## 2020-06-28 22:59:59 - general channel

**sartux**

do a check on the cycles you use, surely you can optimize the code by avoiding reading the same data several times.

help yourself using a database or simply text files and above all decrease the number of lines when you do the for, a technique could be to use a lot of filters

---

## 2020-06-28 14:22:54 - general channel

**Mo**

Sorry you didn’t get any replies to this yet, there has been a lot of chat about this recently. I think [@U013MLED3V1](@U013MLED3V1) and [@U0155J92A7Q](@U0155J92A7Q) were involved. Can you guys help?

---

## 2020-06-28 14:15:13 - general channel

**D C**

OK thanks. Ill look at that python and convert it to C++. Many thanks

---

## 2020-06-28 14:13:40 - general channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/racecard.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/racecard.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/racecard.py|https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/racecard.py)

---

## 2020-06-28 14:08:08 - issues channel

**Andrey Yunoshev**

[https://github.com/liampauling/flumine/issues/221](https://github.com/liampauling/flumine/issues/221)

---

## 2020-06-28 13:56:59 - general channel

**liam**

Yeah it’s in the market definition in streaming 

---

## 2020-06-28 12:50:38 - general channel

**sartux**

I'm having several difficulties in making a cash out function, can someone help me?

---

## 2020-06-27 13:37:29 - issues channel

**Alex A**

How long do people find it normally takes to place a bet with async=true (from the Betfair api, not the bflw version)?

---

## 2020-06-27 12:43:17 - general channel

**Rich**

Does anyone know of the top of their head what a horse non-runner would look like in the streaming api? I'm guessing a new marketDefinition is sent?  Do I cache the number of runners then compare it to the new number of runners?

---

## 2020-06-26 21:28:27 - general channel

**liam**

Yeah the source is all on GitHub, the only thing it does share is the user agent on requests `betfairlightweight/version` but betfair don’t actually analyse this 

---

## 2020-06-26 18:37:42 - issues channel

**D C**

[@U4H19D1D2](@U4H19D1D2) You had no issues at all with the streaming API ?

---

## 2020-06-26 17:53:06 - general channel

**steve**

thanks again for the help ive got an example game exporting data to a file, so should be ok from here

---

## 2020-06-26 16:11:02 - issues channel

**Jonatan (skyw)**

Yeah I am not doubting there are a problem, just wonder if the stream fails to report them completely or if they are delayed.

Just to know what to keep an eye on.

---

## 2020-06-26 16:07:53 - issues channel

**D C**

6 seconds at the death of an in-running race with no orders matched and no orders placed or cancelled? At the very least you would expect the tracksiders to be hammering away. Not saying that orders are not getting placed and filled, just that the stream has stuck and has either not reported them or has delayed reporting them. Until I can check my NG bots I can't tell if this is a pure streaming issue or a generic problem with order submission. Maybe someone else will notice it by then

---

## 2020-06-26 15:56:03 - general channel

**Mo**

Good luck, any questions let us know

---

## 2020-06-26 15:55:19 - general channel

**Mo**

[https://liampauling.github.io/betfair/streaming/#historical](https://liampauling.github.io/betfair/streaming/#historical)

---

## 2020-06-26 15:54:43 - general channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2020-06-26 15:53:15 - general channel

**steve**

hey guys. im using python to download in game odds from betfair. any links to where i can find how to do this from START to END. i have json files and completely stuck

---

## 2020-06-26 15:52:03 - issues channel

**D C**

Didnt notice any issue yesterday. Any idea if this is confined to streaming or is NG having issues too?

---

## 2020-06-25 16:18:39 - general channel

**Jorge**

Yes [@U4H19D1D2](@U4H19D1D2). I just use Python for API calls and I read small csv files apart from that...

---

## 2020-06-25 10:05:51 - general channel

**liam**

1gb for just python?? That’s huge 

---

## 2020-06-24 13:33:19 - general channel

**Jorge**

[@U4H19D1D2](@U4H19D1D2) Wow, okay then I need to figure out what the problem is with my machine, since my resources are more than enough. I guess it has been a long time since the last time I restarted it

---

## 2020-06-24 10:55:24 - general channel

**MrBIN**

with regard to [@U015R4ZU8G5](@U015R4ZU8G5) question - Do you know if every update of new SP orders is pushed to the stream (assuming a subscription with *MarketDataFilter that includes* SP_TRADED field). Or maybe only a regular book update is sent to the stream callback (with the current state of SP sizes)?

---

## 2020-06-24 10:10:56 - random channel

**Mo**

Noob horse racing question... do horses get renamed? Looks like they get renamed if they're imported to HK? [https://racing.hkjc.com/racing/information/English/Horse/HorseFormerName.aspx](https://racing.hkjc.com/racing/information/English/Horse/HorseFormerName.aspx). Any other circumstances?

---

## 2020-06-24 08:38:47 - general channel

**yuv**

Hi guys, there is something I can’t figure out regarding the SP bets. I look at the “stakes and liabilities taken” published after the SP is settled and it never sums up to be the sp bets I collected from the streaming API while constantly listening before the race. It seems like there are sp bets that I don’t get through the streaming API. For example let’s say, that in the last update I got from the API on selection X the total sp LayLiabilityTaken for that selection was 1,000 Pound and when the final sp details were published there were 3,000 Pounds (and that happens pretty much all the time).

---

## 2020-06-22 16:29:51 - general channel

**liam**

Implying that it might be your code leaking rather than bflw 

---

## 2020-06-22 15:40:25 - general channel

**liam**

That running bflw on its own? 

---

## 2020-06-22 08:34:47 - strategies channel

**Lee**

Is there a way with flumine to process two markets at the same time? i.e. win and place

---

## 2020-06-21 14:07:43 - general channel

**yuv**

Hi, I saw in the documentation that the SP’s far price and near prices only updates every 60 seconds (through API), Do you know if the SP sizes do updates in realtime (‘backStakeTaken’ and ‘LayLiabilityTaken’) ?

---

## 2020-06-21 08:52:33 - general channel

**MrBIN**

Hi all. I have a question regarding the Betfair's SP (Starting Price). I can see that some users add sp orders right before the actual SP is published (seems like a few milliseconds before). I wondered if there is any indication (hopefully through API) to when the SP is published.

---

## 2020-06-20 18:01:48 - general channel

**liam**

[https://liampauling.github.io/betfair/streaming/|https://liampauling.github.io/betfair/streaming/](https://liampauling.github.io/betfair/streaming/|https://liampauling.github.io/betfair/streaming/)

---

## 2020-06-20 17:53:14 - issues channel

**liam**

Do you know what bflw version you are using?

---

## 2020-06-20 17:49:43 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2020-06-20 17:49:12 - general channel

**liam**

That’s a screenshot of the order streaming example, I assume you want market?

---

## 2020-06-20 17:36:39 - general channel

**gprokisch**

Does anyone have an example of streaming odds? These example in the documentation seems is not working:

---

## 2020-06-20 15:00:13 - general channel

**Stefan**

All betfair libraries are just wrappers, but not mine, it is betfair bot framework. Yes, [@U4H19D1D2](@U4H19D1D2) I know I checked your library, I can program in python, and am actually here to learn more about python, I prefer to use it only in ML.

---

## 2020-06-20 14:20:31 - general channel

**Andrey Yunoshev**

Here is order info and flumine record - but I do not see, Replace Confirm or another status confirming replace? I do something wrong?

---

## 2020-06-20 08:12:21 - general channel

**Jonatan (skyw)**

Have they hinted about this before? Kinda horrible to say the least breaking users applications in one day without any notice, and with no real documentation...

---

## 2020-06-18 14:35:42 - general channel

**Edoardo**

Hi, I'm new and I'm just playing around with the APIs. I have a doubt about the selection id. Let's say I have a football match and I get the market 'under/over 2.5' then I will have two selection IDs, one for under and one for over. How do I get the selection id associated with 'under'? Any help is appreciated

---

## 2020-06-18 05:48:17 - general channel

**gprokisch**

Thats is the problem. It's US ip based.

---

## 2020-06-18 05:43:30 - issues channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py) should help you get started

---

## 2020-06-17 20:35:52 - random channel

**liam**

In flumine? 

---

## 2020-06-17 17:19:58 - issues channel

**Mo**

Happy to help :+1:

---

## 2020-06-17 17:17:02 - issues channel

**Jono**

ive made some of the changes you folks have suggested and am now succesfully into the .tar file... newbie round of applause. Ill continue improving the repository in the ways suggested and will check back in tomorrow when ive got some stamina back. thanks ever so much guys for all the help, i wouldnt have got anywhere today without it. Cheers

---

## 2020-06-17 16:44:38 - issues channel

**Jono**

it hasnt actually caused additional problems yet (outside of the ones i was already having when i joined the group), it just feels as if im building on unsteady foundations if i cant get theis seemingly small issue sorted

---

## 2020-06-17 16:40:51 - issues channel

**Jono**

Requirement already satisfied: smart-open in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (2.0.0)

Requirement already satisfied: requests in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from smart-open) (2.22.0)

Requirement already satisfied: boto in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from smart-open) (2.49.0)

Requirement already satisfied: boto3 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from smart-open) (1.14.4)

Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,&lt;1.26,&gt;=1.21.1 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from requests-&gt;smart-open) (1.25.8)

Requirement already satisfied: idna&lt;2.9,&gt;=2.5 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from requests-&gt;smart-open) (2.8)

Requirement already satisfied: chardet&lt;3.1.0,&gt;=3.0.2 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from requests-&gt;smart-open) (3.0.4)

Requirement already satisfied: certifi&gt;=2017.4.17 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from requests-&gt;smart-open) (2019.11.28)

Requirement already satisfied: jmespath&lt;1.0.0,&gt;=0.7.1 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from boto3-&gt;smart-open)

(0.10.0)

Requirement already satisfied: botocore&lt;1.18.0,&gt;=1.17.4 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from boto3-&gt;smart-open) (1.17.4)

Requirement already satisfied: s3transfer&lt;0.4.0,&gt;=0.3.0 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from boto3-&gt;smart-open) (0.3.3)

Requirement already satisfied: python-dateutil&lt;3.0.0,&gt;=2.1 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from botocore&lt;1.18.0,&gt;=1.17.4-&gt;boto3-&gt;smart-open) (2.8.1)

Requirement already satisfied: docutils&lt;0.16,&gt;=0.10 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from botocore&lt;1.18.0,&gt;=1.17.4-&gt;boto3-&gt;smart-open) (0.15.2)

Requirement already satisfied: six&gt;=1.5 in c:\users\jonathan wadsworth\appdata\local\packages\pythonsoftwarefoundation.python.3.8_qbz5n2kfra8p0\localcache\local-packages\python38\site-packages (from python-dateutil&lt;3.0.0,&gt;=2.1-&gt;botocore&lt;1.18.0,&gt;=1.17.4-&gt;boto3-&gt;smart-open) (1.14.0)

---

## 2020-06-17 15:29:15 - random channel

**JonJonJon**

Another random question... What made you choose the 3200Mhz ram, vs 3600Mhz ram? I can't find conclusive data on which is better.

---

## 2020-06-17 13:39:59 - issues channel

**liam**

What problems are you having?

---

## 2020-06-17 13:36:46 - issues channel

**liam**

Just seen 'LetsGo' [https://forum.developer.betfair.com/forum/developer-program/historical-data/31991-selection-ids-from-basic-historical-data?p=32003#post32003|post](https://forum.developer.betfair.com/forum/developer-program/historical-data/31991-selection-ids-from-basic-historical-data?p=32003#post32003|post), not sure what his problem is :rolling_on_the_floor_laughing:

---

## 2020-06-17 11:49:54 - strategies channel

**Jorge**

[@U013MLED3V1](@U013MLED3V1) well I meant for 2 runners it is possible to solve all the possible complications in a simple way (you'll only have to place 1 bet), whereas 2+ runners makes it very complicated to be solved

---

## 2020-06-17 11:10:33 - strategies channel

**SrFabio**

The other "problem" is that the cashout might be composed by multiple orders (one per traded selection) and some of those orders might not get matched, so we need some type of "slippage" to prevent this...there's a lot of things to consider on a cashout

---

## 2020-06-16 20:03:43 - general channel

**Jonatan (skyw)**

look interesting, I missed that one looked at two other python libraries.

---

## 2020-06-16 14:50:28 - general channel

**Mo**

Pretty clear in the documentation

---

## 2020-06-16 09:10:48 - random channel

**liam**

Are you able to have a look/test of [https://github.com/liampauling/flumine/pull/219|this](https://github.com/liampauling/flumine/pull/219|this)? Basically taking your idea but placing it inside the blotter, ended up cleaning up quite a few things, I am seeing a dramatic improvement :thumbsup:

---

## 2020-06-15 21:13:37 - issues channel

**Sandy Caskie**

Hi, sorry I missed your message. Its a problem to do with pip, so my end and not to do with betfair lightweight. I tried it on another computer and its working fine. Cheers for your help Liam.

---

## 2020-06-15 21:05:52 - random channel

**liam**

No problem, looking at it I would move the logic into the blotter itself 

---

## 2020-06-15 19:41:22 - random channel

**JonJonJon**

Does anyone know whether an Intel 10900k CPU would be better than the Ryzen 3900x for running Python/Flumine with multiprocessing?



Ryzen 3900x has a much better passmark score:

[https://www.cpubenchmark.net/cpu.php?cpu=Intel+Core+i9-10900K+%40+3.70GHz&amp;id=3730](https://www.cpubenchmark.net/cpu.php?cpu=Intel+Core+i9-10900K+%40+3.70GHz&amp;id=3730)



[https://www.cpubenchmark.net/cpu.php?cpu=AMD+Ryzen+9+3900X&amp;id=3493](https://www.cpubenchmark.net/cpu.php?cpu=AMD+Ryzen+9+3900X&amp;id=3493)



However, reading reviews of the 2 doesn't seem very conclusive, such as [https://www.tomshardware.com/reviews/intel-core-i9-10900k-cpu-review/4|this](https://www.tomshardware.com/reviews/intel-core-i9-10900k-cpu-review/4|this).

---

## 2020-06-15 16:52:14 - issues channel

**mandelbot**

Thanks! Super helpful. I have used linux before, but it's been about a decade now.

---

## 2020-06-15 16:45:58 - issues channel

**Jonatan (skyw)**

I use ubuntu 20.04 image python 3.8 out of the box :)

---

## 2020-06-15 15:02:50 - random channel

**Aaron**

Hi guys, new here, just saying hi. Great gratitude to liam and whoever has contributed to betfairlightweight, working my way through the github reading now!

---

## 2020-06-15 14:54:50 - random channel

**Chris**

Thanks for your help, I'll give it a go

---

## 2020-06-15 14:48:00 - random channel

**Chris**

Ok, I think I understand, so the logic of running that and then connecting to it from another script is built into bflw? And I think I've seen mentioned before that there's a limit to the number of markets you can have streaming in a single stream? For instance I'd quite happily just have every football match and market for the next 7 days but I guess that isn't realistic

---

## 2020-06-15 14:38:49 - random channel

**Chris**

Thanks [@U4H19D1D2](@U4H19D1D2) just looking at that now, so I'd still need to store the list of markets and all the associated metadata that I'm streaming somewhere in my database, and then just grab them directly from the stream, how does that actually work in practice though, do i have it sitting as a daemon and can query that, or just run it essentially ad-hoc when i want to update the prices as I pretty much do now with bflw but in a big loop

---

## 2020-06-15 14:26:06 - random channel

**liam**

Use streaming, ignore the queue and instead [https://liampauling.github.io/betfair/streaming/#snap|snap](https://liampauling.github.io/betfair/streaming/#snap|snap) the listener when you want a price, super quick and super lightweight

---

## 2020-06-15 14:15:29 - issues channel

**liam**

thats fair enough, try a single python process first but we don't offer any warranty on windows use

---

## 2020-06-15 14:14:26 - issues channel

**liam**

spin up a linux instance and all your problems will be solved

---

## 2020-06-15 14:04:09 - issues channel

**mandelbot**

dont know how to do the latter yet :smile:

---

## 2020-06-15 13:57:41 - issues channel

**liam**

can you share the code? Seems very odd for one stream to have problems

---

## 2020-06-15 13:24:32 - issues channel

**Sandy Caskie**

```Name: betfairlightweight

Version: 1.9.1```



---

## 2020-06-15 11:54:39 - strategies channel

**Jorge**

Hi [@U013MLED3V1](@U013MLED3V1) I'm curious, how do you cashout in more than 2 runners markets without using the API cashout call? Even if you have the bet position, the number of equations is big to be solved for 3+ runners [2 runners is very easy, I know]

---

## 2020-06-15 10:24:13 - strategies channel

**Stefan**

That is really strange, so we are all here programmers but some have problems to calculate bet position and then fire up hedge bet? When betfair introduced web api, I won project for use case scenario, it run just one year and was called cash out all, and yes betfair requirements was to check if profit/loss did not change after user pressed button, only when P/L of cash out was the same web app executed hedging procedure. Web app was able to monitor all markets and as All in the name, unlike what betfair cash-out offers user could close bet position on all, or selected markets, so not just on one market like in betfair.

---

## 2020-06-15 09:10:56 - random channel

**mandelbot**

Does anyone know of a database of horse name changes?

---

## 2020-06-14 20:02:37 - strategies channel

**Jorge**

Looks like quoteValue is a Mandatory Parameter, which sucks because you have to know it beforehand... Any idea how to get this number through the API?

---

## 2020-06-14 19:37:43 - issues channel

**JonJonJon**

But if you are doing long running analysis, the recommended workflow is to run the long computations in Python, save the results to disk, and then analyse them at leisure later.

---

## 2020-06-14 19:36:43 - issues channel

**JonJonJon**

If you are still trying/failing...



I don't really use Jupyter notebook for multiprocessing. But it might work if you  put the code that does the multiprocessing into  a Python module, and then call that from Jupyter.

---

## 2020-06-14 17:25:24 - random channel

**Michael**

I completely share your ambivalence about the whole thing and yes I can see that I'm in a weak position to throw stones. Some of the people I met at BF events (VIPs) really haunt me - they obviously have a huge problem and they're being exploited by a system that I'm part of. On the other hand we all have freedom of choice and I don't think they would be losing any less money if I wasn't playing, it would just go to BF instead of to me. I remain troubled by it, but evidently not enough to stop.

---

## 2020-06-14 16:33:36 - strategies channel

**Mo**

[https://betfairlightweight.slack.com/archives/C4H05KKMY/p1591007035136500](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1591007035136500)

---

## 2020-06-14 16:32:36 - strategies channel

**Peter**

Not in the published Betfair API.

---

## 2020-06-14 12:17:54 - general channel

**Sandy Caskie**

Thanks for your help. I can see that you have 4 files in your folder. Though you only need 2 is that correct; them being your .crt file and .key file? Also it is the .crt file which is uploaded to betfair?

---

## 2020-06-13 20:58:08 - general channel

**PeterLe**

[@U014W8KJGNL](@U014W8KJGNL) A few of us have got stuck on this part..check out this link [https://betfairlightweight.slack.com/archives/C4H05ML2E/p1590763027445700](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1590763027445700)

---

## 2020-06-13 19:02:54 - general channel

**Lee**

no problem

---

## 2020-06-13 19:02:14 - general channel

**Sandy Caskie**

Ok I'll run through that again thanks for your help. Just so I fully understand.



1. You generate a .key file using the procedure outlined in [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Certificate+Generation+With+XCA](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Certificate+Generation+With+XCA) 

2. You generate a .crt file using the procedure outlined in [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Certificate+Generation+With+XCA](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Certificate+Generation+With+XCA) 

3. Locate these in the same folder

4. Upload your .crt file to Betfair security

Is this correct?

---

## 2020-06-13 18:58:13 - general channel

**Sandy Caskie**

Ahh I get it. Its the match between myself and the file I upload to betfair to ensure it is me that interacting with it via bflw?

---

## 2020-06-13 09:27:35 - issues channel

**liam**

Could go nuclear and move bflw + flumine into a GitHub organisation? Then create an examples repo?

---

## 2020-06-13 08:42:50 - issues channel

**Mo**

[@U4H19D1D2](@U4H19D1D2) do you see this being part of the package documentation?

---

## 2020-06-13 08:34:10 - issues channel

**mandelbot**

Thanks, sorry for taking up your time with all the questions :)

---

## 2020-06-13 08:23:45 - issues channel

**mandelbot**

I can turn off deleting of the zip by commenting out this line correct                      [https://github.com/liampauling/flumine/blob/4afe60589ea714b7596a88dcef86615b2eed1b6e/examples/strategies/marketrecorder.py#L131](https://github.com/liampauling/flumine/blob/4afe60589ea714b7596a88dcef86615b2eed1b6e/examples/strategies/marketrecorder.py#L131) ?

---

## 2020-06-12 21:39:24 - issues channel

**JonJonJon**

I have a feeling the multiprocessing module might struggle from Jupyter. That's probably the problem. I just run it as a script.

---

## 2020-06-12 21:10:37 - random channel

**JonJonJon**

Hi Liam, I don't know whether or not I'm identifying complete orders correctly, but what do you think of this?



[https://github.com/jsphon/flumine/commit/7606619a01f2b677547c3f4e36c7bb63acb611df](https://github.com/jsphon/flumine/commit/7606619a01f2b677547c3f4e36c7bb63acb611df)

---

## 2020-06-12 20:15:27 - random channel

**JonJonJon**

Perhaps if there was a way to stop the code iterating over all orders on every market book update, that would help a lot

---

## 2020-06-12 18:51:02 - issues channel

**liam**

I like that idea, so much great stuff gets lost in the slack atm which I guess is a good problem to have!

---

## 2020-06-12 18:16:48 - issues channel

**PeterLe**

Yes I only realised lately that you can save things too. :grinning:, I got the certs working, so happy to help you get that piece up and running if you get stuck!

---

## 2020-06-12 17:26:33 - random channel

**Dave**

Yeah unfortunately I don't think a "hdf5cat" exists, probably because you typically store multiple arrays of n dimensions (rather than a 2D CSV). Might be worth whipping up a quick utility in python for your use case. :white_frowning_face:

---

## 2020-06-12 17:05:37 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1591363890287900|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1591363890287900](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1591363890287900|https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1591363890287900)

---

## 2020-06-12 16:31:14 - issues channel

**PeterLe**

[@U012ZFYR19V](@U012ZFYR19V) [@UPMUFSGCR](@UPMUFSGCR) Thanks for posting these, as a newbie to Python, I find all these examples really useful in looking at the code and trying to work out how it works

---

## 2020-06-12 15:43:38 - issues channel

**Unknown**

[@U0159ENQVBP](@U0159ENQVBP) JonJonJon posted an excellent  file that demonstrates backtesting a whole folder of data files without having to unzip anything.  Well worth a look for inspiration! You can find it here: [https://betfairlightweight.slack.com/files/UPMUFSGCR/F013J0H5F3M/backtest_multi.py|Backtest Multi](https://betfairlightweight.slack.com/files/UPMUFSGCR/F013J0H5F3M/backtest_multi.py|Backtest Multi)

---

## 2020-06-12 14:54:13 - issues channel

**liam**

it defaults to this, it just isn't giving you a log message for it [https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L116](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L116)

---

## 2020-06-12 14:33:28 - issues channel

**liam**

it process one file at a time, yes, not sure what you mean? Got some code to share with the problem?

---

## 2020-06-12 12:37:33 - random channel

**liam**

my question will be 'how do you get your fast pics'

---

## 2020-06-12 09:37:51 - strategies channel

**Lee**

Yeah i'm starting out, every time i ask a question on here it makes me realise how much more I still have to learn. :slightly_smiling_face: Definitely something for me to look into this weekend. Thanks

---

## 2020-06-12 09:10:26 - random channel

**Mo**

Not sure how comfortable you are with C but I'm happy to help out with that

---

## 2020-06-12 09:06:28 - random channel

**liam**

yeah haven't tacked that yet... [@U92CASP1B](@U92CASP1B) it does a check on the status but without offloading any complete not really a way around it, I see more than 1k orders in a market to be an edge case / you are always going to have problems in backtesting

---

## 2020-06-11 21:46:27 - random channel

**JonJonJon**

When setting items in blotter, such as here, we use order.id to index it:

```def place_order(self, order, execute: bool = True) -&gt; None:

    order.place(self.market_book.publish_time)

    if order.id not in self.blotter:

        self.blotter[order.id] = order

        self.flumine.log_control(events.TradeEvent(order.trade))  # todo dupes?```

But in the set item code, it is called customer_order_ref



```def __setitem__(self, customer_order_ref: str, order) -&gt; None:

    self._orders[customer_order_ref] = order



def __getitem__(self, customer_order_ref: str):

    return self._orders[customer_order_ref]```

Could we rename that customer_order_ref to id (or id_ or _id, seeing as id is a builtin function)? It will save confusion.

---

## 2020-06-11 20:50:18 - random channel

**JonJonJon**

Hi Liam. This probably isn't a very realistic example, but it illustrates the problem:



[https://github.com/liampauling/flumine/compare/master...jsphon:size_matched_example?expand=1](https://github.com/liampauling/flumine/compare/master...jsphon:size_matched_example?expand=1)

---

## 2020-06-11 15:42:09 - issues channel

**Mo**

Can't say I've ever had any problems with it. Seems likely the issue here was it was given junk data because of Betfair API issues; obviously it would be better if it could handle this more robustly but if the two are related it's not like you'd have been able to run your system anyway

---

## 2020-06-11 15:29:40 - issues channel

**liam**

yeah, looking at the issue log it could be one of many different things, wonder if bflw should using a different library..

---

## 2020-06-10 23:16:16 - random channel

**JonJonJon**

Did the RAM work OK when you built your PC? I see some forum posts saying it Corsair Vengeance RAM had issues with Ryzen chips in April 2019. But I'm hoping that problem has gone away, as the company I want to build a PC for me only seems to stock that.

---

## 2020-06-10 22:32:18 - strategies channel

**JonJonJon**

I've never quantified it. I'm just a part-timer. And to be honest have not thought about how to analyse it properly.



I mainly do it as a risk management exercise, as I structure my individual bets into baskets/spreads. And the execution risk is larger for larger bets. If my execution goes wrong on a smaller bet, then it's not such a big deal.

---

## 2020-06-10 22:32:10 - strategies channel

**James T**

I’m kind of in the middle of deciding whether it’s worth doing. If we consider taking volume only - on the one hand smaller orders might not make as much impact, but on the other splitting orders when the volume you want is already there gives the offerer time to remove their offers. 



So if the volume is there, would it be best just to take all the volume at the risk of the price contracting more than if you took it in little pieces?



I guess it needs testing, but I’m not even sure how to test it effectively. 



Market impact is definitely an area I need to improve my knowledge on!

---

## 2020-06-10 22:27:20 - strategies channel

**James T**

Have you ever tried to quantify the effectiveness of iceberg-ing? Like do you know whether it’s improved your average matched price, or do you just do it because you think it will help?

---

## 2020-06-10 17:39:25 - general channel

**jhaa**

If Corbin would have won all issues with British telecom would have been solved by now

---

## 2020-06-10 16:32:57 - general channel

**jhaa**

ahh ok I was in streaming/stream.py

---

## 2020-06-10 16:31:45 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/streaming.py#L24](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/streaming.py#L24)

---

## 2020-06-09 14:27:06 - general channel

**John Sheppard**

Thankyou Mo, you are very helpful.  Seems like a strange way to do it to me (from Betfair's perspective). I didn't realise Betfair had such a thing and I got a bit excited after seeing MartinAlley mention it....but not yet ready to try and apply it's use...now its on the todo list :slightly_smiling_face:

---

## 2020-06-09 09:32:02 - general channel

**liam**

I am aware it is a bottleneck, an LRUCache might be simpler to start off with [https://github.com/liampauling/flumine/blob/master/flumine/utils.py#L134](https://github.com/liampauling/flumine/blob/master/flumine/utils.py#L134)

---

## 2020-06-09 06:20:29 - general channel

**liam**

Nope, no problem with that and yeah should be much quicker!

---

## 2020-06-08 16:28:17 - general channel

**Martin Alley**

I'm looking to be able to use the Race Status API via betfairlightweight. Is this possible? Thanks Martin

---

## 2020-06-08 12:06:04 - general channel

**liam**

Is this what you are after? [https://github.com/liampauling/flumine/pull/208](https://github.com/liampauling/flumine/pull/208)

---

## 2020-06-08 11:02:51 - general channel

**Lee**

I've come across some of the problems it mentions in the readme from using pyyaml

---

## 2020-06-08 11:00:13 - general channel

**Jonatan (skyw)**

Specific library for that, it's not supported by python by default?

---

## 2020-06-08 10:58:19 - strategies channel

**Remi**

I guess that comes to my question 3: what do you do / can you do to lower commission ?

---

## 2020-06-07 20:24:59 - random channel

**Unknown**

That approach worked Mo...however slightly embarrassingly I appear to have deleted a huge chunk of raw data (I have the data itself in my DB, but not the flumine extract, so I can't reprocess these markets). I don't suppose anyone happens to have market_type for the attached (the file says horses, but it does include greyhound markets too).

---

## 2020-06-07 11:50:54 - random channel

**John Sheppard**

dang, i thought I could be helpful for once...maybe next time :slightly_smiling_face:

---

## 2020-06-07 11:38:29 - random channel

**Newbie99**

Is there a simple way to retrospectively check if a market_id is was for a WIN or PLACE market (essentially I've processed a load of data, I recorded with flumine...all good, expect I stupidly didn't include a market_type column). Rather than process every market again, I just wondered if there's a quick way to tell (for UK/US I can probably get the racecard info, but for AU markets I haven't come up with a plan yet)?

---

## 2020-06-07 09:39:03 - general channel

**Will Morrison**

Thanks both - I'll see if I can figure out how to look at the raw stream update.

---

## 2020-06-07 09:21:01 - general channel

**liam**

This was raised yesterday, I can look at it tomorrow [https://github.com/liampauling/flumine/issues/205|https://github.com/liampauling/flumine/issues/205](https://github.com/liampauling/flumine/issues/205|https://github.com/liampauling/flumine/issues/205)

---

## 2020-06-06 19:48:37 - general channel

**JonJonJon**

Hmmm... Not sure if I explained what I meant clearly, as I'm not sure if it's related to the market book.



So I am using flumine to place limit orders. The orders sometimes get matched. I'm trying to find the times of those matches.

---

## 2020-06-06 19:39:12 - general channel

**brightcake**

The documentation isn't exactly a bed time read so it's quite nice to not have to do that :smile:

---

## 2020-06-06 19:36:08 - general channel

**Mo**

No judgement, I think it's interesting that the accessibility of betfairlightweight means that you can potentially use the API without ever looking at the documentation

---

## 2020-06-06 19:33:06 - general channel

**Mo**

Back in my day you had to actually read the API documentation :wink:

---

## 2020-06-06 19:32:04 - general channel

**brightcake**

alright cheers, that solved it for me

---

## 2020-06-06 17:11:43 - general channel

**Ruben**

any help is more than welcome

---

## 2020-06-06 17:11:19 - general channel

**Ruben**

The code I am using is equivalent to examplestreaming.py

---

## 2020-06-06 16:16:34 - random channel

**liam**

Bflw already has type hints using annotations, do you mean for the responses? 

---

## 2020-06-06 16:11:22 - random channel

**Jonatan (skyw)**

yeah : ) this is what I was thinking about, [https://www.python.org/dev/peps/pep-0561/](https://www.python.org/dev/peps/pep-0561/).

---

## 2020-06-06 13:15:10 - random channel

**Mo**

If you had just said it’s for legacy reasons and you’ll use bflw in your next project I’d have said fair enough and left it and that :joy:

---

## 2020-06-06 13:09:47 - random channel

**Sandy Caskie**

Also, can you get near price and far on bflw?

---

## 2020-06-06 11:51:47 - random channel

**liam**

:grin:this problem was solved in 2016 

---

## 2020-06-06 11:50:46 - random channel

**liam**

How come you are not using bflw anyway :pensive:

---

## 2020-06-05 21:54:25 - general channel

**JonJonJon**

From looking at a flumine Order object, is it possible to extract the times of individual fills?

---

## 2020-06-05 14:10:08 - issues channel

**liam**

you can try using the exchange transactional subdomain however not sure where the order count gets executed, if its further down the stack it won't help

---

## 2020-06-04 19:46:06 - general channel

**Newbie99**

I think you mean this:



```market_filter = streaming_market_filter(

    turn_in_play_enabled=True)```



---

## 2020-06-04 15:46:17 - random channel

**JonJonJon**

I can't see an API for Betconnect, so it probably isn't a worthwhile use of time, when bflw can place thousands of bets for us every day

---

## 2020-06-04 13:14:55 - random channel

**James T**

Seems like a pretty unique and refreshing idea actually. Essentially it’s letting (or aiming to let) professionals back at bookie odds, and aiming to get punters to lay those odds, but with the hope that there are enough matched bettors who will hedge that lay by backing at the bookies with equivalent odds (which the pros couldn’t do themselves because they’re already limited). 



Now the question is whether there is enough lay money from punters, but also whether pros can still win backing at bookie odds but also paying a commission. 



Also I’m not sure what’s stopping a pro from signing up as a punter to lay bets at 0% comm instead. Alternatively as a punter you’d just follow the best pros backs by copying at the bookies and forget laying on Betconnect. (I guess you’d get limited like the pro eventually)



Disclaimer: I haven’t read all the FAQs yet. That’s just my initial take. 



What’s your take on it [@UBS7QANF3](@UBS7QANF3) ?

---

## 2020-06-04 12:16:49 - general channel

**liam**

I just use boto3

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1591266684275500](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1591266684275500)

---

## 2020-06-04 10:30:09 - general channel

**JonJonJon**

Does anyone know if this book is a good starter for learning Docker?

[https://www.amazon.co.uk/Practical-Docker-Python-Release-Distribute/dp/1484237838](https://www.amazon.co.uk/Practical-Docker-Python-Release-Distribute/dp/1484237838)

---

## 2020-06-03 19:12:25 - strategies channel

**Dave**

&gt;  Things got even better for us in Korea. Now that I had the bits streaming off one by one, or at least byte by byte, you could see that the packets took a long time on the wire. Milliseconds. A common technique in network monitoring is slicing, where you just take the first part of the packet. I did this with the HDLC bypass code and we were now a long way ahead of the game as the bid and ask fields were at the front of the quote packets. Save 100 bytes at 128 kbps and you’re 6.1 milliseconds ahead. As specifications changed and KRX feeds sped up, our advantage reduced but life remained good. Now we were sending out orders before the data packet arrived.

---

## 2020-06-03 15:12:02 - random channel

**SrFabio**

I'm yet to run some more tests on the scenario I mentioned, which is basically:

1. Back under 2.5 

2. Back over 2.5 (after this bet we have a green on each selection, just not even)

3. Hedging bet - &gt; At the moment my cashout mechanism is trying to hedge each selection, so this means two bets to hedge the market, but I think this can be optimised to a single bet (on the selection with the highest profit). My problem with a bet on each selection is that the bet going to the "worst" selection (i.e, odds moving quick on opposite direction) is unlikely to get matched, and if only one of the bets gets matched it means the market won't be on a "all green" situation anymore

---

## 2020-06-02 21:41:24 - random channel

**James McKenzie**

Is that £20pm including your database costs?

---

## 2020-06-02 14:46:29 - general channel

**liam**

no you run it normally but there will be 10s where there is no marketCatalogue, its because the streams need time to start first, can maybe look at reducing the 10s if you think it is a problem but i don't see why it would? Just ignore markets where the catalogue is empty

---

## 2020-06-02 14:33:26 - general channel

**liam**

what version of flumine are you using?

---

## 2020-06-02 13:54:18 - issues channel

**liam**

Have I missed anything? [https://github.com/liampauling/flumine/pull/196/files](https://github.com/liampauling/flumine/pull/196/files)

---

## 2020-06-02 13:40:26 - issues channel

**liam**

ah your right [https://docs.python.org/3/library/stdtypes.html#dictionary-view-objects](https://docs.python.org/3/library/stdtypes.html#dictionary-view-objects)

---

## 2020-06-02 13:39:37 - issues channel

**Lee**

I think in Python 3 it returns a generator

---

## 2020-06-02 12:57:25 - issues channel

**Lee**

flumine seems to be getting some users :slightly_smiling_face:

---

## 2020-06-02 10:32:31 - general channel

**JonJonJon**

Ah, that is very cool. Thanks for answering my questions so patiently!

---

## 2020-06-02 10:28:08 - general channel

**JonJonJon**

Ah, that is interesting. By "same update", do you mean the same market book update. So that if process_market_book(...) tries to place multiple updates, Flumine waits till process_market_book(...) has finished, and then batches the updates when it has finished?

---

## 2020-06-02 09:14:27 - general channel

**liam**

I think this is where the middleware can really help, as you could either remove the `DoubleCountSimulation` deflag it or just write your own but yes I agree it would probably underplay your chance of getting matched

---

## 2020-06-02 09:09:51 - general channel

**liam**

if you can think of anymore [https://github.com/liampauling/flumine/issues/192](https://github.com/liampauling/flumine/issues/192)

---

## 2020-06-02 09:02:15 - general channel

**liam**

[https://liampauling.github.io/flumine/execution/#simulated|U](https://liampauling.github.io/flumine/execution/#simulated|U)ses django style [https://liampauling.github.io/flumine/execution/#simulated|middleware](https://liampauling.github.io/flumine/execution/#simulated|middleware), its not perfect but surprisingly accurate enough for most cases, works by using the middleware to calculate what has been matched inbetween updates and then the [https://github.com/liampauling/flumine/blob/master/flumine/backtest/simulated.py#L14|Simulated](https://github.com/liampauling/flumine/blob/master/flumine/backtest/simulated.py#L14|Simulated) class does the clever stuff with it

---

## 2020-06-02 08:00:56 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/HISTORY.rst#160-2020-06-02|flumine](https://github.com/liampauling/flumine/blob/master/HISTORY.rst#160-2020-06-02|flumine) v1.6.0 released with handling added for simulated replace/update orders (thanks to [@UUCD6P13J](@UUCD6P13J)) Lots of improvements still to be made, have a look at the [https://github.com/liampauling/flumine/issues|issue](https://github.com/liampauling/flumine/issues|issue) tracker to get a better of idea of the current direction

---

## 2020-06-02 07:28:54 - general channel

**liam**

You should get a 503 status which will be logged, bflw will then handle the updates once this stops, there should be no need to restart 

---

## 2020-06-01 21:34:22 - general channel

**JonJonJon**

In Flumine, is it possible to place multiple orders at once?

---

## 2020-06-01 12:14:41 - random channel

**Lee**

haha yeah, when helping colleagues that use vs code the project explorer i'm literally lost, exactly the same as you. No idea where i am in the project

---

## 2020-06-01 12:02:19 - random channel

**liam**

Thats my problem, I am so used to pycharm but I have forced myself to use vscode more as I do a lot of react/javascript work where pycharm is crap

---

## 2020-06-01 11:26:00 - random channel

**SrFabio**

Can't find documentation on this, that would be perfect really...but I'm not sure if it's doable on the context of a mobile app to be distributed freely to users

---

## 2020-06-01 11:14:22 - random channel

**JonJonJon**

Regarding your hedging question, I often end up with positions where my risk per runner is often unbalanced. I haven't found a way to hedge perfectly. I just accept it as additional variance. Sometimes, when placing limit orders, I might set the price to be a few ticks into the depth. This means that I might get a worse price, but means that I'm more likely to end up getting matched.

---

## 2020-06-01 09:50:45 - random channel

**SrFabio**

Hey guys, has anyone implemented an hedging algorithm that works well when all selections of a market have orders? The algorithm I'm using basically hedges each traded selection but I'm having a problem where some of the orders won't get matched as the market moves on the opposite direction, which completely obliterates the hedge itself

---

## 2020-06-01 08:26:39 - random channel

**Mo**

My situation is that I actually use IntelliJ because historically I worked on some Java projects so that was my IDE when I got into Python and I just used the Python plugin



I'm thinking of buying a license because of SQL and Jupyter Notebook support (and because I've used it pretty much every day for 4 or 5 years)



But I'm not sure whether to:



1. Buy a license for PyCharm - it's cheaper than IntelliJ, I'm much more Python focused than when I started using IntelliJ and if I need to work on Java projects in the future I can use IntelliJ CE just for that

2. Buy a license for IntelliJ - from what I understand, with the Python plugin the functionality is equivalent to PyCharm Ultimate

3. Buy the all products pack - I didn't know this existed; on the one hand this doesn't seem necessary because of the official language plugins for IntelliJ but on the other hand I have an interest in e.g. CLion because I do occasional C development and that's an example of a language where there isn't a plugin for IntelliJ

---

## 2020-06-01 07:34:56 - general channel

**liam**

Have you had a look at flumine? It does want you want in regards to recording streaming data [https://github.com/liampauling/flumine](https://github.com/liampauling/flumine)

---

## 2020-05-31 23:50:59 - issues channel

**Unknown**

Managed to get the examplestreaming.py working; much simpler than what i was trying to do, although it seemed sensible at the time :grinning:, one step further today, thanks again guys

---

## 2020-05-31 21:02:46 - issues channel

**PeterLe**

Yes Streaming is the preferred method. All my current stuff is in C# which were written for me, but Id really like to learn this for myself, as I have lots of ideas, id like to try. Ill have a look at the examplestreaming.py tomorrow. Thanks

---

## 2020-05-31 20:51:40 - issues channel

**liam**

That’s not to say that you shouldn’t start with the latter to get to grips with the data etc but streaming makes everything simpler 

---

## 2020-05-31 20:50:50 - issues channel

**liam**

Depends on what you are trying to do, the great thing about streaming is that you subscribe to markets and then get updates on updates. Without streaming you need to find the markets you want and then continue to poll the marketBook endpoint for updates 

---

## 2020-05-31 20:35:48 - issues channel

**PeterLe**

No, I would like to use streaming Liam; shows how far advanced I am!:grinning: Is there a better example i should be using to build out from ?

---

## 2020-05-31 20:30:26 - issues channel

**liam**

Regarding your program design, any reason why you don’t want to use streaming?

---

## 2020-05-30 22:38:51 - issues channel

**Newbie99**

Give [@U4H19D1D2](@U4H19D1D2) a shout before you pay up, I believe he may be able to help you out on that front

---

## 2020-05-30 13:06:00 - general channel

**Mo**

No problem 

---

## 2020-05-29 09:28:08 - issues channel

**JS**

yes great it worked. Just had to paste it into the new text file and then name it .key. Thanks very much for your help!

---

## 2020-05-28 16:19:19 - general channel

**Derrick**

Dumb question but what does `marketCount` actually represent? The number `marketCount` shows doesn't seem to match up for anything for me so not sure if I should just ignore it. For example, it will be like `'marketCount': 2` but I can't seem to see what those 2 markets are. When I try to and get marketId from that I get way more than 2 so just confused on what `marketCount` is. I feel like I am overlooking something or caring about it too much when it may be not releavant to getting information.

---

## 2020-05-28 11:01:04 - general channel

**liam**

MarketStream, DataStream is raw streaming data so very tricky to make decisions off / doesn't work with any other backtesting logic

---

## 2020-05-28 11:00:05 - general channel

**fjt1973**

Morning all, QQ when using the back testing within Flumine is this using MarketStream or Datastream Data? Or can you use both?

---

## 2020-05-27 21:45:09 - general channel

**Newbie99**

Ah cool, okay that could work, although now that I've asked the question, I'm thinking to myself there's no downside to recording the complete raw data and then simply using the last x mins, so probably a pointless question now I've asked it, ha!

---

## 2020-05-27 21:25:46 - general channel

**Newbie99**

Using flumine, is there a way to only record the last x minutes of a market, or is the approach to record all, then remove what you don't need when processing?

---

## 2020-05-27 19:54:01 - general channel

**Oliver Varney**

not sure how to phase the question well but say I have two market books, one from an 30 seconds ago and one from the latest returned market book. Will all of the runners be at the same index?

---

## 2020-05-27 19:18:04 - general channel

**Oliver Varney**

Quick question, but do the runners remain in the same or in the returned market book through the life of the market? Is it safe to look for the same runner at the same index if your comparing market books?

---

## 2020-05-27 09:48:41 - general channel

**Newbie99**

Out of curiosity is there any GPS integration with BFLW currently, or do those that use GPS run a concurrent, but separate stream (just starting out with the GPS and am curious how people have it set up)?

---

## 2020-05-27 09:23:18 - general channel

**liam**

this is where it would be handled [https://github.com/liampauling/flumine/blob/master/flumine/order/process.py#L64](https://github.com/liampauling/flumine/blob/master/flumine/order/process.py#L64) i.e. the initial order has been matched and offsets now need to be placed

---

## 2020-05-26 10:11:43 - general channel

**mandelbot**

It certainly won't help. Someone posted on the betangel forum. He/She got an email from betfair, why they didn't send to everyone I have no idea. Typical betfair inconsistency.

---

## 2020-05-26 08:46:43 - general channel

**Oliver Varney**

its really not a biggy. One thing I might look to play around is storing price volumes in numpy arrays for matrix maths but the file processing time was just a little experiment as I will have to rerun them through my processing / database soonish.

---

## 2020-05-26 06:22:13 - general channel

**liam**

You want a limit on close order and using this filter add your minimum price [https://github.com/liampauling/betfair/blob/53ade9cb272491574bffead5d089ca430fcf6f83/betfairlightweight/filters.py#L270|https://github.com/liampauling/betfair/blob/53ade9cb272491574bffead5d089ca430fcf6f83/betfairlightweight/filters.py#L270](https://github.com/liampauling/betfair/blob/53ade9cb272491574bffead5d089ca430fcf6f83/betfairlightweight/filters.py#L270|https://github.com/liampauling/betfair/blob/53ade9cb272491574bffead5d089ca430fcf6f83/betfairlightweight/filters.py#L270)

---

## 2020-05-25 19:13:28 - general channel

**Jonatan (skyw)**

Yeah, so I am missing out on the flumine part!

---

## 2020-05-25 19:11:07 - issues channel

**JazzMan**

Question on backtesting (Horse Racing). How far back do guys go? I wouldn’t want to go further back than about 2 months, in normal circumstances. This is mainly because the behaviour of the data is always changing with new bots coming on board ect… Also, I have had strategies that have stopped working and the only difference I believe is the data movements changing.

---

## 2020-05-25 19:10:55 - general channel

**Oliver Varney**

You say you use numpy instead, does that mean you have created a custom cache.py file?

---

## 2020-05-25 19:06:03 - general channel

**Oliver Varney**

ah okay so a numpy array 352x1

---

## 2020-05-25 18:54:25 - general channel

**Jonatan (skyw)**

[@ULDAVFDRP](@ULDAVFDRP)  I use numpy arrays instead of python builtins, not creating new objects just mutating them in place. No sorting use 0 to indicate not present.



For bdatb and batb/l

---

## 2020-05-25 17:15:14 - general channel

**Lee**

does anyone know what streaming_market_data_filter fields the betfair historic data (advanced or pro) includes?

---

## 2020-05-25 13:37:56 - strategies channel

**Amanda**

No this is genuine, I got this info from my "Premium Account Manager", a know a lot of you guys don't have one because you're not successful enough, but that's not my problem.

---

## 2020-05-25 12:54:13 - strategies channel

**James T**

I suppose the question was more specifically about whether people are predicting the outright winner or not. With either fundamentals or order flow I suppose you can still predict either outright or change in price. But fundamentals lends itself more towards predicting outright winner and order flow towards price movement. I use order flow and am essentially predicting a bit of both. ie. I will close out some positions and some I will let run if I think it’s a value bet. 

---

## 2020-05-25 09:47:37 - general channel

**Mo**

Do you know what the bottleneck is? Constructing the Python objects/dicts?

---

## 2020-05-25 09:03:22 - strategies channel

**liam**

Big fan of quantopian, zipline is a good read, inspiration for the design of flumine. Need to think more about how a library like that could be integrated / used by flumine when backtesting 

---

## 2020-05-24 15:10:14 - general channel

**Sandy Caskie**

[@U4H19D1D2](@U4H19D1D2) is the app key from globalsportsapi used to interact with betfair? Or do globalsportsapi have their own system? I cannot see any documentation on how to interact with globalsports api.

---

## 2020-05-24 13:34:48 - general channel

**Mo**

I’m going through the process of building out my horse racing database and I think Timeform is ridiculously expensive for what you can easily scrape from many sources

---

## 2020-05-24 12:42:00 - general channel

**Sandy Caskie**

[@UBS7QANF3](@UBS7QANF3) looking at this package when I call "date = datetime(2016, 12, 1); meets = provider.get_meets_by_date(date)". It returns an empty list. Therefore I am not sure this is maintained. Or it could be something to do with the MongoDB which I do not understand. Looking at MongoDB it is a database system. Though do you know if it is stored locally and set up by yourself or externally and I am merely calling the data? There is also scraper part of this package which makes me think it is stored locally.

---

## 2020-05-24 12:07:05 - general channel

**brightcake**

Yah, i'm learning a fair bit by looking at how flumine and bflw are working under the hood.

---

## 2020-05-24 12:02:18 - issues channel

**liam**

[https://liampauling.github.io/betfair/streaming/#logging|https://liampauling.github.io/betfair/streaming/#logging](https://liampauling.github.io/betfair/streaming/#logging|https://liampauling.github.io/betfair/streaming/#logging)

---

## 2020-05-24 11:47:58 - general channel

**Ruben**

does anyone know what the "BSP Auction" is? I keep seeing it mentioned in the documentation, but I have not seen much info about it online

---

## 2020-05-23 22:49:13 - strategies channel

**VT**

Guys, I'm working in the football databases and I have noticed the market every year more efficient and with fewer opportunities, you who have been here the longest, is it possible to profit from statistics and bots in football games? I have encountered so many difficulties that sometimes I think it can be a waste of time.

---

## 2020-05-23 18:40:44 - strategies channel

**Lee**

laying inplay, the graphs you helped me with yesterday are showing a few areas for improvement. i'm aiming for a graph that looks similar to the one you shared recently

---

## 2020-05-23 18:30:42 - general channel

**liam**

Everyone does it a bit differently, I read other people’s code a lot to get a good idea of how to structure (reading code is a great way to accelerate dev knowledge imho) 

---

## 2020-05-23 13:59:47 - general channel

**liam**

Helps me sleep at night 

---

## 2020-05-22 14:23:00 - strategies channel

**SrFabio**

That's the problem really...at least from my experience sometimes the market moves against the news, so many times great news for a company and the market is on the red. You've got to have access to more up to date news

---

## 2020-05-22 14:22:53 - general channel

**Peter**

My experience when I switched to streaming was that it was higher than 200 (which is the limit for the API). There does seem to be a limit in there, but I haven't pin-pointed it yet - and it's attached to your account so may differ from person-to-person. I've not requested an increase, so working from my default, I've seen streams start with upward of 400 markets, and fail with over 1,000.

---

## 2020-05-22 11:37:32 - strategies channel

**Mo**

I think he means bankroll

---

## 2020-05-21 22:04:50 - general channel

**Lee**

Hi Andrey, yeah it’s a known issue. I have the same problem.

---

## 2020-05-21 20:41:55 - general channel

**Jonatan (skyw)**

does anyone know if the reference documentation are available in another format then HTML?

---

## 2020-05-21 13:04:35 - general channel

**fjt1973**

I've just answered my own question - it apparently doesn't

---

## 2020-05-21 09:33:08 - general channel

**Mo**

But it sounds like you should just be using flumine

---

## 2020-05-21 09:32:47 - general channel

**Mo**

You use an appropriate streaming filter and will pick up new markets automatically

---

## 2020-05-21 09:32:09 - general channel

**Mo**

It depends on your use case as with streaming it may not be necessary to call list_market_catalogue at all.



But yes, if you do need to use list_market_catalogue you will need to repeatedly call list_market_catalogue to pick up new ones.

---

## 2020-05-21 08:01:19 - general channel

**Lee**

On flumine i'm getting some trades where average_price_matched is less than the order price for lay (when backtesting). I've layed at 2.86 and average price matched is 2.75. Is that expected behaviour and would betfair do a similar thing?

---

## 2020-05-20 13:05:55 - general channel

**Unknown**

yes but would then need to handle this part because it will already be a generator, always prefer to have a variable as a single type. A question of maybe we remove the string handling completely

---

## 2020-05-20 12:52:45 - general channel

**liam**

Yep sorry I wasn’t very clear, passing a generator could probably completely remove the need for historicalstream.py in flumine as the generator could be appended to streams.Streams.streams and the just looped 

---

## 2020-05-20 12:51:25 - general channel

**Jonjonjon**

Thanks for looking at the PR. My change in bflw allows users to pass generators into



betfairlightweight.streaming.betfairstream.HistoricalStream .



Prior to the change, HistoricalStream expected a directory.



Looking through path of execution for the backtest.py example, if eventually gets to



flumine/streams/historicalstream.py



which creates the HistoricalGeneratorStream class (which is from betfairlightweight, and currently expects the directory, not generator.).



Is that the point at which you believe the change should be made?

---

## 2020-05-20 11:50:43 - general channel

**brightcake**

feel like this might be a silly question but what is the difference between get_price and the price attribute of runner.ex.available_to_lay[0]?

---

## 2020-05-20 06:59:33 - general channel

**liam**

Ah I see the other PR now, we wouldn’t change bflw but change flumine, it currently wants a directory but instead we want to pass a generator and then just loop it. If I understand it correctly your change in bflw just moves the gen creation up a level 

---

## 2020-05-19 22:08:05 - general channel

**Jonjonjon**

OK. I worked it out. I've sent the PRs for both Flumine and BFLW.

---

## 2020-05-19 14:06:19 - strategies channel

**SrFabio**

[@USYQKE5HN](@USYQKE5HN) that's the dream xD I've been jobless now for about 3 months, first month was because of parental leave (unpaid as I'm a contractor) and then came the pandemic to screw me over  lol so now I'm working very hard to finish this project to put on the market soon whilst having to help taking care of my 3 month old baby, going late to bed and not sleeping much but still making good progress...it has to pay off cause the goddamn mortgage won't pay itself by itself :joy:

---

## 2020-05-19 13:16:22 - strategies channel

**SrFabio**

Thanks for the advice guys! I have a genuine interest in ML, but I agree it would probably be overwhelming with all I need to learn. Perhaps building something like flumine on .net would be a good exercise to do, I'd like to learn it inside out I'm sure it would be massively beneficial to my career as well.

---

## 2020-05-19 13:06:52 - strategies channel

**liam**

[https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1589726588178500](https://betfairlightweight.slack.com/archives/CTPL3R3FU/p1589726588178500)

---

## 2020-05-19 12:31:38 - strategies channel

**James T**

Yeah, I’d echo the same thing about machine learning. 



It’s a big hit or miss. Probably not the best place to start I reckon.

---

## 2020-05-19 12:27:08 - strategies channel

**Mo**

Don't feel obligated to take a ride on the machine learning hype train

---

## 2020-05-19 12:22:51 - strategies channel

**SrFabio**

I didn't know about flumine and it's fantastic that's something like that is already built, big thanks for that :+1::+1:

---

## 2020-05-19 12:17:09 - strategies channel

**SrFabio**

More recently I finished reading both Betfair programming books from James Butler but can't find a lot of books doing technical stuff with the Betfair API

---

## 2020-05-19 12:15:41 - strategies channel

**SrFabio**

Nice...errr I have a lot of reading to do before I can do something interesting (plus learning Python, don't think I can run away from it much longer lol). In terms of books, what would you guys recommend? I'm a .Net / Javascript developer, my knowledge of statistics is rusty and I've not done a machine learning / AI project just yet (although I'm somewhat familiar with it based on books I've read in the past)

---

## 2020-05-19 09:41:06 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L144](https://github.com/liampauling/flumine/blob/master/examples/strategies/marketrecorder.py#L144)

---

## 2020-05-19 09:37:05 - general channel

**brightcake**

so grabbing the market ids from the df and then opening relating the relevant streaming files for example

---

## 2020-05-19 09:18:03 - general channel

**liam**

the issue is that you lose the benefit of streaming, quick and small size (relatively)

---

## 2020-05-19 06:18:57 - general channel

**liam**

[@U01093Z1KF0](@U01093Z1KF0) it takes streaming data yeah, what do you want to give it?

---

## 2020-05-18 22:54:26 - strategies channel

**SrFabio**

I've been here for a day or so and I'm already fascinated with the discussions I've been silently witnessing in here :muscle: I'm building a mobile app with the betfair API-NG ( nothing too smart) and once I finish this I'll deep dive into automation. I mostly trade on football, NBA and been having a dig at some E-Sports too. To be fair I've traded just about everything, not very successful tho lol.

---

## 2020-05-18 22:25:00 - general channel

**Jonjonjon**

[@U4H19D1D2](@U4H19D1D2) have you had any further thoughts on this proposed change? In the mean time I have been patching builtins.open, but that is causing me problems elsewhere. Also, it's pretty ugly to be importing from unittest.mock in code that isn't for unit testing.

---

## 2020-05-18 21:40:07 - general channel

**brightcake**

quick q about flumine's backtester - does it only take betfair market data files as input?

---

## 2020-05-18 11:02:34 - strategies channel

**James T**

:+1: I think some of it might be considered just an opinion of how to approach things and I don’t want to sway people the wrong way, but it’s worked for me which is the reason I advocate it. There is certainly always more than one way of doing things though. So anything I personally say shouldn’t be taken as gospel. I’m still figuring things out like everyone else!



*Disclaimer: I take no financial responsibility for your gambling investments and bets can both win and lose :stuck_out_tongue_winking_eye::joy:

---

## 2020-05-18 08:23:52 - strategies channel

**Lee**

I know i'd love something like that. I think this was one of the most helpful conversations i've had pointing me in the right direction. Thanks once again guys!

---

## 2020-05-18 07:44:49 - general channel

**Will Morrison**

Hi Mo! If I had known about betfairlightweight before, I definitely would have done that. Ultimately, I want to use betfairlightweight to place backs and lays according to some analysis, but however I do it, I need to get the data out of the market book object into tabular form. Is there any kind of documentation for working with the market book objects?

---

## 2020-05-18 07:43:35 - general channel

**liam**

Have you seen [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py|this](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py|this) example?

---

## 2020-05-18 07:02:55 - general channel

**Mo**

Personally I think you should go in the other direction - use betfairlightweight to parse the historic data files and it will generate market books for you 

---

## 2020-05-17 16:30:10 - strategies channel

**Lee**

Thanks for all your help James. Yeah i'm backtesting using flumine and also collecting data using it too.

---

## 2020-05-17 15:34:46 - strategies channel

**James T**

I mean you could do something similar in Python or whatever over 1000 bets, given edge, 1 million simulations and see what your expected profit would be. Again, assuming bets are independent. 

---

## 2020-05-15 19:34:40 - issues channel

**Lee**

Am i right in thinking this issue will only be a problem if i'm backing and laying within the same race?

---

## 2020-05-15 08:44:56 - issues channel

**Dave**

bit of a weird one, but I keep getting the following segfault when running flumine under centos 7:

```New Thread 0x7fff8a7fc700 (LWP 3990)]                                       Program received signal SIGSEGV, Segmentation fault.                         [Switching to Thread 0x7fffb7606700 (LWP 3973)]                              double_conversion::StringToDoubleConverter::StringToIeee&lt;char const*&gt; (          this=0x0,                                                                    input=0x7fffa8f8bf9b "0.0,\"sortPriority\":12,\"metadata\":{\"SIRE_NAME\":\"Alta Christiano\",\"CLOTH_NUMBER_ALPHA\":\"7\",\"OFFICIAL_RATING\":null,\"COLOURS_DESCRIPTION\":\"Blue Gold Diamond\",\"COLOURS_FILENAME\":\"c20200515trots_GLOUCESTERP"..., length=1036207,                                            read_as_double=read_as_double@entry=true,              ```

---

## 2020-05-14 23:25:01 - general channel

**Jonjonjon**

Does anyone do anything to remove this noise from their analyis? I'm trying to plot traded volumes over time, and they are making the charts look unrealistic.



[@U4H19D1D2](@U4H19D1D2) does the Flumine backtester do anything to avoid these?

---

## 2020-05-14 17:46:23 - random channel

**Lee**

I can't seem to find any documentation for it

---

## 2020-05-14 12:45:42 - general channel

**brightcake**

[https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py) was looking at this

---

## 2020-05-14 09:41:01 - issues channel

**Lee**

In flumine under process_market_book i can access total_matched for both market and runners but can't access that under framework.markets. Both the properties below return 0. Is that expected behaviour?

```for market in framework.markets:

    print("market", market.market_book.total_matched)

    for runner in market.market_book.runners:

        print("runner", runner.total_matched)```

---

## 2020-05-14 07:50:31 - general channel

**liam**

[@UPMUFSGCR](@UPMUFSGCR) see here for an example [https://github.com/liampauling/flumine/pull/161](https://github.com/liampauling/flumine/pull/161)

---

## 2020-05-13 22:36:50 - issues channel

**Dave**

qq about order validation in flumine, specifically regarding position limit enforcement

---

## 2020-05-13 15:18:21 - random channel

**Lee**

Not sure how to phrase the question better but hopefully it makes a bit of sense

---

## 2020-05-12 20:59:04 - random channel

**liam**

Yeah it uses streaming, single containers handled by my own api/framework and then portainer when I want to manually check stuff 

---

## 2020-05-12 20:56:53 - random channel

**Mo**

Doesn’t it use streaming? As in, you don’t need to rescan, new markets get picked up automatically given the filter?

---

## 2020-05-12 20:40:47 - general channel

**Mo**

No I’m not using flumine

---

## 2020-05-12 20:39:12 - general channel

**Jonjonjon**

[@UBS7QANF3](@UBS7QANF3) are you curently using the flumine backtester? If so, how do you use it with your multiple cores? I think it only uses a single core at the moment.

---

## 2020-05-12 20:24:12 - general channel

**Jonjonjon**

It's documented here: [https://docs.python.org/3/library/bz2.html](https://docs.python.org/3/library/bz2.html). Does that mean it's part of the standard library?

---

## 2020-05-12 19:58:49 - general channel

**liam**

If it is can try changing wait to False [https://docs.python.org/3/library/concurrent.futures.html|https://docs.python.org/3/library/concurrent.futures.html](https://docs.python.org/3/library/concurrent.futures.html|https://docs.python.org/3/library/concurrent.futures.html)

---

## 2020-05-12 19:51:36 - general channel

**Lee**

is it this line thats blocking? [https://github.com/liampauling/flumine/blob/dev/flumine/execution/baseexecution.py#L95](https://github.com/liampauling/flumine/blob/dev/flumine/execution/baseexecution.py#L95)

---

## 2020-05-12 15:43:29 - general channel

**liam**

but tbh you really don't need to worry about the GIL unless you are doing really intensive stuff in which case you are probably using the wrong language :wink: bflw isn't async *yet*

---

## 2020-05-12 15:40:46 - general channel

**klozovin**

although Python usually only lets one thread to run due to GIL, in this case threading should help because when doing a network request the runtime can release the GIL...

---

## 2020-05-12 15:06:14 - general channel

**klozovin**

I'm not that familiar with threading in Python, but AFAIK due to GIL it's only one thread running at the time...

---

## 2020-05-12 15:05:45 - general channel

**klozovin**

Haven't used streaming in _blfw_ that much, mostly using it to issue regular requests, but have a separate streaming library I'm messing around with...



Blocking was the reason I was asking, but does it help in Python since it has the GIL?

---

## 2020-05-12 14:43:51 - general channel

**klozovin**

Do people use multithreading with Python/blfw or is it just one big loop of _read socket, update data, update strategies_ in a single thread? Just wondering what are some best practices and how people organize stuff...

---

## 2020-05-12 14:35:59 - general channel

**deactivateduser**

i told you i am just a friend who is helping another friend like you are helping me. the owner is of South america not me. he is not intrested in codding and all so he asked me to help because i have a little knowledge and i am also a bookmaker so.. not that i have this much knowledge like you guys. you guys are experienced :sweat_smile:

---

## 2020-05-12 14:29:58 - general channel

**deactivateduser**

well that's okay if you don't want to tell me i can understand. :sweat_smile: thank you for everything Mo you helped me a lot.

---

## 2020-05-12 14:17:25 - general channel

**deactivateduser**

this is a website in india by a friend of mine. can you check if he is using betfair api for data or not

---

## 2020-05-12 13:46:06 - general channel

**deactivateduser**

it will be grateful of you. i am electrical engineer and i want to learn and grow in python .

---

## 2020-05-12 13:31:34 - general channel

**Mo**

No problem

---

## 2020-05-12 13:30:57 - general channel

**deactivateduser**

thanks Mo you are always helpful

---

## 2020-05-12 13:26:28 - general channel

**deactivateduser**

is there any article i can use to make backend from python and frontend also

---

## 2020-05-12 09:34:50 - general channel

**Mo**

If you have questions just ask, we are here to help

---

## 2020-05-12 09:33:02 - general channel

**Mo**

No, that's what I mean when I say you run these commands in Python, as in you enter them into the Python interpreter

---

## 2020-05-12 09:30:44 - general channel

**Mo**

To be clear, you would run these commands in Python

---

## 2020-05-12 09:29:10 - general channel

**deactivateduser**

if anyone suggest me good book or article about this. i'll be very thankful. i am electrical engineer but have interest in learning python

---

## 2020-05-12 09:27:21 - general channel

**deactivateduser**

Hello, i am new in developing. i am trying to create an website using betfair api. can somebody help for how to use betfairlightweight. and i want to know how to create templates over backend. i am stuck at the very first step of "you can use library as follows". where should i write these codes ? import betfairlightweight ?

---

## 2020-05-12 09:14:43 - general channel

**liam**

yeah so there is a missing part of flumine which is the logging control, this will output market/trade/order/cleared orders/cleared markets etc This can then be stored in a csv or sent to an API/db for analysis

---

## 2020-05-12 09:13:40 - general channel

**Lee**

would you post any data from the blotter to another service to help review what happened, or just use the logs and account statement history?

---

## 2020-05-12 07:23:05 - issues channel

**Schwaino**

Thank you Mo problem solved

---

## 2020-05-11 15:55:16 - general channel

**Ian**

Hi all, does anyone have any tips for the best way to begin to visualise the market data recorded with flumine - i am planning on following something like this to structure the data in a way I can then feed a plotting library - any comments greatly appreciated.

---

## 2020-05-11 10:53:45 - issues channel

**Schwaino**

I had that problem when i was putting the runner ids into a data frame

---

## 2020-05-11 10:53:22 - issues channel

**Schwaino**

bloody python!!!

---

## 2020-05-11 10:52:54 - issues channel

**liam**

python is dynamically typed so it treats the marketId as a float and thus converts to a float stripping the final zero

---

## 2020-05-11 10:37:40 - issues channel

**Schwaino**

I have converted the strings inside the function so thats ok. I found the problem the runner id was a scratched runner. On that note when you get the runner books are the Selection IDs not in order??

---

## 2020-05-11 10:03:30 - general channel

**Oliver Varney**

Cool, might be useful although probably only any good if the connection issue is your side and not just a general betfair API issue

---

## 2020-05-11 09:58:56 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/listener.py#L184](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/listener.py#L184)

---

## 2020-05-11 09:57:44 - general channel

**Mo**

Streaming messages do have a status field but I’m not sure how useful it is

---

## 2020-05-11 09:55:05 - general channel

**Oliver Varney**

ah okay. Is there specific fields in each of the APIs to look out for. Mainly be looking at the orders stream / market data streaming.

---

## 2020-05-10 19:25:37 - random channel

**Unknown**

The program is alsorts of inplay match data from total corners API I have created my own inplay rating ipk I have saved over 20k matches and found a sweet spot when a goal will come. This helps me trade the goals markets.

---

## 2020-05-09 14:18:41 - random channel

**Dave Simonds**

Thank you Mo…. I joined this group hoping for some helpful pointers like this… hopefully this will get me going in the right direction. Cheers

---

## 2020-05-08 17:16:32 - general channel

**Mo**

Is it dependent on your registered address or your current location? If the latter then you could try via VPN. [@U92CASP1B](@U92CASP1B) I think you have the same problem? Any insight?

---

## 2020-05-08 16:34:49 - general channel

**bogdan**

Thank you for your help!

---

## 2020-05-08 14:57:26 - general channel

**bogdan**

thoroughbreds_event_filter = betfairlightweight.filters.market_filter(

    event_type_ids=[7],

    market_countries=['SWE'],

    market_start_time={

        'to': (datetime.datetime.utcnow() + datetime.timedelta(days=1)).strftime("%Y-%m-%dT%TZ")

    }

)

---

## 2020-05-08 09:50:30 - issues channel

**liam**

you mean you dont use flumine :smile:

---

## 2020-05-08 09:49:00 - issues channel

**Mo**

No worries, hope it helps

---

## 2020-05-08 09:41:01 - general channel

**Nimo22**

Thanks to both of you! So If I understand well need to be working 100% in python only and I wasn’t missing anything. This is impressive! Thanks again :+1:

---

## 2020-05-08 09:35:22 - general channel

**Mo**

Is that documentation new?

---

## 2020-05-08 09:26:29 - general channel

**Mo**

OK great so I would suggest you start by looking at the bflw examples: [https://github.com/liampauling/betfair/tree/master/examples](https://github.com/liampauling/betfair/tree/master/examples)



[@U4H19D1D2](@U4H19D1D2) can get your application key activated so no need for you to purchase one.

---

## 2020-05-07 12:02:52 - random channel

**footysystems**

That's interesting wonder why ? Not making any money I guess it's a very niche market surprised really but had the same problem with inplayking no or very little interest.

---

## 2020-05-07 07:47:52 - general channel

**Greg**

Thanks liam. Off the shelf stuff...yes, I had quite a few things working on horses/tennis  for weeks at a time then they would suddenly turn which made me wonder what was going on. Too many unknowns as possible reasons but when you can't see the code you can't eliminate technical reasons.I guess that answers my question. I have worked in IT for a long time and I'll consider learning python but at nearly 50 I might be too late.Anyway thanks again for the  reply.

---

## 2020-05-06 17:19:01 - random channel

**Fab**

BTW I believe we spoke before on the Betangel forum, you helped me get a refund for a double payment on [http://Inplayking.com|Inplayking.com](http://Inplayking.com|Inplayking.com)’s predecessor

---

## 2020-05-06 17:15:50 - random channel

**Fab**

There’s no flashplayer anymore, it’s all done by 365 streaming data from them directly to the browser.

---

## 2020-05-06 17:12:24 - random channel

**Fab**

With regards to Betsapi, please bear in mind that it’s a completely different proposition to integrate their API in your software. With Totalcorner, you get all matches/stats in one API request, with Betsapi you need to hit each individual endpoint, which can be problematic with 200+ matches at the same time on Sat afternoons. You can use multithreading though, although it will never be as good as Totalcorner.

---

## 2020-05-06 17:08:05 - random channel

**Fab**

Having said that, at the start of March they had major problems with their API for a few days, which prompted me to also implement the Betsapi API in my code.

---

## 2020-05-06 14:44:42 - random channel

**footysystems**

Thanks [@UBS7QANF3](@UBS7QANF3) the problem is getting an API that uses 365 stats without having to re code the site but even just a webpage with stats on would do the job I am quite willing to share everything on this chat tbh all the work I have done

---

## 2020-05-06 14:42:59 - random channel

**Mo**

[@U012NE8QN15](@U012NE8QN15) I'm interested because I'm trying to understand what it would take to sort out your problems and whether I (or anyone else) could do that

---

## 2020-05-06 11:22:26 - general channel

**Bloubliu**

Hello all, thank you Liam for the amazing package ! Noobie question : when I am placing multiple orders (without using streaming) on football matches, it appears that I have to wait the 5-7 sec bet delay before moving on to the next order. Apparently the betfair place_order API has an "async" parameter in it to avoid this, but I can't get it to work using the bflw package. Am I missing something basic ?

---

## 2020-05-06 10:40:22 - issues channel

**liam**

problems, i did last week but not today

---

## 2020-05-06 08:23:51 - random channel

**liam**

Tasty commit in flumine which improves processing streaming data by 3 times (96s-&gt;28s) with minimal impact on usability, more info in the commit message :sunglasses: I feel more can be done here but wary of pre optimisation, note that initial logic for simulated matching added as well but not fully hooked up yet [https://github.com/liampauling/flumine/pull/156/commits/64ae76f0cb5571a040ce9904febf35df733931c4](https://github.com/liampauling/flumine/pull/156/commits/64ae76f0cb5571a040ce9904febf35df733931c4)

---

## 2020-05-06 01:41:57 - random channel

**AP**

Hi Mo, have the issues with Linux and Ryzen been solved?

---

## 2020-05-05 20:05:20 - general channel

**John Sheppard**

...Hello I new here, I came from the BA thread also... not a python guy, but the last post enticed me...

---

## 2020-05-05 09:16:07 - random channel

**Mo**

Not that specific problem but sometimes expected fields are missing, yes

---

## 2020-05-05 09:15:29 - random channel

**Tobias Pankrath**

Yesterday I've got an illegal response in listMarketCatalogue, one without 'description.marketType'. Could not find anything about this on the offical forums. Do you have the same problem sometimes?

---

## 2020-05-05 09:04:55 - random channel

**Julio**

Hello all, sorry if this has already been asked before. Is there a way to filter the streaming of data on date/time? I can see in filter.py that there is a time_range object, but i cant see it as argument of streaming market filter. If not I'll request through the REST api and then pass the list i want to stream to the streaming engine.

I am trying to trade on the greyhound, but i only want to stream the one immediately coming. When i try all the markets the message latenty high get higher and higher.

---

## 2020-05-04 19:02:54 - general channel

**MacrcoPolo**

Quick question, where should I place a vps?

---

## 2020-05-04 11:53:57 - issues channel

**Mo**

Never observed any problems

---

## 2020-05-03 23:07:46 - random channel

**Unknown**

This is my exciting bedtime reading. I'm hoping it helps me write faster bots. If not it will help me pass stupid interview questions.

---

## 2020-05-03 22:06:06 - random channel

**Unknown**

Is there a problem with this bit of code?

---

## 2020-05-03 09:00:07 - random channel

**Lee**

I tried backtesting with flumine and pypy recently, went from 49 seconds down to 27 seconds.

---

## 2020-05-02 17:35:46 - general channel

**liam**

Come to the next bflw meet-up and there should be at least one, George was going to come to the last but sacked us off for PL football in a box...

---

## 2020-05-02 16:28:44 - general channel

**Ruben**

well its really nice to hear some of the bflw users are profitable!!

---

## 2020-05-02 07:56:33 - general channel

**Ruben**

that's definitely helpful, thanks a lot [@U4H19D1D2](@U4H19D1D2)

---

## 2020-05-01 22:42:49 - general channel

**Ruben**

I would appreciate any help, thanks a lot!!

---

## 2020-05-01 18:11:46 - random channel

**Mo**

With the CPU? No, just stuff like [https://betfairlightweight.slack.com/archives/C4H05KKMY/p1588326056232000](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1588326056232000)

---

## 2020-05-01 12:46:41 - general channel

**liam**

yep I have a lot of sls functions that use bflw

---

## 2020-05-01 12:45:49 - general channel

**Keith Davey**

Hi, I am not great a python, but I got logged in and can query the markets and so on, thanks for the excellent work on this.

---

## 2020-05-01 10:40:56 - random channel

**Mo**

I don't use flumine but a lot of my data processing tasks are structured like this because they're embarrassingly parallel:



```with futures.ProcessPoolExecutor(max_workers=number_of_processes) as pool:

    all_futures = [

        pool.submit(

            backfill_market_catalogue,

            s3_key=record.key,

            betfair_market_id=record.betfair_market_id,

            get_market_catalogue_function=get_market_catalogue_function

        )

        for record in records

    ]

    for _ in tqdm([http://futures.as|futures.as](http://futures.as|futures.as)_completed(all_futures), total=len(all_futures)):

        pass```



---

## 2020-05-01 10:35:35 - random channel

**Jonatan (skyw)**

[@UPMUFSGCR](@UPMUFSGCR) Are you running multiple instances of Flumine at the same time? if not I think that distributing it over multiple cores would help greatly.

---

## 2020-05-01 10:10:31 - random channel

**Jonjonjon**

[@UBS7QANF3](@UBS7QANF3) If it isn't secret info, what PC did you get? I am thinking of getting a new PC at some point this year. I'm wondering whether or not it's worth getting lots of cores if I'm going to be doing backtesting using Flumine.

---

## 2020-05-01 08:08:25 - random channel

**Mo**

I actually use IntelliJ which is JetBrains' Java IDE even though I mostly code in Python these days

---

## 2020-04-30 19:31:37 - strategies channel

**Dave**

Had a read through the paper - sure, maybe they have decent signal, but that is about it...execution is an equally difficult problem (and one that is much more difficult to backtest). Likely larger players will get to the desirable orders faster, or MMs will cancel before you can take.  You'll end up only being able to take the worst positions.

---

## 2020-04-30 11:53:15 - issues channel

**Julio**

I'll have a look at flumine - I might not have to re invent the wheel :slightly_smiling_face:

---

## 2020-04-30 11:52:28 - issues channel

**liam**

[https://github.com/liampauling/flumine](https://github.com/liampauling/flumine)

---

## 2020-04-30 11:39:22 - issues channel

**Julio**

sorry - i used examplestreaming.py

---

## 2020-04-30 11:36:52 - issues channel

**liam**

Welcome :slightly_smiling_face: test_streaming.py? Can you share your code, are you not using the examples?

---

## 2020-04-30 11:21:12 - issues channel

**Julio**

Hello all, I am thrilled to see such a great community on the Slack. I running my algo based on the test_streaming.py to refresh the prices. It works perfectly when the race sis far from starting. But when the races are

---

## 2020-04-30 11:06:47 - general channel

**Cagdas Yetkin**

Thanks for your patience also :slightly_smiling_face: Now I am streaming in some json and i can work! I will do my tests with e-sports i guess.

---

## 2020-04-29 09:46:14 - general channel

**Mo**

Start with this one: [https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2020-04-28 21:44:02 - random channel

**Mo**

No because I’m not a big numpy user but I’m definitely open it if other users would find it useful

---

## 2020-04-28 19:24:49 - random channel

**Jonatan (skyw)**

Very nice, will test it!



Thought about numpy implementation of it? it looks numpyish, (biased) :)

---

## 2020-04-28 16:01:13 - general channel

**Mo**

I had the same problem, in the end I just had CircleCI run the unit tests and I run the integration tests locally

---

## 2020-04-28 15:53:27 - general channel

**Lee**

Assume you’re using betfairlightweight, could you run tests without logging in?

---

## 2020-04-27 11:57:02 - random channel

**JazzMan**

Find a developer job first any langauge, could be C#, [http://VB.net|VB.net](http://VB.net|VB.net) or this Monty Python nonsense. Then learn the langauge. Developing software is the difficult part, the programming langauge is the easy part.

---

## 2020-04-26 13:11:17 - issues channel

**Jonatan (skyw)**

You're right I was only looking at my own code, I have no trouble running it with Anaconda environment with python 3.8.2 though. Hope  you solve it.

---

## 2020-04-26 10:32:05 - issues channel

**Jonatan (skyw)**

from betfairlightweight.streaming.listenener import Streamlistener

---

## 2020-04-25 20:25:27 - issues channel

**user34**

No, Spyder, but I could use Jupyter if that would help.

---

## 2020-04-25 15:32:42 - random channel

**Jonatan (skyw)**

Started to create benchmarks for the ones interested, might only be me though :joy:

[https://github.com/almenjonatan/benchmark/blob/master/betfairlightweight_benchmark.ipynb](https://github.com/almenjonatan/benchmark/blob/master/betfairlightweight_benchmark.ipynb)



Although I feel some of the numbers are on the low end. I might have ruined the library while patching it or something else.

---

## 2020-04-24 17:34:18 - issues channel

**Mo**

I don’t think it’s fair to say it adds complexity, it should reduce complexity in the flumine code base to delegate that responsibility to Redis

---

## 2020-04-24 17:17:43 - issues channel

**liam**

That’s the thing, redis just adds another layer of complexity, certainly want to look at adding it as an ‘extra’. Last thing I want is the requirement to run a database/api/redis/docker before an order can be placed 

---

## 2020-04-24 15:54:58 - issues channel

**liam**

[@U0128E7BEHW](@U0128E7BEHW) are you just making a listCurrentOrders request, you able to share code, pseudo or real? Interested in how use cases as it will help in development :slightly_smiling_face:

---

## 2020-04-24 14:27:59 - issues channel

**Dave**

On the Dev branch of flumine, is it possible for flumine to pick up existing open orders and populate them into the blotter? Not sure if the functionality is there and I just can't find it :slightly_smiling_face:

---

## 2020-04-24 12:33:40 - general channel

**Lee**

Hi Liam, was just wondering how you was progressing with the simulated execution stuff for flumine?

---

## 2020-04-24 10:42:00 - random channel

**liam**

Are you able to expand? bflw wont change, its always going to just be a wrapper for whatever is required to work with the api but is dynamic enough for a user to adapt/override methods if required.

flumine will be an equivalent framework with the ability to adapt, modify and build on top of, [@UBS7QANF3](@UBS7QANF3) may disagree but in my opinion distributed solutions aren't required for 99% of api users

---

## 2020-04-24 10:34:20 - random channel

**Jonatan (skyw)**

Not directly related to this but I think it would be nice to have some benchmarks of what the capabilities of bflw and flumine are. That could get people away from trying to implement distributed solutions when not necessary or other pre optimized paths.

---

## 2020-04-24 00:19:42 - general channel

**Jonatan (skyw)**

I think async is removed! I also think there are examples on how to do it!

---

## 2020-04-23 23:47:35 - general channel

**Newbie99**

I just updated BFLW and now it hangs at:



`INFO:betfairlightweight.streaming.stream:[Stream: 1]: 13 oc added`



```order_stream.start(async_=True)```



---

## 2020-04-23 09:15:47 - general channel

**liam**

that example now improved with more examples and a lot less boilerplate code [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2020-04-23 08:19:11 - general channel

**Mo**

I have no objections to the principle of pushing people towards flumine - I've been following the developments and think it sounds awesome - but I think it should be done as "Here's how you'd do it yourself BUT you should just use flumine" rather than "You should just use flumine"

---

## 2020-04-23 08:13:15 - general channel

**liam**

Yeah that seems common, tempting to just cross sell flumine and push people that way

---

## 2020-04-23 07:44:16 - general channel

**Mo**

Have you seen this example? [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2020-04-22 23:32:55 - random channel

**Jonatan (skyw)**

Yeah but it's ugly as hell :slightly_smiling_face:



Well it can be lots of different problem  with that description, just for curiosity, do you think some other process hogs all your available bandwidth or cpu?

---

## 2020-04-22 23:11:48 - random channel

**Jonatan (skyw)**

I would be kinda worried if the script does not recover when the issue goes away. One thing you could try is just ignoring processing the messages that are above a certain threshold and see if that helps.



For a really dumb and naive solution just put it in a while true loop in bash and exit the script when the process has stopped and the app restarts...

---

## 2020-04-21 20:31:13 - general channel

**liam**

Lightweight is giving you the raw json from the api, it’s common for the api not to return data for some vars whereas non lightweight will give you a python object regardless 

---

## 2020-04-21 16:52:38 - general channel

**mandelbot**

so flumine is a wrapper for bflw?

---

## 2020-04-21 16:50:34 - general channel

**mandelbot**

Sorry for the dumb question, but what's the diff between flumine and bflw?

---

## 2020-04-21 16:42:38 - general channel

**Lee**

I would offer help or contributions but not sure i’d be much use currently

---

## 2020-04-21 15:59:48 - general channel

**Lee**

was looking in to how to add the logic for when a order might be matched/filled in a backtest

---

## 2020-04-21 13:38:19 - random channel

**mandelbot**

I think they do a lot of statistical arbitrage. They are pattern recognition mathematicians, so they were very early to the machine learning game in finance. A large portion of their trades they didn't know the reasoning, just their machine learning spewed it out. I imagine it finds all sorts of things, some things they understand, others they dont. From the book it seemed they weren't doing too well in crashes though.

---

## 2020-04-20 06:03:33 - random channel

**liam**

Interesting thanks for looking into it, the serialise function is the bottleneck in the streaming code anyway 

---

## 2020-04-19 11:35:47 - general channel

**Amanda**

Question about the 1000 bets an hour. It doesn't apply to PC payers, is that correct? I never knew about it, is there a charge if you go over it? Do they tell you?

---

## 2020-04-18 16:49:39 - general channel

**jhaa**

```order_filter = streaming_order_filter(include_overall_position=False)```



---

## 2020-04-18 16:43:05 - general channel

**liam**

I assume your problem is that the order stream does not include any orders that have already been cancelled or matched when you start? Or have I misunderstood 

---

## 2020-04-18 13:59:04 - general channel

**fjt1973**

As I said a newbie to Python which is becoming used more in my job. So what a better way to learn than doing something you have an interest in. This great library Liam :slightly_smiling_face:

---

## 2020-04-18 13:50:06 - general channel

**fjt1973**

While learning my way around I have betfair up at the same time.... it just to makes it easier to compare the output in Python :slightly_smiling_face:

---

## 2020-04-17 15:39:55 - general channel

**Amanda**

Are you sure you are streaming using the events and not going round in a loop each time.

---

## 2020-04-17 02:07:27 - issues channel

**Unknown**

This will help

---

## 2020-04-16 12:53:40 - issues channel

**mandelbot**

Well I run automations on betfair, still trying to get to grips with bflw

---

## 2020-04-16 11:55:37 - issues channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/account.py#L59-L93](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/account.py#L59-L93)

---

## 2020-04-15 22:59:37 - general channel

**Jonjonjon**

How can we filter out nsw racing using the bflw?

---

## 2020-04-15 21:05:39 - general channel

**jhaa**

i vaguely remember asking a similar question a whlie ago and receiving an answer suggesting that I should not use python if I worry about milliseconds

---

## 2020-04-15 14:33:09 - general channel

**bogdan**

I think I have to use something from this source, but I don't figure out how to call the function

---

## 2020-04-15 14:32:40 - general channel

**bogdan**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/accountresources.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/accountresources.py)

---

## 2020-04-15 14:32:22 - general channel

**bogdan**

Hello, Can anyone provide me with an example of how to get the account details as 'balance'

---

## 2020-04-15 08:56:44 - general channel

**mandelbot**

thanks, that helps

---

## 2020-04-15 08:51:19 - general channel

**liam**

have you seen flumine?

---

## 2020-04-13 20:18:49 - random channel

**Mo**

Yeah, we cover a lot of topics here. I’m sure we’ll be able to help out even if you stick with the Microsoft tech stack

---

## 2020-04-13 19:57:50 - random channel

**James T**

Yeah, I use C# myself. I’m not sure there’s anything that makes Python specifically suited to the Betfair API. There are pros and cons of all the languages so it may be best you just choose what you’re comfortable with. Or else have a specific reason you want to use Python (eg. If you want to do stuff with machine learning). 

---

## 2020-04-13 19:57:33 - random channel

**Silver Drifter**

Thanks Josh.  Amanda, that's a good question.  I guess, the reason is that I can find very little in the way of online communities for the Betfair API using C#.  This community looks pretty good to me but of course, it's heavily focused on Python.  Not 100% sure yet, maybe I will stick with C#.  I've written a ton of code already for the API, which I'm quite happy with

---

## 2020-04-13 19:53:38 - random channel

**Amanda**

The Betfair API samples are in C# so why not use it?

---

## 2020-04-13 18:53:58 - issues channel

**Josh**

Something to do with permissions on the laptop I was using, works perfectly fine on another computer. Thanks for your help all

---

## 2020-04-13 16:58:55 - issues channel

**Josh**

Cheers Jonathan, I moved to documents for this reasom but still no luck. Thanks for your help

---

## 2020-04-13 16:57:47 - issues channel

**Jonatan (skyw)**

I'm not sure about windows,



Your user running python probably do not have access to the file. If you put the file in some weird place I guess this could happen. I would suggest moving it to somewhere where your user has read write access.



Then you could right click on the file and check that your user has read permission. Someone else using windows probably have a better answer : )

---

## 2020-04-12 13:41:30 - strategies channel

**Jonjonjon**

I consider bflw lower risk than the stockmarket.



Suppose you make £xx,xxx from bflw. The chances are that you won't be able to reinvest that money in Betfair. So you will withdraw it and have less money at risk (hence my initial question). However, stocks probably have a higher chance of silly exponential growth than bflw. Bflw is more like a job with (relative to the stock market) steady returns.

---

## 2020-04-12 12:13:45 - random channel

**Mo**

A betfairlightweight meetup. It was indeed great (although I organised it so possibly biased). I'm sure there will be more in the future

---

## 2020-04-12 12:12:26 - random channel

**Ruben**

Was there a betfair API meetup? that sounds great

---

## 2020-04-12 12:03:18 - random channel

**Unknown**

Too bad his ventures in financial markets are somewhat questionable ;) but everything else...pretty amazing indeed

---

## 2020-04-12 11:39:30 - random channel

**Dave**

* man who solved the markets (biography of Jim Simmons and RenTech (one of the most successful funds))

---

## 2020-04-12 11:25:33 - strategies channel

**liam**

Nothing risky about bflw! :smile:

---

## 2020-04-12 11:16:23 - strategies channel

**ash**

[@U4H19D1D2](@U4H19D1D2) “dollar cost averaging mixed with diversifying”

100% agree. Any idea of being able to predict the short term due to the number of variables that contribute to the price moving is to risky, in my opinion, to be attempted with any size that would equate to meaningful gains. I am not an expert by any means, but i think doing so, proficiently, is a full time job. I am looking at long term / large cap / dividend etc. Keeping a smaller position in more risky pursuit  .. like betfairlightweight ..

---

## 2020-04-11 21:03:42 - strategies channel

**Lee**

I’d recommend the book How to own the world by Andrew Craig

---

## 2020-04-11 19:33:05 - issues channel

**liam**

Not seeing a problem here, it runs the markets sequentially and takes a while to run each one depending on market type 

---

## 2020-04-11 19:18:35 - issues channel

**Lee**

```PID     COMMAND           %CPU   TIME      #TH     #WQ   #PORTS MEM     PURG

9457    Python            99.7   03:24.24  1/1     0     14     11G     0B   ```

---

## 2020-04-11 09:48:36 - random channel

**Jonjonjon**

I read the docs for orderedict and realised it won't help. I could try a sorteddict ([http://www.grantjenks.com/docs/sortedcontainers/|http://www.grantjenks.com/docs/sortedcontainers/](http://www.grantjenks.com/docs/sortedcontainers/|http://www.grantjenks.com/docs/sortedcontainers/)), but that would add a dependency that we would need to add to requirements.txt. If I did that, would it be a problem?

---

## 2020-04-10 23:13:31 - issues channel

**Mo**

Although I know [@U4H19D1D2](@U4H19D1D2) would tell you just to store it in a Python structure :wink:

---

## 2020-04-10 22:08:17 - issues channel

**Oliver Varney**

I only ask as there is no source online that give typical update times for python so I thought I would ask the community

---

## 2020-04-10 21:58:13 - issues channel

**Oliver Varney**

I'm trying to understand what are typical updates times for a python connector

---

## 2020-04-10 21:56:32 - issues channel

**Jonatan (skyw)**

It's built on PostGreSQL

---

## 2020-04-10 16:53:53 - random channel

**liam**

Awesome I think betfair could use this example to get streaming rolled out on the site itself!

---

## 2020-04-10 15:54:28 - random channel

**Jonatan (skyw)**

I created a simple example showing order streaming using python SocketIO and ReactJS. Should be easy to use any "streaming" library such as zeroMQ, redis, betfairlightweight, raw sockets ...

[https://github.com/almenjonatan/betfair-gui](https://github.com/almenjonatan/betfair-gui)

It's basically react  tutorial, glued together with socket io tutorial, might be helpful for someone starting to build a gui.

---

## 2020-04-10 14:30:40 - general channel

**Mo**

Consume the stream in the standard way: [https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2020-04-09 13:41:15 - general channel

**liam**

[https://liampauling.github.io/betfair/streaming/#snap](https://liampauling.github.io/betfair/streaming/#snap)

---

## 2020-04-09 05:40:55 - general channel

**Rob (NZ)**

Can I be cheeky and what that kind of functionality helps with, sorry was way over might head but I was guessing your looking at it for a specific reason.

---

## 2020-04-08 17:21:05 - issues channel

**Christian Tox**

can I pass that token with betfairlightweight?

---

## 2020-04-08 15:45:21 - issues channel

**Christian Tox**

emailed support, hope they can help. Thanks regardless!

---

## 2020-04-08 14:54:22 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L164](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L164)

---

## 2020-04-07 16:08:22 - general channel

**Peter**

Having recently switched from a stream each race and each match approach, I've been pleasantly surprised at how lightweight streaming is. While there was enough soccer to justify it, I split my streams by geography, so had separate streams for GB, rest of Europe, Asia and Americas. The 200 market limit seems to apply to the API rather than streams. I did hit a limit on streams but IIRC it was at 1000.

---

## 2020-04-07 15:55:09 - general channel

**jhaa**

for now I am building the streaming stuff on the horses as that seems to still happen to a certain degree

---

## 2020-04-07 15:44:25 - general channel

**jhaa**

How come streaming_market_filter does not have the market_start_time filter but market_filter has it?

---

## 2020-04-06 16:08:48 - general channel

**liam**

Release on bflw to [https://github.com/liampauling/betfair/blob/master/HISTORY.rst|2.3.0](https://github.com/liampauling/betfair/blob/master/HISTORY.rst|2.3.0) which removes c libraries for windows

---

## 2020-04-06 14:29:02 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L130](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L130)

---

## 2020-04-05 20:24:45 - issues channel

**Max**

This was the problem! Thanks a lot [@UBS7QANF3](@UBS7QANF3)

---

## 2020-04-05 13:22:03 - issues channel

**Mo**

No worries, here to help

---

## 2020-04-05 13:21:17 - issues channel

**mandelbot**

Thanks, sorry for all the questions. I'm an economist by education (lot of good that has done me!)

---

## 2020-04-05 13:15:55 - issues channel

**mandelbot**

I see so I would place my bets here correct? [https://github.com/liampauling/betfair/blob/104ff4cb8734038cb9351e74d16dc7bd018111bc/examples/examplestreaming.py#L73](https://github.com/liampauling/betfair/blob/104ff4cb8734038cb9351e74d16dc7bd018111bc/examples/examplestreaming.py#L73)

---

## 2020-04-05 12:55:21 - issues channel

**mandelbot**

If it were polling I would set a loop to request the marketbook every x seconds and then check if my criteria are met, and place bets accordingly. How would it work with streaming?

---

## 2020-04-05 12:51:32 - issues channel

**mandelbot**

That's exactly what I needed, many thanks. Another question about stream, once I start one, how do I embed arguments. Not sure how this would work since it's not a loop.

---

## 2020-04-05 12:46:43 - issues channel

**mandelbot**

I will look into, thanks for your help and patience :slightly_smiling_face:

---

## 2020-04-05 12:33:54 - issues channel

**Mo**

That’s fine, so have you successfully run the streaming example?

---

## 2020-04-03 19:19:57 - general channel

**Jonatan (skyw)**

Would it be intresting to add this,  [https://www.python.org/dev/peps/pep-0561/|https://www.python.org/dev/peps/pep-0561/](https://www.python.org/dev/peps/pep-0561/|https://www.python.org/dev/peps/pep-0561/)

---

## 2020-04-03 19:16:25 - general channel

**liam**

Yeah that’s the challenge, it’s so time consuming, took me months to get it in bflw as I got so damn bored doing it 

---

## 2020-04-03 19:16:11 - general channel

**Lee**

I do a bit of java and coming back to python is when I miss the types

---

## 2020-04-03 19:00:23 - general channel

**Lee**

Yeah, i had the same thing. Just took me too long to work out how todo simple things.

---

## 2020-04-03 18:53:21 - general channel

**liam**

That looks interesting as it has streaming as well 

---

## 2020-04-03 11:15:11 - general channel

**PeterLe**

[@U010RPB4S9Y](@U010RPB4S9Y) Check out this course on udemy, [https://www.udemy.com/course/the-modern-python3-bootcamp/](https://www.udemy.com/course/the-modern-python3-bootcamp/) I enjoyed doing it, NB: Dont pay full asking price, search for online coupon, you should pay circa £10

---

## 2020-04-03 10:52:53 - general channel

**Oliver Varney**

apologies for the million questions, but does the order stream send updates for partial matches ?

---

## 2020-04-03 09:39:52 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/metadata.py#L61](https://github.com/liampauling/betfair/blob/master/betfairlightweight/metadata.py#L61)

---

## 2020-04-03 08:50:30 - general channel

**Mo**

What would Python try to do with that?

---

## 2020-04-03 08:49:52 - general channel

**Mo**

Actually, to be clear, I treat them as integers in my database

---

## 2020-04-03 07:02:14 - general channel

**liam**

[@UBS7QANF3](@UBS7QANF3) how do you deal with ‘1.12345600’, my concern is always that python will suddenly decide to convert that 

---

## 2020-04-02 17:30:31 - general channel

**Jeff**

I've spent more time in one week trying to get to grips with Python than I did getting my pilots licence. lol

---

## 2020-04-02 17:17:07 - general channel

**Jeff**

Is there any specific basic python courses on youtube you would recommend?

---

## 2020-04-02 17:13:53 - general channel

**Mo**

You said you were willing to learn 



It sounds like you need to start with a basic python course before you touch anything to do with betfairlightweight

---

## 2020-04-02 17:04:31 - general channel

**Fab**

Jeff, writing software is 10% writing code and 90%:



• thinking of how to structure things

• researching things you don’t know

• figuring out things by experimenting

• banging your head against the wall because of one tiny thing that it’s so obvious and why the f**k doesn’t it work, I mean it’s supposed to work if I write it like this… then realising it just needed a little tweak and the programming language is not stupid, but you are

So, don’t be discouraged if you can’t figure things out in 1 hour

---

## 2020-04-02 16:44:12 - general channel

**Jeff**

I can't make head or tail of it. Best I left Python to the experts.

---

## 2020-04-02 13:36:41 - general channel

**liam**

really? [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py#L66](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py#L66)

---

## 2020-04-02 12:41:58 - issues channel

**D C**

I personally calculate distances between successive GPS coords but I don't try to project them onto the racing line myself. That's quite an advanced problem in the parametric space (unless of course its a 5 furlong with no turns)

---

## 2020-04-02 11:07:52 - general channel

**Mo**

No offence because I mean this constructively but I told you very specifically how to get started and you immediately asked how to go about doing it rather than taking the initiative

---

## 2020-04-02 10:57:26 - general channel

**Mo**

It's 100% out of your league right not and it may or may not be a good idea in the first place but if you focus on things like handling the data in betfairlightweight then you will be developing skills that will apply more generally

---

## 2020-04-02 10:56:20 - general channel

**Mo**

Follow this example for step 1: [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py), then ask questions here

---

## 2020-04-02 10:55:40 - general channel

**Jeff**

The python tutorials are okay but there isnt any video tutorials on betfairlightweight

---

## 2020-04-02 10:54:08 - general channel

**Lee**

[@U010RPB4S9Y](@U010RPB4S9Y) It might be worth doing some python tutorials on youtube first

---

## 2020-04-02 10:52:29 - general channel

**Mo**

1. Using betfairlightweight, get the market book for a race just before it turns in play

2. Using your visualisation framework of choice, display that market book in a table

---

## 2020-04-02 10:51:22 - general channel

**Jeff**

No not used betfairlightweight before.

---

## 2020-04-02 10:50:01 - general channel

**Mo**

Have you used betfairlightweight?

---

## 2020-04-02 10:24:12 - general channel

**Remi**

Before you make a big application you have [https://www.ic.unicamp.br/~meidanis/courses/mc336/2009s2/prolog/problemas/|99](https://www.ic.unicamp.br/~meidanis/courses/mc336/2009s2/prolog/problemas/|99) other problems to [https://wiki.python.org/moin/ProblemSets/99%20Prolog%20Problems%20Solutions|consider](https://wiki.python.org/moin/ProblemSets/99%20Prolog%20Problems%20Solutions|consider). I’d say if the first ~30 make you pause then you’re not ready for a project.

---

## 2020-04-02 10:15:22 - general channel

**liam**

+1, in terms of your CV getting experience in a full stack web app is very valuable, using python only to write a GUI will probably kill you

---

## 2020-04-02 06:40:00 - general channel

**liam**

Why bother? BA does a very good job already and python is probably one of the worst languages to write any sort of gui applications 

---

## 2020-03-31 10:25:28 - issues channel

**liam**

replace the S3MarketRecorder with this one [https://github.com/liampauling/flumine/blob/2a261e27d5738ed405f9f1d24446bdfe8b078cc1/examples/strategies/marketrecorder.py#L16](https://github.com/liampauling/flumine/blob/2a261e27d5738ed405f9f1d24446bdfe8b078cc1/examples/strategies/marketrecorder.py#L16)

---

## 2020-03-31 09:55:36 - issues channel

**Mo**

Change the `local_dir` on this line:  [https://github.com/liampauling/flumine/blob/2a261e27d5738ed405f9f1d24446bdfe8b078cc1/examples/marketrecorder.py#L35](https://github.com/liampauling/flumine/blob/2a261e27d5738ed405f9f1d24446bdfe8b078cc1/examples/marketrecorder.py#L35) to somewhere that will exist on Windows

---

## 2020-03-30 13:00:51 - general channel

**Newbie99**

When using listCurrentOrders, if the order count is &gt; 1000, how is this handled, I don't have any markets with that many executed orders to check, but wanted to build this functionality in anyway as its bound to come up eventually.



If I call for market x (and no other parameters) then it will return y CurrentOrders, but lets say the moreavailable flag = True, how to I access these additional records?



Is it a case of checking the number of the last record (i.e.  1 - 1000), then making a second call with 1001 as the start and keep repeating, or is there a slicker way?

---

## 2020-03-27 09:15:55 - general channel

**Oliver Varney**

Question, do replace order persist the original customerOrderRef?

---

## 2020-03-26 11:20:26 - general channel

**Lee**

[https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py](https://github.com/liampauling/flumine/blob/master/examples/marketrecorder.py)

---

## 2020-03-25 12:51:54 - general channel

**Lee**

I’m using flumine too to collect data. Works well. (When there are games on) ha

---

## 2020-03-25 11:56:14 - general channel

**Johnny**

Thanks - will have to spend some time on getting to grips with Flumine then!

---

## 2020-03-24 16:50:45 - strategies channel

**brightcake**

I guess it suffers from the same problems as academic papers in finance: great in theory but useless in practise

---

## 2020-03-23 22:25:58 - issues channel

**Jonatan (skyw)**

Have you tried the line, long time I used windows and python.

---

## 2020-03-23 20:11:30 - issues channel

**Jonatan (skyw)**

As said just want to make it aware, maybe not a real problem can occur and can be hard to see why :slightly_smiling_face:

---

## 2020-03-23 20:10:08 - issues channel

**Jonatan (skyw)**

the problem can happen when market_cache updates takes time.



because you process and queues on the same thread as you are reading the socket.



the default recv is 1024 bytes, I kernel space you have 65k bytes normally.



If we start queing up messages in kernel space we probably have to read them all + more until processing again, instead of just queing them and then process.

---

## 2020-03-23 20:02:07 - issues channel

**liam**

I don’t see the problem, and must have processed close to billions of updates without any issues 

---

## 2020-03-23 19:37:46 - issues channel

**liam**

[@U92CASP1B](@U92CASP1B)

1. my understanding is that bufsize is the maximum size, so using the [https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L218|bflw code](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L218|bflw code) in your example two parts will be read from the socket and joined together 'abc' + '\r\n' 

2. not sure I would comfortable in processing streaming data on the fly, i.e before the entire message has been sent but I could see it being useful if you have very large subscriptions but even then does conflate happen that often? I have never had an issue 

---

## 2020-03-22 22:22:08 - general channel

**Rory**

re programming languages, it really doesn't matter which one you choose ... anyone coming from a C++ background will be able to pick up any of the modern languages after a few weeks ... I've been through many years of C, C++, Java in my career and spent the last while learning Python .. I like it as a language .... any of the others mentioned above are equally good candidates ...I wouldn't mind having a look at Rust or Go myself but learning another language is down my priority list right now

---

## 2020-03-22 09:38:26 - general channel

**mandelbot**

[@U4H19D1D2](@U4H19D1D2) You've helped me with that already. Thanks again!

---

## 2020-03-21 14:01:13 - issues channel

**liam**

Noticed this, looks like ujson have changed something which makes the build fail, what version of python? I think 3.7+ it’s ok 

---

## 2020-03-21 04:55:00 - general channel

**Peter**

Yes to all those via the race cards API. There's a simple example available in the BFLW examples folder.

---

## 2020-03-20 23:42:01 - general channel

**Adam Momen**

Hello guys, quick question, is it possible to get these horse runner meta-data properties from the *free* bet-fair exchange API:

• ADJUSTED_RATING

• AGE

• DAYS_SINCE_LAST_RUN

• SEX_TYPE

Because I have been trying to call the API and all I have got is a basic meta-data like:

•  Runner Name

• Handicap

---

## 2020-03-19 18:23:02 - strategies channel

**hugo**

slightly more functional approach to the same problem

---

## 2020-03-17 12:49:27 - general channel

**liam**

mental, I suppose its going to be a good time to do a database migration that I have been delaying for about 3 years

---

## 2020-03-17 07:40:42 - issues channel

**Peter**

I guess my question might reduce to "how do I inject an event with type TERMINATOR into the stream?"

---

## 2020-03-17 07:29:00 - issues channel

**Peter**

I can provide a fully worked example and logs if they would still be helpful.

---

## 2020-03-17 07:28:02 - issues channel

**Peter**

This brings me back to the second question, which is whether there is a way to force exit of the framework.run() loop. At the moment my scripts log the following

```{"asctime": "2020-03-17 07:21:01,625", "levelname": "INFO", "message": "Stopped HistoricalStream 0"}```

---

## 2020-03-17 07:24:36 - issues channel

**Peter**

```class HistoricalFlumine(Flumine):

    def __enter__(self):

        [http://logger.info|logger.info](http://logger.info|logger.info)("Starting historical flumine")

        self.strategies.start()

        [http://logger.info|logger.info](http://logger.info|logger.info)("strategies started ...")

        self.streams.start()

        [http://logger.info|logger.info](http://logger.info|logger.info)("streams started ...")

        self._running = True```

---

## 2020-03-16 17:19:53 - issues channel

**Peter**

The other question is how to stop it once the stream file has been processed. When I execute framework.run() it logs the closure of the historical stream, but continues executing indefinitely, i.e. the python script doesn't exit. Is there a way to force that and clean up any threads that it has created?

---

## 2020-03-15 22:34:33 - random channel

**Tom**

Has anyone got a smarkets wrapper written in Python? Or is anyone interested in making one?

---

## 2020-03-15 21:43:26 - issues channel

**Newbie99**

out of curiosity though, is there a better way to get a starting position than calling listMarketBook on startup (or is that the only/best way, but just simply don't call the full history/depth etc and pick up the rest later from streaming)?

---

## 2020-03-15 21:39:39 - issues channel

**Newbie99**

Ah I see, okay, so my first call is to get the current position on load, then I switch to streaming for everything subsequent.



Need to re-write that it would appear.



Thank you, much appreciated, will give that a go.

---

## 2020-03-15 21:38:53 - issues channel

**Alex A**

You could make the same requests for up to 200 markets with streaming and that would be fine.

---

## 2020-03-15 21:37:14 - issues channel

**Mo**

Use streaming

---

## 2020-03-15 13:48:48 - strategies channel

**Jonjonjon**

Good question. But I don't have a good answer.:disappointed:

---

## 2020-03-14 23:07:46 - general channel

**Chris**

hast anyone not been capturing all events when using flumine to get racing data? Its probably me, but just wondering

---

## 2020-03-13 07:15:59 - general channel

**Jack Kaminski**

Or a database of their values

---

## 2020-03-13 07:04:58 - general channel

**Jack Kaminski**

Is there anyway to retrieve the race card data from each selection via streaming? Or do I have to get this data another way

---

## 2020-03-12 16:05:40 - general channel

**Mo**

Read it like historic data? [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2020-03-12 16:03:21 - general channel

**Evaldas**

Hi, can anyone give me example of how to convert flumine raw data to marketbooks?

---

## 2020-03-11 20:27:38 - issues channel

**Jonatan (skyw)**

Since betfairlightweight are using type annotation, do we have any good way using it with tools like mypy? 



This is not specific for betfairlightweight, but for any 3rd party library.

---

## 2020-03-11 12:58:31 - general channel

**Oliver Varney**

then the deltas are sent via the streaming option

---

## 2020-03-11 12:56:51 - general channel

**Oliver Varney**

basic question but does the orderSubscriptionMessage return previously fully executed orders when you start it up or is it purely orders that are still unmatched ?

---

## 2020-03-11 10:50:06 - general channel

**Jonjonjon**

[@UBS7QANF3](@UBS7QANF3) I don't know the answer. But if no one else here knows, I've asked similar questions on [https://sports.stackexchange.com](https://sports.stackexchange.com) and got good responses.

---

## 2020-03-11 09:50:52 - general channel

**Mo**

Basic horse racing question... where does a race distance of 6f16y come from? Why bother with the 16 yards?

---

## 2020-03-10 06:45:44 - general channel

**Jack Kaminski**

Firstly, database creation with those variables

---

## 2020-03-09 13:30:06 - general channel

**D C**

I would call 10+ years of full horse data a fat database. Something on the proform scale of things

---

## 2020-03-09 13:29:33 - general channel

**Jack Kaminski**

What's considered a fat database

---

## 2020-03-09 13:27:43 - general channel

**D C**

From a stats point of view I think GLMs are the way to go. Multinomial or perhaps ordinal LR. That would be what I would try if I had access to a nice clean fat database

---

## 2020-03-09 12:40:39 - general channel

**D C**

Golang is probably top of my list. Python next. I am 44 though and all the kids are learning Python. I have dabbled in Python in the past as I do like scripting stuff (my first bots were actually writtin in Perl for the old SOAP API).

---

## 2020-03-09 12:32:41 - general channel

**agberk**

Are you saying you're not considering Python for an unstated reason or you're interested in learning another language in addition to it? I'd say there's a pretty strong case for it having long term career demand

---

## 2020-03-09 11:28:45 - issues channel

**Rory**

or has everyone already moved to Flumine for that, which seems to run everything in the main Thread, so you can easily recover and retry

---

## 2020-03-09 11:27:29 - issues channel

**Rory**

[https://github.com/liampauling/betfair/blob/104ff4cb8734038cb9351e74d16dc7bd018111bc/examples/examplestreaming.py#L46](https://github.com/liampauling/betfair/blob/104ff4cb8734038cb9351e74d16dc7bd018111bc/examples/examplestreaming.py#L46)

---

## 2020-03-09 09:04:46 - general channel

**D C**

OK thanks chaps. Your input has been very helpful indeed.

---

## 2020-03-09 08:48:05 - general channel

**liam**

if you start selling bots they will no longer make money so that isn't a problem :smile:

---

## 2020-03-09 08:43:31 - general channel

**D C**

I have a question to anyone who is running a profitable bot. My old man is nearing retirement and is constantly telling me he wants to give me money to "invest" in my bots. I am happy to do this but obviously if I take it and make profit and pay the old man his share I am going to end up getting shafted on PC if I ever get that far. To that end I would prefer to give him a bot that he can run himself. My question is, how is this sort of thing viewed by betfair? They would be able to see 2 similarly themed bots running surely. Would they see this as some sort of PC avoidance if it were coming from 2 accounts that were clearly related (same surname living in fairly close proximity etc) ? I am WAY off PC stage and have a lifetime loss of 50K to make back first but I am sure you can see the dilemma. Any thoughts?

---

## 2020-03-08 16:35:40 - strategies channel

**Mo**

Not a dumb question, it’s not widely advertised

---

## 2020-03-08 16:27:08 - strategies channel

**Newbie99**

Possibly a dumb question, but are you using a different source for GPS data, or is there a way to get it via the API that I've been completely oblivious to?

---

## 2020-03-08 16:17:23 - strategies channel

**D C**

If you were getting prg=0 when the race was runing that at least confirms it came that way from source and its not a problem my end

---

## 2020-03-07 21:56:10 - general channel

**Silver Drifter**

I have recently started to look into AI &amp; ML, purely from the perspective of C# though.  So far, there appears to be quite a lot of useful information available and I'm hopeful of using ML to help me identify patterns, which I may not have been aware of otherwise.  Also interested to the experience of others

---

## 2020-03-06 15:23:58 - general channel

**liam**

[@UPMUFSGCR](@UPMUFSGCR) up to you, can't tell you how long it will take to get flumine to that point

---

## 2020-03-06 13:54:31 - general channel

**Jonjonjon**

You make some good points. For some tests a matcher than estimates order book position would be good. For other tests, such as when users are just taking prices, that won't be needed.



I'm just wondering if I should take a stab at my own backtester (I currently have none and don't do any backtesting), or if it would be better to try and do something with Flumine.

---

## 2020-03-05 10:15:13 - issues channel

**Peter**

That's what I'm learning. Many thanks for your help (and of course for BFLW!)

---

## 2020-03-05 10:07:07 - issues channel

**liam**

i typically start at 1000 and increment per 1000 [https://github.com/liampauling/flumine/blob/master/flumine/streams/streams.py#L63](https://github.com/liampauling/flumine/blob/master/flumine/streams/streams.py#L63)

---

## 2020-03-05 10:05:13 - issues channel

**Peter**

Makes sense. Thanks. And I guess I should just let BFLW handle setting the user ID rather than trying to construct my own.

---

## 2020-03-05 09:47:53 - issues channel

**liam**

Each stream has a unique id, this is incremented per subscribe/resubscribe, anything that comes out of that stream (marketBook/orderBook) has that streaming id as a variable. Of course this could start off as 1001 but end up as 1456 if it has to constantly resubscribe but the streaming class gets the updated id.



Note that betfair send back this unique id in each update [https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/listener.py#L109](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/listener.py#L109)

---

## 2020-03-03 21:34:40 - strategies channel

**AP**

I'll add with racing, adding in form/fundamental data certainly helps. You can identify profiles of horses that the market likes to oppose/support.

---

## 2020-03-03 16:31:23 - strategies channel

**Lee**

Sorry to jump on this question, but i'm curious what makes it work for horse racing and not other sports?

---

## 2020-03-03 06:53:21 - general channel

**Peter**

[@UFTBRB3F1](@UFTBRB3F1) I've been placing thousands of these a day for a while now without problem. As the documentation implies, the ability to place lower minimum stakes at larger prices was introduced specifically to help with liquidity for longer-priced selections, so what you're describing appears to be a behaviour that they wanted to encourage.

---

## 2020-03-02 17:35:33 - general channel

**liam**

[@UUCD6P13J](@UUCD6P13J) yes you can, just provide the same market filter and it will handle it for you, the logic is here: [https://github.com/liampauling/flumine/blob/master/flumine/streams/streams.py#L21](https://github.com/liampauling/flumine/blob/master/flumine/streams/streams.py#L21)

---

## 2020-03-02 16:08:53 - general channel

**Jonatan (skyw)**

I missunderstood, I did not see new version of flumine :slightly_smiling_face:

---

## 2020-03-02 09:41:17 - general channel

**Lee**

I noticed you also merged 1.0.0 into master for flumine. Thanks!

---

## 2020-03-01 14:26:06 - general channel

**Lee**

Is there any reason you can’t use python’s logging library? Thats what the library uses.

---

## 2020-03-01 14:23:20 - general channel

**Ian**

hi all, on flumine what is the most efficient way to display data/time on the log screen - prepending INFO:, WARNING: ?

---

## 2020-02-29 20:53:40 - general channel

**Peter**

Doesn't help that the needing to be refactored was written within a PHP framework, so will need to be converted from that paradigm to python scripts!

---

## 2020-02-29 20:11:58 - general channel

**Peter**

Noticing in the API documentation that competition Id is available as a market filter and BFLW supports it, but that's absent from the stream documentation. Anybody know if it works there too, or not?

---

## 2020-02-29 20:03:35 - general channel

**Peter**

I can understand the 200 markets limit for an APi call where you can calculate it and even specify the markets. But how do people manage this when streaming - I'd imagine you don't want to specify the markets as you want them to be added in as they become available - but when they are that could tip you over the limit. &lt;scratching head&gt;

---

## 2020-02-29 20:00:42 - general channel

**Peter**

Yep. But I was streaming multiple markets in individual matches so going over by a lot :rage:

---

## 2020-02-28 15:17:24 - issues channel

**Rory**

I think I hit an interesting problem ...



I was doing some checks with output_queue.qsize() before calling output_queue.get()



That has been working fine for months but today output_queue.qsize() was always returning 0 ... reading through the docs, that method doesn't seem to be reliable even though it's used internally in the Queue class



Going back to just having a blocking call on output_queue.get() did the trick ... word of warning for others using qsize

---

## 2020-02-28 14:14:41 - issues channel

**Rory**

I haven't been getting any market stream updates for soccer in the last 30 minutes or so ... anyone else having streaming issues?

---

## 2020-02-26 19:06:15 - general channel

**liam**

Pycharm can do it but tbh I don’t understand the problem as the only change has been now you need to create the thread 

---

## 2020-02-26 18:26:48 - issues channel

**liam**

That’s your problem 

---

## 2020-02-26 14:35:59 - issues channel

**Remi**

Also, I am on betfairlightweight==2.0.0

---

## 2020-02-26 14:29:03 - issues channel

**Remi**

Do you know if any of the betfairlightweight logic is different for GBP/EUR ?

---

## 2020-02-26 12:04:50 - strategies channel

**liam**

Looking to add backtesting capabilities to flumine eventually 

---

## 2020-02-26 09:22:23 - general channel

**Lee**

my filter is

```market_filter = streaming_market_filter(

    event_type_ids=["1"], country_codes=["GB"], market_types=["WIN"]

)```

---

## 2020-02-26 09:13:03 - general channel

**Mo**

Yes, betfairlightweight has football scores through the undocumented in play service: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/inplayservice.py)

---

## 2020-02-26 09:10:20 - general channel

**Mo**

It's so long ago I first tried it that I'm not sure if it needs to be specifically activated. Given it's already implemented in betfairlightweight, should be easy to check on your account?

---

## 2020-02-26 08:48:40 - general channel

**Unknown**

Tennis scores API documentation



Corresponds to functions in this module: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py)

---

## 2020-02-25 20:01:45 - general channel

**jb**

My understanding (based on cross-checking between the two) is:

• the `runners` field is correct and up-to-date at the time of publication

• the `streaming_update` field shows the changes since the last update. These changes *have* been incorporated in the `runners` field.

(The update is useful to me as I want to know which runners have changed)

However *I am a noob*, so would be very interested to have this confirmed.

---

## 2020-02-25 19:48:42 - general channel

**Chris**

Hi all I was wondering if someone can give me some clarity..  When you get a market book from the queue you have all the back/lay information for the runners, but you also have an attribute called 'streaming_update'

---

## 2020-02-25 19:27:51 - issues channel

**liam**

Streaming is cheap 

---

## 2020-02-25 19:11:57 - issues channel

**jb**

Thanks [@USDCJS1CK](@USDCJS1CK).  Didn't realise you could change the markets streamed on the fly.  And I don't seem to be able to do it.

Are you literally changing the market_ids list you passed to the `streaming_market_filter`?

I have tried that, and also changed the `streaming_market_filter` itself - but the original markets seem to be still streamed (even though the filter shows the new list of markets).

---

## 2020-02-25 17:09:58 - general channel

**Peter**

You may find this helpful:

[https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request](https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request)

---

## 2020-02-25 13:25:54 - issues channel

**jb**

you mean this?  [https://docs.python.org/3/library/signal.html](https://docs.python.org/3/library/signal.html)

---

## 2020-02-25 13:19:42 - issues channel

**klozovin**

[@UPEFBEEL8](@UPEFBEEL8) that's work for sure, although dealing with files can be sometimes tricky. If you're on Linux, you can always send a signal to your Python process and catch it... I think there's functionality for dealing with signals in Python stdlib, and you can send the signal via pkill/kill command

---

## 2020-02-25 12:56:33 - issues channel

**jb**

In case anyone else following this is using streaming with ipython or similar, and at my level of unsophistication, my current solution is to have the script check if a file named `STOP.sig` exists in a certain location and then stop cleanly.  So I can `touch STOP.sig` to stop the stream.

---

## 2020-02-25 12:41:42 - issues channel

**liam**

Assuming you started a new thread then it will get killed when the __main__ process gets killed as they share ram / run in the same process. Most issues seem to occur when you run streaming in juypter or similar 

---

## 2020-02-25 12:38:06 - issues channel

**Fab**

[https://stackoverflow.com/questions/40866576/run-atexit-when-python-process-is-killed](https://stackoverflow.com/questions/40866576/run-atexit-when-python-process-is-killed)

---

## 2020-02-25 12:22:00 - issues channel

**jb**

Yes I'm using that - and can call `stream.stop()` etc as long as my app is running.  But I don't understand how to deal with it if the app crashes.  Or if I want to stop the app with `ctrl-c` then `stream.stop()` won't get called.  (Though the above convo seems to say it's ok as the OS cleans everything up ).

---

## 2020-02-25 12:12:01 - issues channel

**liam**

Have you seen this? You can just call stop on program exit [https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2020-02-25 11:22:01 - issues channel

**jb**

So how do people run and manage streams - in particular shut them down gracefully?  Some sort of poison pill?  Do you run them in regular python scripts, or something else?

---

## 2020-02-24 19:35:51 - issues channel

**jb**

normally calling it from ipython

---

## 2020-02-24 19:22:30 - issues channel

**Mo**

How are you running your python code?

---

## 2020-02-24 19:17:14 - issues channel

**jb**

Hey guys.  Starting to use the streaming, and I'm calling `stream.start()` and `stream.stop()` in a function.



As I'm working things out I'm failing alot in this function, and unable to call `stream.stop()`.  I can sometimes see orphaned streams writing to logs etc.



Do I need to worry about this, and if so is there anyway to get at these stranded streams and shut them down?  Eg I can't work out what the processes are to kill them in `ps -aux`  - any tips for what to look for?  Thanks.

---

## 2020-02-24 16:58:06 - strategies channel

**D C**

I did not know what slack was until this afternoon. Ive been botting for years - been aware of the github project too despite python not being "my thing" yet. Been a member of a few forums over the years (remember [http://fred77.co.uk|fred77.co.uk](http://fred77.co.uk|fred77.co.uk) ??) but this seems the best dev focused place. Even started my own telegram room to try and get some savvy people on board and reduce the twitter noise. This looks a better fit all round.

---

## 2020-02-24 16:30:55 - strategies channel

**D C**

Yes indeed. If it helps the IP horse markets in other contries pick up that would be great

---

## 2020-02-24 16:30:21 - strategies channel

**D C**

Ive sent a few videos back asking the question. Im sure TPD must have some accurate playback rendering software. I don't know much about GPS tech at all really so don't know what kind of environmental factors can affect the readings.

---

## 2020-02-24 16:18:37 - strategies channel

**liam**

i have a lot of checks that have to pass before i execute, the market can also be used to validate the feed but its never going to be perfect. Simply rounding up and playing the numbers game helps

---

## 2020-02-23 10:14:31 - general channel

**Mo**

Collecting your own only helps going forward

---

## 2020-02-21 15:02:39 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2020-02-21 14:53:25 - general channel

**Peter**

Your question did though prompt me to think that for some strategies I could stream the markets and when an interesting situation occurs then do a quick poll on my orders before responding with trades. That would transition some of my strategies in the right direction.

---

## 2020-02-21 11:00:56 - general channel

**Mo**

Respect the limits and it's hard to see how they can have a problem

---

## 2020-02-21 10:13:19 - general channel

**liam**

yep that can be a simple way to do it (its how I do it) [https://liampauling.github.io/betfair/streaming/#snap](https://liampauling.github.io/betfair/streaming/#snap)

---

## 2020-02-21 09:22:44 - general channel

**Mo**

Just a quick answer for now but nothing wrong with combining polling and streaming IMHO

---

## 2020-02-20 11:06:48 - general channel

**jb**

Thanks Peter.  After the inital untar I am indeed now using the python `bz2` to get at them and then BFLW.  I'm used to dealing with the market / event / runner etc objects as json (passing `lightweight=True` ), which is one reason I was trying more direct.  Guess I'll just have to learn to use them properly now..

---

## 2020-02-19 22:00:18 - general channel

**Peter**

But as Liam and Mo have said, it's way easier to just use the BFLW package to read them, and there's an example of that in the repo [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2020-02-19 19:33:05 - general channel

**ash**

two good starting points? --&gt;

[https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/)

[https://github.com/liampauling/betfair/blob/master/docs/quickstart.md](https://github.com/liampauling/betfair/blob/master/docs/quickstart.md)

---

## 2020-02-19 19:30:38 - general channel

**IamYou**

I have been reading betfair's dev documentation but it is frying my brain.

---

## 2020-02-19 19:29:44 - general channel

**IamYou**

So, n00b question.. How would I get the spread on some runner?

---

## 2020-02-19 19:13:48 - general channel

**Fab**

So far I’ve been using Nodejs and have only recently started playing with bflw / Python

---

## 2020-02-19 19:10:48 - general channel

**liam**

Any reason you aren’t using bflw? But yeah they are files filled with lines of json

---

## 2020-02-19 19:10:14 - general channel

**liam**

[https://liampauling.github.io/betfair/streaming/#historical|https://liampauling.github.io/betfair/streaming/#historical](https://liampauling.github.io/betfair/streaming/#historical|https://liampauling.github.io/betfair/streaming/#historical) 

---

## 2020-02-19 16:12:05 - issues channel

**Mo**

Obviously the problem is with Betfair sending junk data but this is a worrying point of failure

---

## 2020-02-19 13:54:11 - strategies channel

**James T**

I’ve just checked that there is a getAccountStatement call on the API which you could automate an iteration through. There’s an ItemClass field which might help you identify transaction charges, but without having one already, you might have trouble being able to identify it on the API. 

---

## 2020-02-18 12:01:49 - issues channel

**liam**

It allows you to do what you want with the streaming output, it is likely that this example covers all your needs (err catching + reconnect) [https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py|https://github.com/liampauling/betfair/blob/master/examples/examplestreamingerrhandling.py)

---

## 2020-02-18 08:21:20 - issues channel

**liam**

Have a read of this [https://liampauling.github.io/betfair/streaming/|https://liampauling.github.io/betfair/streaming/](https://liampauling.github.io/betfair/streaming/|https://liampauling.github.io/betfair/streaming/)

---

## 2020-02-18 04:29:31 - issues channel

**Jonatan (skyw)**

Does it still show python 2.7?

---

## 2020-02-18 01:13:41 - issues channel

**Jonatan (skyw)**

remove the venv and do

python3 -m venv venv

---

## 2020-02-18 01:12:24 - issues channel

**Jack Kaminski**

Yeh that's the issue. The venv I have on Ubuntu says it's 3.7 but --python returns 2.7

---

## 2020-02-18 01:10:09 - issues channel

**Jonatan (skyw)**

show the whole message and

output pip freeze

and python --version

---

## 2020-02-18 01:09:13 - issues channel

**Jonatan (skyw)**

different version of library or python version maybe

---

## 2020-02-17 15:10:19 - issues channel

**Jonatan (skyw)**

I looked at the commit, just curious, how come is it that decoding solved it?

---

## 2020-02-17 11:38:08 - strategies channel

**James T**

They used to have a support contact form on the developer’s site but I can’t seem to find it anymore. You can email them at [mailto:bdp@betfair.com|bdp@betfair.com](mailto:bdp@betfair.com|bdp@betfair.com), but they don’t seem to advertise that email either so maybe don’t give that out willy nilly. Neil is the main API support guy and he’s super helpful. Don’t know if you know him already or not. 

---

## 2020-02-17 11:31:07 - strategies channel

**Jonjonjon**

Ah, bdp is an email address! Neil just confirmed that my problem on the other thread is due to the geographical thing.:expressionless:

---

## 2020-02-17 11:02:53 - strategies channel

**Jonjonjon**

[@USYQKE5HN](@USYQKE5HN) By keeping a high comm rate, do you mean you can use fundamentals to help avoid the super premium charge?

---

## 2020-02-17 10:36:25 - strategies channel

**Jonjonjon**

(Apologies for having 2 acounts called Jonjonjon, one is my phone, the other is my PC. I don't know how to join them up)

---

## 2020-02-15 07:14:21 - general channel

**liam**

[@UNQGKT0CR](@UNQGKT0CR) snap might help you [https://liampauling.github.io/betfair/streaming/#snap|https://liampauling.github.io/betfair/streaming/#snap](https://liampauling.github.io/betfair/streaming/#snap|https://liampauling.github.io/betfair/streaming/#snap)

---

## 2020-02-14 23:07:05 - general channel

**Jonatan (skyw)**

I don't see how that would be a problem, although I do not know the big  picture : )

Would be cool to hear from anyone else having the same issue solved

---

## 2020-02-14 22:41:06 - general channel

**AP**

A general question. Using the stream API, what sort of methods do people use to trigger events at certain times?

---

## 2020-02-13 19:14:49 - general channel

**klozovin**

Looking at the documentation and the XML specs for `LimitOrder` type, there's a difference what parameter is mandatory ... in that case, one should go with the XML specs, right?

---

## 2020-02-13 14:34:46 - general channel

**Peter**

which will return something like this ...

```{'elapsed_time': 0.18714308738708496,

 '_response': &lt;Response [200]&gt;,

 '_datetime_created': datetime.datetime(2020, 2, 13, 14, 31, 56, 100139),

 '_datetime_updated': datetime.datetime(2020, 2, 13, 14, 31, 56, 100139),

 '_data': {'eventTypeId': 2,

  'eventId': 29697556,

  'score': {'home': {'name': 'Aljaz Bedene',

    'score': '0',

    'halfTimeScore': '',

    'fullTimeScore': '',

    'penaltiesScore': '',

    'penaltiesSequence': [],

    'games': '4',

    'sets': '0',

    'aces': '5',

    'doubleFaults': '2',

    'gameSequence': [],

    'isServing': False,

    'highlight': False,

    'serviceBreaks': 0},

   'away': {'name': 'Stefanos Tsitsipas',

    'score': '0',

    'halfTimeScore': '',

    'fullTimeScore': '',

    'penaltiesScore': '',

    'penaltiesSequence': [],

    'games': '4',

    'sets': '0',

    'aces': '1',

    'doubleFaults': '1',

    'gameSequence': [],

    'isServing': True,

    'highlight': True,

    'playerSeed': 2,

    'serviceBreaks': 0}},

  'currentSet': 1,

  'currentGame': 9,

  'currentPoint': 1,

  'fullTimeElapsed': {'hour': 0, 'min': 37, 'sec': 2},

  'matchStatus': 'Inprogress'},

 'event_id': 29697556,

 'elapsed_regular_time': None,

 'elapsed_added_time': None,

 'event_type_id': 2,

 'match_status': 'Inprogress',

 'time_elapsed': None,

 'time_elapsed_seconds': None,

 'status': None,

 'current_day': None,

 'current_set': 1,

 'description': None,

 'match_type': None,

 'current_game': 9,

 'current_point': 1,

 'full_time_elapsed': &lt;betfairlightweight.resources.inplayserviceresources.FullTimeElapsed at 0x11d1628d0&gt;,

 'score': &lt;betfairlightweight.resources.inplayserviceresources.Score at 0x11d162a50&gt;,

 'state_of_ball': None}```

Though you would need to stitch the scores and odds data together yourself.

---

## 2020-02-11 18:22:01 - general channel

**Alex F**

INFO:betfairlightweight.streaming.stream:[Stream: HISTORICAL]: "MarketStream" created

INFO:betfairlightweight.streaming.stream:[MarketStream: HISTORICAL] 1.166912198 added, 1 markets in cache

[&lt;MarketBook&gt;]

---

## 2020-02-11 18:18:40 - general channel

**Alex F**

i do not understand the question :confused:

---

## 2020-02-09 20:21:18 - general channel

**Jonjonjon**

Apologies for a noob question, but were all GB races cancelled today?

---

## 2020-02-08 12:40:41 - general channel

**Mo**

As for anything else, just have a go and let us know if you have any questions

---

## 2020-02-08 12:30:23 - general channel

**Mo**

That's an interesting question. Obviously with e.g. `boto3` you could automate the creation and teardown of an instance that would only need to run between those hours

---

## 2020-02-08 12:29:32 - general channel

**JK**

Thanks for all your help

---

## 2020-02-08 12:08:13 - general channel

**JK**

I have seen that example, it's really helpful. I am confused about the "clk". What is this?

---

## 2020-02-08 12:07:24 - general channel

**Mo**

Try looking at this example instead: [https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2020-02-08 12:06:14 - general channel

**JK**

Oh i didnt realise that, that's so good! Takes away a lot of the hard work. I ran this example [https://github.com/liampauling/betfair/blob/task/version-2.0/examples/examplestreamingerrhandling.py](https://github.com/liampauling/betfair/blob/task/version-2.0/examples/examplestreamingerrhandling.py)

I'm not quite sure how to get started. My goal is to be able to read in odds, market ids and selection ids from a csv, and then place kill or fill bets within a few mins before start time for racing markets if my odds are different to the market odds. Then, if I dont get matched, to put orders at the top of the queue, and if those dont get matched, to take BSP. I feel like it'd be relatively easy to implement without the stream, but am pretty stuck as to how to implement it with the stream. Would I have a script that runs 24/7 and continuously searches for upcoming markets (say within the next 5 mins), and then if it finds any, adds them to the listener? Does the listener automatically disconnect from markets when they have closed? So many questions! haha

---

## 2020-02-08 11:44:29 - general channel

**JK**

Cheers, and sorry for the nooby questions

---

## 2020-02-08 11:44:23 - general channel

**JK**

Hey guys, love the library. Thanks so much, it is an enormous help. I am just wondering how you guys get started with the stream? I am able to print all the market updates using the example scripts, but am unsure how to start off.



Obviously to begin I need a snapshot of the market. Is the idea that I get a snapshot of the market, and then add the changes I receive from the stream to my snapshot? How would I do this? Also, how do you manage your orders effectively?

---

## 2020-02-07 17:41:25 - issues channel

**Jonatan (skyw)**

Yeah it just feels like it should able to read it without any problem, it's not that much data oh well :slightly_smiling_face:

---

## 2020-02-07 17:36:45 - issues channel

**Jonatan (skyw)**

Any tips on how to prevent con=True updates, tried increasing buffer size



This is just reading from socket without doing any processing , tried both in cloud and at good computer, cpu  utilizationis very low

---

## 2020-02-06 19:58:42 - issues channel

**liam**

I wonder if we should make the c based libraries optional defaulting to python, can see them being a constant issue if win10 doesn’t support by default 

---

## 2020-02-06 18:44:32 - issues channel

**Mo**

I think the Betfair documentation says where the you can find it

---

## 2020-02-06 18:43:38 - issues channel

**Mo**

You copied that from the Betfair documentation?

---

## 2020-02-06 18:10:18 - issues channel

**Alex F**

i actually did that before asking the question, turned out i typed openssql and thats the reason it did not work

---

## 2020-02-06 18:07:16 - issues channel

**Alex F**

well, yes, if you could help me out with the ssl cert, that would be great

---

## 2020-02-06 17:11:25 - issues channel

**hugo**

looks like a python2 vs 3 thing

---

## 2020-02-06 12:10:30 - general channel

**Mo**

Use streaming to confirm but they're probably just cancelling and reposting

---

## 2020-02-06 12:09:19 - general channel

**jhaa**

I am using the http requests, not streaming

---

## 2020-02-02 19:02:24 - general channel

**Jonatan (skyw)**

[@UBS7QANF3](@UBS7QANF3) Do you know what segmented data looks like? Is it just to concat each message until \r\n?, could not find in documentation and have not seen one ...

---

## 2020-02-01 19:17:53 - general channel

**Mo**

No problem :+1:

---

## 2020-02-01 19:10:10 - general channel

**bting91**

Trying to print out asian handicap pricing with streaming API, however some of the rows dont have a handicap atttached to them

---

## 2020-01-31 14:43:20 - issues channel

**Gustav Molander**

Yes the default is 2.7, but i tried changing the default with 2 different methods, and other programs such as brew are finding the 3.7 just fine. Do you think this is a big problem?

---

## 2020-01-31 14:41:25 - issues channel

**hugo**

[@U92CASP1B](@U92CASP1B) it's very common for python 3 to be accessed using `python3` and for python 2 to be just `python`

---

## 2020-01-31 14:40:27 - issues channel

**Jonatan (skyw)**

type python --version

---

## 2020-01-31 14:39:28 - issues channel

**Jonatan (skyw)**

sorry between those python -m

and pip -r requriements



source venv/bin/activate

---

## 2020-01-31 14:34:38 - issues channel

**Jonatan (skyw)**

in requirements.txt



betfairlightweight

---

## 2020-01-29 20:22:14 - general channel

**Mo**

Offline streaming documentation: [https://docs.developer.betfair.com/download/attachments/6094862/ExchangeStreamAPI-March2018.pdf?version=3&amp;modificationDate=1534331876000&amp;api=v2|https://docs.developer.betfair.com/download/attachments/6094862/ExchangeStreamAPI-March2018.pdf?version=3&amp;modificationDate=1534331876000&amp;api=v2](https://docs.developer.betfair.com/download/attachments/6094862/ExchangeStreamAPI-March2018.pdf?version=3&amp;modificationDate=1534331876000&amp;api=v2|https://docs.developer.betfair.com/download/attachments/6094862/ExchangeStreamAPI-March2018.pdf?version=3&amp;modificationDate=1534331876000&amp;api=v2) might be easier to search

---

## 2020-01-29 20:19:19 - general channel

**Mo**

There is a lot of useful information in the documentation

---

## 2020-01-29 20:08:43 - general channel

**bting91**

market_data_filter = streaming_market_data_filter(

        fields=["EX_MARKET_DEF", "EX_ALL_OFFERS"],

    )

---

## 2020-01-29 20:08:21 - general channel

**bting91**

so ive got this from streaming api



{'atb': [[1.34, 147.04]], 'atl': [[1.5, 49.75]], 'id': 47999, 'hc': -0.25}

{'atb': [[1.18, 277.58]], 'atl': [[1.26, 49.75]], 'id': 47999, 'hc': 0.25}

{'atb': [[1.06, 833.08]], 'atl': [[1.09, 49.95]], 'id': 48224, 'hc': 3.75}

{'atb': [[12.37, 4.31]], 'atl': [[17.04, 49.88]], 'id': 47999, 'hc': -3.75}

{'atb': [[4.87, 12.81]], 'atl': [[6.42, 49.75]], 'id': 48224, 'hc': -0.25}

---

## 2020-01-29 15:58:53 - general channel

**bting91**

who do we contact to get the limit of 200 moved from the streaming API?

---

## 2020-01-29 11:49:15 - general channel

**Tom**

That’s seems just what I was looking for Fabio - thanks very much for your help ! 

---

## 2020-01-29 11:41:30 - general channel

**Fab**

```# The function

def dutch_calculator(selections, total_stake):



    book = 0

    for s in selections:

        book += 100 / s["odds"]



    for s in selections:

        s["stake"] = total_stake * 100 / s["odds"] / book

        s["stake"] = round(s["stake"], 2)



    return selections



# How to use it

selections = []

selections.append({"odds": 3.50,})

selections.append({"odds": 4.50,})

selections.append({"odds": 5.50,})

selections = dutch_calculator(selections, 100)



# Now the selection list contains dutching stake for each selection

import json

print(json.dumps(selections, indent=4))```

---

## 2020-01-29 09:20:38 - general channel

**Tom**

Long shot but don’t suppose anyone has done any work on writing a python function for dutching a market ? 

---

## 2020-01-28 14:23:14 - issues channel

**Jonatan (skyw)**

I use this channel as questions/suggestions for V2,



Instead of returning a list of runners, could we not return a mapping instead,  like sort_priority -&gt; runner



Is there any reason that it's a list?

---

## 2020-01-28 07:56:38 - general channel

**Mo**

I'm not sure I entirely understand your question but I don't see how you can make any assumption about the number of updates as that will depend on activity in the market?

---

## 2020-01-27 15:34:36 - issues channel

**liam**

first assumption is that its betfair doing it, bflw doesn't agg, simply sends what it gets whenever it gets it

---

## 2020-01-27 15:23:47 - issues channel

**Unknown**

Another, weird question,



I parse the data from streaming without betfairlightweight and compared them and wonder for another behavior.



This is a sequence  from mine above, and betfairlightweight below

It seems that some updates are aggregated with betfairlightweight.



This is surely something i am missing, but I think it's better to ask If there eventually would be something wrong.



cheers

---

## 2020-01-27 13:07:51 - general channel

**liam**

Yeah I’ll add it to the list, betfairlightweight is such an abstraction from the schema I don’t think it would work 

---

## 2020-01-27 13:06:32 - general channel

**Jonatan (skyw)**

from the betfair  streaming exchange schema

---

## 2020-01-27 12:29:52 - general channel

**klozovin**

How's your experience with Python typing, especially when retrofitting an existing codebase? How useful is it? Do you use editor/IDE that can use typing for intellisense?

---

## 2020-01-26 22:27:08 - general channel

**William**

Solved thank you

---

## 2020-01-26 21:38:44 - general channel

**William**

2020-01-27 08:38:27,977 | INFO | betfairlightweight version: 0.0.0b7 | run.py | run

2020-01-27 08:38:27,977 | INFO | flumine version: 0.7.0 | run.py | run

2020-01-27 08:38:27,977 | INFO | Recorder created 16d0d392 | recorder.py | recorder

2020-01-27 08:38:27,978 | INFO | Starting stream: 1000.0 | flumine.py | flumine

&lt;Flumine [not running]&gt;

---

## 2020-01-26 21:38:42 - general channel

**William**

All im getting out of flumine is

---

## 2020-01-21 14:06:49 - issues channel

**Jonatan (skyw)**

Not really an Issue,  but related to the asyncio part, I created an example taking the network part out of BetfairStreamer and implemented it using asyncio instead.



[https://github.com/almenjonatan/asynclightweightexample](https://github.com/almenjonatan/asynclightweightexample)



I wanted to learn asyncio, so are probably some fualts, but maybe some piece might be helpful for async support.

---

## 2020-01-21 10:18:51 - general channel

**Elliott Johnston**

Hey guys, I am a front end developer, looking to get some help on an app I’m developing using the Python API. I am doing alright however think it would be good to get a second opinion on how i’m setting stuff up. Send me a message if you think you’d be able to assist

---

## 2020-01-20 18:21:10 - general channel

**liam**

[@USWDY5P7G](@USWDY5P7G) I am creating a new site for some documentation and I think you have just written the opening paragraph for the streaming part :grinning:

---

## 2020-01-20 15:46:07 - general channel

**Jonatan (skyw)**

With the library it is very easy to start with streaming, it's faster and "standard" if you want to get updates. I think that query different end points has it use cases but if you intend to get updates as they arrive streaming is the way to go.

---

## 2020-01-20 15:27:39 - general channel

**bting91**

how come you guys use streaming instead of just polling the different endpoints

---

## 2020-01-20 13:47:39 - general channel

**Rory**

support for competition ids on the streaming service would have been ideal

---

## 2020-01-20 13:47:20 - general channel

**Rory**

I subscribe to soccer markets across 11 leagues ... but the best you can do with streaming is either by country code which gives too many markets ... or by just the events you're interested in but of course the issue there is you get no new markets as they appear

---

## 2020-01-20 11:55:47 - general channel

**Mo**

Whether they will remove it or not is another question :wink:

---

## 2020-01-20 08:24:35 - general channel

**liam**

[@U92CASP1B](@U92CASP1B) restriction of how streaming works, you need to be less restrictive on your filter and just ignore anything you don't want

---

## 2020-01-19 23:39:57 - general channel

**bting91**

is there any reason to be using streaming instead

---

## 2020-01-19 23:38:42 - general channel

**Jonatan (skyw)**

thought you had streaming API, looks like ex should be exchange

---

## 2020-01-19 23:27:56 - general channel

**Jonatan (skyw)**

Tried another approach, using the hidden variable _socket in Flumine and use that for resubscribing.

---

## 2020-01-19 22:16:46 - general channel

**Jonatan (skyw)**

If one were to add new market ids to flumine, what is the best way to do it? Right now I do a full restart and add the new markets with the old ones.

---

## 2020-01-19 01:56:30 - general channel

**Jonatan (skyw)**

[https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listMarketCatalogue](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listMarketCatalogue)



list_market_catalogue in the betfairlightweight

---

## 2020-01-17 17:00:52 - issues channel

**Jonatan (skyw)**

looks like your not having the correct PYTHONPATH env set, how are you running it?

---

## 2020-01-17 13:43:38 - general channel

**Mo**

Use `streaming_order_filter` [https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/filters.py#L41-L55](https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/filters.py#L41-L55) in conjunction with `subscribe_to_orders` [https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/streaming/betfairstream.py#L134-L164](https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/streaming/betfairstream.py#L134-L164)

---

## 2020-01-17 13:16:57 - general channel

**Leon**

does anyone know how to access the OrderSubscriptionMessage through BFLW (in the streaming API)?



```market_filter = streaming_market_filter(

    event_type_ids=['1'], # added football

    event_ids=[29651486],

    market_types=[ 'MATCH_ODDS'],   

)```

 I've guessed it may be through the market_filter (as above) but can't work out the correct syntax - maybe something like order_filter= ? I would like to track unmatched orders to find out when they are matched. Cheers

---

## 2020-01-17 02:13:30 - general channel

**AP**

Should runner name always appear in the market definition section of the streaming API?

---

## 2020-01-16 21:48:51 - general channel

**Mo**

Should be in the marketDefinition in the streaming data

---

## 2020-01-13 15:42:44 - general channel

**liam**

No, catalogue disappears, your only left with the market definition in the streaming MarketBook. RaceCard goes back a few months though 

---

## 2020-01-13 00:08:13 - general channel

**Mo**

Wow these are really existential questions

---

## 2020-01-11 17:40:49 - general channel

**Jonatan (skyw)**

no problem, hope it goes well!

---

## 2020-01-11 16:46:22 - general channel

**AP**

I think writing to files/DBs becomes problematic with parallel processing 

---

## 2020-01-10 14:59:04 - issues channel

**oliver**

I have had a look at that link before and frankly it goes straight over my head! The relevant section (lines 211 to 231) is structured differently to how I have written my code and I don't know/understand how to convert it.

---

## 2020-01-08 17:03:34 - general channel

**liam**

flumine is a data recorder, allows you to record the data betfair expect you to pay a lot for

---

## 2020-01-08 15:22:23 - general channel

**Kai**

I think he means greening up across different selections, not individually on each selection. That is in the general case a rather complicated mathematical problem, especially if some selections have poor liquidity

---

## 2020-01-06 20:31:35 - issues channel

**liam**

[https://docs.python.org/3/library/threading.html|https://docs.python.org/3/library/threading.html](https://docs.python.org/3/library/threading.html|https://docs.python.org/3/library/threading.html)

---

## 2020-01-06 20:31:02 - issues channel

**liam**

No, I recommend reading up on threads and understanding the flumine code

---

## 2020-01-06 20:29:55 - issues channel

**DonJ80**

```Do mean like this 

try:

       # start stream

       stream.start(async_=False)

except:

        subscribe_to_markets_function() 

        #this stops the stream, subscribe tomarket and then start the stream   with async =False again.



    while datetime.datetime.now() &lt; t:

        

            market_books = output_queue.get()

            print(market_books)



            for market_book in market_books:

                print(

                    market_book.streaming_update, 

                    market_book.publish_time,  

                )

       

    t = t + datetime.timedelta(hours=12)```



---

## 2020-01-06 20:16:44 - issues channel

**liam**

[https://github.com/liampauling/flumine/blob/aedf15492e0a5e3e366c9416c5cac95e600ddf18/flumine/flumine.py#L78|https://github.com/liampauling/flumine/blob/aedf15492e0a5e3e366c9416c5cac95e600ddf18/flumine/flumine.py#L78](https://github.com/liampauling/flumine/blob/aedf15492e0a5e3e366c9416c5cac95e600ddf18/flumine/flumine.py#L78|https://github.com/liampauling/flumine/blob/aedf15492e0a5e3e366c9416c5cac95e600ddf18/flumine/flumine.py#L78)

---

## 2020-01-05 21:21:19 - general channel

**Alex A**

Yeah, tried with betfairlightweight and logged in fine.

---

## 2020-01-05 21:12:18 - general channel

**Alex A**

I’ve been planning to, just figured for now it would be easier to just write my own code to login than go through betfairlightweight.

---

## 2020-01-05 21:11:28 - general channel

**Mo**

Why not use betfairlightweight?

---

## 2020-01-05 21:10:36 - general channel

**Alex A**

Making a python post request to [https://identitysso-cert.betfair.com/api/certlogin|https://identitysso-cert.betfair.com/api/certlogin](https://identitysso-cert.betfair.com/api/certlogin|https://identitysso-cert.betfair.com/api/certlogin) with my login details and certificate.

---

## 2020-01-05 19:40:50 - general channel

**Ian**

Hi all - just wondering if I'm missing something insanely simple here, perhaps? I cannot have Python open these files at all, using bz2 or anyother lib. They extract just find in Windows using 7-zip

---

## 2020-01-03 15:42:13 - general channel

**Chris**

You mean using a separate script? completely apart from flumine? Thats what I’m doing at the moment, I was just wondering whether I was missing some functionality from within flumine

---

## 2020-01-03 15:27:50 - general channel

**Mo**

Isn't flumine just scraping the streaming data? Use the marketDefinition?

---

## 2020-01-03 15:21:05 - general channel

**Chris**

does anyone know a way you could identify events using the data flumine provides? Or do you have to just download catalogue data seperately (what im currrently doing).. Would be nice to link external stats to the markets

---

## 2020-01-02 22:47:17 - general channel

**Justin Fisher**

:wave:  evening. More related to [@U4H19D1D2](@U4H19D1D2) and #flumine but Im currently using a `delayed stream api key`  and flumine to store some delicious data but... because its delayed Im getting publish times (obviously) corresponding to the  `single message every 3 minutes`  Id like some more granular data and remembered this:

&gt;  I don't know. As above, ask [@U4H19D1D2](@U4H19D1D2) and he can get you an application key for free

---

## 2020-01-02 10:25:47 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L117|https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L117](https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L117|https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L117)

---

## 2020-01-01 18:13:24 - general channel

**Rob**

Hi guys, no better answer than "use certs" on the question "how to reuse session token when using login interactive?" ? :smile: Thanks a lot

---

## 2019-12-31 11:19:22 - random channel

**PeterLe**

[@UBS7QANF3](@UBS7QANF3) Hi Mo, thanks for adding more dates to the potential meetup; Im going to be at the other end UK in Edinburgh on business when the majority of you guys can make it, so Ill probably come to one of the future meetups. Just as an aside; if anyone is based in and around manchester I thought I may go to a local Python meetup that is being held 20th Jan In Manchester. Its not specific to Betfairlightweight, but Python in general. If so drop me a message. Its always good to meet like minded people. thanks (PS Happy New Year All !) :grinning:

---

## 2019-12-31 11:13:51 - general channel

**Mo**

Otherwise, you have access to all of the source code, why not just take a look? [https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/filters.py#L71|https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/filters.py#L71](https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/filters.py#L71|https://github.com/liampauling/betfair/blob/f41260e759b27ceb1b91444cb7fd626c8a5acfcc/betfairlightweight/filters.py#L71)

---

## 2019-12-29 20:17:51 - random channel

**Mo**

This example shows you how to get a market catalogue and iterate through the runners, accessing the selection ID and runner name: [https://github.com/liampauling/betfair/blob/master/examples/exampleone.py](https://github.com/liampauling/betfair/blob/master/examples/exampleone.py)

---

## 2019-12-28 13:08:55 - general channel

**Mo**

There's no need to involve 7Zip or any other manual process. Use the `bz2` Python library

---

## 2019-12-28 12:39:06 - general channel

**Mo**

1. Good question, I don't know. As above, ask [@U4H19D1D2](@U4H19D1D2) and he can get you an application key for free

2. There are no tar files involved when using this API. You get a list of individual bzip2 files that you can download

Any reason you want to start with the historic API rather than e.g. this example? [https://github.com/liampauling/betfair/blob/master/examples/exampleone.py](https://github.com/liampauling/betfair/blob/master/examples/exampleone.py)

---

## 2019-12-22 18:51:37 - general channel

**Leon**

thanks Tom, I didn't think of Wikipedia, I've been searching for betfair specific details. That answers my questions (and also shows that the '-' represents a break in years )

---

## 2019-12-22 18:39:02 - general channel

**Leon**

Does anyone use the form from runner.metadata? An example of how it looks is 8722118 with each digit representing the place the horse finished in each of its last races. I have a few questions about this data I've not been able to find an answer for

1. I assume this is only if they finish 1-9 (otherwise it would be impossible to tell if e.g. 13 meant they finished 13th or 1st and 3rd)

2. I've come across some characters returned that I am unsure what they mean

'0' does this mean they didn't finish or something else?

'-' any ideas?

Any help greatly appreciated

---

## 2019-12-20 22:55:19 - issues channel

**Jonatan (skyw)**

Documentation for Flumine, first one did not work for me.

```settings={  # passed to betfairlightweight

        "username": "test",

        "password": "test",

        "app_key": "test",

        "certificate_login": False,

    }



=&gt;



settings={  # passed to betfairlightweight

        betfairlightweight: {

            "username": "test",

            "password": "test",

            "app_key": "test",

        },

        "certificate_login": False,

    }```

---

## 2019-12-20 16:58:01 - general channel

**Rory**

if starting out now, I'd follow this



[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1576860830042900](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1576860830042900)

---

## 2019-12-20 16:51:25 - general channel

**Rory**

you could probably infer the score up to a point e.g. if Man City start at 1.12 vs say Brighton, then go to 1.03, 1.02, 1.01 you can assume they have at least scored ... problem is you won't know whether that's 2-0, 3-0, 4-0, 5-0, etc but do you care?

---

## 2019-12-20 14:56:18 - general channel

**Unknown**

flumine/logging - how does everyone log flumine - to screen or file? i've been fine with screen but would now like to persist the logs - and include time? at the moment this is what I see:

---

## 2019-12-19 14:41:46 - general channel

**Newbie99**

That's a good point actually, simple may well be better, although personally I am quite keen to play around with no-sql databases as I've never tried before!

---

## 2019-12-19 14:29:53 - general channel

**liam**

Recording the raw data through flumine, any order / market data sent to MySQL for analysis and everything else stored in ram 

---

## 2019-12-19 14:28:44 - general channel

**liam**

Why are you bothering? Just store everything in python / classes / dictionaries

---

## 2019-12-18 13:03:00 - general channel

**Mo**

Yeah either Redis or python object depending on your use case

---

## 2019-12-15 13:10:09 - general channel

**Ian**

It is really apparent in 3td party manual apps such as Geeks Toy and Bet Angel - using polling or streaming - not just me but every trader in the groups I’m in 

---

## 2019-12-15 03:41:15 - general channel

**fjt1973**

Ignore the above... it appears even though the curl command doesn't work for me put in in a Python Script and it does :thinking_face::laughing::astonished:

---

## 2019-12-14 09:19:42 - general channel

**liam**

Competition ids can’t be used in streaming 

---

## 2019-12-14 09:18:34 - general channel

**Ian**

Morning - does flumine respect competitionIds passed in the market filter? 



Constructed the filter and it is running but returning markets from all events from event type/country/market type I’ve specified 

---

## 2019-12-11 12:06:11 - general channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2019-12-11 12:00:15 - general channel

**bting91**

I'm looking to just pull all current odds for all matches and games, but I can't quite see how to do this through the documentation, does anyone know which API calls i'd be looking to make&gt;

---

## 2019-12-07 11:40:40 - general channel

**JonJonJon**

Perhaps this is what happened...



I use the market version paramter for my back bets to guarantee they happen before the race starts. I don't use that for exits as I just want to get out. Maybe Betfair had a problem settting the inplay value to true on time, which would invalidate my entry. But then my exir would stillbe valid. But if that is the case, how can I protect myself from these rare situations?

---

## 2019-12-06 09:38:12 - general channel

**Mo**

This feels like a basic question I should really know the answer to... How do I get cancelled orders for markets which haven't settled yet?

---

## 2019-12-03 18:06:39 - general channel

**Chris**

[@U4H19D1D2](@U4H19D1D2) No, I've adapted most of what I've got from here; [https://github.com/liampauling/betfair/blob/master/examples/](https://github.com/liampauling/betfair/blob/master/examples/) - not a python dev (or a coder at all, really, a sysadmin)

---

## 2019-12-03 10:37:38 - general channel

**ash**

Sorry for yet another presumably basic question, I do appreciate the opportunity to ask them.

---

## 2019-12-02 14:32:57 - general channel

**bogdan**

Hello,



Thanks [@U4H19D1D2](@U4H19D1D2) for the new endpoint.



I have two question instead: where did you find the first part of the link "[https://apieds.betfair.com/api/eds/racing-info/v1](https://apieds.betfair.com/api/eds/racing-info/v1)" using the dev tools in chrome I don't find the "racing-info" part. In the browser I cannot see last races info for horses using [http://betfair.com|betfair.com](http://betfair.com|betfair.com) as a . I can do that only on the android app.



The second question: The link combined with marketId return all the info I need including last races info. I can get this info somehow using betfairlightweight or I have to parse the json returned by this link?



Thanks

---

## 2019-12-01 16:16:26 - general channel

**Rory**

```docker run -d

    -e username='JohnSmith'

    -e JohnSmithpassword='beer'

    -e JohnSmith='morebeer'

    -e STREAM_TYPE='market'

    -e MARKET_FILTER='{"eventTypeIds": ["7"], "countryCodes": ["GB", "IE"], "marketTypes": ["WIN"]}'

    -v /certs:/certs

    -v flumine_data:/data

    liampauling/flumine:latest```

---

## 2019-12-01 16:16:21 - general channel

**Rory**

quick question ... is the docker command still accurate

---

## 2019-12-01 16:15:58 - general channel

**Rory**

just started looking at flumine (looks great btw) ...

---

## 2019-11-30 22:52:58 - general channel

**Jonjonjon**

If I have a Python script that uses a Market Book Stream and Order Book stream, is it important to call .close() on them when the script ends?

---

## 2019-11-28 13:47:34 - issues channel

**Evaldas**

thanks for help guys

---

## 2019-11-28 13:15:18 - issues channel

**hugo**

you want `python3 run.py 2&gt;&amp;1 &gt;&gt; log.file`

---

## 2019-11-28 13:03:51 - issues channel

**Evaldas**

i run my bots using: python3 run.py &gt;&gt; log.file to catch everything, but there is nothing

---

## 2019-11-27 12:04:54 - general channel

**Mo**

Get it from the marketDefinition in the streaming data. It has a settledTime field

---

## 2019-11-26 09:20:10 - general channel

**ash**

woke up this morning to a bunch of

`WARNING:betfairlightweight.streaming.listener:[Subscription: 1] status: 503`

not seen that before?

---

## 2019-11-25 15:17:16 - random channel

**PeterLe**

hi Mo, yes that looks fair as that date has the majority. I only travel down to London (from Manchester)  a couple of times a month, so ill try and make the next one. (I might even be able to better under the language a bit better then anyway, as I can imagine the Python discussion would sound like a foreign language to me currently :grinning: thanks for organising too

---

## 2019-11-23 17:25:59 - general channel

**bogdan**

[@U4H19D1D2](@U4H19D1D2) thank you for help! :slightly_smiling_face:

---

## 2019-11-22 18:18:06 - general channel

**bogdan**

I tried to find them in the documentation, but I cannot find in the metadata

---

## 2019-11-19 11:26:29 - general channel

**Mo**

Welcome. Sorry I don’t have a good answer to your question. Getting (good) data feeds is always a problem, primarily the cost

---

## 2019-11-19 11:25:16 - general channel

**Cagdas Yetkin**

anyway, thank you for the `betfairlightweight` library. i use it and it works great. aloha

---

## 2019-11-17 21:47:34 - general channel

**JonJonJon**

The orders do appear to have ascending bet ids from my observations. But I want see if there is any documentation to confirm this,

---

## 2019-11-15 21:42:29 - general channel

**JonJonJon**

Are betids always ascending? I need to sort orders by placed date, but am having problems when they are placed in the same second.

---

## 2019-11-15 20:35:50 - general channel

**Ptolemy**

thanks Liam, I'll take a look at it and then get betfairlightweight downloaded at some point.

---

## 2019-11-15 16:07:10 - general channel

**liam**

Welcome, I learnt using [https://www.codecademy.com/](https://www.codecademy.com/) and then get stuck straight into the API but looks like they now charge for python3, PyCharm is great to learn on as well

---

## 2019-11-14 22:21:15 - general channel

**bogdan**

Thank you very much for all your help!

---

## 2019-11-14 22:08:41 - general channel

**Mo**

You should familiarise yourself with the API documentation: [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listMarketCatalogue](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/listMarketCatalogue)

---

## 2019-11-14 21:27:55 - general channel

**liam**

 market_catalogue_filter = betfairlightweight.filters.market_filter(market_type_codes=[‘WIN’], venues=[‘Kyneton’])

---

## 2019-11-14 21:04:40 - general channel

**Unknown**

Using the python API how can I list all horse markets start time

---

## 2019-11-13 08:27:56 - general channel

**liam**

Yeah it should be settings={“betfairlightweight”: {“username......

---

## 2019-11-13 07:27:28 - general channel

**Mo**

This looks like a mismatch between the documentation and the code to me but I've never used flumine so best to see what [@U4H19D1D2](@U4H19D1D2) says

---

## 2019-11-13 07:22:35 - general channel

**Mo**

So `settings.get("betfairlightweight")` returns `None`

---

## 2019-11-13 07:22:17 - general channel

**Mo**

`settings` doesn't have a `betfairlightweight` key

---

## 2019-11-10 08:31:58 - general channel

**keoki**

Thank you [@UBS7QANF3](@UBS7QANF3)! That's really helpful, thank you.

---

## 2019-11-10 08:10:40 - general channel

**Mo**

The streaming API has a default subscription limit of 200 markets but you can ask Betfair to remove that

---

## 2019-11-08 17:15:13 - general channel

**jhaa**

unsure how to get the actual request from that line of code

---

## 2019-11-06 12:01:15 - general channel

**liam**

Tableau when I am being lazy and then python / matplotlib / bokeh 

---

## 2019-11-03 19:05:50 - general channel

**Chris**

aaah, could I create a bucket called flumine?

---

## 2019-11-03 19:05:23 - general channel

**liam**

It’s hard coded to flumine which I own 

---

## 2019-11-03 19:04:47 - general channel

**Mo**

Sounds like a problem with your bucket permissions

---

## 2019-11-03 16:38:57 - general channel

**Chris**

hey does anyone know how to pass s3 credentials to a container if using the flumine with docker?

---

## 2019-10-27 17:48:11 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L81](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L81)

---

## 2019-10-19 22:22:28 - general channel

**JonJonJon**

Does anyone here store the results from list_cleared_orders in a database?

---

## 2019-10-04 12:09:48 - general channel

**Newbie99**

ah okay cool yep that makes sense actually, I will look to do similar, cool tks that has helped a lot!

---

## 2019-10-04 12:01:20 - general channel

**liam**

that is all i do after an execution, i then wait for an order streaming update

---

## 2019-10-04 11:54:59 - general channel

**Newbie99**

maybe I'm being a bit dumb here...but wouldn't the same issue be problematic still?



i.e. if the status is set to pending (which makes sense and I sort of do similar in a far messier way), then an update comes through, how do you determine that update should be ignored? As that first update may already include the pending order (and then the status is no longer pending)...however sometimes it might not, in which case you would want the order to remain as pending until the next update?

---

## 2019-10-04 11:50:09 - general channel

**Newbie99**

But are your risk calcs not off for a bit then (maybe my logic is flawed here), this is the process flow I have now:





1) Market moves to = y or position size = z

2) Place / cancel order is triggered

3) Place / cancel order success message comes back (tbh arguably this is irrelevant its the next bit thats key)

4) Update local market / order books with risk calcs

5) Streaming update comes and:

a) Is fine as it already includes the updated orders

b) Isn't fine and over writes them (as it was sent milliseconds after/before the place/cancel order request I guess)



If I rely on streaming alone, then when 5b occurs, I would then effectively be trying to place/cancel the order again, as the risk calcs would suggest it was necessary.



Hence my issue, I get the point about ignoring the actual cancel / place message that's fine, but how do you account for a streaming update that doesn't yet have the updated order info in (short of ignoring the first streaming update after placing/cancelling an order or ignoring for 0.x seconds...neither of which are ideal)?

---

## 2019-10-04 11:41:49 - general channel

**liam**

i ignore the place/cancel/replace/update response and go off streaming

---

## 2019-10-04 09:41:19 - general channel

**Newbie99**

ah okay cool, so I will ignore async for now...



But how do people get round this?



I did think, as JonJonJon suggests using timestamps, but the market update has a greater level of precision (down to milliseconds), whereas cancel.cancelled_date only appears to show down to seconds, so it doesn't appear that option is viable.



The only options I could come up with are:



I could ignore any streaming updates within 0.5 seconds

Overwrite the next streaming update with the position info post cancellation for just that runner



Neither are ideal though, so does anyone have a smarter solution?

---

## 2019-10-04 08:48:54 - general channel

**liam**

async in streaming will be going in v2 as it causes a lot of confusion 

---

## 2019-10-04 08:12:05 - general channel

**Mo**

I was referring to the async parameter to placeOrders, nothing to do with streaming

---

## 2019-10-03 23:47:54 - general channel

**JonJonJon**

[@UFTBRB3F1](@UFTBRB3F1) regarding why it hangs if you take out, look at [https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py). The code shows that async is False by default, and that the code will enter a loop that keepa going until the socket closes.

---

## 2019-10-03 23:27:30 - general channel

**JonJonJon**

[@UFTBRB3F1](@UFTBRB3F1). There is a published time on the order and market book data. Could that help? I plan on testing those this weekend.

---

## 2019-10-03 19:01:18 - general channel

**Newbie99**

I'm having a similar issue, but I'm hoping its because I don't understand exactly what the async parameter does!



If I cancel an order, I get the Success message back and temporarily store the updated order details locally.



However if I receive a streaming update fractionally after the cancel success message comes back it contains the old order details, which then over writes my local risk calcs...obviously causing plenty of problems!



I saw below the async parameter was mentioned, which I have set as follows:



```order_stream.start(async_=True)

market_stream.start(async_=True)```



If I take out the async_=True then it just seems to hang and never gets past that point in the code.



So, is there something obvious I'm missing here, as I'm a bit confused?

---

## 2019-10-01 09:40:43 - general channel

**OT**

although mollybet api documentation looked promising too, i never got to actually use it.

---

## 2019-10-01 09:38:49 - general channel

**liam**

There were some very poor design decisions from them when it comes to streaming, not including competition id (something due to their internals making it tricky) and naming the filters differently is really annoying 

---

## 2019-10-01 09:02:20 - general channel

**OT**

subscription by competitionId would solve all of my problems :slightly_smiling_face:

---

## 2019-10-01 09:01:50 - general channel

**liam**

Ask betfair to boost it, mentioning the library will help

---

## 2019-10-01 09:01:12 - general channel

**OT**

basically I am subscribing by markets, I have to regularly push through a list of marketIds. I can't find a way to subscribe more broadly without hitting the data/subscription limit. at least, not with this current package. I've solved it with my new one.

---

## 2019-10-01 08:58:59 - general channel

**OT**

thanks, I'll check out flumine

---

## 2019-10-01 08:55:34 - general channel

**liam**

Have a look at the flumine code for a simple way to handle it 

---

## 2019-09-29 22:39:46 - general channel

**JonJonJon**

With the streaming api, is it possible to filter for orders for a given market?

---

## 2019-09-27 15:58:05 - general channel

**hugo**

any market update after the order update that was received on the streaming api would definitely contain your order.

---

## 2019-09-27 15:51:51 - general channel

**JonJonJon**

Suppose I place an order.



Then a market book updates via the streaming api.



Is there a chance that the market book won't contain (whether the order is sitting in the order book, or has removed size from the order book)  the order that I just placed? Is there a way to check whether or not my order has reached the book yet?

---

## 2019-09-27 14:33:03 - general channel

**hugo**

Dependencies



    Requests now supports urllib3 v1.25.2. (note: 1.25.0 and 1.25.1 are incompatible)



Deprecations



    Requests has officially stopped support for Python 3.4.

---

## 2019-09-25 18:18:46 - general channel

**JonJonJon**

A good api won't make you money, but it can help stop you losing it. I once worked with a guy who had an algo system that was very hard to turn off. Then he went on holiday butbinsisted we keep it running. Then it started losing money and we didn't have a good way to turn it off.



Anyway, there's no point arguing this. Some people will find a custom UI useful. Some won't.

---

## 2019-09-22 15:43:12 - general channel

**Mo**

Someone else will have to answer your first question, I don't know myself

---

## 2019-09-22 15:42:25 - general channel

**ash**

Thankyou. I need to streamline in then, I also need to get better at not being lazy and looking through the betfairlightweight code, apologies for that.

---

## 2019-09-21 12:40:40 - issues channel

**Justin Fisher**

maybe Im being silly :thinking_face: ... maybe the historical service is experiences issues... any help is appreciated

---

## 2019-09-18 13:40:38 - general channel

**liam**

if you care about ms you shoudn't be using python

---

## 2019-09-17 15:32:45 - general channel

**Mo**

Streaming or REST API?

---

## 2019-09-17 15:32:16 - general channel

**SDhar**

Hi - is anyone able to help with how to extract Selection names from a market? Currently Selection IDs are easily available. Alternatively, being able to map selection IDs to names would also be helpful

---

## 2019-09-16 08:36:58 - general channel

**liam**

```

while True:

    order_books = order_queue.get()

    for order_book in order_books:

        print(order_book.streaming_update)

    market_books = market_queue.get()

    for market_book in market_books:

        print(market_book.streaming_update)

```

---

## 2019-09-16 07:31:48 - general channel

**Newbie99**

I cleaned it up before as this issue persists without all my functions etc, i.e. if the while true section is:



```while True:

    order_books = order_queue.get()

    for order_book in order_books:

        print(order_book.streaming_update)

    market_books = market_queue.get()

    for market_book in market_books:

        print(market_book.streaming_update)```



The issue still persists.

---

## 2019-09-15 15:25:51 - general channel

**liam**

I don’t understand the problem / see a problem 

---

## 2019-09-15 10:32:58 - general channel

**Newbie99**

on the betfair front end it appears and then disappears, but at my end via the streaming API it appears I miss messages (sometimes), for example, here a bet I placed correctly shows up as placed and cancelled:



```{'id': '1.132099836', 'rc': [{'atl': [[3.3, 2]], 'id': 10317012}]}

{'id': '1.132099836', 'rc': [{'atl': [[3.3, 0]], 'id': 10317012}]}```



But then, trying to replicate, I only receive one side:



```{'id': '1.132099836', 'rc': [{'atb': [[44, 1.99]], 'id': 13231442}]}```



(that one was a £2 back bet @ 44, where 1p got matched), but no cancellation message

---

## 2019-09-15 10:28:00 - general channel

**Mo**

When you say problem, you mean that the bet appears in the order book but doesn't disappear when cancelled?

---

## 2019-09-15 10:21:33 - general channel

**Newbie99**

I just stripped them out, as the problem still arises using the above, so just wanted it to be super simple

---

## 2019-09-15 09:36:04 - general channel

**Mo**

Although based on the most recent example I'm not convinced that is the problem

---

## 2019-09-14 23:31:06 - general channel

**Newbie99**

I'm definitely not getting all updates still, I managed to replicate the above situation again (different runner and market just to check).



my market data filters are just as follows:



`market_data_filter = streaming_market_data_filter(

    fields=['EX_BEST_OFFERS', 'EX_MARKET_DEF', 'EX_TRADED', 'EX_LTP'])`



No reference to ladders at all, so clearly I'm doing something somewhere else...but I can't work out where!

---

## 2019-09-14 22:01:06 - general channel

**Newbie99**

out of curiosity, for this reason, does everyone just leave ladder levels as the max and just disregard whatever you don't need? I'm guessing that is probably best practice, as there's no real downside to doing so, and the other way (i.e. setting the ladder to what you were planning to use) creates problems as I've found!!

---

## 2019-09-14 21:52:39 - general channel

**Newbie99**

so that seems to have answered the question!

---

## 2019-09-14 21:45:24 - general channel

**Newbie99**

A good question...not actually sure. I will play around with the ladder_level and see if somehow I can get any differing results.



Currently orders update instantly, but the market stream updates seem sporadic and just don't appear to make any sense (I even checked if I was using the delayed key just in case)!

---

## 2019-09-14 21:41:16 - general channel

**Mo**

The main question is whether the volume available to back at 1.5 was previously 308.6?

---

## 2019-09-14 21:06:30 - general channel

**Newbie99**

It really looks like updates just aren't being sent, as I can see the order book has grown, with no updates coming through and that is just a print of:



`    market_books = market_queue.get()

    for market_book in market_books:

        print(market_book.streaming_update)`



I'm not manipulating anything at all, thats simply the raw update.

---

## 2019-09-14 20:56:53 - general channel

**Newbie99**

I am getting updates, that I'm struggling to understand tonight...for example:



`{'id': '1.132099836', 'rc': [{'batb': [[0, 1.5, 313.6]], 'id': 10317011}]}`



I placed a £5 order @ 1.53, but it looks like potentially its rolled up somehow, which confused me, as the update before was:



`{'id': '1.132099836', 'rc': [{'batl': [[2, 1.59, 1.99], [1, 1.58, 500]], 'id': 10317011}]}`



Which suggest a £5 bet should not be rolled up.



The only thing I could think of, is possibly because I only have 3 ladder levels here:



`market_data_filter = streaming_market_data_filter(

    fields=['EX_BEST_OFFERS', 'EX_MARKET_DEF', 'EX_TRADED', 'EX_LTP'],

    ladder_levels=3)`



Given in the above example, the 1st / best price was the one that changed I don't get why it wouldn't show, but am I misunderstanding something here, or is this behaviour weird?

---

## 2019-09-14 08:33:24 - general channel

**Mo**

I've been looking at the flumine code in more detail - what happens if you get a price update for a market that has been closed for more than `market_expiration`? It gets ignored? Do you know if that ever happens?

---

## 2019-09-13 15:46:16 - general channel

**Mo**

I’m curious how you handle this in flumine? I’ve not used it but I’m probably doing something similar to scrape data to one file per market and compressing on market closure

---

## 2019-09-12 11:32:17 - general channel

**Mo**

Doesn’t seem like a problem if it simplifies your code

---

## 2019-09-12 10:37:46 - general channel

**liam**

but yes, this is how flumine does it [https://github.com/liampauling/flumine/blob/master/flumine/listener.py](https://github.com/liampauling/flumine/blob/master/flumine/listener.py)

---

## 2019-09-12 10:36:39 - general channel

**OT**

The streaming cache does not work without EX_MARKET_DEF , but is there away to disable use of the cache?

---

## 2019-09-11 18:47:02 - general channel

**liam**

Yeah flumine is just recording the raw data just like the overpriced stuff you can buy from betfair but without the inaccuracies :smile:

---

## 2019-09-11 18:38:37 - general channel

**liam**

It’s storing the raw data from the stream, in order to get a market book out you should read it using the betfairlightweight historical stream  

---

## 2019-09-11 18:32:05 - general channel

**Mo**

I know nothing about flumine or this process for scraping odds data that seems popular but that would be my assumption 

---

## 2019-09-11 18:30:20 - general channel

**Mo**

Aren’t these streaming updates where each message is going to contain updates for some small number of runners?

---

## 2019-09-11 18:28:46 - general channel

**Chris**

Hi all, I was wondering if someone can help me with this.. I’ve been using flumine to store an odds stream. I’m looking at the correct score market that has 19 selections always (as far as I can tell), but when I print the lengths of the runner catalogue, the first is 19 but most of the others are between 1 and 4

---

## 2019-09-11 06:28:31 - issues channel

**Mo**

Sorry I was mistaken, I do use it with betfairlightweight

---

## 2019-09-10 11:50:07 - issues channel

**Mo**

I use that endpoint, not through betfairlightweight though

---

## 2019-09-10 10:02:13 - issues channel

**Rob (NZ)**

[https://betfair-datascientists.github.io/api/apiPythontutorial/#get-account-statement](https://betfair-datascientists.github.io/api/apiPythontutorial/#get-account-statement)

---

## 2019-09-10 10:00:44 - issues channel

**Rob (NZ)**

oh sweet, its a variation on the example python code they had on the betfair site

---

## 2019-09-06 13:26:04 - general channel

**ash**

Question regarding possible delays in trd stream-data, compared with atb , atl , batb, batl?

Hi, I am trying to allocate if the trd amounts are either on the back or the lay side using atb,atl updates and comparing it with changes in the batb,batl. I am successful in most cases however am struggling to allocate in certain circumstances.



For example:



25134289 -- batbPre        #batb from previous stream update for SelectionID

        [[0, 12, 9.07], [1, 11.5, 1.4], [2, 10, 10.51], [3, 9.6, 26], [4, 9.2, 7.26], [5, 8.6, 7.13], [6, 8, 17], [7, 7.8, 22.05], [8, 5.9, 62.85], [9, 2.3, 15.58]]

25134289 -- batb        #current batb

        [[9, 2.3, 15.58], [8, 5.9, 62.85], [7, 7.8, 22.05], [6, 8, 17], [5, 8.6, 7.13], [4, 9.2, 7.26], [3, 9.6, 26], [2, 10, 10.51], [1, 11.5, 1.4], [0, 12, 9.07]]

batbSame        #change in batb from previous

        True

25134289 -- atbL

        [[12.5, 0], [12, 9.07]]

25134289 -- batlPre

        [[0, 14.5, 3.02], [1, 15, 4], [2, 15.5, 15], [3, 16, 2], [4, 18, 14.29], [5, 19, 3], [6, 30, 1.1], [7, 32, 2], [8, 34, 32.04], [9, 55, 2.45]]

25134289 -- batl

        [[9, 55, 2.45], [8, 34, 32.04], [7, 32, 2], [6, 30, 1.1], [5, 19, 3], [4, 18, 14.29], [3, 16, 2], [2, 15.5, 15], [1, 15, 4], [0, 14.5, 3.02]]

batbSame

        True

25134289 -- atlL

        [[14.5, 3.02]]

25134289 -- trd

         [[13, 11.63], [12.5, 27.64], [12, 28.85]]

25134289 -- assn trd  #interp of trd prices.

        UNKNOWN  --  [13, 11.63]  inplay - False

        Back1 [12.5, 27.64]

        Back1 [12, 28.85]



As you can see I have been able to determine the 12,5 and 12 prices as the back side, but struggling with 13. Has anyone found a successful solution for this? I am missing _something_

(I hope you can excuse the verbose question)

---

## 2019-09-06 11:29:48 - issues channel

**liam**

depends on what this is for? I have a single 'main' event queue which handles all events, so the application would take a marketBook from a streaming queue do some validation and place it in an Event class and place in the main event queue to be handled

---

## 2019-09-06 06:18:32 - general channel

**liam**

Yeah it’s the opposite, streaming allows you to subscribe to 100s of markets without even touching CPU. I use micros and smalls for all of my programs 

---

## 2019-09-05 23:25:57 - general channel

**JonJonJon**

I tested the streaming api on my local machine. It seems to Use barely any cpu. Thanks for making such a great tool!

---

## 2019-09-05 22:01:31 - general channel

**JonJonJon**

I think I need the full depth. I read somewhere that using streaming can cause cpu issues if the market is busy, such as in the final minutes before a horse race. Have you experieced that before?

---

## 2019-09-05 21:51:12 - general channel

**liam**

Use streaming / are you sure you need the full depth?

---

## 2019-09-05 21:49:26 - general channel

**JonJonJon**

Random question.... When the market book is downloaded with betfairlightweight it looks like the full market depth. Is that cpu intensive if I want to do it once a second for 10 markets, running on an Amazon micro instance?

---

## 2019-08-30 16:38:24 - issues channel

**Rory**

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1567178887056300](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1567178887056300)

---

## 2019-08-30 15:54:39 - issues channel

**Rory**

but that's not the problem

---

## 2019-08-30 15:52:09 - issues channel

**Rory**

interesting problem ....

---

## 2019-08-29 14:29:17 - issues channel

**liam**

streaming is cheap, so just disregard the markets you dont want

---

## 2019-08-29 14:23:46 - issues channel

**LK**

well this is helpful nevertheless. I was using the market data filter purely on market_ids and for some cases I can ease that restriction now. I was already requesting multiple streams. I guess I have to be thinking a bit harder on how to organize stuff.

---

## 2019-08-29 09:18:42 - issues channel

**liam**

[https://ppb.technology/2018/01/12/exchange-market-data-streaming-with-kafka/](https://ppb.technology/2018/01/12/exchange-market-data-streaming-with-kafka/)

---

## 2019-08-29 09:16:29 - issues channel

**Rory**

&gt;for streaming they use kafka on top of the rest of their infra



Great choice and nice bit of info :thumbsup:

---

## 2019-08-29 09:15:14 - issues channel

**liam**

for streaming they use kafka on top of the rest of their infra, its rare for streaming to fail and nothing else fail, normally one thing fails and the whole thing goes down

---

## 2019-08-29 09:00:55 - issues channel

**LK**

I might be missing something but in order to receive order executions from betfair for resting orders, the only 3 options/possibilities are:

- get it streaming from the orderstream

- poll betfair to ask for executions?

- receive immediate feedback if the order sent is matched (crossing order)

---

## 2019-08-28 21:25:22 - issues channel

**MarcoS**

Hi everybody, is there someone else that have problem with get_market_book_from_stream_bf_api? This method seems to return an empty list. Thanks.

---

## 2019-08-28 20:21:05 - general channel

**liam**

That’s the problem, it will never be 100%, you need to iterate and record as much data as you can, doesn’t take many races to get an idea of if you have improved 

---

## 2019-08-28 19:50:51 - general channel

**liam**

Smaller always smaller, making it a function of the odds helps as well, if you put £10 in at 100 you will find you only get 100% matched on losers 

---

## 2019-08-28 16:39:25 - issues channel

**liam**

you may need a reason / hopefully you are putting money through some markets or they will question it

---

## 2019-08-27 23:21:34 - issues channel

**William**

Sorry not sure if I asked correctly, is there the equivalent of 'market_book.streaming_update' in lightweight mode? To check if a runner has been changed in an update?

---

## 2019-08-27 14:35:09 - issues channel

**LK**

and another question. is does betfair care how many marketstreams I request? I know the market limit per stream is 200, but do they care if I subscribe to 2000 markets using 10 streams for example?

---

## 2019-08-27 12:38:53 - issues channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/listener.py#L75](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/listener.py#L75)

---

## 2019-08-27 09:09:38 - issues channel

**William**

Is there an equiavlent to streaming update for lightweight mode?

---

## 2019-08-18 23:12:59 - general channel

**Dawid**

hey, quick question: CSV data from [https://promo.betfair.com/betfairsp/prices/](https://promo.betfair.com/betfairsp/prices/), I thought should be: BSP &gt;= PPMAX and BSP &lt;= PPMIN, but that's not the case

---

## 2019-08-17 00:05:16 - general channel

**William**

Or need to look through streaming_update?

---

## 2019-08-16 17:29:23 - general channel

**Rory**

those were my original thoughts when I sat down to do our project using BFLW but I ended up in local mode + containers after dev was done :grin:

---

## 2019-08-16 17:08:46 - general channel

**Rory**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1565953541263800](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1565953541263800)

---

## 2019-08-16 12:02:14 - general channel

**Rory**

&gt;I've found dockerising python development to be very liberating

---

## 2019-08-15 20:59:06 - general channel

**liam**

[https://stackoverflow.com/questions/9979970/why-does-python-use-else-after-for-and-while-loops](https://stackoverflow.com/questions/9979970/why-does-python-use-else-after-for-and-while-loops)

---

## 2019-08-15 20:35:52 - general channel

**Oliver Varney**

Not sure what affect this would have, or even its if something that you can do in python but not in other languages

---

## 2019-08-15 20:35:23 - general channel

**Oliver Varney**

noon question here, not sure its a specific python thing but looking through the cache.py file in the Available class, in update the indentation on the else looks off.

---

## 2019-08-15 12:18:23 - general channel

**liam**

although best practice is to have an API over the top as you should never connect to a database directly

---

## 2019-08-09 10:34:18 - issues channel

**Rob (NZ)**

cause normally it works fine so didnt think it was the betfairlightweight part

---

## 2019-08-09 10:34:00 - issues channel

**Rob (NZ)**

is it on the betfair api side of things?

---

## 2019-08-08 19:58:29 - general channel

**Chris**

does anyone know how to increase the max number of subscriptions in flumine?

---

## 2019-08-08 18:57:52 - general channel

**Chris**

flumine.flumine.FLUMINE_DATA = data_dir

flumine.resources.recorder.FLUMINE_DATA = data_dir

flumine.storage.storageengine.FLUMINE_DATA = data_dir

---

## 2019-08-07 21:06:08 - general channel

**Chris**

I think this is moved into something I can potentially solve myself though now, thanks for the help :slightly_smiling_face:

---

## 2019-08-07 20:58:52 - general channel

**Chris**

flumine.py

---

## 2019-08-07 20:51:14 - general channel

**Chris**

I had to change FLUMINE_DATA to my own directory because I had access issues

---

## 2019-08-07 20:48:52 - general channel

**liam**

Can’t help much without seeing your code

---

## 2019-08-07 20:21:08 - general channel

**Chris**

has anyone had an issue where flumine creates the folders but dosent insert any data?

---

## 2019-08-07 20:01:00 - general channel

**Chris**

Just a note for anyone using flumine, if your credentials are not inserted correctly it wont run when you execute start() but wont say why (at least it did with me)

---

## 2019-08-06 09:15:51 - general channel

**liam**

I personally store the static data (event / catalogue) in a database and then streaming data via flumine. I then process the streaming data into database tables if and when required joining on market / event ids 

---

## 2019-08-06 08:56:57 - general channel

**Ian**

hi all - data recording - I now have flumine rolling away collecting data and am working on importing that to a db. what's the best approach to matching up the stream data to the meta data - e.g. have a parallel process collecting these using NG

---

## 2019-08-06 08:29:25 - general channel

**richard_h**

probably unrelated to betfairlightweight.

---

## 2019-08-05 21:14:51 - general channel

**Conr**

Can I ask a stupid question: what is the difference between api and interactive .....is api higher frequency or something?

---

## 2019-08-05 19:18:33 - general channel

**Chris**

So is there no way to know the name of an event in streaming?

---

## 2019-08-05 15:08:26 - general channel

**liam**

oh, i would ignore then, i get about the same, all that warning is telling you this [https://github.com/liampauling/betfair/blob/26da8986d292f13af50262cddf85449b2f731bac/betfairlightweight/streaming/stream.py#L50](https://github.com/liampauling/betfair/blob/26da8986d292f13af50262cddf85449b2f731bac/betfairlightweight/streaming/stream.py#L50)

---

## 2019-08-05 08:56:06 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L129](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L129)

---

## 2019-08-05 08:55:58 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L24](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L24)

---

## 2019-08-05 08:55:14 - general channel

**Chris**

market_data_filter = streaming_market_data_filter(

    fields=[‘EX_BEST_OFFERS’, ‘EX_MARKET_DEF’],

    ladder_levels=3,

)

---

## 2019-07-30 07:33:43 - general channel

**Unknown**

Size doesn’t change as size = stake * 2 (as that is what has been matched) If you place and match a £10 order that will count as £20 matched [https://en-betfair.custhelp.com/app/answers/detail/a_id/408/~/exchange%3A-in-a-horse-race%2C-how-will-non-runners-be-treated%3F](https://en-betfair.custhelp.com/app/answers/detail/a_id/408/~/exchange%3A-in-a-horse-race%2C-how-will-non-runners-be-treated%3F)

---

## 2019-07-30 02:14:23 - general channel

**William**

Can the historical streaming mode run multiple races at once?

---

## 2019-07-29 19:00:15 - general channel

**Oliver Varney**

Yes its a bit of a pain, possibly but ugly I think. I have so many questions on non runners lol. Does anyone have any betfair documents on the topic, specifically which fields are effected and any relevant calculations. One thing im going round in circles currently is the traded price size (trd) and the total volume (tv). It seems as though the traded prices are updated (setting old values to zero and new ones to the adjusted amount), but would we also expect the size to change and the total volume (tv). In my mind size = price * stake , so with an updated price the size and total volume on the runner should also change,  or am I confusing size with stake.

---

## 2019-07-29 12:04:42 - general channel

**Oliver Varney**

another question guys, apologies for flooding the chat. Do people try to calculate stats such as amount of money matched in the last x seconds on a runner. I was thinking about storing a approximation of market orders derived from the traded price volume that are not my own

---

## 2019-07-28 06:36:52 - general channel

**William**

How do you have the equivalent of the while loop when streaming?

---

## 2019-07-28 06:22:33 - general channel

**liam**

[@UKD8R5P9N](@UKD8R5P9N) you can modify process but I always use the generator to get the data and save to csv, I then load into a df / database for further processing. I think it might remove the on_process example as it over complicates things 

---

## 2019-07-27 22:29:57 - general channel

**ash**

while on the subject of traded (trd), can anyone point me in the right direction when trying to determine if the traded price listed on the stream was on the Back or Lay side. In some cases I think I can see based on the changes to atb/atl. However, I am seeing occasions where this isn't adding up. For example in the picture below. i have a traded volume of 39.99 @ 12. but I have changes on both atl and atb for 12. As I understand it atb could have gone from 46.85 to 6.89 or atl could have gone from 40 to 0, or is the [12,0] always somebody canceling a bet, as opposed to being matched and all the money staked at that price been taken up?



I say, i am currently using the delayed streaming API. so this could potentially be an artefact of the data arriving in blocks? - this might explain my current level of understanding too.

---

## 2019-07-27 11:23:07 - general channel

**Oliver Varney**

morning all, question on the traded price size (trd). I have just noticed that some of the numbers returned dont match the increments in the ladder. Is this correct / expected or have I made a mistake?

---

## 2019-07-27 09:36:11 - general channel

**William**

When back testing with streaming historical would you be modifying the on_process function to do most of the work?

---

## 2019-07-25 19:32:14 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/6d209a8a98e834192837df924508c5899e381cb3/flumine/storage/storageengine.py#L136](https://github.com/liampauling/flumine/blob/6d209a8a98e834192837df924508c5899e381cb3/flumine/storage/storageengine.py#L136)

---

## 2019-07-25 19:31:52 - general channel

**liam**

 [https://github.com/liampauling/flumine/blob/master/flumine/storage/storageengine.py](https://github.com/liampauling/flumine/blob/master/flumine/storage/storageengine.py)

---

## 2019-07-25 19:29:36 - general channel

**Ian**

i was just slightly confused as i thought the pattern would be to look for the zip files, import them into db. but if I understand correctly i should just be taking data direct from the the FLUMINE_DATA  folder when market is closed?

---

## 2019-07-25 18:31:57 - general channel

**liam**

yeah bflw doesn't remove them

---

## 2019-07-25 18:31:21 - general channel

**Ian**

hi all - question on flumine - I have this running and the data is collected and stored just fine and I can see the JSON for each market - however the markets are never archived or removed from the cache - anything obvious I might be missing - it is a vanilla clone/run

---

## 2019-07-24 10:00:25 - general channel

**Mo**

In my experience, you'll want to do some kind of processing on them first before putting them in a database. Storing the raw updates doesn't scale well

---

## 2019-07-24 09:54:19 - general channel

**Oliver Varney**

my use case is to feed it into a AI algorithm interest points / periods, so I think its easier for me to capture these from the json file and store these in a database and feed them directly.

---

## 2019-07-24 09:51:38 - general channel

**liam**

I just use flumine and store all data in the raw json 

---

## 2019-07-24 09:46:35 - general channel

**Oliver Varney**

yes it looks perfect for what I was looking to achieve. Does anyone looks to store this data in a database or a snapshot at particular interest points?

---

## 2019-07-24 09:34:24 - general channel

**Unknown**

Apologies for the basic questions, but im getting an empty list returned. Could it be an issue with my file directory? It does expect a file / json file right, not a zip or btz ?

---

## 2019-07-24 09:20:41 - general channel

**liam**

Have a read of the streaming docs on the betfair site 

---

## 2019-07-24 09:16:39 - general channel

**William**

Would a filter in flumine only go for the current day so you dont exceed the maximum subscription limit?

---

## 2019-07-23 13:12:14 - general channel

**William**

Would one flumine instance for say UK horse racing suffice or better to separate into multiple for a single market type?

---

## 2019-07-23 12:06:12 - general channel

**William**

Where is the no certification login performed and details provided in flumine?

---

## 2019-07-23 11:39:05 - general channel

**Oliver Varney**

quick question on the historical stream, should this operate like the normal stream, i.e. have the same structure and return a market book cache via the output_queue.get()?

---

## 2019-07-23 10:35:17 - general channel

**William**

Is the flumine sample code up to date?

---

## 2019-07-23 08:37:07 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1563844455039600](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1563844455039600)



Interesting idea, I feel like it would need to be a presentation though as looking at code is confusing 

---

## 2019-07-23 08:27:49 - general channel

**Oliver Varney**

Im just thinking about the best way to handle the returned data structure and how to add custom functionality into it

---

## 2019-07-23 08:26:18 - general channel

**Mo**

I wouldn't change the betfairlightweight code but I can see use cases where you want to use a custom listener rather than have it do the caching for you

---

## 2019-07-23 08:24:33 - general channel

**Oliver Varney**

Just a general question again, apologies if its a bit of a noob question :slightly_smiling_face:. How do people go about adding in custom functionality. The marketbooks are return via streaming which I believe (correct me if im wrong) cache the marketbooks, apply an update and then return this. Do people alter the MarketBookCache class to add custom code directly into this, or just take the returned marketbooks and then create their own custom classes which are largely similar to that which is returned?

---

## 2019-07-22 14:03:04 - general channel

**Oliver Varney**

so in this case liam, would the flumine code reconnect as soon as it come back up ?

---

## 2019-07-22 12:11:03 - general channel

**liam**

i run them separate, flumine uses a custom listener which uses minimal cpu/ram

---

## 2019-07-21 14:39:18 - general channel

**Anshuman**

can you please tell more about it how to do?

---

## 2019-07-21 14:30:28 - general channel

**Anshuman**

maybe this question is silly as I am very new with Betfair API

---

## 2019-07-21 06:23:20 - general channel

**Anshuman**

Hi, I have a delayed api key how to use that in the github betfair app to build my first working app. Little help of yours will help me a lot

---

## 2019-07-20 21:05:51 - general channel

**Dawid**

yes, lack of Betfair ids it's a big problem, so much extra work...

---

## 2019-07-20 20:44:30 - general channel

**Dawid**

is it from betfairlightweight or some different code ??

---

## 2019-07-20 20:32:32 - general channel

**Dawid**

hi, I started using betfairlightweight and I am very happy with it, thank you for sharing your work

---

## 2019-07-19 13:46:51 - general channel

**Oliver Varney**

cool thanks Liam and great work on the library's, really appreciate it. Just on flumine, is its purpose / use case to produce the historical streaming files that betfair produce and make you pay for (£200 for the horse racing ones!), or is there other use cases?

---

## 2019-07-19 11:13:09 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/6d209a8a98e834192837df924508c5899e381cb3/flumine/flumine.py#L84](https://github.com/liampauling/flumine/blob/6d209a8a98e834192837df924508c5899e381cb3/flumine/flumine.py#L84)

---

## 2019-07-19 10:48:04 - general channel

**Oliver Varney**

okay cool thanks for the help, was having a mind block. Just another quick question, but how do people handle the streaming when the API goes down

---

## 2019-07-19 10:46:06 - general channel

**Mo**

I think it can be useful to have a separate scraping process for market catalogues (and other things like cleared orders) but anything price-related should be done through streaming and not list_market_book

---

## 2019-07-19 10:42:26 - general channel

**Oliver Varney**

as its called marketDef in streaming

---

## 2019-07-19 10:42:08 - general channel

**Oliver Varney**

yes so this is where the unified front question comes from

---

## 2019-07-19 10:41:50 - general channel

**Mo**

Right but you have the marketDefinition from streaming

---

## 2019-07-19 10:41:21 - general channel

**Oliver Varney**

okay cool, do you see where im coming from though, the data is very similar with some additions in the streaming, but structurally in different , e.g. no Market catalogue via streaming

---

## 2019-07-19 10:38:22 - general channel

**Oliver Varney**

I guess im thinking from a database perspective, what is the relationship between an event, market catalogues , market books, runner catalogue, runner book and How can these be represented in one unified structure across the different types of request

---

## 2019-07-19 10:35:13 - general channel

**Oliver Varney**

an example is that there is no Market Catalogue in the streaming option but there is a description

---

## 2019-07-19 10:34:48 - general channel

**Mo**

Can you give an example of how the streaming MarketBooks differ from what is returned from list_market_book?

---

## 2019-07-19 10:33:56 - general channel

**Oliver Varney**

I probably only will need the request approach currently but im thinking about a future project that would be more suited to streaming data

---

## 2019-07-19 10:33:05 - general channel

**Oliver Varney**

I mean via the python betfairlightweight library. My understanding is this, that you can use two approaches to get data. One is a request which will retrieve data at a point in time (the time of the request) or via the streaming which will constantly check for updates and put these into a queue. Using the request approach it seems that you first have to get the events, then get the market catalogues then the market books, all of which are returned in separate classes. Using the streaming option the Market Book objects are returned with a completely different structure to that of which is returned if you make the request via, list_events, list_market_catalogue, list_market_book

---

## 2019-07-19 10:25:40 - general channel

**Mo**

I'd also be interested in exactly what you're trying to do because it's hard to comprehend a use case where you'd want to use both streaming and the REST API

---

## 2019-07-19 10:24:50 - general channel

**Mo**

When you say you looked into both, did you look at the betfairlightweight code or the Betfair API documentation? Because one of the advantages of betfairlightweight is that it presents streaming data to you as MarketBooks as you would get from listMarketBook

---

## 2019-07-19 10:20:14 - general channel

**Oliver Varney**

Hi all, I have a design choice question which I have been trying to wrap my head around for a few days. I want to capture market prices/volumes both via a normal request and via streaming. Looking into both, they return different data structures but there is alot of crossover. Do people design a further class as an interface to bridge the differences in structure and data returned by the different forms of request or do they keep things entirely separate? Apologies if this is a bit of a noob question or doesnt make sense :slightly_smiling_face:

---

## 2019-07-19 09:35:31 - general channel

**William**

If there are delays in the while loop while streaming does each iteration of the loop contain all up to date information or just the next in the queueu

---

## 2019-07-17 17:44:46 - general channel

**liam**

thats your problem

---

## 2019-07-16 16:22:26 - general channel

**magiclevinho**

I m using python 3.7 if that matters?!

---

## 2019-07-16 09:45:19 - general channel

**William**

Excluding any reasons on my part (most likely). Any reason bets arent being received on my end when streaming?

---

## 2019-07-12 21:27:08 - general channel

**liam**

This is a good read [https://github.com/python/cpython/blob/3.7/Lib/queue.py](https://github.com/python/cpython/blob/3.7/Lib/queue.py)

---

## 2019-07-09 11:34:56 - general channel

**Mo**

I think there are a few different python packages for pinging

---

## 2019-07-07 19:46:17 - general channel

**Filippo Bovo**

Thanks, Mo. I saw that post before but the link that they give is broken. I googled it and found the correct link, and geolocating the IP address gives Mountain View California. So, that's the problem. Thanks.

---

## 2019-07-06 20:32:48 - general channel

**liam**

Legacy from when streaming was invite only 3 ish years ago 

---

## 2019-07-06 09:45:36 - general channel

**Mo**

Your options are to scrape the data yourself or pay for Betfair historic data. Betfair is currently rewriting their historic data service so nothing recent is available and there are questions over the quality of the data that is available, so I would recommend scraping yourself. If you do that then you should absolutely use the streaming API rather the REST API.

---

## 2019-07-05 11:34:13 - general channel

**Robert**

thanks for the help with this issue

---

## 2019-07-05 11:34:00 - general channel

**Robert**

tbh I try many dates and markets and they all have the same problem

---

## 2019-07-05 11:14:01 - general channel

**Mo**

Python 3.6.3

betfairlightweight 1.10.0

---

## 2019-07-05 11:04:31 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2019-07-05 10:05:39 - general channel

**Robert**

I still see the same values with python 3.6.8

---

## 2019-07-05 09:47:09 - general channel

**Robert**

I do start a new python session and see this each time

---

## 2019-07-05 09:45:50 - general channel

**Robert**

I have tried:

python version is 3.5.3 and betfaitlightweight==1.10.0

python version 2.7.12 and betfairlightweight==1.10.0

and get the same result

---

## 2019-07-05 09:31:21 - general channel

**Robert**

have tried using python3 and numpy and betfairlightweight latest and it still has same result

---

## 2019-07-05 09:15:21 - general channel

**Robert**

well I can detect this issue by just asserting that the volumes are not increasing -- even without plotting -- the script I sent does an assert that will catch it  -- I am using python 2 and betfairlightweight 1.10.0 and a slightly older numpy version -- if you are seeing its all OK when using my script then maybe its my versions so Ill check with latest versions of libraries on python 3 and then get back to you

---

## 2019-07-04 12:17:59 - general channel

**Robert**

thanks for the quick help -- ill look into it -- to get the total_matched I am just looking at the runner_book within the market_book and doing runner_book.total_matched -- is that correct?

---

## 2019-07-04 11:53:49 - general channel

**Robert**

Hi I'm using the api to process historical betfair data.  I am using the streaming api.  I want to have the total volume traded for a horse runner but when using the runner book total_matched I see this is not increasing with respect to publish_time and it jumps around a lot.  Any ideas what is happening here? 

---

## 2019-07-03 07:16:30 - general channel

**liam**

Publish time is streaming only 

---

## 2019-07-02 17:56:14 - general channel

**Mo**

Correct it’s not streaming but to clarify I mean Great Britain not Gigabytes :joy:

---

## 2019-07-02 17:54:01 - general channel

**liam**

[@UBS7QANF3](@UBS7QANF3) out of interest how do you record data? Judging by the size I assume that is not streaming data?

---

## 2019-07-01 22:49:14 - general channel

**Filippo Bovo**

[@UBS7QANF3](@UBS7QANF3), [@U4H19D1D2](@U4H19D1D2), you were right, it was a delay issue. I did not know that the ladder view in Betfair is delayed and that without logging in to Betfair there is also a delay. I have just compared my dashboard against a couple of markets by going to the main page and logging in, and they match with the dashboard. Thanks a lot for your help!

---

## 2019-07-01 17:47:51 - general channel

**Jonatan (skyw)**

anyone know how to get total liability for markets, I get 0 for all my orders.

---

## 2019-06-30 10:05:46 - general channel

**Unknown**

[@UBS7QANF3](@UBS7QANF3), here is a 20 second screen recording of my web app (on the left) against the market ladder view on the Betfair website (on the right) refreshing once per second. In function `streaming_market_data_filter`, I am using only these two filters: `EX_MARKET_DEF` and `EX_BEST_OFFERS_DISP`. Still the market ladder in my web app and in the Betfair websites are different. Thank you for your help.

---

## 2019-06-29 17:30:31 - general channel

**Filippo Bovo**

I’ll post it tomorrow, as I’ve left home. Thank you for your help!

---

## 2019-06-29 16:15:23 - general channel

**Filippo Bovo**

I am currently getting the (back) prices using `markets_books[0].runners[0].ex.available_to_back`. However, I noticed that there is also a `markets_books[0].streaming_update` dictionary. Should I use that dictionary instead?

---

## 2019-06-29 14:41:39 - general channel

**Unknown**

I created a simple web app to view the market ladder for a certain selection of a market, using `betfairlightweight` to get the data from Betfair — [https://github.com/FilippoBovo/dashfair](https://github.com/FilippoBovo/dashfair).



When I compared the market ladder that I get from the web app and the market ladder from the Betfair website, I noticed that they are different — see the screenshot below where on the left there is my web app and on the right the market ladder view in the Betfair website.



At first I thought that the information on the website was delayed, as I was refreshing it every second. However, I looked into it better, and the delay does not seem to be the cause of the mismatch between the two ladders.



To give more context, as you may see from line 143 of this file, I am using a `streaming_market_data_filter` with `fields=['EX_MARKET_DEF', 'EX_ALL_OFFERS']`.



Has anyone had this is issue before or has a clue on what is going on?



Thank you.

---

## 2019-06-28 16:06:10 - general channel

**Mo**

I'm struggling to see the problem with that design :joy:

---

## 2019-06-28 15:28:57 - general channel

**OT**

Bit of a general python question, but does anyone ever just pick up the betfair api class instance from the globals, instead of passing it through into numerous classes? I know globals are a bit frowned upon in Python, but passing the class instance around like a hot potato really annoys me :smile:

---

## 2019-06-28 14:26:34 - general channel

**Brenton Collins**

I think it has something to do with using pickle to store data, I need to move to database...

---

## 2019-06-28 14:25:41 - general channel

**Mo**

I was going to say, it doesn't sound like anything specific to betfairlightweight

---

## 2019-06-27 12:21:05 - general channel

**Mo**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2019-06-27 12:17:22 - general channel

**Erdem**

for python

---

## 2019-06-25 19:33:23 - issues channel

**Newbie99**

Ok, that makes sense, but then is the new position shown in the order stream (if you enable this flag)?



```

order_filter = streaming_order_filter(

   include_overall_position=True)

```



If so where should I be looking for it, as I can't seem to work it out!

---

## 2019-06-25 19:17:31 - issues channel

**liam**

No order data in streaming 

---

## 2019-06-25 13:10:31 - issues channel

**Newbie99**

When streaming, is 'matches' never populated?



```

market_books = market_queue.get()

        for x in market_books:

            for y in x.runners:

                print(len(y.matches))

```



The above returns 0 as the len for all runners in all markets.



If I call listMarketBook it works fine, but I obviously don't want to have to do that every time.



Assuming the behaviour above is correct, what is an alternative way to calculate positions, to call listMarketBook once at the start, take the starting position and then adjust that on every order change?

---

## 2019-06-25 13:06:58 - general channel

**Jonatan (skyw)**

Yeah, I checked that, Even tried the most basic example from the examples in betfairlightweight with same issue will investigate

---

## 2019-06-25 00:31:04 - general channel

**Erdem**

Can you help?

---

## 2019-06-24 23:19:28 - general channel

**Erdem**

Hey i m new here. Can I ask question from here?

---

## 2019-06-21 05:05:56 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L150](https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L150)

---

## 2019-06-20 14:35:31 - general channel

**Mo**

Sorry I was trying to look into it but it looks like my account statement has an item that breaks betfairlightweight :thinking_face:

---

## 2019-06-20 12:23:59 - general channel

**Unknown**

I had this code which was going off and passing out the unknownstatementitem , is it possible to repoint that to the output of the code you helped me with?

---

## 2019-06-20 12:15:34 - general channel

**Rob (NZ)**

Thats really helped me , I want to be able to output my results and get it feeding into Tableau or another visualization tool

---

## 2019-06-20 10:20:59 - general channel

**Mo**

betfairlightweight presents the streaming data to you identically as if you had called listMarketBook (with the addition of the marketDefinition). If you have streaming enabled on your account, it's hard to imagine any scenario where making listMarketBook calls would be preferred

---

## 2019-06-20 10:05:24 - general channel

**Rob (NZ)**

Does anyone know of a good resource to describe the difference between the marketbook and streaming data and when you may want to use on or the other...

---

## 2019-06-19 16:18:23 - general channel

**Jonatan (skyw)**

this is the last row from the database, it converted to swedish krona

---

## 2019-06-19 15:22:15 - general channel

**Jonatan (skyw)**

```

 fields = ['EX_LTP', "EX_BEST_OFFERS_DISP", 'EX_BEST_OFFERS', 'EX_MARKET_DEF', 'EX_TRADED_VOL']

 market_data_filter = streaming_market_data_filter(

      fields=fields,

      ladder_levels=3,

 )

```

---

## 2019-06-19 13:39:32 - general channel

**Unknown**

Any idea why I'm getting such big difference between the Betfair page and the data from betfairlightweight, some are correct and become more correct the closer to the start, it's probably some parameter I'm not setting but can't seem to figure out which one

---

## 2019-06-16 10:13:34 - general channel

**Mo**

No problem, let us know if you have any more questions

---

## 2019-06-16 10:05:57 - general channel

**Mo**

But you may prefer to use the streaming API: [https://github.com/liampauling/betfair#streaming](https://github.com/liampauling/betfair#streaming)

---

## 2019-06-16 09:56:37 - general channel

**Nghia Nguyen**

btw, do you know how to get the odds from this api?

---

## 2019-06-15 11:14:53 - issues channel

**stefan**

Took Betfair a couple of shots, in the end they reset permissions on the app key and added streaming access again. It works now. Thanks for your help.

---

## 2019-06-14 09:14:54 - general channel

**Mo**

(*I actually use IntelliJ with the Python plugin)

---

## 2019-06-13 16:27:45 - issues channel

**stefan**

Just a quick follow-up while I am waiting for Betfair to get back. The streaming login -as above - should work with the delayed/dev appKey if enabled for streaming API access, correct? Thanks.

---

## 2019-06-13 13:55:01 - general channel

**jci**

hey all,



I'm trying to get information on the total amount matched on each runner in an event using streaming. When I execute the code below it returns 'None' for every runner.. any ideas what I'm doing wrong?



market_books = output_queue.get()

for market_book in market_books:

    for runner in market_book.runners:

        print runner.total_matched

---

## 2019-06-13 09:15:38 - general channel

**Conr**

Hi guys, random q, can I download historical market data for free from Betfair (low frequency) and if so, any good repo's on how to process the json for a bit of back testing based on markets ?

---

## 2019-06-12 16:35:55 - general channel

**Mo**

Yes, GitHub is great. Depending on exactly what you want to do, Gists ([https://help.github.com/en/articles/about-gists](https://help.github.com/en/articles/about-gists)) might be better than a full blown repository

---

## 2019-06-12 14:45:09 - general channel

**Rob (NZ)**

It worked a treat for me...   I'd really like to put up some of the python code I've got to help others ... what platform would you recommend ? Github etc?

---

## 2019-06-11 17:48:35 - general channel

**Unknown**

Hi guys, is there a way to calculate the % figures using BFLW? I was thinking SP_traded /SP_available ?

Or is there some boiler plate script lying around?

---

## 2019-06-11 12:07:17 - general channel

**Mo**

Happy to help :+1:

---

## 2019-06-11 10:34:33 - issues channel

**liam**

[@UFTBRB3F1](@UFTBRB3F1) the idea with streaming is to not filter, just ignore the markets you don’t need

---

## 2019-06-11 09:20:22 - general channel

**Rob (NZ)**

[@UBS7QANF3](@UBS7QANF3) Cheers mate, thats awesome and working a treat.....thanks for taking the time to help out, really appreciate it

---

## 2019-06-10 21:48:22 - issues channel

**Newbie99**

Is there a quick way to filter markets based on criteria xyz plus specific markets that don't meet those criteria?



For example, what I was hoping to do is:



```

market_filter = streaming_market_filter(

    event_type_ids=['7'],

    country_codes=['US'],

    market_types=['WIN'],

    market_ids=['1.130856098'])

```



That doesn't return anything as I presume the logic is that nothing meets all 4 criteria, so I can see why (I think). So would the correct way to go about this be to call listEventTypes, generate a list of Market_ids that meet those criteria, then add in the ad-hoc ones and return that list of Market_id's into the filter?

---

## 2019-06-10 09:53:58 - general channel

**liam**

let bflw do all the work

---

## 2019-06-10 09:51:51 - general channel

**Conr**

(Bit off streaming yet, but I have bookmarked it!)

---

## 2019-06-10 09:50:58 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L104](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L104)

---

## 2019-06-10 09:50:57 - general channel

**liam**

streaming has an openDate but I think that is the same as startTime

---

## 2019-06-10 09:42:18 - general channel

**Conr**

Getting through the docs but have a question around the best flag for the  time football or tennis match starts (or ends)

---

## 2019-06-10 07:09:06 - general channel

**William**

Anyone know how to get the open time off an individual horse race?

---

## 2019-06-07 18:50:57 - issues channel

**Rob**

thanks for the help!

---

## 2019-06-07 18:07:47 - issues channel

**Rob**

I'm using the streaming api to get market books and have run in to an issue (or question) about traded volume - I'm seeing data like



```

{  

                  "size":46.78,

                  "price":23.36

               },

               {  

                  "size":129.22,

                  "price":24

               },

               {  

                  "size":120.25,

                  "price":24.92

               },

```



Whereas I made the assumption I'd get prices at the ladder levels (so `23`, `24`, `25`, etc) but it looks like I've got some kind of average prices.



For the restful API call I can see a choice of `ROLLED_UP_BY_AVG_PRICE` or `ROLLED_UP_BY_PRICE` but can't easily see if/how this is recreated in the streaming API.

---

## 2019-06-02 21:37:03 - general channel

**Chris**

I tried to set that with a try and except wrapper around the section, but due to my lack of knowledge with Python (and more specifically how the structure of data is working) that isn't right because it then sets all of the prices to the defaults I have set, rather than picking out the real prices and only hitting the except rule when no price is available, I guess this is because it isn't looping over the data but is in a list?

---

## 2019-06-02 21:35:25 - general channel

**Chris**

I'm a relative Python noob, but from what I can gather there isn't a default set when there is no price or volume on a specific selection hence the list being empty

---

## 2019-06-02 21:22:23 - general channel

**Chris**

That's frustrating given it is from what seems to be someone at least associated with Betfair :thumbsdown: [https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/)

---

## 2019-05-31 07:11:46 - issues channel

**liam**

you can see that flumine will delete that cache object [https://github.com/liampauling/flumine/blob/master/flumine/listener.py#L39](https://github.com/liampauling/flumine/blob/master/flumine/listener.py#L39)

---

## 2019-05-27 16:05:10 - general channel

**Newbie99**

Not sure if this helps:



```

    mkt_runners = []

    for market_catalogue in market_catalogues:

        for r in market_catalogue.runners:

                mkt_runners.append((r.selection_id, r.runner_name, market_catalogue.market_id, market_catalogue.event.name,

                                market_catalogue.event_type.name, market_catalogue.market_name))



    return mkt_runners

```



Similar to that should work

---

## 2019-05-22 10:07:45 - issues channel

**T**

thanks for your help

---

## 2019-05-22 02:09:29 - issues channel

**T**

If someone could very clearly explain, step by step, what I need to do to solve this problem, that would be great

---

## 2019-05-22 02:08:49 - issues channel

**T**

The articles talk about vscode which I've literally never heard of/needed before to execute code in Python

---

## 2019-05-22 02:05:41 - issues channel

**T**

I have read the following threads on Github: [https://github.com/liampauling/betfair/issues/175](https://github.com/liampauling/betfair/issues/175) and [https://github.com/microsoft/vscode-python/issues/581](https://github.com/microsoft/vscode-python/issues/581) but because I am quite inexperienced in Python I still don't know what on earth to do to solve the problem

---

## 2019-05-19 11:24:38 - random channel

**liam**

I am just going to let him have the last word as it makes zero sense...



‘’’

It's an interface to an interface, betfair handles the heavy lifting and ssl the scurity, its a wrapper to presumably improve interacting with the underlying betfair api, you aren't building betfair from scratch.

‘’’

---

## 2019-05-18 08:34:14 - random channel

**liam**

Not sure what this guys problem is.... [https://github.com/liampauling/betfair/issues/210](https://github.com/liampauling/betfair/issues/210)

---

## 2019-05-03 11:54:57 - general channel

**Rob (NZ)**

Cheers for the advice .. it really helps save time of over cooking for newbies like myself...   I'm basically wanting to wait till 30secs prior to the race time as one of my dependencies so just starting to look at the best way to do that now for automation

---

## 2019-05-01 17:13:49 - general channel

**liam**

your not using streaming?

---

## 2019-05-01 17:08:49 - general channel

**liam**

its in the marketDefinition in streaming

---

## 2019-04-30 16:03:28 - general channel

**Jonatan (skyw)**

Hade wrong competitionID, always good to ask seem to solve most problems ; )

---

## 2019-04-29 16:08:47 - general channel

**Leon**

Hi all,  does anyone have experience of using the datetime functions of betfairlightweight? I'm currently using market_book.publish_time to get the time of each market update in the historic betfair data which gives me the date/time in standard human readable format (YYYY-MM-DD HH:MM:SS) which I appreciate is what most people would want, but I would like to keep the time as UNIX/Epoch time as it will be easier to process for the application I'm working on. Is this possible with betfairlightweight? I would like to use betfairlightweight for consistency as I'm using it to parse other elements of the data, although I probably could either convert the date/time back to Epoch (but these seems an unnecessary processing overhead) or come up with a way to parse the datetime field without using betfairlightweight - but neither of these are ideal. Many thanks in advance

---

## 2019-04-24 21:33:20 - general channel

**Filippo Bovo**

Yeah, I had already checked them out. They were helpful.

---

## 2019-04-24 11:40:56 - general channel

**liam**

Betfair AUS have created a easy to follow tutorial for those looking to get started using python [https://betfair-datascientists.github.io/api/apiPythontutorial/](https://betfair-datascientists.github.io/api/apiPythontutorial/)

---

## 2019-04-23 09:11:15 - issues channel

**liam**

Streaming is lightweight so there is no issue in just ignoring markets. You could do this when you pull off the queue or creat your own listener which filters the markets and only puts what you want into the queue 

---

## 2019-04-18 08:16:47 - general channel

**Chris**

Yes, everything has a time stamp, I've sorted the problem now by removing everything that is "inPlay: true" and then grabbing the last remaining value for each player in the file(s)

---

## 2019-04-17 16:15:10 - general channel

**Tom**

[@UFPEU7URG](@UFPEU7URG) That match in question kicked off at 21:15GMT and the timestamp you shared is 103 mins in(depending in timezone). Including half time break the odds seem right. That price of 7.8 would prob be close or even injury time.

---

## 2019-04-17 15:11:51 - general channel

**Chris**

The line in question is `{"op":"mcm","clk":"7248564363","pt":1534629521130,"mc":[{"id":"1.146002987","rc":[{"ltp":7.8,"id":16346804}]}]}`

---

## 2019-04-17 15:10:35 - general channel

**Chris**

I can share the file in question here if that helps (i'm parsing the files using a combination of bash/python to just grab the last price so don't think it's particularly easy to share)

---

## 2019-04-13 19:47:13 - issues channel

**Jack**

is streaming api ffree?

---

## 2019-04-12 16:04:05 - general channel

**Dado**

ok solved but...

---

## 2019-04-12 10:04:47 - general channel

**liam**

sorry i don't really understand the problem without seeing the code

---

## 2019-04-12 10:01:09 - general channel

**Dado**

the problem is that the match odds are not linked with upcoming events data

---

## 2019-04-12 10:00:51 - general channel

**Dado**

language is not a problem

---

## 2019-04-12 09:59:48 - general channel

**Dado**

python...

---

## 2019-04-12 09:44:42 - general channel

**Dado**

anybody knows how to link MATCH ODDS to UPCOMING EVENTS data?

---

## 2019-04-12 07:34:15 - issues channel

**liam**

[@U7QLCB7HA](@U7QLCB7HA) if you are constantly resubscribing then you are missing out on the beauty of streaming 

---

## 2019-04-11 16:03:40 - issues channel

**Dado**

no problem :smile:

---

## 2019-04-11 15:59:35 - issues channel

**OT**

[@U7QLCB7HA](@U7QLCB7HA) I see.. that's a shame for me - I'm using marketId because I pull the ids from a database after I've added my own metadata

---

## 2019-04-11 15:54:10 - issues channel

**OT**

[@UHHQACU9X](@UHHQACU9X) you can just use a typical Python sort method?

---

## 2019-04-11 11:20:00 - general channel

**liam**

Print betfairlightweight.__version__

---

## 2019-04-11 10:35:47 - issues channel

**T**

Hi Liam - um, not sure what you mean (assume Visual Studio code?). I'm running it from a Jupyter Notebook in Python.

---

## 2019-04-11 09:36:35 - general channel

**Rob (NZ)**

awesome sounds good... whats the best documentation I should read up on it?

---

## 2019-04-11 00:58:56 - issues channel

**T**

Any help would be great

---

## 2019-04-09 13:16:09 - general channel

**liam**

Streaming simplifies this as the steaming object contains the market definition which is a slimmed down catalogue 

---

## 2019-04-09 13:08:39 - general channel

**Dado**

Solved! Thanks a lot for your help

---

## 2019-04-09 12:50:06 - issues channel

**Dado**

hi all!



I'm having problems to get player name from selectorid into a TO_SCORE event...

using this:

---

## 2019-04-09 12:48:49 - general channel

**Dado**

why do you need a safe computer to help me? :smile:

---

## 2019-04-09 12:47:21 - general channel

**liam**

Can’t help more tbh as I am not on a safe computer 

---

## 2019-04-09 12:45:02 - general channel

**Dado**

I was thinking that should be a problem of filters/parameters...

---

## 2019-04-09 12:43:23 - general channel

**Dado**

I was thinking that it's a problem of filters/parameters

---

## 2019-04-09 12:31:59 - general channel

**Dado**

I'm having problems to get player name from selectorid into a TO_SCORE event...

---

## 2019-04-09 09:31:47 - general channel

**Rob (NZ)**

awesome, cheers Rory,.. ive started off with the example code on betfair and just trying to learn python.... this was really helpful...  I had to switch placed_bet to order

---

## 2019-04-09 09:16:33 - general channel

**Rory**

place_instruction_reports is a list but this is already covered in the BetfairLightweight docs

---

## 2019-04-09 09:01:25 - general channel

**Rob (NZ)**

Hoping this might be a dumb question ... but is there a easy way of getting betID and assigning it as variable after a order has been successfully submitted... I can see the output and betID inside of the response but im just wondering if there is functionality to easily grab that variable so It can be reused further in the code

---

## 2019-04-08 01:12:53 - general channel

**Rob (NZ)**

Cheers for the help with the adjusting and cancelling bet advice .. was able to code that up and implement that over the weekend...

---

## 2019-04-04 09:37:29 - general channel

**LK**

I believe hping will not keep the connection open. You are implying I guess that betfairlightweight uses requests-session. For the market- and orderstream I agree that the connection is persistent, but not sure how this works for https requests?

---

## 2019-04-04 00:09:19 - general channel

**Rob (NZ)**

What's the best documentation I can find for betfairlightweight...

---

## 2019-04-02 21:56:06 - issues channel

**Paw**

I will give it a go and update you afterwards - thanks for all the help!

---

## 2019-04-02 21:20:00 - issues channel

**Paw**

or to actually formulate my question -&gt; How would I go about modifying the snipped I've send to get continuous update to this market_id with every price change on the ladder? I feel like I can't be that far off..

---

## 2019-04-02 21:13:16 - issues channel

**Paw**

However the streaming seems not to be continuing (only getting one msg just after subscribing)

---

## 2019-03-31 02:57:24 - general channel

**Rob (NZ)**

Any documentation around sessions when using the non interactive login

---

## 2019-03-28 10:40:51 - general channel

**Ajay kumar**

if any one build that can help me?

---

## 2019-03-27 06:51:18 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L150](https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L150)

---

## 2019-03-24 23:20:37 - issues channel

**Paw**

and market_data_filter = streaming_market_data_filter()

---

## 2019-03-24 23:20:22 - issues channel

**Paw**

when i use examplestreaming.py with market_filter = streaming_market_filter(

    market_ids=['156436827']

)

---

## 2019-03-24 21:57:39 - general channel

**Paw**

Hey guys! Like Rob I've just discovered betfairlightweight and looking forward to developing some stuff on my own (as well as contributing to the library). I have extensive Java experience with strong focus on cloud computing (especially Google Cloud) and looking to catch up on my python

---

## 2019-03-16 10:50:29 - general channel

**richard**

Solved ```filters.time_range("2019-03-16T11:00:00Z", "2019-03-16T14:00:00Z")```

---

## 2019-03-16 00:16:10 - general channel

**richard**

Thanks for the help in getting me where i wanted to for one night. Time for bed.

---

## 2019-03-16 00:02:19 - general channel

**richard**

I’m still getting the same empty list but it’s now tomorrow so I’ll come back to it in the morning. Thanks for the help so far.

---

## 2019-03-15 23:45:28 - general channel

**seaders**

```market_filter = streaming_market_filter(

    market_ids=['1.155209408'])

market_data_filter = streaming_market_data_filter(

    fields=['EX_TRADED', 'EX_MARKET_DEF'],

    ladder_levels=3)```

---

## 2019-03-07 13:40:02 - random channel

**agberk**

they only reserve tables for food, but said that there should be no problem getting a table at 1830 - I'll probably get there a bit earlier anyway

---

## 2019-03-05 12:27:33 - issues channel

**seaders**

not when it's resolved (and the money's won or lost)

---

## 2019-03-05 12:24:04 - issues channel

**seaders**

[@U92CASP1B](@U92CASP1B) [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1551481901005000](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1551481901005000)

---

## 2019-03-05 11:58:38 - issues channel

**seaders**

but they come through in the streaming update, though?

---

## 2019-03-05 11:58:09 - issues channel

**liam**

Always been the case, draw back of streaming 

---

## 2019-03-05 11:45:47 - issues channel

**seaders**

[@U4H19D1D2](@U4H19D1D2) [https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/cache.py#L346](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/cache.py#L346)



I was sure it worked differently previously, but for here, how come we only get the data for unmatched_orders, and not the matched_backs and matched_lays?

---

## 2019-03-04 15:51:09 - general channel

**seaders**

So, with some of you guys struggling to get yourselves up and running, and maybe want a bit of a "jump-start", I all but guarantee I'll be able to help, to a greater extent than just on here (but the help I give and advice I give here will still definitely continue)

---

## 2019-03-04 14:14:41 - issues channel

**seaders**

ah, I've sympathies, it ain't an easy problem to solve!

---

## 2019-03-04 14:09:15 - issues channel

**seaders**

I'd consider that question like that statement about porn, if you can imagine it, someone's produced a porn about it

---

## 2019-03-04 13:08:03 - issues channel

**liam**

the default limit is 200 unless you ask bdp to bump it (you need a good reason) but for those that got access to streaming when it was first released there was no limit

---

## 2019-03-04 11:56:50 - issues channel

**ShahGar**

However if I use streaming_market_filter(market_ids=MARKETIDS), it works

---

## 2019-03-04 11:56:11 - issues channel

**ShahGar**

unfortunately, when i run market_filter = streaming_market_filter(event_type_ids=['1'])

I get an empty list from listener.snap(market_ids=MARKETIDS)

---

## 2019-03-04 11:22:25 - issues channel

**ShahGar**

and then to get streaming data of specific market id I can after it use listener.snap(market_ids=MARKETIDS)

---

## 2019-03-04 11:10:07 - issues channel

**ShahGar**

market_filter = streaming_market_filter(market_ids=MARKETIDS)

streaming_unique_id = stream.subscribe_to_markets(market_filter=market_filter,market_data_filter=market_data_filter,conflate_ms=1000)

---

## 2019-03-04 11:08:30 - issues channel

**ShahGar**

my filter is market_data_filter = streaming_market_data_filter(fields=['EX_BEST_OFFERS','EX_MARKET_DEF'],ladder_levels=5,)

---

## 2019-03-04 11:07:25 - issues channel

**liam**

defeats the point of streaming, you need to go up a level on your market filter

---

## 2019-03-04 10:27:59 - issues channel

**liam**

How many are you creating? I have never hit that limit, streaming is designed so that its rare for you to have more than 1 or 2

---

## 2019-03-03 23:17:53 - issues channel

**Newbie99**

well I'm not adding runner names to market_book :slightly_smiling_face: That was my (perceived) problem!



I have the 'market_book' i.e. the state of the market for any given market_id, which is all good. However, visually I can't see what that relates too, hence I want the runner name, so I can see what the id relates to.



But I think, if I'm understanding correctly, essentially I need to create a new dict, rather than trying to mess around with manipulating the existing market_book from market_books?



Maybe I'm explaining  it badly, but in php for example, this is a really simple thing to do, so perhaps its not clear what I'm attempting here?

---

## 2019-03-03 21:35:29 - issues channel

**Newbie99**

yes, this is just stuck on the end of the example streaming code from github. All works fine...other than I'm being a bit dense around whether I can append back into market_book(s) or whether I should just create a new list and go down that route (the end game being to output to a browser, but that's sort of irrelevant for now as my python logic is possibly wrong)

---

## 2019-03-03 21:31:44 - issues channel

**liam**

You using streaming still?

---

## 2019-03-03 14:11:36 - issues channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py#L55](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py#L55)

---

## 2019-03-03 14:07:14 - issues channel

**liam**

What does a called time mean? Streaming gives you the same data as a market book request 

---

## 2019-03-03 13:51:17 - issues channel

**ShahGar**

Is it possible to get the total sizes available to bet on at a called time with the streaming function?

---

## 2019-02-26 15:38:57 - random channel

**liam**

The betfair forum legend ‘ayerobot’ is free and will be making an appearance (he’s a bflw user)

---

## 2019-02-26 14:25:41 - issues channel

**ShahGar**

but still streaming is Always much lower than ordinary

---

## 2019-02-26 13:43:53 - issues channel

**ShahGar**

market_books[1].streaming_update['rc']

Out[62]:

[{'batb': [[0, 1.87, 375.96],

   [1, 1.86, 6157.88],

   [2, 1.85, 1452.26],

   [3, 1.84, 1629.37],

   [4, 1.83, 33.37]],

  'batl': [[0, 1.88, 1260.18],

   [1, 1.89, 742.09],

   [2, 1.9, 1848.84],

   [3, 1.91, 179.7],

   [4, 1.92, 1753.25]],

  'id': 48461},

 {'batb': [[0, 5.2, 1285.12],

   [1, 5.1, 1012.53],

   [2, 5, 3381.38],

   [3, 4.9, 319.46],

   [4, 4.8, 110.05]],

  'batl': [[0, 5.3, 875.66],

   [1, 5.4, 1790.73],

   [2, 5.5, 708.54],

   [3, 5.6, 95.97],

   [4, 5.7, 379.18]],

  'id': 18567},

 {'batb': [[0, 3.6, 3332.53],

   [1, 3.55, 1756.16],

   [2, 3.5, 2042.72],

   [3, 3.45, 2854.77],

   [4, 3.4, 1307.7]],

  'batl': [[0, 3.65, 3415.63],

   [1, 3.7, 4003.54],

   [2, 3.75, 3113.94],

   [3, 3.8, 2565.14],

   [4, 3.85, 982.2]],

  'id': 58805}]

---

## 2019-02-26 13:43:51 - issues channel

**ShahGar**

I have the following output for streaming

---

## 2019-02-26 13:36:36 - issues channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1551186383019800](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1551186383019800)

??

---

## 2019-02-26 13:33:58 - issues channel

**ShahGar**

Why is the bet stakes/liquidities retrieved from the streaming api (output_queue.get or listener.snap) "much lower" from those retrieved from the ordinary betfair api (listMarketBook)?

---

## 2019-02-26 13:07:17 - general channel

**seaders**

(oft times when you do that, you might realise what the solution is yourself, but it certainly helps us to give you a hand, too)

---

## 2019-02-26 13:06:52 - general channel

**seaders**

specifically if you can show what it is via the streaming, the normal call, and via the website

---

## 2019-02-26 13:05:07 - general channel

**ShahGar**

Why is the bet stakes/liquidities retrieved from the streaming api "much lower" from those retrieved from the ordinary betfair api?

---

## 2019-02-23 20:16:32 - issues channel

**Newbie99**

You'd think so...but I do have a habit of some dumb questions when fully sober too!

---

## 2019-02-23 20:07:48 - issues channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1550880399020300](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1550880399020300)

---

## 2019-02-23 20:05:01 - issues channel

**Newbie99**

I'm comfortable with the logic and that I'm looking at the right thing, even if my question was poorly worded

---

## 2019-02-23 20:04:43 - issues channel

**Newbie99**

my only confusion was how to get the output of the snap

---

## 2019-02-23 20:04:08 - issues channel

**seaders**

the streaming update of each of those markets is the update that's come through

---

## 2019-02-23 20:01:00 - issues channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1550880399020300](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1550880399020300)

---

## 2019-02-23 19:47:12 - issues channel

**seaders**

```

market_ids = ['1.130856098']



market_filter = streaming_market_filter(

    market_ids=market_ids)



...



    while True:

        if output_queue.empty():

            time.sleep(0.5)

            continue



        market_books = output_queue.get()

        print(

            'mbs', market_books)

        print(

            'snap', listener.snap(market_ids)

        )```

---

## 2019-02-23 17:06:37 - issues channel

**Newbie99**

yeah I'd already tried that and just got null, so I thought maybe I was misunderstanding what the example meant.



In the console I see:



```

1 None &lt;betfairlightweight.resources.streamingresources.MarketDefinition object at 0x0000012F8BE9E748&gt; 2019-02-23 17:05:49.474000

```

---

## 2019-02-23 17:03:25 - issues channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2019-02-23 10:17:51 - issues channel

**Newbie99**

Ah, maybe I'm misunderstanding the data structure, I assumed that the above simply resulted in the latest update being pushed out (that is what appears to be happening, when I push the .streaming_update), I then need to build the logic to update the correct market at my end (which is what I assumed I'd have to do anyway). But is that not the case then (you believe)?

---

## 2019-02-22 22:51:48 - issues channel

**Newbie99**

Hi, I am back with a question...but don't worry its not code related :slightly_smiling_face: just one of logic!



I'm getting the updates come through, exactly as expected, no issues:



```

{"id":"1.130856098","rc":[{"batb":[[2,3.85,11],[1,3.9,10],[0,3.95,8.38]],"id":10064909}]}

{"id":"1.130856098","rc":[{"batb":[[0,44,6.27],[1,42,2]],"id":12832770},{"batb":[[2,3.8,11],[1,3.85,11],[0,3.9,10.38]],"id":10064909}],"con":true}

{"id":"1.130856098","rc":[{"batb":[[2,40,13.27],[0,44,1]],"id":12832770},{"batl":[[2,5.5,3.13],[1,4.3,16.47],[0,4.2,25.67]],"id":10064909}],"con":true}

```



I'm working on my logic for updating on each update, however before I get too deep in that. I wanted to check if I'd overlooked the obvious when people talk about price caching, is there anything within the wrapper that simply returns the most up-to date complete market state (e.g. can I call a particular function, which already has the logic built in, to show the latest state of a particular market id, as opposed to the last update)?

---

## 2019-02-20 21:06:14 - general channel

**klozovin**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1550696647009000](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1550696647009000)



sure, no problem :slightly_smiling_face: was it hard to get it right? days work? weeks work? :smile:

---

## 2019-02-20 20:15:40 - general channel

**klozovin**

When streaming data do people usually stream prices with _virtual bets_ or without them? What would be the point of not seeing virtual bets?

---

## 2019-02-19 18:47:49 - general channel

**klozovin**

I'm not using bflw, I'm now trying to implement something of my own... so much work goes into this :smile:

---

## 2019-02-19 18:47:12 - general channel

**klozovin**

thanks! that helps...

---

## 2019-02-19 18:40:04 - general channel

**liam**

You not using bflw?

---

## 2019-02-19 18:35:34 - general channel

**klozovin**

man, although there's lots of docs for the Streaming API I still find it hard to get my head around everything...

---

## 2019-02-19 18:05:07 - general channel

**klozovin**

Can't find it in the docs for Streaming API - what happens when the market is suspended? Does that get streamed down?

---

## 2019-02-19 14:17:41 - general channel

**klozovin**

Why do you think you're wrong?

Btw, it says in the table bellow that delayed key can be used for Streaming, but one has to apply

---

## 2019-02-19 14:14:36 - general channel

**klozovin**

[@U5D4ZBEAG](@U5D4ZBEAG) that's what I (implicitly) thought... never checked with BF, though. I've been using my delayed key for all of my testing of the non-streaming API

---

## 2019-02-19 14:13:50 - general channel

**seaders**

are ya not supposed to use the delayed for streaming?

---

## 2019-02-16 18:49:45 - issues channel

**Newbie99**

what it doesn't seem to like however, is if I actually try to emit the following:



```

 market_books = output_queue.get()

        for market_book in market_books:

         emit('my_response', {'data': 'update', 'mb': market_book.streaming_update})

```

---

## 2019-02-16 17:36:45 - general channel

**liam**

[@U92CASP1B](@U92CASP1B) is that using the latest version of bflw? I updated them but never tested 

---

## 2019-02-12 11:48:48 - general channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1549972023018400](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1549972023018400)

---

## 2019-02-09 21:37:46 - issues channel

**seaders**

I'd recommend doing one of the many free Python tutorials online

---

## 2019-02-09 19:13:39 - issues channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1549565443098800](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1549565443098800)

---

## 2019-02-08 17:16:19 - general channel

**agberk**

most likely need to update your version of betfairlightweight

---

## 2019-02-07 20:27:37 - issues channel

**Newbie99**

sorry for the simple questions, I blame it partly on a lack of python knowledge, partly on flu and partly on general stupidity :slightly_smiling_face:

---

## 2019-02-07 12:01:06 - issues channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1533071394000045](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1533071394000045)

---

## 2019-02-07 11:59:22 - issues channel

**Kieran Dawson**

But the market IDs are just numbers for now, so i have no idea how to see what they actually mean

---

## 2019-02-07 11:57:38 - issues channel

**Kieran Dawson**

Hey guys. probably a stupid question but does anyone know some sort of dictionary of MarketIDs?

---

## 2019-02-07 11:19:49 - issues channel

**seaders**

&gt; We’re sorry but it appears there are some problems with our Exchange. Hold tight.  We’re on the case. FYI

 ^^^

---

## 2019-02-07 01:02:11 - issues channel

**seaders**

```

stream = None

queue = None





def get_queue():

    global queue, stream



    if not queue:

        stream, queue = seadersbfstream.subscribe_to(['1.154237752'])

    return queue





@socketio.on('ping')

def handle_message(_message, *_args, **kwargs):

    market_books = get_queue().get()

    print(market_books)



    for market_book in market_books:

        emit(

            'market_book',

            f'{market_book} '

            f'{market_book.streaming_unique_id} '

            f'{market_book.streaming_update}, '

            f'{market_book.market_definition}, '

            f'{market_book.publish_time} '

        )





if __name__ == '__main__':

    socketio.run(app)

    stream.stop()```

---

## 2019-02-06 22:34:37 - issues channel

**Newbie99**

I've been playing around in python and to some extent I can get what I need in the console...however, I'm still stuck with the best way to stream the console results to a webbrowser...I've tried various sockets examples that claim to do the job, but nothing seems to work. Can anyone suggest the best way of getting the console output into a browser (presumably via some kind of websocket connection)?

---

## 2019-02-05 21:04:12 - issues channel

**seaders**

it's the lightweight flag, [https://github.com/liampauling/betfair/blob/a08306a8fc27af9fab046f3b9f343e6780053c10/betfairlightweight/apiclient.py#L8](https://github.com/liampauling/betfair/blob/a08306a8fc27af9fab046f3b9f343e6780053c10/betfairlightweight/apiclient.py#L8)

---

## 2019-02-04 18:25:49 - general channel

**liam**

FYI Betfair are restricting TLS to 1.2 



[https://forum.developer.betfair.com/forum/developer-program/announcements/27206-betfair-api-login-tls-1-2-from-7th-february-2019](https://forum.developer.betfair.com/forum/developer-program/announcements/27206-betfair-api-login-tls-1-2-from-7th-february-2019) 



[https://www.calazan.com/how-to-check-if-your-python-app-supports-tls-12/](https://www.calazan.com/how-to-check-if-your-python-app-supports-tls-12/)

---

## 2019-02-02 21:08:40 - general channel

**wsdlwizard**

Thank you this solved it, I had used the wrong order of parameters. I used the order from the comments between the """ and """ I changed the order to this and it works fine thank you! test = CurrentOrder('1234567',5.5,4.5,1.0,'12321546','PERSIST','PERSIST',datetime.datetime(2019,1,1,12,0,0),'','654321','BACK',0.0,0.0,20.0,0.0,0.0,'GOOD',{'price':2.0,'size':20.0},datetime.datetime(2019,1,1,12,0,0))

---

## 2019-02-02 17:58:03 - general channel

**jhaa**

thanks for your help

---

## 2019-02-02 17:53:42 - general channel

**seaders**

and I'm getting order info no problem via the wrapper

---

## 2019-02-02 05:43:36 - general channel

**jhaa**

why was list_runner_book not implemented? I can't see how to filter list_market_boook for selection ids so pulling more than necessary for now

---

## 2019-01-31 23:22:57 - issues channel

**Rob**

how to recover from this and keep the streaming connection open? thx

---

## 2019-01-31 23:20:10 - issues channel

**Rob**

while streaming today got several this several times...socket.timeout: The read operation timed out

---

## 2019-01-31 21:53:35 - issues channel

**Newbie99**

Still persisting with my attempt to login to the streaming API via node.js too...but failing miserably on that front! If I make progress, I'll post it on the main forum!

---

## 2019-01-31 20:20:51 - issues channel

**Newbie99**

That worked btw, managed to figure it out, thank you for your help. I have manged to get in at least :slightly_smiling_face:

---

## 2019-01-31 17:30:42 - issues channel

**Newbie99**

Hi Liam, I don't unfortunately...but I didn't realise I could do that! I assumed with streaming I had to have cert login working

---

## 2019-01-30 22:07:08 - issues channel

**seaders**

don't do cert generation with python, just use command line, their docs do cover it

---

## 2019-01-29 19:51:15 - issues channel

**agberk**

Not sure it will solve your problem but what happens when you use either `-H "X-Application: curlCommandLineTest"` or `-H "X-Application: ${your_app_key}"`

---

## 2019-01-29 19:49:54 - issues channel

**agberk**

There's some conflicting information on the bot login page [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Non-Interactive+%28bot%29+login) at one point it says:

&gt; Include a custom Header called “X-Application” with a value that identifies your application.  The value is not validated and is only used to help with troubleshooting and diagnosing any problems.

And then at another it says

&gt; X-Application - You must set the X-Application header to your application key.

Finally the curl example requests has the following headers:

&gt; -H "X-Application: curlCommandLineTest"

---

## 2019-01-28 20:05:11 - general channel

**wsdlwizard**

Python 3.6

---

## 2019-01-28 19:58:56 - issues channel

**wsdlwizard**

Yes, I had the old version 1.8.0 so all is good after upgrading to 1.8.2 Thanks very much for the help)

---

## 2019-01-28 19:37:50 - issues channel

**Rory**

[@UFQK2K4PK](@UFQK2K4PK) see this post by Seaders ... [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1545064303107800](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1545064303107800)

---

## 2019-01-22 00:39:57 - general channel

**seaders**

at this point though, I do think you should maybe try up your python knowledge, cos what we're discussing really is that

---

## 2019-01-22 00:15:11 - general channel

**Rob**

while True:

    list[betfairlightweight.resources.MarketBook] = output_queue.get()

---

## 2019-01-21 23:52:36 - general channel

**Rob**

while True:

    books: List[betfairlightweight.resources.MarketBook] = output_queue.get()

---

## 2019-01-21 23:46:51 - general channel

**seaders**

`market_books: List[betfairlightweight.resources.MarketBook] = output_queue.get()` will do the cast

---

## 2019-01-21 23:43:55 - general channel

**Rob**

thanks for helping

---

## 2019-01-21 23:43:12 - general channel

**Rob**

while True:

    market_books = output_queue.get()



    print(type(market_books))

    print(type(market_books[0].runners[0]))

    market_books: List[betfairlightweight.resources.MarketBook] = market_books

---

## 2019-01-21 23:41:01 - general channel

**seaders**

(if you're using proper python 3 'n all that)

---

## 2019-01-21 23:40:35 - general channel

**seaders**

`market_books: List[betfairlightweight.resources.MarketBook] = market_books`

---

## 2019-01-21 22:56:36 - general channel

**Rob**

my auto complete doesn´t help at all, i must be missing some filters or something similar right?

---

## 2019-01-21 22:10:58 - general channel

**Rob**

for market_book in market_books:

        print(market_book.streaming_update,str("end")

            #market_book.streaming_unique_id,  # unique id of stream (returned from subscribe request)

            #market_book.streaming_update,  # json update received

            #market_book.market_definition,  # streaming definition, similar to catalogue request

            #market_book.publish_time  # betfair publish time of update

        )

        for runner in market_book.runners:

            print(runner.last_price_traded) &lt;-- this does not work

---

## 2019-01-21 22:04:58 - general channel

**liam**

Streaming_update is there so you can see what caused the update but can be ignored 

---

## 2019-01-21 22:03:34 - general channel

**Rob**

getting the data like ltp, etc, without have to deserialize the output from "market_book.streaming_update

---

## 2019-01-21 19:22:53 - general channel

**liam**

Why are you interested in the update? In normal use you ignore it and use the MarketBook as per, bflw has done the heavy lifting and given you an up to date book 

---

## 2019-01-21 19:20:05 - general channel

**Rob**

[@U4H19D1D2](@U4H19D1D2)  thanks for the quick reply...yes, that's exactly what i am using apart from listener.snap( i dont know what's the diference) ....



Im trying to subscribe to just one market 



for market_book in market_books:

            Print(market_book.streaming_update)



And i get a crlf delimited json with everything from the active filters on it, all together, no idea how to extract for example the ltp or best offers separately, and for example if i try to validate the entire streaming update json line or to view it using an online jsonviewer it says json invalid...

---

## 2019-01-21 07:51:42 - general channel

**liam**

[@UDVM2FWGM](@UDVM2FWGM) have you seen the example? [https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2019-01-21 00:37:42 - general channel

**Rob**

[@U4H19D1D2](@U4H19D1D2) Hello Liam, how to get price and other data per runner using streaming? Im using marketbook_streaming update, how to isolate data from there? Without streaming i could do a loop for runner in marketbook and that would do it...thanks a lot

---

## 2019-01-13 20:16:16 - general channel

**Rob**

also when printing streaming updates, any way of converting this update to normal Json instead of Json CRLF?

---

## 2019-01-05 16:27:37 - general channel

**liam**

Just remove your sleep and problem solved 

---

## 2019-01-05 16:22:00 - general channel

**Rob**

I was trying to get data every second to store in a database so I'd have an easier time later on

---

## 2019-01-05 16:21:26 - general channel

**liam**

[https://docs.python.org/3/library/queue.html](https://docs.python.org/3/library/queue.html)

---

## 2019-01-05 16:20:11 - general channel

**Rob**

I have a timer running every 1 second, calling output_queue.get() then writing the data to a database

---

## 2019-01-05 16:20:08 - general channel

**liam**

It just a python queue so just the one 

---

## 2019-01-02 16:29:01 - general channel

**Rory**

another question ... do Betfair ids for soccer teams remain consistent ... e.g. selection_ids in the MarketDefinition.runners ... so the Arsenal ID is always 1096?

---

## 2018-12-28 18:05:17 - general channel

**seaders**

For my purposes, we never want that, so I exclude them. I do a python check to ensure the float handicap is not an int, and also that the handicap * 2 is an int

---

## 2018-12-12 16:14:38 - general channel

**JMaster**

agreed, ATOM I found more effort than helpful for me. Ok, cheers [@U5D4ZBEAG](@U5D4ZBEAG) ill proceed with PyCharm

---

## 2018-12-12 16:05:03 - general channel

**seaders**

all the while having the source code and/or docs open (both the betfairlightweight docs, and the official betfair docs helps loads when you're starting off)

---

## 2018-12-12 16:02:32 - general channel

**seaders**

1st step (for yourself, and for me to be able to give you any help) is use simple english to say *exactly* what you're after, and no more

---

## 2018-12-12 13:34:27 - general channel

**JMaster**

Resolved my issue. If any Windows users need a hand feel free to direct message me.

---

## 2018-12-07 12:57:43 - issues channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4H05ML2E/p1544187441002100](https://betfairlightweight.slack.com/archives/C4H05ML2E/p1544187441002100)

---

## 2018-12-03 19:40:55 - general channel

**JMaster**

['C:/Users/mrmax/Desktop/MRHP/betfair-master/betfairlightweight/certs/myusername.crt', 'C:/Users/mrmax/Desktop/MRHP/betfair-master/betfairlightweight/certs/myusername.key']

---

## 2018-12-03 19:11:04 - general channel

**JMaster**

C:\Users\mrmax\Desktop\MRHP\betfair-master\betfairlightweight\certs\

---

## 2018-12-03 07:10:10 - general channel

**liam**

bflw isn't picking up your certs but looks of things

---

## 2018-12-02 12:05:40 - general channel

**Donkey**

evidence that it works:



```# python exampleone.py

[&lt;EventTypeResult&gt;]

7 Horse Racing 703

1 market catalogues returned

1.151985717 2m4f Nov Hrd 2018-12-02 12:25:00

18172586 Garrettstown 0.0

13148638 Paper Promise 0.0

21865555 The Con Man 0.0

18959506 Huntsmans Jog 0.0

14022736 Aint My Fault 0.0

21621734 The Sting 0.0

17209417 Blaydon 0.0

21865554 Salven 0.0

17627171 Terminal One 0.0

12201701 Cushy Butterfield 0.0

16910094 Hitman Fred 0.0

1.151985717 False OPEN 94163.98

18172586 ACTIVE 0.0```

---

## 2018-12-02 11:59:04 - general channel

**Donkey**

you’ve been great at helping me out, I’m on the right path now

---

## 2018-12-02 11:50:24 - general channel

**Donkey**

ok let me try, thanks for the help, appreciated

---

## 2018-12-02 11:16:44 - general channel

**Donkey**

[@UEH82Q5HT](@UEH82Q5HT) I used the following website to generate the certs [http://www.bespokebots.com/betfair-ssl-certs.php](http://www.bespokebots.com/betfair-ssl-certs.php)  not sure if that can help you.

---

## 2018-12-02 11:16:00 - general channel

**JMaster**

[@U4H19D1D2](@U4H19D1D2) do you know how to get the Betfair certificates please? IT seems Betfairs API certificate site is down... [https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Certificate+Generation+With+XCA](https://docs.developer.betfair.com/display/1smk3cen4v3lu3yomq5qye0ni/Certificate+Generation+With+XCA)

---

## 2018-12-02 11:07:39 - general channel

**liam**

Can’t help in regards to that, you need to contact betfair, have you tried changing your password?

---

## 2018-11-20 15:55:13 - general channel

**jhaa**

I am aware that betfair does not provide this wrapper and  I am very grateful that you decide to open source your work. I always try to figure out stuff myself before I ask however the information is somewhat spread out(wiki, examples, betfair docs, github issues, google) and sometimes I miss things. I would volunteer to update some of the documentation at some point when I feel qualified.

---

## 2018-11-19 20:09:54 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1542657033127900](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1542657033127900) Please note that this library is not maintained by Betfair themselves, the docs they provide should be referred to for how to use. I have put up a few examples and the wiki (very dated) but I strongly recommend reviewing the documentation they provide

---

## 2018-11-19 15:58:00 - general channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1542642751105000](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1542642751105000)

[@UE72WCRR8](@UE72WCRR8) old = `[https://identitysso.betfair.com/api/](https://identitysso.betfair.com/api/)`, new = `[https://identitysso-cert.betfair.com/api/certlogin](https://identitysso-cert.betfair.com/api/certlogin)`

---

## 2018-11-16 08:23:49 - general channel

**liam**

Been discussed a few times, here’s how I do it [https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L84](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L84)

---

## 2018-11-13 14:31:05 - general channel

**seaders**

[https://en-betfair.custhelp.com/app/answers/detail/a_id/413/~/exchange%3A-what-is-commission-and-how-is-it-calculated%3F](https://en-betfair.custhelp.com/app/answers/detail/a_id/413/~/exchange%3A-what-is-commission-and-how-is-it-calculated%3F)

---

## 2018-11-13 14:18:13 - general channel

**Daydreamer**

Hi guys ,

Quick question. Do I pay commission for a single back bet?

---

## 2018-11-07 09:04:05 - general channel

**George**

My question is - did I *really* get part of my order filled at 270 even though my limit price was 250? Do Betfair seriously allow this as long as the avgPriceMatched is below the limit price?

---

## 2018-11-07 09:01:31 - general channel

**George**

Hi guys - quick question about the Betfair matching algorithm. I sent a LAY order for more than £25 with a limit price of 250. Here is the state of the available_to_lay book at the time the order was sent:

£6.62 @ 200

£7.01 @ 220

£7.01 @ 270

So you would think I'd get filled for £13.63 at an average price of 210.3, right?

---

## 2018-11-03 13:23:34 - general channel

**seaders**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/utils.py#L3](https://github.com/liampauling/betfair/blob/master/betfairlightweight/utils.py#L3)

---

## 2018-11-02 12:38:56 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2018-11-02 12:34:52 - general channel

**ak**

Thanks for the quick reply. Yes, this is for my own understanding. I had a quick look at bflw for parsing, but did not see which module that parsed raw JSON files. If I'm mistaken, could you please point me to the right direction?

---

## 2018-11-02 11:55:55 - general channel

**liam**

I assume you are not using bflw if you are looking at this level or is this for your own understanding?

---

## 2018-11-02 11:52:48 - general channel

**ak**

Hello all. There's been a lot of helpful discussions here, thank you!



I just acquired some sample data for the PRO Betfair exchange data. May I check with you if my understanding of the data is correct?



In particular, I have the following sequence of updates for some `(market_id, selection_id)`:



```

           pt            atb                        atl            trd

1517684220247            NaN             [(8.8, 10.53)]            NaN

1517684221450            NaN              [(8.8, 7.46)]            NaN

1517684223688            NaN  [(7.6, 3.59), (7, 17.98)]            NaN

1517684228928            NaN                        NaN  [(6.2, 1.06)]

1517684228928  [(6.2, 0.94)]                        NaN            NaN

1517684229024            NaN                         []            NaN

1517684229361            NaN                         []            NaN

1517684234009  [(5.8, 3.83)]                        NaN            NaN

1517684234188            NaN                         []            NaN

1517684234286            NaN                [(7, 3.86)]            NaN

```



For rows where there are no updates for `atb` and `atl`, is it correct to assume that there's no changes on the ladders? So that we should forward fill just like the following?



```

           pt             atb                        atl            trd

1517684220247  [[5.7, 55.06]]             [[8.8, 10.53]]            NaN

1517684221450  [[5.7, 55.06]]              [[8.8, 7.46]]            NaN

1517684223688  [[5.7, 55.06]]  [[7.6, 3.59], [7, 17.98]]            NaN

1517684228928  [[5.7, 55.06]]  [[7.6, 3.59], [7, 17.98]]  [[6.2, 1.06]]

1517684228928   [[6.2, 0.94]]  [[7.6, 3.59], [7, 17.98]]            NaN

1517684229024   [[6.2, 0.94]]                         []            NaN

1517684229361   [[6.2, 0.94]]                         []            NaN

1517684234009   [[5.8, 3.83]]                         []            NaN

1517684234188   [[5.8, 3.83]]                         []            NaN

1517684234286   [[5.8, 3.83]]                [[7, 3.86]]            NaN

```



Also, I'm wondering why did `atb` and `atl` move without any trades? Is this due to virtual bets as mentioned by [@UDCDFJ0NS](@UDCDFJ0NS) a couple of weeks ago?

---

## 2018-10-29 19:44:10 - random channel

**Daydreamer**

did anyone have the same problem?

---

## 2018-10-26 10:04:41 - random channel

**OT**

I prefer python

---

## 2018-10-26 10:04:39 - random channel

**OT**

Interesting ideas, qt for python especially

---

## 2018-10-25 16:50:01 - random channel

**agberk**

I did come across this recently [https://github.com/dddomodossola/remi](https://github.com/dddomodossola/remi) haven't used it to build anything yet but would like to try it; a qt port for python was also released earlier this year [https://blog.qt.io/blog/2018/05/04/hello-qt-for-python/](https://blog.qt.io/blog/2018/05/04/hello-qt-for-python/)

---

## 2018-10-25 14:32:56 - random channel

**OT**

I'd prefer python but python and gui is a bit.. you know!

---

## 2018-10-19 19:28:39 - general channel

**liam**

Betdaq has released streaming now though

---

## 2018-10-19 18:59:01 - general channel

**liam**

Integrating streaming should be plug and play as I have tried to keep it simple and it’s much cleaner than constantly polling. Only issue which you are likely to have is that it doesn’t include orders that have already been matched 

---

## 2018-10-19 18:56:54 - general channel

**Rory**

will have a look at streaming first .. thanks for the pointer

---

## 2018-10-19 18:54:46 - general channel

**Rory**

I actually have streaming hooked up for in-play bets ... but not fully tested

---

## 2018-10-19 18:54:07 - general channel

**Rory**

why am I not using streaming ... pretty sure I meant to look at that ... DAMN

---

## 2018-10-19 18:53:28 - general channel

**liam**

Well your not using streaming so that counts.. :)

---

## 2018-10-19 18:08:31 - general channel

**Rory**

quick question ....

---

## 2018-10-19 14:26:44 - general channel

**ReddyK**

Hi, I just went through the documentation, it seems like in order to place bet we will need run a pythn command from terminal?

---

## 2018-10-19 13:40:33 - general channel

**ReddyK**

Btw, Could contribute to the repo, not a python person but could understand and write the code

---

## 2018-10-19 13:37:48 - general channel

**ReddyK**

Keen to understand how betfairlightweight works, right now playing around with it

---

## 2018-10-18 16:55:38 - general channel

**seaders**

np, these aren't noob questions you're asking!

---

## 2018-10-18 16:55:13 - general channel

**LK**

ok. got it again. sorry for all the newbie questions guys

---

## 2018-10-18 15:56:57 - general channel

**LK**

My question is the 2 trades at 6.8 and 7 for sizes of 0.17, they were not visible in the available to lay side of the book?

---

## 2018-10-18 10:17:15 - general channel

**LK**

OK. that's clear then. I can manage that. Thank you again for the quick reply. I'm pretty sure I will have more questions, so I will be back for more haha.

---

## 2018-10-13 10:55:40 - random channel

**OT**

the documentation, I mean

---

## 2018-10-13 09:37:58 - random channel

**OT**

i save the race/event data to a database, then do a query on that event, sort by the start time, then you get the races in order. you can then commit the race number to the db to limit processing time

---

## 2018-10-10 16:08:38 - random channel

**seaders**

how to get the race number from a place market you're interested in

---

## 2018-10-09 12:06:07 - general channel

**bb**

thanks a lot for your help

---

## 2018-10-09 12:02:57 - general channel

**bb**

I saw that but am not sure what mandatory parameter is missing, cant see anything in the documentation that I dont have

---

## 2018-09-24 17:54:41 - general channel

**agberk**

Not a loaded question, but you trust those matches after you've made them for the remainder of the event?

---

## 2018-09-24 17:49:54 - general channel

**agberk**

[@U5D4ZBEAG](@U5D4ZBEAG) you've seen a lot of incorrect names right? Do they ever get resolved/changed during the event?

---

## 2018-09-21 14:19:46 - general channel

**George**

Here's a snippet of SP data - anyone know how to interpret this?

```{u'actualSP': 6.4,

 u'backStakeTaken': [{u'price': 6.4, u'size': 2414.66}],

 u'farPrice': 5.87,

 u'layLiabilityTaken': [{u'price': 6.4, u'size': 563.85}],

 u'nearPrice': 6.2}```

You would hope that 1 + 2414.66 / 563.85 == 6.4, but that's definitely not true...

---

## 2018-09-21 10:25:19 - general channel

**George**

how do you think we can solve the problem without ignore images?

---

## 2018-09-21 10:04:58 - general channel

**liam**

[@UCQB6S222](@UCQB6S222) Yeah i find the data is shit, I am very wary of adding something as extreme as that because it impacts those who record data manually (like myself) where these issues don’t seem to be a problem

---

## 2018-09-21 10:03:32 - issues channel

**liam**

[https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L111](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L111)

---

## 2018-09-19 18:15:29 - general channel

**Ian**

I'm receiving 'AppKey is not configured for service' when I try and start flumine

---

## 2018-09-19 18:13:41 - general channel

**Ian**

(flumine) ian@KYLBU C:\code\flumine

$ pip freeze

betfairlightweight==0.0.0b3

boto3==1.9.4

botocore==1.12.4

certifi==2018.8.24

chardet==3.0.4

ciso8601==2.0.1

docutils==0.14

idna==2.7

jmespath==0.9.3

python-dateutil==2.7.3

requests==2.19.1

retrying==1.3.3

s3transfer==0.1.13

six==1.11.0

ujson==1.35

urllib3==1.23

---

## 2018-09-19 18:13:37 - general channel

**Ian**

Evening all - I'm using the following, in a clone of the latest flumine

---

## 2018-09-19 15:18:18 - general channel

**George**

I don't think it's viable to reduce the number of times I call that line, so I have to try to figure out how to make each call a bit faster

---

## 2018-09-13 14:57:14 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2018-09-13 14:53:19 - general channel

**George**

Hi, me again - what is the right way to stop the stream?   flumine.start() never seems to exit. Thanks

---

## 2018-09-13 10:03:44 - general channel

**liam**

storage_engine = storageengine.Local('/fluminetests')

---

## 2018-09-13 09:49:52 - general channel

**George**

Flumine doesnt seem to be doing anything... here is the stdout, any help?

```

2018-09-13 08:49:06,647 | INFO | ['flumine/main.py'] | main.py | main

2018-09-13 08:49:06,647 | WARNING | Market Filter not provided, defaulting to GB and IE racing | main.py | main

2018-09-13 08:49:06,647 | WARNING | Market Data Filter not provided, defaulting to None | main.py | main

2018-09-13 08:49:06,648 | INFO | Recorder created 6d4ba5e2 | recorder.py | recorder

2018-09-13 08:49:06,649 | INFO | Starting stream: 1000.0 | flumine.py | flumine

```

---

## 2018-09-12 10:10:37 - general channel

**Ian**

another flumine q - looking at the code it would seem that it creates an APIclient - this will then look for  username in environment or take it from betfairlightweight settings - could someone advise where I set these?

---

## 2018-09-07 13:45:54 - general channel

**George**

thank you, that looks helpful!

---

## 2018-09-07 13:42:42 - general channel

**George**

Hi everyone. Just getting starting with this code and I have a simple question. How would I log-in without using "cert" (is that possible?) Or alternatively how would I log some data without using "cert"? Thanks in advance.

---

## 2018-09-04 06:24:55 - issues channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L221](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L221)

---

## 2018-09-03 21:48:38 - issues channel

**Rob**

thanks for the reply btw - much appreciated, the package is proving very useful, both for Betfair and indirectly for motivating me to learn more Python

---

## 2018-09-03 21:44:17 - issues channel

**Rob**

I think so : `betfairlightweight==1.7.2`

---

## 2018-09-03 21:41:55 - issues channel

**liam**

I assume latest version of bflw?

---

## 2018-09-03 21:22:25 - issues channel

**Rob**

python 3.6.6, although I'm not sure I made that choice conciously

---

## 2018-08-30 13:17:57 - general channel

**Ben**

Sorry out of topic question, does someone have a documentation on the new betdaq push api? 

---

## 2018-08-30 09:29:04 - general channel

**jfo**

python man.. :joy:

---

## 2018-08-30 08:28:19 - general channel

**favetelinguis**

[@U4H19D1D2](@U4H19D1D2) would you mind giving some more details about how to interpret overround as an indicator?

---

## 2018-08-28 12:23:02 - general channel

**favetelinguis**

I guess the problem then is if the process that generates the tissue price changes this would not be a valid way to align markets either :slightly_smiling_face:

---

## 2018-08-24 12:56:50 - random channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4H05KKMY/p1535111716000100](https://betfairlightweight.slack.com/archives/C4H05KKMY/p1535111716000100)

I don't really.  I think I'm well past it at this point

---

## 2018-08-24 12:50:16 - random channel

**seaders**

[https://github.com/pinnacleapi/pinnacleapi-documentation/blob/master/GettingStarted.md](https://github.com/pinnacleapi/pinnacleapi-documentation/blob/master/GettingStarted.md)

---

## 2018-08-24 12:44:28 - random channel

**seaders**

and I've run into problems with that, as well, especially when they randomly add in pitcher names to MLB games

---

## 2018-08-22 15:58:20 - general channel

**Matt P**

I was going to ask if there was a part of python i could read up on that might make this whole endeaver a bit easier!

---

## 2018-08-22 15:58:17 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py)

---

## 2018-08-22 15:56:15 - general channel

**liam**

you should try working at the socket level! bflw abstracts a lot of the complication away

---

## 2018-08-22 15:48:29 - general channel

**Matt P**

I'm getting constant warning messages printed, that's what made me suspect I was doing something wrong: "WARNING:betfairlightweight.streaming.listener:[Listener: 13]: stream already registered, replacing data"

---

## 2018-08-22 15:24:52 - general channel

**liam**

filter on racing / uk and let streaming do it for you

---

## 2018-08-22 15:23:54 - general channel

**Matt P**

Hi guys, question re streaming... I'm looking to stream UK racing prices say, 10 minutes before the off. I've managed to gather all the market _ids for the day and begin pulling data, but how would be the best way to go about updating (in real time) the list of markets I'm subscribed to?

---

## 2018-08-16 21:41:36 - general channel

**Rory**

&gt;there's a huge difference between the regular "object" return, and the "raw" mode, what betfair gives over the streaming service

---

## 2018-08-16 21:39:11 - general channel

**seaders**

for the "regular" api client, the passive GET/POST calls, it's not *quite* as relevant (for regular usage), but for the streaming area, there's a huge difference between the regular "object" return, and the "raw" mode, what betfair gives over the streaming service

---

## 2018-08-13 06:41:51 - general channel

**liam**

Not anymore, streaming has been tested / used a lot, I must process about a million updates + a day and have done since May 2017 

---

## 2018-08-12 22:54:11 - general channel

**Rob**

once you've made a call to `self._socket.start(async=False)` or equivalent, are there occasions where problems occur that can also be caught? Or is it a case of checking for that some other way, then restarting the stream if needed?

---

## 2018-08-12 22:52:28 - general channel

**Rob**

thanks - that looks useful (in fact, flumine is close to what I'm trying to do myself, so will take a look)

---

## 2018-08-12 19:04:43 - general channel

**liam**

There has been a few discussions regarding this (have a search) but this is what I do (in a separate thread) [https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77)

---

## 2018-08-12 10:53:03 - general channel

**Rob**

is there any reason to use the streaming API in this case? or is it easier to stick with the request based API?

---

## 2018-08-12 10:51:53 - general channel

**Rob**

I had a quick question - I haven't used the streaming API before, but for the approach I'm taking I'm quite happy to get data regularly, say, the state of each horse race every 1 second

---

## 2018-08-07 15:56:58 - issues channel

**man**

Sorry for that question I just noticed that the data is written to txt file

---

## 2018-08-07 15:43:59 - issues channel

**man**

I was able to start my historical stream. The problem is that I'm not getting any data out of Queue which i have given for the listener like in examplestreaming.py. Is the Queue correct way to get the parsed data out?

---

## 2018-08-03 13:42:28 - general channel

**seaders**

One of the big things BF have a problem with is you re-publishing their odds.  If you're not doing that, nor hinting at doing that, they *shouldn't* have a problem with it. If ever you want to re-publish their odds, you need to agree very specific licensing terms with them

---

## 2018-07-31 22:09:16 - issues channel

**Rory**

rather than unzip every file, I just handle them using the bz2 module in Python

---

## 2018-07-31 17:22:34 - issues channel

**man**

Is the streaminghistoricalexample.py up to date? I found that here:

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py)

the HistoricalStream class is different

---

## 2018-07-31 16:44:13 - issues channel

**seaders**

There's example python code somewhere on here that does that, search for gzip

---

## 2018-07-31 16:40:27 - issues channel

**man**

Do you have anyidea how to deal with that?

---

## 2018-07-31 09:56:15 - general channel

**t1234**

Where did the API documentation go? [http://docs.developer.betfair.com](http://docs.developer.betfair.com) not responding

---

## 2018-07-30 14:30:18 - general channel

**Ian**

(casbi) ian@KYOFBU C:\code\casbi\casbi       

$ ver                                        

                                             

Microsoft Windows [Version 10.0.17134.191]   

                                             

(casbi) ian@KYOFBU C:\code\casbi\casbi       

$ python --version                           

Python 3.7.0                                 

                                             

(casbi) ian@KYOFBU C:\code\casbi\casbi       

$ pip freeze                                 

betfairlightweight==1.7.0                    

certifi==2018.4.16                           

chardet==3.0.4                               

ciso8601==2.0.1                              

idna==2.7                                    

requests==2.19.1                             

ujson==1.35                                  

urllib3==1.23                                

                                             

(casbi) ian@KYOFBU C:\code\casbi\casbi       

$

---

## 2018-07-30 14:24:44 - general channel

**liam**

version? python version? system info?

---

## 2018-07-26 19:52:06 - general channel

**erlend**

Hi, does anyone know how to filter out harness racing from the horse racing markets?

---

## 2018-07-26 16:38:30 - random channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py#L32](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/scores.py#L32)

---

## 2018-07-24 20:55:55 - general channel

**Jonatan (skyw)**

Ah sry I mean in the streaming api

---

## 2018-07-24 10:24:32 - general channel

**Mo**

[https://betfairdevelopersupport.zendesk.com/hc/en-us/articles/360006589232-How-do-I-access-the-Betfair-Exchange-API-Stream-API-Documentation-](https://betfairdevelopersupport.zendesk.com/hc/en-us/articles/360006589232-How-do-I-access-the-Betfair-Exchange-API-Stream-API-Documentation-)

---

## 2018-07-24 10:17:22 - general channel

**Unknown**

[@UBS7QANF3](@UBS7QANF3) shared a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBJMHNAEP/api-referenceguide-offlineversion-22ndjuly2015.pdf|API-ReferenceGuide-OfflineVersion-22ndJuly2015.pdf](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBJMHNAEP/api-referenceguide-offlineversion-22ndjuly2015.pdf|API-ReferenceGuide-OfflineVersion-22ndJuly2015.pdf)

---

## 2018-07-23 16:27:40 - general channel

**seaders**

I put in a week, or 2s work of taking over the async my stuff about a year ago, and doing some funky custom stuff with the queues, and basically haven't had a problem since

---

## 2018-07-18 16:01:01 - general channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBTQ2LMKR/image.png|image.png](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBTQ2LMKR/image.png|image.png)

---

## 2018-07-18 15:56:42 - general channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBTPYKTRV/image.png|image.png](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBTPYKTRV/image.png|image.png)

---

## 2018-07-18 15:54:26 - general channel

**Rory**

there's obviously a fuzzy matching module for Python that I haven't got around to trying, that may help with the aliases

---

## 2018-07-18 15:31:56 - general channel

**seaders**

I do have a few buddies I've met along the way that help out for a lil while every now and again, but yeah, I'm the only dev, or dev-like person

---

## 2018-07-18 15:03:20 - general channel

**seaders**

end up getting that, and working there for 3 years, then got bored and applied to a few places as a Python / Ruby dev

---

## 2018-07-18 14:40:15 - general channel

**seaders**

I was talking with a guy who helps creates the horse odds for PaddyPower, and he was talking about like 3 GIANT bets they made

---

## 2018-07-18 14:37:40 - general channel

**liam**

Surely they hedge daily? Or does it not include markets that haven’t completed?



[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1531919211000348](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1531919211000348)

---

## 2018-07-18 14:23:58 - general channel

**seaders**

streaming API

---

## 2018-07-18 14:23:55 - general channel

**seaders**

also, from the stuff I'ma doin', it's all Python 3 with queues up the wazoo and all DB stuff lazy'd/delayed

---

## 2018-07-18 14:23:34 - general channel

**klozovin**

So are you using the streaming API or request/response?

---

## 2018-07-18 14:21:53 - general channel

**klozovin**

Cool! Do you find Python is fast enough for your usecase?

---

## 2018-07-18 14:20:24 - general channel

**seaders**

yep yep - Backend is all Python (web-framework - Flask, database: sql-alchemy on MySQL on Amazon RDS), then the frontend is mainly jquery-easyui and a little select2

---

## 2018-07-18 14:12:33 - general channel

**klozovin**

and arguably, being on the edge of legality is what helped them to offer the best product :slightly_smiling_face:

---

## 2018-07-18 14:03:00 - general channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBSQ9SXSR/untitled.mov|Untitled.mov](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBSQ9SXSR/untitled.mov|Untitled.mov)

---

## 2018-07-18 10:56:18 - general channel

**liam**

The documentation site ([http://docs.developer.betfair.com|docs.developer.betfair.com](http://docs.developer.betfair.com|docs.developer.betfair.com)) is expected to be up and running within 1-2 weeks.

 

The main [http://developer.betfair.com|developer.betfair.com](http://developer.betfair.com|developer.betfair.com) site is likely to be unavailable for a further 4-6 weeks

---

## 2018-07-17 21:43:35 - random channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBRMHGU3T/pasted_image_at_2018_07_17_09_43_pm.png|Pasted image at 2018-07-17, 9:43 PM](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBRMHGU3T/pasted_image_at_2018_07_17_09_43_pm.png|Pasted image at 2018-07-17, 9:43 PM)

---

## 2018-07-17 21:43:00 - random channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBSCHR1BP/pasted_image_at_2018_07_17_09_42_pm.png|Pasted image at 2018-07-17, 9:42 PM](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBSCHR1BP/pasted_image_at_2018_07_17_09_42_pm.png|Pasted image at 2018-07-17, 9:42 PM)

---

## 2018-07-17 20:29:53 - random channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBRL1AAKB/image.png|image.png](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBRL1AAKB/image.png|image.png)

---

## 2018-07-10 00:41:33 - general channel

**Jonatan (skyw)**

[https://github.com/betfair/stream-api-sample-code/blob/master/stream-api-specification.pdf](https://github.com/betfair/stream-api-sample-code/blob/master/stream-api-specification.pdf)



Here is the pdf for streaming api from 2017 atleast

---

## 2018-07-09 19:22:40 - general channel

**favetelinguis**

the betfair developer docs has been down also, lots of problems

---

## 2018-07-04 20:53:56 - general channel

**Jonatan (skyw)**

Solved it.

---

## 2018-07-04 11:16:45 - general channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBJMHNAEP/api-referenceguide-offlineversion-22ndjuly2015.pdf|API-ReferenceGuide-OfflineVersion-22ndJuly2015.pdf](https://betfairlightweight.slack.com/files/U5D4ZBEAG/FBJMHNAEP/api-referenceguide-offlineversion-22ndjuly2015.pdf|API-ReferenceGuide-OfflineVersion-22ndJuly2015.pdf)

---

## 2018-06-18 13:43:27 - general channel

**liam**

and here: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/metadata.py#L66](https://github.com/liampauling/betfair/blob/master/betfairlightweight/metadata.py#L66)

---

## 2018-06-18 13:35:02 - general channel

**liam**

sorry you said streaming

---

## 2018-06-18 13:16:52 - general channel

**mbk**

my question is: does anybody know what minimum stake is? I can't find where it's defined

---

## 2018-06-16 21:00:24 - issues channel

**favetelinguis**

Is it common for Betfair not to send name for market and runners in the streaming MarketDefinition? They are just None wich intuitively seems wrong.

---

## 2018-06-10 10:57:28 - general channel

**Unknown**

[@U5Q3P94NT](@U5Q3P94NT) uploaded a file: [https://betfairlightweight.slack.com/files/U5Q3P94NT/FB45PKHQQ/image.png|image.png](https://betfairlightweight.slack.com/files/U5Q3P94NT/FB45PKHQQ/image.png|image.png)

---

## 2018-06-10 10:44:07 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/filters.py#L100](https://github.com/liampauling/betfair/blob/master/betfairlightweight/filters.py#L100)

---

## 2018-06-10 10:42:32 - general channel

**Unknown**

[@U5Q3P94NT](@U5Q3P94NT) uploaded a file: [https://betfairlightweight.slack.com/files/U5Q3P94NT/FB4A3EC1X/image.png|image.png](https://betfairlightweight.slack.com/files/U5Q3P94NT/FB4A3EC1X/image.png|image.png)

---

## 2018-06-07 18:55:16 - general channel

**Mihai**

I've tried integrating the above on examplestreaminghistorical.py with no success. Any ideas, please?

---

## 2018-06-07 05:30:37 - general channel

**liam**

market_def.name / event_name  [https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L128](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L128)

---

## 2018-06-06 21:29:56 - general channel

**Unknown**

[@UB28PPRBJ](@UB28PPRBJ) uploaded a file: [https://betfairlightweight.slack.com/files/UB28PPRBJ/FB29M8V1N/image.png|image.png](https://betfairlightweight.slack.com/files/UB28PPRBJ/FB29M8V1N/image.png|image.png)

---

## 2018-06-06 21:26:13 - general channel

**Ben**

yes this example is simple in examplestreaminghistorical

---

## 2018-06-06 21:25:06 - general channel

**Mihai**

Ok.. so I managed to get an output using only the file from examplestreaminghistorical.py.

---

## 2018-06-06 21:23:12 - general channel

**Ben**

I think there is a problem in your tutorial is on the custom HistoricalStream class

---

## 2018-06-06 18:03:13 - issues channel

**Unknown**

[@U93H3483E](@U93H3483E) uploaded a file: [https://betfairlightweight.slack.com/files/U93H3483E/FB2RULYBC/-.py|Untitled](https://betfairlightweight.slack.com/files/U93H3483E/FB2RULYBC/-.py|Untitled)

---

## 2018-06-06 18:02:00 - issues channel

**Unknown**

[@U93H3483E](@U93H3483E) uploaded a file: [https://betfairlightweight.slack.com/files/U93H3483E/FB259J072/-.txt|Untitled](https://betfairlightweight.slack.com/files/U93H3483E/FB259J072/-.txt|Untitled)

---

## 2018-06-02 07:02:00 - general channel

**liam**

Streaming does that for you unless I have misunderstood?

---

## 2018-06-01 23:52:14 - general channel

**Jonatan (skyw)**

Thanks liam, General question which probably have been up before, how do everyone handle subscription to new markets, continously updating new markets as they come.

---

## 2018-06-01 14:45:00 - general channel

**Rory**

quick question ... is it possible to get historical score/timeline data?

---

## 2018-06-01 14:44:25 - general channel

**Rory**

firstly, nice work on the Python wrapper. It's a real time saver ...

---

## 2018-05-31 13:04:46 - general channel

**Mihail**

Good afternoon, can someone tell me how to receive real-time game events?

---

## 2018-05-31 05:49:44 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77)

---

## 2018-05-27 10:42:19 - general channel

**Disco**

Hello. Does anybody here (_except Liam_) use *flūmine* on regular basis? Need some help with setting it up (particularly, getting selected event types. I'm new in API but think that maybe somebody has the code so there won't be a need to reinvent the wheel).

---

## 2018-05-12 15:27:00 - general channel

**richard**

Hi all, I'm trying to add stop losses to my bot. I'm wondering if it's possible to add a back bet at less than the market rate, so if the market ever falls to that level it will automatically get matched? - is this or any other stop loss type method possible on the betfair API?

---

## 2018-05-06 07:36:13 - general channel

**liam**

Yep just have flumine running full time, uses hardly any ram or cpu. From market open to finish all data

---

## 2018-05-06 07:33:36 - general channel

**liam**

No problem, if you could provide an index in return, ie what markets are actually in there and if there are any empties/corrupt as I know there will be a few days missing that would be great 

---

## 2018-05-06 07:24:23 - general channel

**liam**

Which markets? I use flumine to store data straight to s3 and it costs me pennies 

---

## 2018-05-06 07:19:08 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L124](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L124)

---

## 2018-05-06 07:15:03 - general channel

**favetelinguis**

Lets say you have a race with 10runners, when you use the betfair API the fist message you get contains information about all the runners right?

---

## 2018-05-06 07:14:07 - general channel

**favetelinguis**

hehe no problem I might be off with my question, i will explain my thoghts better 1sec

---

## 2018-05-06 07:10:45 - general channel

**favetelinguis**

not an issue with betfairlightweight just a complaint about the data betfair sells and a question how others are dealing with it :slightly_smiling_face:

---

## 2018-05-01 21:50:21 - general channel

**erlend**

Hi, has anyone found a good way to use market catalogue data with streaming?

---

## 2018-04-26 20:47:07 - general channel

**mbk**

thanks in advance for your help :slightly_smiling_face:

---

## 2018-04-26 20:46:59 - general channel

**mbk**

hey guys, a while ago I asked about how best to use the stream in async mode, and Liam suggested I follow a pattern like [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1505305250000059](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1505305250000059). Alternatively he pointed to [https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77). Broadly my implementation is to follow the example from agberk, where I run the `betfair_stream_run` in it's own thread. However, with that approach I can not call `stop` on the stream because that's inside of another thread. So how could I then disconnect from the betfair socket?

---

## 2018-04-19 14:39:24 - random channel

**hugo**

Heard good things about [https://github.com/python-attrs/attrs](https://github.com/python-attrs/attrs) as well

---

## 2018-04-19 12:45:08 - issues channel

**erlend**

Can I do this in betfairlightweight?

---

## 2018-04-19 12:44:59 - issues channel

**erlend**

So betfair dev support got back to me with:

The issue is occurring because your App Key is configured as a web application.

Web application App Key must use the Bearer token as the "session" (token_type + " " + access_token). Please see documentation [http://docs.developer.betfair.com/docs/display/1smk3cen4v3lu3yomq5qye0ni/Vendor+Services+in+API-NG#VendorServicesinAPI-NG-MakingAPICallsOnTheUsersBehalf](http://docs.developer.betfair.com/docs/display/1smk3cen4v3lu3yomq5qye0ni/Vendor+Services+in+API-NG#VendorServicesinAPI-NG-MakingAPICallsOnTheUsersBehalf)

---

## 2018-04-18 19:42:36 - random channel

**liam**

Data classes in 3.7 look cool and could make API wrapper resources much cleaner [https://blog.jetbrains.com/pycharm/2018/04/python-37-introducing-data-class/](https://blog.jetbrains.com/pycharm/2018/04/python-37-introducing-data-class/)

---

## 2018-04-17 20:57:12 - issues channel

**liam**

That using a API-NG appKey and authorised for streaming?

---

## 2018-04-17 20:55:39 - issues channel

**erlend**

Yo, I'm getting  "INVALID_SESSION_INFORMATION: Session must be 'Bearer &lt;session&gt;' for a WebApp'" when running examplestreaming.py

---

## 2018-04-04 10:03:58 - random channel

**liam**

Good question, I have been using c5 spot instances but looking at fargate to reduce costs. But like you not sure where to start with building my own... 

---

## 2018-03-27 14:14:13 - general channel

**liam**

It is when streaming, don’t think it’s present with snap though 

---

## 2018-03-26 19:18:39 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2018-03-26 19:17:30 - general channel

**marco**

it is verbatim what is in the "streaming" section of the README

---

## 2018-03-26 19:13:29 - general channel

**liam**

*authorised for streaming

---

## 2018-03-26 17:28:05 - general channel

**marco**

Hi, can someone please point me to the documentation regarding the certs mentioned in the github repository which are required to login?

---

## 2018-03-24 18:14:41 - random channel

**jfo**

:wave: i’ve mentioned this once before and haven’t done _much_ on it since I did the first push, but i’ve just updated a Swift library for betfair api to use Apple’s new NIO framework if anyone is interested: [https://github.com/foulkesjohn/BetSwift](https://github.com/foulkesjohn/BetSwift)

---

## 2018-03-23 15:23:39 - general channel

**istb**

Ah I see, I am not sure how to do that

---

## 2018-03-23 15:16:22 - general channel

**Unknown**

[@U9UB05M3J](@U9UB05M3J) uploaded a file: [https://betfairlightweight.slack.com/files/U9UB05M3J/F9UHLC20H/pasted_image_at_2018_03_23_03_16_pm.png|Pasted image at 2018-03-23, 3:16 PM](https://betfairlightweight.slack.com/files/U9UB05M3J/F9UHLC20H/pasted_image_at_2018_03_23_03_16_pm.png|Pasted image at 2018-03-23, 3:16 PM)

---

## 2018-03-23 15:16:03 - general channel

**Unknown**

[@U9UB05M3J](@U9UB05M3J) uploaded a file: [https://betfairlightweight.slack.com/files/U9UB05M3J/F9W55PUNB/pasted_image_at_2018_03_23_03_15_pm.png|Pasted image at 2018-03-23, 3:15 PM](https://betfairlightweight.slack.com/files/U9UB05M3J/F9W55PUNB/pasted_image_at_2018_03_23_03_15_pm.png|Pasted image at 2018-03-23, 3:15 PM)

---

## 2018-03-23 15:02:55 - general channel

**istb**

ty for your help [@U4H19D1D2](@U4H19D1D2)

---

## 2018-03-23 14:28:04 - general channel

**liam**

[https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)

---

## 2018-03-20 07:24:18 - general channel

**liam**

Or to resubscribe instead: [https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77)

---

## 2018-03-20 07:23:02 - general channel

**liam**

Here is an example of one pattern [https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1505305250000059](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1505305250000059)

---

## 2018-03-18 15:24:31 - general channel

**liam**

Betfairdata doesn’t work since they removed it from the site, you have to use the historical streaming data they now provide 

---

## 2018-03-14 11:43:52 - general channel

**klozovin**

How often does Betfair Streaming send data down the pipe? I can't find anything in the documentation... I'm guessing it has to aggregate data on some timescale? Milisecond? Couple of milis?

---

## 2018-03-12 21:12:11 - general channel

**Jonatan (skyw)**

It is superclear if you try to read instead of just blindly asking questions.

---

## 2018-03-12 20:59:05 - general channel

**Unknown**

[@U847PLYN6](@U847PLYN6) uploaded a file: [https://betfairlightweight.slack.com/files/U847PLYN6/F9N47MJD7/screen_shot_2018-03-12_at_20.58.24.png|Screen Shot 2018-03-12 at 20.58.24.png](https://betfairlightweight.slack.com/files/U847PLYN6/F9N47MJD7/screen_shot_2018-03-12_at_20.58.24.png|Screen Shot 2018-03-12 at 20.58.24.png)

---

## 2018-03-10 22:11:34 - general channel

**Tom**

my certs folder is PycharmProjects/betfair/betfairlightweight/certs

---

## 2018-03-10 22:02:48 - general channel

**liam**

[https://underround.wordpress.com/2017/04/14/betfairlightweight-v1-0/](https://underround.wordpress.com/2017/04/14/betfairlightweight-v1-0/)

---

## 2018-03-10 21:13:04 - general channel

**Unknown**

[@U847PLYN6](@U847PLYN6) uploaded a file: [https://betfairlightweight.slack.com/files/U847PLYN6/F9MQ06SF5/-.py|Untitled](https://betfairlightweight.slack.com/files/U847PLYN6/F9MQ06SF5/-.py|Untitled)

---

## 2018-03-10 13:23:01 - general channel

**Unknown**

[@U847PLYN6](@U847PLYN6) uploaded a file: [https://betfairlightweight.slack.com/files/U847PLYN6/F9NRTHAR5/screen_shot_2018-03-10_at_13.22.23.png|Screen Shot 2018-03-10 at 13.22.23.png](https://betfairlightweight.slack.com/files/U847PLYN6/F9NRTHAR5/screen_shot_2018-03-10_at_13.22.23.png|Screen Shot 2018-03-10 at 13.22.23.png)

---

## 2018-03-10 13:15:38 - general channel

**Unknown**

[@U847PLYN6](@U847PLYN6) uploaded a file: [https://betfairlightweight.slack.com/files/U847PLYN6/F9MPG8TV2/-.py|Untitled](https://betfairlightweight.slack.com/files/U847PLYN6/F9MPG8TV2/-.py|Untitled)

---

## 2018-03-10 08:06:24 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/baseendpoint.py#L49](https://github.com/liampauling/betfair/blob/master/betfairlightweight/endpoints/baseendpoint.py#L49)

---

## 2018-03-08 19:28:26 - general channel

**Tom**

[@U4H19D1D2](@U4H19D1D2) I have the vars set up in a .bash_profile like so



export appkey =“123xyz123xyz”

export password = “somepassword123”

export username = “someusername123”



I've created the .bash_profile file in betfairlightweight/certs/home

would this be correct?

---

## 2018-03-04 02:30:44 - general channel

**Unknown**

[@U9CDT999N](@U9CDT999N) uploaded a file: [https://betfairlightweight.slack.com/files/U9CDT999N/F9J68V9L2/image.png|image.png](https://betfairlightweight.slack.com/files/U9CDT999N/F9J68V9L2/image.png|image.png)

---

## 2018-02-26 07:11:25 - general channel

**liam**

its been mentioned before I think, here is an email from August detailing the results from a questionnaire they did:

---

## 2018-02-26 07:03:53 - general channel

**liam**

[@U9CDT999N](@U9CDT999N) you can use lightweight to process [https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaminghistorical.py)

---

## 2018-02-23 10:33:31 - general channel

**agberk**

Streaming API isn't turned on by default so you need to raise a ticket with Betfair developer support asking them to activate it on your account

---

## 2018-02-22 23:38:01 - general channel

**Unknown**

[@U9CDT999N](@U9CDT999N) uploaded a file: [https://betfairlightweight.slack.com/files/U9CDT999N/F9DKW7KAR/image.png|image.png](https://betfairlightweight.slack.com/files/U9CDT999N/F9DKW7KAR/image.png|image.png)

---

## 2018-02-22 23:22:00 - general channel

**Henry**

Just wondering is data streaming api for free?

---

## 2018-02-21 21:31:16 - general channel

**liam**

[https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L77)

---

## 2018-02-17 17:34:34 - general channel

**Ian**

Thanks for your help again [@U5D4ZBEAG](@U5D4ZBEAG)

---

## 2018-02-17 17:33:26 - general channel

**Ian**

ok - i understand it is not an easy question to answer :slightly_smiling_face:

---

## 2018-02-17 17:30:20 - general channel

**seaders**

all my strategies are completely on the streaming service

---

## 2018-02-17 17:22:37 - general channel

**Ian**

i'll submit a ticket - i just thought that streaming would be "better" than polling but maybe I should just start there..

---

## 2018-02-17 17:19:13 - general channel

**seaders**

that'd be your problem

---

## 2018-02-17 17:12:49 - general channel

**seaders**

can you do a "normal" connect to BetFair API?

---

## 2018-02-17 17:08:41 - general channel

**Ian**

I can logon to BF - my key was enabled for streaming

---

## 2018-02-17 17:06:02 - general channel

**seaders**

Can't be 100% about it, but I get that problem intermittently and just assume it's something going a bit off on Betfair's side

---

## 2018-02-17 16:50:05 - general channel

**Ian**

stream.start(async=True) seems to be the first problem (naturally)

---

## 2018-02-17 16:48:40 - general channel

**Ian**

I'm beginning to dig into the problem but posting it up here incase anyone has seen this following the examples

---

## 2018-02-17 16:45:21 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F9AP5LS2E/-.py|Untitled](https://betfairlightweight.slack.com/files/U7R5CEDAL/F9AP5LS2E/-.py|Untitled)

---

## 2018-02-17 16:44:14 - general channel

**Ian**

afternoon all. I'm looking at the streaming endpoint and following the exmaple at [https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py](https://github.com/liampauling/betfair/blob/master/examples/examplestreaming.py)

---

## 2018-02-06 22:27:34 - issues channel

**Unknown**

[@U8J6SKR5E](@U8J6SKR5E) shared a file: [https://betfairlightweight.slack.com/files/U8J6SKR5E/F94UPJCM8/-|Untitled](https://betfairlightweight.slack.com/files/U8J6SKR5E/F94UPJCM8/-|Untitled)

---

## 2018-02-06 21:51:15 - issues channel

**liam**

Lol how do you even send posts like that. What are you trying to do as you don’t need to touch the streaming update, you can just access the prices like you would from a normal market book response, like the bottom of example one 

---

## 2018-02-06 21:13:48 - issues channel

**Unknown**

[@U8J6SKR5E](@U8J6SKR5E) shared a file: [https://betfairlightweight.slack.com/files/U8J6SKR5E/F94SVMLMS/-|Untitled](https://betfairlightweight.slack.com/files/U8J6SKR5E/F94SVMLMS/-|Untitled)

---

## 2018-02-06 21:11:06 - issues channel

**Unknown**

[@U8J6SKR5E](@U8J6SKR5E) shared a file: [https://betfairlightweight.slack.com/files/U8J6SKR5E/F951FA28M/-|Untitled](https://betfairlightweight.slack.com/files/U8J6SKR5E/F951FA28M/-|Untitled)

---

## 2018-02-05 22:46:31 - issues channel

**seaders**

[@U4H19D1D2](@U4H19D1D2) I've just PR'd a test which fails the snap thingy in Python 3

---

## 2018-02-05 21:44:25 - issues channel

**seaders**

^^^ in Python 2, you're all fine

---

## 2018-02-05 18:46:14 - issues channel

**seaders**

They *basically* act like their "iter" equivalents in python 2.x (all those functions have been removed)

---

## 2018-02-05 18:43:45 - issues channel

**seaders**

It is in python 3

---

## 2018-02-05 16:54:10 - general channel

**seaders**

So, bflightweight uses a python thing called "locals", which is a way to get all current local variables

---

## 2018-02-05 15:26:05 - general channel

**liam**

streaming?

---

## 2018-02-05 15:24:24 - general channel

**Unknown**

[@U92CASP1B](@U92CASP1B) uploaded a file: [https://betfairlightweight.slack.com/files/U92CASP1B/F94RP7SAJ/-.py|Untitled](https://betfairlightweight.slack.com/files/U92CASP1B/F94RP7SAJ/-.py|Untitled)

---

## 2018-02-04 16:44:44 - general channel

**Jonatan (skyw)**

there are documentation on betfairs developer page how to do it

---

## 2018-02-04 13:56:12 - general channel

**liam**

Welcome yeh raise a ticket with support (clarification: your app key has to be authorised to allow streaming) 

---

## 2018-02-04 13:33:57 - general channel

**Ben**

Quick question, I was trying to streaming api. It is telling me "I don't have authorisation" . Does it require some kind of approval from Betfair? 

---

## 2018-02-01 17:35:00 - general channel

**liam**

They use Kafka for streaming I think they made a decision on the structure of the streams which makes filtering by competition difficult, that’s the response I got anyway

---

## 2018-02-01 17:06:20 - general channel

**Jonatan (skyw)**

yeah read the document now, I wonder if the just forgot it in the documentation or lazy. Well thanks for the answares.

---

## 2018-02-01 16:10:55 - general channel

**Jonatan (skyw)**

although, Is there any reason why not competition_id is not implementet in market_streaming_filter as it is in market_filter. I find it hard to filter out events in english premier leuague for example

---

## 2018-02-01 16:06:22 - general channel

**Jonatan (skyw)**

Thanks! This helps alot! Then it will be super easy to work with!

---

## 2018-01-26 02:58:21 - issues channel

**OT**

I have had lots of problems with the historic data API. I suspect it has some rate limiting on it (and bandwidth throttling).

---

## 2018-01-25 10:00:29 - issues channel

**liam**

[https://github.com/liampauling/betfair/blob/UAT/betfairlightweight/endpoints/historic.py#L167](https://github.com/liampauling/betfair/blob/UAT/betfairlightweight/endpoints/historic.py#L167)

---

## 2018-01-23 11:22:12 - general channel

**Ian**

Morning all - minor update re the recursion issue I was having with vscode last week, confirmed as an issue : [https://github.com/Microsoft/vscode-python/issues/581](https://github.com/Microsoft/vscode-python/issues/581)

---

## 2018-01-12 15:35:57 - issues channel

**mikey155**

I think I'm missing something e.g. changing update_cache? I can figure out how to get results from your code like driving a car but am no good under the bonnet - need to learn plenty more Python

---

## 2018-01-12 15:35:12 - issues channel

**liam**

Yeh I strongly advise not updating any of the resources. The runner name is stored in the definition and not not provided in the book. Have you seen the following which shows how to access name? [https://files.slack.com/files-pri/T4G9NBD2M-F89QVUUF9/-.py](https://files.slack.com/files-pri/T4G9NBD2M-F89QVUUF9/-.py)

---

## 2018-01-12 15:31:54 - issues channel

**mikey155**

And changed RunnerBook in streamingresources as follows:

---

## 2018-01-12 15:29:50 - issues channel

**mikey155**

Liam, In examplestreaminghistorical I modified def on_process as follows:

---

## 2018-01-12 11:23:11 - general channel

**Ian**

Yup :slightly_smiling_face: - thanks again for your help

---

## 2018-01-12 11:22:47 - general channel

**seaders**

anywho, you know what to do -&gt; [https://github.com/Microsoft/vscode-python/issues?utf8=%E2%9C%93&amp;q=locals](https://github.com/Microsoft/vscode-python/issues?utf8=%E2%9C%93&amp;q=locals)

---

## 2018-01-12 11:21:47 - general channel

**seaders**

yeah, I'm not 100% sure what level the python things are on VS

---

## 2018-01-12 11:19:03 - general channel

**seaders**

which overrides python's "locals" system one

---

## 2018-01-12 11:15:47 - general channel

**seaders**

So the *literal* python code, even the compiled code should be the same, as well as any underline system code, should be the same

---

## 2018-01-12 06:58:36 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8SMASRE2/recorder_py.py|recorder.py](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8SMASRE2/recorder_py.py|recorder.py)

---

## 2018-01-12 06:52:17 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RNM58UB/output.txt|output.txt](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RNM58UB/output.txt|output.txt)

---

## 2018-01-12 06:39:50 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8SM6N746/screen_shot_2018-01-12_at_06.39.30.png|Screen Shot 2018-01-12 at 06.39.30.png](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8SM6N746/screen_shot_2018-01-12_at_06.39.30.png|Screen Shot 2018-01-12 at 06.39.30.png)

---

## 2018-01-12 00:25:49 - general channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1515694558000321](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1515694558000321)

do you mean 1.5.3?

---

## 2018-01-11 23:41:42 - general channel

**seaders**

[@U7R5CEDAL](@U7R5CEDAL) can you throw me a screenshot of your folder structure (all names of python file names &amp; folders), and I'll set up the exact same, to see if I can repro my side

---

## 2018-01-11 18:48:31 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8REKQ0UT/-.txt|Untitled](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8REKQ0UT/-.txt|Untitled)

---

## 2018-01-11 18:38:19 - general channel

**seaders**

Python version? Operating system you're on?

---

## 2018-01-11 18:24:59 - general channel

**Unknown**

[@U4H19D1D2](@U4H19D1D2) uploaded a file: [https://betfairlightweight.slack.com/files/U4H19D1D2/F8RE50199/-.py|Untitled](https://betfairlightweight.slack.com/files/U4H19D1D2/F8RE50199/-.py|Untitled)

---

## 2018-01-11 18:23:22 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RE41NF5/-.py|Untitled](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RE41NF5/-.py|Untitled)

---

## 2018-01-11 18:05:31 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RDT4T51/-.txt|Untitled](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RDT4T51/-.txt|Untitled)

---

## 2018-01-11 18:04:20 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RGRAHT4/-.txt|Untitled](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RGRAHT4/-.txt|Untitled)

---

## 2018-01-11 18:02:25 - general channel

**Unknown**

[@U7R5CEDAL](@U7R5CEDAL) uploaded a file: [https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RL4N9B7/-.txt|Untitled](https://betfairlightweight.slack.com/files/U7R5CEDAL/F8RL4N9B7/-.txt|Untitled)

---

## 2018-01-11 17:42:08 - general channel

**seaders**

I've just tried that and it ran without a problem?

---

## 2018-01-11 11:45:17 - issues channel

**seaders**

some places on the BetFair API will update that time, as they get updates... some *won't*

---

## 2018-01-11 11:36:13 - issues channel

**liam**

Look at line 35 in streaming resources 

---

## 2018-01-10 16:27:29 - general channel

**mbk**

btw - can you recommend any sources that helped you design the client as it is?

---

## 2018-01-10 16:21:36 - general channel

**mbk**

I joined this channel because I am planning to use the streaming functionality and have a problem

---

## 2018-01-09 22:05:22 - general channel

**Tom**

[@U5D4ZBEAG](@U5D4ZBEAG) Thanks so much for your help. This has helped me a lot.

---

## 2018-01-01 23:56:42 - general channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/F8LQYLCE7/-.py|Untitled](https://betfairlightweight.slack.com/files/U5D4ZBEAG/F8LQYLCE7/-.py|Untitled)

---

## 2018-01-01 23:22:15 - general channel

**Tom**

[@U4H19D1D2](@U4H19D1D2) I'm trying to loop through all the text files(json objects) I've downloaded from betfair historical website and extract, time, player name event name and last traded price. I'm struggling to modify the code to get eventName and I'm still trying to figure out what I need to over-ride in order to get a loop to work to run through a file directory.  I would like to know how to extract last traded price, event name runners for all events between a date range? Is there much modifications needed to lightweight to do that?

---

## 2018-01-01 02:03:42 - general channel

**Unknown**

[@U847PLYN6](@U847PLYN6) uploaded a file: [https://betfairlightweight.slack.com/files/U847PLYN6/F8LQAGH0U/-.txt|Untitled](https://betfairlightweight.slack.com/files/U847PLYN6/F8LQAGH0U/-.txt|Untitled)

---

## 2017-12-30 20:57:30 - issues channel

**Lennart**

Sorry for the silly questions - I'm sure this is pretty rudimentary

---

## 2017-12-30 19:48:26 - issues channel

**Unknown**

[@U88ENUXN2](@U88ENUXN2) uploaded a file: [https://betfairlightweight.slack.com/files/U88ENUXN2/F8LNJPRLM/-.txt|Untitled](https://betfairlightweight.slack.com/files/U88ENUXN2/F8LNJPRLM/-.txt|Untitled)

---

## 2017-12-22 09:06:56 - general channel

**Alexander**

Thank you for the quick reply.

Will read more about the API and this library and do lots of testing before I try to place bets. 

Was a question that was nagging in my head so I had to ask :blush:

---

## 2017-12-21 21:49:48 - general channel

**liam**

Yeh the streaming side is a bit complicated, have a look at the baseclient/baseendpoint.py/baseresource.py to get an idea of how it all fits together. Its been about 2yrs, most of that has been updates from people on here to deal with betfair changing things

---

## 2017-12-21 21:34:41 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L141](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L141)

---

## 2017-12-21 21:28:50 - general channel

**Tom**

I've noticed that eventName = none in streaming resources. I'm not sure why certain definitions in Market definitions are selected to =none. Is there any reason why certain market definitions are set to null?

---

## 2017-12-20 21:46:09 - issues channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L203](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L203)

---

## 2017-12-20 21:40:12 - issues channel

**liam**

Is this historical? Initial image or update? What does .streaming_update look like?

---

## 2017-12-20 21:39:57 - issues channel

**OT**

an empty list would be a bit more Pythonic, I think

---

## 2017-12-18 11:44:58 - general channel

**liam**

[@U6PGKT04U](@U6PGKT04U) you able to be more specific? / does this help: [https://betfairlightweight.slack.com/files/U4H19D1D2/F89QVUUF9/-.py](https://betfairlightweight.slack.com/files/U4H19D1D2/F89QVUUF9/-.py)

---

## 2017-12-15 00:40:29 - general channel

**seaders**

```

apiclient = APIClient('aa', 'bb', 'cc')



stream = apiclient.streaming.create_historical_stream(

    directory='/Users/seaders/Downloads/data/xds/historic/BASIC/27641921/27641921')

stream.start(async=False)```

---

## 2017-12-14 02:47:24 - general channel

**seaders**

just remember that the whole file *isn't* json, so renaming the file ".json" ain't really helpful

---

## 2017-12-14 02:38:57 - general channel

**seaders**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L286](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/betfairstream.py#L286)

---

## 2017-12-14 02:35:54 - general channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1513215451000008](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1513215451000008)

---

## 2017-12-14 02:34:46 - general channel

**seaders**

re-reading your initial question,

---

## 2017-12-14 02:24:28 - general channel

**Tom**

That's the format I get when I open it in the text editor. The problem I'm having trying to return a dict of only the data I want

---

## 2017-12-14 02:17:54 - general channel

**seaders**

and she's worked without a problem

---

## 2017-12-14 02:17:40 - general channel

**seaders**

```

stream = apiclient.streaming.create_historical_stream(

    directory='/Users/seaders/Downloads/data/xds/historic/BASIC/27641921/27641921',

    listener=listener)

```

---

## 2017-12-14 02:10:36 - general channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/F8EEJVB42/image.png|image.png](https://betfairlightweight.slack.com/files/U5D4ZBEAG/F8EEJVB42/image.png|image.png)

---

## 2017-12-13 09:13:26 - general channel

**liam**

The data isn't perfect and yes I have seen the score update incorrectly. Betfair also offer score data (only tennis) but you need to get your appkey authorised. Not sure what you mean by disconnect, it's an http api (not streaming) so you have to call it 

---

## 2017-12-13 09:10:08 - general channel

**aag**

[@U4H19D1D2](@U4H19D1D2) also can you help with this that it is not tolerant to network disconnect or if betfair goes down, then it doesnt reconnect

---

## 2017-12-03 17:27:22 - general channel

**Lennart**

Hey everyone, just wanted to leave a quick message introducing myself. I come from an econ/finance background and my coding experience is limited to some data analysis in python with both financial and sports data. I'm excited to get going on betfair! Very happy to have found this repo and slack group so but thanks for that to everyone involved!

---

## 2017-11-20 20:11:32 - random channel

**liam**

Good question, I haven’t actually timed it but it’s certainly sub 1s, I will time it tomorrow 

---

## 2017-11-19 15:37:31 - general channel

**OT**

is it just me or is golang project structure quite frustrating? compared to python, anyway

---

## 2017-11-12 17:25:46 - general channel

**liam**

[@U4UUKF9LG](@U4UUKF9LG) nice you get streaming working? 

---

## 2017-11-02 17:39:12 - general channel

**liam**

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L108](https://github.com/liampauling/betfair/blob/master/betfairlightweight/baseclient.py#L108)

---

## 2017-10-30 13:10:08 - general channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1509368970000432](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1509368970000432)

---

## 2017-10-30 13:09:32 - general channel

**Unknown**

[@U5D4ZBEAG](@U5D4ZBEAG) uploaded a file: [https://betfairlightweight.slack.com/files/U5D4ZBEAG/F7R9M7GM6/pasted_image_at_2017_10_30_01_09_pm.png|Pasted image at 2017-10-30, 1:09 PM](https://betfairlightweight.slack.com/files/U5D4ZBEAG/F7R9M7GM6/pasted_image_at_2017_10_30_01_09_pm.png|Pasted image at 2017-10-30, 1:09 PM)

---

## 2017-10-30 10:04:14 - general channel

**Ian**

The library looks great - I’m a Delphi .net/c# dev but enjoying learning python

---

## 2017-10-30 00:55:06 - general channel

**GC**

Any good documentation on EX_BEST_OFFERS vs EX_ALL_OFFERS? I can't wrap my head around it. For most of my responses in the Horse Racing market, the responses are the exact same if I switch the value.

---

## 2017-10-28 22:27:31 - general channel

**GC**

Cheers for the help [@U5D4ZBEAG](@U5D4ZBEAG)

---

## 2017-10-28 22:22:10 - general channel

**seaders**

Must be a problem on BF's side, probably need to contact the help support

---

## 2017-10-26 22:01:10 - issues channel

**liam**

You can use c in python relatively easily, something I want to do but need to wait for my programming skills to catch up  

---

## 2017-10-26 21:46:36 - issues channel

**OT**

Does golang have packages like Python?

---

## 2017-10-26 21:14:11 - issues channel

**liam**

Yeh, don’t have an example how to use the historical endpoint though

---

## 2017-10-26 21:10:00 - issues channel

**liam**

To do a racing market, python: 3mins ish, golang: 8s and this is without goroutines, just copying lightweights design 

---

## 2017-10-04 18:59:42 - general channel

**liam**

what version of python are you using?

---

## 2017-10-04 18:19:09 - general channel

**jfo**

wondering if there are better ways in python?

---

## 2017-10-04 18:18:59 - general channel

**jfo**

anyone done any async callbacks in python? i’m looking at using the accepted answer here: [https://stackoverflow.com/questions/1239035/asynchronous-method-call-in-python](https://stackoverflow.com/questions/1239035/asynchronous-method-call-in-python)

---

## 2017-09-26 17:57:33 - general channel

**seaders**

but in the `streaming_update`

---

## 2017-09-26 17:54:49 - general channel

**seaders**

[@U4H19D1D2](@U4H19D1D2) is 

[https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L479](https://github.com/liampauling/betfair/blob/master/betfairlightweight/resources/streamingresources.py#L479)

correct?

---

## 2017-09-13 20:55:54 - general channel

**seaders**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1505327158000262](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1505327158000262)

---

## 2017-09-13 20:51:22 - general channel

**liam**

I assume the cache is None and the update isn't an 'img', so should be able to catch it here: [https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L124](https://github.com/liampauling/betfair/blob/master/betfairlightweight/streaming/stream.py#L124)

---

## 2017-09-13 19:38:36 - general channel

**seaders**

ok, replacing the above with 

```

def betfair_stream_run(bf_market_stream):

    """

     :param betfairlightweight.streaming.BetfairStream bf_market_stream:

    """

    market_id = None

    market_ids = ['1.134151108', '1.134182080']

    last_market_ids = None



    while bfstream.continue_streaming:

        market_id = next(m_id for m_id in market_ids if m_id != market_id)



        new_market_ids = {market_id}

        subscribe_kwargs = {}

        if new_market_ids == last_market_ids:

            subscribe_kwargs.update(

                initial_clk=bf_market_stream.listener.initial_clk,

                clk=bf_market_stream.listener.clk)

        last_market_ids = new_market_ids



        print 'starting up, m_id:', market_id, \

            'subscribe_kwargs:', subscribe_kwargs



        bf_market_stream.subscribe_to_markets(

            market_filter=dict(marketIds=new_market_ids),

            market_data_filter={

                'fields': ['EX_BEST_OFFERS_DISP', 'EX_BEST_OFFERS',

                           'EX_ALL_OFFERS',

                           'EX_TRADED', 'EX_TRADED_VOL', 'EX_LTP',

                           'EX_MARKET_DEF',

                           'SP_TRADED', 'SP_PROJECTED'],

                'ladderLevels': 3},

            **subscribe_kwargs

        )



        bf_market_stream.start()```

---

## 2017-09-13 19:25:58 - general channel

**seaders**

```





def betfair_stream_run(bf_market_stream):

    """

     :param betfairlightweight.streaming.BetfairStream bf_market_stream:

    """

    market_id = None

    market_ids = ['1.134151108', '1.134182080']



    while bfstream.continue_streaming:

        market_id = next(m_id for m_id in market_ids if m_id != market_id)

        print 'starting up, m_id:', market_id, \

            'inital_clk:', bf_market_stream.listener.initial_clk, \

            'clk:', bf_market_stream.listener.clk



        bf_market_stream.subscribe_to_markets(

            market_filter=dict(marketIds=[market_id]),

            market_data_filter={

                'fields': ['EX_BEST_OFFERS_DISP', 'EX_BEST_OFFERS',

                           'EX_ALL_OFFERS',

                           'EX_TRADED', 'EX_TRADED_VOL', 'EX_LTP',

                           'EX_MARKET_DEF',

                           'SP_TRADED', 'SP_PROJECTED'],

                'ladderLevels': 3},

            initial_clk=bf_market_stream.listener.initial_clk,

            clk=bf_market_stream.listener.clk)

        

        bf_market_stream.start()```

---

## 2017-09-13 14:25:59 - general channel

**liam**

Here is another example which uses resubscribe [https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L79](https://github.com/liampauling/flumine/blob/master/flumine/flumine.py#L79)

---

## 2017-09-13 13:20:50 - general channel

**liam**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1496411076282793](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1496411076282793)

---

## 2017-09-13 01:06:13 - general channel

**seaders**

I've noticed a few more similar APIClients pop up on github, similar to betfairlightweight,

---

## 2017-09-13 01:02:23 - general channel

**richard_h**

[@U4H19D1D2](@U4H19D1D2) does betfairlightweight use a specific design pattern?

---

## 2017-09-11 02:34:00 - issues channel

**seaders**

I don't know how you're editing / running your python stuff, but if you use a good IDE like PyCharm, if you've things set up right,

---

## 2017-09-11 02:04:03 - issues channel

**gerg**

So we cant get OODS by using the betfair API ?

---

## 2017-09-11 01:53:54 - issues channel

**gerg**

[@U5D4ZBEAG](@U5D4ZBEAG) Perfect, you are super helpful.. I see this in the output file

---

## 2017-09-11 01:47:39 - issues channel

**gerg**

INFO:betfairlightweight.streaming.stream:[Stream: None]: "MarketStream" created

INFO:betfairlightweight.streaming.stream:[MarketStream: HISTORICAL] 1.119219417 added

---

## 2017-09-11 01:43:33 - issues channel

**seaders**

again, check "regular" python first

---

## 2017-09-09 18:42:27 - general channel

**gerg**

Thanks for replying to my query, So do I need to download it manually ? I cant use this python wrapper to do it?

---

## 2017-09-09 04:46:39 - general channel

**gerg**

How can I get data in similar format (Atleast the OODS) for a certain date range using this python API? Any ideas will be greatly helpful, I couldn't find any help after googling

---

## 2017-08-28 18:49:59 - general channel

**seaders**

(this might be a more general BF question rather than your lib)

---

## 2017-08-27 16:44:20 - general channel

**magiclevinho**

thank you for the help

---

## 2017-08-26 11:09:13 - general channel

**liam**

also thinking about changing the github name to just betfair so it comes higher in searches, will keep the pip name to betfairlightweight though. I think this will just involve changing the git remote?

---

## 2017-08-26 11:07:45 - general channel

**liam**

yep no problem, will change this version to 1.4.4, and add a warning that it will change at 1.5.0

---

## 2017-08-26 11:04:09 - general channel

**liam**

welcome any comments on PR #115, minor changes to handicap (defaults to 0 rather than None), more examples added and a very small breaking change to the place order response (order-&gt;limit_order) [https://github.com/liampauling/betfairlightweight/pull/115](https://github.com/liampauling/betfairlightweight/pull/115)

---

## 2017-08-25 15:28:48 - general channel

**seaders**

no hint in your original commit for RaceCard, [https://github.com/liampauling/betfairlightweight/commit/53b922e48857ac2e865d90e39acb4194be3c5e8f](https://github.com/liampauling/betfairlightweight/commit/53b922e48857ac2e865d90e39acb4194be3c5e8f)

---

## 2017-08-10 14:47:45 - general channel

**agberk**

[@U4UUKF9LG](@U4UUKF9LG) - this is my favourite post regarding python logging best practice [https://fangpenlin.com/posts/2012/08/26/good-logging-practice-in-python/](https://fangpenlin.com/posts/2012/08/26/good-logging-practice-in-python/) - I use YAML for config files in general, and I have a `logging` key which contains the python logging config; you can use the `logging.config.dictConfig` function and pass it a dictionary of the config wherever you got it from

---

## 2017-08-09 19:04:10 - general channel

**liam**

[!channel](!channel) please note that if you are using streaming and not using version &gt;= 1.4.3 it will fail tomorrow when betfair add the extra objects to the market definition. [@U5D4ZBEAG](@U5D4ZBEAG) I noticed today that it is priceLadderDefinition in streaming and priceLadderDescription on the exchange api so I have updated and tested successfully on the integration streaming endpoint.

---

## 2017-08-09 18:56:43 - general channel

**jfo**

whats the best way to use python logging?

---

## 2017-07-20 20:39:56 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F6BMKDX1B/image_uploaded_from_ios.jpg|Image uploaded from iOS](https://betfairlightweight.slack.com/files/liam/F6BMKDX1B/image_uploaded_from_ios.jpg|Image uploaded from iOS)

---

## 2017-07-20 20:39:52 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F6BHP3CMQ/image_uploaded_from_ios.jpg|Image uploaded from iOS](https://betfairlightweight.slack.com/files/liam/F6BHP3CMQ/image_uploaded_from_ios.jpg|Image uploaded from iOS)

---

## 2017-07-20 20:39:44 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F6CEGHP0E/image_uploaded_from_ios.jpg|Image uploaded from iOS](https://betfairlightweight.slack.com/files/liam/F6CEGHP0E/image_uploaded_from_ios.jpg|Image uploaded from iOS)

---

## 2017-07-20 20:19:43 - general channel

**jfo**

[https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1499105036304652](https://betfairlightweight.slack.com/archives/C4HL6EZTQ/p1499105036304652)

---

## 2017-07-15 18:06:35 - general channel

**magiclevinho**

Could You help me with the following?

I save my bet_ids to a file, after that I read the bet_ids from the file to check if the bet won or not. The problem is, that not all bet_ids return data back i.e. the order returns 0 length,  but some work. What could be the problem? Why my bet ids do not return back data?

---

## 2017-07-11 11:19:15 - general channel

**agberk**

Haven't really gotten into python3 yet but there is threadpool stuff it looks like: [https://docs.python.org/dev/library/concurrent.futures.html#threadpoolexecutor](https://docs.python.org/dev/library/concurrent.futures.html#threadpoolexecutor)

---

## 2017-07-11 11:14:36 - general channel

**seaders**

But there's python patterns for sleeping threads

---

## 2017-07-11 10:43:25 - general channel

**limx0**

and re the inplay, inplay markets have the 5s delay, so if using requests your python thread will hang waiting 5s for a response on an order insert (if you arent using the async / return immediately flag in betfair)

---

## 2017-07-11 09:36:41 - general channel

**limx0**

potentially, but could be overthinking the problem

---

## 2017-07-10 18:09:12 - general channel

**jfo**

yep, pretty much, i’m not confident in my python skills so looking to cover as much as possible with a few tests as possible

---

## 2017-07-10 10:50:16 - general channel

**liam**

Testing like this is one of the main reasons to build an API instead of communicating directly with a db, always causes problems in the end. Although if you are using a wrapper to communicate then you just need to mock the request. But then it sounds like you are after integration testing which gets tricky 

---

## 2017-07-03 21:05:43 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F63BZ3WKW/image_uploaded_from_ios.jpg|Image uploaded from iOS](https://betfairlightweight.slack.com/files/liam/F63BZ3WKW/image_uploaded_from_ios.jpg|Image uploaded from iOS)

---

## 2017-07-03 10:58:00 - general channel

**liam**

I think you can request this to be increased. But I normally limit using the streaming market filter 

---

## 2017-07-03 10:27:46 - general channel

**andrew**

Hi guys, I’m new here. Just wondering how you manage the 200 market limit in the streaming API? It seems (for horses) you need to subscribe to individual marketIds to stay under the limit, but then adding a single marketId means receiving fresh images for all other markets. Any way to avoid this?

---

## 2017-07-02 22:02:51 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F63LZQX46/image_uploaded_from_ios.jpg|Image uploaded from iOS](https://betfairlightweight.slack.com/files/liam/F63LZQX46/image_uploaded_from_ios.jpg|Image uploaded from iOS)

---

## 2017-07-02 10:59:50 - general channel

**agberk**

Just going through the updates - have seen [https://github.com/liampauling/betfairlightweight/issues/103](https://github.com/liampauling/betfairlightweight/issues/103) before

---

## 2017-06-28 22:08:10 - general channel

**liam**

1.3.2 released [https://github.com/liampauling/betfairlightweight/releases/tag/1.3.2](https://github.com/liampauling/betfairlightweight/releases/tag/1.3.2)

---

## 2017-06-28 10:27:13 - general channel

**Evaldas**

oh, I found my problem

---

## 2017-06-23 09:21:31 - general channel

**heedfull**

any help greatly appreciated

---

## 2017-06-23 09:13:54 - general channel

**alex**

Hi! With async=True betfairlightweight starts in a separate thread. What is the correct way of handling network disconnects, etc. in this case?

---

## 2017-06-20 22:36:13 - general channel

**joelpobar**

[@U4H19D1D2](@U4H19D1D2) any thoughts on integrating Reactive Extensions for Python ([https://github.com/ReactiveX/RxPY](https://github.com/ReactiveX/RxPY)) for betfairlightweight?

---

## 2017-06-13 14:28:03 - general channel

**agberk**

The next question is whether EOF on an SSL socket means it should be closed?

---

## 2017-06-13 14:20:50 - general channel

**agberk**

`part` is `b''` in the linked betfairlightweight code now and so it just proceeds as normal, comes back round for the next loop drops into recv and an underlying read in ssl.py which blocks and will never get anything because the receiving of the EOF means the connection is closed I think?

---

## 2017-06-13 14:18:03 - general channel

**agberk**

This is running betfairlightweight v1.0.0 and was at this point: [https://github.com/liampauling/betfairlightweight/blob/1.0/betfairlightweight/streaming/betfairstream.py#L173](https://github.com/liampauling/betfairlightweight/blob/1.0/betfairlightweight/streaming/betfairstream.py#L173)

---

## 2017-06-13 14:17:15 - general channel

**agberk**

And the stack trace suggested it was here: [https://hg.python.org/cpython/file/2.7/Lib/ssl.py#l660](https://hg.python.org/cpython/file/2.7/Lib/ssl.py#l660)

---

## 2017-06-10 20:00:48 - general channel

**Evaldas**

one more. does betfair start streaming new markets? i dont need to resubscribe?

---

## 2017-06-10 19:55:41 - general channel

**liam**

So you can have one or more market streaming threads 'putting' data in and an event handler in main 'getting' data and processing (placing orders / recording data), why do you want a separate thread per market? 

---

## 2017-06-09 17:03:25 - general channel

**magiclevinho**

What is this problem? I keep getting it after a while.

---

## 2017-06-08 08:10:42 - general channel

**liam**

[https://github.com/liampauling/betfairlightweight/blob/master/betfairlightweight/filters.py#L56](https://github.com/liampauling/betfairlightweight/blob/master/betfairlightweight/filters.py#L56)

---

## 2017-06-08 07:55:24 - general channel

**magiclevinho**

how to feed the parameter 'market_start_time=' ?

---

## 2017-06-07 18:34:20 - general channel

**magiclevinho**

Again I have a problem, if I get the actual in-play event in 'events' variable and then I would like to loop through the events with a for loop like "for event in events:" then it skips multiple events. Why is it doing like that?

---

## 2017-06-06 21:10:24 - general channel

**agberk**

Does seem like it's going to be very infrequent - I think positional args -&gt; required parameters and kwargs -&gt; optional parameters is the right way to do things; still unsure about how to solve the issue

---

## 2017-06-06 17:08:51 - general channel

**magiclevinho**

Wow! Thanks, this pycharm is really great! I was using default python editor. :S Now I see what I was missing! Thank You!

---

## 2017-06-06 15:11:50 - general channel

**magiclevinho**

Hello All! How to get an inplay soccer match's actual result, and the time elapsed in match?

---

## 2017-06-05 14:48:13 - general channel

**agberk**

I raised [https://github.com/liampauling/betfairlightweight/issues/95](https://github.com/liampauling/betfairlightweight/issues/95)

---

## 2017-06-03 12:58:26 - general channel

**jfo**

I’ve been using vs code, just figured out how to do the tests in that

---

## 2017-06-03 11:51:43 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F5N8L19T6/-.js|Untitled](https://betfairlightweight.slack.com/files/liam/F5N8L19T6/-.js|Untitled)

---

## 2017-06-03 11:15:44 - general channel

**jfo**

is that the standard way of running a test suite in python?

---

## 2017-05-31 17:02:31 - general channel

**agberk**

the data spec makes it seem like its just whats coming off the streaming api

---

## 2017-05-31 16:56:44 - general channel

**agberk**

As in trying to make it work by dl'ing/streaming from the historic site doesnt seem worth it

---

## 2017-05-31 16:54:57 - general channel

**liam**

Downloading and streaming straight off the historical site would be tricky but might be possible 

---

## 2017-05-31 16:53:24 - general channel

**agberk**

That would be pointing to a local file downloaded from the historic data service which itself is in the streaming API format?

---

## 2017-05-31 16:37:40 - general channel

**liam**

Thinking about implementing a .historical endpoint to lightweight which would be coupled to streaming taking advantage of the listener and market cache. This would would enable backtesting, thoughts? 

---

## 2017-05-29 18:12:27 - general channel

**jfo**

the `instructions=[instruction]` line specifically, not sure if python has some kind of deferred execution here or something?

---

## 2017-05-27 23:35:50 - general channel

**heedfull**

is there a way to get the tests to run against a python 3.6 environment?

---

## 2017-05-27 11:33:51 - general channel

**liam**

Yeh I know, sorry, I thought about it but the break was to streaming which to be fair is still in development. Even betfair are still making changes to the interface 

---

## 2017-05-27 10:09:46 - general channel

**liam**

[https://github.com/liampauling/betfairlightweight/releases/tag/1.2](https://github.com/liampauling/betfairlightweight/releases/tag/1.2)

---

## 2017-05-27 07:59:25 - general channel

**heedfull**

Hi folks auto inviter is up [https://betfairlightweight.herokuapp.com](https://betfairlightweight.herokuapp.com) (not tested yet)

---

## 2017-05-27 07:03:26 - general channel

**liam**

[!channel](!channel) as a warning v1.2 (will release later this morning) will have breaking changes to streaming, the unique_id parameter in requests will be removed and turned into a incrementing id based on what is provided when creating the stream. Refactor also removes the ability to have market and order stream running through the same socket, this is to prevent race conditions and receiving old updates after a change request. The unique id used for a request is then returned, see branch listenerstream_refactor. Any objections?   

---

## 2017-05-26 15:26:07 - general channel

**jfo**

```Metadata-Version: 1.1

Name: requests

Version: 1.2.3

Summary: Python HTTP for Humans.

Home-page: [http://python-requests.org](http://python-requests.org)

Author: Kenneth Reitz

Author-email: [mailto:me@kennethreitz.com|me@kennethreitz.com](mailto:me@kennethreitz.com|me@kennethreitz.com)

License: Copyright 2013 Kenneth Reitz

Location: /usr/lib/python2.7/dist-packages```

---

## 2017-05-26 15:16:17 - general channel

**jfo**

think its python related?

---

## 2017-05-26 10:28:38 - general channel

**agberk**

Yeah a 200ms matching cycle is what I remember; although for some reason there's a figure of 50ms as well - I thought maybe it was mentioned in the streaming orders but nothing on that page

---

## 2017-05-26 09:28:26 - general channel

**agberk**

Interesting the pro version says tick data a frequency of 50ms - for some reason I thought the streaming API said it did calculation on a 150ms cycle

---

## 2017-05-25 16:59:33 - general channel

**jfo**

anyone used an ORM which persists to sql in python? something akin to activerecord?

---

## 2017-05-24 20:58:32 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F5JBZVCHM/image_uploaded_from_ios.jpg|Image uploaded from iOS](https://betfairlightweight.slack.com/files/liam/F5JBZVCHM/image_uploaded_from_ios.jpg|Image uploaded from iOS)

---

## 2017-05-24 18:02:15 - general channel

**jfo**

basically copied the code from here: [https://github.com/liampauling/betfairlightweight/blob/master/examples/exampletwo.py](https://github.com/liampauling/betfairlightweight/blob/master/examples/exampletwo.py)

---

## 2017-05-23 20:56:15 - general channel

**liam**

[https://github.com/liampauling/betfairlightweight/blob/master/betfairlightweight/filters.py#L39](https://github.com/liampauling/betfairlightweight/blob/master/betfairlightweight/filters.py#L39)

---

## 2017-05-23 12:03:43 - general channel

**Unknown**

[@U5GAP1M9C|richard](@U5GAP1M9C|richard) uploaded a file: [https://betfairlightweight.slack.com/files/richard/F5HH13EUF/amazon_big_data_application.jpg|Amazon Big Data Application.jpg](https://betfairlightweight.slack.com/files/richard/F5HH13EUF/amazon_big_data_application.jpg|Amazon Big Data Application.jpg)

---

## 2017-05-22 16:14:31 - general channel

**richard**

I think there was a big jump when I put an old 300GB database on there!

I've since taken it down and so I'll see how things level off just collecting new data.

---

## 2017-05-22 06:55:30 - general channel

**liam**

Actually what version of python/requests are you using? You able to update requests and try again?

---

## 2017-05-20 12:32:38 - general channel

**jfo**

so your python posts to an api which saves to sql?

---

## 2017-05-20 12:22:57 - general channel

**liam**

[https://github.com/liampauling/betfairlightweight/blob/master/betfairlightweight/resources/streamingresources.py#L147](https://github.com/liampauling/betfairlightweight/blob/master/betfairlightweight/resources/streamingresources.py#L147)

---

## 2017-05-20 12:22:54 - general channel

**liam**

i think i have found the problem

---

## 2017-05-20 09:07:16 - general channel

**liam**

Sorry, issue 32: [https://github.com/liampauling/betfairlightweight/issues/32](https://github.com/liampauling/betfairlightweight/issues/32)

---

## 2017-05-19 15:25:02 - general channel

**agberk**

Just taking a gander from the betfairlightweight code; if you were to do an interactive login and obtain a session token you could set this manually on the BaseClient session_token field

---

## 2017-05-17 14:40:51 - general channel

**agberk**

Plus you can easily drop into writing some python for custom plugins etc.

---

## 2017-05-17 14:40:50 - general channel

**liam**

sorry using lambda to start/stop containers via the python wrapper

---

## 2017-05-17 14:33:14 - general channel

**agberk**

I read an interesting use case - some gaming middleware company that does/did the game lobby / matchmaking for CoD switched from... I forget what, C++ or Java or something, to python and then put Erlang on top to manage the processes

---

## 2017-05-17 14:32:09 - general channel

**agberk**

Although I'm actually interested in using Erlang for the process management and having it spawn python processes since that's what it's good at

---

## 2017-05-17 14:31:24 - general channel

**agberk**

yeah all python - did have some legacy erlang apps which are pretty much retired

---

## 2017-05-17 14:24:00 - general channel

**agberk**

do you write python for your day job?

---

## 2017-05-17 14:16:43 - general channel

**agberk**

haha yeah whenever I need to see how I should do something idiomatically in python I check to see what's going on in requests

---

## 2017-05-11 18:57:05 - general channel

**liam**

I think there is more to do to streamline the streaming cache

---

## 2017-05-11 18:56:27 - general channel

**liam**

[https://github.com/liampauling/betfairlightweight/issues/65](https://github.com/liampauling/betfairlightweight/issues/65)

---

## 2017-05-11 18:54:42 - general channel

**liam**

Seeing 50% reduction in CPU using v1.1 (streaming), strongly recommend an upgrade :slightly_smiling_face:

---

## 2017-05-11 18:54:13 - general channel

**Unknown**

[@U4H19D1D2|liam](@U4H19D1D2|liam) uploaded a file: [https://betfairlightweight.slack.com/files/liam/F5C7ZU0Q2/screenshot.png|cpu.png](https://betfairlightweight.slack.com/files/liam/F5C7ZU0Q2/screenshot.png|cpu.png)

---

## 2017-05-09 14:59:54 - general channel

**jfo**

[@U4H19D1D2](@U4H19D1D2) more questions if you don't mind haha :smile:

---

## 2017-05-01 13:55:26 - general channel

**jfo**

thanks for the help

---

## 2017-05-01 13:41:40 - general channel

**jfo**

```MARKET_FILTER = streaming_market_filter(

    event_type_ids=['7'],

    country_codes=['GB', 'IE'],

    market_types=['WIN', 'PLACE'],

)

MARKET_DATA_FILTER = streaming_market_data_filter(

    fields=['EX_ALL_OFFERS', 'EX_MARKET_DEF', 'EX_LTP', 'EX_TRADED', 'EX_TRADED_VOL'],

    ladder_levels=3

)```

---

## 2017-04-27 21:09:55 - general channel

**jfo**

Yea, jumped up to GB’s after 5 mins which makes me think I’m doing something wrong, but i’m just dumping data out to csv + database

---

## 2017-04-27 21:07:58 - general channel

**liam**

Streaming?

---

## 2017-04-19 17:36:10 - general channel

**favetelinguis**

betfair api is the prefect playground

---

## 2017-04-17 19:46:09 - general channel

**liam**

[@U4JSCQ05N](@U4JSCQ05N) how are you finding rxpy? I was tempted to make streaming async but I couldn't work out an easy way to do it, using queue makes everything simple 

---

## 2017-04-17 19:37:03 - general channel

**liam**

Yeh all python although learning golang at the mo 

---

## 2017-04-17 19:34:44 - general channel

**jfo**

you do all your dev in python?

---

## 2017-04-17 19:31:10 - general channel

**liam**

Flumine isn't on pypi

---

## 2017-04-17 19:30:37 - general channel

**jfo**

just getting `Could not find a version that satisfies the requirement flumine (from -r requirements.txt (line 2)) (from versions: )`

---

## 2017-04-15 07:09:03 - general channel

**favetelinguis**

yes streaming

---

## 2017-04-14 22:01:14 - general channel

**liam**

Hmm streaming? 

---

## 2017-04-06 20:20:28 - general channel

**jfo**

I’m not too hot on queues in python but i just have an infinite loop which called `get` on the queue, it blocks until it has data at that point. Is that good practice?

---

## 2017-04-06 20:16:37 - general channel

**liam**

What market? I didn’t think you could use streaming with the delayed key

---

## 2017-04-06 20:16:09 - general channel

**jfo**

using the streaming api that is

---

## 2017-04-06 20:09:59 - general channel

**jfo**

just getting to grips with it, python isn’t my main language so having fun wrestling with that at the same time :smile:

---

## 2017-03-11 13:12:15 - general channel

**agberk**

Although I guess maybe not a lot of people are using python for interfacing

---

## 2017-03-11 13:00:11 - general channel

**agberk**

yeah we're using it prod; we actually ran into [https://github.com/liampauling/betfairlightweight/issues/32](https://github.com/liampauling/betfairlightweight/issues/32) and put in a workaround, but didn't see the issue until you had done something about it

---

## 2017-03-11 12:56:32 - general channel

**agberk**

Do you want to just abandon [https://github.com/liampauling/betfairlightweight/pull/46](https://github.com/liampauling/betfairlightweight/pull/46) ?  I can do another one with just the socket cleanup code in `stop` and calling it before the `raise`

---

## 2017-03-11 12:48:06 - general channel

**agberk**

np - thanks for the library, has been a lot of help :slightly_smiling_face:

---

