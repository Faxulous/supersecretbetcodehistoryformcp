[
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641119441.373500",
        "client_msg_id": "A93B4A86-6A82-4911-A91E-847CDC27B097",
        "text": "Already an issue for this at <https:\/\/github.com\/liampauling\/flumine\/issues\/541|https:\/\/github.com\/liampauling\/flumine\/issues\/541> I think",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "ts": 1640092341,
                "color": "36a64f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/liampauling\/flumine\/issues\/541",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/liampauling\/flumine\/issues\/541|#541 Betting to target payout resulting in parameter requirement error due to erroneous 'size' requirement>",
                "text": "\"Unknown error *init*() missing 1 required positional argument: 'size' in process_market_book\" error resulting from bet_target_type=\"BACKERS_PROFIT\" orders.\n\norder = trade.create_order(  \nside=\"BACK\",  \norder_type=LimitOrder(price=get_price(runner.ex.available_to_back,0), bet_target_type=\"BACKERS_PROFIT\", bet_target_size=50)  \n)",
                "title": "<https:\/\/github.com\/liampauling\/flumine\/issues\/541|#541 Betting to target payout resulting in parameter requirement error due to erroneous 'size' requirement>",
                "footer": "<https:\/\/github.com\/liampauling\/flumine|liampauling\/flumine>",
                "fields": [
                    {
                        "value": "3",
                        "title": "Comments",
                        "short": true
                    }
                ],
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gEE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Already an issue for this at "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/flumine\/issues\/541",
                                "text": "https:\/\/github.com\/liampauling\/flumine\/issues\/541"
                            },
                            {
                                "type": "text",
                                "text": " I think"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641119575.376400",
        "client_msg_id": "0B23A633-A85D-4141-88B1-B3BE714AE7C9",
        "text": "I think a PR for this might be relatively quick. If bet_target_type is given, size can be inferred as bet_target_size of `price \/ bet_target_size` if type = `PAYOUT` and `(price - 1.0)\/bet_target_size`  if bet_target_type = `BACKERS_PROFIT`  ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Bs0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think a PR for this might be relatively quick. If bet_target_type is given, size can be inferred as bet_target_size of "
                            },
                            {
                                "type": "text",
                                "text": "price \/ bet_target_size",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " if type = "
                            },
                            {
                                "type": "text",
                                "text": "PAYOUT",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "(price - 1.0)\/bet_target_size",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  if bet_target_type = "
                            },
                            {
                                "type": "text",
                                "text": "BACKERS_PROFIT",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641119625.377300",
        "client_msg_id": "DC8A6161-BF88-4D8C-886B-E2A437E1D96F",
        "text": "That reads as gibberish - \"size can be inferred as `price \/ ...`\" is what I meant to type",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "f1h",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That reads as gibberish - \"size can be inferred as "
                            },
                            {
                                "type": "text",
                                "text": "price \/ ...",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\" is what I meant to type"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641119749.379500",
        "client_msg_id": "8C15D2C4-602C-4442-931B-39F4A5974E06",
        "text": "If there's no minimum size checking, that would be enough. If there is minimum size checking (and I've not read the whole of the source code but I can't see anything relevant in `LimitOrder`), it needs to be adjusted to make sure bet_target_size &gt; 10 instead of size &gt; 2",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+lIu2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If there's no minimum size checking, that would be enough. If there is minimum size checking (and I've not read the whole of the source code but I can't see anything relevant in `LimitOrder`), it needs to be adjusted to make sure bet_target_size > 10 instead of size > 2"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U010GM77S4W",
        "type": "message",
        "ts": "1641120056.379700",
        "client_msg_id": "f38e79f6-13dd-4f4b-be46-448dffedbd3a",
        "text": "Any idea what would happen if you bet_target_payout with persistance \"market on close\"?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "66cae8f5399c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-03-20\/1004508356769_66cae8f5399cf91a07ae_72.jpg",
            "first_name": "",
            "real_name": "mandelbot",
            "display_name": "mandelbot",
            "team": "T4G9NBD2M",
            "name": "demhadbale",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jUn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Any idea what would happen if you bet_target_payout with persistance \"market on close\"?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641130927.381200",
        "client_msg_id": "94540B77-1828-4778-A758-45BD133B2E29",
        "text": "Sure, I've done this. Betfair take the liability you had at the size you specified, and use that to adjust the amount you take at the new price (BSP).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9Vhg",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Sure, I've done this. Betfair take the liability you had at the size you specified, and use that to adjust the amount you take at the new price (BSP)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641131023.383400",
        "client_msg_id": "4E658088-09AF-46C2-8A22-D9416DA0533E",
        "text": "So let's suppose you lay a 10 payout at 3.0 - that implies a liability of 6.66 and a backer's stake of 3.33 that you would win if the bet lost, so if BSP is 4.0,  you get laid to a liability of 6.66 but a backer's sake of 2.22",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xsu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So let's suppose you lay a 10 payout at 3.0 - that implies a liability of 6.66 and a backer's stake of 3.33 that you would win if the bet lost, so if BSP is 4.0,  you get laid to a liability of 6.66 but a backer's sake of 2.22"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641131125.385200",
        "client_msg_id": "8442AA7E-327A-44DE-ABAE-28D830E0C770",
        "text": "On the back side, the backer's stake remains fixed so the 2.22 being asked for at 4.0 would not be increased to 3.33 if the BSP is 3.0",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "OFgv6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "On the back side, the backer's stake remains fixed so the 2.22 being asked for at 4.0 would not be increased to 3.33 if the BSP is 3.0"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641131164.386400",
        "client_msg_id": "FFDCD10C-69CA-47D4-B495-8CCCB3664B59",
        "text": "Short version: the person creating the order has their liability fixed and the amount matched on the other side adjusts. Which if you think about it, is the only sensible thing they can do there",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Gyc5",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Short version: the person creating the order has their liability fixed and the amount matched on the other side adjusts. Which if you think about it, is the only sensible thing they can do there"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U010GM77S4W",
        "type": "message",
        "ts": "1641132091.386600",
        "edited": {
            "user": "U010GM77S4W",
            "ts": "1641132556.000000"
        },
        "client_msg_id": "91eda034-6156-4e69-adc2-33e5f9813991",
        "text": "Great I will try. Your fix won't work in this case however because your payout will be calculated based on price requested not bsp. I think you would have to send the call in the appropriate format",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "66cae8f5399c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-03-20\/1004508356769_66cae8f5399cf91a07ae_72.jpg",
            "first_name": "",
            "real_name": "mandelbot",
            "display_name": "mandelbot",
            "team": "T4G9NBD2M",
            "name": "demhadbale",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SUDpF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Great I will try. Your fix won't work in this case however because your payout will be calculated based on price requested not bsp. I think you would have to send the call in the appropriate format"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1641145007.388800",
        "client_msg_id": "0B0E4810-8A2F-4156-8625-73D0E0CC3496",
        "text": "Yes, you need to send the call as you suggest, but if you read the source, the `size` field is used for things like liability calcs and back-testing, etc. so it's meant to be a shortcut to that - you'll still need to send the correct call to the exchange",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640080681.311800",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dDzif",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes, you need to send the call as you suggest, but if you read the source, the "
                            },
                            {
                                "type": "text",
                                "text": "size",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " field is used for things like liability calcs and back-testing, etc. so it's meant to be a shortcut to that - you'll still need to send the correct call to the exchange"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "channel_join",
        "user": "U02S8GQCMRU",
        "text": "<@U02S8GQCMRU> has joined the channel",
        "type": "message",
        "ts": "1641146663.389200"
    },
    {
        "subtype": "channel_join",
        "user": "U02SJ2CNF52",
        "text": "<@U02SJ2CNF52> has joined the channel",
        "type": "message",
        "ts": "1641182950.389400"
    }
]