[
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692348218.690589",
        "client_msg_id": "940b25da-b184-4559-969e-c4eb2adacf32",
        "text": "Hi, how would i get orders made before application start with flumine, i want orders on the market irrelavent of if flumine made them or not sent into process_orders function on my strategy, is their any way to do this?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "reply_count": 9,
        "reply_users_count": 2,
        "latest_reply": "1692355518.459679",
        "reply_users": [
            "U9JHLMZB4",
            "U05GJG4FXH8"
        ],
        "replies": [
            {
                "user": "U9JHLMZB4",
                "ts": "1692351173.531119"
            },
            {
                "user": "U05GJG4FXH8",
                "ts": "1692351236.946059"
            },
            {
                "user": "U05GJG4FXH8",
                "ts": "1692351256.063539"
            },
            {
                "user": "U9JHLMZB4",
                "ts": "1692351378.217419"
            },
            {
                "user": "U05GJG4FXH8",
                "ts": "1692351389.894749"
            },
            {
                "user": "U05GJG4FXH8",
                "ts": "1692351789.669289"
            },
            {
                "user": "U9JHLMZB4",
                "ts": "1692355355.296069"
            },
            {
                "user": "U05GJG4FXH8",
                "ts": "1692355497.450649"
            },
            {
                "user": "U05GJG4FXH8",
                "ts": "1692355518.459679"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SRa",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi, how would i get orders made before application start with flumine, i want orders on the market irrelavent of if flumine made them or not sent into process_orders function on my strategy, is their any way to do this?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692348252.316829",
        "client_msg_id": "f79f731c-7144-42dd-85e5-f09a8f6a59b7",
        "text": "Would like to avoid using list_market_book as it's slower &amp; also don't want to have to keep making requests for orders made outside of strategy",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8=3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Would like to avoid using list_market_book as it's slower & also don't want to have to keep making requests for orders made outside of strategy"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1692351173.531119",
        "client_msg_id": "9484d181-71fd-411b-b73a-7c0d38edff1b",
        "text": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/middleware\/orders.py>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/middleware\/orders.py",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/middleware\/orders.py | orders.py>",
                "text": "```\nimport logging\nfrom flumine import config\nfrom flumine.utils import STRATEGY_NAME_HASH_LENGTH\nfrom flumine.markets.middleware import Middleware\nfrom flumine.order.trade import Trade\n\nlogger = logging.getLogger(__name__)\n\n\nclass OrdersMiddleware(Middleware):\n    \"\"\"\n    Middleware to add execution complete orders\n    to the blotter. This is required on a restart\n    as the order stream does not include\n    EXECUTION_COMPLETE orders\n    \"\"\"\n\n    def __init__(self, flumine):\n        self.flumine = flumine\n\n    def add_market(self, market) -> None:\n        for client in self.flumine.clients:\n            resp = client.betting_client.betting.list_current_orders(\n                customer_strategy_refs=[config.customer_strategy_ref],\n                order_projection=\"EXECUTION_COMPLETE\",\n            )\n            for current_order in resp.orders:\n                <http:\/\/logger.info|logger.info>(\n                    \"OrdersMiddleware: Processing order {0}\".format(\n                        current_order.bet_id\n                    ),\n                    extra={\n                        \"bet_id\": current_order.bet_id,\n                        \"market_id\": current_order.market_id,\n                        \"customer_strategy_ref\": current_order.customer_strategy_ref,\n                        \"customer_order_ref\": current_order.customer_order_ref,\n                        \"client_username\": client.username,\n                    },\n                )\n                order = self._create_order_from_current(client, current_order, market)\n                if order:\n                    order.update_current_order(current_order)\n                    order.execution_complete()\n\n    def _create_order_from_current(self, client, current_order, market):\n        strategy_name_hash = current_order.customer_order_ref[\n            :STRATEGY_NAME_HASH_LENGTH\n        ]\n        order_id = current_order.customer_order_ref[STRATEGY_NAME_HASH_LENGTH + 1 :]\n        # get strategy\n        strategy = self.flumine.strategies.hashes.get(strategy_name_hash)\n        if strategy is None:\n            logger.warning(\n                \"OrdersMiddleware: Strategy not available to create order {0}\".format(\n                    order_id\n                ),\n                extra={\n                    \"bet_id\": current_order.bet_id,\n                    \"market_id\": current_order.market_id,\n                    \"customer_strategy_ref\": current_order.customer_strategy_ref,\n                    \"customer_order_ref\": current_order.customer_order_ref,\n                    \"strategy_name\": str(strategy),\n                    \"client_username\": client.username,\n                },\n            )\n            return\n        # add trade\/order\n        trade = Trade(\n            market.market_id,\n            current_order.selection_id,\n            current_order.handicap,\n            strategy,\n        )\n        order = trade.create_order_from_current(client, current_order, order_id)\n        market.blotter[order.id] = order\n        runner_context = strategy.get_runner_context(*order.lookup)\n        runner_context.place(trade.id)\n        <http:\/\/logger.info|logger.info>(\n            \"OrdersMiddleware: New order trade created\",\n            extra={\n                \"bet_id\": current_order.bet_id,\n                \"market_id\": current_order.market_id,\n                \"customer_strategy_ref\": current_order.customer_strategy_ref,\n                \"customer_order_ref\": current_order.customer_order_ref,\n                \"strategy_name\": str(strategy),\n                \"client_username\": client.username,\n            },\n        )\n        return order\n\n```",
                "title": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/middleware\/orders.py | orders.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "thI",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/examples\/middleware\/orders.py"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692351236.946059",
        "client_msg_id": "4611d480-7d89-4284-ac31-88673edcd7bb",
        "text": "It doesn't seem to include non complete orders either tho?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KA50y",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It doesn't seem to include non complete orders either tho?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692351256.063539",
        "client_msg_id": "7d24855b-7ef8-4fc3-a3b7-08c8f4107b26",
        "text": "Only skimmed from mobile tho, may be missing something",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "40R",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Only skimmed from mobile tho, may be missing something"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1692351378.217419",
        "client_msg_id": "499c410a-7754-4705-b1ce-26dfabe800a6",
        "text": "Non-complete orders will come through in the order stream, and should show up in the blotter, but not in `process_orders` as that only handles orders for the strategy wrapping the method.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "G7Xz8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Non-complete orders will come through in the order stream, and should show up in the blotter, but not in "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as that only handles orders for the strategy wrapping the method."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692351389.894749",
        "client_msg_id": "2fbba708-ae18-4245-ac91-59396b555b1f",
        "text": "okay thank you",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=4l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "okay thank you"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692351789.669289",
        "client_msg_id": "d2869188-1118-45cf-a3dc-78dd9ac0fab1",
        "text": "i can't seem to get from blotter, i have an unmatched lay order at price 1.01 size 1\ni'm reading from the blotter like this from within process_market_book\n```            print(\"Reading from blotter\")\n            for order in market.blotter.client_orders(self.manager.flumine.clients.get_default()):\n                print(order)\n            for order in market.blotter.live_orders:\n                print(order)```\nboth loops print nothing",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tWeY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "i can't seem to get from blotter, i have an unmatched lay order at price 1.01 size 1\ni'm reading from the blotter like this from within process_market_book\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "            print(\"Reading from blotter\")\n            for order in market.blotter.client_orders(self.manager.flumine.clients.get_default()):\n                print(order)\n            for order in market.blotter.live_orders:\n                print(order)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "both loops print nothing"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1692355355.296069",
        "client_msg_id": "95f58521-9bb6-4114-ac7f-d21e42ff11a6",
        "text": "Ah sorry. I suspect that there's a rather subtle 2nd requirement lurking in there, namely that the orders were created with the same customer_strategy_ref that you're using when you run Flumine. this ref is nothing to do with the Flumine strategy - rather it's the ref that Betfair recognises and by default is <https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/flumine\/config.py|based by Flumine on your hostname>. So order created by other methods e.g. via the webUI won't get picked up. Not normally a problem when an instance of Flumine is restarted, but not helpful if your starting a fresh instance and want to pick up orders created by other methods.\n\nTo get around that I'd recommend tweaking the order middleware liked to earlier to remove the config.customer_strategy_ref filter and EXECUTION_COMPLETE filters, though you may experience side effects if Flumine needs to restart.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "b+t",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ah sorry. I suspect that there's a rather subtle 2nd requirement lurking in there, namely that the orders were created with the same customer_strategy_ref that you're using when you run Flumine. this ref is nothing to do with the Flumine strategy - rather it's the ref that Betfair recognises and by default is "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/flumine\/config.py",
                                "text": "based by Flumine on your hostname"
                            },
                            {
                                "type": "text",
                                "text": ". So order created by other methods e.g. via the webUI won't get picked up. Not normally a problem when an instance of Flumine is restarted, but not helpful if your starting a fresh instance and want to pick up orders created by other methods.\n\nTo get around that I'd recommend tweaking the order middleware liked to earlier to remove the config.customer_strategy_ref filter and EXECUTION_COMPLETE filters, though you may experience side effects if Flumine needs to restart."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692355497.450649",
        "client_msg_id": "dda60a1e-ecdd-4093-b22a-79e1164b9132",
        "text": "yeah, have taken out the create order from data function and moved into my own methods, am working on getting that working properly",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mlzF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yeah, have taken out the create order from data function and moved into my own methods, am working on getting that working properly"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05GJG4FXH8",
        "type": "message",
        "ts": "1692355518.459679",
        "client_msg_id": "9b4149c1-fb6f-4288-8c89-f0b297d5b69a",
        "text": "seems to be the best option so far, as is working just abit inconsistently",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "4d203045b6bc",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-07-11\/5562548664370_4d203045b6bc4a9ed59e_72.png",
            "first_name": "Harry",
            "real_name": "Harry Corrigan",
            "display_name": "Harry Corrigan",
            "team": "T4G9NBD2M",
            "name": "harry.corrigan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692348218.690589",
        "parent_user_id": "U05GJG4FXH8",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "T84",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "seems to be the best option so far, as is working just abit inconsistently"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1692377869.867779",
        "client_msg_id": "f10089a4-10d7-49dd-a4e7-2f5b7715236a",
        "text": "I am slowly migrating stuff over to Flumine (from BFLW-based approaches). One issue I seem to have is that even when my market_data_filter specifies ladder_levels=5, the market_book has the whole ladder.\n\neg when I create the strategy I pass the following:\n\n\n```market_data_filter=streaming_market_data_filter(\n            fields=[\n                \"EX_ALL_OFFERS\",\n                \"EX_LTP\",\n                \"EX_TRADED\",\n                \"EX_TRADED_VOL\",\n                \"EX_MARKET_DEF\",\n            ], \n            ladder_levels=5,\n    ),```\nYet  in market_book.runners[0].ex.available_to_back there are over 30 entries. What am I missing?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692377869.867779",
        "reply_count": 4,
        "reply_users_count": 2,
        "latest_reply": "1692379093.232519",
        "reply_users": [
            "UUE6E1LA1",
            "U04NWADNCFR"
        ],
        "replies": [
            {
                "user": "UUE6E1LA1",
                "ts": "1692378292.607749"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1692378327.388669"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1692378970.115299"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1692379093.232519"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "uGA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I am slowly migrating stuff over to Flumine (from BFLW-based approaches). One issue I seem to have is that even when my market_data_filter specifies ladder_levels=5, the market_book has the whole ladder.\n\neg when I create the strategy I pass the following:\n\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "market_data_filter=streaming_market_data_filter(\n            fields=[\n                \"EX_ALL_OFFERS\",\n                \"EX_LTP\",\n                \"EX_TRADED\",\n                \"EX_TRADED_VOL\",\n                \"EX_MARKET_DEF\",\n            ], \n            ladder_levels=5,\n    ),"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yet  in market_book.runners[0].ex.available_to_back there are over 30 entries. What am I missing?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1692378292.607749",
        "client_msg_id": "41da2ffa-79bf-4abb-b145-f1acb3f85a00",
        "text": "I can't speak for flumine but in stream terms I THINK that you can only request ladder levels on the virtual\/display prices not nonvirtual (datb vs atb)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692377869.867779",
        "parent_user_id": "U04NWADNCFR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LQ5j",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I can't speak for flumine but in stream terms I THINK that you can only request ladder levels on the virtual\/display prices not nonvirtual (datb vs atb)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1692378327.388669",
        "client_msg_id": "e9f476d1-07d4-4470-be69-77ded52a5765",
        "text": "If that's not true I'll delete the previous",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692377869.867779",
        "parent_user_id": "U04NWADNCFR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/X\/e",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If that's not true I'll delete the previous"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1692378970.115299",
        "client_msg_id": "e0a2ac16-49be-4572-8a2c-1e1c693ca35d",
        "text": "I think it's EX_ALL_OFFERS - includes everything. Your comment made me read the documentation more carefully :slightly_smiling_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692377869.867779",
        "parent_user_id": "U04NWADNCFR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kKM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think it's EX_ALL_OFFERS - includes everything. Your comment made me read the documentation more carefully "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1692379093.232519",
        "client_msg_id": "92bc37f5-c0ba-41b0-8396-79a6ec973601",
        "text": "yes - switching to\n```EX_BEST_OFFERS```\ncauses the ladder_levels param to be respected.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1692377869.867779",
        "parent_user_id": "U04NWADNCFR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Zya",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yes - switching to\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "EX_BEST_OFFERS"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "causes the ladder_levels param to be respected."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]