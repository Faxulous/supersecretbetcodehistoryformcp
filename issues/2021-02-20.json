[
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613837911.002200",
        "client_msg_id": "6d983084-9238-4d5e-b391-cc0ea20fed24",
        "text": "flumine just threw a bunch of high latency warnings. I m curious what caused this high latency. I suppose one way to get high latency is by to much calculations in your strat so it cant keep up? Highest cpu-utilization was 15% though. Is it possible for an ec2 instance to just \"randomly\" have a bad connection sometimes?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "sVMql",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "flumine just threw a bunch of high latency warnings. I m curious what caused this high latency. I suppose one way to get high latency is by to much calculations in your strat so it cant keep up? Highest cpu-utilization was 15% though. Is it possible for an ec2 instance to just \"randomly\" have a bad connection sometimes?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1613838786.003000",
        "client_msg_id": "db2526c5-cba8-48c8-ab64-2fc46d16f7a9",
        "text": "I definitely get random high latency warnings from an ec2 instance. Not to often, but some days it does seem to randomly happen",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "A5w",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I definitely get random high latency warnings from an ec2 instance. Not to often, but some days it does seem to randomly happen"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613839094.003800",
        "client_msg_id": "baa24455-9893-42d6-9ae1-57357ef8648c",
        "text": "okay, then i ll just put that aside for now. Thanks :slightly_smiling_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "on4i",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "okay, then i ll just put that aside for now. Thanks "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U019Z6V6DHS",
        "type": "message",
        "ts": "1613843930.005500",
        "client_msg_id": "13e07a4d-20e2-401b-a35e-55d6439bc793",
        "text": "got the same issue today as well. flumine processes everything on a single thread, so if you’ve got a lot of markets to go through, then it might not be able to process everything in less than 2 seconds",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2283cf60070",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2283cf60070ef651f7b3fc3bfe06996e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Angelos",
            "display_name": "Angelos",
            "team": "T4G9NBD2M",
            "name": "a2gelosgeo",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xCPUd",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "got the same issue today as well. flumine processes everything on a single thread, so if you’ve got a lot of markets to go through, then it might not be able to process everything in less than 2 seconds"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U019Z6V6DHS",
        "type": "message",
        "ts": "1613844042.007100",
        "client_msg_id": "676d784a-2e8c-4d72-97f4-9a1c05858752",
        "text": "don’t think it’s possible to split the markets into multiple threads(correct me if i’m wrong) so i’m thinking of creating multiple python runs where i would split the markets in multiple shells",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2283cf60070",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2283cf60070ef651f7b3fc3bfe06996e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Angelos",
            "display_name": "Angelos",
            "team": "T4G9NBD2M",
            "name": "a2gelosgeo",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "l7gt",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "don’t think it’s possible to split the markets into multiple threads(correct me if i’m wrong) so i’m thinking of creating multiple python runs where i would split the markets in multiple shells"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U019Z6V6DHS",
        "type": "message",
        "ts": "1613844057.007400",
        "client_msg_id": "caa59b17-8bbb-4ae8-9f57-214ad6d6d2a4",
        "text": "is this what people are doing or am i completely in the wrong path?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2283cf60070",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2283cf60070ef651f7b3fc3bfe06996e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Angelos",
            "display_name": "Angelos",
            "team": "T4G9NBD2M",
            "name": "a2gelosgeo",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "oGb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "is this what people are doing or am i completely in the wrong path?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613844119.008500",
        "edited": {
            "user": "U4H19D1D2",
            "ts": "1613844141.000000"
        },
        "client_msg_id": "4E6311EF-BA27-44BE-A4A8-209796B39010",
        "text": "Bflw warning is likely to be network if your CPU is only 15%, the 2s warning is bad, what are you doing that takes 2s???",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1613844119.008500",
        "reply_count": 6,
        "reply_users_count": 2,
        "latest_reply": "1613848932.021200",
        "reply_users": [
            "U019Z6V6DHS",
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U019Z6V6DHS",
                "ts": "1613847196.011100"
            },
            {
                "user": "U019Z6V6DHS",
                "ts": "1613847207.011300"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1613847666.011900"
            },
            {
                "user": "U019Z6V6DHS",
                "ts": "1613848739.019200"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1613848790.020600"
            },
            {
                "user": "U019Z6V6DHS",
                "ts": "1613848932.021200"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1613848932.021200",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XUN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Bflw warning is likely to be network if your CPU is only 15%, the 2s warning is bad, what are you doing that takes 2s???"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUCD6P13J",
        "type": "message",
        "ts": "1613846024.011000",
        "client_msg_id": "8aefca5b-0f28-4110-8675-361f60c91871",
        "text": "<@U01DVUAE2G1> which latency warnings did you get? `Latency high` or `High latency between current time and MarketBook publish time`\nI get a few `Latency high` most days.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6898272ab81",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6898272ab810e419c2c9ca9af1e53da8.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png",
            "first_name": "Lee",
            "real_name": "Lee U",
            "display_name": "Lee",
            "team": "T4G9NBD2M",
            "name": "lunswor",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1mw",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U01DVUAE2G1"
                            },
                            {
                                "type": "text",
                                "text": " which latency warnings did you get? "
                            },
                            {
                                "type": "text",
                                "text": "Latency high",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " or "
                            },
                            {
                                "type": "text",
                                "text": "High latency between current time and MarketBook publish time",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nI get a few "
                            },
                            {
                                "type": "text",
                                "text": "Latency high",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " most days."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U019Z6V6DHS",
        "type": "message",
        "ts": "1613847196.011100",
        "client_msg_id": "a4df00df-3f6d-4a39-979b-2a23c02a0876",
        "text": "for me, i have to grab the event_timeline to get the elapsed_time and the amount of cards",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2283cf60070",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2283cf60070ef651f7b3fc3bfe06996e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Angelos",
            "display_name": "Angelos",
            "team": "T4G9NBD2M",
            "name": "a2gelosgeo",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1613844119.008500",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Qes",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "for me, i have to grab the event_timeline to get the elapsed_time and the amount of cards"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U019Z6V6DHS",
        "type": "message",
        "ts": "1613847207.011300",
        "client_msg_id": "31c0e813-7389-48f7-ac20-dd05bdcf3ba7",
        "text": "so that’s another http call",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2283cf60070",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2283cf60070ef651f7b3fc3bfe06996e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Angelos",
            "display_name": "Angelos",
            "team": "T4G9NBD2M",
            "name": "a2gelosgeo",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1613844119.008500",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Hgm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "so that’s another http call"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613847666.011900",
        "client_msg_id": "769E87DD-58D3-4BCA-9234-43FF5793E89F",
        "text": "You should use a worker for this as per the example <https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/inplayservice.py|https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/inplayservice.py>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1613844119.008500",
        "parent_user_id": "U4H19D1D2",
        "attachments": [
            {
                "fallback": "[liampauling\/flumine] examples\/workers\/inplayservice.py",
                "text": "```\nimport logging\nfrom flumine.utils import get_event_ids\nfrom flumine.events.events import CustomEvent\n\nlogger = logging.getLogger(__name__)\n\n\"\"\"\nSee examples\/tennisexample.py in how\nto use this worker for betting.\n\"\"\"\n\n\ndef poll_in_play_service(context: dict, flumine, event_type_id: str) -&gt; None:\n    trading = flumine.client.betting_client\n    event_ids = get_event_ids(flumine.markets, event_type_id=event_type_id)\n    for event_id in event_ids:\n        response = trading.in_play_service.get_scores(event_ids=[event_id])\n        if response is None:\n            logger.warning(\n                \"poll_in_play_service\",\n                extra={\"response\": response, \"event_id\": event_id},\n            )\n            continue\n\n        for score in response:\n            flumine.handler_queue.put(CustomEvent(score, callback))\n\n\ndef callback(flumine, event):\n    # update market context\n    score = event.event\n    for market in flumine.markets:\n        if market.event_id == str(score.event_id):\n            logger.debug(\n                \"Updated market {0} with event {1} scores data\".format(\n                    market.market_id, market.event_id\n                )\n            )\n            market.context[\"score\"] = score\n\n```",
                "title": "examples\/workers\/inplayservice.py",
                "footer": "<https:\/\/github.com\/liampauling\/flumine|liampauling\/flumine>",
                "id": 1,
                "title_link": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/inplayservice.py",
                "footer_icon": "https:\/\/github.githubassets.com\/favicon.ico",
                "color": "24292f",
                "mrkdwn_in": [
                    "text"
                ],
                "bot_id": "B01144Z0734",
                "app_unfurl_url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/inplayservice.py",
                "is_app_unfurl": true
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "J76J",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You should use a worker for this as per the example "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/inplayservice.py",
                                "text": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/examples\/workers\/inplayservice.py"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613848456.014400",
        "client_msg_id": "e67ec255-d448-4100-8351-1e71ea1df3a2",
        "text": "<@UUCD6P13J> i get both. `Latency high` disregards processing time and just checks how long it took to get the market_update? In that case, if you get the `Latency high` one, the `High Latency`  one is sorta guranteed to follow?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pFo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UUCD6P13J"
                            },
                            {
                                "type": "text",
                                "text": " i get both. "
                            },
                            {
                                "type": "text",
                                "text": "Latency high",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " disregards processing time and just checks how long it took to get the market_update? In that case, if you get the "
                            },
                            {
                                "type": "text",
                                "text": "Latency high",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " one, the "
                            },
                            {
                                "type": "text",
                                "text": "High Latency",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  one is sorta guranteed to follow?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613848524.015200",
        "client_msg_id": "F12DE017-EADC-45BA-85BE-7FCCC8FA82C4",
        "text": "High latency means you are spending too much time in the strategy, are you doing something slow?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "svr=K",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "High latency means you are spending too much time in the strategy, are you doing something slow?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613848603.016300",
        "client_msg_id": "69a7360f-dee2-4615-a82c-d30a404a8326",
        "text": "and `latency high`  means the market_book update took to long to reach me?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mogDq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "and "
                            },
                            {
                                "type": "text",
                                "text": "latency high",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  means the market_book update took to long to reach me?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613848619.016800",
        "client_msg_id": "eafa28f9-c9c8-4135-91ef-02853a40fb06",
        "text": "i dont think i m doing anything slow",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Z9BXa",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "i dont think i m doing anything slow"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613848629.017100",
        "client_msg_id": "4878C170-0006-4271-8CEF-89EDFDB69565",
        "text": "Yeah",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3jD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613848649.018200",
        "client_msg_id": "38d5e691-faeb-423e-9f1d-b3febe18705c",
        "text": "they were both coming at the same time, you think that is by chance?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jwb+n",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "they were both coming at the same time, you think that is by chance?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613848677.019000",
        "client_msg_id": "875E978C-DBF1-4731-A71D-82B65030335D",
        "text": "Look at the code, it’s comparing the publish time to the time at processing however if it’s rare then it will be your network rather than cpu related ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PEs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Look at the code, it’s comparing the publish time to the time at processing however if it’s rare then it will be your network rather than cpu related "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U019Z6V6DHS",
        "type": "message",
        "ts": "1613848739.019200",
        "edited": {
            "user": "U019Z6V6DHS",
            "ts": "1613848919.000000"
        },
        "client_msg_id": "2f3f3f38-a181-4613-ba1a-b2471b969f39",
        "text": "how frequent is that event fired?\n~guessing i’ll have to implement `_process_custom_event` in my strategy to grab the scores for this right?~",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2283cf60070",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2283cf60070ef651f7b3fc3bfe06996e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Angelos",
            "display_name": "Angelos",
            "team": "T4G9NBD2M",
            "name": "a2gelosgeo",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1613844119.008500",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TGa",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "how frequent is that event fired?\n"
                            },
                            {
                                "type": "text",
                                "text": "guessing i’ll have to implement ",
                                "style": {
                                    "strike": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "_process_custom_event",
                                "style": {
                                    "strike": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in my strategy to grab the scores for this right?",
                                "style": {
                                    "strike": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613848790.020600",
        "client_msg_id": "584EDBB4-2C38-4AE6-A688-3DFF6FFEC080",
        "text": "How ever often you set the worker to fire, check out the docs ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1613844119.008500",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mp2V",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "How ever often you set the worker to fire, check out the docs "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U019Z6V6DHS",
        "type": "message",
        "ts": "1613848932.021200",
        "client_msg_id": "1393e35b-27a1-4059-9920-98634a8c2b26",
        "text": "ah! found it thank you for the info :slightly_smiling_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g2283cf60070",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/2283cf60070ef651f7b3fc3bfe06996e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Angelos",
            "display_name": "Angelos",
            "team": "T4G9NBD2M",
            "name": "a2gelosgeo",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1613844119.008500",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "e1A",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ah! found it thank you for the info "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613849248.022500",
        "client_msg_id": "2ab16412-d8d7-4cd2-8643-97f877ace498",
        "text": "i m confused here, `High latency between current time and MarketBook publish time`  is thrown before the strategy actually processes the market_book, so it does not take processing time into account?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5Ah",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "i m confused here, "
                            },
                            {
                                "type": "text",
                                "text": "High latency between current time and MarketBook publish time",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  is thrown before the strategy actually processes the market_book, so it does not take processing time into account?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613849302.023400",
        "client_msg_id": "463C1607-11D1-4349-9E19-D00A9911AEC7",
        "text": "It’s single threaded and event driven, so the previous message has caused it ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kh4u",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It’s single threaded and event driven, so the previous message has caused it "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613850314.030600",
        "client_msg_id": "eb1f956d-2a1e-4c35-97d7-00ee0ae78715",
        "text": "I m still kinda confused, i hope you are patient with me :smile: Okay so: I get a bunch of market_books as an event. I loop over these market_books and check if _latency = current_time - publish_time &gt; 2._ If this is the case, it means that a previous market_book took to long to process or that the market_book came in late in the first place. Something here i didnt get right, because if the market_book came in late in the first place, it shouldnt throw this warning but only the `latency high`  warning if i got you right? But if the market_book arrived 2 seconds late in the first place, _latency = current_time - publish_time &gt; 2_ would be true aswell? Sencond, given a market_book takes to long to process, then the next market_book in the loop (and every market_book coming after) will have high latency and their market_ids are printed out, however its not actually those markets that caused the latency but the previous one?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "eK88",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I m still kinda confused, i hope you are patient with me "
                            },
                            {
                                "type": "emoji",
                                "name": "smile",
                                "unicode": "1f604"
                            },
                            {
                                "type": "text",
                                "text": " Okay so: I get a bunch of market_books as an event. I loop over these market_books and check if "
                            },
                            {
                                "type": "text",
                                "text": "latency = current_time - publish_time > 2. ",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "If this is the case, it means that a previous market_book took to long to process or that the market_book came in late in the first place. Something here i didnt get right, because if the market_book came in late in the first place, it shouldnt throw this warning but only the "
                            },
                            {
                                "type": "text",
                                "text": "latency high",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  warning if i got you right? But if the market_book arrived 2 seconds late in the first place, "
                            },
                            {
                                "type": "text",
                                "text": "latency = current_time - publish_time > 2 ",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "would be true aswell? Sencond, given a market_book takes to long to process, then the next market_book in the loop (and every market_book coming after) will have high latency and their market_ids are printed out, however its not actually those markets that caused the latency but the previous one?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0135SLHQBW",
        "type": "message",
        "ts": "1613851167.031000",
        "edited": {
            "user": "U0135SLHQBW",
            "ts": "1613851180.000000"
        },
        "client_msg_id": "342487a9-82f5-4c2e-a351-2e822096a10e",
        "text": "What are the actual values of the latency you're getting roughly?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g316814ce896",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/316814ce896c34a9c72e2ddd6fa17b86.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "",
            "real_name": "MacrcoPolo",
            "display_name": "MacrcoPolo",
            "team": "T4G9NBD2M",
            "name": "omverran",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VyJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What are the actual values of the latency you're getting roughly?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1613851989.033900",
        "client_msg_id": "556ea633-337a-492a-b8e5-f16647f1665b",
        "text": "for `\"[MarketStream: 2001]: Latency high: ___\"`  it ranges from 0.5 to 5. Whenever its above 2.0, it also prints the `\"High latency between current time and MarketBook publish time\"` , which i guess kinda shows that the problem is not in the process time of the market_books, but rather that the first latency is part of the 2nd latency",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "smj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "for "
                            },
                            {
                                "type": "text",
                                "text": "\"[MarketStream: 2001]: Latency high: ___\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  it ranges from 0.5 to 5. Whenever its above 2.0, it also prints the "
                            },
                            {
                                "type": "text",
                                "text": "\"High latency between current time and MarketBook publish time\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , which i guess kinda shows that the problem is not in the process time of the market_books, but rather that the first latency is part of the 2nd latency"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1613852359.035300",
        "client_msg_id": "eff8072e-4a85-4878-b0ca-b31dae2e7de2",
        "text": "<@U4H19D1D2> will be able to correct me here, but wasn't there an issue whereby if updates weren't that frequent (e.g. illiquid markets such as some of the US stuff) then you could get a latency warning, not because anything is wrong as such, but simply because the gap between the current time and last publish time is quite large?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XzK9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " will be able to correct me here, but wasn't there an issue whereby if updates weren't that frequent (e.g. illiquid markets such as some of the US stuff) then you could get a latency warning, not because anything is wrong as such, but simply because the gap between the current time and last publish time is quite large?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1613887521.039300",
        "client_msg_id": "d8df27a3-5685-456a-aade-af39829a912e",
        "text": "<@UFTBRB3F1> that was fixed a while ago by checking if the update is a snap or not. <@U01DVUAE2G1> you probably right here although its difficult to debug as betfair will start to conflate if you are not pulling off the socket quick enough. However if you are getting the 2s warning then you are either maxing your CPU or you are processing the updates too slow. If you get the `Latency High..` warning you either have network or CPU issues.\nThey are just supposed to be warnings to highlight potential issues, they could probably be improved in the codebase or by the user elsewhere, I did create an <https:\/\/github.com\/liampauling\/flumine\/issues\/338|issue> to track this better to allow easier tracing\/profiling",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "author_name": "liampauling",
                "fallback": "[liampauling\/flumine] #338 Strategy tracing \/ profiling ",
                "text": "Sentry style tracing to allow profiling of strategies:\n\n• Order count\n• Function calls\n• Latency per `process_market_book` calls\n• Use `Event` object",
                "title": "#338 Strategy tracing \/ profiling ",
                "footer": "<https:\/\/github.com\/liampauling\/flumine|liampauling\/flumine>",
                "id": 1,
                "title_link": "https:\/\/github.com\/liampauling\/flumine\/issues\/338",
                "author_link": "https:\/\/github.com\/liampauling",
                "author_icon": "https:\/\/avatars.githubusercontent.com\/u\/12016537?v=4",
                "footer_icon": "https:\/\/github.githubassets.com\/favicon.ico",
                "ts": 1606820680,
                "color": "36a64f",
                "fields": [
                    {
                        "title": "Labels",
                        "value": "enhancement",
                        "short": true
                    }
                ],
                "mrkdwn_in": [
                    "text"
                ],
                "bot_id": "B01144Z0734",
                "app_unfurl_url": "https:\/\/github.com\/liampauling\/flumine\/issues\/338",
                "is_app_unfurl": true
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "weEX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UFTBRB3F1"
                            },
                            {
                                "type": "text",
                                "text": " that was fixed a while ago by checking if the update is a snap or not. "
                            },
                            {
                                "type": "user",
                                "user_id": "U01DVUAE2G1"
                            },
                            {
                                "type": "text",
                                "text": " you probably right here although its difficult to debug as betfair will start to conflate if you are not pulling off the socket quick enough. However if you are getting the 2s warning then you are either maxing your CPU or you are processing the updates too slow. If you get the "
                            },
                            {
                                "type": "text",
                                "text": "Latency High..",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " warning you either have network or CPU issues.\nThey are just supposed to be warnings to highlight potential issues, they could probably be improved in the codebase or by the user elsewhere, I did create an "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/flumine\/issues\/338",
                                "text": "issue"
                            },
                            {
                                "type": "text",
                                "text": " to track this better to allow easier tracing\/profiling"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]