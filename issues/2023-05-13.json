[
    {
        "user": "U01EL496X7C",
        "type": "message",
        "ts": "1683967554.825719",
        "client_msg_id": "29d6041c-d5a5-4530-9a7a-ded321d4a8f0",
        "text": "Anyone getting timeout errors this morning?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g7b056afdad3",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/7b056afdad3e6d36f69435e376411736.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Mike",
            "real_name": "Mike",
            "display_name": "moseley82",
            "team": "T4G9NBD2M",
            "name": "mikecarter86",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Lpy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Anyone getting timeout errors this morning?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "When backtesting wth Flumine, I previously stored list of total volumes matched for each runner in a dictionary. I decided to store them in the RunnerBook objects instead, and wrote this method:\n\n```def update_total_volume_list(self, runner: RunnerBook):\n    if not hasattr(runner, \"total_volume_list\"):\n        runner.total_volume_list = []\n    runner.total_volume_list.append(runner.total_matched)\n    # print(runner.total_volume_list)```\nThe method is called whenever process_market_book is refreshed.\n\nHowever, when I run the commented out test print command, it reveals that the total_matched figure isn't increasing.  I don't expect it to increase on each refresh, but it not increasing at all.\n\nWhere am I going wrong, please?",
        "files": [
            {
                "id": "F0580CJ947K",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U013K4VNB6D",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vjwar",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "When backtesting wth Flumine, I previously stored list of total volumes matched for each runner in a dictionary. I decided to store them in the RunnerBook objects instead, and wrote this method:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def update_total_volume_list(self, runner: RunnerBook):\n    if not hasattr(runner, \"total_volume_list\"):\n        runner.total_volume_list = []\n    runner.total_volume_list.append(runner.total_matched)\n    # print(runner.total_volume_list)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nThe method is called whenever process_market_book is refreshed.\n\nHowever, when I run the commented out test print command, it reveals that the total_matched figure isn't increasing.  I don't expect it to increase on each refresh, but it not increasing at all.\n\nWhere am I going wrong, please?"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1683980251.113139",
        "client_msg_id": "2cd9f46a-efa8-4acf-bd3e-5428e54dac6a",
        "thread_ts": "1683980251.113139",
        "reply_count": 10,
        "reply_users_count": 3,
        "latest_reply": "1683996735.176039",
        "reply_users": [
            "UBS7QANF3",
            "U013K4VNB6D",
            "UUCD6P13J"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1683980403.366979"
            },
            {
                "user": "U013K4VNB6D",
                "ts": "1683980452.038689"
            },
            {
                "user": "U013K4VNB6D",
                "ts": "1683981220.903979"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1683981459.316319"
            },
            {
                "user": "UUCD6P13J",
                "ts": "1683981588.422499"
            },
            {
                "user": "U013K4VNB6D",
                "ts": "1683981779.486819"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1683981845.075229"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1683981895.845669"
            },
            {
                "user": "U013K4VNB6D",
                "ts": "1683982001.381199"
            },
            {
                "user": "U013K4VNB6D",
                "ts": "1683996735.176039"
            }
        ],
        "is_locked": false,
        "subscribed": false
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1683980403.366979",
        "client_msg_id": "b4bda4c5-2a80-4c5b-8a5c-f7d73b5f793b",
        "text": "You get a new RunnerBook object on every market book update?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "yIMHK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You get a new RunnerBook object on every market book update?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013K4VNB6D",
        "type": "message",
        "ts": "1683980452.038689",
        "client_msg_id": "0370959d-25b0-415e-83b1-9873ba75889b",
        "text": "That would explain it. Thanks Mo.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf188478b89f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f188478b89f4a5e2c5af9eafa0433712.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "",
            "real_name": "Jeff Waters",
            "display_name": "Jeff Waters",
            "team": "T4G9NBD2M",
            "name": "watersjg",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3pN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That would explain it. Thanks Mo."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U013K4VNB6D",
        "type": "message",
        "ts": "1683981220.903979",
        "client_msg_id": "f5c6b66b-2974-4d0c-8ade-b77c84fcb021",
        "text": "Actually, what I don't understand is, if it were a new object, then why do the lists have multiple elements?\n\nIf I were getting a fresh set of RunnerBook objects on each refresh, then I would expect the method to be run exactly once for each runner?\n\nI also find it curious that some of the lists have far more entries than others. I don't know if that's connected to multi-processing (race conditions, maybe?).\n\nIncidentally, the reason I switched from the dictionary approach was because of weird stuff happening that didn't make sense to me, and I hoped that, if each runner had its own variables for storing data instead of using shared dictionaries, it might eliminate race conditions or whatever was causing the weird behaviour I was seeing.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf188478b89f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f188478b89f4a5e2c5af9eafa0433712.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "",
            "real_name": "Jeff Waters",
            "display_name": "Jeff Waters",
            "team": "T4G9NBD2M",
            "name": "watersjg",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "45s",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Actually, what I don't understand is, if it were a new object, then why do the lists have multiple elements?\n\nIf I were getting a fresh set of RunnerBook objects on each refresh, then I would expect the method to be run exactly once for each runner?\n\nI also find it curious that some of the lists have far more entries than others. I don't know if that's connected to multi-processing (race conditions, maybe?).\n\nIncidentally, the reason I switched from the dictionary approach was because of weird stuff happening that didn't make sense to me, and I hoped that, if each runner had its own variables for storing data instead of using shared dictionaries, it might eliminate race conditions or whatever was causing the weird behaviour I was seeing."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1683981459.316319",
        "client_msg_id": "e468c41e-d53c-47ac-b0c9-66e0a8dfd7e3",
        "text": "Depends what else you're doing. Where's this function called from?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Mhq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Depends what else you're doing. Where's this function called from?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUCD6P13J",
        "type": "message",
        "ts": "1683981588.422499",
        "client_msg_id": "FA345D4E-A46A-4D16-8B65-2A677A540390",
        "text": "I’d recommend using market.context for things like this, it’s not good practice to add attributes that way.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6898272ab81",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6898272ab810e419c2c9ca9af1e53da8.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png",
            "first_name": "Lee",
            "real_name": "Lee U",
            "display_name": "Lee",
            "team": "T4G9NBD2M",
            "name": "lunswor",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Wg36d",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I’d recommend using market.context for things like this, "
                            },
                            {
                                "type": "text",
                                "text": "it’s"
                            },
                            {
                                "type": "text",
                                "text": " not good practice to add attributes that way."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "100",
                "users": [
                    "UBS7QANF3"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U013K4VNB6D",
        "type": "message",
        "ts": "1683981779.486819",
        "client_msg_id": "98551385-6718-4df9-9d24-12ed65fe2beb",
        "text": "<@UBS7QANF3> - A data update method is called from process_market_book.\n\n```def process_market_book(self, market: Market, market_book: MarketBook):\n    for runner in market_book.runners:\n        DataUpdateController().update_data(runner)```\nIn turn, it calls the method.\n\n<@UUCD6P13J> I'll look into that, thanks.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf188478b89f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f188478b89f4a5e2c5af9eafa0433712.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "",
            "real_name": "Jeff Waters",
            "display_name": "Jeff Waters",
            "team": "T4G9NBD2M",
            "name": "watersjg",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5n2y7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UBS7QANF3"
                            },
                            {
                                "type": "text",
                                "text": " - A data update method is called from process_market_book.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def process_market_book(self, market: Market, market_book: MarketBook):\n    for runner in market_book.runners:\n        DataUpdateController().update_data(runner)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nIn turn, it calls the method.\n\n"
                            },
                            {
                                "type": "user",
                                "user_id": "UUCD6P13J"
                            },
                            {
                                "type": "text",
                                "text": " I'll look into that, thanks."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1683981845.075229",
        "client_msg_id": "edbc9b76-5016-4bb4-8d6f-360a1c87491f",
        "text": "What's DataUpdateController?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "n=k",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What's DataUpdateController?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1683981895.845669",
        "client_msg_id": "daca1bed-2ff3-4863-8502-7ad7d7313bc2",
        "text": "Unless you're doing very weird shit that you shouldn't be doing then it should be fine to have dictionary of selection ID to list of volumes. Store it in the market.context as <@UUCD6P13J> says",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rA\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Unless you're doing very weird shit that you shouldn't be doing then it should be fine to have dictionary of selection ID to list of volumes. Store it in the market.context as "
                            },
                            {
                                "type": "user",
                                "user_id": "UUCD6P13J"
                            },
                            {
                                "type": "text",
                                "text": " says"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U013K4VNB6D"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U013K4VNB6D",
        "type": "message",
        "ts": "1683982001.381199",
        "client_msg_id": "83cfcfac-d53a-4b01-9690-5a5d3ec58b6a",
        "text": "It's just a data update controller class (which, in its current form, I could easily get rid of).\n\n```from betfairlightweight.resources import RunnerBook\n\nfrom incoming_data_storage.raw_data_dictionary_update import RawDataUpdate\n\nclass DataUpdateController:\n    def update_data(self, runner: RunnerBook):\n        RawDataUpdate().update_raw_data(runner)```\nThe method it calls begins by calling the method I put in my message:\n\n```def update_raw_data(self, runner: RunnerBook):\n    self.update_total_volume_list(runner)```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf188478b89f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f188478b89f4a5e2c5af9eafa0433712.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "",
            "real_name": "Jeff Waters",
            "display_name": "Jeff Waters",
            "team": "T4G9NBD2M",
            "name": "watersjg",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8CXvr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It's just a data update controller class (which, in its current form, I could easily get rid of).\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "from betfairlightweight.resources import RunnerBook\n\nfrom incoming_data_storage.raw_data_dictionary_update import RawDataUpdate\n\nclass DataUpdateController:\n    def update_data(self, runner: RunnerBook):\n        RawDataUpdate().update_raw_data(runner)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nThe method it calls begins by calling the method I put in my message:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def update_raw_data(self, runner: RunnerBook):\n    self.update_total_volume_list(runner)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "U013K4VNB6D",
        "type": "message",
        "ts": "1683996735.176039",
        "client_msg_id": "43dacf8e-b32c-4442-9989-0b944f474744",
        "text": "The suggestion did the trick - thanks again guys..",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf188478b89f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f188478b89f4a5e2c5af9eafa0433712.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "",
            "real_name": "Jeff Waters",
            "display_name": "Jeff Waters",
            "team": "T4G9NBD2M",
            "name": "watersjg",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1683980251.113139",
        "parent_user_id": "U013K4VNB6D",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "A8W",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The suggestion did the trick - thanks again guys.."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "UBS7QANF3"
                ],
                "count": 1
            }
        ]
    }
]