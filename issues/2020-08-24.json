[
    {
        "user": "UPCNDMPSN",
        "type": "message",
        "ts": "1598272233.004100",
        "client_msg_id": "abb55950-3f3f-4b76-b586-5be86cbf7c84",
        "text": "Yes, that is the easiest solution. I just deinstalled the ujson package and then it will use the default json package.\nThis ujson bug killed my bot once or twice and I have no failover, so I just went for that solution.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ga590fa58740",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a590fa58740e2580738ec36136051364.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "",
            "real_name": "Kai",
            "display_name": "Kai",
            "team": "T4G9NBD2M",
            "name": "wasor",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1596749920.070800",
        "parent_user_id": "U016TGY3676",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nWh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes, that is the easiest solution. I just deinstalled the ujson package and then it will use the default json package.\nThis ujson bug killed my bot once or twice and I have no failover, so I just went for that solution."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "channel_join",
        "user": "U018YDJUKPZ",
        "text": "<@U018YDJUKPZ> has joined the channel",
        "type": "message",
        "ts": "1598281393.004400"
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1598304912.014500",
        "edited": {
            "user": "U016TGY3676",
            "ts": "1598305111.000000"
        },
        "client_msg_id": "ffb83ead-80ab-4043-bff4-3fb9fd1e8e47",
        "text": "Any ideas why smart_open() can't open files saved with marketrecorder.py? I recently had issues getting backtesting running with self-recorded data but have had success using `.bz2` historical data acquired from Betfair. Turned out that there was nothing wrong with my original backtest code, but my recording code is shyte. :man-facepalming:\n\n`def _zip_file(self, file_dir: str,`\n    `market_id: str) -&gt; str:\n    \"\"\"zips txt file into filename.bz2\"\"\"\n    zip_file_directory = os.path.join(\n        self.local_dir,\n        self.recorder_id,\n        \"%s.bz2\" % market_id\n    )\n    with zipfile.ZipFile(\n        zip_file_directory,\n        mode=\"w\"\n    ) as zf:\n        zf.write(\n            file_dir,\n            os.path.basename(file_dir),\n            compress_type=zipfile.ZIP_BZIP2\n        )\n    return zip_file_directory`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LohJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Any ideas why smart_open() can't open files saved with marketrecorder.py? I recently had issues getting backtesting running with self-recorded data but have had success using "
                            },
                            {
                                "type": "text",
                                "text": ".bz2",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " historical data acquired from Betfair. Turned out that there was nothing wrong with my original backtest code, but my recording code is shyte. "
                            },
                            {
                                "type": "emoji",
                                "name": "man-facepalming",
                                "unicode": "1f926-200d-2642-fe0f"
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            },
                            {
                                "type": "text",
                                "text": "def _zip_file(self, file_dir: str,",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    market_id: str) -> str:\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "    \"\"\"zips txt file into filename.bz2\"\"\"\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "    zip_file_directory = os.path.join(\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "        self.local_dir,\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "        self.recorder_id,\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "        \"%s.bz2\" % market_id\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "    )\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "    with zipfile.ZipFile(\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "        zip_file_directory,\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "        mode=\"w\"\n    )",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as zf:\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "        zf.write(\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "            file_dir,\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "            os.path.basename(file_dir),\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "            compress_type=zipfile.ZIP_BZIP2\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "        )\n",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "    return zip_file_directory",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1598330236.015300",
        "client_msg_id": "0ce649e2-2354-45d3-8218-77d90b9cdece",
        "text": "Try bz2.BZ2File instead of zipfile.ZipFile",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rW4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Try bz2.BZ2File instead of zipfile.ZipFile"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U016535QCJ2",
        "type": "message",
        "ts": "1598335590.017200",
        "edited": {
            "user": "U016535QCJ2",
            "ts": "1598335620.000000"
        },
        "client_msg_id": "c2b7cab3-68b6-422a-a074-bfaef0e1248b",
        "text": "Just as an FYI (as I only really discovered this recently), bz2 is a compression algorithm that compresses a file to a stream of bytes (no file or directory names), whereas zip compresses files to an archive which includes a directory structure (but may still contain only one file)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "048f61bdc189",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-07-01\/1216267094995_048f61bdc189acecaafc_72.jpg",
            "first_name": "Misha",
            "real_name": "Misha Charrett",
            "display_name": "Misha",
            "team": "T4G9NBD2M",
            "name": "misha",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZX4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Just as an FYI (as I only really discovered this recently), bz2 is a compression algorithm that compresses a file to a stream of bytes (no file or directory names), whereas zip compresses files to an archive which includes a directory structure (but may still contain only one file)"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]