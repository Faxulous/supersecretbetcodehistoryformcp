[
    {
        "user": "U01LD279D16",
        "type": "message",
        "ts": "1618991795.121200",
        "edited": {
            "user": "U01LD279D16",
            "ts": "1626642979.000000"
        },
        "client_msg_id": "903f103d-f7ea-4ad5-9ffa-ef628c0c9bdd",
        "text": "Hi All, I have an issue when backtesting using marketOnClose orders. The order is placed, but stays 'executable' - it is never matched at SP. This happens regularly in backtesting, but not always. I never have this problem in live markets - the bet at SP is always placed\/matched successfully. Is this a known problem with backtesting these order types, or am I doing something wrong? I have replicated the problem in a simple file if necessary. Cheers",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g5488a29f6fb",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5488a29f6fbcfe8df23382d16a596068.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png",
            "first_name": "Peter",
            "real_name": "Peter C",
            "display_name": "Peter C",
            "team": "T4G9NBD2M",
            "name": "peter.carter304",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "reply_count": 16,
        "reply_users_count": 2,
        "latest_reply": "1618997345.125200",
        "reply_users": [
            "U4H19D1D2",
            "U01LD279D16"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1618992277.121300"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618992296.121500"
            },
            {
                "user": "U01LD279D16",
                "ts": "1618993059.122300"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618993308.122500"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618993338.122700"
            },
            {
                "user": "U01LD279D16",
                "ts": "1618994197.122900"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618994273.123200"
            },
            {
                "user": "U01LD279D16",
                "ts": "1618995117.123400"
            },
            {
                "user": "U01LD279D16",
                "ts": "1618995234.123600"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618995763.123800"
            },
            {
                "user": "U01LD279D16",
                "ts": "1618995832.124000"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618995970.124200"
            },
            {
                "user": "U01LD279D16",
                "ts": "1618996043.124400"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618996407.124600"
            },
            {
                "user": "U01LD279D16",
                "ts": "1618997318.124800"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1618997345.125200"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1618997345.125200",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "AU5sj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi All, I have an issue when backtesting using marketOnClose orders. The order is placed, but stays 'executable' - it is never matched at SP. This happens regularly in backtesting, but not always. I never have this problem in live markets - the bet at SP is always placed\/matched successfully. Is this a known problem with backtesting these order types, or am I doing something wrong? I have replicated the problem in a simple file if necessary. Cheers"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618992277.121300",
        "client_msg_id": "2596d9c4-f19e-4837-8ba5-4a32cd0cea7d",
        "text": "Can you share the file?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JcRl9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Can you share the file?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618992296.121500",
        "client_msg_id": "6f535d6f-880d-4e5f-9a9b-b8cbfa9ef079",
        "text": "And the market file if you have an example",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8Xz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "And the market file if you have an example"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "Hi Liam, Here's the file and a market file - it's self recorded data.",
        "files": [
            {
                "id": "F01UVUPJ05B",
                "created": 1618992376,
                "timestamp": 1618992376,
                "name": "marketOnClose.py",
                "title": "marketOnClose.py",
                "mimetype": "text\/plain",
                "filetype": "python",
                "pretty_type": "Python",
                "user": "U01LD279D16",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 3319,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F01UVUPJ05B\/marketonclose.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F01UVUPJ05B\/download\/marketonclose.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/U01LD279D16\/F01UVUPJ05B\/marketonclose.py",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F01UVUPJ05B-7641964811",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/U01LD279D16\/F01UVUPJ05B\/marketonclose.py\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            },
            {
                "id": "F01UJ98NJLF",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UYrT7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi Liam, Here's the file and a market file - it's self recorded data."
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1618993059.122300",
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16"
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618993308.122500",
        "client_msg_id": "b5f2c5e8-60b3-4775-aa27-0797a9a156bf",
        "text": "```{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681205930 on runner 12129148\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681201210 on runner 10721829\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681202280 on runner 12363643\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681205930 on runner 12129148\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681201210 on runner 10721829\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681202280 on runner 12363643\"}```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DHsW",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681205930 on runner 12129148\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681201210 on runner 10721829\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681202280 on runner 12363643\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681205930 on runner 12129148\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681201210 on runner 10721829\"}\n{\"asctime\": \"2021-04-21 08:21:10,081\", \"levelname\": \"WARNING\", \"message\": \"SP not available for order 138382860681202280 on runner 12363643\"}"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618993338.122700",
        "client_msg_id": "9768cf0f-8c00-46be-a32b-a9c5fafa4de8",
        "text": "You are placing some orders on removed runners",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mDDZp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You are placing some orders on removed runners"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01LD279D16",
        "type": "message",
        "ts": "1618994197.122900",
        "edited": {
            "user": "U01LD279D16",
            "ts": "1618994255.000000"
        },
        "client_msg_id": "4f09b385-4caf-46f4-96c9-413bd2805888",
        "text": "Sorry, maybe the file I sent doesn't show the problem very well. When backtesting, I have this problem on active runners I have been laying pre-off - so I don't think it's isolated to non-runners. Sometimes my recorded files don't contain any SP info - these files cause problems (but so do some that have the SP info) - is it normal for some files to be missing the SP info?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g5488a29f6fb",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5488a29f6fbcfe8df23382d16a596068.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png",
            "first_name": "Peter",
            "real_name": "Peter C",
            "display_name": "Peter C",
            "team": "T4G9NBD2M",
            "name": "peter.carter304",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "u30",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Sorry, maybe the file I sent doesn't show the problem very well. When backtesting, I have this problem on active runners I have been laying pre-off - so I don't think it's isolated to non-runners. Sometimes my recorded files don't contain any SP info - these files cause problems (but so do some that have the SP info) - is it normal for some files to be missing the SP info?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618994273.123200",
        "client_msg_id": "6ffec822-95c8-4417-a1d8-e7c0176cf2e7",
        "text": "some markets dont offer SP and some runners don't have any money matched at SP and thus don't have an SP we can use to backtest, not much we can do about that other than trying to calculate it but its not going to be accurate",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "i4J",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "some markets dont offer SP and some runners don't have any money matched at SP and thus don't have an SP we can use to backtest, not much we can do about that other than trying to calculate it but its not going to be accurate"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "For example, I have no SP info for the shortest priced horse in this file, which is a GB race from the last month (I had bets matched at SP on this horse live). Is your file the same as mine? Maybe I'm recording data incorrectly",
        "files": [
            {
                "id": "F01VBPQD265",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U01LD279D16",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "aEIEl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "For example, I have no SP info for the shortest priced horse in this file, which is a GB race from the last month (I had bets matched at SP on this horse live). Is your file the same as mine? Maybe I'm recording data incorrectly"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1618995117.123400",
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16"
    },
    {
        "user": "U01LD279D16",
        "type": "message",
        "ts": "1618995234.123600",
        "client_msg_id": "72af2f51-7f2e-472d-b7c6-234d6fdbb389",
        "text": "When I say no SP info, I mean I have everything except runner.sp.acutal_sp",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g5488a29f6fb",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5488a29f6fbcfe8df23382d16a596068.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png",
            "first_name": "Peter",
            "real_name": "Peter C",
            "display_name": "Peter C",
            "team": "T4G9NBD2M",
            "name": "peter.carter304",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TP3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "When I say no SP info, I mean I have everything except runner.sp.acutal_sp"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618995763.123800",
        "client_msg_id": "c19d5d62-5fa4-4512-8e3e-8bb30c42521f",
        "text": "btw use `market.context` to store market specific data",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "IzO0J",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "btw use "
                            },
                            {
                                "type": "text",
                                "text": "market.context",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to store market specific data"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01LD279D16",
        "type": "message",
        "ts": "1618995832.124000",
        "client_msg_id": "53d38738-14be-464c-9ec0-0e828ad3f21a",
        "text": "Thanks, I'll do that, didn't realise that was the way to do it.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g5488a29f6fb",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5488a29f6fbcfe8df23382d16a596068.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png",
            "first_name": "Peter",
            "real_name": "Peter C",
            "display_name": "Peter C",
            "team": "T4G9NBD2M",
            "name": "peter.carter304",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GAR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks, I'll do that, didn't realise that was the way to do it."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618995970.124200",
        "client_msg_id": "f05f2d4c-8dff-48d7-aba6-bed4928f259c",
        "text": "the second file works fine for me with an sp of 1.745...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "FiqH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the second file works fine for me with an sp of 1.745..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01LD279D16",
        "type": "message",
        "ts": "1618996043.124400",
        "client_msg_id": "6d5bba3a-6fd3-4665-9497-db79de5f7cd5",
        "text": "Weird, when I debug I get an SP of 'none'. I bet I'm doing something stupid somewhere, I'll have a dig and uncover it. Thank you for your help",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g5488a29f6fb",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5488a29f6fbcfe8df23382d16a596068.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png",
            "first_name": "Peter",
            "real_name": "Peter C",
            "display_name": "Peter C",
            "team": "T4G9NBD2M",
            "name": "peter.carter304",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HXBjP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Weird, when I debug I get an SP of 'none'. I bet I'm doing something stupid somewhere, I'll have a dig and uncover it. Thank you for your help"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618996407.124600",
        "client_msg_id": "8e7573a6-147e-4c1f-be28-4ed15458c37d",
        "text": "```    def process_closed_market(self, market, market_book) -&gt; None:\n        for order in market.blotter:\n            print(order.selection_id, order.average_price_matched, order.simulated.profit)\n        print()\n        for runner in market_book.runners:\n            print(runner.selection_id, runner.status, runner.sp.actual_sp)```\nAll looks good to me\n```38144945 1.75 7.5\n499911 12.0 -10\n38951128 31.78 -10\n38662759 6.0 -10\n38747915 15.07 -10\n38711149 34.38 -10\n38951129 81.03 -10\n38772402 300.0 -10\n38951130 21.0 -10\n\n38144945 WINNER 1.7459376398870414\n499911 LOSER 12\n38951128 LOSER 31.778062832\n38662759 LOSER 6\n38747915 LOSER 15.074911388112302\n38711149 LOSER 34.378974871724495\n38951129 LOSER 81.02508635883802\n38772402 LOSER 300\n38951130 LOSER 21\n38144943 REMOVED None```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "osI",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "    def process_closed_market(self, market, market_book) -> None:\n        for order in market.blotter:\n            print(order.selection_id, order.average_price_matched, order.simulated.profit)\n        print()\n        for runner in market_book.runners:\n            print(runner.selection_id, runner.status, runner.sp.actual_sp)"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "All looks good to me\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "38144945 1.75 7.5\n499911 12.0 -10\n38951128 31.78 -10\n38662759 6.0 -10\n38747915 15.07 -10\n38711149 34.38 -10\n38951129 81.03 -10\n38772402 300.0 -10\n38951130 21.0 -10\n\n38144945 WINNER 1.7459376398870414\n499911 LOSER 12\n38951128 LOSER 31.778062832\n38662759 LOSER 6\n38747915 LOSER 15.074911388112302\n38711149 LOSER 34.378974871724495\n38951129 LOSER 81.02508635883802\n38772402 LOSER 300\n38951130 LOSER 21\n38144943 REMOVED None"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01LD279D16",
        "type": "message",
        "ts": "1618997318.124800",
        "client_msg_id": "9eb2668b-4359-40e7-bac1-9063ee1591d9",
        "text": "Yeah I get the same, I must be doing something dumb somewhere else in my code. Thanks again for your help - it's been really useful",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g5488a29f6fb",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5488a29f6fbcfe8df23382d16a596068.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png",
            "first_name": "Peter",
            "real_name": "Peter C",
            "display_name": "Peter C",
            "team": "T4G9NBD2M",
            "name": "peter.carter304",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bWpfO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah I get the same, I must be doing something dumb somewhere else in my code. Thanks again for your help - it's been really useful"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1618997345.125200",
        "client_msg_id": "9160B9EB-724E-4CAA-BF43-AF20DA81FFE5",
        "text": ":+1: Np",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618991795.121200",
        "parent_user_id": "U01LD279D16",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ubo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "emoji",
                                "name": "+1",
                                "unicode": "1f44d"
                            },
                            {
                                "type": "text",
                                "text": " Np"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1619008466.125400",
        "client_msg_id": "b2f943f7-f871-4ae2-b42e-b278defae350",
        "text": "If you don't mind wading through tons of (sometimes incomplete data) you can find winners listed alongside SPs in <https:\/\/promo.betfair.com\/betfairsp\/prices|Betfair's price files>.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1618929155.109000",
        "parent_user_id": "UK55EGNLA",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pJB\/0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If you don't mind wading through tons of (sometimes incomplete data) you can find winners listed alongside SPs in "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/promo.betfair.com\/betfairsp\/prices",
                                "text": "Betfair's price files"
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0159ENQVBP",
        "type": "message",
        "ts": "1619019145.125800",
        "edited": {
            "user": "U0159ENQVBP",
            "ts": "1619020134.000000"
        },
        "client_msg_id": "10d16e08-8cae-4409-912f-120e25c96976",
        "text": "What causes \"Order 1234 not present in blotter\" followed by Trade '49...ef' not present in RunnerContext live_trades on reset\"?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g058bbfdec02",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/058bbfdec0231b8a7533f70e7b106cbc.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0000-72.png",
            "first_name": "",
            "real_name": "Rich",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "slack1642",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "cmB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What causes \"Order 1234 not present in blotter\" followed by Trade '49...ef' not present in RunnerContext live_trades on reset\"?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1619021458.126400",
        "client_msg_id": "4e2e6e98-f5db-4fde-ad8a-427f6ab588de",
        "text": "the restart causes it, it will try and recreate the order\/trade locally if you look at the logs",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fKa",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the restart causes it, it will try and recreate the order\/trade locally if you look at the logs"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "channel_join",
        "user": "U014192NCJC",
        "text": "<@U014192NCJC> has joined the channel",
        "type": "message",
        "ts": "1619026028.126500"
    },
    {
        "subtype": "channel_join",
        "user": "U01V8KMK32Q",
        "text": "<@U01V8KMK32Q> has joined the channel",
        "type": "message",
        "ts": "1619046374.126700"
    }
]