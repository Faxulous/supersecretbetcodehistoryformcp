[
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582128272.142400",
        "client_msg_id": "b6227ea5-7cb0-41ee-b1e2-f05b4d83c4ac",
        "text": "I'm getting `betfairlightweight.exceptions.CacheError: \"EX_MARKET_DEF\" must be requested to use cache` on a stream where I have requested `EX_MARKET_DEF`. I'm assuming Betfair is sending through data on a market without one. Is there any way to gracefully ignore the data in this situation?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NjlH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm getting "
                            },
                            {
                                "type": "text",
                                "text": "betfairlightweight.exceptions.CacheError: \"EX_MARKET_DEF\" must be requested to use cache",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " on a stream where I have requested "
                            },
                            {
                                "type": "text",
                                "text": "EX_MARKET_DEF",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". I'm assuming Betfair is sending through data on a market without one. Is there any way to gracefully ignore the data in this situation?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582128394.142700",
        "client_msg_id": "4f2efcd9-8c6d-4701-8fa5-463540864cb2",
        "text": "`1.169011224` is the market",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "g1Rp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "1.169011224",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is the market"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U92CASP1B",
        "type": "message",
        "ts": "1582128551.144800",
        "client_msg_id": "be490482-4494-4545-95ca-e6d41f305bbc",
        "text": "Does it only happen for that market? I had that issue implementing my own solution, but that was that is was messages left in the socket buffer, upon restart and the old messages was processed before sub_image was received.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g374352c822f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a374352c822fa856c4cfdd782bbb8669.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonatan",
            "real_name": "Jonatan",
            "display_name": "Jonatan (skyw)",
            "team": "T4G9NBD2M",
            "name": "almen.jonatan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UrF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Does it only happen for that market? I had that issue implementing my own solution, but that was that is was messages left in the socket buffer, upon restart and the old messages was processed before sub_image was received."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582128685.145600",
        "client_msg_id": "0605aeae-d8da-4c7c-9fda-e75eb94b3633",
        "text": "Yes it's just that market. 42 markets get added to the cache successfully before it breaks on that one",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Mn8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes it's just that market. 42 markets get added to the cache successfully before it breaks on that one"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582128725.146100",
        "client_msg_id": "cb46eabc-9b29-4173-9368-c14277f57fa1",
        "text": "Obviously the problem is with Betfair sending junk data but this is a worrying point of failure",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "yiN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Obviously the problem is with Betfair sending junk data but this is a worrying point of failure"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U92CASP1B",
        "type": "message",
        "ts": "1582128786.147500",
        "client_msg_id": "ec3294c5-3843-4c57-90ca-f42f1a2a04af",
        "text": "Very weird, and worrying!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g374352c822f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a374352c822fa856c4cfdd782bbb8669.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonatan",
            "real_name": "Jonatan",
            "display_name": "Jonatan (skyw)",
            "team": "T4G9NBD2M",
            "name": "almen.jonatan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zK+YL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Very weird, and worrying!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1582128801.148300",
        "client_msg_id": "B4DAFB30-F425-4B74-AAB4-470D64C20030",
        "text": "Hmm no easy way around this without creating a custom listener + cache ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ctr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hmm no easy way around this without creating a custom listener + cache "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1582128829.149300",
        "client_msg_id": "FB530316-0B21-4072-A98F-F9BED5BA89BB",
        "text": "But lots to fix as it will then fail on create_resource ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kte",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "But lots to fix as it will then fail on create_resource "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582128835.149500",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1582128957.000000"
        },
        "client_msg_id": "4bb0761a-0597-4796-a8e6-a364ac76a3c6",
        "text": "I haven't completely thought through the logic but it would be good if we can detect that a stream is successfully using the cache up to a point and then treat this as a warning with the data ignored",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "a8ADG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I haven't completely thought through the logic but it would be good if we can detect that a stream is successfully using the cache up to a point and then treat this as a warning with the data ignored"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U92CASP1B",
        "type": "message",
        "ts": "1582129029.151700",
        "client_msg_id": "9308354c-d507-4bde-ae3e-ba52aab0ea9a",
        "text": "Are we completely sure that the market is a \"rogue\" market first? : )",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g374352c822f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a374352c822fa856c4cfdd782bbb8669.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonatan",
            "real_name": "Jonatan",
            "display_name": "Jonatan (skyw)",
            "team": "T4G9NBD2M",
            "name": "almen.jonatan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "B4qxb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Are we completely sure that the market is a \"rogue\" market first? : )"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U92CASP1B",
        "type": "message",
        "ts": "1582129123.152200",
        "client_msg_id": "cb7aad89-3bc9-45db-b613-ed47ef0fe5af",
        "text": "nvm i guess you never subscribed to tennis ...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g374352c822f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a374352c822fa856c4cfdd782bbb8669.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png",
            "first_name": "Jonatan",
            "real_name": "Jonatan",
            "display_name": "Jonatan (skyw)",
            "team": "T4G9NBD2M",
            "name": "almen.jonatan",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "frAO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "nvm i guess you never subscribed to tennis ..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1582129361.152400",
        "client_msg_id": "6D816D15-C435-45D5-A664-FC1467DF07CC",
        "text": "Yeah we can move the error handling up and disregard the market but you will keep getting updates",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hwAB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah we can move the error handling up and disregard the market but you will keep getting updates"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582129878.153600",
        "client_msg_id": "f8447f15-e2f6-489f-98f4-8b9374731035",
        "text": "For now I've just modified the package to check that `'marketDefintion'`  is in `market_book` before calling `MarketBookCache`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CRxMD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "For now I've just modified the package to check that "
                            },
                            {
                                "type": "text",
                                "text": "'marketDefintion'",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  is in "
                            },
                            {
                                "type": "text",
                                "text": "market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " before calling "
                            },
                            {
                                "type": "text",
                                "text": "MarketBookCache",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UTP5WKABC",
        "type": "message",
        "ts": "1582133583.154200",
        "client_msg_id": "5bd981fa-01e9-401b-84ed-52a7a0a6cb90",
        "text": "```NET::ERR_CERT_COMMON_NAME_INVALID```\nFrom Belgium",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d84b642f22cf",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-18\/944073786706_d84b642f22cfe6d5b267_72.jpg",
            "first_name": "IamYou",
            "real_name": "IamYou",
            "display_name": "IamYou",
            "team": "T4G9NBD2M",
            "name": "r.bodha",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "cnaG",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "NET::ERR_CERT_COMMON_NAME_INVALID"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "From Belgium"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UTP5WKABC",
        "type": "message",
        "ts": "1582133616.155100",
        "client_msg_id": "42ce1b6b-a957-4975-9221-be4bf369a20c",
        "text": "Not from NL, though.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d84b642f22cf",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-18\/944073786706_d84b642f22cfe6d5b267_72.jpg",
            "first_name": "IamYou",
            "real_name": "IamYou",
            "display_name": "IamYou",
            "team": "T4G9NBD2M",
            "name": "r.bodha",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nFkCq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not from NL, though."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UTP5WKABC",
        "type": "message",
        "ts": "1582133626.155400",
        "client_msg_id": "6e39ed8b-819c-4bab-9f89-a654e5436c58",
        "text": "on domain <https:\/\/www.betfair.com\/>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d84b642f22cf",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-18\/944073786706_d84b642f22cfe6d5b267_72.jpg",
            "first_name": "IamYou",
            "real_name": "IamYou",
            "display_name": "IamYou",
            "team": "T4G9NBD2M",
            "name": "r.bodha",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "title": "        Betfair Online Betting » Get A Free £20 Exchange Bet  ",
                "title_link": "https:\/\/www.betfair.com\/",
                "text": "Join Betfair &amp; bet with the best odds!  ✓ More Ways To Bet  ✓  More Ways To Win  ✓New Customers: Bet £20 on the Exchange and if it loses, we will refund you £20. T&amp;C's Apply.",
                "fallback": "        Betfair Online Betting » Get A Free £20 Exchange Bet  ",
                "from_url": "https:\/\/www.betfair.com\/",
                "service_icon": "https:\/\/www.betfair.com\/favicon.ico",
                "service_name": "betfair.com",
                "id": 1,
                "original_url": "https:\/\/www.betfair.com\/"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mQf",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "on domain "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.betfair.com\/"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UTP5WKABC",
        "type": "message",
        "ts": "1582133714.155900",
        "client_msg_id": "425c7ffe-9889-4267-a497-ffc88ff6d1d4",
        "text": "which is quite interesting.. I would say.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d84b642f22cf",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-18\/944073786706_d84b642f22cfe6d5b267_72.jpg",
            "first_name": "IamYou",
            "real_name": "IamYou",
            "display_name": "IamYou",
            "team": "T4G9NBD2M",
            "name": "r.bodha",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fPaF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "which is quite interesting.. I would say."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]