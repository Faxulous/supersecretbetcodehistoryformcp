[
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1719648502.563899",
        "client_msg_id": "a06c7793-69e1-40e9-ab3c-98a24f7c7955",
        "text": "Given the bet cancellation is 8 minutes later could be some code running at suspension \/ close of market - although no idea what type of markets you are on ? If sure it is not your code doing \/ causing the cancel then try comparing the server\/home code and package versions. Losses due to improved latency quite possible - now getting matched on bad value bets that were just too late from Aus so not being matched from home but are now.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "h6joc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Given the bet cancellation is 8 minutes later could be some code running at suspension \/ close of market - although no idea what type of markets you are on ? If sure it is not your code doing \/ causing the cancel then try comparing the server\/home code and package versions. Losses due to improved latency quite possible - now getting matched on bad value bets that were just too late from Aus so not being matched from home but are now."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U053KV09FKP",
        "type": "message",
        "ts": "1719649852.896219",
        "client_msg_id": "e8b2de04-4e11-45d6-b97c-7efe60ba3913",
        "text": "This is all i have after bet is placed\n```    def process_orders(self, market, orders):\n        for order in orders:\n            if order.status == OrderStatus.EXECUTABLE and order.elapsed_seconds &gt; 427:\n                market.cancel_order(order)```\nDefinitely nothing to do with closed market.\nLots of bets like this. Bet is matched instantly but treated as executable for its lifetime",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge686f0ebeb0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e686f0ebeb0b76b2f1e9e3cd9758e4eb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "Shado",
            "real_name": "Shado",
            "display_name": "Adrian",
            "team": "T4G9NBD2M",
            "name": "dualitynonduality_171",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jCw7e",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This is all i have after bet is placed\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "    def process_orders(self, market, orders):\n        for order in orders:\n            if order.status == OrderStatus.EXECUTABLE and order.elapsed_seconds > 427:\n                market.cancel_order(order)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Definitely nothing to do with closed market.\nLots of bets like this. Bet is matched instantly but treated as executable for its lifetime"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U05L8PZD2FM",
        "type": "message",
        "ts": "1719651759.956469",
        "client_msg_id": "1cb10155-4d4d-41a4-9445-88c5c6ffaa04",
        "text": "When did the problem start, did it exactly coincide with you moving the server? Could just be coincidence say if someone else has started taking the bets you were taking.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gb417ed434bb",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b417ed434bbea199d58a9b4bd0affeb9.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png",
            "first_name": "Joe",
            "real_name": "Joe",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "stapleton_joe",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XpKOU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "When did the problem start, did it exactly coincide with you moving the server? Could just be coincidence say if someone else has started taking the bets you were taking."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1719651865.165209",
        "client_msg_id": "7e5d2bda-1225-48c7-b88e-ce66c5fe39b5",
        "text": "I can't speak to the cancelling behaviour you've observed but:\n\nReduced latency is going to affect how quickly you receive the triggers as well as how quickly you send your bets to Betfair. It's not impossible that acting too quickly is deleterious. Have you tried running backtests with different simulated latencies and comparing results?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xLzRO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I can't speak to the cancelling behaviour you've observed but:\n\nReduced latency is going to affect how quickly you receive the triggers as well as how quickly you send your bets to Betfair. It's not impossible that acting too quickly is deleterious. Have you tried running backtests with different simulated latencies and comparing results?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U053KV09FKP",
        "type": "message",
        "ts": "1719653013.951709",
        "client_msg_id": "3cd2f3e6-f212-43b9-acad-b8755680b836",
        "text": "<@U05L8PZD2FM> yep happened the second i moved it over.\n<@UBS7QANF3> i haven't tried doing the backtest with lower latency. I'll give it a crack. Thanks for the idea!\nIt's probably my bad coding that was being cushioned with a higher latency",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge686f0ebeb0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e686f0ebeb0b76b2f1e9e3cd9758e4eb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "Shado",
            "real_name": "Shado",
            "display_name": "Adrian",
            "team": "T4G9NBD2M",
            "name": "dualitynonduality_171",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CZGgt",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U05L8PZD2FM"
                            },
                            {
                                "type": "text",
                                "text": " yep happened the second i moved it over.\n"
                            },
                            {
                                "type": "user",
                                "user_id": "UBS7QANF3"
                            },
                            {
                                "type": "text",
                                "text": " i haven't tried doing the backtest with lower latency. I'll give it a crack. Thanks for the idea!\nIt's probably my bad coding that was being cushioned with a higher latency"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U053KV09FKP",
        "type": "message",
        "ts": "1719653314.330139",
        "client_msg_id": "67e0aa5c-7d57-4ba2-a311-3797d5c5ce25",
        "text": "Could someone clarify, if an order that's fully matched is classified as 'live'?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge686f0ebeb0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e686f0ebeb0b76b2f1e9e3cd9758e4eb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "Shado",
            "real_name": "Shado",
            "display_name": "Adrian",
            "team": "T4G9NBD2M",
            "name": "dualitynonduality_171",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Jc1Hl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Could someone clarify, if an order that's fully matched is classified as 'live'?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1719673285.315149",
        "edited": {
            "user": "U02RN7YDRQ9",
            "ts": "1719673455.000000"
        },
        "client_msg_id": "28c60e1e-23cd-41dd-8981-eb63020c236a",
        "text": "Raised similar a few months ago <https:\/\/github.com\/betcode-org\/flumine\/issues\/743>  Suggest check size_remaining rather than rely on status - that seems to get correctly knocked down to zero even though order not set as execcomplete - test with minimum stake\nEdit: cancel from process_orders will take place after 427secs since status wrong",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "FtWWH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Raised similar a few months ago "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/issues\/743"
                            },
                            {
                                "type": "text",
                                "text": "  Suggest check size_remaining rather than rely on status - that seems to get correctly knocked down to zero even though order not set as execcomplete - test with minimum stake\nEdit: cancel from process_orders will take place after 427secs since status wrong"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U053KV09FKP"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UUCD6P13J",
        "type": "message",
        "ts": "1719694106.105649",
        "edited": {
            "user": "UUCD6P13J",
            "ts": "1719694123.000000"
        },
        "client_msg_id": "78A4AAEB-2D5C-4708-A8C4-AA3DC9441E5B",
        "text": "Would you be able to share the full logs? It would be useful to see the full lifecycle of the bets",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6898272ab81",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6898272ab810e419c2c9ca9af1e53da8.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0012-72.png",
            "first_name": "Lee",
            "real_name": "Lee U",
            "display_name": "Lee",
            "team": "T4G9NBD2M",
            "name": "lunswor",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "U2PKx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Would you be able to share the full logs? It would be useful to see the full lifecycle of the bets"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "<@UUCD6P13J> this is the life cycle of a single bet. I'm not an expert at reading logs, but to me it looks like it's getting EXECUTION_COMPLETE straight away cause it's fully matched straight away. Then proceeds to treat it as pending, and my cancel logic `order.status == OrderStatus.EXECUTABLE` is getting triggered 8 minutes later, which fails because it's already matched. However my logging control shows this order as 8 minutes elapsed executable.",
        "files": [
            {
                "id": "F07ARTSGBHP",
                "created": 1719714569,
                "timestamp": 1719714569,
                "name": "instant matched bet issue.txt",
                "title": "instant matched bet issue.txt",
                "mimetype": "text\/plain",
                "filetype": "text",
                "pretty_type": "Plain Text",
                "user": "U053KV09FKP",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 10893,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F07ARTSGBHP\/instant_matched_bet_issue.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F07ARTSGBHP\/download\/instant_matched_bet_issue.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/U053KV09FKP\/F07ARTSGBHP\/instant_matched_bet_issue.txt",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F07ARTSGBHP-7e9b951789",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/U053KV09FKP\/F07ARTSGBHP\/instant_matched_bet_issue.txt\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "U053KV09FKP",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Frj4D",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UUCD6P13J"
                            },
                            {
                                "type": "text",
                                "text": " this is the life cycle of a single bet. I'm not an expert at reading logs, but to me it looks like it's getting EXECUTION_COMPLETE straight away cause it's fully matched straight away. Then proceeds to treat it as pending, and my cancel logic "
                            },
                            {
                                "type": "text",
                                "text": "order.status == OrderStatus.EXECUTABLE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is getting triggered 8 minutes later, which fails because it's already matched. However my logging control shows this order as 8 minutes elapsed executable."
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1719714597.884569",
        "edited": {
            "user": "U053KV09FKP",
            "ts": "1719715205.000000"
        },
        "client_msg_id": "7504afd1-2557-4acc-90d5-aba2136359e8",
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP"
    },
    {
        "text": "output from the logging control for this order:",
        "files": [
            {
                "id": "F07A6KEGKEJ",
                "created": 1719715457,
                "timestamp": 1719715457,
                "name": "logging_control-orders.txt",
                "title": "logging_control-orders.txt",
                "mimetype": "text\/plain",
                "filetype": "text",
                "pretty_type": "Plain Text",
                "user": "U053KV09FKP",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 406,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F07A6KEGKEJ\/logging_control-orders.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F07A6KEGKEJ\/download\/logging_control-orders.txt?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/U053KV09FKP\/F07A6KEGKEJ\/logging_control-orders.txt",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F07A6KEGKEJ-3fb92288e6",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/U053KV09FKP\/F07A6KEGKEJ\/logging_control-orders.txt\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "U053KV09FKP",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "BQS+M",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "output from the logging control for this order:"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1719715468.710139",
        "client_msg_id": "9ce7563b-c0c8-4be6-b8bf-9b1873a01cdb",
        "thread_ts": "1719622248.663829",
        "parent_user_id": "U053KV09FKP"
    }
]