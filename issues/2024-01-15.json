[
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1705308052.479009",
        "client_msg_id": "2e5b8bc6-5ac0-4cbf-b0d5-70b1698a3fa1",
        "text": "What is a `BetfairOrder` \/ you should be using `trade.create_order(..)` as per examples\/docs as it is likely the cause of this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705177089.648299",
        "parent_user_id": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Jod87",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What is a "
                            },
                            {
                                "type": "text",
                                "text": "BetfairOrder",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " \/ you should be using "
                            },
                            {
                                "type": "text",
                                "text": "trade.create_order(..)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as per examples\/docs as it is likely the cause of this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1705308329.703439",
        "client_msg_id": "e6c002d7-c398-49c9-aebe-5e596c56b4e4",
        "text": "Fixed in 2.5.7",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705244465.715439",
        "parent_user_id": "U04NWADNCFR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xrBFV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Fixed in 2.5.7"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "pray",
                "users": [
                    "U04NWADNCFR",
                    "U80AMMRKP"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1705309971.772429",
        "client_msg_id": "ad19d045-7aa2-47ca-97b1-8d221de98b78",
        "text": "Thanks for the quick turnaround!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705244465.715439",
        "parent_user_id": "U04NWADNCFR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "YclJW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks for the quick turnaround!"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1705313102.820829",
        "client_msg_id": "ce998473-ce0a-4432-82cd-0b84a2d6bffc",
        "text": "doh ! wood for trees - thank you. Think it is the issue since Trade will not have the order in it's list.\nAt least my normal stuff does it properly. I was trying to work out a way of placing multiple bets in a single call to BF - the API supports list of orders it seems but can't see a way of doing that in flumine since the Trade is tied to a single selection.\nArose trying to save processing time and get the bets back asap after strategy requirement seen.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705177089.648299",
        "parent_user_id": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NgN05",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "doh ! wood for trees - thank you. Think it is the issue since Trade will not have the order in it's list.\nAt least my normal stuff does it properly. I was trying to work out a way of placing multiple bets in a single call to BF - the API supports list of orders it seems but can't see a way of doing that in flumine since the Trade is tied to a single selection.\nArose trying to save processing time and get the bets back asap after strategy requirement seen."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1705313177.937139",
        "client_msg_id": "19d0c368-65a8-4190-8ba3-48be118a9b6b",
        "text": "When it comes to placing orders, flumine is smart, it uses the transaction class, see the <https:\/\/betcode-org.github.io\/flumine\/markets\/#transaction|docs> on how you can send all orders at once",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705177089.648299",
        "parent_user_id": "U02RN7YDRQ9",
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.github.io\/flumine\/markets\/#transaction",
                "service_icon": "https:\/\/betcode-org.github.io\/flumine\/images\/logo.png",
                "id": 1,
                "original_url": "https:\/\/betcode-org.github.io\/flumine\/markets\/#transaction",
                "fallback": "Markets - flumine",
                "text": "Betting trading framework",
                "title": "Markets - flumine",
                "title_link": "https:\/\/betcode-org.github.io\/flumine\/markets\/#transaction",
                "service_name": "betcode-org.github.io"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "APeYN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "When it comes to placing orders, flumine is smart, it uses the transaction class, see the "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.github.io\/flumine\/markets\/#transaction",
                                "text": "docs"
                            },
                            {
                                "type": "text",
                                "text": " on how you can send all orders at once"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1705314701.267609",
        "client_msg_id": "7183896c-a45e-4b94-8a2b-dca834efc463",
        "text": "Did try that and for some reason thought had to create `BetfairOrder's` and dug my hole ! So ... would this be the correct way for multi transaction which keeps the Trade\/order relationship\n```with market.transaction() as t:\n    for r in range(len(market_book.runners)) :\n        if market_book.runners[r].status != \"ACTIVE\": continue\n        trade = Trade(market.market_book.market_id, market_book.runners[r].selection_id, 0, self, )\n        o = trade.create_order(side=\"LAY\",\n                            order_type=LimitOrder(price=1.10, size=1.00),\n                            notes=OrderedDict(\n                                required_size=0.10,\n                                required_price=market_book.runners[r].ex.available_to_lay[0][\"price\"],\n                            ),\n                        )\n        t.place_order(o)```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705177089.648299",
        "parent_user_id": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hWT48",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Did try that and for some reason thought had to create "
                            },
                            {
                                "type": "text",
                                "text": "BetfairOrder's",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and dug my hole ! So ... would this be the correct way for multi transaction which keeps the Trade\/order relationship\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "with market.transaction() as t:\n    for r in range(len(market_book.runners)) :\n        if market_book.runners[r].status != \"ACTIVE\": continue\n        trade = Trade(market.market_book.market_id, market_book.runners[r].selection_id, 0, self, )\n        o = trade.create_order(side=\"LAY\",\n                            order_type=LimitOrder(price=1.10, size=1.00),\n                            notes=OrderedDict(\n                                required_size=0.10,\n                                required_price=market_book.runners[r].ex.available_to_lay[0][\"price\"],\n                            ),\n                        )\n        t.place_order(o)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1705314960.308369",
        "client_msg_id": "68655ae7-5285-4fac-a9b5-0a3e10965fbc",
        "text": "Yes but do it like this, use `get_price` as it might be None\/empty list and your code will error and you can loop `runners` which makes things 10x easier to read\n\n```        with market.transaction() as t:\n            for runner in market_book.runners:\n                if runner.status != \"ACTIVE\":\n                    continue\n                lay_price = get_price(runner.ex.available_to_lay, 0)\n                trade = Trade(\n                    market_book.market_id, \n                    runner.selection_id, \n                    0, \n                    self\n                )\n                order = trade.create_order(\n                    side=\"LAY\",\n                    order_type=LimitOrder(price=1.10, size=1.00),\n                    notes=OrderedDict(\n                        required_size=0.10,\n                        required_price=lay_price,\n                    ),\n                )\n                t.place_order(order)```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705177089.648299",
        "parent_user_id": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8QqSB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes but do it like this, use "
                            },
                            {
                                "type": "text",
                                "text": "get_price",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as it might be None\/empty list and your code will error and you can loop "
                            },
                            {
                                "type": "text",
                                "text": "runners",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " which makes things 10x easier to read\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "        with market.transaction() as t:\n            for runner in market_book.runners:\n                if runner.status != \"ACTIVE\":\n                    continue\n                lay_price = get_price(runner.ex.available_to_lay, 0)\n                trade = Trade(\n                    market_book.market_id, \n                    runner.selection_id, \n                    0, \n                    self\n                )\n                order = trade.create_order(\n                    side=\"LAY\",\n                    order_type=LimitOrder(price=1.10, size=1.00),\n                    notes=OrderedDict(\n                        required_size=0.10,\n                        required_price=lay_price,\n                    ),\n                )\n                t.place_order(order)"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1705315862.560889",
        "client_msg_id": "274f228d-891b-4357-a8de-e7455822b5ff",
        "text": "Thanks - run live test successfully based on that and log clean :slightly_smiling_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705177089.648299",
        "parent_user_id": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "sovlu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks - run live test successfully based on that and log clean "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "rocket",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U80AMMRKP",
        "type": "message",
        "ts": "1705337780.785349",
        "client_msg_id": "875e03d4-f8e9-42c2-b5e2-4b50aa301a1c",
        "text": "Trying to get Flumine to handle\/see orders on the stream not placed by it and with no customerStrategyRefs on those bets. If I subscribe to the orderstream without a ref then add the bets to blotter like the middlewear example will anything catch on fire?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g09081be09e4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/709081be09e4187898ec0e3540c4bb49.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "J",
            "real_name": "J",
            "display_name": "Gooat",
            "team": "T4G9NBD2M",
            "name": "maunders.abie",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705337780.785349",
        "reply_count": 3,
        "reply_users_count": 3,
        "latest_reply": "1705348103.224689",
        "reply_users": [
            "U02RN7YDRQ9",
            "U4H19D1D2",
            "U80AMMRKP"
        ],
        "replies": [
            {
                "user": "U02RN7YDRQ9",
                "ts": "1705342304.895039"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1705347300.578839"
            },
            {
                "user": "U80AMMRKP",
                "ts": "1705348103.224689"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1705348103.224689",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3zG6T",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Trying to get Flumine to handle\/see orders on the stream not placed by it and with no customerStrategyRefs on those bets. If I subscribe to the orderstream without a ref then add the bets to blotter like the middlewear example will anything catch on fire?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1705342304.895039",
        "client_msg_id": "42c795fe-3f06-4f46-bd0d-1d1db35fd8d3",
        "text": "Funnily enough just noticed that today - bets placed from another system show up in the log as not being in the blotter. Looking at the code I think flumine then tries to recreate the order and finally gives up when it can't find the strategy. So, if you know what the alien bets are you should be able to plug in and add them to your strategy as if you made them ? Top level function `create_order_from_current()` in flumine.order.py  tries to recreate - that's as far as I got - may help,",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705337780.785349",
        "parent_user_id": "U80AMMRKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3qL\/l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Funnily enough just noticed that today - bets placed from another system show up in the log as not being in the blotter. Looking at the code I think flumine then tries to recreate the order and finally gives up when it can't find the strategy. So, if you know what the alien bets are you should be able to plug in and add them to your strategy as if you made them ? Top level function "
                            },
                            {
                                "type": "text",
                                "text": "create_order_from_current()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in flumine.order.py  tries to recreate - that's as far as I got - may help,"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1705347300.578839",
        "client_msg_id": "B33B7ABE-FD01-4BA3-AA98-54B013A3EA9A",
        "text": "Not recommended but it should be workable ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705337780.785349",
        "parent_user_id": "U80AMMRKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NLNDX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not recommended but it should be workable "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U80AMMRKP",
        "type": "message",
        "ts": "1705348103.224689",
        "client_msg_id": "ccc26144-c1f6-44e5-a32a-f2cf21240949",
        "text": "Sweet. I need to learn how to monkey patch now. (orderstream, customer_strategy_refs=[] and current_order.customer_order_ref = blah if \"\")",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g09081be09e4",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/709081be09e4187898ec0e3540c4bb49.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "J",
            "real_name": "J",
            "display_name": "Gooat",
            "team": "T4G9NBD2M",
            "name": "maunders.abie",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1705337780.785349",
        "parent_user_id": "U80AMMRKP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xh16S",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Sweet. I need to learn how to monkey patch now. (orderstream, customer_strategy_refs=[] and current_order.customer_order_ref = blah if \"\")"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]