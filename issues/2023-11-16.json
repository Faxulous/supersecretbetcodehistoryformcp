[
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1700156757.225609",
        "client_msg_id": "60569af0-fa8c-409e-844f-b575d6cf5202",
        "text": "Hi <@U4H19D1D2> what does this mean in real terms please?\n```{\"asctime\": \"2023-11-16 11:55:48,259\", \"levelname\": \"WARNING\", \"message\": \"High latency between current time and OrderPackage creation time, it is likely that the thread pool is currently exhausted\", \"trading_function\": \"cancel\", \"session\": \"&lt;requests.sessions.Session object at 0xffff62401130&gt;\", \"latency\": 0.29, \"order_package\": {\"id\": \"14c7f3f3-8477-11ee-98e5-77b81b73792a\", \"client\": \"&lt;flumine.clients.betfairclient.BetfairClient object at 0xffffb03a1ac0&gt;\", \"market_id\": \"1.221270586\", \"orders\": [\"139194285340131329\"], \"order_count\": 1, \"package_type\": \"Cancel\", \"customer_strategy_ref\": \"aaaa\", \"bet_delay\": 0, \"market_version\": null, \"retry\": true, \"retry_count\": 0, \"async\": false}, \"thread_pool\": {\"num_threads\": 18, \"work_queue_size\": 0}}```\nfollowed by lots of these later on:\n```{\"asctime\": \"2023-11-16 13:28:46,316\", \"levelname\": \"WARNING\", \"message\": \"High latency between current time and MarketBook publish time\", \"market_id\": \"1.221270587\", \"latency\": 68.93769669532776, \"pt\": \"2023-11-16T13:27:37.379000\"}```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "reply_count": 12,
        "reply_users_count": 2,
        "latest_reply": "1700250503.683649",
        "reply_users": [
            "U4H19D1D2",
            "U01PJ5YMFBJ"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1700156984.881939"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1700157031.064549"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1700157081.043169"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1700168116.435319"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1700169015.711319"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1700171714.204879"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1700202312.091639"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1700248979.169979"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1700249316.920169"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1700249351.794849"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1700249474.648409"
            },
            {
                "user": "U01PJ5YMFBJ",
                "ts": "1700250503.683649"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1700250503.683649",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zrn1c",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " what does this mean in real terms please?\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{\"asctime\": \"2023-11-16 11:55:48,259\", \"levelname\": \"WARNING\", \"message\": \"High latency between current time and OrderPackage creation time, it is likely that the thread pool is currently exhausted\", \"trading_function\": \"cancel\", \"session\": \"<requests.sessions.Session object at 0xffff62401130>\", \"latency\": 0.29, \"order_package\": {\"id\": \"14c7f3f3-8477-11ee-98e5-77b81b73792a\", \"client\": \"<flumine.clients.betfairclient.BetfairClient object at 0xffffb03a1ac0>\", \"market_id\": \"1.221270586\", \"orders\": [\"139194285340131329\"], \"order_count\": 1, \"package_type\": \"Cancel\", \"customer_strategy_ref\": \"aaaa\", \"bet_delay\": 0, \"market_version\": null, \"retry\": true, \"retry_count\": 0, \"async\": false}, \"thread_pool\": {\"num_threads\": 18, \"work_queue_size\": 0}}"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "followed by lots of these later on:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{\"asctime\": \"2023-11-16 13:28:46,316\", \"levelname\": \"WARNING\", \"message\": \"High latency between current time and MarketBook publish time\", \"market_id\": \"1.221270587\", \"latency\": 68.93769669532776, \"pt\": \"2023-11-16T13:27:37.379000\"}"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1700156911.724969",
        "client_msg_id": "739eed38-0342-409e-9bc6-0200d6a9a892",
        "text": "followed eventually by Flumine instance being OOM killed !!:\n```[571936.357166] oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=\/,mems_allowed=0,global_oom,task_memcg=\/user.slice\/user-1000.slice\/session-72.scope,task=python3,pid=18874,uid=1000\n[571936.357231] Out of memory: Killed process 18874 (python3) total-vm:2811936kB, anon-rss:1657564kB, file-rss:0kB, shmem-rss:0kB, UID:1000 pgtables:3488kB oom_score_adj:0\n[571937.565101] loop6: detected capacity change from 0 to 8```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "I+6yB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "followed eventually by Flumine instance being OOM killed !!:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[571936.357166] oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=\/,mems_allowed=0,global_oom,task_memcg=\/user.slice\/user-1000.slice\/session-72.scope,task=python3,pid=18874,uid=1000\n[571936.357231] Out of memory: Killed process 18874 (python3) total-vm:2811936kB, anon-rss:1657564kB, file-rss:0kB, shmem-rss:0kB, UID:1000 pgtables:3488kB oom_score_adj:0\n[571937.565101] loop6: detected capacity change from 0 to 8"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1700156984.881939",
        "client_msg_id": "C89BF70F-902F-469C-A897-1C61E819AD20",
        "text": "Memory leak ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "parent_user_id": "U01PJ5YMFBJ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "anUi4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Memory leak "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1700157031.064549",
        "client_msg_id": "fc3950ca-05ab-4da2-ab61-58e0e56839b2",
        "text": "Hmm yeah, ok thanks, i'll do some debug",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "parent_user_id": "U01PJ5YMFBJ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "e8J4f",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hmm yeah, ok thanks, i'll do some debug"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1700157081.043169",
        "client_msg_id": "69ca9586-ac79-42fa-b291-5c4069b154a5",
        "text": "seems to only happen live, Simulation is fine",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "parent_user_id": "U01PJ5YMFBJ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "aBL4G",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "seems to only happen live, Simulation is fine"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1700168116.435319",
        "client_msg_id": "D51DE10E-2710-4538-A2BF-81FE7996FE51",
        "text": "Run it with cprofilev and it should reveal itself ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "parent_user_id": "U01PJ5YMFBJ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "sh0TU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Run it with cprofilev and it should reveal itself "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1700169015.711319",
        "client_msg_id": "b5eed962-c797-4259-ad14-92a6e82890c1",
        "text": "thanks <@U4H19D1D2> not used cprofilev, i'll take a look at that\ni've been profiling a live run using tracemalloc, and it's showing some order referenced objects remaining even after the market is closed. in particular the order.notes object...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "parent_user_id": "U01PJ5YMFBJ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zkDhj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thanks "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " not used cprofilev, i'll take a look at that\ni've been profiling a live run using tracemalloc, and it's showing some order referenced objects remaining even after the market is closed. in particular the order.notes object..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01PJ5YMFBJ",
        "type": "message",
        "ts": "1700171714.204879",
        "client_msg_id": "cbd91a11-5974-4ed8-b33f-fa963198fbf6",
        "text": "<@U4H19D1D2> When does the \"market\" object get Freed\/destroyed? as for example if I am stuffing loads into a market.context[\"abc\"] ... and the market object is not freed up until....?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g819c7f591cc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/819c7f591cc888486f19b3f2f49f2011.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "AndyL",
            "real_name": "AndyL",
            "display_name": "AndyL",
            "team": "T4G9NBD2M",
            "name": "andrew_m_leonard",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "parent_user_id": "U01PJ5YMFBJ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "RM86a",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " When does the \"market\" object get Freed\/destroyed? as for example if I am stuffing loads into a market.context[\"abc\"] ... and the market object is not freed up until....?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1700202312.091639",
        "client_msg_id": "DDCE6DFB-7C85-4AF2-AFFA-D1C36C88DE36",
        "text": "This won’t be the problem, you have something bad happening in your code, profile it ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1700156757.225609",
        "parent_user_id": "U01PJ5YMFBJ",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "f0ae1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This "
                            },
                            {
                                "type": "text",
                                "text": "won’t"
                            },
                            {
                                "type": "text",
                                "text": " be the problem, you have something bad happening in your code, profile it "
                            }
                        ]
                    }
                ]
            }
        ]
    }
]