[
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582629721.026000",
        "client_msg_id": "6438c8bf-372c-4001-8e35-d5b61e6af83a",
        "text": "So how do people run and manage streams - in particular shut them down gracefully?  Some sort of poison pill?  Do you run them in regular python scripts, or something else?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XlUw",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So how do people run and manage streams - in particular shut them down gracefully?  Some sort of poison pill?  Do you run them in regular python scripts, or something else?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582629877.027900",
        "client_msg_id": "76AC92CA-75E3-461E-B781-A929F28233E1",
        "text": "Why shut them down?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rd1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Why shut them down?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582630026.030800",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1582631067.000000"
        },
        "client_msg_id": "4A3DBE2C-67A4-4201-96D5-A26BF18C773D",
        "text": "If they reside inside some overall trading application then they can just persist for as long as the application. If they’re run as individual components then they can run forever",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mhfYW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If they reside inside some overall trading application then they can just persist for as long as the application. If they’re run as individual components then they can run forever"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582631232.032400",
        "client_msg_id": "823a338e-ac65-4f4c-8325-8e7b039701c7",
        "text": "And when I shut down the 'trading application'? Feel there's something I'm not getting here!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DcY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "And when I shut down the 'trading application'? Feel there's something I'm not getting here!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1582631269.032700",
        "client_msg_id": "28026e29-9638-4f8d-a211-61ce0b7f822e",
        "text": "If the application is not running then neither is the stream",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "S3\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If the application is not running then neither is the stream"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582631468.034900",
        "client_msg_id": "9294aea4-0ea5-4c25-8280-badb977e0d28",
        "text": "OK, so the OS clears it up eg I don't need to worry I will still have a connection to betfair I need to manage in some way?  Thanks for your patience I haven't used things like this before.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "cWXa8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "OK, so the OS clears it up eg I don't need to worry I will still have a connection to betfair I need to manage in some way?  Thanks for your patience I haven't used things like this before."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9CP5N36K",
        "type": "message",
        "ts": "1582631999.036000",
        "client_msg_id": "24ec70b1-0ff1-46da-8c4c-5017e54e4e1a",
        "text": "On Linux at least, when a process is killed it's open files get closed, which will include the socket that's used to connect to Betfair.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gcece5c423ab",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/056389f13cd1994ac61ad8d38479823a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-72.png",
            "first_name": "",
            "real_name": "Hugo Young",
            "display_name": "hugo",
            "team": "T4G9NBD2M",
            "name": "hyoung",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "h+uSC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "On Linux at least, when a process is killed it's open files get closed, which will include the socket that's used to connect to Betfair."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582632231.036700",
        "client_msg_id": "1b8ba481-5ae8-418b-9668-a6f78e21d4f7",
        "text": "ok thanks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1jj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ok thanks"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1582632721.037300",
        "client_msg_id": "792F0E9F-10A0-48C2-BBB7-53DB3652A82F",
        "text": "Have you seen this? You can just call stop on program exit <https:\/\/github.com\/liampauling\/betfair\/blob\/master\/examples\/examplestreamingerrhandling.py|https:\/\/github.com\/liampauling\/betfair\/blob\/master\/examples\/examplestreamingerrhandling.py>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "liampauling\/betfair",
                "title_link": "https:\/\/github.com\/liampauling\/betfair\/blob\/master\/examples\/examplestreamingerrhandling.py",
                "text": "Lightweight python wrapper for Betfair API-NG (with streaming) - liampauling\/betfair",
                "fallback": "GitHub: liampauling\/betfair",
                "thumb_url": "https:\/\/avatars2.githubusercontent.com\/u\/12016537?s=400&v=4",
                "from_url": "https:\/\/github.com\/liampauling\/betfair\/blob\/master\/examples\/examplestreamingerrhandling.py",
                "thumb_width": 392,
                "thumb_height": 392,
                "service_icon": "https:\/\/a.slack-edge.com\/80588\/img\/unfurl_icons\/github.png",
                "id": 1,
                "original_url": "https:\/\/github.com\/liampauling\/betfair\/blob\/master\/examples\/examplestreamingerrhandling.py"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bT7l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Have you seen this? You can just call stop on program exit "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/betfair\/blob\/master\/examples\/examplestreamingerrhandling.py",
                                "text": "https:\/\/github.com\/liampauling\/betfair\/blob\/master\/examples\/examplestreamingerrhandling.py"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582633320.041700",
        "client_msg_id": "1532fb57-6ec4-4695-9bec-4cac0a111d2a",
        "text": "Yes I'm using that - and can call `stream.stop()` etc as long as my app is running.  But I don't understand how to deal with it if the app crashes.  Or if I want to stop the app with `ctrl-c` then `stream.stop()` won't get called.  (Though the above convo seems to say it's ok as the OS cleans everything up ).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "USDsD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes I'm using that - and can call "
                            },
                            {
                                "type": "text",
                                "text": "stream.stop()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " etc as long as my app is running.  But I don't understand how to deal with it if the app crashes.  Or if I want to stop the app with "
                            },
                            {
                                "type": "text",
                                "text": "ctrl-c",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " then "
                            },
                            {
                                "type": "text",
                                "text": "stream.stop()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " won't get called.  (Though the above convo seems to say it's ok as the OS cleans everything up )."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "USWDY5P7G",
        "type": "message",
        "ts": "1582634285.042800",
        "client_msg_id": "bb2c9e6d-7040-400a-bdb6-b97e8a1d1466",
        "text": "I’m still a Python beginner so don’t guarantee that the following works, but there seems to be a way of catching when your app is exiting or gets killed",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "693b14d0cc42",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-08-29\/2425858826214_693b14d0cc42bdbfb86a_72.jpg",
            "first_name": "Fab",
            "real_name": "Fab",
            "display_name": "Fab",
            "team": "T4G9NBD2M",
            "name": "me1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fuy5l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I’m still a Python beginner so don’t guarantee that the following works, but there seems to be a way of catching when your app is exiting or gets killed"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "USWDY5P7G",
        "type": "message",
        "ts": "1582634286.043000",
        "client_msg_id": "2ac880a7-2eb4-434a-91f2-3a3f49ea101b",
        "text": "<https:\/\/stackoverflow.com\/questions\/40866576\/run-atexit-when-python-process-is-killed>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "693b14d0cc42",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-08-29\/2425858826214_693b14d0cc42bdbfb86a_72.jpg",
            "first_name": "Fab",
            "real_name": "Fab",
            "display_name": "Fab",
            "team": "T4G9NBD2M",
            "name": "me1",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "service_name": "Stack Overflow",
                "title": "Run atexit() when python process is killed",
                "title_link": "https:\/\/stackoverflow.com\/questions\/40866576\/run-atexit-when-python-process-is-killed",
                "text": "I have a python process which runs in background, and I would like it to generate some output only when the script is terminated. def handle_exit(): print('\\nAll files saved in ' + directory) ...",
                "fallback": "Stack Overflow: Run atexit() when python process is killed",
                "thumb_url": "https:\/\/cdn.sstatic.net\/Sites\/stackoverflow\/img\/apple-touch-icon@2.png?v=73d79a89bded",
                "from_url": "https:\/\/stackoverflow.com\/questions\/40866576\/run-atexit-when-python-process-is-killed",
                "thumb_width": 316,
                "thumb_height": 316,
                "service_icon": "https:\/\/cdn.sstatic.net\/Sites\/stackoverflow\/img\/apple-touch-icon.png?v=c78bd457575a",
                "id": 1,
                "original_url": "https:\/\/stackoverflow.com\/questions\/40866576\/run-atexit-when-python-process-is-killed"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "yjfu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/stackoverflow.com\/questions\/40866576\/run-atexit-when-python-process-is-killed"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1582634502.045000",
        "client_msg_id": "FC86C669-9448-483D-9718-7F1018C738DF",
        "text": "Assuming you started a new thread then it will get killed when the __main__ process gets killed as they share ram \/ run in the same process. Most issues seem to occur when you run streaming in juypter or similar ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Cnn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Assuming you started a new thread then it will get killed when the _"
                            },
                            {
                                "type": "text",
                                "text": "main",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "_ process gets killed as they share ram \/ run in the same process. Most issues seem to occur when you run streaming in juypter or similar "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582634681.045200",
        "client_msg_id": "92d7f47d-d9bd-4d52-a4e5-e8082a71d0fc",
        "text": "ok thanks liam makes sense",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gVa2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ok thanks liam makes sense"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582634823.045900",
        "client_msg_id": "d1ed996d-dd81-4908-804d-16ef9cf546a5",
        "text": "thanks <@USWDY5P7G> that looks useful also for some other things I'm doing",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PJF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thanks "
                            },
                            {
                                "type": "user",
                                "user_id": "USWDY5P7G"
                            },
                            {
                                "type": "text",
                                "text": " that looks useful also for some other things I'm doing"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9CP5N36K",
        "type": "message",
        "ts": "1582634984.046300",
        "client_msg_id": "b13fdf1b-fab4-4e4e-a6e0-e12b4be8397d",
        "text": "note that the thread wont be stopped if all that happens on the main thread is an exception is thrown",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gcece5c423ab",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/056389f13cd1994ac61ad8d38479823a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-72.png",
            "first_name": "",
            "real_name": "Hugo Young",
            "display_name": "hugo",
            "team": "T4G9NBD2M",
            "name": "hyoung",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WbP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "note that the thread wont be stopped if all that happens on the main thread is an exception is thrown"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582635116.047200",
        "client_msg_id": "a66bfc82-1487-4c41-8dac-17874ecec9f2",
        "text": "thanks, noted",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Z7l6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thanks, noted"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582635393.050700",
        "client_msg_id": "d3997cd9-9d0c-408b-9bfc-9d21c7d93157",
        "text": "In case anyone else following this is using streaming with ipython or similar, and at my level of unsophistication, my current solution is to have the script check if a file named `STOP.sig` exists in a certain location and then stop cleanly.  So I can `touch STOP.sig` to stop the stream.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "sGJW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "In case anyone else following this is using streaming with ipython or similar, and at my level of unsophistication, my current solution is to have the script check if a file named "
                            },
                            {
                                "type": "text",
                                "text": "STOP.sig",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " exists in a certain location and then stop cleanly.  So I can "
                            },
                            {
                                "type": "text",
                                "text": "touch STOP.sig",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to stop the stream."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U919M37DL",
        "type": "message",
        "ts": "1582636782.052400",
        "client_msg_id": "1eea5ab4-c27b-4603-91b9-d4e8a464bce3",
        "text": "<@UPEFBEEL8> that's work for sure, although dealing with files can be sometimes tricky. If you're on Linux, you can always send a signal to your Python process and catch it... I think there's functionality for dealing with signals in Python stdlib, and you can send the signal via pkill\/kill command",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "1879a7e748ff",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-05-05\/1102646833461_1879a7e748ffd58a149f_72.jpg",
            "first_name": "Karlo",
            "real_name": "Karlo L.",
            "display_name": "klozovin",
            "team": "T4G9NBD2M",
            "name": "karl",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7KVZi",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UPEFBEEL8"
                            },
                            {
                                "type": "text",
                                "text": " that's work for sure, although dealing with files can be sometimes tricky. If you're on Linux, you can always send a signal to your Python process and catch it... I think there's functionality for dealing with signals in Python stdlib, and you can send the signal via pkill\/kill command"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U919M37DL",
        "type": "message",
        "ts": "1582636804.052700",
        "client_msg_id": "c29cb8f9-b842-4db9-84ff-5919e72704c3",
        "text": "but, it could be more trouble than it's worth to implement...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "1879a7e748ff",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-05-05\/1102646833461_1879a7e748ffd58a149f_72.jpg",
            "first_name": "Karlo",
            "real_name": "Karlo L.",
            "display_name": "klozovin",
            "team": "T4G9NBD2M",
            "name": "karl",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "L6nux",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "but, it could be more trouble than it's worth to implement..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582637154.053300",
        "client_msg_id": "a3a684e8-87a7-4400-b973-d63a043447b8",
        "text": "you mean this?  <https:\/\/docs.python.org\/3\/library\/signal.html>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "d3Ce",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "you mean this?  "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/docs.python.org\/3\/library\/signal.html"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U919M37DL",
        "type": "message",
        "ts": "1582637295.054400",
        "client_msg_id": "70dd4dc8-c63a-4171-9886-b9ca70f8591d",
        "text": "yup! signals are somewhat open ended, you can use them for whatever ... for example stop signal you can disconnect from Betfair",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "1879a7e748ff",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-05-05\/1102646833461_1879a7e748ffd58a149f_72.jpg",
            "first_name": "Karlo",
            "real_name": "Karlo L.",
            "display_name": "klozovin",
            "team": "T4G9NBD2M",
            "name": "karl",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "owGF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yup! signals are somewhat open ended, you can use them for whatever ... for example stop signal you can disconnect from Betfair"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U919M37DL",
        "type": "message",
        "ts": "1582637351.055600",
        "client_msg_id": "60075b3e-3f47-4400-aeec-5f0ec062c635",
        "text": "there USR1 and USR2, for example you can use them for signaling restart, or whatever... I don't tend to leave them in finished product (whatever that means), but while I'm just starting out it's a quick and dirty solution that works",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "1879a7e748ff",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-05-05\/1102646833461_1879a7e748ffd58a149f_72.jpg",
            "first_name": "Karlo",
            "real_name": "Karlo L.",
            "display_name": "klozovin",
            "team": "T4G9NBD2M",
            "name": "karl",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "x0W\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "there USR1 and USR2, for example you can use them for signaling restart, or whatever... I don't tend to leave them in finished product (whatever that means), but while I'm just starting out it's a quick and dirty solution that works"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U919M37DL",
        "type": "message",
        "ts": "1582637391.056200",
        "client_msg_id": "ba1960aa-a182-4d0c-961d-722ec8cc81f3",
        "text": "one neat feature, if you have many instances of your program, you can easily send them all the same signal, etc, etc...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "1879a7e748ff",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-05-05\/1102646833461_1879a7e748ffd58a149f_72.jpg",
            "first_name": "Karlo",
            "real_name": "Karlo L.",
            "display_name": "klozovin",
            "team": "T4G9NBD2M",
            "name": "karl",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ILsYn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "one neat feature, if you have many instances of your program, you can easily send them all the same signal, etc, etc..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U919M37DL",
        "type": "message",
        "ts": "1582637408.056600",
        "client_msg_id": "b21a382a-e0c0-439b-b558-1deadaefb2fd",
        "text": "it's a neat trick to have in your toolbag :wink:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "1879a7e748ff",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-05-05\/1102646833461_1879a7e748ffd58a149f_72.jpg",
            "first_name": "Karlo",
            "real_name": "Karlo L.",
            "display_name": "klozovin",
            "team": "T4G9NBD2M",
            "name": "karl",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rQfot",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "it's a neat trick to have in your toolbag "
                            },
                            {
                                "type": "emoji",
                                "name": "wink",
                                "unicode": "1f609"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582637530.057200",
        "client_msg_id": "c5176ba8-ce61-4261-87a7-0f13fb758469",
        "text": "yes that's cool thanks man",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hVnu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yes that's cool thanks man"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1582648255.062500",
        "client_msg_id": "fbb654a3-256d-4711-800e-2284e25f9fc7",
        "text": "<@UPEFBEEL8> In case this helps, I develop in Jupyter notebooks before refactoring into python scripts for deployment. This is the skeleton structure that I use:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "N4k",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UPEFBEEL8"
                            },
                            {
                                "type": "text",
                                "text": " In case this helps, I develop in Jupyter notebooks before refactoring into python scripts for deployment. This is the skeleton structure that I use:"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1582648270.062800",
        "client_msg_id": "feac37d6-78ac-4b5d-b3dd-b5584b577002",
        "text": "```markets = [&lt;list of market IDs]\n\n# set up market stream params then ...\nmarket_stream.start()\n\n# set up order stream params then ...\norder_stream.start()\n\nwhile len(markets) &gt; 0:\n\n    try:\n        market_books = market_stream.output_queue.get()\n        \n        for market_book in market_books:\n            if market_book.market_definition.status == \"CLOSED\":\n                markets.remove(market_book.market_id)\n                break\n\n        #\n        # do market and order stuff here\n        #\n\n    except KeyboardInterrupt:\n        break\n\nmarket_stream.stop()\norder_stream.stop()```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "oBO",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "markets = [<list of market IDs]\n\n# set up market stream params then ...\nmarket_stream.start()\n\n# set up order stream params then ...\norder_stream.start()\n\nwhile len(markets) > 0:\n\n    try:\n        market_books = market_stream.output_queue.get()\n        \n        for market_book in market_books:\n            if market_book.market_definition.status == \"CLOSED\":\n                markets.remove(market_book.market_id)\n                break\n\n        #\n        # do market and order stuff here\n        #\n\n    except KeyboardInterrupt:\n        break\n\nmarket_stream.stop()\norder_stream.stop()"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "UBS7QANF3"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1582648353.063800",
        "edited": {
            "user": "U9JHLMZB4",
            "ts": "1582648513.000000"
        },
        "client_msg_id": "c20e186a-8233-4856-9658-af1b014e9030",
        "text": "This enables the streams to be closed, either because all the underlying markets have closed, or because I have to stop the loop manually, or 'cos I just messed up and it crashed (almost forgot that possibility).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "uEfK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This enables the streams to be closed, either because all the underlying markets have closed, or because I have to stop the loop manually, or 'cos I just messed up and it crashed (almost forgot that possibility)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1582649195.066200",
        "client_msg_id": "f9b9024b-37c4-4dfe-802a-e2e41e367f88",
        "text": "Also, I find the following handy, inside that loop. when I'm processing the data into a pandas dataframe in order to display it updating in a cell in a real-time:\n```        display.display(your_dataframe)\n        display.clear_output(wait=True)```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XR\/8U",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Also, I find the following handy, inside that loop. when I'm processing the data into a pandas dataframe in order to display it updating in a cell in a real-time:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "        display.display(your_dataframe)\n        display.clear_output(wait=True)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPEFBEEL8",
        "type": "message",
        "ts": "1582657917.070200",
        "client_msg_id": "cfbd74dc-e275-44c2-a35d-9eae11d1d14c",
        "text": "Thanks <@USDCJS1CK>.  Didn't realise you could change the markets streamed on the fly.  And I don't seem to be able to do it.\nAre you literally changing the market_ids list you passed to the `streaming_market_filter`?\nI have tried that, and also changed the `streaming_market_filter` itself - but the original markets seem to be still streamed (even though the filter shows the new list of markets).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9a6d5b189c19",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-02-27\/960158885411_9a6d5b189c193e7b157a_72.png",
            "first_name": "",
            "real_name": "jb",
            "display_name": "jb",
            "team": "T4G9NBD2M",
            "name": "jb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fly",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks "
                            },
                            {
                                "type": "user",
                                "user_id": "USDCJS1CK"
                            },
                            {
                                "type": "text",
                                "text": ".  Didn't realise you could change the markets streamed on the fly.  And I don't seem to be able to do it.\nAre you literally changing the market_ids list you passed to the "
                            },
                            {
                                "type": "text",
                                "text": "streaming_market_filter",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "?\nI have tried that, and also changed the "
                            },
                            {
                                "type": "text",
                                "text": "streaming_market_filter",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " itself - but the original markets seem to be still streamed (even though the filter shows the new list of markets)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9CP5N36K",
        "type": "message",
        "ts": "1582658833.070600",
        "client_msg_id": "53d696cb-1f49-45ae-899b-956c8ff9795b",
        "text": "You can't change the market subscription after sending it",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gcece5c423ab",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/056389f13cd1994ac61ad8d38479823a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-72.png",
            "first_name": "",
            "real_name": "Hugo Young",
            "display_name": "hugo",
            "team": "T4G9NBD2M",
            "name": "hyoung",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iGj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You can't change the market subscription after sending it"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1582658866.071000",
        "client_msg_id": "6CF6A1C0-2175-4718-ABBA-ABA04D5A354F",
        "text": "And shouldn’t ever be in a position that you need to ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mT4v",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "And shouldn’t ever be in a position that you need to "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1582658871.071300",
        "client_msg_id": "ED390E4B-4348-471A-BD54-D371ED9ADBB8",
        "text": "Streaming is cheap ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "AU6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Streaming is cheap "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "channel_join",
        "user": "UUJNW57D5",
        "text": "<@UUJNW57D5> has joined the channel",
        "type": "message",
        "ts": "1582667171.071500"
    },
    {
        "subtype": "channel_join",
        "user": "UUGEVGUHJ",
        "text": "<@UUGEVGUHJ> has joined the channel",
        "type": "message",
        "ts": "1582668909.071700"
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1582701434.074900",
        "edited": {
            "user": "U9JHLMZB4",
            "ts": "1582701588.000000"
        },
        "client_msg_id": "8821e1ec-8bb5-4dbd-b1a9-0f7e13548a59",
        "text": "<@UPEFBEEL8> In that example I was initialising a local markets variable to track the IDs in the stream. I pass that list into the market filter and then remove them from the local variable as the stream shows that each is closed. When the list become empty, there's nothing left to stream so I exit the loop and close the stream.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "p93",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UPEFBEEL8"
                            },
                            {
                                "type": "text",
                                "text": " In that example I was initialising a local markets variable to track the IDs in the stream. I pass that list into the market filter and then remove them from the local variable as the stream shows that each is closed. When the list become empty, there's nothing left to stream so I exit the loop and close the stream."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1582701856.078000",
        "client_msg_id": "6d984837-92bd-48ed-ba8a-9fb4613c5205",
        "text": "But that's just one way to filter that works for my race-based approach. You could use a filter based on, say, market types and countries, and no explicit market IDs, and I believe that Betfair will both give you all markets that match your filter and add in new ones as they become available. That's not how I roll, but I believe that there are others in this channel who do prefer that approach.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lGo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "But that's just one way to filter that works for my race-based approach. You could use a filter based on, say, market types and countries, and no explicit market IDs, and I believe that Betfair will both give you all markets that match your filter and add in new ones as they become available. That's not how I roll, but I believe that there are others in this channel who do prefer that approach."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]