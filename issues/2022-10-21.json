[
    {
        "user": "U01697K27UY",
        "type": "message",
        "ts": "1666347460.586629",
        "edited": {
            "user": "U01697K27UY",
            "ts": "1666347579.000000"
        },
        "client_msg_id": "79a637b1-6782-4d04-8345-138786a4fc09",
        "text": "I am encountering an error every hour or so which I cant seem to repeat, stemming from a list_market_book request. The strategy runs every 2 minutes or so across ~100 markets. The traceback of the error appears to be timeout related but im not sure how to tackle whatever is causing it.\n\n`market_books = trading.betting.list_market_book(`\n  `File \"\/usr\/local\/lib\/python3.10\/site-packages\/betfairlightweight\/endpoints\/betting.py\", line 283, in list_market_book`\n    `(response, response_json, elapsed_time) = self.request(method, params, session)`\n  `File \"\/usr\/local\/lib\/python3.10\/site-packages\/betfairlightweight\/endpoints\/baseendpoint.py\", line 45, in request`\n    `raise APIError(None, method, params, e)`\n`betfairlightweight.exceptions.APIError: SportsAPING\/v1.0\/listMarketBook` \n`Params: {'marketIds': ['1.205155225'], 'priceProjection': {'priceData': ['EX_ALL_OFFERS'], 'exBestOffersOverrides': {}, 'virtualise': True, 'rolloverStakes': False}}` \n`Exception: HTTPSConnectionPool(host='<http:\/\/api.betfair.com|api.betfair.com>', port=443): Read timed out. (read timeout=3.05)`\n\n `SportsAPING\/v1.0\/listMarketBook` \n`Params: {'marketIds': ['1.205155225'], 'priceProjection': {'priceData': ['EX_ALL_OFFERS'], 'exBestOffersOverrides': {}, 'virtualise': True, 'rolloverStakes': False}}` \n`Exception: HTTPSConnectionPool(host='<http:\/\/api.betfair.com|api.betfair.com>', port=443): Read timed out. (read timeout=3.05)`\n\nOn follow up runs  on the same market 2 mins later the issue no longer occurs. Anyone familiar with this problem or have encountered it before and know how to addres it? Cheers",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3030500b138",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3030500b13896539426bd540fe2bdab7.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png",
            "first_name": "JW",
            "real_name": "JW",
            "display_name": "EJono",
            "team": "T4G9NBD2M",
            "name": "jonowads380",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1666347460.586629",
        "reply_count": 3,
        "reply_users_count": 2,
        "latest_reply": "1666348301.994629",
        "reply_users": [
            "U4H19D1D2",
            "U01697K27UY"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1666347554.819969"
            },
            {
                "user": "U01697K27UY",
                "ts": "1666347761.740129"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1666348301.994629"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1666348301.994629",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "60X5",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I am encountering an error every hour or so which I cant seem to repeat, stemming from a list_market_book request. The strategy runs every 2 minutes or so across ~100 markets. The traceback of the error appears to be timeout related but im not sure how to tackle whatever is causing it.\n\n"
                            },
                            {
                                "type": "text",
                                "text": "market_books = trading.betting.list_market_book(",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"\/usr\/local\/lib\/python3.10\/site-packages\/betfairlightweight\/endpoints\/betting.py\", line 283, in list_market_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    (response, response_json, elapsed_time) = self.request(method, params, session)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"\/usr\/local\/lib\/python3.10\/site-packages\/betfairlightweight\/endpoints\/baseendpoint.py\", line 45, in request",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    raise APIError(None, method, params, e)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "betfairlightweight.exceptions.APIError: SportsAPING\/v1.0\/listMarketBook ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "Params: {'marketIds': ['1.205155225'], 'priceProjection': {'priceData': ['EX_ALL_OFFERS'], 'exBestOffersOverrides': {}, 'virtualise': True, 'rolloverStakes': False}} ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "Exception: HTTPSConnectionPool(host='",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "link",
                                "url": "http:\/\/api.betfair.com",
                                "text": "api.betfair.com",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "', port=443): Read timed out. (read timeout=3.05)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            },
                            {
                                "type": "text",
                                "text": " SportsAPING\/v1.0\/listMarketBook ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "Params: {'marketIds': ['1.205155225'], 'priceProjection': {'priceData': ['EX_ALL_OFFERS'], 'exBestOffersOverrides': {}, 'virtualise': True, 'rolloverStakes': False}} ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "Exception: HTTPSConnectionPool(host='",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "link",
                                "url": "http:\/\/api.betfair.com",
                                "text": "api.betfair.com",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "', port=443): Read timed out. (read timeout=3.05)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\nOn follow up runs  on the same market 2 mins later the issue no longer occurs. Anyone familiar with this problem or have encountered it before and know how to addres it? Cheers"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1666347554.819969",
        "client_msg_id": "a6dd2544-b613-4e77-91b0-40ff4f46623f",
        "text": "Pretty standard to get these now and again tbh, are you making a separate request per market? \/ Why aren't you streaming?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1666347460.586629",
        "parent_user_id": "U01697K27UY",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mntye",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Pretty standard to get these now and again tbh, are you making a separate request per market? \/ Why aren't you streaming?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01697K27UY",
        "type": "message",
        "ts": "1666347761.740129",
        "client_msg_id": "7e1bd7b4-dba3-47c4-9bc4-1c698ce96b6b",
        "text": "ah right ok i will bear that in mind when handling the error. I'm not as proficient with flumine and utilising the streaming api as I would like to be, at this stage. In the process of learning but not there yet",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3030500b138",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3030500b13896539426bd540fe2bdab7.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png",
            "first_name": "JW",
            "real_name": "JW",
            "display_name": "EJono",
            "team": "T4G9NBD2M",
            "name": "jonowads380",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1666347460.586629",
        "parent_user_id": "U01697K27UY",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "AOD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ah right ok i will bear that in mind when handling the error. I'm not as proficient with flumine and utilising the streaming api as I would like to be, at this stage. In the process of learning but not there yet"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1666348301.994629",
        "client_msg_id": "e021d28e-50e2-4bd6-ad40-4a7bd331b75a",
        "text": "don't need to use flumine to use streaming, you will find it will dramatically simplify everything",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1666347460.586629",
        "parent_user_id": "U01697K27UY",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3lq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "don't need to use flumine to use streaming, you will find it will dramatically simplify everything"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U01697K27UY"
                ],
                "count": 1
            }
        ]
    }
]