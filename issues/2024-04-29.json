[
    {
        "user": "U024A7ACBA7",
        "type": "message",
        "ts": "1714399432.620129",
        "client_msg_id": "46f30a4b-5032-45ac-b4a7-e4a80183972d",
        "text": "Hi folks, is there anything in flumine that handles updating scores in tennis (via the poll inplay service example) or do I need to write that logic out myself? And if the latter is true, how should the logic be structured in flumine?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g90de49aa3a7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/90de49aa3a72ea72b3ab29d96e8b16af.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png",
            "first_name": "Shashi",
            "real_name": "Shashi Khaya",
            "display_name": "Shashi Khaya",
            "team": "T4G9NBD2M",
            "name": "shashi.k.parekh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CyDqn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi folks, is there anything in flumine that handles updating scores in tennis (via the poll inplay service example) or do I need to write that logic out myself? And if the latter is true, how should the logic be structured in flumine?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1714399488.690529",
        "client_msg_id": "7ad54377-c75a-4759-b484-008675fbde13",
        "text": "Did you find anything in the examples?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "2bFGY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Did you find anything in the examples?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U024A7ACBA7",
        "type": "message",
        "ts": "1714399974.297409",
        "edited": {
            "user": "U024A7ACBA7",
            "ts": "1714399994.000000"
        },
        "client_msg_id": "31c723b2-75f4-4ff4-be47-8e557b42dabc",
        "text": "the background worker callback overwrites the score :\ndef callback(flumine, event):\n    # update market context\n    score = event.event\n    for market in flumine.markets:\n        if market.event_id == str(score.event_id):\n            logger.debug(\n                \"Updated market %s with event %s scores data\",\n                market.market_id,\n                market.event_id,\n            )\n            market.context[\"score\"] = score",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g90de49aa3a7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/90de49aa3a72ea72b3ab29d96e8b16af.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png",
            "first_name": "Shashi",
            "real_name": "Shashi Khaya",
            "display_name": "Shashi Khaya",
            "team": "T4G9NBD2M",
            "name": "shashi.k.parekh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1714399974.297409",
        "reply_count": 6,
        "reply_users_count": 2,
        "latest_reply": "1714401918.702379",
        "reply_users": [
            "U4H19D1D2",
            "U024A7ACBA7"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1714400954.557969"
            },
            {
                "user": "U024A7ACBA7",
                "ts": "1714401119.721379"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1714401160.107139"
            },
            {
                "user": "U024A7ACBA7",
                "ts": "1714401354.993269"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1714401484.301609"
            },
            {
                "user": "U024A7ACBA7",
                "ts": "1714401918.702379"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1714401918.702379",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0VSk\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the background worker callback overwrites the score :\ndef callback(flumine, event):\n    # update market context\n    score = event.event\n    for market in flumine.markets:\n        if market.event_id == str(score.event_id):\n            logger.debug(\n                \"Updated market %s with event %s scores data\",\n                market.market_id,\n                market.event_id,\n            )\n            market.context[\"score\"] = score"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1714400954.557969",
        "client_msg_id": "c86fba92-7679-413f-b0bf-0c402a2a5d5e",
        "text": "Is that a question or are you happy?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1714399974.297409",
        "parent_user_id": "U024A7ACBA7",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "2OAiG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is that a question or are you happy?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U024A7ACBA7",
        "type": "message",
        "ts": "1714401119.721379",
        "client_msg_id": "5fbe98f9-3aa9-4210-93de-597429f08fba",
        "text": "I would like to see if there is anything readily available to extend this callback function to update the score rather than replace it. And if I need to write this logic, any guidance on how it would look in flumine would be greatly appreciated",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g90de49aa3a7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/90de49aa3a72ea72b3ab29d96e8b16af.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png",
            "first_name": "Shashi",
            "real_name": "Shashi Khaya",
            "display_name": "Shashi Khaya",
            "team": "T4G9NBD2M",
            "name": "shashi.k.parekh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1714399974.297409",
        "parent_user_id": "U024A7ACBA7",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UzXjS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I would like to see if there is anything readily available to extend this callback function to update the score rather than replace it. And if I need to write this logic, any guidance on how it would look in flumine would be greatly appreciated"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1714401160.107139",
        "client_msg_id": "75753661-254c-4b15-b3a2-b57faffe928d",
        "text": "I think you are going to need to explain the difference between update and replace to me",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1714399974.297409",
        "parent_user_id": "U024A7ACBA7",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "yTBop",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think you are going to need to explain the difference between update and replace to me"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U024A7ACBA7",
        "type": "message",
        "ts": "1714401354.993269",
        "edited": {
            "user": "U024A7ACBA7",
            "ts": "1714401435.000000"
        },
        "client_msg_id": "73e8d753-237d-4221-87c5-fc7aff3ec363",
        "text": "So I would like to frequently poll the inplayservice api to get the tennis match score data, however rather than replacing the score object in the market.context, I would like to update it with the new score (whilst retaining the old score). With the objective of storing a point by point log of the match scores evolution. The example above replaces it each time it recieves a new score : market.context[\"score\"] = score",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g90de49aa3a7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/90de49aa3a72ea72b3ab29d96e8b16af.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png",
            "first_name": "Shashi",
            "real_name": "Shashi Khaya",
            "display_name": "Shashi Khaya",
            "team": "T4G9NBD2M",
            "name": "shashi.k.parekh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1714399974.297409",
        "parent_user_id": "U024A7ACBA7",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "p8eF8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So I would like to frequently poll the inplayservice api to get the tennis match score data, however rather than replacing the score object in the market.context, I would like to update it with the new score (whilst retaining the old score). With the objective of storing a point by point log of the match scores evolution. The example above replaces it each time it recieves a new score : market.context[\"score\"] = score"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1714401484.301609",
        "client_msg_id": "2be09cd4-7f85-45cb-8ee6-d81b3ef58489",
        "text": "Just store it in a list as well or a dictionary? Very basic unless I am missing something here?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1714399974.297409",
        "parent_user_id": "U024A7ACBA7",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7T4a+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Just store it in a list as well or a dictionary? Very basic unless I am missing something here?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U024A7ACBA7",
        "type": "message",
        "ts": "1714401918.702379",
        "client_msg_id": "720c8e26-d09c-43bf-b2a6-9c1e33ab2d49",
        "text": "I had thought that, I just wanted to check whether there was a more sophisticated way to do this, but I guess this can be done in post processing. Is it possible to get score data for tennis via streaming? or is polling the inplayservice API the best way to obtain this data from betfair?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g90de49aa3a7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/90de49aa3a72ea72b3ab29d96e8b16af.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png",
            "first_name": "Shashi",
            "real_name": "Shashi Khaya",
            "display_name": "Shashi Khaya",
            "team": "T4G9NBD2M",
            "name": "shashi.k.parekh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1714399974.297409",
        "parent_user_id": "U024A7ACBA7",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tbwzD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I had thought that, I just wanted to check whether there was a more sophisticated way to do this, but I guess this can be done in post processing. Is it possible to get score data for tennis via streaming? or is polling the inplayservice API the best way to obtain this data from betfair?"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]