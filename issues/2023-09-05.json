[
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1693908609.465739",
        "client_msg_id": "bc579c8e-c800-469b-a294-87c819401f4f",
        "text": "Still puzzling over this since had some more last night and it's not something I've noticed before so trying to understand the flumine\/bflw jigsaw - seems to be some sort of timing\/threading issue maybe or is it incorrect BF responses ? As previous post the order definitely has the status `EXECUTABLE` when `process_closed_market()` is called.. Looking at the logs more carefully I see an entry arising from `BetfairExecution._execution_helper()` as shown below. This has the status set to `EXECUTION_COMPLETE` immediately  - as would be expected for a \"take\" bet. Can anyone explain why therefore later messages variously show Pending or Executable and the order fails to pick up the matched status as returned by the execution helper even when the market is closed ? Confused lol.\n`{\"asctime\": \"2023-09-04 13:12:30,255\", \"levelname\": \"INFO\", \"message\": \"execute_place\", \"trading_function\": \"place\", \"elapsed_time\": 0.21911835670471191, \"response\": {\"customerRef\": \"51e793094b1c11ee9720020000008598\", \"status\": \"SUCCESS\", \"marketId\": \"1.217888463\", \"instructionReports\": [{\"status\": \"SUCCESS\", \"instruction\": {\"selectionId\": 42320105, \"handicap\": 0.0, \"limitOrder\": {\"size\": 1.75, \"price\": 7.0, \"persistenceType\": \"MARKET_ON_CLOSE\"}, \"customerOrderRef\": \"stratxxxxxxxx-139131223500362504\", \"orderType\": \"LIMIT\", \"side\": \"LAY\"}, \"betId\": \"319679639999\", \"placedDate\": \"2023-09-04T12:12:31.000Z\", \"averagePriceMatched\": 7.0, \"sizeMatched\": 1.75, \"orderStatus\": \"EXECUTION_COMPLETE\"}]}, \"order_package\": {\"id\": \"51e79309-4b1c-11ee-9720-020000008598\", \"client\": \"&lt;flumine.clients.betfairclient.BetfairClient object at 0x0000003CAC713370&gt;\", \"market_id\": \"1.217888463\", \"orders\": [\"139131223500362504\"], \"order_count\": 1, \"package_type\": \"Place\", \"customer_strategy_ref\": \"xxxxxxxxxxxxxxx\", \"bet_delay\": 0, \"market_version\": null, \"retry\": true, \"retry_count\": 0, \"async\": false}}`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1693844760.892269",
        "parent_user_id": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "imj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Still puzzling over this since had some more last night and it's not something I've noticed before so trying to understand the flumine\/bflw jigsaw - seems to be some sort of timing\/threading issue maybe or is it incorrect BF responses ? As previous post the order definitely has the status "
                            },
                            {
                                "type": "text",
                                "text": "EXECUTABLE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " when "
                            },
                            {
                                "type": "text",
                                "text": "process_closed_market()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is called.. Looking at the logs more carefully I see an entry arising from "
                            },
                            {
                                "type": "text",
                                "text": "BetfairExecution._execution_helper()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as shown below. This has the status set to "
                            },
                            {
                                "type": "text",
                                "text": "EXECUTION_COMPLETE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " immediately  - as would be expected for a \"take\" bet. Can anyone explain why therefore later messages variously show Pending or Executable and the order fails to pick up the matched status as returned by the execution helper even when the market is closed ? Confused lol.\n"
                            },
                            {
                                "type": "text",
                                "text": "{\"asctime\": \"2023-09-04 13:12:30,255\", \"levelname\": \"INFO\", \"message\": \"execute_place\", \"trading_function\": \"place\", \"elapsed_time\": 0.21911835670471191, \"response\": {\"customerRef\": \"51e793094b1c11ee9720020000008598\", \"status\": \"SUCCESS\", \"marketId\": \"1.217888463\", \"instructionReports\": [{\"status\": \"SUCCESS\", \"instruction\": {\"selectionId\": 42320105, \"handicap\": 0.0, \"limitOrder\": {\"size\": 1.75, \"price\": 7.0, \"persistenceType\": \"MARKET_ON_CLOSE\"}, \"customerOrderRef\": \"stratxxxxxxxx-139131223500362504\", \"orderType\": \"LIMIT\", \"side\": \"LAY\"}, \"betId\": \"319679639999\", \"placedDate\": \"2023-09-04T12:12:31.000Z\", \"averagePriceMatched\": 7.0, \"sizeMatched\": 1.75, \"orderStatus\": \"EXECUTION_COMPLETE\"}]}, \"order_package\": {\"id\": \"51e79309-4b1c-11ee-9720-020000008598\", \"client\": \"<flumine.clients.betfairclient.BetfairClient object at 0x0000003CAC713370>\", \"market_id\": \"1.217888463\", \"orders\": [\"139131223500362504\"], \"order_count\": 1, \"package_type\": \"Place\", \"customer_strategy_ref\": \"xxxxxxxxxxxxxxx\", \"bet_delay\": 0, \"market_version\": null, \"retry\": true, \"retry_count\": 0, \"async\": false}}",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    }
]