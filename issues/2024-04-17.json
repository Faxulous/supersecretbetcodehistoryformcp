[
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1713342170.278479",
        "client_msg_id": "7e4fc846-df80-49ef-b4e0-6432eef99e79",
        "text": "maybe a silly q (and hopefully I’ve not missed something in docs); but can you add strategies after flumine has started running, or does it have to be done before the `run()` call?\n\nthis works as usual:\n```# main thread only\nfor s in strategies:\n    framework.add_strategy(s)\n\nframework.run()```\n\ndoesn’t seem to work - debug logging isn’t showing files being written to (but it’s just been a quick spike this morning)\n```# run() on background thread\nframework_thread = threading.Thread(\n    name=\"Flumine Main\",\n    target=framework.run,\n)\nframework_thread.start()\n\n# add strategy via main thread\nfor s in strategies:\n    framework.add_strategy(s)```\n(the strategies are just MarketRecorder from the examples with custom market filters based on relevant events, countrycodes and market_types to avoid hitting the 200 makret subscription limit which betfair seem to have)\n\nI’ve not tried adding strategies from a background thread yet, but will do that later today.\n\nreason for this is that I want to have one flumine instance running on my ec2, with a trickling in of football events as they are 2hours from start.\n\nso I’ll have the events stored in RDS (which are periodically refreshed) and then have a loop which grabs relevant event_id’s to construct the market_filter going into flumine\n\nis there a better pattern to use for something like this?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713342170.278479",
        "reply_count": 4,
        "reply_users_count": 3,
        "latest_reply": "1713382865.924899",
        "reply_users": [
            "U06R7GCC26B",
            "UBS7QANF3",
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U06R7GCC26B",
                "ts": "1713344261.684959"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1713344854.325889"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1713348321.975109"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1713382865.924899"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1713382865.924899",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TeLuv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "maybe a silly q (and hopefully I’ve not missed something in docs); but can you add strategies after flumine has started running, or does it have to be done before the "
                            },
                            {
                                "type": "text",
                                "text": "run()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " call?\n\nthis works as usual:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# main thread only\nfor s in strategies:\n    framework.add_strategy(s)\n\nframework.run()"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\ndoesn’t seem to work - debug logging isn’t showing files being written to (but it’s just been a quick spike this morning)\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# run() on background thread\nframework_thread = threading.Thread(\n    name=\"Flumine Main\",\n    target=framework.run,\n)\nframework_thread.start()\n\n# add strategy via main thread\nfor s in strategies:\n    framework.add_strategy(s)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n(the strategies are just MarketRecorder from the examples with custom market filters based on relevant events, countrycodes and market_types to avoid hitting the 200 makret subscription limit which betfair seem to have)\n\nI’ve not tried adding strategies from a background thread yet, but will do that later today.\n\nreason for this is that I want to have one flumine instance running on my ec2, with a trickling in of football events as they are 2hours from start.\n\nso I’ll have the events stored in RDS (which are periodically refreshed) and then have a loop which grabs relevant event_id’s to construct the market_filter going into flumine\n\nis there a better pattern to use for something like this?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1713344261.684959",
        "client_msg_id": "7a4e2277-1f1b-45e1-b6da-7242217c9e2a",
        "text": "running multiple flumines from different threads seems to work …",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713342170.278479",
        "parent_user_id": "U06R7GCC26B",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "26FrL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "running multiple flumines from different threads seems to work …"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1713344854.325889",
        "client_msg_id": "3868e93b-283b-461e-a71b-dc5e5351cfdb",
        "text": "I think I just threw up a bit in my mouth",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713342170.278479",
        "parent_user_id": "U06R7GCC26B",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rc+tM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think I just threw up a bit in my mouth"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "slightly_smiling_face",
                "users": [
                    "U06R7GCC26B"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1713348321.975109",
        "client_msg_id": "01eb0be4-74cd-4c77-b999-2ebcce9e9025",
        "text": "The benefits of <https:\/\/betcode-org.github.io\/betfair\/streaming\/|streaming>, reading between the lines it seems you are trying to solve the 200 market limit? Ask betfair for a raise, record everything, don't add markets and don't add strategies when running",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713342170.278479",
        "parent_user_id": "U06R7GCC26B",
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.github.io\/betfair\/streaming\/",
                "service_icon": "https:\/\/betcode-org.github.io\/betfair\/images\/logo.png",
                "id": 1,
                "original_url": "https:\/\/betcode-org.github.io\/betfair\/streaming\/",
                "fallback": "Streaming - betfairlightweight",
                "text": "Lightweight, super fast (uses c libraries) pythonic wrapper for Betfair API-NG.",
                "title": "Streaming - betfairlightweight",
                "title_link": "https:\/\/betcode-org.github.io\/betfair\/streaming\/",
                "service_name": "betcode-org.github.io"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ThH0F",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The benefits of "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.github.io\/betfair\/streaming\/",
                                "text": "streaming"
                            },
                            {
                                "type": "text",
                                "text": ", reading between the lines it seems you are trying to solve the 200 market limit? Ask betfair for a raise, record everything, don't add markets and don't add strategies when running"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U06R7GCC26B"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1713382865.924899",
        "client_msg_id": "3e749b9f-aff7-4fca-84a7-2af2d7508409",
        "text": "&gt;  don’t add markets and don’t add strategies when running\nthanks - that’s handy to know as a constraint",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1713342170.278479",
        "parent_user_id": "U06R7GCC26B",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lYrYP",
                "elements": [
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": " don’t add markets and don’t add strategies when running"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nthanks - that’s handy to know as a constraint"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]