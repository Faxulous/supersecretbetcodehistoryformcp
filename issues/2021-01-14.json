[
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610616717.001700",
        "edited": {
            "user": "UFTBRB3F1",
            "ts": "1610616729.000000"
        },
        "client_msg_id": "855a756a-695f-439c-93b9-b3e1ab667013",
        "text": "This is confusing me a bit, I've been getting this a lot over the last couple of days (seemingly out of the blue). Whilst the error is self explanatory, what I'm not understanding is how it occurs, as I check the order status before any cancel or replace:\n\n```Traceback (most recent call last):\n  File \"jumps.py\", line 187, in &lt;module&gt;\n    framework.run()\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/flumine.py\", line 32, in run\n    self._process_current_orders(event)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/baseflumine.py\", line 238, in _process_current_orders\n    strategy.process_orders(market, strategy_orders)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/simple_book.py\", line 418, in process_orders\n    rf.cancel_and_replace_orders(self, orders, market)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3563, in cancel_and_replace_orders\n    back_all_runners_without_back_price\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3699, in replace_all_orders\n    self.replace_order(market, order, back_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/strategy\/strategy.py\", line 146, in replace_order\n    market.replace_order(order, new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/markets\/market.py\", line 70, in replace_order\n    order.replace(new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/order\/order.py\", line 332, in replace\n    raise OrderUpdateError(\"Current status: %s\" % self.status)\nflumine.exceptions.OrderUpdateError: Current status: OrderStatus.CANCELLING```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NcWbC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This is confusing me a bit, I've been getting this a lot over the last couple of days (seemingly out of the blue). Whilst the error is self explanatory, what I'm not understanding is how it occurs, as I check the order status before any cancel or replace:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Traceback (most recent call last):\n  File \"jumps.py\", line 187, in <module>\n    framework.run()\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/flumine.py\", line 32, in run\n    self._process_current_orders(event)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/baseflumine.py\", line 238, in _process_current_orders\n    strategy.process_orders(market, strategy_orders)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/simple_book.py\", line 418, in process_orders\n    rf.cancel_and_replace_orders(self, orders, market)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3563, in cancel_and_replace_orders\n    back_all_runners_without_back_price\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3699, in replace_all_orders\n    self.replace_order(market, order, back_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/strategy\/strategy.py\", line 146, in replace_order\n    market.replace_order(order, new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/markets\/market.py\", line 70, in replace_order\n    order.replace(new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/order\/order.py\", line 332, in replace\n    raise OrderUpdateError(\"Current status: %s\" % self.status)\nflumine.exceptions.OrderUpdateError: Current status: OrderStatus.CANCELLING"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610616754.002300",
        "client_msg_id": "44263789-8437-4a2e-b595-2246beb76101",
        "text": "But I always check here:\n\n```order.status == OrderStatus.EXECUTABLE```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "f3K",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "But I always check here:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "order.status == OrderStatus.EXECUTABLE"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610616756.002500",
        "client_msg_id": "649d8054-b244-4771-90ad-fb7478c29418",
        "text": "Beforehand",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0Wn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Beforehand"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610616759.002700",
        "client_msg_id": "6659115d-d760-4500-81d8-0b062d122928",
        "text": "So what am I missing?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "aTeq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So what am I missing?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1610616797.002900",
        "client_msg_id": "39432cf1-4ad4-428b-b454-d2abc5c2fbdf",
        "text": "got some logs?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ooz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "got some logs?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610616839.003100",
        "client_msg_id": "05b8e50d-6886-43ef-a888-375f7f05a89b",
        "text": "yeah one sec",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5hGRK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yeah one sec"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610616870.003300",
        "client_msg_id": "2d43c469-1301-49cf-b6f6-f4619c9e7095",
        "text": "```{\"asctime\": \"2021-01-14 09:12:30,117\", \"levelname\": \"INFO\", \"message\": \"Order status update: Cancelling\", \"market_id\": \"1.177891689\", \"selection_id\": 16786966, \"handicap\": 0, \"id\": \"138299083469138870\", \"customer_order_ref\": \"6012fe3b915f7-138299083469138870\", \"bet_id\": \"221690469430\", \"date_time_created\": \"2021-01-14 09:12:26.913912\", \"publish_time\": \"2021-01-14 09:12:26.886000\", \"trade\": {\"id\": \"9ef0aa3a-5648-11eb-a0bb-02f9e1e2dd3a\", \"strategy\": \"simple_lay_mm\", \"place_reset_seconds\": 0.0, \"reset_seconds\": 0.0, \"orders\": [\"138299083469138870\"], \"notes\": \"\", \"market_notes\": \"8.4,8.8,8.6\", \"status\": \"Live\", \"status_log\": \"Pending, Live\"}, \"order_type\": {\"order_type\": \"Limit\", \"price\": 8.2, \"size\": 2.08, \"persistence_type\": \"PERSIST\", \"time_in_force\": null, \"min_fill_size\": null, \"bet_target_type\": null, \"bet_target_size\": null}, \"info\": {\"side\": \"LAY\", \"size_matched\": 0.0, \"size_remaining\": 2.08, \"size_cancelled\": 0.0, \"size_lapsed\": 0.0, \"size_voided\": 0.0, \"average_price_matched\": 0.0}, \"responses\": {\"date_time_placed\": \"2021-01-14 09:12:27.117261\", \"elapsed_seconds_executable\": null}, \"runner_status\": null, \"status\": \"Cancelling\", \"status_log\": \"Pending, Executable, Cancelling\", \"violation_msg\": null, \"simulated\": {\"profit\": 0.0, \"piq\": 0.0, \"matched\": []}}\nINFO:flumine.streams.orderstream:Stopped OrderStream 1001\n{\"asctime\": \"2021-01-14 09:12:30,117\", \"levelname\": \"INFO\", \"message\": \"Stopped OrderStream 1001\"}\nINFO:flumine.streams.marketstream:Stopped MarketStream 2001\n{\"asctime\": \"2021-01-14 09:12:30,118\", \"levelname\": \"INFO\", \"message\": \"Stopped MarketStream 2001\"}\nINFO:flumine.execution.baseexecution:Shutting down Execution (SimulatedExecution)\n{\"asctime\": \"2021-01-14 09:12:30,118\", \"levelname\": \"INFO\", \"message\": \"Shutting down Execution (SimulatedExecution)\"}\nINFO:flumine.execution.baseexecution:Shutting down Execution (BetfairExecution)\n{\"asctime\": \"2021-01-14 09:12:30,119\", \"levelname\": \"INFO\", \"message\": \"Shutting down Execution (BetfairExecution)\"}\nINFO:flumine.worker:BackgroundWorker keep_alive shutting down\n{\"asctime\": \"2021-01-14 09:12:30,119\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker keep_alive shutting down\", \"worker_name\": \"keep_alive\", \"function\": \"&lt;function keep_alive at 0x7f7644889680&gt;\"}\nINFO:flumine.streams.orderstream:Stopped output_thread (OrderStream 1001)\n{\"asctime\": \"2021-01-14 09:12:30,365\", \"levelname\": \"INFO\", \"message\": \"Stopped output_thread (OrderStream 1001)\"}\nINFO:flumine.streams.marketstream:Stopped output_thread (MarketStream 2001)\n{\"asctime\": \"2021-01-14 09:12:32,043\", \"levelname\": \"INFO\", \"message\": \"Stopped output_thread (MarketStream 2001)\"}\nINFO:flumine.worker:BackgroundWorker poll_account_balance shutting down\n{\"asctime\": \"2021-01-14 09:12:34,120\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker poll_account_balance shutting down\", \"worker_name\": \"poll_account_balance\", \"function\": \"&lt;function poll_account_balance at 0x7f76448967a0&gt;\"}\nINFO:flumine.worker:BackgroundWorker poll_market_catalogue shutting down\n{\"asctime\": \"2021-01-14 09:12:38,120\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker poll_market_catalogue shutting down\", \"worker_name\": \"poll_market_catalogue\", \"function\": \"&lt;function poll_market_catalogue at 0x7f7644896710&gt;\"}\nINFO:flumine.worker:BackgroundWorker poll_cleared_orders shutting down\n{\"asctime\": \"2021-01-14 09:12:42,121\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker poll_cleared_orders shutting down\", \"worker_name\": \"poll_cleared_orders\", \"function\": \"&lt;function poll_cleared_orders at 0x7f7644896830&gt;\"}\nINFO:flumine.baseflumine:Exiting flumine\n{\"asctime\": \"2021-01-14 09:12:46,214\", \"levelname\": \"INFO\", \"message\": \"Exiting flumine\", \"client\": {\"id\": \"74093be2\", \"exchange\": \"Betfair\", \"betting_client\": \"APIClient\", \"chargeable_transaction_count\": 0, \"trading_controls\": [\"&lt;flumine.controls.clientcontrols.MaxOrderCount object at 0x7f7643506d50&gt;\"], \"order_stream\": true, \"best_price_execution\": true, \"paper_trade\": false}, \"markets\": {\"market_count\": 262, \"open_market_count\": 259}, \"streams\": [\"&lt;OrderStream(OrderStream, stopped daemon 140145877423872)&gt;\", \"&lt;MarketStream(MarketStream, stopped daemon 140145869031168)&gt;\"], \"logging_controls\": [], \"threads\": [\"&lt;_MainThread(MainThread, started 140146403047232)&gt;\", \"&lt;BackgroundWorker(keep_alive, started daemon 140145910994688)&gt;\", \"&lt;BackgroundWorker(poll_account_balance, started daemon 140145902601984)&gt;\", \"&lt;BackgroundWorker(poll_market_catalogue, started daemon 140145894209280)&gt;\", \"&lt;BackgroundWorker(poll_cleared_orders, started daemon 140145885816576)&gt;\"]}\nTraceback (most recent call last):\n  File \"jumps.py\", line 187, in &lt;module&gt;\n    framework.run()\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/flumine.py\", line 32, in run\n    self._process_current_orders(event)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/baseflumine.py\", line 238, in _process_current_orders\n    strategy.process_orders(market, strategy_orders)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/simple_book.py\", line 418, in process_orders\n    rf.cancel_and_replace_orders(self, orders, market)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3563, in cancel_and_replace_orders\n    back_all_runners_without_back_price\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3699, in replace_all_orders\n    self.replace_order(market, order, back_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/strategy\/strategy.py\", line 146, in replace_order\n    market.replace_order(order, new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/markets\/market.py\", line 70, in replace_order\n    order.replace(new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/order\/order.py\", line 332, in replace\n    raise OrderUpdateError(\"Current status: %s\" % self.status)\nflumine.exceptions.OrderUpdateError: Current status: OrderStatus.CANCELLING\n(env) [ec2-user@ip-172-31-8-45 projects]$       ```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ltf",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{\"asctime\": \"2021-01-14 09:12:30,117\", \"levelname\": \"INFO\", \"message\": \"Order status update: Cancelling\", \"market_id\": \"1.177891689\", \"selection_id\": 16786966, \"handicap\": 0, \"id\": \"138299083469138870\", \"customer_order_ref\": \"6012fe3b915f7-138299083469138870\", \"bet_id\": \"221690469430\", \"date_time_created\": \"2021-01-14 09:12:26.913912\", \"publish_time\": \"2021-01-14 09:12:26.886000\", \"trade\": {\"id\": \"9ef0aa3a-5648-11eb-a0bb-02f9e1e2dd3a\", \"strategy\": \"simple_lay_mm\", \"place_reset_seconds\": 0.0, \"reset_seconds\": 0.0, \"orders\": [\"138299083469138870\"], \"notes\": \"\", \"market_notes\": \"8.4,8.8,8.6\", \"status\": \"Live\", \"status_log\": \"Pending, Live\"}, \"order_type\": {\"order_type\": \"Limit\", \"price\": 8.2, \"size\": 2.08, \"persistence_type\": \"PERSIST\", \"time_in_force\": null, \"min_fill_size\": null, \"bet_target_type\": null, \"bet_target_size\": null}, \"info\": {\"side\": \"LAY\", \"size_matched\": 0.0, \"size_remaining\": 2.08, \"size_cancelled\": 0.0, \"size_lapsed\": 0.0, \"size_voided\": 0.0, \"average_price_matched\": 0.0}, \"responses\": {\"date_time_placed\": \"2021-01-14 09:12:27.117261\", \"elapsed_seconds_executable\": null}, \"runner_status\": null, \"status\": \"Cancelling\", \"status_log\": \"Pending, Executable, Cancelling\", \"violation_msg\": null, \"simulated\": {\"profit\": 0.0, \"piq\": 0.0, \"matched\": []}}\nINFO:flumine.streams.orderstream:Stopped OrderStream 1001\n{\"asctime\": \"2021-01-14 09:12:30,117\", \"levelname\": \"INFO\", \"message\": \"Stopped OrderStream 1001\"}\nINFO:flumine.streams.marketstream:Stopped MarketStream 2001\n{\"asctime\": \"2021-01-14 09:12:30,118\", \"levelname\": \"INFO\", \"message\": \"Stopped MarketStream 2001\"}\nINFO:flumine.execution.baseexecution:Shutting down Execution (SimulatedExecution)\n{\"asctime\": \"2021-01-14 09:12:30,118\", \"levelname\": \"INFO\", \"message\": \"Shutting down Execution (SimulatedExecution)\"}\nINFO:flumine.execution.baseexecution:Shutting down Execution (BetfairExecution)\n{\"asctime\": \"2021-01-14 09:12:30,119\", \"levelname\": \"INFO\", \"message\": \"Shutting down Execution (BetfairExecution)\"}\nINFO:flumine.worker:BackgroundWorker keep_alive shutting down\n{\"asctime\": \"2021-01-14 09:12:30,119\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker keep_alive shutting down\", \"worker_name\": \"keep_alive\", \"function\": \"<function keep_alive at 0x7f7644889680>\"}\nINFO:flumine.streams.orderstream:Stopped output_thread (OrderStream 1001)\n{\"asctime\": \"2021-01-14 09:12:30,365\", \"levelname\": \"INFO\", \"message\": \"Stopped output_thread (OrderStream 1001)\"}\nINFO:flumine.streams.marketstream:Stopped output_thread (MarketStream 2001)\n{\"asctime\": \"2021-01-14 09:12:32,043\", \"levelname\": \"INFO\", \"message\": \"Stopped output_thread (MarketStream 2001)\"}\nINFO:flumine.worker:BackgroundWorker poll_account_balance shutting down\n{\"asctime\": \"2021-01-14 09:12:34,120\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker poll_account_balance shutting down\", \"worker_name\": \"poll_account_balance\", \"function\": \"<function poll_account_balance at 0x7f76448967a0>\"}\nINFO:flumine.worker:BackgroundWorker poll_market_catalogue shutting down\n{\"asctime\": \"2021-01-14 09:12:38,120\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker poll_market_catalogue shutting down\", \"worker_name\": \"poll_market_catalogue\", \"function\": \"<function poll_market_catalogue at 0x7f7644896710>\"}\nINFO:flumine.worker:BackgroundWorker poll_cleared_orders shutting down\n{\"asctime\": \"2021-01-14 09:12:42,121\", \"levelname\": \"INFO\", \"message\": \"BackgroundWorker poll_cleared_orders shutting down\", \"worker_name\": \"poll_cleared_orders\", \"function\": \"<function poll_cleared_orders at 0x7f7644896830>\"}\nINFO:flumine.baseflumine:Exiting flumine\n{\"asctime\": \"2021-01-14 09:12:46,214\", \"levelname\": \"INFO\", \"message\": \"Exiting flumine\", \"client\": {\"id\": \"74093be2\", \"exchange\": \"Betfair\", \"betting_client\": \"APIClient\", \"chargeable_transaction_count\": 0, \"trading_controls\": [\"<flumine.controls.clientcontrols.MaxOrderCount object at 0x7f7643506d50>\"], \"order_stream\": true, \"best_price_execution\": true, \"paper_trade\": false}, \"markets\": {\"market_count\": 262, \"open_market_count\": 259}, \"streams\": [\"<OrderStream(OrderStream, stopped daemon 140145877423872)>\", \"<MarketStream(MarketStream, stopped daemon 140145869031168)>\"], \"logging_controls\": [], \"threads\": [\"<_MainThread(MainThread, started 140146403047232)>\", \"<BackgroundWorker(keep_alive, started daemon 140145910994688)>\", \"<BackgroundWorker(poll_account_balance, started daemon 140145902601984)>\", \"<BackgroundWorker(poll_market_catalogue, started daemon 140145894209280)>\", \"<BackgroundWorker(poll_cleared_orders, started daemon 140145885816576)>\"]}\nTraceback (most recent call last):\n  File \"jumps.py\", line 187, in <module>\n    framework.run()\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/flumine.py\", line 32, in run\n    self._process_current_orders(event)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/baseflumine.py\", line 238, in _process_current_orders\n    strategy.process_orders(market, strategy_orders)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/simple_book.py\", line 418, in process_orders\n    rf.cancel_and_replace_orders(self, orders, market)\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3563, in cancel_and_replace_orders\n    back_all_runners_without_back_price\n  File \"\/home\/ec2-user\/trading\/env\/projects\/racing_functions.py\", line 3699, in replace_all_orders\n    self.replace_order(market, order, back_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/strategy\/strategy.py\", line 146, in replace_order\n    market.replace_order(order, new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/markets\/market.py\", line 70, in replace_order\n    order.replace(new_price)\n  File \"\/home\/ec2-user\/trading\/env\/lib64\/python3.7\/site-packages\/flumine\/order\/order.py\", line 332, in replace\n    raise OrderUpdateError(\"Current status: %s\" % self.status)\nflumine.exceptions.OrderUpdateError: Current status: OrderStatus.CANCELLING\n(env) [ec2-user@ip-172-31-8-45 projects]$       "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1610616972.003900",
        "client_msg_id": "778f8629-9e9b-42a6-ad32-86cf5bb8a351",
        "text": "don't suppose you have some logic in `process_current_orders` to cancel orders that is causing a race condition?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "2KlHO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "don't suppose you have some logic in "
                            },
                            {
                                "type": "text",
                                "text": "process_current_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to cancel orders that is causing a race condition?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1610617038.004400",
        "client_msg_id": "2d1f7485-654b-4bda-96d3-48de812796f3",
        "text": "actually that isn't possible as that is called in the same thread",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "V5k",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "actually that isn't possible as that is called in the same thread"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610617059.004900",
        "client_msg_id": "8fe94237-3de0-4fdc-830c-f1e243d0c42a",
        "text": "my logic is quite simple under process current orders tbh:\n\n```    def process_orders(self, market, orders):\n        if market.market_book is not None and \\\n                market.market_book.status not in ['CLOSED','SUSPENDED'] and \\\n            len([order for order in market.blotter.strategy_orders(self) if order.status == OrderStatus.EXECUTABLE]) != 0:\n\n            rf.cancel_and_replace_orders(self, orders, market)```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "oau",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "my logic is quite simple under process current orders tbh:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "    def process_orders(self, market, orders):\n        if market.market_book is not None and \\\n                market.market_book.status not in ['CLOSED','SUSPENDED'] and \\\n            len([order for order in market.blotter.strategy_orders(self) if order.status == OrderStatus.EXECUTABLE]) != 0:\n\n            rf.cancel_and_replace_orders(self, orders, market)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610617073.005300",
        "client_msg_id": "4dd783e9-e7c3-4d71-b326-ae4957f4198f",
        "text": "(where obviously that function then decides whether to cancel or replace)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "wGm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(where obviously that function then decides whether to cancel or replace)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610617099.005700",
        "client_msg_id": "616cd3e5-c266-4dd9-9f46-976d6b203356",
        "text": "(I also check again whether it is executable within the function just in case)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gWgD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(I also check again whether it is executable within the function just in case)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1610617255.006300",
        "client_msg_id": "aa42b5ba-41af-4050-b1d1-245453e4e338",
        "text": "are you 100% that `cancel_and_replace_orders` is correct? The name hints at a potential issue if it isn't...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "38yxo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "are you 100% that "
                            },
                            {
                                "type": "text",
                                "text": "cancel_and_replace_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is correct? The name hints at a potential issue if it isn't..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610617409.008300",
        "client_msg_id": "021238fa-dfb7-44b8-8ed5-5477ad6c418e",
        "text": "As in the logic within the function? Its completely possible its not perfect, but what I don't understand is, given I check the order is Executable at multiple points, how can the status be incorrect (even if say I'm trying to cancel when I mean to replace, it wouldn't throw that error)?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "71ZL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "As in the logic within the function? Its completely possible its not perfect, but what I don't understand is, given I check the order is Executable at multiple points, how can the status be incorrect (even if say I'm trying to cancel when I mean to replace, it wouldn't throw that error)?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1610617409.008400",
        "client_msg_id": "f53255ef-62c4-4535-a46f-477a0114379f",
        "text": "Recommend <http:\/\/sentry.io|sentry.io> btw as you would then get the full traceback with a lot more info although that error could be improved",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "szZK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Recommend "
                            },
                            {
                                "type": "link",
                                "url": "http:\/\/sentry.io",
                                "text": "sentry.io"
                            },
                            {
                                "type": "text",
                                "text": " btw as you would then get the full traceback with a lot more info although that error could be improved"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1610617430.008700",
        "client_msg_id": "3b427efb-59a8-4136-8135-2a61c8077251",
        "text": "oooh, cool tks will have a play with that",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "sUcw0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "oooh, cool tks will have a play with that"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]