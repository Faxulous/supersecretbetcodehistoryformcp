[
    {
        "subtype": "channel_join",
        "user": "U02NYS2QK4H",
        "text": "<@U02NYS2QK4H> has joined the channel",
        "type": "message",
        "ts": "1637827200.111200"
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1637835302.111300",
        "client_msg_id": "85ed12c0-7c4e-4ebb-9152-aa02f0becb86",
        "text": "Just updated the example",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1637651031.104700",
        "parent_user_id": "U010GM77S4W",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6EF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Just updated the example"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U010GM77S4W",
        "type": "message",
        "ts": "1637835376.111500",
        "client_msg_id": "67a6a8ce-66db-4a1e-a07e-de6b0d2da8dd",
        "text": "Thanks! Was just trying to figure out what you meant. Reading the code will be informative!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "66cae8f5399c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-03-20\/1004508356769_66cae8f5399cf91a07ae_72.jpg",
            "first_name": "",
            "real_name": "mandelbot",
            "display_name": "mandelbot",
            "team": "T4G9NBD2M",
            "name": "demhadbale",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1637651031.104700",
        "parent_user_id": "U010GM77S4W",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "E3SMf",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks! Was just trying to figure out what you meant. Reading the code will be informative!"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U010GM77S4W",
        "type": "message",
        "ts": "1637835521.111800",
        "client_msg_id": "d7bcf12a-e87c-4264-aebb-768426cdbe5e",
        "text": "Anyway to make bsp the price?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "66cae8f5399c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-03-20\/1004508356769_66cae8f5399cf91a07ae_72.jpg",
            "first_name": "",
            "real_name": "mandelbot",
            "display_name": "mandelbot",
            "team": "T4G9NBD2M",
            "name": "demhadbale",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1637651031.104700",
        "parent_user_id": "U010GM77S4W",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "33g6a",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Anyway to make bsp the price?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1637835744.112000",
        "client_msg_id": "f3979a94-2a84-4a81-abc7-745e6d35fd07",
        "text": "Hmm not really, we store `runner_status` in the order but not the sp, we could add it though so its easy to pull out",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1637651031.104700",
        "parent_user_id": "U010GM77S4W",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7oUW6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hmm not really, we store "
                            },
                            {
                                "type": "text",
                                "text": "runner_status",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in the order but not the sp, we could add it though so its easy to pull out"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U010GM77S4W",
        "type": "message",
        "ts": "1637837475.112200",
        "client_msg_id": "4f782da6-6019-4342-8953-ab8a7dad8c58",
        "text": "That would be useful instead of cross-referencing later",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "66cae8f5399c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-03-20\/1004508356769_66cae8f5399cf91a07ae_72.jpg",
            "first_name": "",
            "real_name": "mandelbot",
            "display_name": "mandelbot",
            "team": "T4G9NBD2M",
            "name": "demhadbale",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1637651031.104700",
        "parent_user_id": "U010GM77S4W",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EFH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That would be useful instead of cross-referencing later"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "channel_join",
        "user": "U02NQJQJFBN",
        "text": "<@U02NQJQJFBN> has joined the channel",
        "type": "message",
        "ts": "1637872420.112500"
    },
    {
        "user": "U01DT33JB42",
        "type": "message",
        "ts": "1637888028.116500",
        "client_msg_id": "6f4668ed-b5af-4bfb-8cf4-dc4fc5327279",
        "text": "Recently tried deploying a flumine strategy (which works well locally) to an AWS machine and was experiencing some of the same latency warnings I've seen posted above: `\"... High latency between current time and MarketBook publish time\", \"market_id\": \"...\", \"latency\": 53.55..\"` which sort of continually escalates to the point the strategy was acting on market book updates from 30 seconds prior. CPU utilization was pretty high (40-50%) on a EC2 t3a.medium but not enough to cause this huge bottleneck I thought but i tried it on a EC2 t3a.2xlarge and experienced the same behaviour.\n\nTook the advice to profile the code using cProfile and the biggest difference was the `process_orders` calls [ `baseflumine.py:220(_process_current_orders)` and `process.py:33(process_current_orders)` ] were completing in approx 10ms per call locally but 350ms on the AWS machine. Any ideas why this might be happening? Or anything i can do to clean out + speed up `process_orders` generally? Strategy is pretty order heavy so the partial fills and price updates etc start adding up to a big order list for each market but flumine seems to barely feel it locally.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ga5b10550143",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a5b105501432854b21474826f2d3be7a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "hankscorpiobetfair",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1637888028.116500",
        "reply_count": 13,
        "reply_users_count": 2,
        "latest_reply": "1638949746.253300",
        "reply_users": [
            "U4H19D1D2",
            "U01DT33JB42"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1637910505.117600"
            },
            {
                "user": "U01DT33JB42",
                "ts": "1637923204.118000"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1637926975.118200"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1637927001.118400"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1637927045.118600"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1637927072.118800"
            },
            {
                "user": "U01DT33JB42",
                "ts": "1638307938.228100"
            },
            {
                "user": "U01DT33JB42",
                "ts": "1638308240.229600"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1638345448.230600"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1638530951.237700"
            },
            {
                "user": "U01DT33JB42",
                "ts": "1638930759.252900"
            },
            {
                "user": "U01DT33JB42",
                "ts": "1638932539.253100"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1638949746.253300"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1638949746.253300",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QL17=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Recently tried deploying a flumine strategy (which works well locally) to an AWS machine and was experiencing some of the same latency warnings I've seen posted above: "
                            },
                            {
                                "type": "text",
                                "text": "\"... High latency between current time and MarketBook publish time\", \"market_id\": \"...\", \"latency\": 53.55..\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " which sort of continually escalates to the point the strategy was acting on market book updates from 30 seconds prior. CPU utilization was pretty high (40-50%) on a EC2 t3a.medium but not enough to cause this huge bottleneck I thought but i tried it on a EC2 t3a.2xlarge and experienced the same behaviour.\n\nTook the advice to profile the code using cProfile and the biggest difference was the "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " calls [ "
                            },
                            {
                                "type": "text",
                                "text": "baseflumine.py:220(_process_current_orders)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "process.py:33(process_current_orders)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " ] were completing in approx 10ms per call locally but 350ms on the AWS machine. Any ideas why this might be happening? Or anything i can do to clean out + speed up "
                            },
                            {
                                "type": "text",
                                "text": "process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " generally? Strategy is pretty order heavy so the partial fills and price updates etc start adding up to a big order list for each market but flumine seems to barely feel it locally."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1637910505.117600",
        "client_msg_id": "9AC144F1-4388-48CC-9DFD-72F65373B39A",
        "text": "Are you able to share the full cprofile from ec2? How many orders? CPU seems very high ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1637888028.116500",
        "parent_user_id": "U01DT33JB42",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Y=0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Are you able to share the full cprofile from ec2? How many orders? CPU seems very high "
                            }
                        ]
                    }
                ]
            }
        ]
    }
]