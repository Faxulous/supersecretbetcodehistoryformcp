[
    {
        "user": "U020LTXSJLU",
        "type": "message",
        "ts": "1662365914.207569",
        "client_msg_id": "982904fa-91bc-4a46-a315-816d0d5e42b7",
        "text": "from the documentation on betfair you can retrieve up to 90 days previous, instead by launching\n```account_statement = trading.account.get_account_statement(lightweight=True)```\n\nI get at most up to 2 previous days, how come?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d8532ea1d34b",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-04-29\/2000161265463_d8532ea1d34b98ddb2d2_72.gif",
            "first_name": "",
            "real_name": "sartux",
            "display_name": "sartux",
            "team": "T4G9NBD2M",
            "name": "rosario.giordano",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "reply_count": 8,
        "reply_users_count": 3,
        "latest_reply": "1662369619.772239",
        "reply_users": [
            "UBS7QANF3",
            "U020LTXSJLU",
            "UFTBRB3F1"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1662366010.141909"
            },
            {
                "user": "U020LTXSJLU",
                "ts": "1662366318.902009"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1662366372.972269"
            },
            {
                "user": "U020LTXSJLU",
                "ts": "1662366579.918979"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1662367225.843789"
            },
            {
                "user": "U020LTXSJLU",
                "ts": "1662367660.011299"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1662367744.395299"
            },
            {
                "user": "UFTBRB3F1",
                "ts": "1662369619.772239"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/=G",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "from the documentation on betfair you can retrieve up to 90 days previous, instead by launching\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "account_statement = trading.account.get_account_statement(lightweight=True)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nI get at most up to 2 previous days, how come?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1662366010.141909",
        "client_msg_id": "eb606775-72d1-439f-a39b-bc509c53a23b",
        "text": "Doesn't look like you are iterating through the pages. You can get a maximum of 100 records in one call",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0l+j",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Doesn't look like you are iterating through the pages. You can get a maximum of 100 records in one call"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U020LTXSJLU",
        "type": "message",
        "ts": "1662366318.902009",
        "client_msg_id": "bd741cac-d035-4083-b43e-1925a610c839",
        "text": "So you recommend working with cursors?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d8532ea1d34b",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-04-29\/2000161265463_d8532ea1d34b98ddb2d2_72.gif",
            "first_name": "",
            "real_name": "sartux",
            "display_name": "sartux",
            "team": "T4G9NBD2M",
            "name": "rosario.giordano",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "y4c",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So you recommend working with cursors?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1662366372.972269",
        "client_msg_id": "58ed2cce-2a30-4e60-b265-56823de56067",
        "text": "I don't see what the alternative is",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QGjH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I don't see what the alternative is"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U020LTXSJLU",
        "type": "message",
        "ts": "1662366579.918979",
        "client_msg_id": "bf9baa1e-2d91-4cb6-b99b-dd62685ab0a7",
        "text": "the problem is that I don't see a pagination in the method, should I go back to the last id and subtract 100?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d8532ea1d34b",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-04-29\/2000161265463_d8532ea1d34b98ddb2d2_72.gif",
            "first_name": "",
            "real_name": "sartux",
            "display_name": "sartux",
            "team": "T4G9NBD2M",
            "name": "rosario.giordano",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PSO1a",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the problem is that I don't see a pagination in the method, should I go back to the last id and subtract 100?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1662367225.843789",
        "client_msg_id": "a03aeeae-63f6-4028-99f7-f3c8bf41bc19",
        "text": "The method takes a `from_record` parameter. Keep track of this yourself. The result includes a `more_available` flag. If true then increment `from_record` by the number of records you received and call again",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "k0=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The method takes a "
                            },
                            {
                                "type": "text",
                                "text": "from_record",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " parameter. Keep track of this yourself. The result includes a "
                            },
                            {
                                "type": "text",
                                "text": "more_available",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " flag. If true then increment "
                            },
                            {
                                "type": "text",
                                "text": "from_record",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " by the number of records you received and call again"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U020LTXSJLU",
        "type": "message",
        "ts": "1662367660.011299",
        "client_msg_id": "b116b1bd-4c28-44d6-8ad7-d709f3643bdc",
        "text": "ty",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "d8532ea1d34b",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-04-29\/2000161265463_d8532ea1d34b98ddb2d2_72.gif",
            "first_name": "",
            "real_name": "sartux",
            "display_name": "sartux",
            "team": "T4G9NBD2M",
            "name": "rosario.giordano",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gjlg",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ty"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1662367744.395299",
        "client_msg_id": "f2dbc255-1462-460b-93d1-eec420cad199",
        "text": ":+1:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EH9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "emoji",
                                "name": "+1",
                                "unicode": "1f44d"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1662369619.772239",
        "client_msg_id": "02d8fe73-33d3-4b14-9145-84acd44a3eb3",
        "text": "Something like this:\n\n```def get_betfair_cleared_orders(from_date, to_date, group_by, event_type_id, item_description, trading=trading, bet_status=False, lightweight=False):\n\n    complete_order_list = []\n    if bet_status is False:\n        bet_status_list = ['VOIDED', 'CANCELLED', 'SETTLED', 'LAPSED']\n\n        for status in bet_status_list:\n            start_record = 0\n            while True:\n                market_orders = trading.betting.list_cleared_orders(event_type_ids=[event_type_id],\n                                                                    bet_status=status,\n                                                                    settled_date_range={'from': from_date.strftime(\"%Y-%m-%dT%H:%M:%S\"),\n                                                                                        'to': to_date.strftime(\"%Y-%m-%dT%H:%M:%S\")\n                                                                                        },\n                                                                    group_by=group_by,\n                                                                    from_record=start_record,\n                                                                    include_item_description=item_description,\n                                                                    lightweight=lightweight,\n\n                                                                    )\n                if lightweight == False:\n                    complete_order_list.extend(market_orders.orders)\n                    start_record += 1000\n                    if not market_orders.more_available is True:\n                        break\n                    else:\n                        print({'bet_status': status, 'from_record': start_record})\n                else:\n                    complete_order_list.extend(market_orders['clearedOrders'])\n                    start_record += 1000\n                    if not market_orders['moreAvailable'] is True:\n                        break\n                    else:\n                        print({'bet_status': status, 'from_record': start_record})\n\n        return complete_order_list\n\n    else:\n        start_record = 0\n        while True:\n            market_orders = trading.betting.list_cleared_orders(event_type_ids=[event_type_id],\n                                                                bet_status=bet_status,\n                                                                settled_date_range={\n                                                                    'from': from_date.strftime(\"%Y-%m-%dT%H:%M:%S\"),\n                                                                    'to': to_date.strftime(\"%Y-%m-%dT%H:%M:%S\")},\n                                                                group_by=group_by,\n                                                                from_record=start_record,\n                                                                include_item_description=item_description,\n                                                                lightweight=lightweight\n                                                                )\n            if lightweight == False:\n                complete_order_list.extend(market_orders.orders)\n                start_record +=1000\n                if not market_orders.more_available is True:\n                    break\n                else:\n                    print({'bet_status': bet_status, 'from_record': start_record})\n            else:\n                complete_order_list.extend(market_orders['clearedOrders'])\n                start_record += 1000\n                if not market_orders['moreAvailable'] is True:\n                    break\n                else:\n                    print({'bet_status': bet_status, 'from_record': start_record})\n        return complete_order_list```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1662365914.207569",
        "parent_user_id": "U020LTXSJLU",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LIb4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Something like this:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def get_betfair_cleared_orders(from_date, to_date, group_by, event_type_id, item_description, trading=trading, bet_status=False, lightweight=False):\n\n    complete_order_list = []\n    if bet_status is False:\n        bet_status_list = ['VOIDED', 'CANCELLED', 'SETTLED', 'LAPSED']\n\n        for status in bet_status_list:\n            start_record = 0\n            while True:\n                market_orders = trading.betting.list_cleared_orders(event_type_ids=[event_type_id],\n                                                                    bet_status=status,\n                                                                    settled_date_range={'from': from_date.strftime(\"%Y-%m-%dT%H:%M:%S\"),\n                                                                                        'to': to_date.strftime(\"%Y-%m-%dT%H:%M:%S\")\n                                                                                        },\n                                                                    group_by=group_by,\n                                                                    from_record=start_record,\n                                                                    include_item_description=item_description,\n                                                                    lightweight=lightweight,\n\n                                                                    )\n                if lightweight == False:\n                    complete_order_list.extend(market_orders.orders)\n                    start_record += 1000\n                    if not market_orders.more_available is True:\n                        break\n                    else:\n                        print({'bet_status': status, 'from_record': start_record})\n                else:\n                    complete_order_list.extend(market_orders['clearedOrders'])\n                    start_record += 1000\n                    if not market_orders['moreAvailable'] is True:\n                        break\n                    else:\n                        print({'bet_status': status, 'from_record': start_record})\n\n        return complete_order_list\n\n    else:\n        start_record = 0\n        while True:\n            market_orders = trading.betting.list_cleared_orders(event_type_ids=[event_type_id],\n                                                                bet_status=bet_status,\n                                                                settled_date_range={\n                                                                    'from': from_date.strftime(\"%Y-%m-%dT%H:%M:%S\"),\n                                                                    'to': to_date.strftime(\"%Y-%m-%dT%H:%M:%S\")},\n                                                                group_by=group_by,\n                                                                from_record=start_record,\n                                                                include_item_description=item_description,\n                                                                lightweight=lightweight\n                                                                )\n            if lightweight == False:\n                complete_order_list.extend(market_orders.orders)\n                start_record +=1000\n                if not market_orders.more_available is True:\n                    break\n                else:\n                    print({'bet_status': bet_status, 'from_record': start_record})\n            else:\n                complete_order_list.extend(market_orders['clearedOrders'])\n                start_record += 1000\n                if not market_orders['moreAvailable'] is True:\n                    break\n                else:\n                    print({'bet_status': bet_status, 'from_record': start_record})\n        return complete_order_list"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    }
]