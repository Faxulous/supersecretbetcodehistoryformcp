[
    {
        "user": "UG03WDCHH",
        "type": "message",
        "ts": "1657957270.354599",
        "client_msg_id": "0eb3a11a-3201-4316-9f4e-20f5e64f93d3",
        "text": "Hey, with the logging controls on a busy day I'm seeing my orders logged 90 - 120 minutes after the race finishes. I have 8 strategies running, so I'm guessing it's just backed up.\n\nWould you recommend a bigger instance size or having multiple instances and splitting the load? I'm assuming the latter... Or are there any ways you can have multiple logging controls and split the logs between them?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g03ce37265ba",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/803ce37265ba7d4f1be4d779100eaa60.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Rudeger",
            "real_name": "Rudeger Jamison",
            "display_name": "Rudeger Jamison",
            "team": "T4G9NBD2M",
            "name": "ben.k.muller",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gn2f9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hey, with the logging controls on a busy day I'm seeing my orders logged 90 - 120 minutes after the race finishes. I have 8 strategies running, so I'm guessing it's just backed up.\n\nWould you recommend a bigger instance size or having multiple instances and splitting the load? I'm assuming the latter... Or are there any ways you can have multiple logging controls and split the logs between them?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1657958856.159449",
        "client_msg_id": "aa5b5f3e-fe6d-459d-973e-dae75d9d2ed5",
        "text": "Is that due to the orders settling? If your stuff is getting backed up that long, there's a chance your machine could run out of memory due to other things backing up.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Kty2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is that due to the orders settling? If your stuff is getting backed up that long, there's a chance your machine could run out of memory due to other things backing up."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UG03WDCHH",
        "type": "message",
        "ts": "1657959265.499629",
        "client_msg_id": "34c6d678-ebe3-4908-87fa-50385fb49ad4",
        "text": "I have a feeling it's because I write every log directly to s3 as a parquet file, using pandas. Not very fast. Perhaps I need to collect multiple orders and write them in bulk as they're collected or a time period threshold is met?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g03ce37265ba",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/803ce37265ba7d4f1be4d779100eaa60.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Rudeger",
            "real_name": "Rudeger Jamison",
            "display_name": "Rudeger Jamison",
            "team": "T4G9NBD2M",
            "name": "ben.k.muller",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Vnp=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I have a feeling it's because I write every log directly to s3 as a parquet file, using pandas. Not very fast. Perhaps I need to collect multiple orders and write them in bulk as they're collected or a time period threshold is met?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UG03WDCHH",
        "type": "message",
        "ts": "1657959352.711269",
        "client_msg_id": "74e21682-b026-428f-b0c1-e6f465f8f402",
        "text": "Although each file atm seems to be one markets worth of orders.... I'm not exactly sure. Clutching at straws a bit. I have 4gb of memory and 1 vcpu.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g03ce37265ba",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/803ce37265ba7d4f1be4d779100eaa60.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Rudeger",
            "real_name": "Rudeger Jamison",
            "display_name": "Rudeger Jamison",
            "team": "T4G9NBD2M",
            "name": "ben.k.muller",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "s4N",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Although each file atm seems to be one markets worth of orders.... I'm not exactly sure. Clutching at straws a bit. I have 4gb of memory and 1 vcpu."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1657967483.652499",
        "client_msg_id": "ee7f8de1-b3cf-496b-9bdb-906af8eb7e48",
        "text": "Afraid I've never used S3, so I can't comment on the performance of writing to it.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+OkZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Afraid I've never used S3, so I can't comment on the performance of writing to it."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "UG03WDCHH"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1657983587.709099",
        "client_msg_id": "3fe48755-bce3-4db8-9c97-87cc76fd6531",
        "text": "There's going to be latency writing direct to S3. Far better to save locally and then copy or move to S3 on a separate process.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Cm6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "There's going to be latency writing direct to S3. Far better to save locally and then copy or move to S3 on a separate process."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UNQGKT0CR",
        "type": "message",
        "ts": "1657984704.105049",
        "client_msg_id": "7244987F-A3C3-4C5D-A00C-684A65B4E5C0",
        "text": "You could also write your logs to cloudwatch as json ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g51b5871ab46",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/51b5871ab46e5ef289d9e90376cacaab.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "AP",
            "real_name": "AP",
            "display_name": "AP",
            "team": "T4G9NBD2M",
            "name": "ant.papa22",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fpDm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You could also write your logs to cloudwatch as json "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1657996189.540149",
        "client_msg_id": "3EADF5C3-0EEE-4F6D-9D24-C206C6015F87",
        "text": "How big is this file? Sounds like a good reason to move to a db fronted by an API…",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "B6T8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "How big is this file? Sounds like a good reason to move to a db fronted by an API…"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UG03WDCHH",
        "type": "message",
        "ts": "1657997356.077289",
        "client_msg_id": "0582ad4b-ebed-4e00-8b8e-c2a7df092d79",
        "text": "Each file is only like 25kb",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g03ce37265ba",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/803ce37265ba7d4f1be4d779100eaa60.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Rudeger",
            "real_name": "Rudeger Jamison",
            "display_name": "Rudeger Jamison",
            "team": "T4G9NBD2M",
            "name": "ben.k.muller",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KetfH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Each file is only like 25kb"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UG03WDCHH",
        "type": "message",
        "ts": "1657997414.152349",
        "client_msg_id": "a4e977e5-7cb1-4e29-bce2-b1aff2d9e6ab",
        "text": "S3 is my Db :relaxed:. I use Athena to query.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g03ce37265ba",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/803ce37265ba7d4f1be4d779100eaa60.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Rudeger",
            "real_name": "Rudeger Jamison",
            "display_name": "Rudeger Jamison",
            "team": "T4G9NBD2M",
            "name": "ben.k.muller",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KA8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "S3 is my Db "
                            },
                            {
                                "type": "emoji",
                                "name": "relaxed",
                                "unicode": "263a-fe0f"
                            },
                            {
                                "type": "text",
                                "text": ". I use Athena to query."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "URMM9463X",
        "type": "message",
        "ts": "1657998167.890869",
        "client_msg_id": "CC8E43C4-7154-4014-A9A4-44ED91B79508",
        "text": "Using pandas to create lots of small parquet files may not be performant. Have you tried plain csv or json instead? ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf57720914be",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f57720914be90dd532faed6bdadad7ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Xxx",
            "real_name": "Xxx",
            "display_name": "D",
            "team": "T4G9NBD2M",
            "name": "derekclements67",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "eF\/l",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Using pandas to create lots of small parquet files may not be performant. Have you tried plain csv or json instead? "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UG03WDCHH",
        "type": "message",
        "ts": "1658000448.833129",
        "client_msg_id": "5873eb9e-6096-40ab-9d2b-ef716ea64565",
        "text": "I have  and that resulted in files 30X the size, so that's what lead me down this path. Perhaps I try out <@U016TGY3676>'s suggestion and write to local and then have a worker upload batch every 30 minutes. Feels problematic too though...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g03ce37265ba",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/803ce37265ba7d4f1be4d779100eaa60.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Rudeger",
            "real_name": "Rudeger Jamison",
            "display_name": "Rudeger Jamison",
            "team": "T4G9NBD2M",
            "name": "ben.k.muller",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZtJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I have  and that resulted in files 30X the size, so that's what lead me down this path. Perhaps I try out "
                            },
                            {
                                "type": "user",
                                "user_id": "U016TGY3676"
                            },
                            {
                                "type": "text",
                                "text": "'s suggestion and write to local and then have a worker upload batch every 30 minutes. Feels problematic too though..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "URMM9463X",
        "type": "message",
        "ts": "1658002509.789879",
        "client_msg_id": "5484400A-6C92-4944-A7E3-B95E244D8072",
        "text": "The files may be larger but is the performance better or worse? I don't know but I don't think the answer is obvious. Anyway, birchy’s method sounds like a better approach.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf57720914be",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f57720914be90dd532faed6bdadad7ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Xxx",
            "real_name": "Xxx",
            "display_name": "D",
            "team": "T4G9NBD2M",
            "name": "derekclements67",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rwucs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The files may be larger but is the performance better or worse? I don't know but I don't think the answer is obvious. Anyway, birchy’s method sounds like a better approach."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U016TGY3676",
        "type": "message",
        "ts": "1658004689.485649",
        "edited": {
            "user": "U016TGY3676",
            "ts": "1658004723.000000"
        },
        "client_msg_id": "d465f5b6-483b-46ce-ac93-cff8d364ca9b",
        "text": "<@UG03WDCHH> or you could crontab aws-cli cp\/mv\/sync or whatever",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g6a681220e11",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/6a681220e11c1a2ed3685375d658dadb.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png",
            "first_name": "",
            "real_name": "birchy",
            "display_name": "birchy",
            "team": "T4G9NBD2M",
            "name": "birchy",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Jwt=w",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UG03WDCHH"
                            },
                            {
                                "type": "text",
                                "text": " or you could crontab aws-cli cp\/mv\/sync or whatever"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UG03WDCHH",
        "type": "message",
        "ts": "1658014801.128369",
        "client_msg_id": "75618c6c-ae61-4ee4-94c5-74688b94867b",
        "text": "It's not an ec2 instance <@U016TGY3676>, it's a containerised service on ECS.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g03ce37265ba",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/803ce37265ba7d4f1be4d779100eaa60.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "Rudeger",
            "real_name": "Rudeger Jamison",
            "display_name": "Rudeger Jamison",
            "team": "T4G9NBD2M",
            "name": "ben.k.muller",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Rktld",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It's not an ec2 instance "
                            },
                            {
                                "type": "user",
                                "user_id": "U016TGY3676"
                            },
                            {
                                "type": "text",
                                "text": ", it's a containerised service on ECS."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]