[
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621584802.026600",
        "edited": {
            "user": "U4H19D1D2",
            "ts": "1621584815.000000"
        },
        "client_msg_id": "75adf4a1-fbb6-4285-9ab4-c1785359e04b",
        "text": "Just released <https:\/\/github.com\/liampauling\/flumine\/pull\/439|1.18.12> with a fix to a race condition, I am not 100% that this is the issue you are seeing but looks like I introduced a race condition on start up, now refactored",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "attachments": [
            {
                "text": "…ution complete orders have been loaded locally\n\nrefactor:\n\n• Start order stream first\n• Wait for successful socket start\n• Add market in process.py if required (previously raised warning)\n• Start market streams",
                "title": "<https:\/\/github.com\/liampauling\/flumine\/pull\/439|#439 race condition where markets processed before all executable and exec…>",
                "footer": "<https:\/\/github.com\/liampauling\/flumine|liampauling\/flumine>",
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "ts": 1621584538,
                "color": "6f42c1",
                "mrkdwn_in": [
                    "text"
                ],
                "fallback": "<https:\/\/github.com\/liampauling\/flumine\/pull\/439|#439 race condition where markets processed before all executable and exec…>",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/liampauling\/flumine\/pull\/439",
                "is_app_unfurl": true
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "S+8oa",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Just released "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/flumine\/pull\/439",
                                "text": "1.18.12"
                            },
                            {
                                "type": "text",
                                "text": " with a fix to a race condition, I am not 100% that this is the issue you are seeing but looks like I introduced a race condition on start up, now refactored"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588071.027000",
        "client_msg_id": "14e09bad-1db2-4033-b13e-60c342868b71",
        "text": "let me try and replicate and see what happens...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZEm",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "let me try and replicate and see what happens..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588188.027200",
        "client_msg_id": "b5a50e85-cd53-415e-8dca-10b2c28e3a3b",
        "text": "hmm, still happens unfortunately",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "F9La+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "hmm, still happens unfortunately"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621588233.027400",
        "client_msg_id": "ca2e5372-26ed-457b-b5f4-7a3ddd688ee7",
        "text": "I can replicate if I replace an order by changing the price",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "o09Ne",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I can replicate if I replace an order by changing the price"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621588250.027600",
        "client_msg_id": "3cbb7d6f-3fa9-475b-9c3d-82403dc00ce3",
        "text": "are you able to provide more details in order to replicate?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SKUxp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "are you able to provide more details in order to replicate?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588352.027800",
        "client_msg_id": "894f1599-19d9-4166-bc20-e1de41b08a3d",
        "text": "all I did was manually click cancel in the GUI, my bot sees exposure is &gt; or &lt; x and places an order accordingly. I'll attach the updated logs and can give you some of the logic if you like, but not sure the latter will help much?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZBxZI",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "all I did was manually click cancel in the GUI, my bot sees exposure is > or < x and places an order accordingly. I'll attach the updated logs and can give you some of the logic if you like, but not sure the latter will help much?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621588381.028000",
        "client_msg_id": "c2ba83e8-4c05-412e-a4fa-17c4a23e34ac",
        "text": "and it then places two orders?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7AfAt",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "and it then places two orders?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588534.028200",
        "client_msg_id": "c926c9d4-7eec-4b85-8977-e0a51862074c",
        "text": "yeah",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WPK3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yeah"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588544.028400",
        "client_msg_id": "da318914-d476-4a89-b677-e529216cb706",
        "text": "now the thing is even if my logic is wrong",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZKJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "now the thing is even if my logic is wrong"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588548.028600",
        "client_msg_id": "5dbdb6ae-d374-4b38-9929-3f1e77b35295",
        "text": "(which of course is possible)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "79ai",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(which of course is possible)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588555.028800",
        "client_msg_id": "664f4cd5-2a9e-4bfb-81a7-67874b2ff4f5",
        "text": "it still shouldn't be able to place 2",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "cCqB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "it still shouldn't be able to place 2"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "",
        "files": [
            {
                "id": "F022N4C3KGT",
                "created": 1621588584,
                "timestamp": 1621588584,
                "name": "double_order_on_cancellation.log",
                "title": "double_order_on_cancellation.log",
                "mimetype": "text\/plain",
                "filetype": "text",
                "pretty_type": "Plain Text",
                "user": "UFTBRB3F1",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 56817,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022N4C3KGT\/double_order_on_cancellation.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022N4C3KGT\/download\/double_order_on_cancellation.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022N4C3KGT\/double_order_on_cancellation.log",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F022N4C3KGT-0732bc32ef",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022N4C3KGT\/double_order_on_cancellation.log\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "UFTBRB3F1",
        "display_as_bot": false,
        "type": "message",
        "ts": "1621588586.029000",
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1"
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588589.029200",
        "client_msg_id": "7e94e386-0c1d-4fac-88df-69c27f0a8b0d",
        "text": "updated logs",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "BjD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "updated logs"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588607.029400",
        "client_msg_id": "04944a71-0add-4b20-a076-c73bfa0a5b1c",
        "text": "from a logic \/ code perspective, so I don't overload you, what bit would help?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "n4ZV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "from a logic \/ code perspective, so I don't overload you, what bit would help?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621588635.029600",
        "client_msg_id": "871301d7-b164-4d53-a953-83a0bd54b089",
        "text": "what version of flumine for those logs?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "orRyj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "what version of flumine for those logs?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588728.029800",
        "client_msg_id": "aeb1d999-1854-46e5-b873-e1be7482e2ea",
        "text": "that was just after the update this morning",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zRB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "that was just after the update this morning"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588739.030000",
        "client_msg_id": "fea542b4-2b92-498d-9244-8cb4b0653c5f",
        "text": "so should be 1.18.12",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TRi",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "so should be 1.18.12"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621588786.030200",
        "client_msg_id": "898b59aa-c637-478f-afe6-5e8d4b9e6f89",
        "text": "have you changed the middleware?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DToWq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "have you changed the middleware?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621588829.030400",
        "client_msg_id": "01743959-da6f-4da3-8c47-31f6e1662da8",
        "text": "the betIds have strings in front of them?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6j5",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the betIds have strings in front of them?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621588862.030600",
        "client_msg_id": "361f4911-b76f-4023-b8b1-0a8e07c981ff",
        "text": "Yes, those ones are based on the middleware example from the other day, I do mess around with some of the starting bet_ids (I effectively roll up historic bets)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1Xp8A",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes, those ones are based on the middleware example from the other day, I do mess around with some of the starting bet_ids (I effectively roll up historic bets)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621589045.030800",
        "client_msg_id": "7b662a62-4b32-4627-9d5b-fe3d737da2e3",
        "text": "really confused by these logs, it starts up fine, loads the current orders via the middleware and then suddenly bets appear that haven't been placed by the current instance, for example '233898629029', where has this come from?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pvSzF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "really confused by these logs, it starts up fine, loads the current orders via the middleware and then suddenly bets appear that haven't been placed by the current instance, for example '233898629029', where has this come from?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621589142.031000",
        "client_msg_id": "f7ea8842-79cb-4410-a0f7-052bb0b6bab4",
        "text": "can you use the middlware as in master right now? or is that the case already?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/WRf",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "can you use the middlware as in master right now? or is that the case already?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589232.031200",
        "client_msg_id": "e1380ca2-c2d0-4441-a3fc-6c8783bdcb37",
        "text": "I think that bet_id was already executable, so the middleware grabs it and puts it back in live for the current session.\n\nI just tried replicating with no executable orders at startup and it still occurs interestingly. Will just post the log, one sec..",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TZvZ1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think that bet_id was already executable, so the middleware grabs it and puts it back in live for the current session.\n\nI just tried replicating with no executable orders at startup and it still occurs interestingly. Will just post the log, one sec.."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621589251.031400",
        "client_msg_id": "87aa0da1-4b72-46ba-a2d8-4e6d4d45fd65",
        "text": "with the latest middleware?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dft",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "with the latest middleware?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "",
        "files": [
            {
                "id": "F0230HGQUV7",
                "created": 1621589375,
                "timestamp": 1621589375,
                "name": "double_place_no_existing_orders.log",
                "title": "double_place_no_existing_orders.log",
                "mimetype": "text\/plain",
                "filetype": "text",
                "pretty_type": "Plain Text",
                "user": "UFTBRB3F1",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 44971,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F0230HGQUV7\/double_place_no_existing_orders.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F0230HGQUV7\/download\/double_place_no_existing_orders.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F0230HGQUV7\/double_place_no_existing_orders.log",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F0230HGQUV7-62ae78a0ec",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F0230HGQUV7\/double_place_no_existing_orders.log\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            },
            {
                "id": "F023BP1GVDE",
                "created": 1621589416,
                "timestamp": 1621589416,
                "name": "orders_middleware.py",
                "title": "orders_middleware.py",
                "mimetype": "text\/plain",
                "filetype": "python",
                "pretty_type": "Python",
                "user": "UFTBRB3F1",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 3922,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F023BP1GVDE\/orders_middleware.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F023BP1GVDE\/download\/orders_middleware.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F023BP1GVDE\/orders_middleware.py",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F023BP1GVDE-73ffb936c2",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F023BP1GVDE\/orders_middleware.py\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589419.031600",
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1"
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589429.031800",
        "client_msg_id": "b59e3220-d63c-49ee-bf82-f746cd386b10",
        "text": "Thats my adapted version of the middleware",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PH9v",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thats my adapted version of the middleware"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589480.032000",
        "client_msg_id": "aac928f6-9c4e-4cfc-95ef-cdb600959ee3",
        "text": "I have to do some hacky stuff in the middle...so if its middleware related its likely to be around line 46 onwards",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ln+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I have to do some hacky stuff in the middle...so if its middleware related its likely to be around line 46 onwards"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589583.032200",
        "client_msg_id": "3819769f-21c1-4c2e-be7a-00bb69ad83d0",
        "text": "(although intuitively I don't see how that would affect live orders created in the current session...but its completely possibly I've overlooked something or done something stupidly catastrophic)!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KAU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(although intuitively I don't see how that would affect live orders created in the current session...but its completely possibly I've overlooked something or done something stupidly catastrophic)!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621589659.032400",
        "client_msg_id": "a9cce047-343b-49db-b856-3ea536086876",
        "text": "what is populate_existing_positions",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "uOLDv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "what is populate_existing_positions"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589763.032600",
        "client_msg_id": "25e0cf84-cd4a-4e22-948a-3a162e6017e0",
        "text": "one sec...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "O3sxj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "one sec..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589790.032800",
        "client_msg_id": "956b5196-633c-4779-b01a-87760092b7ff",
        "text": "```def populate_existing_positions(trading, market=False, group=True, order_status='ALL', flumine=True):\n\n    ''' current order BFLW object properties '''\n    '''\n        betId: str,\n        averagePriceMatched: float,\n        bspLiability: float,\n        handicap: float,\n        marketId: str,\n        orderType: str,\n        persistenceType: str,\n        placedDate: str,\n        selectionId: int,\n        side: str,\n        sizeCancelled: float,\n        sizeLapsed: float,\n        sizeMatched: float,\n        sizeRemaining: float,\n        sizeVoided: float,\n        status: str,\n        priceSize: dict,\n        regulatorCode: str = None,\n        matchedDate: str = None,\n        customerStrategyRef: str = None,\n        customerOrderRef: str = None,\n        regulatorAuthCode: str = None,\n        lapsedDate: str = None,\n        lapseStatusReasonCode: str = None,\n        cancelledDate: str = None,\n    '''\n    '''\n    Betfair Order type structure\n    \n        t = [{'market_id': '1.182015190', 'selection_id': 38378512, 'handicap': 0, 'id': '138378879025142090',\n          'customer_order_ref': '0e6bc4bda0c6d-138378879025142090', 'bet_id': '230289893583',\n          'date_time_created': '2021-04-16 17:45:02.514251', 'publish_time': '2021-04-16 17:45:02.504000',\n          'trade': {'id': '78b5d6de-9edb-11eb-b72a-02f9e1e2dd3a', 'strategy': 'each_way_arb',\n                    'place_reset_seconds': 0.0, 'reset_seconds': 0.0,\n                    'orders': ['138378879025142090'], 'offset_orders': [],\n                    'notes': '', 'market_notes': '4.9,5,4.9', 'status': 'Complete',\n                    'status_log': 'Pending, Live, Complete'},\n          'order_type': {'order_type': 'Limit', 'price': 4.3, 'size': 2,\n                         'persistence_type': 'PERSIST', 'time_in_force': None,\n                         'min_fill_size': None, 'bet_target_type': None, 'bet_target_size': None},\n          'info': {'side': 'BACK', 'size_matched': 0.0, 'size_remaining': 0.0, 'size_cancelled': 0.0, 'size_lapsed': 2,\n                   'size_voided': 0.0, 'average_price_matched': 0.0},\n          'responses': {'date_time_placed': '2021-04-16 17:45:02.776941', 'elapsed_seconds_executable': None},\n          'runner_status': None, 'status': 'Lapsed',\n          'status_log': 'Pending, Lapsed', 'violation_msg': None,\n          'simulated': {'profit': 0.0, 'piq': 0.0, 'matched': []}}]\n    \n    '''\n\n    if flumine is True:\n        completed_order_list = get_current_orders_flumine(self=trading, order_status=order_status, market=market)\n    else:\n        completed_order_list = get_current_orders(trading, order_status)\n\n    order_list = []\n    back_amount = 0\n    lay_amount = 0\n    for current_order in completed_order_list:\n        if current_order.size_matched &gt; 0:\n            if group is True:\n                # order_bet_id = str(current_order.side) + '_' + str(current_order.market_id) + '_' + str(current_order.handicap) + '_' + str(current_order.selection_id)\n                order_bet_id = str(current_order.side)[0] + str(current_order.market_id)[2:] + str(current_order.selection_id)\n                # print(order_bet_id)\n                customer_order_ref = config.hostname\n                order_type = \"LIMIT\"\n                persistence_type = \"PERSIST\"\n            else:\n                order_bet_id = current_order.bet_id\n                customer_order_ref = current_order.customer_order_ref\n                order_type = current_order.order_type\n                persistence_type = current_order.persistence_type\n            if order_bet_id not in [t.bet_id for t in order_list]:\n                # print(order_bet_id)\n                s = CurrentOrder(\n                    order_bet_id,\n                    current_order.average_price_matched,\n                    0,\n                    current_order.handicap,\n                    current_order.market_id,\n                    order_type,\n                    persistence_type,\n                    current_order.placed_date,\n                    current_order.selection_id,\n                    current_order.side,\n                    current_order.size_cancelled,\n                    current_order.size_lapsed,\n                    current_order.size_matched,\n                    current_order.size_remaining,\n                    current_order.size_voided,\n                    current_order.status,\n                    {'price': current_order.price_size.price, 'size': current_order.price_size.size},\n                    current_order.regulator_code,\n                    current_order.matched_date,\n                    None,\n                    customer_order_ref,\n                    current_order.regulator_auth_code,\n                    None)\n                order_list.append(s)\n            else:\n                for t in order_list:\n                    # seems to keep pulling in same order on repeat, makes no sense\n                    if order_bet_id == t.bet_id:\n                        t.average_price_matched = ((t.size_matched * t.average_price_matched) - t.size_matched) + \\\n                                                  ((current_order.average_price_matched * current_order.size_matched) - current_order.size_matched) \\\n                            if t.average_price_matched is not None and current_order.size_matched &gt; 0 else None\n                        t.size_cancelled += current_order.size_cancelled\n                        t.size_lapsed += current_order.size_lapsed\n                        t.size_matched += current_order.size_matched\n                        t.size_remaining += current_order.size_remaining\n                        t.size_voided += current_order.size_voided\n                        t.matched_date = current_order.matched_date\n                        t.average_price_matched = 1 + (t.average_price_matched \/ t.size_matched) if t.size_matched &gt; 0 and t.average_price_matched is not None else None\n                        t.price_size.price = t.average_price_matched # Given the order has been executed, the price is set to the average price matched\n\n    return order_list```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fkr",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def populate_existing_positions(trading, market=False, group=True, order_status='ALL', flumine=True):\n\n    ''' current order BFLW object properties '''\n    '''\n        betId: str,\n        averagePriceMatched: float,\n        bspLiability: float,\n        handicap: float,\n        marketId: str,\n        orderType: str,\n        persistenceType: str,\n        placedDate: str,\n        selectionId: int,\n        side: str,\n        sizeCancelled: float,\n        sizeLapsed: float,\n        sizeMatched: float,\n        sizeRemaining: float,\n        sizeVoided: float,\n        status: str,\n        priceSize: dict,\n        regulatorCode: str = None,\n        matchedDate: str = None,\n        customerStrategyRef: str = None,\n        customerOrderRef: str = None,\n        regulatorAuthCode: str = None,\n        lapsedDate: str = None,\n        lapseStatusReasonCode: str = None,\n        cancelledDate: str = None,\n    '''\n    '''\n    Betfair Order type structure\n    \n        t = [{'market_id': '1.182015190', 'selection_id': 38378512, 'handicap': 0, 'id': '138378879025142090',\n          'customer_order_ref': '0e6bc4bda0c6d-138378879025142090', 'bet_id': '230289893583',\n          'date_time_created': '2021-04-16 17:45:02.514251', 'publish_time': '2021-04-16 17:45:02.504000',\n          'trade': {'id': '78b5d6de-9edb-11eb-b72a-02f9e1e2dd3a', 'strategy': 'each_way_arb',\n                    'place_reset_seconds': 0.0, 'reset_seconds': 0.0,\n                    'orders': ['138378879025142090'], 'offset_orders': [],\n                    'notes': '', 'market_notes': '4.9,5,4.9', 'status': 'Complete',\n                    'status_log': 'Pending, Live, Complete'},\n          'order_type': {'order_type': 'Limit', 'price': 4.3, 'size': 2,\n                         'persistence_type': 'PERSIST', 'time_in_force': None,\n                         'min_fill_size': None, 'bet_target_type': None, 'bet_target_size': None},\n          'info': {'side': 'BACK', 'size_matched': 0.0, 'size_remaining': 0.0, 'size_cancelled': 0.0, 'size_lapsed': 2,\n                   'size_voided': 0.0, 'average_price_matched': 0.0},\n          'responses': {'date_time_placed': '2021-04-16 17:45:02.776941', 'elapsed_seconds_executable': None},\n          'runner_status': None, 'status': 'Lapsed',\n          'status_log': 'Pending, Lapsed', 'violation_msg': None,\n          'simulated': {'profit': 0.0, 'piq': 0.0, 'matched': []}}]\n    \n    '''\n\n    if flumine is True:\n        completed_order_list = get_current_orders_flumine(self=trading, order_status=order_status, market=market)\n    else:\n        completed_order_list = get_current_orders(trading, order_status)\n\n    order_list = []\n    back_amount = 0\n    lay_amount = 0\n    for current_order in completed_order_list:\n        if current_order.size_matched > 0:\n            if group is True:\n                # order_bet_id = str(current_order.side) + '_' + str(current_order.market_id) + '_' + str(current_order.handicap) + '_' + str(current_order.selection_id)\n                order_bet_id = str(current_order.side)[0] + str(current_order.market_id)[2:] + str(current_order.selection_id)\n                # print(order_bet_id)\n                customer_order_ref = config.hostname\n                order_type = \"LIMIT\"\n                persistence_type = \"PERSIST\"\n            else:\n                order_bet_id = current_order.bet_id\n                customer_order_ref = current_order.customer_order_ref\n                order_type = current_order.order_type\n                persistence_type = current_order.persistence_type\n            if order_bet_id not in [t.bet_id for t in order_list]:\n                # print(order_bet_id)\n                s = CurrentOrder(\n                    order_bet_id,\n                    current_order.average_price_matched,\n                    0,\n                    current_order.handicap,\n                    current_order.market_id,\n                    order_type,\n                    persistence_type,\n                    current_order.placed_date,\n                    current_order.selection_id,\n                    current_order.side,\n                    current_order.size_cancelled,\n                    current_order.size_lapsed,\n                    current_order.size_matched,\n                    current_order.size_remaining,\n                    current_order.size_voided,\n                    current_order.status,\n                    {'price': current_order.price_size.price, 'size': current_order.price_size.size},\n                    current_order.regulator_code,\n                    current_order.matched_date,\n                    None,\n                    customer_order_ref,\n                    current_order.regulator_auth_code,\n                    None)\n                order_list.append(s)\n            else:\n                for t in order_list:\n                    # seems to keep pulling in same order on repeat, makes no sense\n                    if order_bet_id == t.bet_id:\n                        t.average_price_matched = ((t.size_matched * t.average_price_matched) - t.size_matched) + \\\n                                                  ((current_order.average_price_matched * current_order.size_matched) - current_order.size_matched) \\\n                            if t.average_price_matched is not None and current_order.size_matched > 0 else None\n                        t.size_cancelled += current_order.size_cancelled\n                        t.size_lapsed += current_order.size_lapsed\n                        t.size_matched += current_order.size_matched\n                        t.size_remaining += current_order.size_remaining\n                        t.size_voided += current_order.size_voided\n                        t.matched_date = current_order.matched_date\n                        t.average_price_matched = 1 + (t.average_price_matched \/ t.size_matched) if t.size_matched > 0 and t.average_price_matched is not None else None\n                        t.price_size.price = t.average_price_matched # Given the order has been executed, the price is set to the average price matched\n\n    return order_list"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589877.033000",
        "client_msg_id": "b9ed6a2e-bfbc-4999-aaba-075c2cdb91c1",
        "text": "The whole purpose of this is for long running markets, at some point flumine will have to shut down (rather than running 24\/7 for days\/weeks\/months on end), so this aims to grab existing orders, roll up to calc live exposure and then grab any existing live orders (created previously in a flumine session) and pull them into the current blotter.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "MyD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The whole purpose of this is for long running markets, at some point flumine will have to shut down (rather than running 24\/7 for days\/weeks\/months on end), so this aims to grab existing orders, roll up to calc live exposure and then grab any existing live orders (created previously in a flumine session) and pull them into the current blotter."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589881.033200",
        "client_msg_id": "225cda6a-6ac0-47d9-b009-0d0a73d44a07",
        "text": "thats the theory...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7mOC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thats the theory..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621589885.033400",
        "client_msg_id": "6c1cd3e2-acac-4594-8c1b-be65aae72025",
        "text": "ok so you are asking for all orders but then in the middlware calling `order.execution_complete()`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "t94X",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ok so you are asking for all orders but then in the middlware calling "
                            },
                            {
                                "type": "text",
                                "text": "order.execution_complete()",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589924.033600",
        "client_msg_id": "0726f020-a362-4c20-aaa1-a8e689080c59",
        "text": "Ah so am I completing orders that shouldn't be then you think?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "BXACU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ah so am I completing orders that shouldn't be then you think?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621589992.033800",
        "client_msg_id": "9a5b1241-55fa-45ad-8e0f-95c42bc6f983",
        "text": "So that potentially is trying to complete orders that should remain executable?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "f7+Q",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So that potentially is trying to complete orders that should remain executable?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621590030.034000",
        "edited": {
            "user": "U4H19D1D2",
            "ts": "1621590058.000000"
        },
        "client_msg_id": "d1aa61e0-0653-4e9e-824d-6e6018c917ad",
        "text": "yep, you need to add some logic here instead\n\n```        if order.current_order.status == \"EXECUTION_COMPLETE\":\n            order.execution_complete()\n        else:\n            order.executable()```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gdRs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yep, you need to add some logic here instead\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "        if order.current_order.status == \"EXECUTION_COMPLETE\":\n            order.execution_complete()\n        else:\n            order.executable()"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621590077.034300",
        "client_msg_id": "0cede618-ca2c-4c2c-a292-76e77d8c71f9",
        "text": "in the middleware",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Oe7J",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "in the middleware"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621590097.034500",
        "client_msg_id": "b6d423a3-92ad-48a4-bc44-12d631d83204",
        "text": "there is a bug here somewhere though I think as flumine should try and handle this better but I can't see it right now",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vQ1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "there is a bug here somewhere though I think as flumine should try and handle this better but I can't see it right now"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621590246.034700",
        "client_msg_id": "5ae4f7e0-c5c6-4850-a558-a1495f679601",
        "text": "Ok let me play around with that, will report back in a bit and confirm",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tkN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ok let me play around with that, will report back in a bit and confirm"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621590366.034900",
        "client_msg_id": "d2141235-be67-41db-94ca-7168442fd9c4",
        "text": "hmm interestingly that doesn't work",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "w3R",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "hmm interestingly that doesn't work"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621590373.035100",
        "client_msg_id": "d64acfe2-bf18-428a-a48a-e32157254ddc",
        "text": "I can still generate 2 orders by cancelling",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VLZrj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I can still generate 2 orders by cancelling"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621590375.035300",
        "edited": {
            "user": "U4H19D1D2",
            "ts": "1621590387.000000"
        },
        "client_msg_id": "b0617390-0d99-46f4-be6d-be88e44cf824",
        "text": "the thing is that the order stream will be picking up these executable orders and adding to the blotter before the middleware does",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "i0q6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the thing is that the order stream will be picking up these executable orders and adding to the blotter before the middleware does"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621590415.035600",
        "client_msg_id": "7982e0ae-1b4d-4b3a-b056-404358d40c08",
        "text": "just got to jump on a work call...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GIf",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "just got to jump on a work call..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621590420.035800",
        "client_msg_id": "6b349977-e8b8-4142-b601-22186f12cb7d",
        "text": "back in a bit",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "2ew",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "back in a bit"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621590426.036000",
        "client_msg_id": "fc15701a-1830-4f7d-935a-7ae646250128",
        "text": "so high chance that if you look in the blotter you may have duplicates or be overriding thus calling the runner context place\/reset multiple times, that will be the bug",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bj6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "so high chance that if you look in the blotter you may have duplicates or be overriding thus calling the runner context place\/reset multiple times, that will be the bug"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621592281.036200",
        "client_msg_id": "546e65b1-5489-49fb-b09a-2b884003c097",
        "text": "Okay cool, will see if I can come up with a workaround for now and will post once done (in case it helps anyone else)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6ib",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Okay cool, will see if I can come up with a workaround for now and will post once done (in case it helps anyone else)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621592446.036400",
        "client_msg_id": "e3ef3a9d-85aa-469f-8457-74f809a9b275",
        "text": "yeah you basically want to check if the order already exists in the blotter, tricky as you are doing all sorts with id's, keep it simple",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5Nl6",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yeah you basically want to check if the order already exists in the blotter, tricky as you are doing all sorts with id's, keep it simple"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621592549.036600",
        "client_msg_id": "9463c2c0-d859-4da8-86bd-71d9baedab1a",
        "text": "Yeah, I was trying to think of a smart way to roll up as I don't really want thousands of orders when I only want the net exposure, so the logic was to create those new id's which were a consolidation of all historic back or lay orders, on paper it seemed like a good idea....",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EB=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah, I was trying to think of a smart way to roll up as I don't really want thousands of orders when I only want the net exposure, so the logic was to create those new id's which were a consolidation of all historic back or lay orders, on paper it seemed like a good idea...."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621592582.036800",
        "client_msg_id": "c58610bc-edec-463a-a9ef-7504c1d16f3e",
        "text": "But I'm sure I can create a few checks to at least minimise \/ ideally eradicate the risk of a dupe",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DGHKZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "But I'm sure I can create a few checks to at least minimise \/ ideally eradicate the risk of a dupe"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621592745.037000",
        "client_msg_id": "d0d9b8aa-1ae3-4c40-896b-71062f19e02f",
        "text": "whats wrong with thousands of orders? flumine is heavily optimised for this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "YdR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "whats wrong with thousands of orders? flumine is heavily optimised for this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621592825.037200",
        "client_msg_id": "28528bf3-ccf2-4fc3-a86a-4e5a310b0128",
        "text": "potentially nothing tbh, I just thought for these types of markets that can go on forever it could be problematic down the road",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dqhcA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "potentially nothing tbh, I just thought for these types of markets that can go on forever it could be problematic down the road"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621592977.037400",
        "client_msg_id": "baf3fabc-c855-42cf-ab32-bacb9cdfe6ae",
        "text": "If not then perhaps its simpler not to do it this way, but unlike horse racing markets that are over quickly, these next PM and tournament type markets can go on for a long time, so I don't really have a good idea of say the order count got huge whether that would be an issue. But its never going to be more than a few thousand I would have thought, so maybe I'm just over thinking it!!!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EgmJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If not then perhaps its simpler not to do it this way, but unlike horse racing markets that are over quickly, these next PM and tournament type markets can go on for a long time, so I don't really have a good idea of say the order count got huge whether that would be an issue. But its never going to be more than a few thousand I would have thought, so maybe I'm just over thinking it!!!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621593054.037600",
        "client_msg_id": "2cea138c-50bb-4478-b24a-6d5bc4014eab",
        "text": "premature optimization imho, keep it simple, 1-2k orders per market is normal for me (on every uk horse race)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "b2T",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "premature optimization imho, keep it simple, 1-2k orders per market is normal for me (on every uk horse race)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621593237.037800",
        "client_msg_id": "e96b3a24-f769-4690-ae33-027eee84513d",
        "text": "maybe it is overkill then, which makes life easier :slightly_smiling_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mFF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "maybe it is overkill then, which makes life easier "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621593325.038000",
        "client_msg_id": "1d3701aa-5381-4ec3-930c-ef7a33b6a8c5",
        "text": "One question though, if there are no executable orders on startup, i.e. only execution_complete coming through the middleware. Why would the issue persist still for new orders created during the session?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lto9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "One question though, if there are no executable orders on startup, i.e. only execution_complete coming through the middleware. Why would the issue persist still for new orders created during the session?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621593548.038200",
        "client_msg_id": "6a5c365e-3816-493c-bcc8-7c08df986737",
        "text": "no idea, too complicated with your current setup",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "H+P",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "no idea, too complicated with your current setup"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621594120.038400",
        "client_msg_id": "63e1992b-56f3-4729-9ed9-5d140b577d00",
        "text": "ok cool will try without my roll up attempt and see what that produces...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xaK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ok cool will try without my roll up attempt and see what that produces..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "Have replicated without any middleware:",
        "files": [
            {
                "id": "F022GFB07HC",
                "created": 1621610591,
                "timestamp": 1621610591,
                "name": "No_middleware_dupe_orders_after_cancel.log",
                "title": "No_middleware_dupe_orders_after_cancel.log",
                "mimetype": "text\/plain",
                "filetype": "text",
                "pretty_type": "Plain Text",
                "user": "UFTBRB3F1",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 22354,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022GFB07HC\/no_middleware_dupe_orders_after_cancel.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022GFB07HC\/download\/no_middleware_dupe_orders_after_cancel.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022GFB07HC\/no_middleware_dupe_orders_after_cancel.log",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F022GFB07HC-b9050dccba",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022GFB07HC\/no_middleware_dupe_orders_after_cancel.log\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "UFTBRB3F1",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "79Q\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Have replicated without any middleware:"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1621610605.038600",
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1"
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621610651.038800",
        "client_msg_id": "0143373d-dc0d-486a-861d-fb85ea17922d",
        "text": "However I can only replicate if manually cancelling an order in the Betfair GUI. If I place an order, then cancel all within Flumine it appears to handle as expected.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Mra",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "However I can only replicate if manually cancelling an order in the Betfair GUI. If I place an order, then cancel all within Flumine it appears to handle as expected."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621613213.039000",
        "client_msg_id": "bed21ca2-9552-470a-89f4-135fc517c2ab",
        "text": "Are you sure your not running two instances of a bot on this market? Because order 233925456353 appears from somewhere else after you cancel, I can see it was placed by your strategy and by flumine but it wasn't from this running instance",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EnJgW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Are you sure your not running two instances of a bot on this market? Because order 233925456353 appears from somewhere else after you cancel, I can see it was placed by your strategy and by flumine but it wasn't from this running instance"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621613912.039200",
        "client_msg_id": "97603046-e741-48c1-aead-5c7a8540355b",
        "text": "yeah I saw that....and I can't explain it!!!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7Fr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yeah I saw that....and I can't explain it!!!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621613955.039400",
        "client_msg_id": "d87ef69a-7b93-4766-be67-f6da62405002",
        "text": "this is just me on my local machine, hitting run, there can't be any other instances running",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "OYU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "this is just me on my local machine, hitting run, there can't be any other instances running"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621613958.039600",
        "client_msg_id": "2c486308-5e7b-47f7-855b-8ff1149f7b83",
        "text": "so its really odd",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0l3vi",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "so its really odd"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621613993.039800",
        "client_msg_id": "6e6d4796-54ef-4bf6-9797-86c2240078f4",
        "text": "I'm running 2 strategies on the market, but from the same instance",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "4Xn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm running 2 strategies on the market, but from the same instance"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621614135.040200",
        "client_msg_id": "023F9396-1260-44FB-9ADC-F25A565F9E64",
        "text": "You are kidding :man-facepalming:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7LDD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You are kidding "
                            },
                            {
                                "type": "emoji",
                                "name": "man-facepalming",
                                "unicode": "1f926-200d-2642-fe0f"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614328.040500",
        "client_msg_id": "16410a24-0ab0-4f6a-b21f-4c963fe6c0cc",
        "text": "at the 2 strategies bit?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nNt8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "at the 2 strategies bit?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614366.041400",
        "client_msg_id": "56b1a471-907e-4bf6-8bce-c44ba81e68a1",
        "text": "Isn't that fairly standard, I have one for back's, one for lay's",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=T2aS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Isn't that fairly standard, I have one for back's, one for lay's"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621614386.042100",
        "client_msg_id": "7C7690E0-C8F5-4987-9AEF-3C701F93667B",
        "text": "Yeah, is has no way to differentiate them as flumine uses the strategy name which isn’t unique, if you need two change the name on initialisation ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kIb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah, is has no way to differentiate them as flumine uses the strategy name which isn’t unique, if you need two change the name on initialisation "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614414.042300",
        "client_msg_id": "8310b3e2-0900-4a93-92c8-e071b0a23309",
        "text": "the strategy names are unique",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "27Qc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the strategy names are unique"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614421.042500",
        "client_msg_id": "349584cd-d26d-4255-bf63-dafa9f00a757",
        "text": "or am I misunderstanding",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KHpt",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "or am I misunderstanding"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614443.042700",
        "client_msg_id": "0b28b044-6514-4ca1-bbbe-9aaf3c5074c2",
        "text": "strategy_x_back and strategy_x_y",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vVa",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "strategy_x_back and strategy_x_y"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614447.043000",
        "client_msg_id": "34acdcd4-1f9b-4d8f-88a8-3e6121f7524c",
        "text": "so the hashes are different",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hcj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "so the hashes are different"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614458.043400",
        "client_msg_id": "64650bf7-068d-4728-9ffe-595df8c9d601",
        "text": "sorry strategy_x_lay for the second",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "wwIN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "sorry strategy_x_lay for the second"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621614465.043800",
        "client_msg_id": "F8576101-7692-40E8-81AD-4C0DF0A1E916",
        "text": "But who placed that order from above? ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "aXFEe",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "But who placed that order from above? "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614468.044000",
        "client_msg_id": "88d5161b-5f9f-45e6-8733-17b350949136",
        "text": "but each produces a unique hash",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Yt8fe",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "but each produces a unique hash"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614477.044500",
        "client_msg_id": "ce5ec325-8605-41ed-a5bb-a18346cc92b0",
        "text": "both orders have to have come from the lay strategy",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zYY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "both orders have to have come from the lay strategy"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621614478.044700",
        "client_msg_id": "ACFB3BFE-B569-47FE-8672-1C9EC27F2A95",
        "text": "It was from a different running instance of flumine ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ijC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It was from a different running instance of flumine "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614486.045000",
        "client_msg_id": "5465012a-7b89-4860-9196-c34db2a0a6ae",
        "text": "there's no lay logic on the back one",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VbAj9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "there's no lay logic on the back one"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621614487.045200",
        "client_msg_id": "99C22C9A-3B0F-46FF-A7AC-28E6FB3BA3E6",
        "text": "It didn’t ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EyFKk",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It didn’t "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621614510.046100",
        "client_msg_id": "A96B72D5-0CAD-49C3-96FB-BC91B06DB737",
        "text": "Not in the logs as a place, it just suddenly appears, it came from somewhere else ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "BjPs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not in the logs as a place, it just suddenly appears, it came from somewhere else "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614521.046300",
        "client_msg_id": "81547dbe-8617-499e-8956-5eecd52824a9",
        "text": "I agree the logs show that, but it shouldn't be possible...okay let me just run the lay side on its own, one sec",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "I4Hx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I agree the logs show that, but it shouldn't be possible...okay let me just run the lay side on its own, one sec"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621614742.046500",
        "client_msg_id": "4d152e58-6868-449e-be20-ce1e78019be1",
        "text": "just replicated with the one strategy running, very odd. Just grabbing the logs...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xE7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "just replicated with the one strategy running, very odd. Just grabbing the logs..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621614886.047700",
        "client_msg_id": "5D701269-62BB-4423-A991-07B0E2497D00",
        "text": "Are you sure you have nothing else running? Try again but change the name of the strategy to confirm ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "wtf",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Are you sure you have nothing else running? Try again but change the name of the strategy to confirm "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621615261.047900",
        "client_msg_id": "3bdfaa1b-de7f-4512-a5ee-951866560c71",
        "text": "I have a horse racing strategy on AWS running, that only looks at event_type_id = 7 though, I can kill it to see, but surely with these filters it couldn't possibly interfere could it?\n\n```market_filter=streaming_market_filter(\n    event_type_ids=s['7'],\n    country_codes=['GB','IE','US'],\n    market_types=['WIN','PLACE', 'EACH_WAY'],```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "4+E",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I have a horse racing strategy on AWS running, that only looks at event_type_id = 7 though, I can kill it to see, but surely with these filters it couldn't possibly interfere could it?\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "market_filter=streaming_market_filter(\n    event_type_ids=s['7'],\n    country_codes=['GB','IE','US'],\n    market_types=['WIN','PLACE', 'EACH_WAY'],"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "text": "Ok so:\n\nstrategy name changed\nonly 1 strategy running\nonly 1 instance running locally\nAWS horse racing instance killed before running",
        "files": [
            {
                "id": "F022VQLMBGC",
                "created": 1621615567,
                "timestamp": 1621615567,
                "name": "05-21-2021_17_43_59.log",
                "title": "05-21-2021_17_43_59.log",
                "mimetype": "text\/plain",
                "filetype": "text",
                "pretty_type": "Plain Text",
                "user": "UFTBRB3F1",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 68811,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022VQLMBGC\/05-21-2021_17_43_59.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022VQLMBGC\/download\/05-21-2021_17_43_59.log?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022VQLMBGC\/05-21-2021_17_43_59.log",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F022VQLMBGC-7324568712",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022VQLMBGC\/05-21-2021_17_43_59.log\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "UFTBRB3F1",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ap9ru",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ok so:\n\nstrategy name changed\nonly 1 strategy running\nonly 1 instance running locally\nAWS horse racing instance killed before running"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1621615611.048100",
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1"
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621615655.048300",
        "client_msg_id": "a371b565-34f5-4a45-b8d6-8f0178e1768c",
        "text": "(all those order not found in blotter are of course because there are live orders from the previous strategy name on this market)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bPCgI",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(all those order not found in blotter are of course because there are live orders from the previous strategy name on this market)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621617167.048500",
        "client_msg_id": "c734afa0-a132-4c93-80cb-5fb60f69bc0d",
        "text": "so who placed\n```233934323412```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3R4V",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "so who placed\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "233934323412"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621617265.048700",
        "client_msg_id": "7f47f46d-a2ba-488e-b472-918a929f8e94",
        "text": "this is the mystery!!!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=Mfr8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "this is the mystery!!!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621617281.048900",
        "client_msg_id": "3cd69f9c-0c85-42c7-ae1f-a2588060bbff",
        "text": "can you change the strategy name to name+os.process_id",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tQA=b",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "can you change the strategy name to name+os.process_id"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621617289.049100",
        "client_msg_id": "db14251d-f3e4-44a7-9624-7348f8872715",
        "text": "just to confirm it is the instance making it",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jz0zj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "just to confirm it is the instance making it"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621617291.049300",
        "client_msg_id": "6ec0f3e4-37eb-4c06-ad3b-8f57dbcaa3e7",
        "text": "yep one sec",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "W4k",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yep one sec"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621617674.049500",
        "client_msg_id": "f442310e-7e67-4ce1-812f-d911c8d56cbf",
        "text": "ok cool you've got it!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tGC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ok cool you've got it!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621617677.049700",
        "client_msg_id": "d5015156-a1cf-41b3-b316-1ff9ff1bf990",
        "text": "Look at this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CHLcV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Look at this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621617684.049900",
        "client_msg_id": "76456962-7327-4007-9368-7f43c6321a1f",
        "text": "`{\"id\": \"bf189146-ba58-11eb-91bf-2016d8944b85\", \"strategy\": \"politics_test20216\", \"place_reset_seconds\": 0.0, \"reset_seconds\": 0.0, \"orders\": [\"138409103890878791\"], \"offset_orders\": [], \"notes\": \"\", \"market_notes\": null, \"status\": \"Live\", \"status_log\": \"\"}, \"order_type\": {\"order_type\": \"Limit\", \"price\": 1.86, \"size\": 17.44, \"persistence_type\": \"LAPSE\", \"time_in_force\": null, \"min_fill_size\": null, \"bet_target_type\": null, \"bet_target_size\": null}, \"info\": {\"side\": \"LAY\", \"size_matched\": 0.0, \"size_remaining\": 17.44, \"size_cancelled\": 0.0, \"size_lapsed\": 0.0, \"size_voided\": 0.0, \"average_price_matched\": 0.0}, \"responses\": {\"date_time_placed\": null, \"elapsed_seconds_executable\": null}, \"runner_status\": null, \"status\": \"Pending\", \"status_log\": \"Pending\", \"violation_msg\": null, \"simulated\": {\"profit\": 0.0, \"piq\": 0.0, \"matched\": []}, \"notes\": \"\", \"market_notes\": null}`\nINFO:flumine.order.order:Order status update: Pending\n{\"asctime\": \"2021-05-21 17:19:49,088\", \"levelname\": \"INFO\", \"message\": \"Order status update: Pending\", \"market_id\": \"1.160683973\", \"selection_id\": 25181943, \"handicap\": 0, \"id\": \"138409103890878791\", \"customer_order_ref\": \"e6e7ee3f26f23-138409103890878791\", \"bet_id\": null, \"date_time_created\": \"2021-05-21 17:19:49.087879\", \"publish_time\": \"2021-05-21 17:19:47.488000\", \"trade\": {\"id\": \"bf189146-ba58-11eb-b280-2016d8944b85\", \"strategy\": \"politics_test10376",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NIW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{\"id\": \"bf189146-ba58-11eb-91bf-2016d8944b85\", \"strategy\": \"politics_test20216\", \"place_reset_seconds\": 0.0, \"reset_seconds\": 0.0, \"orders\": [\"138409103890878791\"], \"offset_orders\": [], \"notes\": \"\", \"market_notes\": null, \"status\": \"Live\", \"status_log\": \"\"}, \"order_type\": {\"order_type\": \"Limit\", \"price\": 1.86, \"size\": 17.44, \"persistence_type\": \"LAPSE\", \"time_in_force\": null, \"min_fill_size\": null, \"bet_target_type\": null, \"bet_target_size\": null}, \"info\": {\"side\": \"LAY\", \"size_matched\": 0.0, \"size_remaining\": 17.44, \"size_cancelled\": 0.0, \"size_lapsed\": 0.0, \"size_voided\": 0.0, \"average_price_matched\": 0.0}, \"responses\": {\"date_time_placed\": null, \"elapsed_seconds_executable\": null}, \"runner_status\": null, \"status\": \"Pending\", \"status_log\": \"Pending\", \"violation_msg\": null, \"simulated\": {\"profit\": 0.0, \"piq\": 0.0, \"matched\": []}, \"notes\": \"\", \"market_notes\": null}",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nINFO:flumine.order.order:Order status update: Pending\n{\"asctime\": \"2021-05-21 17:19:49,088\", \"levelname\": \"INFO\", \"message\": \"Order status update: Pending\", \"market_id\": \"1.160683973\", \"selection_id\": 25181943, \"handicap\": 0, \"id\": \"138409103890878791\", \"customer_order_ref\": \"e6e7ee3f26f23-138409103890878791\", \"bet_id\": null, \"date_time_created\": \"2021-05-21 17:19:49.087879\", \"publish_time\": \"2021-05-21 17:19:47.488000\", \"trade\": {\"id\": \"bf189146-ba58-11eb-b280-2016d8944b85\", \"strategy\": \"politics_test10376"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621617715.050100",
        "client_msg_id": "0e8e4fa8-c478-4bb8-b71f-a9811907e161",
        "text": "Ooops sorry didn't paste very well, but you can see the strategy_name + processid is different!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VIz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ooops sorry didn't paste very well, but you can see the strategy_name + processid is different!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621617727.050300",
        "client_msg_id": "3da7a8d8-2b17-400b-a767-20efa8aca002",
        "text": "So I have something weird going on in a thread I guess somewhere",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3Nx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So I have something weird going on in a thread I guess somewhere"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621619465.050500",
        "client_msg_id": "802C0D61-7094-4D2C-AAC5-83D1FCBE696A",
        "text": "Progress, how are you running this? It seems like two processes are starting somehow ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GS8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Progress, how are you running this? It seems like two processes are starting somehow "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "I suspect the problem occurs in the bit starting at line 157",
        "files": [
            {
                "id": "F022QD9E2HZ",
                "created": 1621624242,
                "timestamp": 1621624242,
                "name": "betfair_flask.py",
                "title": "betfair_flask.py",
                "mimetype": "text\/plain",
                "filetype": "python",
                "pretty_type": "Python",
                "user": "UFTBRB3F1",
                "user_team": "T4G9NBD2M",
                "editable": true,
                "size": 7104,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022QD9E2HZ\/betfair_flask.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T4G9NBD2M-F022QD9E2HZ\/download\/betfair_flask.py?t=xoxe-152328387089-8357743338709-8373272928225-dfe8ebcd8ca3d2f633bcafeb95191840",
                "permalink": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022QD9E2HZ\/betfair_flask.py",
                "permalink_public": "https:\/\/slack-files.com\/T4G9NBD2M-F022QD9E2HZ-879388accb",
                "edit_link": "https:\/\/betcode-org.slack.com\/files\/UFTBRB3F1\/F022QD9E2HZ\/betfair_flask.py\/edit",
                "is_starred": false,
                "has_rich_preview": false,
                "file_access": "visible"
            }
        ],
        "upload": false,
        "user": "UFTBRB3F1",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "riT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I suspect the problem occurs in the bit starting at line 157"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1621624339.050700",
        "edited": {
            "user": "UFTBRB3F1",
            "ts": "1621624348.000000"
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1"
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621624550.051000",
        "client_msg_id": "13B9D244-FB1F-405C-AAC2-B15AE1F474EC",
        "text": "Well you didn’t mention this at the start! You have a lot of code that is executed not in the if name==main",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Zbegz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Well you didn’t mention this at the start! You have a lot of code that is executed not in the if name==main"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621624556.051200",
        "client_msg_id": "09B25A86-06CE-488F-9460-23AA5AFA2DA0",
        "text": "How come?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "D9G\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "How come?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621624578.051400",
        "client_msg_id": "CCDA2B5A-D690-4B11-99B2-97403D9DE72D",
        "text": "Likely to be called on each new process assuming that is what socket io does ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "c2p",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Likely to be called on each new process assuming that is what socket io does "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621624805.051600",
        "client_msg_id": "1c09df34-213b-469f-8966-41dc0268d694",
        "text": "Ah, my understanding of socket io is perhaps a bit rubbish!!!\n\nThe logic behind that is it starts a flask server which runs a page I use as a dashboard.\n\nI thought it was all working nicely until I noticed this double placement issue and had no idea it was essentially running a new process!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "b=4n",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ah, my understanding of socket io is perhaps a bit rubbish!!!\n\nThe logic behind that is it starts a flask server which runs a page I use as a dashboard.\n\nI thought it was all working nicely until I noticed this double placement issue and had no idea it was essentially running a new process!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621624817.051800",
        "client_msg_id": "7ff2bc14-513a-4fbb-b570-9bef235b6498",
        "text": "Hmmm so I may need to come up with a plan B then!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/=CJd",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hmmm so I may need to come up with a plan B then!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621624864.052000",
        "client_msg_id": "a7ff47c5-5559-474b-bbec-2bd60cd3527b",
        "text": "Or if I shift the main bulk of code to the name==main should that be in a single process...I'll try that",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kVc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Or if I shift the main bulk of code to the name==main should that be in a single process...I'll try that"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621624869.052200",
        "client_msg_id": "297036A8-3F55-4917-8975-CD59D82C8B22",
        "text": "Something is starting a new process, just get it all in the if name == main to confirm ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "aeTX+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Something is starting a new process, just get it all in the if name == main to confirm "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621624874.052400",
        "client_msg_id": "DFD9902F-7F21-4141-BC01-AAE999AEDD8E",
        "text": "Yeah",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UNbsG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621624878.052600",
        "client_msg_id": "c22f75a6-568c-464f-b139-f687dff1490e",
        "text": "(it wasn't by design as such, simply me bolting on a new bit to my old code)!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "n4wG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(it wasn't by design as such, simply me bolting on a new bit to my old code)!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621624882.052800",
        "client_msg_id": "17504971-2a14-4bd0-bb09-f3910967e846",
        "text": "Cool will try that!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ViPo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Cool will try that!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621625833.053000",
        "client_msg_id": "405426cd-0997-4e42-a165-6d925109eced",
        "text": "Doesn't appear to make a difference...but to sanity check I ran a version without all the flask stuff and it works as expected...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ha=1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Doesn't appear to make a difference...but to sanity check I ran a version without all the flask stuff and it works as expected..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1621625893.053200",
        "client_msg_id": "D03C83D3-FF3A-4240-9ECD-143F33356306",
        "text": "What’s the code look like? So you have confirmed it is flask causing the issue?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "BhY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What’s the code look like? So you have confirmed it is flask causing the issue?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621626174.053400",
        "client_msg_id": "3157a6fb-c9eb-4c8e-8acc-fc591258470e",
        "text": "```import time\nfrom datetime import timedelta, timezone, datetime\nimport logging\nimport betfairlightweight\nimport argparse\nfrom betfairlightweight.filters import streaming_market_filter\nfrom pythonjsonlogger import jsonlogger\nimport racing_functions as rf\nimport non_streaming_functions as nsf\nfrom flumine import Flumine, clients, BaseStrategy, markets\nimport account_info as ai\nfrom simple_book import simple_book\nfrom flumine.worker import BackgroundWorker\nfrom marketrecorder import MarketRecorder\nfrom flumine.streams.datastream import DataStream\n# from race_card import get_racecard\nfrom price_comparison import get_price_comparison\nfrom terminate import terminate\nfrom cross_market import get_markets\nfrom orders_worker import get_live_orders\nfrom flumine.controls.loggingcontrols import LoggingControl\nglobal snapshot\n\nlogger = logging.getLogger()\n\ncustom_format = \"%(asctime) %(levelname) %(message)\"\nlog_handler = [logging.StreamHandler(), logging.FileHandler(ai.log_folder_path + '\/' + datetime.now().strftime(\"%m-%d-%Y_%H_%M_%S\") + '.log')]\nformatter = jsonlogger.JsonFormatter(custom_format)\nformatter.converter = time.gmtime\n\nfor l in log_handler:\n    l.setFormatter(formatter)\n    logger.addHandler(l)\n# logger.addHandler(log_handler)\nlogger.setLevel(<http:\/\/logging.INFO|logging.INFO>)\n\nrc = rf.open_json(ai.racing_config)\n\nparser = argparse.ArgumentParser()\nparser.add_argument(\"--c\", default=None, type=int, help=\"Conflate messages in ms\")\nparser.add_argument(\"--s\", \"--strategy-list\", nargs='+', default=[])\nparser.add_argument(\"--p\", default=False, type=bool, help=\"Paper or real world trading\")\n\nargs = parser.parse_args()\n\npaper = args.p\n# paper = True\nif paper == True:\n    print('Paper Trading Enabled')\nelse:\n    print('Live Trading Enabled')\n\nmarket_recorder = False\nif market_recorder is True:\n    print('Market Recorder Enabled')\n\nstrategy_names = args.s\nstrategy_names = ['politics_test']\nconflate = args.c\n\nstart_time = datetime.now(timezone.utc)\n\nsettings = [setting for setting in rc if setting['on'] == 'True' and setting['strategy_name'] in strategy_names]\n\ntrading = betfairlightweight.APIClient(ai.accname, ai.accpass, ai.acckey, certs=ai.path)\n# min bet validation temporarily added to stop the min size replace issue\nclient = clients.BetfairClient(trading, paper_trade=paper) #,  min_bet_validation=False)\n\nframework = Flumine(client=client)\n\nfor s in settings:\n    country_codes = s['country_codes'] if nsf.true_or_false(s['country_codes']) != False else None\n    market_types = s['market_types'] if nsf.true_or_false(s['market_types']) != False else None\n    race_types = s['race_types'] if nsf.true_or_false(s['race_types']) != False else None\n    venues_to_include = s['venues_to_include'] if nsf.true_or_false(s['venues_to_include']) != False else None\n    print({'strategy_name': s['strategy_name'], 'strategy_type': s['strategy_type'], 'event_type_ids': s['event_type_ids'],\n           'country_codes': country_codes, 'market_types': market_types, 'race_types': race_types, 'venues': venues_to_include})\n    if s['strategy_type'] == 'simple':\n        strategy = simple_book(start_time=start_time, settings=s,\n            market_filter=streaming_market_filter(\n                event_type_ids=s['event_type_ids'],\n                country_codes=country_codes,\n                market_types=market_types,\n                # market_types=['WIN', 'OTHER_PLACE'],\n                # country_codes=['AU'],\n                # market_types=['WIN','PLACE', 'EACH_WAY'],\n                race_types=race_types,\n                venues=venues_to_include\n\n            ),\n            streaming_timeout=2,\n            max_selection_exposure=s['max_selection_exposure'],\n            max_order_exposure=s['max_order_exposure'],\n            conflate_ms=conflate,\n            name=s['strategy_name'],\n\n        )\n\n        framework.add_strategy(strategy)\n\nworker_settings_list = [\n    {'function_name': 'get_markets', 'function': get_markets, 'func_kwargs': {\"stake\": 2, \"margin\": 0, \"exposure_limit\": 60}, 'interval': 0.25, 'start_delay': 30},\n    {'function_name': 'terminate', 'function': terminate, 'func_kwargs': {\"today_only\": True, \"seconds_closed\": 600}, 'interval': 60, 'start_delay': 60},\n    {'function_name': 'get_price_comparison', 'function': get_price_comparison, 'func_kwargs': None, 'interval': 60 - rf.randomiser(15), 'start_delay': 30},\n    # {'function_name': 'get_live_orders', 'function': get_live_orders, 'func_kwargs': {'snapshot':snapshot}, 'interval': 5, 'start_delay': 30},\n    # {'function_name': 'get_racecard', 'function_name': get_racecard,'func_kwargs': {\"event_type_ids\": 7, 'market_types': 'WIN', 'source': 'Racecard'}, 'interval': 30, 'start_delay': 30}\n]\n\nfor f in rf.get_worker_functions(settings):\n    function_setting = [ws for ws in worker_settings_list if str(ws['function_name']) == f['function_name']]\n    if len(function_setting) &gt; 0:\n        function_setting = function_setting[0]\n        print(f, function_setting)\n        framework.add_worker(\n            BackgroundWorker(\n                framework,\n                function_setting['function'],\n                func_kwargs=function_setting['func_kwargs'],\n                interval=function_setting['interval'],\n                start_delay=function_setting['start_delay']\n            ))\n\nif market_recorder is True:\n    recorder = MarketRecorder(\n        name=\"WIN\",\n        market_filter=streaming_market_filter(\n                event_type_ids=[7],\n                country_codes=['GB','IE','US','CA'],\n                market_types=['WIN','PLACE'],\n            ),\n        stream_class=DataStream,\n        context={\n            \"local_dir\": ai.unprocessed_data,\n            \"bucket\": \"fluminetest\",\n            \"force_update\": False,\n            \"remove_file\": True,\n        },\n    )\n\n    framework.add_strategy(recorder)\n\nframework.run()```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ULfg",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "import time\nfrom datetime import timedelta, timezone, datetime\nimport logging\nimport betfairlightweight\nimport argparse\nfrom betfairlightweight.filters import streaming_market_filter\nfrom pythonjsonlogger import jsonlogger\nimport racing_functions as rf\nimport non_streaming_functions as nsf\nfrom flumine import Flumine, clients, BaseStrategy, markets\nimport account_info as ai\nfrom simple_book import simple_book\nfrom flumine.worker import BackgroundWorker\nfrom marketrecorder import MarketRecorder\nfrom flumine.streams.datastream import DataStream\n# from race_card import get_racecard\nfrom price_comparison import get_price_comparison\nfrom terminate import terminate\nfrom cross_market import get_markets\nfrom orders_worker import get_live_orders\nfrom flumine.controls.loggingcontrols import LoggingControl\nglobal snapshot\n\nlogger = logging.getLogger()\n\ncustom_format = \"%(asctime) %(levelname) %(message)\"\nlog_handler = [logging.StreamHandler(), logging.FileHandler(ai.log_folder_path + '\/' + datetime.now().strftime(\"%m-%d-%Y_%H_%M_%S\") + '.log')]\nformatter = jsonlogger.JsonFormatter(custom_format)\nformatter.converter = time.gmtime\n\nfor l in log_handler:\n    l.setFormatter(formatter)\n    logger.addHandler(l)\n# logger.addHandler(log_handler)\nlogger.setLevel(logging.INFO)\n\nrc = rf.open_json(ai.racing_config)\n\nparser = argparse.ArgumentParser()\nparser.add_argument(\"--c\", default=None, type=int, help=\"Conflate messages in ms\")\nparser.add_argument(\"--s\", \"--strategy-list\", nargs='+', default=[])\nparser.add_argument(\"--p\", default=False, type=bool, help=\"Paper or real world trading\")\n\nargs = parser.parse_args()\n\npaper = args.p\n# paper = True\nif paper == True:\n    print('Paper Trading Enabled')\nelse:\n    print('Live Trading Enabled')\n\nmarket_recorder = False\nif market_recorder is True:\n    print('Market Recorder Enabled')\n\nstrategy_names = args.s\nstrategy_names = ['politics_test']\nconflate = args.c\n\nstart_time = datetime.now(timezone.utc)\n\nsettings = [setting for setting in rc if setting['on'] == 'True' and setting['strategy_name'] in strategy_names]\n\ntrading = betfairlightweight.APIClient(ai.accname, ai.accpass, ai.acckey, certs=ai.path)\n# min bet validation temporarily added to stop the min size replace issue\nclient = clients.BetfairClient(trading, paper_trade=paper) #,  min_bet_validation=False)\n\nframework = Flumine(client=client)\n\nfor s in settings:\n    country_codes = s['country_codes'] if nsf.true_or_false(s['country_codes']) != False else None\n    market_types = s['market_types'] if nsf.true_or_false(s['market_types']) != False else None\n    race_types = s['race_types'] if nsf.true_or_false(s['race_types']) != False else None\n    venues_to_include = s['venues_to_include'] if nsf.true_or_false(s['venues_to_include']) != False else None\n    print({'strategy_name': s['strategy_name'], 'strategy_type': s['strategy_type'], 'event_type_ids': s['event_type_ids'],\n           'country_codes': country_codes, 'market_types': market_types, 'race_types': race_types, 'venues': venues_to_include})\n    if s['strategy_type'] == 'simple':\n        strategy = simple_book(start_time=start_time, settings=s,\n            market_filter=streaming_market_filter(\n                event_type_ids=s['event_type_ids'],\n                country_codes=country_codes,\n                market_types=market_types,\n                # market_types=['WIN', 'OTHER_PLACE'],\n                # country_codes=['AU'],\n                # market_types=['WIN','PLACE', 'EACH_WAY'],\n                race_types=race_types,\n                venues=venues_to_include\n\n            ),\n            streaming_timeout=2,\n            max_selection_exposure=s['max_selection_exposure'],\n            max_order_exposure=s['max_order_exposure'],\n            conflate_ms=conflate,\n            name=s['strategy_name'],\n\n        )\n\n        framework.add_strategy(strategy)\n\nworker_settings_list = [\n    {'function_name': 'get_markets', 'function': get_markets, 'func_kwargs': {\"stake\": 2, \"margin\": 0, \"exposure_limit\": 60}, 'interval': 0.25, 'start_delay': 30},\n    {'function_name': 'terminate', 'function': terminate, 'func_kwargs': {\"today_only\": True, \"seconds_closed\": 600}, 'interval': 60, 'start_delay': 60},\n    {'function_name': 'get_price_comparison', 'function': get_price_comparison, 'func_kwargs': None, 'interval': 60 - rf.randomiser(15), 'start_delay': 30},\n    # {'function_name': 'get_live_orders', 'function': get_live_orders, 'func_kwargs': {'snapshot':snapshot}, 'interval': 5, 'start_delay': 30},\n    # {'function_name': 'get_racecard', 'function_name': get_racecard,'func_kwargs': {\"event_type_ids\": 7, 'market_types': 'WIN', 'source': 'Racecard'}, 'interval': 30, 'start_delay': 30}\n]\n\nfor f in rf.get_worker_functions(settings):\n    function_setting = [ws for ws in worker_settings_list if str(ws['function_name']) == f['function_name']]\n    if len(function_setting) > 0:\n        function_setting = function_setting[0]\n        print(f, function_setting)\n        framework.add_worker(\n            BackgroundWorker(\n                framework,\n                function_setting['function'],\n                func_kwargs=function_setting['func_kwargs'],\n                interval=function_setting['interval'],\n                start_delay=function_setting['start_delay']\n            ))\n\nif market_recorder is True:\n    recorder = MarketRecorder(\n        name=\"WIN\",\n        market_filter=streaming_market_filter(\n                event_type_ids=[7],\n                country_codes=['GB','IE','US','CA'],\n                market_types=['WIN','PLACE'],\n            ),\n        stream_class=DataStream,\n        context={\n            \"local_dir\": ai.unprocessed_data,\n            \"bucket\": \"fluminetest\",\n            \"force_update\": False,\n            \"remove_file\": True,\n        },\n    )\n\n    framework.add_strategy(recorder)\n\nframework.run()"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1621626195.053600",
        "client_msg_id": "b51b2b18-d6fe-44d0-99b8-883fe23b595b",
        "text": "With that code (i.e. no flask at all and no additional threading etc) it works fine, can't replicate the issue.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1621528734.022300",
        "parent_user_id": "UFTBRB3F1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CmC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "With that code (i.e. no flask at all and no additional threading etc) it works fine, can't replicate the issue."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]