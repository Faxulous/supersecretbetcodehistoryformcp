[
    {
        "user": "UE72WCRR8",
        "type": "message",
        "ts": "1600262757.089100",
        "client_msg_id": "7c7f2ff7-3566-4a41-aeed-d92327b2292b",
        "text": "I am trying to find the memory leak with tracemalloc from the std lib. I run coarse order and market stream for like 1500 markets. After a few hours the python process uses 900gb in ram. This is the tracemalloc output sorted by memory used :\n\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/streaming\/listener.py:105: size=16.6 MiB, count=274719, average=63 B\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/streaming\/cache.py:346: size=15.6 MiB, count=51110, average=320 B\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/resources\/bettingresources.py:651: size=10.7 MiB, count=55851, average=200 B\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/streaming\/cache.py:36: size=6651 KiB, count=63150, average=108 B\n\nThat does not add up to 900gb. What am I missing? Anybody has a best practice how to do this?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "7872271afbd5",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-09-18\/751973528338_7872271afbd5e88918d9_72.jpg",
            "first_name": "",
            "real_name": "John",
            "display_name": "jhaa",
            "team": "T4G9NBD2M",
            "name": "jhaa",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vX1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I am trying to find the memory leak with tracemalloc from the std lib. I run coarse order and market stream for like 1500 markets. After a few hours the python process uses 900gb in ram. This is the tracemalloc output sorted by memory used :\n\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/streaming\/listener.py:105: size=16.6 MiB, count=274719, average=63 B\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/streaming\/cache.py:346: size=15.6 MiB, count=51110, average=320 B\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/resources\/bettingresources.py:651: size=10.7 MiB, count=55851, average=200 B\n\/home\/code\/PycharmProjects\/venv\/lib\/python3.8\/site-packages\/betfairlightweight\/streaming\/cache.py:36: size=6651 KiB, count=63150, average=108 B\n\nThat does not add up to 900gb. What am I missing? Anybody has a best practice how to do this?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UE72WCRR8",
        "type": "message",
        "ts": "1600262807.089800",
        "client_msg_id": "9f6446e7-36bc-4b2e-b871-687a0433b16e",
        "text": "I am likely missing something that is not in bflw but in my own code",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "7872271afbd5",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-09-18\/751973528338_7872271afbd5e88918d9_72.jpg",
            "first_name": "",
            "real_name": "John",
            "display_name": "jhaa",
            "team": "T4G9NBD2M",
            "name": "jhaa",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NXC0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I am likely missing something that is not in bflw but in my own code"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1600262812.089900",
        "client_msg_id": "2038bcdf-bba3-46ed-a9c1-1a1119c3bb4a",
        "text": "900gb?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VuT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "900gb?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UE72WCRR8",
        "type": "message",
        "ts": "1600262818.090100",
        "client_msg_id": "520c4eeb-f3bb-48ac-ac2e-7eff8931ba01",
        "text": "sorry mb",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "7872271afbd5",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-09-18\/751973528338_7872271afbd5e88918d9_72.jpg",
            "first_name": "",
            "real_name": "John",
            "display_name": "jhaa",
            "team": "T4G9NBD2M",
            "name": "jhaa",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "D99",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "sorry mb"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UE72WCRR8",
        "type": "message",
        "ts": "1600262833.090300",
        "client_msg_id": "a5397a37-4652-4e5d-9114-428ee8d41c1b",
        "text": "just under a gigabyte",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "7872271afbd5",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-09-18\/751973528338_7872271afbd5e88918d9_72.jpg",
            "first_name": "",
            "real_name": "John",
            "display_name": "jhaa",
            "team": "T4G9NBD2M",
            "name": "jhaa",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ux46",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "just under a gigabyte"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1600262907.090900",
        "client_msg_id": "de6c43e0-5ba6-4b51-be01-7bf15ce5d265",
        "text": "you shouldn't get that with just bflw, I would try without your code to try and isolate",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pec",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "you shouldn't get that with just bflw, I would try without your code to try and isolate"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1600262925.091300",
        "client_msg_id": "e7f396b9-828a-4413-9a69-f0cbdc2cd2cf",
        "text": "I like to use <https:\/\/pypi.org\/project\/memory-profiler\/> as you can graph it",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "service_name": "PyPI",
                "title": "memory-profiler",
                "title_link": "https:\/\/pypi.org\/project\/memory-profiler\/",
                "text": "A module for monitoring memory usage of a python program",
                "fallback": "PyPI: memory-profiler",
                "image_url": "https:\/\/pypi.org\/static\/images\/twitter.90915068.jpg",
                "from_url": "https:\/\/pypi.org\/project\/memory-profiler\/",
                "image_width": 250,
                "image_height": 250,
                "image_bytes": 13245,
                "service_icon": "https:\/\/pypi.org\/static\/images\/favicon.6a76275d.ico",
                "id": 1,
                "original_url": "https:\/\/pypi.org\/project\/memory-profiler\/"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=Uy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I like to use "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/pypi.org\/project\/memory-profiler\/"
                            },
                            {
                                "type": "text",
                                "text": " as you can graph it"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UE72WCRR8",
        "type": "message",
        "ts": "1600262945.091600",
        "client_msg_id": "9fbbc190-3099-4c55-b4e4-1800899bb689",
        "text": "thanks, i will lokk into that",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "7872271afbd5",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-09-18\/751973528338_7872271afbd5e88918d9_72.jpg",
            "first_name": "",
            "real_name": "John",
            "display_name": "jhaa",
            "team": "T4G9NBD2M",
            "name": "jhaa",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ViSWE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thanks, i will lokk into that"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1600263050.092300",
        "client_msg_id": "48c6dffb-86a6-4398-b0c7-9420dcd4c4d5",
        "text": "and yeah tracemalloc has never made any sense to me, I believe the majority of the ram usage is from the tracing itself",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PEv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "and yeah tracemalloc has never made any sense to me, I believe the majority of the ram usage is from the tracing itself"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1600288867.098600",
        "client_msg_id": "051441c3-b336-495a-a660-a27edd6aec2b",
        "text": "What's the best way to post a code diff here?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "r4Uf",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What's the best way to post a code diff here?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0198BFR9GR",
        "type": "message",
        "ts": "1600289025.100600",
        "client_msg_id": "e4f98d29-1491-435a-a46f-8fbcfe17ce49",
        "text": "Hey guys -\n\nI just had an error that originated from there being an order with status EXECUTION_COMPLETE in the market.blotter.live_orders object. My rough expectation was that the only orders I would see in the market.blotter.live_orders object would have a pending status (PENDING, CANCELLING, UPDATING, REPLACING) or the EXECUTABLE status.\n\nAre my expectations wrong here (execution_complete is a valid status for an order in the live_orders object)? Or, was this error a timing \/ race condition issue that I should be accounting for (i.e. I tried to use the live_orders object before the order could be removed from the live orders object)?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "f51a11a92c59",
            "image_72": "https:\/\/avatars.slack-edge.com\/2020-08-19\/1311796831155_f51a11a92c590d48d96c_72.png",
            "first_name": "Christopher",
            "real_name": "Christopher",
            "display_name": "Chris",
            "team": "T4G9NBD2M",
            "name": "christopherlanctot",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kjuN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hey guys -\n\nI just had an error that originated from there being an order with status EXECUTION_COMPLETE in the market.blotter.live_orders object. My rough expectation was that the only orders I would see in the market.blotter.live_orders object would have a pending status (PENDING, CANCELLING, UPDATING, REPLACING) or the EXECUTABLE status.\n\nAre my expectations wrong here (execution_complete is a valid status for an order in the live_orders object)? Or, was this error a timing \/ race condition issue that I should be accounting for (i.e. I tried to use the live_orders object before the order could be removed from the live orders object)?"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]