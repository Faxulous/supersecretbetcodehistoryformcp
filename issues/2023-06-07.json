[
    {
        "user": "U042NB80A1X",
        "type": "message",
        "ts": "1686133962.756019",
        "edited": {
            "user": "U042NB80A1X",
            "ts": "1686133987.000000"
        },
        "client_msg_id": "89734abc-19bf-481c-a45b-76daf0e47540",
        "text": "I'm having a nightmare of a time trying to use RaceCards; I want to call them to get results, bsp, market data e.t.c. - Wouldnt mind seeing the full functionality; there is something there that even has form related data (I presume it's not available for Australian horse racing?).\n\nI've spun myself around enough times to not really know what to try next.\n\n```def get_race_results(race_card: RaceCard, market_ids: List[str]):\n    logging.debug(f\"Getting race card for market_ids: {market_ids}\")\n    try:\n        racecards = race_card.get_race_card(market_ids, data_entries=\"RACE\")\n        race_results = race_card.get_race_result(market_ids)\n        print(f\"race results are {race_results}\")\n        logging.debug(f\"Received race card data: {racecards}\")\n    except Exception as e:\n        logging.error(f\"Failed to get race card data: {e}\")\n        return []\n\n    result = []\n    for race in racecards:\n        logging.debug(f\"Processing race: {race['raceName']}\")\n        for runner in race['runners']:\n            runner_data = {\n                \"Market ID\": race['marketId'],\n                \"Race Name\": race['raceName'],\n                \"Race Time\": race['raceTime'],\n                \"Runners\": race['numberOfRunners'],\n                \"Distance\": race['distance'],\n                \"Runner Name\": runner['runnerName'],\n                \"Runner ID\": runner['selectionId'],\n                \"Starting Price\": runner['sp'],\n                \"Final Position\": runner['finishingPosition'],\n                \"In-Play High Price\": runner['inPlayHighPrice'],\n                \"BSP\": runner['bsp'],\n            }\n            result.append(runner_data)\n            logging.debug(f\"Processing runner_data: {runner_data}\")\n\n    return result\n\ndef get_results(trading):\n    date_str = datetime.date.today().strftime(\"%d-%m-%Y\")\n    file_path = f'data\/market_trade_data\/market_trade_data_{date_str}.pkl'\n    market_trade_data = pd.read_pickle(file_path)\n    logging.debug(f\"Market trade data: {market_trade_data}\")\n    market_ids = refresh_market_ids(market_trade_data)\n\n    race_card = trading.RaceCard.login()\n    try:\n        trading.race_card.login()\n        print(\"Logged in successfully.\")\n    except Exception as e:\n        print(f\"Failed to log in: {e}\")\n\n    all_results = []\n    for market_id in market_ids:\n        logging.debug(f\"Getting race results for market_id: {market_id}\")\n        all_results.extend(get_race_results(race_card, [market_id]))\n\n    df_results = pd.DataFrame(all_results)\n    df_results.to_csv(f\"data\/race_results\/race_results_{date_str}.csv\", index=False)\n    logging.debug(f\"Saved race results to 'data\/race_results\/race_results_{date_str}.csv'\")```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3ab37102618",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3ab37102618df1ba57a0e6b5c8538c66.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Tom",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tkuhnau",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686133962.756019",
        "reply_count": 10,
        "reply_users_count": 5,
        "latest_reply": "1686717333.669809",
        "reply_users": [
            "U4H19D1D2",
            "UBS7QANF3",
            "U042NB80A1X",
            "U01FJPFQPML",
            "U04J6LUGCFM"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1686134252.048889"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1686137125.229289"
            },
            {
                "user": "U042NB80A1X",
                "ts": "1686172760.544379"
            },
            {
                "user": "U042NB80A1X",
                "ts": "1686173141.165469"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1686221321.236499"
            },
            {
                "user": "U01FJPFQPML",
                "ts": "1686382413.860789"
            },
            {
                "user": "U042NB80A1X",
                "ts": "1686608442.166209"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1686632052.109769"
            },
            {
                "user": "U04J6LUGCFM",
                "ts": "1686694022.724979"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1686717333.669809"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1686717333.669809",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "o=RP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm having a nightmare of a time trying to use RaceCards; I want to call them to get results, bsp, market data e.t.c. - Wouldnt mind seeing the full functionality; there is something there that even has form related data (I presume it's not available for Australian horse racing?).\n\nI've spun myself around enough times to not really know what to try next.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def get_race_results(race_card: RaceCard, market_ids: List[str]):\n    logging.debug(f\"Getting race card for market_ids: {market_ids}\")\n    try:\n        racecards = race_card.get_race_card(market_ids, data_entries=\"RACE\")\n        race_results = race_card.get_race_result(market_ids)\n        print(f\"race results are {race_results}\")\n        logging.debug(f\"Received race card data: {racecards}\")\n    except Exception as e:\n        logging.error(f\"Failed to get race card data: {e}\")\n        return []\n\n    result = []\n    for race in racecards:\n        logging.debug(f\"Processing race: {race['raceName']}\")\n        for runner in race['runners']:\n            runner_data = {\n                \"Market ID\": race['marketId'],\n                \"Race Name\": race['raceName'],\n                \"Race Time\": race['raceTime'],\n                \"Runners\": race['numberOfRunners'],\n                \"Distance\": race['distance'],\n                \"Runner Name\": runner['runnerName'],\n                \"Runner ID\": runner['selectionId'],\n                \"Starting Price\": runner['sp'],\n                \"Final Position\": runner['finishingPosition'],\n                \"In-Play High Price\": runner['inPlayHighPrice'],\n                \"BSP\": runner['bsp'],\n            }\n            result.append(runner_data)\n            logging.debug(f\"Processing runner_data: {runner_data}\")\n\n    return result\n\ndef get_results(trading):\n    date_str = datetime.date.today().strftime(\"%d-%m-%Y\")\n    file_path = f'data\/market_trade_data\/market_trade_data_{date_str}.pkl'\n    market_trade_data = pd.read_pickle(file_path)\n    logging.debug(f\"Market trade data: {market_trade_data}\")\n    market_ids = refresh_market_ids(market_trade_data)\n\n    race_card = trading.RaceCard.login()\n    try:\n        trading.race_card.login()\n        print(\"Logged in successfully.\")\n    except Exception as e:\n        print(f\"Failed to log in: {e}\")\n\n    all_results = []\n    for market_id in market_ids:\n        logging.debug(f\"Getting race results for market_id: {market_id}\")\n        all_results.extend(get_race_results(race_card, [market_id]))\n\n    df_results = pd.DataFrame(all_results)\n    df_results.to_csv(f\"data\/race_results\/race_results_{date_str}.csv\", index=False)\n    logging.debug(f\"Saved race results to 'data\/race_results\/race_results_{date_str}.csv'\")"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1686134252.048889",
        "client_msg_id": "a723c589-f8b9-4ab3-ad91-2d678beb7f5d",
        "text": "So whats the question?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686133962.756019",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dhF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So whats the question?"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "heavy_plus_sign",
                "users": [
                    "UBS7QANF3"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1686137125.229289",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1686137131.000000"
        },
        "client_msg_id": "445e321a-6ec5-4c8f-903b-2c5a24f5209a",
        "text": "I'm going to take a punt on this one and say: race cards aren't available for Australian races",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686133962.756019",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KrpZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm going to take a punt on this one and say: race cards aren't available for Australian races"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U042NB80A1X",
        "type": "message",
        "ts": "1686172760.544379",
        "client_msg_id": "8da60dff-f385-4cf5-8cc1-4d851dfa98b4",
        "text": "Yeah it's not working, returning nothing e.t.c. Is there another way to get the data?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3ab37102618",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3ab37102618df1ba57a0e6b5c8538c66.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Tom",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tkuhnau",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686133962.756019",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Uersn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah it's not working, returning nothing e.t.c. Is there another way to get the data?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U042NB80A1X",
        "type": "message",
        "ts": "1686173141.165469",
        "edited": {
            "user": "U042NB80A1X",
            "ts": "1686179013.000000"
        },
        "client_msg_id": "a8bf1928-1202-44c5-ad75-6448fa620ca2",
        "text": "Looks like I can just use RunnerBook for some of what I'm after (update: may be a fail on this, after races have finished) - anybody have an idea of how long that info is available post-race?\n\nI'd also be after the results - it all seems like stuff that must be super simple and I just can't get to it anywhere.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3ab37102618",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3ab37102618df1ba57a0e6b5c8538c66.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png",
            "first_name": "Tom",
            "real_name": "Tom",
            "display_name": "Tom",
            "team": "T4G9NBD2M",
            "name": "tkuhnau",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686133962.756019",
        "parent_user_id": "U042NB80A1X",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "OoL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Looks like I can just use RunnerBook for some of what I'm after (update: may be a fail on this, after races have finished) - anybody have an idea of how long that info is available post-race?\n\nI'd also be after the results - it all seems like stuff that must be super simple and I just can't get to it anywhere."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]