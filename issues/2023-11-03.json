[
    {
        "user": "U02RN7YDRQ9",
        "type": "message",
        "ts": "1699019660.357829",
        "edited": {
            "user": "U02RN7YDRQ9",
            "ts": "1699021193.000000"
        },
        "client_msg_id": "7c4874cc-f03f-40cf-afc3-ee72a97040b7",
        "text": "In `simulatedorder.py:_process_sp()` there can be occasions when `actual_sp` is in `'None','NaN','Infinity'` (last 2 are as per BF docs - think I've found `None` before since have something in my code testing that). Currently my backtest logs show an exception thrown `File \"C:\\\\...\\\\flumine\\\\simulation\\\\simulatedorder.py\", line 391, in _process_sp\\n    size = round(remaining_risk \/ (actual_sp - 1.0), 2)\\nTypeError: unsupported operand type(s) for -: 'str' and 'float'\"` Have a sample recorded file with 'Nan' if would help ?\n\nEDIT: raised a git issue for this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "ge46f1f8b708",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/e46f1f8b708a630e3191de7b2c42b1d1.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0023-72.png",
            "first_name": "edblock",
            "real_name": "edblock",
            "display_name": "foxwood",
            "team": "T4G9NBD2M",
            "name": "eanb",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699019660.357829",
        "reply_count": 9,
        "reply_users_count": 2,
        "latest_reply": "1699380698.271839",
        "reply_users": [
            "U4H19D1D2",
            "U02RN7YDRQ9"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1699026814.283219"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1699027981.418009"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1699055296.980669"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1699347667.406429"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1699347733.599129"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1699349352.992899"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1699379708.090999"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1699380056.287739"
            },
            {
                "user": "U02RN7YDRQ9",
                "ts": "1699380698.271839"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1699380698.271839",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gwiOI",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "In "
                            },
                            {
                                "type": "text",
                                "text": "simulatedorder.py:_process_sp()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " there can be occasions when "
                            },
                            {
                                "type": "text",
                                "text": "actual_sp ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "is in"
                            },
                            {
                                "type": "text",
                                "text": " 'None','NaN','Infinity'",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " (last 2 are as per BF docs - think I've found "
                            },
                            {
                                "type": "text",
                                "text": "None ",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "before since have something in my code testing that). Currently my backtest logs show an exception thrown "
                            },
                            {
                                "type": "text",
                                "text": "File \"C:\\\\...\\\\flumine\\\\simulation\\\\simulatedorder.py\", line 391, in _process_sp\\n    size = round(remaining_risk \/ (actual_sp - 1.0), 2)\\nTypeError: unsupported operand type(s) for -: 'str' and 'float'\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " Have a sample recorded file with 'Nan' if would help ?\n\nEDIT: raised a git issue for this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1699026814.283219",
        "client_msg_id": "59fe5d02-ab67-47db-93dc-fb6c3484c1ee",
        "text": "Thanks for raising, we have a <https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/utils.py#L168|function> for this so not sure why I haven't used it \/ why this hasn't been raised before :thinking_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699019660.357829",
        "parent_user_id": "U02RN7YDRQ9",
        "attachments": [
            {
                "id": 1,
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/utils.py#L168",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/utils.py | utils.py>",
                "text": "```\ndef get_sp(runner: RunnerBook) -> Optional[float]:\n```",
                "title": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/utils.py | utils.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "74wai",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks for raising, we have a "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/utils.py#L168",
                                "text": "function"
                            },
                            {
                                "type": "text",
                                "text": " for this so not sure why I haven't used it \/ why this hasn't been raised before "
                            },
                            {
                                "type": "emoji",
                                "name": "thinking_face",
                                "unicode": "1f914"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1699027981.418009",
        "client_msg_id": "21f09aea-93f4-4764-99a0-30f107f469aa",
        "text": "Can you share the file so I can test <https:\/\/github.com\/betcode-org\/flumine\/commit\/0aa53dd45b6555a994b91b2938423f79b5b343df|this>?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1699019660.357829",
        "parent_user_id": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "M0hRE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Can you share the file so I can test "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/commit\/0aa53dd45b6555a994b91b2938423f79b5b343df",
                                "text": "this"
                            },
                            {
                                "type": "text",
                                "text": "?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "First time I've encountered it so must be fairly rare - Harlow 20:54 29\/10\/23 attached. Despite docs looks like no runner was `REMOVED`\n\nWith regard to the util function it should also cope with `'Infinity'`  (which I have encountered) as per BF \"Starting Prices\" section at <https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Betting+Type+Definitions>",
        "files": [
            {
                "id": "F0645JYEFNH",
                "mode": "hidden_by_limit"
            },
            {
                "id": "F0641TCV4R4",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "U02RN7YDRQ9",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "MMBDq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "First time I've encountered it so must be fairly rare - Harlow 20:54 29\/10\/23 attached. Despite docs looks like no runner was "
                            },
                            {
                                "type": "text",
                                "text": "REMOVED",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\nWith regard to the util function it should also cope with "
                            },
                            {
                                "type": "text",
                                "text": "'Infinity'",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  (which I have encountered) as per BF \"Starting Prices\" section at "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Betting+Type+Definitions"
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1699055296.980669",
        "client_msg_id": "b06ee7f1-f4c4-4fda-98d4-68fe39fdc2e1",
        "thread_ts": "1699019660.357829",
        "parent_user_id": "U02RN7YDRQ9"
    }
]