[
    {
        "user": "U04J6LUGCFM",
        "type": "message",
        "ts": "1689292008.337699",
        "edited": {
            "user": "U04J6LUGCFM",
            "ts": "1689393701.000000"
        },
        "client_msg_id": "B76CD7F5-F871-43D5-B504-56C8AB00EA95",
        "text": "<@U4H19D1D2>  the problem came back overnight…\n\nI was previously getting this error 100% of the time within a minute when I tried to get all horses and dogs win and place for AU racing.\n\n• After my live key was pumped up to 1k markets, the problem seemingly went away instantly and stayed away for ~14 hours. \n• Last night it came back. There were a lot of horse racing markets on site at the time (more than I’d probably ever received before). All of Fridays thoroughbred and trots meetings (15 meetings) and 5 of Saturdays thoroughbred already. But no greyhound racing at all as they hadn’t been loaded yet for the next day. This is the part that perplexes me. \n• I think it’s clear that whatever was done to pimp my API key the previous day had some desirable effect but in saying that, I wasn’t near 1k markets when the crash happened….\n\nNow betfair have come back with the following:\n\n\nHi Andy,\n\nI checked with the UK API team and got the response below overnight. Sounds like the issue is related to the socket handling outlined in this GitHub issue thread - <https:\/\/github.com\/betcode-org\/betfair\/issues\/11|https:\/\/github.com\/betcode-org\/betfair\/issues\/11>\n\nIf you could check those settings and see if it resolves the issue.\n\nUK Response\n\nA TIMEOUT error on a subscription request has a clear root cause – this is indicated by the error description and in our docs (\":\"Connection isnot subscribed and is idle: 15000 ms)  (see <https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Exchange+Stream+API#ExchangeStreamAPI-TCP\/SSLConnection|https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Exchange+Stream+API#ExchangeStreamAPI-TCP\/SSLConnection>)\n\nAvoiding TIMEOUT on connection\nOnce you have established a connection you should send a message within 15 seconds to avoid receiving a TIMEOUT error\n\nStrange that he would receive this error in any other circumstances though, so yes, it could be related to socket handling as mentioned in that github issue thread.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "89086bbff64a",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-01-10\/4604281940487_89086bbff64aee88bfe0_72.png",
            "first_name": "Andy",
            "real_name": "Andy",
            "display_name": "Andy",
            "team": "T4G9NBD2M",
            "name": "andreworourke84",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1688821380.058179",
        "parent_user_id": "U04J6LUGCFM",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "ts": 1475655469,
                "color": "cb2431",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/betfair\/issues\/11",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "#11 [Help may not issue]Connection is not subscribed and is idle",
                "text": "Hi,\n\nThanks for your library.\n\nIm facing some issues with streaming only, the rest working just fine ! (great work though)\n\nI tried this\n\n`betfair_socket = trading.streaming.create_stream(unique_id=1) betfair_socket.start(async=False) betfair_socket.authenticate() betfair_socket.subscribe_to_markets(market_filter={'eventTypeIds':['1'], 'inPlayOnly': True, 'marketTypes':[\"MATCH_ODDS\"]}, market_data_filter={'fields': ['EX_BEST_OFFERS']})`\n\nand I'm ending up with this result:\n\n`1 {\"op\":\"connection\",\"connectionId\":\"006-051016081016-209520\"}\n\nNone {\"op\":\"status\",\"statusCode\":\"FAILURE\",\"errorCode\":\"TIMEOUT\",\"errorMessage\":\"Connection is not subscribed and is idle: 15000 ms\",\"connectionClosed\":true,\"connectionId\":\"006-051016081016-209520\"}  \n`\n\nAny help pls where im messing up ?\n\nOnce more thanks again for your effort.\n\nRegards",
                "title": "#11 [Help may not issue]Connection is not subscribed and is idle",
                "title_link": "https:\/\/github.com\/betcode-org\/betfair\/issues\/11",
                "footer": "<https:\/\/github.com\/betcode-org\/betfair|betcode-org\/betfair>",
                "fields": [
                    {
                        "value": "3",
                        "title": "Comments",
                        "short": true
                    }
                ],
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "56w",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": "  the problem came back overnight…\n\nI was previously getting this error 100% of the time within a minute when I tried to get all horses and dogs win and place for AU racing.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "After my live key was pumped up to 1k markets, the problem seemingly went away instantly and stayed away for ~14 hours. "
                                    }
                                ]
                            }
                        ],
                        "style": "bullet",
                        "indent": 0,
                        "offset": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "Last night it came back. There were a lot of horse racing markets on site at the time (more than I’d probably ever received before). All of Fridays thoroughbred and trots meetings (15 meetings) and 5 of Saturdays thoroughbred already. But no greyhound racing at all as they hadn’t been loaded yet for the next day. This is the part that perplexes me. "
                                    }
                                ]
                            }
                        ],
                        "style": "bullet",
                        "indent": 0,
                        "offset": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_list",
                        "elements": [
                            {
                                "type": "rich_text_section",
                                "elements": [
                                    {
                                        "type": "text",
                                        "text": "I think it’s clear that whatever was done to pimp my API key the previous day had some desirable effect but in saying that, I wasn’t near 1k markets when the crash happened…."
                                    }
                                ]
                            }
                        ],
                        "style": "bullet",
                        "indent": 0,
                        "offset": 0,
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nNow betfair have come back with the following:\n\n\nHi Andy,\n\nI checked with the UK API team and got the response below overnight. Sounds like the issue is related to the socket handling outlined in this GitHub issue thread - "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/betfair\/issues\/11",
                                "text": "https:\/\/github.com\/betcode-org\/betfair\/issues\/11"
                            },
                            {
                                "type": "text",
                                "text": "\n\nIf you could check those settings and see if it resolves the issue.\n\nUK Response\n\nA TIMEOUT error on a subscription request has a clear root cause – this is indicated by the error description and in our docs (\":\"Connection isnot subscribed and is idle: 15000 ms)  (see "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Exchange+Stream+API#ExchangeStreamAPI-TCP\/SSLConnection",
                                "text": "https:\/\/docs.developer.betfair.com\/display\/1smk3cen4v3lu3yomq5qye0ni\/Exchange+Stream+API#ExchangeStreamAPI-TCP\/SSLConnection"
                            },
                            {
                                "type": "text",
                                "text": ")\n\nAvoiding TIMEOUT on connection\nOnce you have established a connection you should send a message within 15 seconds to avoid receiving a TIMEOUT error\n\nStrange that he would receive this error in any other circumstances though, so yes, it could be related to socket handling as mentioned in that github issue thread."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04J6LUGCFM",
        "type": "message",
        "ts": "1689292108.245129",
        "client_msg_id": "4BB48F01-5416-4F00-B369-D43CE2D9C0D7",
        "text": "Can you comment on the async=true part? I saw this post and checked into this. I can see this forum post is 7 years ago. I couldn’t see async=true as a parameter option anymore. I also am using a separate thread in my code so don’t think it could even apply?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "89086bbff64a",
            "image_72": "https:\/\/avatars.slack-edge.com\/2023-01-10\/4604281940487_89086bbff64aee88bfe0_72.png",
            "first_name": "Andy",
            "real_name": "Andy",
            "display_name": "Andy",
            "team": "T4G9NBD2M",
            "name": "andreworourke84",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1688821380.058179",
        "parent_user_id": "U04J6LUGCFM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QK4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Can you comment on the async=true part? I saw this post and checked into this. I can see this forum post is 7 years ago. I "
                            },
                            {
                                "type": "text",
                                "text": "couldn’t"
                            },
                            {
                                "type": "text",
                                "text": " see async=true as a parameter option anymore. I also am using a separate thread in my code so "
                            },
                            {
                                "type": "text",
                                "text": "don’t"
                            },
                            {
                                "type": "text",
                                "text": " think it could even apply?"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]