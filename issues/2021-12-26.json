[
    {
        "subtype": "channel_join",
        "user": "U02RZ7EPLRG",
        "text": "<@U02RZ7EPLRG> has joined the channel",
        "type": "message",
        "ts": "1640516261.347800"
    },
    {
        "subtype": "channel_join",
        "user": "U02SP873KNC",
        "text": "<@U02SP873KNC> has joined the channel",
        "type": "message",
        "ts": "1640539297.348000"
    },
    {
        "user": "U02CYRC190R",
        "type": "message",
        "ts": "1640556660.349000",
        "client_msg_id": "be1756a6-364e-4c5d-8938-6e91667115aa",
        "text": "Follow up question on the above LoggingControl — is there any obvious reason why I’d be ending up with duplicates in my db from this code?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1eb70ee9874",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1eb70ee9874cc4b2e32a68a0b743d4d5.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Jimmy",
            "real_name": "Jimmy",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "james",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "o=L",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Follow up question on the above LoggingControl — is there any obvious reason why I’d be ending up with duplicates in my db from this code?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02CYRC190R",
        "type": "message",
        "ts": "1640556684.349400",
        "client_msg_id": "ba163b10-cfd9-4b98-8e23-70c913138aa0",
        "text": "```def _process_cleared_markets(self, event):\n        cleared_markets = event.event\n        for cleared_market in cleared_markets.orders:\n            mydb.insert_cleared_market(cleared_market.market_id, cleared_market.bet_count, cleared_market.profit, cleared_market.commission, False)```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1eb70ee9874",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1eb70ee9874cc4b2e32a68a0b743d4d5.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Jimmy",
            "real_name": "Jimmy",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "james",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LAax",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def _process_cleared_markets(self, event):\n        cleared_markets = event.event\n        for cleared_market in cleared_markets.orders:\n            mydb.insert_cleared_market(cleared_market.market_id, cleared_market.bet_count, cleared_market.profit, cleared_market.commission, False)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02CYRC190R",
        "type": "message",
        "ts": "1640556718.349900",
        "client_msg_id": "b62830bb-94cd-48ac-b29a-a9082be35a2f",
        "text": "(often with a decent but not consistent time delay between the duplicates)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1eb70ee9874",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1eb70ee9874cc4b2e32a68a0b743d4d5.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Jimmy",
            "real_name": "Jimmy",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "james",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=GT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(often with a decent but not consistent time delay between the duplicates)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02CYRC190R",
        "type": "message",
        "ts": "1640557268.350200",
        "client_msg_id": "1e366d8e-eeb4-4f4a-842d-74837f8aeebb",
        "text": "Getting this in the logs _sometimes_.\n\n```{\"asctime\": \"2021-12-26 12:21:57,626\", \"levelname\": \"CRITICAL\", \"message\": \"'NoneType' object has no attribute 'profit' exception raised in 'NoneType' object has no attribute 'profit'\", \"exc_info\": \"Traceback (most recent call last):\\n  File \\\"\/usr\/local\/lib\/python3.8\/dist-packages\/flumine\/controls\/loggingcontrols.py\\\", line 34, in run\\n    self.process_event(event)\\n  File \\\"\/usr\/local\/lib\/python3.8\/dist-packages\/flumine\/controls\/loggingcontrols.py\\\", line 65, in process_event\\n    self._process_cleared_orders_meta(event)\\n  File \\\"\/home\/strategies\/loggingcontrol.py\\\", line 14, in _process_cleared_orders_meta\\n    mydb.insert_cleared_order(order.bet_id, order.trade.strategy, order.market_id, order.selection_id, order.trade.id, order.responses.date_time_placed, order.order_type.price, order.average_price_matched, order.order_type.size, order.size_matched, order.cleared_order.profit, order.side, order.elapsed_seconds_executable, order.status.value, order.trade.market_notes, order.trade.notes_str, order.notes_str, False)\\nAttributeError: 'NoneType' object has no attribute 'profit'\", \"event\": \"&lt;CLEARED_ORDERS_META [LOGGING]&gt;\"}```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1eb70ee9874",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1eb70ee9874cc4b2e32a68a0b743d4d5.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Jimmy",
            "real_name": "Jimmy",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "james",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640371994.344300",
        "parent_user_id": "U02CYRC190R",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HCbT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Getting this in the logs "
                            },
                            {
                                "type": "text",
                                "text": "sometimes",
                                "style": {
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "{\"asctime\": \"2021-12-26 12:21:57,626\", \"levelname\": \"CRITICAL\", \"message\": \"'NoneType' object has no attribute 'profit' exception raised in 'NoneType' object has no attribute 'profit'\", \"exc_info\": \"Traceback (most recent call last):\\n  File \\\"\/usr\/local\/lib\/python3.8\/dist-packages\/flumine\/controls\/loggingcontrols.py\\\", line 34, in run\\n    self.process_event(event)\\n  File \\\"\/usr\/local\/lib\/python3.8\/dist-packages\/flumine\/controls\/loggingcontrols.py\\\", line 65, in process_event\\n    self._process_cleared_orders_meta(event)\\n  File \\\"\/home\/strategies\/loggingcontrol.py\\\", line 14, in _process_cleared_orders_meta\\n    mydb.insert_cleared_order(order.bet_id, order.trade.strategy, order.market_id, order.selection_id, order.trade.id, order.responses.date_time_placed, order.order_type.price, order.average_price_matched, order.order_type.size, order.size_matched, order.cleared_order.profit, order.side, order.elapsed_seconds_executable, order.status.value, order.trade.market_notes, order.trade.notes_str, order.notes_str, False)\\nAttributeError: 'NoneType' object has no attribute 'profit'\", \"event\": \"<CLEARED_ORDERS_META [LOGGING]>\"}"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02CYRC190R",
        "type": "message",
        "ts": "1640557322.350400",
        "client_msg_id": "73ed803a-91af-4d32-88f9-0b2fc39f592f",
        "text": "10 times, logged 39 correctly today",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1eb70ee9874",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1eb70ee9874cc4b2e32a68a0b743d4d5.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-72.png",
            "first_name": "Jimmy",
            "real_name": "Jimmy",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "james",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640371994.344300",
        "parent_user_id": "U02CYRC190R",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "i+U",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "10 times, logged 39 correctly today"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1640591059.350600",
        "edited": {
            "user": "U4H19D1D2",
            "ts": "1640591067.000000"
        },
        "client_msg_id": "ef32207d-dc16-431e-9b66-fbb50a75a601",
        "text": "Ah a cancelled order won't have a profit so you need to check that the cleared order is present",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640371994.344300",
        "parent_user_id": "U02CYRC190R",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "o=k",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ah a cancelled order won't have a profit so you need to check that the cleared order is present"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1640591195.350900",
        "client_msg_id": "2241caf8-0121-4f87-b21a-3b29f513b65d",
        "text": "Steve are you using json or orjson?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640028137.290700",
        "parent_user_id": "U011VL3CA2Y",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "19M7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Steve are you using json or orjson?"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]