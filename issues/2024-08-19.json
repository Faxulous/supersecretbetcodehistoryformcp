[
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1724067112.901709",
        "client_msg_id": "2722f479-6b6e-4564-8f26-83667cb8f55e",
        "text": "having issues with cancelling certain orders despite setting force = True\n\nthe order status seems to be a flumine-thing and i thought setting force = True would avoid all checks against current logged status within the flumine instance, but this doesnt seem to be the case\n\nany ideas?\n`... - strategies - ERROR - OrderUpdateError - Issue while trying to cancel order ..., order status log: [&lt;OrderStatus.PENDING: 'Pending'&gt;, &lt;OrderStatus.EXECUTABLE: 'Executable'&gt;, &lt;OrderStatus.REPLACING: 'Replacing'&gt;], more info: Traceback (most recent call last):`\n  `File \"...\", line 655, in process_orders`\n    `market.cancel_order(order, force=True)`\n  `File \"...\/site-packages\/flumine\/markets\/market.py\", line 97, in cancel_order`\n    `return t.cancel_order(order, size_reduction, force)`\n           `^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^`\n  `File \"...\/site-packages\/flumine\/execution\/transaction.py\", line 101, in cancel_order`\n    `order.cancel(size_reduction)`\n  `File \"...\/site-packages\/flumine\/order\/order.py\", line 345, in cancel`\n    `raise OrderUpdateError(\"Current status: %s\" % self.status)`\n`flumine.exceptions.OrderUpdateError: Current status: OrderStatus.REPLACING`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724067112.901709",
        "reply_count": 6,
        "reply_users_count": 2,
        "latest_reply": "1724076091.676909",
        "reply_users": [
            "U4H19D1D2",
            "U03EW75HC74"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1724067988.932829"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1724069522.311589"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1724070980.750809"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1724074960.667139"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1724075795.789469"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1724076091.676909"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1724076091.676909",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "BGfoY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "having issues with cancelling certain orders despite setting force = True\n\nthe order status seems to be a flumine-thing and i thought setting force = True would avoid all checks against current logged status within the flumine instance, but this doesnt seem to be the case\n\nany ideas?\n"
                            },
                            {
                                "type": "text",
                                "text": "... - strategies - ERROR - OrderUpdateError - Issue while trying to cancel order ..., order status log: [<OrderStatus.PENDING: 'Pending'>, <OrderStatus.EXECUTABLE: 'Executable'>, <OrderStatus.REPLACING: 'Replacing'>], more info: Traceback (most recent call last):",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n "
                            },
                            {
                                "type": "text",
                                "text": " File \"...\", line 655, in process_orders",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    market.cancel_order(order, force=True)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/site-packages\/flumine\/markets\/market.py\", line 97, in cancel_order",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    return t.cancel_order(order, size_reduction, force)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/site-packages\/flumine\/execution\/transaction.py\", line 101, in cancel_order",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    order.cancel(size_reduction)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/site-packages\/flumine\/order\/order.py\", line 345, in cancel",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    raise OrderUpdateError(\"Current status: %s\" % self.status)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "flumine.exceptions.OrderUpdateError: Current status: OrderStatus.REPLACING",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1724067988.932829",
        "client_msg_id": "0FB09A89-4DDB-43FB-BBE3-34C7B70DA25C",
        "text": "That log is stating the order is currently waiting for a replace to complete when you cancel ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724067112.901709",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gw2YG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That log is stating the order is currently waiting for a replace to complete when you cancel "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1724069522.311589",
        "edited": {
            "user": "U03EW75HC74",
            "ts": "1724069762.000000"
        },
        "client_msg_id": "3d6b7774-0267-4984-a50d-3e3d9dcf2086",
        "text": "yess, but this replace was executed (i think successfully) long before this call. i get a similar error message over and over again for each update in the order stream from bf, with no other logic than the repeated retry of \"cancel order\" being applied to the particular order",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724067112.901709",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SF\/3T",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yess, but this replace was executed (i think successfully) long before this call. i get a similar error message over and over again for each update in the order stream from bf, with no other logic than the repeated retry of \"cancel order\" being applied to the particular order"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1724070980.750809",
        "client_msg_id": "fe316d4a-c74b-4994-ba7d-0683cfa806c1",
        "text": "would need some code to replicate, i wouldn't be surpised if there is a bug as i don't use replace",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724067112.901709",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rc4Pv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "would need some code to replicate, i wouldn't be surpised if there is a bug as i don't use replace"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1724074960.667139",
        "edited": {
            "user": "U03EW75HC74",
            "ts": "1724075889.000000"
        },
        "client_msg_id": "6997084c-fee8-472f-9b64-c528960ac8bf",
        "text": "`update_price = False`\n`new_trade_price = None`\n`old_trade_price = order.order_type.price`\n`if order.status == OrderStatus.EXECUTABLE:`\n    `\"\"\"`\n    `...`\n    `\"\"\"`\n    `update_price = True`\n    `new_trade_price = X.XX`\n\n`if update_price:`\n    `market.replace_order(order=order, new_price=new_trade_price, force=True)`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724067112.901709",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8eNne",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "update_price = False",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "new_trade_price = None",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "old_trade_price = order.order_type.price",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "if order.status == OrderStatus.EXECUTABLE:",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    \"\"\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    ...",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    \"\"\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    update_price = True",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    new_trade_price = X.XX",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            },
                            {
                                "type": "text",
                                "text": "if update_price:",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    market.replace_order(order=order, new_price=new_trade_price, force=True)",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1724075795.789469",
        "edited": {
            "user": "U03EW75HC74",
            "ts": "1724075801.000000"
        },
        "client_msg_id": "cf15e192-24ba-4fac-96ba-a5c88ff8df4a",
        "text": "fyi had equivalent\/similar issues before setting force=True everywhere, was basically a quick-fix attempt",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724067112.901709",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "319Uv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "fyi had equivalent\/similar issues before setting force=True everywhere, was basically a quick-fix attempt"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1724076091.676909",
        "client_msg_id": "49733951-e2a3-4949-a50c-81d5af82321a",
        "text": "Not sure what you expect me to replicate with just that",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724067112.901709",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "B0Fvq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not sure what you expect me to replicate with just that"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0155J92A7Q",
        "type": "message",
        "ts": "1724081412.974729",
        "client_msg_id": "954ac2e3-6a31-4df5-8805-9c8a0027db6c",
        "text": "Hi, am I correct that no login is required to be able to access the inplay_service, following the <https:\/\/github.com\/betcode-org\/betfair\/blob\/master\/examples\/exampleinplayservice.py|exampleinplayservice.py> ?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gde8c5d51af5",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/de8c5d51af54a5ac7b501f416ddb262c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png",
            "first_name": "",
            "real_name": "Jorge",
            "display_name": "Jorge",
            "team": "T4G9NBD2M",
            "name": "jgarciam95",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724081412.974729",
        "reply_count": 3,
        "reply_users_count": 2,
        "latest_reply": "1724138281.729069",
        "reply_users": [
            "U4H19D1D2",
            "U0155J92A7Q"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1724084726.144319"
            },
            {
                "user": "U0155J92A7Q",
                "ts": "1724137050.377049"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1724138281.729069"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1724138281.729069",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "joS9E",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hi, am I correct that no login is required to be able to access the inplay_service, following the "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/betfair\/blob\/master\/examples\/exampleinplayservice.py",
                                "text": "exampleinplayservice.py",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": " ?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1724084726.144319",
        "client_msg_id": "FB12741B-38E4-492A-BB33-82A49C5B0884",
        "text": "Yeah it just needs the site appKey, the example demonstrates this I think ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724081412.974729",
        "parent_user_id": "U0155J92A7Q",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bSSzU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah it just needs the site appKey, the example demonstrates this I think "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0155J92A7Q",
        "type": "message",
        "ts": "1724137050.377049",
        "client_msg_id": "d3816758-97c2-4795-8c01-dbe5e08d8b88",
        "text": "Okay thanks. There is a <https:\/\/github.com\/betcode-org\/betfair\/blob\/master\/examples\/exampleinplayservice.py#L18|trading.login()> in the example so that's why I was not sure",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gde8c5d51af5",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/de8c5d51af54a5ac7b501f416ddb262c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png",
            "first_name": "",
            "real_name": "Jorge",
            "display_name": "Jorge",
            "team": "T4G9NBD2M",
            "name": "jgarciam95",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1724081412.974729",
        "parent_user_id": "U0155J92A7Q",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/betfair\/blob\/master\/examples\/exampleinplayservice.py#L18",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/betfair\/blob\/master\/examples\/exampleinplayservice.py | exampleinplayservice.py>",
                "text": "```\ntrading.login()\n```",
                "title": "<https:\/\/github.com\/betcode-org\/betfair\/blob\/master\/examples\/exampleinplayservice.py | exampleinplayservice.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/betfair|betcode-org\/betfair>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "w5l3e",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Okay thanks. There is a "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/betfair\/blob\/master\/examples\/exampleinplayservice.py#L18",
                                "text": "trading.login()",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": " in the example so that's why I was not sure"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]