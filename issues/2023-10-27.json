[
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1698410588.080399",
        "edited": {
            "user": "UCQB6S222",
            "ts": "1698411442.000000"
        },
        "client_msg_id": "5561b442-0883-4967-9fb6-3cbeb5810ae5",
        "text": "In a worker, I am executing the following code:\n```for m in flumine.markets:\n    do_stuff(m)```\nMy problem is that `do_stuff` is never called; python is never entering the `for` loop. I put a print statement in the code, to print the value of `len(flumine.markets)` , and I get 0, which explains why `do_stuff` is not getting called.\n\nThen I go in with the debugger and print the value of `len(flumine.markets)` and it is 126.\n\nDoes anyone know what is happening? This is super weird to me.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GAAN5",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "In a worker, I am executing the following code:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "for m in flumine.markets:\n    do_stuff(m)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nMy problem is that "
                            },
                            {
                                "type": "text",
                                "text": "do_stuff",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is never called; python is never entering the "
                            },
                            {
                                "type": "text",
                                "text": "for",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " loop. I put a print statement in the code, to print the value of "
                            },
                            {
                                "type": "text",
                                "text": "len(flumine.markets)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , and I get 0, which explains why "
                            },
                            {
                                "type": "text",
                                "text": "do_stuff",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is not getting called.\n\nThen I go in with the debugger and print the value of "
                            },
                            {
                                "type": "text",
                                "text": "len(flumine.markets)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and it is 126.\n\nDoes anyone know what is happening? This is super weird to me."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1698411564.097599",
        "client_msg_id": "37f8e488-aa56-44d4-a00b-f19d312e943e",
        "text": "if you put a print or log statement just before do_stuff(m), what happens?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "woqgM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "if you put a print or log statement just before do_stuff(m), what happens?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1698411625.369199",
        "edited": {
            "user": "UCQB6S222",
            "ts": "1698411633.000000"
        },
        "client_msg_id": "1a64bbf2-039b-4c5e-8107-da4b61a8b4da",
        "text": "I edited my post to answer that question while you were asking it, apologies",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "NnE4Y",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I edited my post to answer that question while you were asking it, apologies"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1698411695.578969",
        "client_msg_id": "bc4455d4-0ceb-4155-b5be-917f60f536a3",
        "text": "it's almost like the version of `flumine.markets` which is passed to the thread is faulty, and then when I go in with the debugger it's picked up the correct version again",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nWeI4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "it's almost like the version of "
                            },
                            {
                                "type": "text",
                                "text": "flumine.markets",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " which is passed to the thread is faulty, and then when I go in with the debugger it's picked up the correct version again"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1698412208.552899",
        "edited": {
            "user": "U04NWADNCFR",
            "ts": "1698412234.000000"
        },
        "client_msg_id": "0416feff-950a-46e8-8116-ac92730974bc",
        "text": "I'm not a flumine expert, but I think to get quality assistance with this you would need to provide more concrete information about what you are doing - market filter, worker setup etc. It's quite hypothetical at the moment and you are asking people to guess what might be wrong with some code they can't see.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "O8aSh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm not a flumine expert, but I think to get quality assistance with this you would need to provide more concrete information about what you are doing - market filter, worker setup etc. It's quite hypothetical at the moment and you are asking people to guess what might be wrong with some code they can't see."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1698412471.999509",
        "client_msg_id": "3ef8d301-0d2b-43ea-98b6-438e944bb547",
        "text": "Actually, I think it is a race condition. Seems like the `flumine.markets` get added after the worker gets called the first time.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "zr\/Pv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Actually, I think it is a race condition. Seems like the "
                            },
                            {
                                "type": "text",
                                "text": "flumine.markets",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " get added after the worker gets called the first time."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U04NWADNCFR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1698414484.837469",
        "client_msg_id": "43ba413c-0f15-4aef-b52e-4ad1da49b92b",
        "text": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/worker.py#L23|start_delay>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/worker.py#L23",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/worker.py | worker.py>",
                "text": "```\n        start_delay: int = 0,\n```",
                "title": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/worker.py | worker.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZQ\/dR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/06451c28252b87a94132dc1f29777cc696937f98\/flumine\/worker.py#L23",
                                "text": "start_delay"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UCQB6S222",
        "type": "message",
        "ts": "1698415163.081699",
        "client_msg_id": "0829524c-522b-4b39-9c16-016804b568e4",
        "text": "thanks - that's what I've now done. in fact it would have been fine anyway but i've set this worker up with a low frequency of polling so when the first attempt failed i got worried.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g953ffd5e3b7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/5813be539113b05ece8212c2a06d006a.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "George",
            "real_name": "George",
            "display_name": "George",
            "team": "T4G9NBD2M",
            "name": "gd",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3vWPV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "thanks - that's what I've now done. in fact it would have been fine anyway but i've set this worker up with a low frequency of polling so when the first attempt failed i got worried."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]