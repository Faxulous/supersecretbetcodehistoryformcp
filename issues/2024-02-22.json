[
    {
        "subtype": "tombstone",
        "text": "This message was deleted.",
        "user": "USLACKBOT",
        "hidden": true,
        "type": "message",
        "ts": "1708604928.843269",
        "thread_ts": "1708604928.843269",
        "parent_user_id": "USLACKBOT",
        "reply_count": 6,
        "reply_users_count": 2,
        "latest_reply": "1708607389.154119",
        "reply_users": [
            "U4H19D1D2",
            "U06KEECDXBJ"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1708606648.560419"
            },
            {
                "user": "U06KEECDXBJ",
                "ts": "1708607005.916869"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1708607038.850869"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1708607050.262229"
            },
            {
                "user": "U06KEECDXBJ",
                "ts": "1708607180.774239"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1708607389.154119"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1708607389.154119"
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1708606648.560419",
        "client_msg_id": "1a53ac19-d780-45b1-9628-f610f6f036f8",
        "text": "Where is the strategy code that uses the context?\n\n`self.context[\"price\"]`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1708604928.843269",
        "parent_user_id": "USLACKBOT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Mpjmt",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Where is the strategy code that uses the context?\n\n"
                            },
                            {
                                "type": "text",
                                "text": "self.context[\"price\"]",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06KEECDXBJ",
        "type": "message",
        "ts": "1708607005.916869",
        "client_msg_id": "7c123b69-ee84-422a-9e76-cc3f1dcafea0",
        "text": "class ExampleStrategy(BaseStrategy):\n\n    def tuning_price(self, runner, ret_model_price):\n        if strategy.context['price'] == \"price1\":\n            runner.ex.target_price = ret_model_price\n        elif strategy.context['price'] == \"price2\":\n            runner.ex.target_price = get_nearest_price(ret_model_price * 1.5)\n        elif strategy.context['price'] == \"price3\":\n            runner.ex.target_price = get_nearest_price(ret_model_price * 0.5)\n        elif strategy.context['price'] == \"price4\":\n            runner.ex.target_price = get_nearest_price(ret_model_price * 0.9)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "07dabb09207c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-02-14\/6631065509238_07dabb09207c7ceddc43_72.png",
            "first_name": "Алеся",
            "real_name": "Алеся Селезнева",
            "display_name": "Al",
            "team": "T4G9NBD2M",
            "name": "a.seliazniova30032012",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1708604928.843269",
        "parent_user_id": "USLACKBOT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iEFUR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "class ExampleStrategy(BaseStrategy):\n\n    def tuning_price(self, runner, ret_model_price):\n        if strategy.context['price'] == \"price1\":\n            runner.ex.target_price = ret_model_price\n        elif strategy.context['price'] == \"price2\":\n            runner.ex.target_price = get_nearest_price(ret_model_price * 1.5)\n        elif strategy.context['price'] == \"price3\":\n            runner.ex.target_price = get_nearest_price(ret_model_price * 0.5)\n        elif strategy.context['price'] == \"price4\":\n            runner.ex.target_price = get_nearest_price(ret_model_price * 0.9)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1708607038.850869",
        "client_msg_id": "607030ab-6598-4255-9c91-eada4c4b232d",
        "text": "Should be `self.context`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1708604928.843269",
        "parent_user_id": "USLACKBOT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DoLV0",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Should be "
                            },
                            {
                                "type": "text",
                                "text": "self.context",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1708607050.262229",
        "client_msg_id": "6a8b23cc-9954-424c-820b-14b1355b4468",
        "text": "Open up your debugger and you would see this",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1708604928.843269",
        "parent_user_id": "USLACKBOT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "4qq6+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Open up your debugger and you would see this"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06KEECDXBJ",
        "type": "message",
        "ts": "1708607180.774239",
        "client_msg_id": "bfb5b81c-cbbb-4685-9e8e-242cb35f62e4",
        "text": "def process_market_book(self, market, market_book):\n        # get context\n        for runner in market_book.runners:\n                    if runner.selection_id == 19221310:\n                        if self.get_runner_context(market.market_id,runner.selection_id).trade_count == 0:\n                            trade = Trade(\n                                            market_id=market_book.market_id,\n                                            selection_id=runner.selection_id,\n                                            handicap=runner.handicap,\n                                            strategy=self,\n                                        )\n\n                            order = trade.create_order(\n                                            side=\"BACK\",\n                                            order_type=LimitOrder(\n                                                price=runner.ex.target_price,\n                                                size=2,\n                                                persistence_type=\"PERSIST\"\n                                            ),\n                                        )\n                            market.place_order(order)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "07dabb09207c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-02-14\/6631065509238_07dabb09207c7ceddc43_72.png",
            "first_name": "Алеся",
            "real_name": "Алеся Селезнева",
            "display_name": "Al",
            "team": "T4G9NBD2M",
            "name": "a.seliazniova30032012",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1708604928.843269",
        "parent_user_id": "USLACKBOT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Mel\/H",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def process_market_book(self, market, market_book):\n        # get context\n        for runner in market_book.runners:\n                    if runner.selection_id == 19221310:\n                        if self.get_runner_context(market.market_id,runner.selection_id).trade_count == 0:\n                            trade = Trade(\n                                            market_id=market_book.market_id,\n                                            selection_id=runner.selection_id,\n                                            handicap=runner.handicap,\n                                            strategy=self,\n                                        )\n\n                            order = trade.create_order(\n                                            side=\"BACK\",\n                                            order_type=LimitOrder(\n                                                price=runner.ex.target_price,\n                                                size=2,\n                                                persistence_type=\"PERSIST\"\n                                            ),\n                                        )\n                            market.place_order(order)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1708607389.154119",
        "client_msg_id": "bd957181-a3ad-4553-8da0-ddcef788247a",
        "text": "No don't put things in `runner.ex` that is not to be touched, keep things simple:\n\n```    def process_market_book(self, market, market_book):\n        for runner in market_book.runners:\n            if runner.selection_id == 19221310:\n                if self.get_runner_context(market.market_id, runner.selection_id).trade_count == 0:\n\n                    price = self.get_price(ret_model_price)\n\n                    trade = Trade(\n                        market_id=market_book.market_id,\n                        selection_id=runner.selection_id,\n                        handicap=runner.handicap,\n                        strategy=self,\n                    )\n                    order = trade.create_order(\n                        side=\"BACK\",\n                        order_type=LimitOrder(\n                            price=price,\n                            size=2,\n                            persistence_type=\"PERSIST\"\n                        ),\n                    )\n                    market.place_order(order)\n\n    def get_price(self, ret_model_price):\n        price = self.context[\"price\"]\n        if price == \"price1\":\n            return ret_model_price\n        elif price == \"price2\":\n            return get_nearest_price(ret_model_price * 1.5)\n        elif price == \"price3\":\n            return get_nearest_price(ret_model_price * 0.5)\n        elif price == \"price4\":\n            return get_nearest_price(ret_model_price * 0.9)```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1708604928.843269",
        "parent_user_id": "USLACKBOT",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CIuKA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "No don't put things in "
                            },
                            {
                                "type": "text",
                                "text": "runner.ex",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " that is not to be touched, keep things simple:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "    def process_market_book(self, market, market_book):\n        for runner in market_book.runners:\n            if runner.selection_id == 19221310:\n                if self.get_runner_context(market.market_id, runner.selection_id).trade_count == 0:\n\n                    price = self.get_price(ret_model_price)\n\n                    trade = Trade(\n                        market_id=market_book.market_id,\n                        selection_id=runner.selection_id,\n                        handicap=runner.handicap,\n                        strategy=self,\n                    )\n                    order = trade.create_order(\n                        side=\"BACK\",\n                        order_type=LimitOrder(\n                            price=price,\n                            size=2,\n                            persistence_type=\"PERSIST\"\n                        ),\n                    )\n                    market.place_order(order)\n\n    def get_price(self, ret_model_price):\n        price = self.context[\"price\"]\n        if price == \"price1\":\n            return ret_model_price\n        elif price == \"price2\":\n            return get_nearest_price(ret_model_price * 1.5)\n        elif price == \"price3\":\n            return get_nearest_price(ret_model_price * 0.5)\n        elif price == \"price4\":\n            return get_nearest_price(ret_model_price * 0.9)"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    }
]