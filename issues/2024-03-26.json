[
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1711437913.380659",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1711437982.000000"
        },
        "client_msg_id": "6c1d8ca1-2e81-4f99-8f67-f79ccb3db98c",
        "text": "I'm having trouble with flumine's patching of `datetime` when simulating; essentially I need to run a line of code with the patching undone. I think maybe this is possible using `SimulatedDateTime.real_time` as a context manager? Anyone got an example of this?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "reply_count": 13,
        "reply_users_count": 4,
        "latest_reply": "1711629705.661989",
        "reply_users": [
            "U4H19D1D2",
            "UBS7QANF3",
            "U04NWADNCFR",
            "U04H54Q392N"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1711440969.713289"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1711441378.589089"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1711443764.875449"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1711443841.833759"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1711457855.843789"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1711457891.174669"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1711457922.969979"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1711472064.854199"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1711475158.884729"
            },
            {
                "user": "U04NWADNCFR",
                "ts": "1711475728.324379"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1711477680.358009"
            },
            {
                "user": "U04H54Q392N",
                "ts": "1711573791.625319"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1711629705.661989"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1711629705.661989",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VwKRC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm having trouble with flumine's patching of "
                            },
                            {
                                "type": "text",
                                "text": "datetime",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " when simulating; essentially I need to run a line of code with the patching undone. I think maybe this is possible using "
                            },
                            {
                                "type": "text",
                                "text": "SimulatedDateTime.real_time",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as a context manager? Anyone got an example of this?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1711440969.713289",
        "client_msg_id": "4f022357-8f7d-4d8e-9a40-0190880f0ed6",
        "text": "Missing docs on <https:\/\/github.com\/betcode-org\/flumine\/issues\/512|this>\n\n```with framework.simulated_datetime.real_time():\n    print(datetime.datetime.utcnow())```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "ts": 1634656349,
                "color": "cb2431",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/issues\/512",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "#512 Fix RequestTimeTooSkewed error when using Middleware to get S3 objects in backtesting",
                "text": "This error is caused by patching datetime in flumine backtesting and therefore the local clock being out of sync with S3. Any workaround which allows S3 objects to be retrieved via Middleware during backtesting would be really useful.",
                "title": "#512 Fix RequestTimeTooSkewed error when using Middleware to get S3 objects in backtesting",
                "title_link": "https:\/\/github.com\/betcode-org\/flumine\/issues\/512",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "fields": [
                    {
                        "value": "1",
                        "title": "Comments",
                        "short": true
                    }
                ],
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HehHN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Missing docs on "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/issues\/512",
                                "text": "this"
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "with framework.simulated_datetime.real_time():\n    print(datetime.datetime.utcnow())"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U04NWADNCFR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1711441378.589089",
        "client_msg_id": "cf9b2d39-2753-45aa-8e40-fb02a106f413",
        "text": ":ok_hand:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KAuQX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "emoji",
                                "name": "ok_hand",
                                "unicode": "1f44c"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1711443764.875449",
        "client_msg_id": "e79e1f5c-526e-438f-b843-74bf2f29638c",
        "text": "Basic question but what's the canonical way of accessing framework from inside a strategy or should I be saving a reference myself in... `add()`?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KZsC8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Basic question but what's the canonical way of accessing framework from inside a strategy or should I be saving a reference myself in... "
                            },
                            {
                                "type": "text",
                                "text": "add()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1711443841.833759",
        "client_msg_id": "2e4c2772-31ca-4632-b4f9-0b7c05d903cb",
        "text": "I use `market.flumine` but this probably needs to be changed to have a solid reference available",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ng1xv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I use "
                            },
                            {
                                "type": "text",
                                "text": "market.flumine",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " but this probably needs to be changed to have a solid reference available"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1711457855.843789",
        "client_msg_id": "f75c4269-0315-422e-9e23-f033d51f835a",
        "text": "Is it OK to  call `framework.simulated_datetime.real_time()` when running live instead of simulated?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "B+Tgo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Is it OK to  call "
                            },
                            {
                                "type": "text",
                                "text": "framework.simulated_datetime.real_time()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " when running live instead of simulated?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1711457891.174669",
        "client_msg_id": "d216c314-5e4a-4ab2-9dbe-33fbe8f44824",
        "text": "The `simulated_datetime` attribute won't exist",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "41iHx",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The "
                            },
                            {
                                "type": "text",
                                "text": "simulated_datetime",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " attribute won't exist"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1711457922.969979",
        "client_msg_id": "199d923b-82d3-4e8e-b48e-9e3fab3c904d",
        "text": "its only in the simulation <https:\/\/github.com\/betcode-org\/flumine\/blob\/bfaa5def6dc66794f088d9e4fed539c3c3043926\/flumine\/simulation\/simulation.py#L26|class>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/bfaa5def6dc66794f088d9e4fed539c3c3043926\/flumine\/simulation\/simulation.py#L26",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/bfaa5def6dc66794f088d9e4fed539c3c3043926\/flumine\/simulation\/simulation.py | simulation.py>",
                "text": "```\n        self.simulated_datetime = SimulatedDateTime()\n```",
                "title": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/bfaa5def6dc66794f088d9e4fed539c3c3043926\/flumine\/simulation\/simulation.py | simulation.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "4xZDY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "its only in the simulation "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/betcode-org\/flumine\/blob\/bfaa5def6dc66794f088d9e4fed539c3c3043926\/flumine\/simulation\/simulation.py#L26",
                                "text": "class"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1711472064.854199",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1711472075.000000"
        },
        "client_msg_id": "a44acff6-b9f0-4ba8-8f06-8376e345429b",
        "text": "So if this is code I would like to run both simulated and live I would need to detect when simulating and then use the context manager? What's the canonical way for detecting simulation?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ezEw7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So if this is code I would like to run both simulated and live I would need to detect when simulating and then use the context manager? What's the canonical way for detecting simulation?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1711475158.884729",
        "client_msg_id": "ac18bcb5-1208-4cbb-92ca-0a182812d4ab",
        "text": "I put something into the strategy context to flag whether it's a simulation or not, but I wouldn't claim that's canonical.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Y9JZ8",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I put something into the strategy context to flag whether it's a simulation or not, but I wouldn't claim that's canonical."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U04NWADNCFR",
        "type": "message",
        "ts": "1711475728.324379",
        "client_msg_id": "e4e20372-8546-4b02-bafe-5135bd5a01ff",
        "text": "```self.clients.simulated```\nlooks promising though.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g3c4e33a28db",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3c4e33a28dbfc1fe70799f8e243bf305.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0026-72.png",
            "first_name": "Derek",
            "real_name": "Derek C",
            "display_name": "Derek C",
            "team": "T4G9NBD2M",
            "name": "dataexmachinazzzzz",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "RUVZ0",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "self.clients.simulated"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "looks promising though."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1711477680.358009",
        "client_msg_id": "85CA620B-71DD-465E-9544-686D55E137F6",
        "text": "`config.simulated` ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1711437913.380659",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7PuCc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "config.simulated",
                                "style": {
                                    "bold": false,
                                    "italic": false,
                                    "strike": false,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " "
                            }
                        ]
                    }
                ]
            }
        ]
    }
]