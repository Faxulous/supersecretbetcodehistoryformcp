[
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1715265194.385679",
        "edited": {
            "user": "U03EW75HC74",
            "ts": "1715265599.000000"
        },
        "client_msg_id": "64a87842-165d-47c1-8df0-f285275685ef",
        "text": "my bots went down earlier today due to the maintenance and when this happens flumine fails to reconnect, seems there's an issue with the keep_alive worker? checking code seems to suggest it should always attempt a new login if theres an issue with the sessions?\n\n`2024-05-09 13:23:24,033 - flumine.clients.betfairclient - ERROR - BetfairClient `keep_alive` error`\n`Traceback (most recent call last):`\n  `File \"...\/flumine\/clients\/betfairclient.py\", line 44, in keep_alive`\n    `return self.betting_client.keep_alive()`\n           `^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^`\n  `File \"...\/betfairlightweight\/endpoints\/keepalive.py\", line 30, in __call__`\n    `(response, response_json, elapsed_time) = self.request(session=session)`\n                                              `^^^^^^^^^^^^^^^^^^^^^^^^^^^^^`\n  `File \"...\/betfairlightweight\/endpoints\/keepalive.py\", line 60, in request`\n    `self._error_handler(response_json)`\n  `File \"...\/betfairlightweight\/endpoints\/keepalive.py\", line 67, in _error_handler`\n    `raise self._error(response)`\n`betfairlightweight.exceptions.KeepAliveError: API keepAlive FAIL: NO_SESSION`\n`2024-05-09 13:23:24,038 - flumine.worker - ERROR - Error in BackgroundWorker keep_alive: 'NoneType' object has no attribute 'status'`\n`Traceback (most recent call last):`\n  `File \"...\/flumine\/worker.py\", line 66, in run`\n    `self.function(`\n  `File \"....\/flumine\/worker.py\", line 106, in keep_alive`\n    `if resp is True or resp.status == \"SUCCESS\":`\n                       `^^^^^^^^^^^`\n`AttributeError: 'NoneType' object has no attribute 'status'`",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "reply_count": 12,
        "reply_users_count": 2,
        "latest_reply": "1715287318.149169",
        "reply_users": [
            "U06R7GCC26B",
            "U03EW75HC74"
        ],
        "replies": [
            {
                "user": "U06R7GCC26B",
                "ts": "1715281785.204829"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1715281864.550909"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1715285859.741409"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1715286111.776599"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1715286264.448589"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1715286280.527689"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1715286286.808179"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1715286368.093979"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1715286435.284879"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1715286571.249259"
            },
            {
                "user": "U06R7GCC26B",
                "ts": "1715286592.393229"
            },
            {
                "user": "U03EW75HC74",
                "ts": "1715287318.149169"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Bp6wk",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "my bots went down earlier today due to the maintenance and when this happens flumine fails to reconnect, seems there's an issue with the keep_alive worker? checking code seems to suggest it should always attempt a new login if theres an issue with the sessions?\n\n"
                            },
                            {
                                "type": "text",
                                "text": "2024-05-09 13:23:24,033 - flumine.clients.betfairclient - ERROR - BetfairClient `keep_alive` error",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "Traceback (most recent call last):",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/flumine\/clients\/betfairclient.py\", line 44, in keep_alive",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    return self.betting_client.keep_alive()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/betfairlightweight\/endpoints\/keepalive.py\", line 30, in __call__",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    (response, response_json, elapsed_time) = self.request(session=session)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/betfairlightweight\/endpoints\/keepalive.py\", line 60, in request",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    self._error_handler(response_json)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/betfairlightweight\/endpoints\/keepalive.py\", line 67, in _error_handler",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    raise self._error(response)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "betfairlightweight.exceptions.KeepAliveError: API keepAlive FAIL: NO_SESSION",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "2024-05-09 13:23:24,038 - flumine.worker - ERROR - Error in BackgroundWorker keep_alive: 'NoneType' object has no attribute 'status'",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "Traceback (most recent call last):",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"...\/flumine\/worker.py\", line 66, in run",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    self.function(",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "  File \"....\/flumine\/worker.py\", line 106, in keep_alive",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    if resp is True or resp.status == \"SUCCESS\":",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "                       ^^^^^^^^^^^",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "AttributeError: 'NoneType' object has no attribute 'status'",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1715281785.204829",
        "client_msg_id": "fb3bb7cd-67ef-4446-919d-e790a7ae7015",
        "text": "<https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714038872134609>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714038872134609",
                "ts": "1714038872.134609",
                "author_id": "U06R7GCC26B",
                "channel_id": "C4H05ML2E",
                "channel_team": "T4G9NBD2M",
                "is_msg_unfurl": true,
                "is_thread_root_unfurl": true,
                "message_blocks": [
                    {
                        "team": "T4G9NBD2M",
                        "channel": "C4H05ML2E",
                        "ts": "1714038872.134609",
                        "message": {
                            "blocks": [
                                {
                                    "type": "rich_text",
                                    "block_id": "R4xNB",
                                    "elements": [
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "I think there’s a bug in the keep alive worker where it’s not logging in properly\n\nTraceback in thread\n\nI’ve been getting this for a couple of days wheen leaving the stream running for a long while (to build up local data as discussed  elsewhere) but also logging into betfair from other devices to look at things or manually execute.\n\nThe fix should be relatively straightforward, happy to open a PR into the flumine repo if that’s the done thing?"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                ],
                "id": 1,
                "original_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714038872134609",
                "fallback": "[April 25th, 2024 2:54 AM] ammarorama: I think there’s a bug in the keep alive worker where it’s not logging in properly\n\nTraceback in thread\n\nI’ve been getting this for a couple of days wheen leaving the stream running for a long while (to build up local data as discussed  elsewhere) but also logging into betfair from other devices to look at things or manually execute.\n\nThe fix should be relatively straightforward, happy to open a PR into the flumine repo if that’s the done thing?",
                "text": "I think there’s a bug in the keep alive worker where it’s not logging in properly\n\nTraceback in thread\n\nI’ve been getting this for a couple of days wheen leaving the stream running for a long while (to build up local data as discussed  elsewhere) but also logging into betfair from other devices to look at things or manually execute.\n\nThe fix should be relatively straightforward, happy to open a PR into the flumine repo if that’s the done thing?",
                "author_name": "Ammar",
                "author_link": "https:\/\/betcode-org.slack.com\/team\/U06R7GCC26B",
                "author_icon": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-48.png",
                "author_subname": "Ammar",
                "mrkdwn_in": [
                    "text"
                ],
                "footer": "Thread in Slack conversation"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lqRmX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714038872134609"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "white_check_mark",
                "users": [
                    "U03EW75HC74"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1715281864.550909",
        "client_msg_id": "922f5653-de5f-4b3e-85a6-a0da0f7ecddf",
        "text": "I’ve hit this too — discussion above",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Dg0FJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I’ve hit this too — discussion above"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "white_check_mark",
                "users": [
                    "U03EW75HC74"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1715285859.741409",
        "client_msg_id": "25273461-04e7-40c4-aaba-bacb322626d2",
        "text": "did you fix it\/get any help?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dhfS7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "did you fix it\/get any help?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1715286111.776599",
        "client_msg_id": "dce2939b-4d2c-4897-905d-056f0063429a",
        "text": "my understanding of the logic:\n(1) if theres an issue with the current session, try to refresh it\/keep it alive\n(2) if this for some reason fails, run a new login instead\n\nas you mentioned it looks like there are unexpected responses coming through that throws exceptions and never lets (2) come into play",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "npuOS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "my understanding of the logic:\n(1) if theres an issue with the current session, try to refresh it\/keep it alive\n(2) if this for some reason fails, run a new login instead\n\nas you mentioned it looks like there are unexpected responses coming through that throws exceptions and never lets (2) come into play"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1715286264.448589",
        "client_msg_id": "5df3fc3f-f929-4e90-b314-8ce52fe9bfbe",
        "text": "yeh.  I ran in the fix which is in the thread, and it seemed to resolve that specific issue.  I’m petitioning to get it into flumine, happy to open a PR, but some discussion around the criteria for doing so in the original thread",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5zEWp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yeh.  I ran in the fix which is in the thread, and it seemed to resolve that specific issue.  I’m petitioning to get it into flumine, happy to open a PR, but some discussion around the criteria for doing so in the original thread"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1715286280.527689",
        "edited": {
            "user": "U03EW75HC74",
            "ts": "1715286380.000000"
        },
        "client_msg_id": "30a6b5c8-b266-434f-8802-07402bad33c9",
        "text": "`if resp:`\n    `if resp.status == \"SUCCESS\":`\n        `continue`\n\nenough?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZY7OL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "if resp:",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "    if resp.status == \"SUCCESS\":",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "text",
                                "text": "        continue",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\nenough?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1715286286.808179",
        "client_msg_id": "72e3d484-10e6-47cb-ad22-8034096d67a3",
        "text": "<https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714076285291429?thread_ts=1714038872.134609&amp;cid=C4H05ML2E>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714076285291429?thread_ts=1714038872.134609&amp;cid=C4H05ML2E",
                "ts": "1714076285.291429",
                "author_id": "U06R7GCC26B",
                "channel_id": "C4H05ML2E",
                "channel_team": "T4G9NBD2M",
                "is_msg_unfurl": true,
                "is_reply_unfurl": true,
                "message_blocks": [
                    {
                        "team": "T4G9NBD2M",
                        "channel": "C4H05ML2E",
                        "ts": "1714076285.291429",
                        "message": {
                            "blocks": [
                                {
                                    "type": "rich_text",
                                    "block_id": "pUxw5",
                                    "elements": [
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "It looks to me like there’s an unexpected response type (as "
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "None",
                                                    "style": {
                                                        "code": true
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "text": ") which is coming thru from the call stack — which looks entirely plausible as I read thru the code all the way back to "
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "betfairlightweight",
                                                    "style": {
                                                        "code": true
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "\n\nto be clear, this isn’t impacting the data stream; but it does look like very unhappy noise in the logs, which is never nice :)\n\nsteps to replicate:\n"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "rich_text_list",
                                            "elements": [
                                                {
                                                    "type": "rich_text_section",
                                                    "elements": [
                                                        {
                                                            "type": "text",
                                                            "text": "leave the market recorder going on one machine — this is "
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "all",
                                                            "style": {
                                                                "italic": true
                                                            }
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": " I’m using flumine for, it’s a single process which I kick off each day.  (currently on a laptop, behind expressVPN, which may be a noteworthy point) "
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "rich_text_section",
                                                    "elements": [
                                                        {
                                                            "type": "text",
                                                            "text": "use betfair to manually execute and check markets via the mobile app, and other computers"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "rich_text_section",
                                                    "elements": [
                                                        {
                                                            "type": "text",
                                                            "text": "over the course of 8-10 hours the error will start to present"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "style": "bullet",
                                            "indent": 0,
                                            "border": 0
                                        },
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "\n\nthe fix could be very light in the keepalive (similar to how it’s handling a failure already)\n\n\n"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "rich_text_preformatted",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "def keep_alive(context: dict, flumine) -> None:\n    \"\"\"Attempt keep alive if required or\n    login if keep alive failed\n    \"\"\"\n    for client in flumine.clients:\n        if client.EXCHANGE == ExchangeType.BETFAIR:\n            if client.betting_client.session_token:\n                resp = client.keep_alive()\n\n                # start change\n                if resp is None:  # this is the unexpected response type I'm seeing\n                    client.login()\n                # end chage\n\n                if resp is True or resp.status == \"SUCCESS\":\n                    continue\n        elif client.EXCHANGE == ExchangeType.BETCONNECT:\n            resp = client.keep_alive()\n            if resp:\n                continue\n        # keep-alive failed lets try a login\n        client.login()"
                                                }
                                            ],
                                            "border": 0
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                ],
                "id": 1,
                "original_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714076285291429?thread_ts=1714038872.134609&amp;cid=C4H05ML2E",
                "fallback": "[April 25th, 2024 1:18 PM] ammarorama: It looks to me like there’s an unexpected response type (as `None`) which is coming thru from the call stack — which looks entirely plausible as I read thru the code all the way back to `betfairlightweight`\n\nto be clear, this isn’t impacting the data stream; but it does look like very unhappy noise in the logs, which is never nice :)\n\nsteps to replicate:\n• leave the market recorder going on one machine — this is _all_ I’m using flumine for, it’s a single process which I kick off each day.  (currently on a laptop, behind expressVPN, which may be a noteworthy point) \n• use betfair to manually execute and check markets via the mobile app, and other computers\n• over the course of 8-10 hours the error will start to present\n\nthe fix could be very light in the keepalive (similar to how it’s handling a failure already)\n\n\n```def keep_alive(context: dict, flumine) -&gt; None:\n    \"\"\"Attempt keep alive if required or\n    login if keep alive failed\n    \"\"\"\n    for client in flumine.clients:\n        if client.EXCHANGE == ExchangeType.BETFAIR:\n            if client.betting_client.session_token:\n                resp = client.keep_alive()\n\n                # start change\n                if resp is None:  # this is the unexpected response type I'm seeing\n                    client.login()\n                # end chage\n\n                if resp is True or resp.status == \"SUCCESS\":\n                    continue\n        elif client.EXCHANGE == ExchangeType.BETCONNECT:\n            resp = client.keep_alive()\n            if resp:\n                continue\n        # keep-alive failed lets try a login\n        client.login()```",
                "text": "It looks to me like there’s an unexpected response type (as `None`) which is coming thru from the call stack — which looks entirely plausible as I read thru the code all the way back to `betfairlightweight`\n\nto be clear, this isn’t impacting the data stream; but it does look like very unhappy noise in the logs, which is never nice :)\n\nsteps to replicate:\n• leave the market recorder going on one machine — this is _all_ I’m using flumine for, it’s a single process which I kick off each day.  (currently on a laptop, behind expressVPN, which may be a noteworthy point) \n• use betfair to manually execute and check markets via the mobile app, and other computers\n• over the course of 8-10 hours the error will start to present\n\nthe fix could be very light in the keepalive (similar to how it’s handling a failure already)\n\n\n```def keep_alive(context: dict, flumine) -&gt; None:\n    \"\"\"Attempt keep alive if required or\n    login if keep alive failed\n    \"\"\"\n    for client in flumine.clients:\n        if client.EXCHANGE == ExchangeType.BETFAIR:\n            if client.betting_client.session_token:\n                resp = client.keep_alive()\n\n                # start change\n                if resp is None:  # this is the unexpected response type I'm seeing\n                    client.login()\n                # end chage\n\n                if resp is True or resp.status == \"SUCCESS\":\n                    continue\n        elif client.EXCHANGE == ExchangeType.BETCONNECT:\n            resp = client.keep_alive()\n            if resp:\n                continue\n        # keep-alive failed lets try a login\n        client.login()```",
                "author_name": "Ammar",
                "author_link": "https:\/\/betcode-org.slack.com\/team\/U06R7GCC26B",
                "author_icon": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-48.png",
                "author_subname": "Ammar",
                "mrkdwn_in": [
                    "text"
                ],
                "footer": "Thread in Slack conversation"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "p3Eg+",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1714076285291429?thread_ts=1714038872.134609&cid=C4H05ML2E"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1715286368.093979",
        "client_msg_id": "c7961cef-a595-45ec-912a-1f9ecdf1ff0d",
        "text": "&gt;  replacing the ‘or’ with an ‘and’ fixes it?\nit’s what’s highlighted in the code block inside the message linked above.  if keep alive returns a `None` then force a login; that’s it",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "RsQq6",
                "elements": [
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": " replacing the ‘or’ with an ‘and’ fixes it?"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\nit’s what’s highlighted in the code block inside the message linked above.  if keep alive returns a "
                            },
                            {
                                "type": "text",
                                "text": "None",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " then force a login; that’s it"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "raised_hands",
                "users": [
                    "U03EW75HC74"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1715286435.284879",
        "client_msg_id": "be87b1b8-9812-4459-a415-fb1aeb184112",
        "text": "ah yeah, thanks",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Zxvyb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ah yeah, thanks"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1715286571.249259",
        "client_msg_id": "f698f697-d012-461e-8091-cdd5fb73e12b",
        "text": ":+1:  lmk if that fixes if for you locally; can then create a PR and see what the repo owner group have to say",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gLzyO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "emoji",
                                "name": "+1",
                                "unicode": "1f44d"
                            },
                            {
                                "type": "text",
                                "text": "  lmk if that fixes if for you locally; can then create a PR and see what the repo owner group have to say"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U06R7GCC26B",
        "type": "message",
        "ts": "1715286592.393229",
        "client_msg_id": "d8ad1103-2c56-4996-8102-4e49b82df3d3",
        "text": "definitely don’t want to introduce something which blows up for other people :sweat_smile:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g68a674a57e0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/68a674a57e001129884dc5a186684950.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png",
            "first_name": "Ammar",
            "real_name": "Ammar",
            "display_name": "Ammar",
            "team": "T4G9NBD2M",
            "name": "ammarorama",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bWRRL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "definitely don’t want to introduce something which blows up for other people "
                            },
                            {
                                "type": "emoji",
                                "name": "sweat_smile",
                                "unicode": "1f605"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U03EW75HC74",
        "type": "message",
        "ts": "1715287318.149169",
        "client_msg_id": "5c17ecd5-c94e-4a44-bbb2-530d587ba155",
        "text": "yes will let you know",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g1fada67b168",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/1fada67b16883e5f2979b8b63de3946c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0022-72.png",
            "first_name": "NAS",
            "real_name": "NAS",
            "display_name": "NAS",
            "team": "T4G9NBD2M",
            "name": "sharpsbet",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1715265194.385679",
        "parent_user_id": "U03EW75HC74",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "POpYB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yes will let you know"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]