[
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1686036507.798149",
        "client_msg_id": "79bc693e-bec3-4671-a58c-5dbc7391e0a4",
        "text": "8 is the optimum for me, M1",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JdoQ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "8 is the optimum for me, M1"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1::skin-tone-6",
                "users": [
                    "UPMUFSGCR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UQL0QDEKA",
        "type": "message",
        "ts": "1686050375.120909",
        "client_msg_id": "b5f0134b-59a1-47ae-b30b-e53ed5b953dd",
        "text": "I run mine on 8 too (12.5 mins for 18K markets, Ryzen 5950), if I step up the number of markets (even to 16) doesn't seem to make any difference to the time taken. Fast enough either way",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g444d10128c0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/444d10128c0aaf094041a52a76796602.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Peter",
            "real_name": "Peter Lenagh",
            "display_name": "PeterLe",
            "team": "T4G9NBD2M",
            "name": "lenagh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HNHdQ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I run mine on 8 too (12.5 mins for 18K markets, Ryzen 5950), if I step up the number of markets (even to 16) doesn't seem to make any difference to the time taken. Fast enough either way"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "rocket",
                "users": [
                    "U4H19D1D2",
                    "U02K5EBKNBF"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1686052251.583219",
        "client_msg_id": "6709204c-d8d4-4507-b2d5-c42875786881",
        "text": "Omg that is crazy.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HYb7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Omg that is crazy."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1686052290.189669",
        "client_msg_id": "252de9e1-5b8f-43b4-bdad-07854168daea",
        "text": "Do you know what difference you get if you just run on 1?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "46y",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Do you know what difference you get if you just run on 1?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UQL0QDEKA",
        "type": "message",
        "ts": "1686053902.006139",
        "client_msg_id": "790b3b5b-d510-4829-81eb-c66567b6609c",
        "text": "Well its something i hadnt considered; just run it on\n``` markets_per_worker = 1 ```\nand it took around exactly the same time (maybe a couple of seconds faster). Does that make sense to you? I would have thought it would take a lot longer?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g444d10128c0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/444d10128c0aaf094041a52a76796602.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Peter",
            "real_name": "Peter Lenagh",
            "display_name": "PeterLe",
            "team": "T4G9NBD2M",
            "name": "lenagh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XTb1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Well its something i hadnt considered; just run it on\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": " markets_per_worker = 1 "
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "and it took around exactly the same time (maybe a couple of seconds faster). Does that make sense to you? I would have thought it would take a lot longer?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1686054462.617679",
        "client_msg_id": "7072a295-1637-48c9-a5f4-11fc3def1637",
        "text": "I would have thought it would take longer too, as it will need to create new processes and restart Flumine etc... I would also expect it to use  less memory, which may or may not be a concern (I was too tight and only bought 32gb ram).",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "R9y",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I would have thought it would take longer too, as it will need to create new processes and restart Flumine etc... I would also expect it to use  less memory, which may or may not be a concern (I was too tight and only bought 32gb ram)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1686079482.514139",
        "client_msg_id": "192f0409-5c0c-45f7-871c-a9e5bb14549b",
        "text": "<@UQL0QDEKA> What sort of `seconds_to_start` or `inplay` flag are you using to process 18k markets in 12.5 minutes? Using `seconds_to_start=660` and `inplay=False` , my machine is taking 21 minutes to process 38k markets. I have a Ryzen 3950 which I'd expect to be roughly 10% slower than your 5950",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5AOWD",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UQL0QDEKA"
                            },
                            {
                                "type": "text",
                                "text": " What sort of "
                            },
                            {
                                "type": "text",
                                "text": "seconds_to_start",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " or "
                            },
                            {
                                "type": "text",
                                "text": "inplay",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " flag are you using to process 18k markets in 12.5 minutes? Using "
                            },
                            {
                                "type": "text",
                                "text": "seconds_to_start=660",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "inplay=False",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " , my machine is taking 21 minutes to process 38k markets. I have a Ryzen 3950 which I'd expect to be roughly 10% slower than your 5950"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UQL0QDEKA",
        "type": "message",
        "ts": "1686080818.432089",
        "edited": {
            "user": "UQL0QDEKA",
            "ts": "1686087120.000000"
        },
        "client_msg_id": "064a7b2d-d706-429f-8733-358064694462",
        "text": "In-play only UK\/Ire Horses\nI just tried running a strategy on the Dogs, 28472 Markets, took 9:17 (So not easy to compare)\n\n```STRATEGY_KWARGS = {'inplay': False, 'seconds_to_start': 660} ```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g444d10128c0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/444d10128c0aaf094041a52a76796602.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Peter",
            "real_name": "Peter Lenagh",
            "display_name": "PeterLe",
            "team": "T4G9NBD2M",
            "name": "lenagh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JCrSO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "In-play only UK\/Ire Horses\nI just tried running a strategy on the Dogs, 28472 Markets, took 9:17 (So not easy to compare)\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "STRATEGY_KWARGS = {'inplay': False, 'seconds_to_start': 660} "
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "rocket",
                "users": [
                    "UPMUFSGCR",
                    "U4H19D1D2"
                ],
                "count": 2
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1686085254.557639",
        "client_msg_id": "5ffdbe21-38b6-4fac-ae31-2597ed7921a7",
        "text": "Do you have any tips for keeping ram usage down? My Ram usage seems to creep up gradually as I run the tests. Not sure why. It's only been happening since I started experimenting with different numbers of workers.\n\nThere shouldn't really be anything\/much persisted between each process.\n\nI use a multiprocessing.Manager to share a Queue between each process.\nEach process sends its results to the Queue, so that a single process can persist the results into a single file. Otherwise I end up with thousands of files",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "mhU2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Do you have any tips for keeping ram usage down? My Ram usage seems to creep up gradually as I run the tests. Not sure why. It's only been happening since I started experimenting with different numbers of workers.\n\nThere shouldn't really be anything\/much persisted between each process.\n\nI use a multiprocessing.Manager to share a Queue between each process.\nEach process sends its results to the Queue, so that a single process can persist the results into a single file. Otherwise I end up with thousands of files"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UQL0QDEKA",
        "type": "message",
        "ts": "1686087341.284309",
        "client_msg_id": "7660cb47-948c-4eac-8845-419c286e40ea",
        "text": "No sorry JonJon, maybe one of the others may know better than me",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g444d10128c0",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/444d10128c0aaf094041a52a76796602.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0005-72.png",
            "first_name": "Peter",
            "real_name": "Peter Lenagh",
            "display_name": "PeterLe",
            "team": "T4G9NBD2M",
            "name": "lenagh",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "y4F",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "No sorry JonJon, maybe one of the others may know better than me"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1686087960.372779",
        "client_msg_id": "a674578f-f75a-4210-8d59-f9d74ad00000",
        "text": "Ah no worries. I managed to work it out.\n\nEvery time a new process is spawned, it uses up the same amount of RAM as the parent process. My parent process used up a lot of RAM as it had loaded a lot of data about the 38K markets. So to solve my problem I just had to delete the unnecessary data and call `gc.collect()`.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1686001264.160089",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "liEd",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ah no worries. I managed to work it out.\n\nEvery time a new process is spawned, it uses up the same amount of RAM as the parent process. My parent process used up a lot of RAM as it had loaded a lot of data about the 38K markets. So to solve my problem I just had to delete the unnecessary data and call "
                            },
                            {
                                "type": "text",
                                "text": "gc.collect()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]