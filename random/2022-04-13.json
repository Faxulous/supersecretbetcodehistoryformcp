[
    {
        "user": "U02QDJCK3NW",
        "type": "message",
        "ts": "1649837682.955789",
        "client_msg_id": "61fdd50e-c813-44ef-b52f-f1b0e7330a3a",
        "text": "I'm trying to use betfairviz.create_dashboard.\n\nThe module is imported correctly and MarketBooks are rendered as expected in jupyter notebook.\n\nBut when I call ``betfairviz.create_dashboard(prices)`, being `prices` a dict obtained with `betfairutil.read_prices_file` nothing happens. No error neither visualization of the widget.\n\nAny clue to what I'm doing wrong?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "f9b3fec110b3",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-12-11\/2822937230854_f9b3fec110b36ee68469_72.jpg",
            "first_name": "Nacho",
            "real_name": "Nacho Uve",
            "display_name": "Nacho Uve",
            "team": "T4G9NBD2M",
            "name": "nachouve",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649837682.955789",
        "reply_count": 1,
        "reply_users_count": 1,
        "latest_reply": "1649837792.726569",
        "reply_users": [
            "U02QDJCK3NW"
        ],
        "replies": [
            {
                "user": "U02QDJCK3NW",
                "ts": "1649837792.726569"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SLzs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'm trying to use betfairviz.create_dashboard.\n\nThe module is imported correctly and MarketBooks are rendered as expected in jupyter notebook.\n\nBut when I call "
                            },
                            {
                                "type": "text",
                                "text": "`betfairviz.create_dashboard(prices)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", being "
                            },
                            {
                                "type": "text",
                                "text": "prices",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " a dict obtained with "
                            },
                            {
                                "type": "text",
                                "text": "betfairutil.read_prices_file",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " nothing happens. No error neither visualization of the widget.\n\nAny clue to what I'm doing wrong?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02QDJCK3NW",
        "type": "message",
        "ts": "1649837792.726569",
        "client_msg_id": "a602d282-afab-4d05-ad25-f7ef4e9bbc35",
        "text": "Solved.\nIt looks that `plotly` was not properly installed. After reinstall and restart jupyter notebook it works.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "f9b3fec110b3",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-12-11\/2822937230854_f9b3fec110b36ee68469_72.jpg",
            "first_name": "Nacho",
            "real_name": "Nacho Uve",
            "display_name": "Nacho Uve",
            "team": "T4G9NBD2M",
            "name": "nachouve",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649837682.955789",
        "parent_user_id": "U02QDJCK3NW",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "R2YN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Solved.\nIt looks that "
                            },
                            {
                                "type": "text",
                                "text": "plotly",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " was not properly installed. After reinstall and restart jupyter notebook it works."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649839421.838259",
        "client_msg_id": "6cbc4bad-429f-426e-932e-96a22439be82",
        "text": "I had some strange behaviour yesterday when trying to increase my bet transmission count. At it's worst I was getting a delay of over 10 seconds between transmitting a request to placeOrders and the response coming back. I am using an async socket component and in total, I placed no more than 500 bets over the entirety of the race. As the delays were increasing with the number of bets placed during the race I suspect some internal bottleneck in the component. Has anyone else had this kind of issue in the past? I know I can solve this (probably) by threading out the bet placement side but I've not had this issue ever before and I can't see that my bet transmission would be deemed excessive. Is it possible to get issues when trying to place a large number of bets within a very small timeframe? Seems very unlikely to me?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "reply_count": 12,
        "reply_users_count": 3,
        "latest_reply": "1649864121.551219",
        "reply_users": [
            "U01DVUAE2G1",
            "UUE6E1LA1",
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U01DVUAE2G1",
                "ts": "1649839825.093639"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649839983.290249"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649840064.055289"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649846241.796909"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1649862052.863019"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649863503.074009"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1649863917.501589"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649863961.997449"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649863996.442229"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649864082.635219"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649864103.709139"
            },
            {
                "user": "UUE6E1LA1",
                "ts": "1649864121.551219"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1649864121.551219",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "7+cc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I had some strange behaviour yesterday when trying to increase my bet transmission count. At it's worst I was getting a delay of over 10 seconds between transmitting a request to placeOrders and the response coming back. I am using an async socket component and in total, I placed no more than 500 bets over the entirety of the race. As the delays were increasing with the number of bets placed during the race I suspect some internal bottleneck in the component. Has anyone else had this kind of issue in the past? I know I can solve this (probably) by threading out the bet placement side but I've not had this issue ever before and I can't see that my bet transmission would be deemed excessive. Is it possible to get issues when trying to place a large number of bets within a very small timeframe? Seems very unlikely to me?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1649839825.093639",
        "edited": {
            "user": "U01DVUAE2G1",
            "ts": "1649839837.000000"
        },
        "client_msg_id": "3f4981bb-9506-4b09-b4d9-2a40bb4a66eb",
        "text": "had this happen to me aswell when placing a high number of bets in a short amount of time and i ve seen others encounter this too. For me the solution was to chunk bets together into 1 transaction.\ncheck <https:\/\/github.com\/liampauling\/flumine\/blob\/master\/flumine\/execution\/transaction.py>\nObviously only possible when you actually place a bunch of orders on the same market_book update",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "attachments": [
            {
                "id": 1,
                "footer_icon": "https:\/\/slack.github.com\/static\/img\/favicon-neutral.png",
                "color": "24292f",
                "bot_id": "B021ZJYSBMW",
                "app_unfurl_url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/flumine\/execution\/transaction.py",
                "is_app_unfurl": true,
                "app_id": "A01BP7R4KNY",
                "fallback": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/flumine\/execution\/transaction.py | transaction.py>",
                "text": "```\nimport logging\nfrom collections import defaultdict\n\nfrom ..order.orderpackage import OrderPackageType, BetfairOrderPackage\nfrom ..events import events\nfrom ..exceptions import ControlError, OrderError\nfrom ..utils import chunks, get_market_notes\n\nlogger = logging.getLogger(__name__)\n\n\nclass Transaction:\n    \"\"\"\n    Process place, cancel, update and replace requests.\n\n    Default behaviour is to execute immediately however\n    when it is used as a context manager requests can\n    be batched, for example:\n\n        with market.transaction() as t:\n            market.place_order(order)  # executed immediately in separate transaction\n            t.place_order(order)  # executed on transaction __exit__\n\n        with market.transaction() as t:\n            t.place_order(order)\n            ..\n            t.execute()  # above order executed\n            ..\n            t.cancel_order(order)\n            t.place_order(order)  # both executed on transaction __exit__\n    \"\"\"\n\n    def __init__(self, market, id_: int, async_place_orders: bool, client):\n        self.market = market\n        self._client = client\n        self._id = id_  # unique per market only\n        self._async_place_orders = async_place_orders\n        self._pending_orders = False\n        self._pending_place = []  # list of (&lt;Order&gt;, market_version)\n        self._pending_cancel = []  # list of (&lt;Order&gt;, None)\n        self._pending_update = []  # list of (&lt;Order&gt;, None)\n        self._pending_replace = []  # list of (&lt;Order&gt;, market_version)\n\n    def place_order(\n        self,\n        order,\n        market_version: int = None,\n        execute: bool = True,\n        force: bool = False,\n    ) -&gt; bool:\n        order.update_client(self._client)\n        if (\n            execute\n            and not force\n            and self._validate_controls(order, OrderPackageType.PLACE) is False\n        ):\n            return False\n        # place\n        order.place(\n            self.market.market_book.publish_time,\n            market_version,\n            self._async_place_orders,\n        )\n        if self.market.blotter.has_trade(order.trade.id):\n            new_trade = False\n        else:\n            new_trade = True\n        if order.id not in self.market.blotter:\n            self.market.blotter[order.id] = order\n            # update market_notes\n            market_notes = get_market_notes(self.market, order.selection_id)\n            order.market_notes = market_notes\n            if order.trade.market_notes is None:\n                order.trade.market_notes = market_notes\n        else:\n            raise OrderError(\"Order %s has already been placed\" % order.id)\n        if new_trade:\n            self.market.flumine.log_control(events.TradeEvent(order.trade))\n        if execute:  # handles replaceOrder\n            runner_context = order.trade.strategy.get_runner_context(*order.lookup)\n            runner_context.place(order.trade.id)\n            self._pending_place.append((order, market_version))\n            self._pending_orders = True\n        return True\n\n    def cancel_order(\n        self, order, size_reduction: float = None, force: bool = False\n    ) -&gt; bool:\n        if order.client != self._client:\n            raise OrderError(\n                \"cancel_order: Order client '{0}' does not match transaction client '{1}'\".format(\n                    order.client, self._client\n                )\n            )\n        if (\n            not force\n            and self._validate_controls(order, OrderPackageType.CANCEL) is False\n        ):\n            return False\n        # cancel\n        order.cancel(size_reduction)\n        self._pending_cancel.append((order, None))\n        self._pending_orders = True\n        return True\n\n    def update_order(\n        self, order, new_persistence_type: str, force: bool = False\n    ) -&gt; bool:\n        if order.client != self._client:\n            raise OrderError(\n                \"update_order: Order client '{0}' does not match transaction client '{1}'\".format(\n                    order.client, self._client\n                )\n            )\n        if (\n            not force\n            and self._validate_controls(order, OrderPackageType.UPDATE) is False\n        ):\n            return False\n        # update\n        order.update(new_persistence_type)\n        self._pending_update.append((order, None))\n        self._pending_orders = True\n        return True\n\n    def replace_order(\n        self, order, new_price: float, market_version: int = None, force: bool = False\n    ) -&gt; bool:\n        if order.client != self._client:\n            raise OrderError(\n                \"replace_order: Order client '{0}' does not match transaction client '{1}'\".format(\n                    order.client, self._client\n                )\n            )\n        if (\n            not force\n            and self._validate_controls(order, OrderPackageType.REPLACE) is False\n        ):\n            return False\n        # replace\n        order.replace(new_price)\n        self._pending_replace.append((order, market_version))\n        self._pending_orders = True\n        return True\n\n    def execute(self) -&gt; int:\n        packages = []\n        if self._pending_place:\n            packages += self._create_order_package(\n                self._pending_place,\n                OrderPackageType.PLACE,\n                async_=self._async_place_orders,\n            )\n        if self._pending_cancel:\n            packages += self._create_order_package(\n                self._pending_cancel,\n                OrderPackageType.CANCEL,\n            )\n        if self._pending_update:\n            packages += self._create_order_package(\n                self._pending_update,\n                OrderPackageType.UPDATE,\n            )\n        if self._pending_replace:\n            packages += self._create_order_package(\n                self._pending_replace,\n                OrderPackageType.REPLACE,\n            )\n        if packages:\n            for package in packages:\n                self.market.flumine.process_order_package(package)\n            if logger.isEnabledFor(<http:\/\/logging.INFO|logging.INFO>):\n                <http:\/\/logger.info|logger.info>(\n                    \"%s order packages executed in transaction\" % len(packages),\n                    extra={\n                        \"market_id\": self.market.market_id,\n                        \"order_packages\": [o.info for o in packages],\n                        \"transaction_id\": self._id,\n                        \"client_username\": self._client.username,\n                    },\n                )\n            self._pending_orders = False\n        return len(packages)\n\n    def _validate_controls(self, order, package_type: OrderPackageType) -&gt; bool:\n        # return False on violation\n        try:\n            for control in self.market.flumine.trading_controls:\n                control(order, package_type)\n            for control in self._client.trading_controls:\n                control(order, package_type)\n        except ControlError:\n            return False\n        else:\n            return True\n\n    def _create_order_package(\n        self, orders: list, package_type: OrderPackageType, async_: bool = False\n    ) -&gt; list:\n        # group orders by marketVersion\n        orders_grouped = defaultdict(list)\n        for o in orders:\n            orders_grouped[o[1]].append(o[0])\n        # create packages (chunked by limit)\n        limit = BetfairOrderPackage.order_limit(package_type)\n        packages = []\n        for market_version, package_orders in orders_grouped.items():\n            for chunked_orders in chunks(package_orders, limit):\n                packages.append(\n                    BetfairOrderPackage(\n                        client=self._client,\n                        market_id=self.market.market_id,\n                        orders=chunked_orders,\n                        package_type=package_type,\n                        bet_delay=self.market.market_book.bet_delay,\n                    …",
                "title": "<https:\/\/github.com\/betcode-org\/flumine\/blob\/master\/flumine\/execution\/transaction.py | transaction.py>",
                "footer": "<https:\/\/github.com\/betcode-org\/flumine|betcode-org\/flumine>",
                "mrkdwn_in": [
                    "text"
                ]
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+T180",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "had this happen to me aswell when placing a high number of bets in a short amount of time and i ve seen others encounter this too. For me the solution was to chunk bets together into 1 transaction.\ncheck "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/liampauling\/flumine\/blob\/master\/flumine\/execution\/transaction.py"
                            },
                            {
                                "type": "text",
                                "text": "\nObviously only possible when you actually place a bunch of orders on the same market_book update"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649839983.290249",
        "client_msg_id": "da3f9e85-9da4-48c9-9996-8b02e68f875c",
        "text": "I don't use flumine\/bflw but I batch multiple orders per strategy (but have about 14 strategies run concurrently) so even placing large numbers of bets at once it is already going to be split over fewer than 10 calls to placeOrders.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Bj\/QY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I don't use flumine\/bflw but I batch multiple orders per strategy (but have about 14 strategies run concurrently) so even placing large numbers of bets at once it is already going to be split over fewer than 10 calls to placeOrders."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649840064.055289",
        "client_msg_id": "6c3d61b4-0fbd-4c18-87f3-b2f19a11ccf8",
        "text": "I think the problem is coming from too many calls and I possibly need to add some kind of throttle or minimum delay between successive calls to see if it improves things. 12 second delay between transmission of request and receipt of response in a live horse race is ridiculous",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DVN8v",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think the problem is coming from too many calls and I possibly need to add some kind of throttle or minimum delay between successive calls to see if it improves things. 12 second delay between transmission of request and receipt of response in a live horse race is ridiculous"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649846241.796909",
        "client_msg_id": "a8eb0a2b-6244-4232-ba5e-cafff025f380",
        "text": "It's actually cost me a lot of money as I can see it is also causing delay on my cancel orders calls. Must be a bottleneck in my socket component.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DM6D",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It's actually cost me a lot of money as I can see it is also causing delay on my cancel orders calls. Must be a bottleneck in my socket component."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02QDJCK3NW",
        "type": "message",
        "ts": "1649856177.525469",
        "client_msg_id": "e3af59ad-8c11-45e6-b533-32a1cca8dc37",
        "text": "<@UBS7QANF3> could it be used to go to the next SUSPENDED point?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "f9b3fec110b3",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-12-11\/2822937230854_f9b3fec110b36ee68469_72.jpg",
            "first_name": "Nacho",
            "real_name": "Nacho Uve",
            "display_name": "Nacho Uve",
            "team": "T4G9NBD2M",
            "name": "nachouve",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1643718687.489449",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Yw5O",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UBS7QANF3"
                            },
                            {
                                "type": "text",
                                "text": " could it be used to go to the next SUSPENDED point?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1649857012.858049",
        "client_msg_id": "ef820140-31f7-4dfb-a72b-e9c3bcb9e2d3",
        "text": "Yes, something like this:\n\n```import pandas as pd\n\nimport betfairutil\nimport betfairviz\n\nmarket_books = betfairutil.read_prices_file('..\/betfair-hackathon-2021\/1.176457983.bz2')\n\nvolumes_traded = pd.Series(betfairutil.calculate_total_matched(mb) for mb in market_books).diff()\n\npoints_of_interest = [\n    betfairviz.PointOfInterest(\n        text='Market suspension at ' + betfairutil.publish_time_to_datetime(mb['publishTime']).strftime('%Y-%m-%d %H:%M:%S.%f'),\n        timestamp=betfairutil.publish_time_to_datetime(mb['publishTime'])\n    )\n    for prev_mb, mb in zip(market_books, market_books[1:]) if mb['status'] == 'SUSPENDED' and prev_mb['status'] != 'SUSPENDED'\n]\n\nbetfairviz.create_dashboard(market_books, points_of_interest=points_of_interest)```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1643718687.489449",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "KUX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes, something like this:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "import pandas as pd\n\nimport betfairutil\nimport betfairviz\n\nmarket_books = betfairutil.read_prices_file('..\/betfair-hackathon-2021\/1.176457983.bz2')\n\nvolumes_traded = pd.Series(betfairutil.calculate_total_matched(mb) for mb in market_books).diff()\n\npoints_of_interest = [\n    betfairviz.PointOfInterest(\n        text='Market suspension at ' + betfairutil.publish_time_to_datetime(mb['publishTime']).strftime('%Y-%m-%d %H:%M:%S.%f'),\n        timestamp=betfairutil.publish_time_to_datetime(mb['publishTime'])\n    )\n    for prev_mb, mb in zip(market_books, market_books[1:]) if mb['status'] == 'SUSPENDED' and prev_mb['status'] != 'SUSPENDED'\n]\n\nbetfairviz.create_dashboard(market_books, points_of_interest=points_of_interest)"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1649862052.863019",
        "client_msg_id": "12eeccbb-f413-4c1e-a4b9-a78be3ad514e",
        "text": "I have never heard of this or had it occur (as far as I am aware)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lnuQ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I have never heard of this or had it occur (as far as I am aware)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649863503.074009",
        "client_msg_id": "a6f72c40-3fdc-4057-afdb-699a2a59f94d",
        "text": "I'd never noticed it before as I don't routinely check these things but yesterday something felt very \"off\". I looked at time of transmission and time of receipt and was seeing stupid numbers.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9vs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I'd never noticed it before as I don't routinely check these things but yesterday something felt very \"off\". I looked at time of transmission and time of receipt and was seeing stupid numbers."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1649863917.501589",
        "client_msg_id": "3036e335-c605-47e3-97ed-44020a620e15",
        "text": "I would check with Neil, is your assumption this is server side rather than client?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ZMbFE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I would check with Neil, is your assumption this is server side rather than client?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649863961.997449",
        "client_msg_id": "e79321de-9932-4e18-a369-1dd907421e14",
        "text": "Oh I am sure it is client side",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GgfC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Oh I am sure it is client side"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649863996.442229",
        "client_msg_id": "f0501bf4-9f1a-48f0-a820-dabb87c96646",
        "text": "I was running another strategy on another box and didnt have the same issues.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Wl\/CO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I was running another strategy on another box and didnt have the same issues."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649864082.635219",
        "client_msg_id": "fdd7bb53-e103-48aa-a3af-6f66778ce38e",
        "text": "Looking at the betfair \"bet placed\" timestamp I can see that from that point my response comes back in a \"normal\" timeframe for IP horse racing",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6Y4\/E",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Looking at the betfair \"bet placed\" timestamp I can see that from that point my response comes back in a \"normal\" timeframe for IP horse racing"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649864103.709139",
        "client_msg_id": "d18b0a63-43e5-43e1-9f53-fa19ebbee6e0",
        "text": "So I am pretty sure that it is things my end getting bunged up.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "v702",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So I am pretty sure that it is things my end getting bunged up."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UUE6E1LA1",
        "type": "message",
        "ts": "1649864121.551219",
        "client_msg_id": "04354b31-667f-4ce7-90b8-09995b2a51cc",
        "text": "Ill keep an eye on it and see how often it happens",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf53cae45edd",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f53cae45edd7f7b67bbe98819597612e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0017-72.png",
            "first_name": "",
            "real_name": "D C",
            "display_name": "D C",
            "team": "T4G9NBD2M",
            "name": "oddsvantage",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649839421.838259",
        "parent_user_id": "UUE6E1LA1",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jKn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ill keep an eye on it and see how often it happens"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U02QDJCK3NW",
        "type": "message",
        "ts": "1649864638.881369",
        "text": "Nice!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "f9b3fec110b3",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-12-11\/2822937230854_f9b3fec110b36ee68469_72.jpg",
            "first_name": "Nacho",
            "real_name": "Nacho Uve",
            "display_name": "Nacho Uve",
            "team": "T4G9NBD2M",
            "name": "nachouve",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1643718687.489449",
        "parent_user_id": "UBS7QANF3",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "W81x",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Nice!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1649880776.044139",
        "client_msg_id": "e155c5e6-c53d-4c23-b75c-518a31d9e079",
        "text": "These look pretty amazing:\n\n<https:\/\/www.hotukdeals.com\/deals\/list-of-15-free-kindle-ebooks-my-magic-mirror-butterfly-secrets-self-discipline-bad-habit-rabbit-dog-training-trading-bible-3919518|https:\/\/www.hotukdeals.com\/deals\/list-of-15-free-kindle-ebooks-my-magic-mirror-butterf[…]cipline-bad-habit-rabbit-dog-training-trading-bible-3919518>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hvKPl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "These look pretty amazing:\n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.hotukdeals.com\/deals\/list-of-15-free-kindle-ebooks-my-magic-mirror-butterfly-secrets-self-discipline-bad-habit-rabbit-dog-training-trading-bible-3919518",
                                "text": "https:\/\/www.hotukdeals.com\/deals\/list-of-15-free-kindle-ebooks-my-magic-mirror-butterf[…]cipline-bad-habit-rabbit-dog-training-trading-bible-3919518"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U012XF5CNPN",
        "type": "message",
        "ts": "1649889242.900229",
        "client_msg_id": "CA6E4CB2-6EEE-4BB6-B9E1-617B6A74C56D",
        "text": "There's a service where you can get a lorry full of hard drives. Snowball edge is the more common variant though: <https:\/\/aws.amazon.com\/snowball\/|https:\/\/aws.amazon.com\/snowball\/>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gf0a1c4f12dc",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/f0a1c4f12dc16bc00aa5abf1a75d640e.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "Paul",
            "real_name": "Paul Robinson",
            "display_name": "Paul",
            "team": "T4G9NBD2M",
            "name": "paul",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1649262474.437179",
        "parent_user_id": "UBS7QANF3",
        "attachments": [
            {
                "from_url": "https:\/\/aws.amazon.com\/snowball\/",
                "thumb_url": "https:\/\/a0.awsstatic.com\/libra-css\/images\/logos\/aws_logo_smile_179x109.png",
                "thumb_width": 179,
                "thumb_height": 109,
                "service_icon": "https:\/\/a0.awsstatic.com\/libra-css\/images\/site\/touch-icon-iphone-114-smile.png",
                "id": 1,
                "original_url": "https:\/\/aws.amazon.com\/snowball\/",
                "fallback": "Amazon Web Services, Inc.: AWS Snowball | Secure Edge Computing and Offline Data Transfer | Amazon Web Services",
                "text": "AWS Snowball is a petabyte-scale data transport service that uses secure devices to transfer large amounts of data into and out of the AWS Cloud. Snowball addresses challenges like high network costs, long transfer times, and security concerns to migrate data as efficiently as possible.",
                "title": "AWS Snowball | Secure Edge Computing and Offline Data Transfer | Amazon Web Services",
                "title_link": "https:\/\/aws.amazon.com\/snowball\/",
                "service_name": "Amazon Web Services, Inc."
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "djdU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "There's a service where you can get a lorry full of hard drives. Snowball edge is the more common variant though: "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/aws.amazon.com\/snowball\/",
                                "text": "https:\/\/aws.amazon.com\/snowball\/"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]