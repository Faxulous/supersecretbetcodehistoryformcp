[
    {
        "subtype": "channel_join",
        "user": "U02RZ7EPLRG",
        "text": "<@U02RZ7EPLRG> has joined the channel",
        "type": "message",
        "ts": "1640516261.173200"
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640517485.174800",
        "client_msg_id": "ad137ad5-0d42-475e-a193-9d731310f7b4",
        "text": "Anyone know the best way to determine whether a file is pro or basic. Is there a certain attribute which is easiest to determine? Is there something at the market book level or do I have to start looking if atb and atl are empty lists?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640517485.174800",
        "reply_count": 9,
        "reply_users_count": 2,
        "latest_reply": "1640864817.210200",
        "reply_users": [
            "U4H19D1D2",
            "ULDAVFDRP"
        ],
        "replies": [
            {
                "user": "U4H19D1D2",
                "ts": "1640529219.178600"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1640591176.185800"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640592867.186000"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640857488.207100"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640859766.208700"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1640864703.209600"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640864731.209800"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640864752.210000"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640864817.210200"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1640864817.210200",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "g8WVO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Anyone know the best way to determine whether a file is pro or basic. Is there a certain attribute which is easiest to determine? Is there something at the market book level or do I have to start looking if atb and atl are empty lists?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1640527174.176500",
        "client_msg_id": "c1c56643-dadc-4d29-9115-faeab918104e",
        "text": "Betfair keep sending me free bets  (6 on the last month) and my bot performance has been lackluster. Am I at risk of being classified as the wrong sort of VIP?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640527174.176500",
        "reply_count": 3,
        "reply_users_count": 3,
        "latest_reply": "1640682098.186600",
        "reply_users": [
            "ULDAVFDRP",
            "UPMUFSGCR",
            "UGV299K6H"
        ],
        "replies": [
            {
                "user": "ULDAVFDRP",
                "ts": "1640538315.179800"
            },
            {
                "user": "UPMUFSGCR",
                "ts": "1640538697.180100"
            },
            {
                "user": "UGV299K6H",
                "ts": "1640682098.186600"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "w870",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Betfair keep sending me free bets  (6 on the last month) and my bot performance has been lackluster. Am I at risk of being classified as the wrong sort of VIP?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0266A8579B",
        "type": "message",
        "ts": "1640527276.177000",
        "client_msg_id": "d90e7d6d-fa12-446c-86c3-c59403eb6844",
        "text": "You mean the kind of VIP they love? :joy::joy::joy::joy:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "9716da07d96d",
            "image_72": "https:\/\/avatars.slack-edge.com\/2021-06-25\/2219629138132_9716da07d96d5116cddf_72.png",
            "first_name": "Laybot",
            "real_name": "Laybot McBackbot",
            "display_name": "Laybot McBackbot",
            "team": "T4G9NBD2M",
            "name": "zarulshahrin",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/LN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You mean the kind of VIP they love? "
                            },
                            {
                                "type": "emoji",
                                "name": "joy",
                                "unicode": "1f602"
                            },
                            {
                                "type": "emoji",
                                "name": "joy",
                                "unicode": "1f602"
                            },
                            {
                                "type": "emoji",
                                "name": "joy",
                                "unicode": "1f602"
                            },
                            {
                                "type": "emoji",
                                "name": "joy",
                                "unicode": "1f602"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "disappointed",
                "users": [
                    "UPMUFSGCR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1640528046.178300",
        "client_msg_id": "21b0fcc4-8f87-4303-9a61-d674e4ec4fe7",
        "text": "the kind of VIP that gets you a betfair mug eventually, which i thought we are all here for",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Iq=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the kind of VIP that gets you a betfair mug eventually, which i thought we are all here for"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "grin",
                "users": [
                    "U02KJ1RP5NW"
                ],
                "count": 1
            },
            {
                "name": "eggplant",
                "users": [
                    "UPMUFSGCR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1640529219.178600",
        "client_msg_id": "25D74426-46E7-47F9-A1E3-0841E29DA615",
        "text": "I have some logic I can share tomorrow ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640517485.174800",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pwP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I have some logic I can share tomorrow "
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "ULDAVFDRP"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640534987.179400",
        "edited": {
            "user": "ULDAVFDRP",
            "ts": "1640535483.000000"
        },
        "client_msg_id": "c0d0eea7-db15-4b43-9f43-bea1ad218124",
        "text": "ive herd the betfair gilet is the rare item to get <@U01SXA01VAN>",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gGDYO",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "ive herd the betfair gilet is the rare item to get "
                            },
                            {
                                "type": "user",
                                "user_id": "U01SXA01VAN"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "poodle",
                "users": [
                    "UPMUFSGCR"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640538315.179800",
        "edited": {
            "user": "ULDAVFDRP",
            "ts": "1640538415.000000"
        },
        "client_msg_id": "2cfa7f92-5c10-458a-b782-cc126eb61f61",
        "text": "did you work out what was the best market comms % to be on in the end (are teh free bets comming from the 8% tier?)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640527174.176500",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Pefd",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "did you work out what was the best market comms % to be on in the end (are teh free bets comming from the 8% tier?)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UPMUFSGCR",
        "type": "message",
        "ts": "1640538697.180100",
        "client_msg_id": "7d257fac-7116-4921-9f22-19f862db22bf",
        "text": "Yes. But it depends on your strategy. For what I do, 8% is best as my returns are relatively consistent. But if your strategy is less consistent a lower % could be better. <@UGV299K6H> shared a useful spreadsheet for doing the calculations a long time ago.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "31c0bb5a442c",
            "image_72": "https:\/\/avatars.slack-edge.com\/2019-10-28\/812386967189_31c0bb5a442c5b8d2c61_72.png",
            "first_name": "Jon",
            "real_name": "Jon Jon Jon Jon Jon Jon Jon Jon",
            "display_name": "Jonjonjon",
            "team": "T4G9NBD2M",
            "name": "fcmisc",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640527174.176500",
        "parent_user_id": "UPMUFSGCR",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "OT3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yes. But it depends on your strategy. For what I do, 8% is best as my returns are relatively consistent. But if your strategy is less consistent a lower % could be better. "
                            },
                            {
                                "type": "user",
                                "user_id": "UGV299K6H"
                            },
                            {
                                "type": "text",
                                "text": " shared a useful spreadsheet for doing the calculations a long time ago."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "ULDAVFDRP"
                ],
                "count": 1
            }
        ]
    },
    {
        "subtype": "channel_join",
        "user": "U02SP873KNC",
        "text": "<@U02SP873KNC> has joined the channel",
        "type": "message",
        "ts": "1640539297.180400"
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640539912.181100",
        "client_msg_id": "57e87c41-a999-494d-866c-4c5ba9f9f867",
        "text": "anyone have similar functions that can point to optimisations:\n```@staticmethod\ndef _calculate_traded_volume(runner_book: Dict[str, Any]) -&gt; float:\n    return sum([t['size'] for t in runner_book['ex']['tradedVolume']])\n\n@staticmethod\ndef _volumes_and_prices(\n    volumes: List[Dict[str, float]], min_win_amount: float = None\n) -&gt; Tuple[Optional[float], Optional[float]]:\n    if volumes:\n        if min_win_amount:\n            volume_total = 0\n            volume_price = None\n            for pv in volumes:\n                if volume_total &lt; min_win_amount:\n                    volume_total += pv['size'] * (pv['price'] -1)\n                    volume_price = pv['price']\n                else:\n                    return volume_price, volume_total\n        else:\n            return volumes[0]['price'], volumes[0]['size']\n    return None, None```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "reply_count": 20,
        "reply_users_count": 3,
        "latest_reply": "1640556943.185600",
        "reply_users": [
            "UBS7QANF3",
            "ULDAVFDRP",
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1640540198.181300"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640540341.181500"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640540427.181700"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1640540570.181900"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640540649.182100"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640540726.182300"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640540796.182600"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1640540992.182800"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640541017.183100"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640541038.183300"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1640541064.183500"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1640541098.183700"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640541141.183900"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1640541814.184100"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640541947.184300"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1640546381.184700"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640546446.184900"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640546466.185100"
            },
            {
                "user": "ULDAVFDRP",
                "ts": "1640547012.185300"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1640556943.185600"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1640556943.185600",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "K6y",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "anyone have similar functions that can point to optimisations:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "@staticmethod\ndef _calculate_traded_volume(runner_book: Dict[str, Any]) -> float:\n    return sum([t['size'] for t in runner_book['ex']['tradedVolume']])\n\n@staticmethod\ndef _volumes_and_prices(\n    volumes: List[Dict[str, float]], min_win_amount: float = None\n) -> Tuple[Optional[float], Optional[float]]:\n    if volumes:\n        if min_win_amount:\n            volume_total = 0\n            volume_price = None\n            for pv in volumes:\n                if volume_total < min_win_amount:\n                    volume_total += pv['size'] * (pv['price'] -1)\n                    volume_price = pv['price']\n                else:\n                    return volume_price, volume_total\n        else:\n            return volumes[0]['price'], volumes[0]['size']\n    return None, None"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1640540198.181300",
        "client_msg_id": "e8cd0025-4c78-4380-a5a6-62b0fa3ff2f1",
        "text": "Not sure exactly what you're asking but have you looked at what's in <https:\/\/github.com\/mberk\/betfairutil|betfairutil>?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "i3gh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not sure exactly what you're asking but have you looked at what's in "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/mberk\/betfairutil",
                                "text": "betfairutil"
                            },
                            {
                                "type": "text",
                                "text": "?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640540341.181500",
        "client_msg_id": "b98d8632-7e20-4ea0-976e-d6abc144d9d4",
        "text": "yup gonna use that for market book differences for sure. I want to batch run some code against like 85k price files, which looks like it will take a fair few hours. Just wondering if the more technical python chaps can find optimisations in the above code to reduce timings",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "w8Z",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yup gonna use that for market book differences for sure. I want to batch run some code against like 85k price files, which looks like it will take a fair few hours. Just wondering if the more technical python chaps can find optimisations in the above code to reduce timings"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640540427.181700",
        "client_msg_id": "56cc5cec-5c3c-4b4d-ae3c-411fc48d4e42",
        "text": "relooking now just to see if there better optimised functions that achieve what im looking todo",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "4UbG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "relooking now just to see if there better optimised functions that achieve what im looking todo"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1640540570.181900",
        "client_msg_id": "f29e7234-fb37-4448-bfcd-ef5b482c43f1",
        "text": "Immediate reaction: Rewrite this:\n```sum([t['size'] for t in runner_book['ex']['tradedVolume']])```\nas this:\n```sum(t['size'] for t in runner_book['ex']['tradedVolume'])```\n(no need to construct the list as a generator is an iterator)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HTTK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Immediate reaction: Rewrite this:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "sum([t['size'] for t in runner_book['ex']['tradedVolume']])"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "as this:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "sum(t['size'] for t in runner_book['ex']['tradedVolume'])"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "(no need to construct the list as a generator is an iterator)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640540649.182100",
        "client_msg_id": "55c701c7-033e-4e26-a1c9-bdb527774ce2",
        "text": "nice cheers, good spot (bad habbit there I think)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VxVR2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "nice cheers, good spot (bad habbit there I think)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640540726.182300",
        "edited": {
            "user": "ULDAVFDRP",
            "ts": "1640540741.000000"
        },
        "client_msg_id": "d08ce253-640b-4feb-89db-3edb0bd163f6",
        "text": "I guess the killer is _volumes_and_prices which gets called per active runner per update. anything there you can see? otherwise I guess its some kind of caching from the previous market book update",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QZPrf",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I guess the killer is _volumes_and_prices which gets called per active runner per update. anything there you can see? otherwise I guess its some kind of caching from the previous market book update"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640540796.182600",
        "client_msg_id": "d05474dd-6595-451d-8229-cb4c2d7da199",
        "text": "maybe some use for betfairutil in that function also or something similar?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "QFv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "maybe some use for betfairutil in that function also or something similar?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1640540992.182800",
        "edited": {
            "user": "UBS7QANF3",
            "ts": "1640541013.000000"
        },
        "client_msg_id": "db8b4910-4a5a-4385-8cde-191c9cabdde0",
        "text": "If I understand the function correctly, I think `get_best_price_size` does more or less the same thing when `min_win_amount` is `None`?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "geyFb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "If I understand the function correctly, I think "
                            },
                            {
                                "type": "text",
                                "text": "get_best_price_size",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " does more or less the same thing when "
                            },
                            {
                                "type": "text",
                                "text": "min_win_amount",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is "
                            },
                            {
                                "type": "text",
                                "text": "None",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640541017.183100",
        "client_msg_id": "4a7d19da-c51f-4543-bef8-d262e43e87f4",
        "text": "looking to build some features that also take into account min win amounts",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "owzh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "looking to build some features that also take into account min win amounts"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640541038.183300",
        "client_msg_id": "41300927-75f1-4c97-b913-a6aaff8c2941",
        "text": "£2 @ some odds is irrelevant in most cases as best availables",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "J=BkT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "£2 @ some odds is irrelevant in most cases as best availables"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1640541064.183500",
        "client_msg_id": "dec6abf5-5e29-407c-a031-2bbad472f4d8",
        "text": "Yeah makes sense",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "b=Si",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah makes sense"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1640541098.183700",
        "client_msg_id": "7ae3ff9f-32dd-4bc4-bbca-c79ae1f09f93",
        "text": "and to be clear the functions in `betfairutil` are more written with code clarity\/cleanliness in mind than speed",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3WmJ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "and to be clear the functions in "
                            },
                            {
                                "type": "text",
                                "text": "betfairutil",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " are more written with code clarity\/cleanliness in mind than speed"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640541141.183900",
        "client_msg_id": "9d952f60-8822-48e8-ab9e-6388bc98c6b6",
        "text": "the code is very good looking :slightly_smiling_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "3SAZz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "the code is very good looking "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1640541814.184100",
        "client_msg_id": "b14cae58-9a7e-4e7a-9907-07a5e992e646",
        "text": "So from a clean code perspective I'd probably envisage adding a function like `rollup_runner_book` to `betfairutil` and then you'd just call `get_best_price_size(rollup_runner_book(runner_book, rollup=x))` but that wouldn't be fast\n\nOnly suggestions for speeding up your function are to rewrite it like this:\n```@staticmethod\ndef _volumes_and_prices(\n    volumes: List[Dict[str, float]], min_win_amount: float\n) -&gt; Tuple[Optional[float], Optional[float]]:\n    volume_total = 0\n    volume_price = None\n    for pv in volumes:\n        if volume_total &lt; min_win_amount:\n            volume_total += pv['size'] * (pv['price'] -1)\n            volume_price = pv['price']\n        else:\n            return volume_price, volume_total\n    return None, None```\ni.e. `min_win_amount` is not allowed to be `None`. That way you avoid testing the 2 conditions",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "VIPF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "So from a clean code perspective I'd probably envisage adding a function like "
                            },
                            {
                                "type": "text",
                                "text": "rollup_runner_book",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to "
                            },
                            {
                                "type": "text",
                                "text": "betfairutil",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and then you'd just call "
                            },
                            {
                                "type": "text",
                                "text": "get_best_price_size(rollup_runner_book(runner_book, rollup=x))",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " but that wouldn't be fast\n\nOnly suggestions for speeding up your function are to rewrite it like this:\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "@staticmethod\ndef _volumes_and_prices(\n    volumes: List[Dict[str, float]], min_win_amount: float\n) -> Tuple[Optional[float], Optional[float]]:\n    volume_total = 0\n    volume_price = None\n    for pv in volumes:\n        if volume_total < min_win_amount:\n            volume_total += pv['size'] * (pv['price'] -1)\n            volume_price = pv['price']\n        else:\n            return volume_price, volume_total\n    return None, None"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "i.e. "
                            },
                            {
                                "type": "text",
                                "text": "min_win_amount",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is not allowed to be "
                            },
                            {
                                "type": "text",
                                "text": "None",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". That way you avoid testing the 2 conditions"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640541947.184300",
        "client_msg_id": "4ca463fd-4513-4fbd-be86-ccfc38c648bf",
        "text": "yer makes sense on the uncessary list check and changing default just to 0 on min_win_amount",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ifbs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yer makes sense on the uncessary list check and changing default just to 0 on min_win_amount"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1640546381.184700",
        "client_msg_id": "E47027BE-F360-4FF4-BB67-FDE61B4EB243",
        "text": "You profiled it? ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ElS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "You profiled it? "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640546446.184900",
        "client_msg_id": "37cd30b5-dcf2-4cd4-a36d-7ac46c7262ad",
        "text": "not using cprofile or whatever its called but removing that function takes the file from ~30 secs to 2 secs",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nFh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "not using cprofile or whatever its called but removing that function takes the file from ~30 secs to 2 secs"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640546466.185100",
        "client_msg_id": "ccf1b14d-6593-486a-97ba-7985206796ac",
        "text": "just optimising now based on rc updates",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/Mq",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "just optimising now based on rc updates"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "ULDAVFDRP",
        "type": "message",
        "ts": "1640547012.185300",
        "client_msg_id": "7cde7b8e-95e2-4b65-9d0a-263554c426da",
        "text": "yup down to around 9 seconds with caching and only updating against rc changes",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g46fe1c1bf03",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/b46fe1c1bf03e18d951e7032fb494283.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0019-72.png",
            "first_name": "",
            "real_name": "Oliver Varney",
            "display_name": "Oliver Varney",
            "team": "T4G9NBD2M",
            "name": "oliverashleyvarney",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "OW3Yv",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "yup down to around 9 seconds with caching and only updating against rc changes"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1640556943.185600",
        "client_msg_id": "46E85B1B-DF91-4F85-9CE6-2F2A249ACEE9",
        "text": ":sunglasses:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640539912.181100",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "oJYbV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "emoji",
                                "name": "sunglasses",
                                "unicode": "1f60e"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1640591176.185800",
        "client_msg_id": "750cc0ba-755d-4a3c-95f5-d05d20de1faf",
        "text": "This is the best logic I have found but welcome any improvements \/ strip out the stuff you don't need\n\n```def get_market_definitions(file, func, arg: str = \"filename\") -&gt; dict:\n    \"\"\"Get marketDefinitions and file\n    metadata:\n        BASIC: ['id', 'marketDefinition', 'rc']\n               ['id', 'hc', 'ltp']\n        ADVANCED: ['id', 'marketDefinition', 'rc', 'tv']\n                  ['id', 'hc', 'ltp', 'tv', 'trd', 'batb', 'batl']\n        PRO: ['id', 'marketDefinition', 'rc', 'con', 'img', 'tv']\n             ['id', 'hc', 'ltp', 'tv', 'trd', 'atb', 'atl', 'spn', 'spf', 'spl', 'spb']\n    \"\"\"\n    _mds, data_package, op = {}, \"BASIC\", \"\"\n    with func(**{arg: file}) as f:\n        for line_count, line in enumerate(f.readlines(), 1):\n            if b'\"marketDefinition\":' in line:\n                update = json.loads(line)\n                for market_update in update[\"mc\"]:\n                    if \"marketDefinition\" in market_update:\n                        _mds[market_update[\"id\"]] = market_update[\"marketDefinition\"]\n            if b'\"batb\":' in line:\n                data_package = \"ADVANCED\"\n            if b'\"atb\":' in line:\n                data_package = \"PRO\"\n        else:\n            update = json.loads(line)\n            op = update[\"op\"]\n    mds = {k: _process_definition(k, v) for k, v in _mds.items()}\n    return {\n        \"metadata\": _get_file_metadata(file, line_count, mds, data_package, op),\n        \"market_definitions\": mds,\n    }```\n",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1640517485.174800",
        "parent_user_id": "ULDAVFDRP",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5vL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This is the best logic I have found but welcome any improvements \/ strip out the stuff you don't need\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "def get_market_definitions(file, func, arg: str = \"filename\") -> dict:\n    \"\"\"Get marketDefinitions and file\n    metadata:\n        BASIC: ['id', 'marketDefinition', 'rc']\n               ['id', 'hc', 'ltp']\n        ADVANCED: ['id', 'marketDefinition', 'rc', 'tv']\n                  ['id', 'hc', 'ltp', 'tv', 'trd', 'batb', 'batl']\n        PRO: ['id', 'marketDefinition', 'rc', 'con', 'img', 'tv']\n             ['id', 'hc', 'ltp', 'tv', 'trd', 'atb', 'atl', 'spn', 'spf', 'spl', 'spb']\n    \"\"\"\n    _mds, data_package, op = {}, \"BASIC\", \"\"\n    with func(**{arg: file}) as f:\n        for line_count, line in enumerate(f.readlines(), 1):\n            if b'\"marketDefinition\":' in line:\n                update = json.loads(line)\n                for market_update in update[\"mc\"]:\n                    if \"marketDefinition\" in market_update:\n                        _mds[market_update[\"id\"]] = market_update[\"marketDefinition\"]\n            if b'\"batb\":' in line:\n                data_package = \"ADVANCED\"\n            if b'\"atb\":' in line:\n                data_package = \"PRO\"\n        else:\n            update = json.loads(line)\n            op = update[\"op\"]\n    mds = {k: _process_definition(k, v) for k, v in _mds.items()}\n    return {\n        \"metadata\": _get_file_metadata(file, line_count, mds, data_package, op),\n        \"market_definitions\": mds,\n    }"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": []
                    }
                ]
            }
        ]
    }
]