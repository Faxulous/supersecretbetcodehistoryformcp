[
    {
        "user": "U0422MY07K4",
        "type": "message",
        "ts": "1663323038.960899",
        "client_msg_id": "e24f4bfb-9ef4-4d15-8cf4-8834d2c5bce5",
        "text": "Hey guys. Can anyone point me in the right direction to get a fasttrack api key?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g35026ba093f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/35026ba093f9eb71e8ca2b5ae6a27924.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-72.png",
            "first_name": "Zenith",
            "real_name": "Zenith",
            "display_name": "Zenith",
            "team": "T4G9NBD2M",
            "name": "zenith",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663323038.960899",
        "reply_count": 4,
        "reply_users_count": 2,
        "latest_reply": "1663324981.663149",
        "reply_users": [
            "UBS7QANF3",
            "U0422MY07K4"
        ],
        "replies": [
            {
                "user": "UBS7QANF3",
                "ts": "1663323787.718689"
            },
            {
                "user": "U0422MY07K4",
                "ts": "1663324185.569229"
            },
            {
                "user": "UBS7QANF3",
                "ts": "1663324352.144999"
            },
            {
                "user": "U0422MY07K4",
                "ts": "1663324981.663149"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "r0w1",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Hey guys. Can anyone point me in the right direction to get a fasttrack api key?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1663323787.718689",
        "client_msg_id": "7EDA80AB-191C-4441-B226-6DC80C72BC73",
        "text": "I think you want the Australian Slack",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663323038.960899",
        "parent_user_id": "U0422MY07K4",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UrMR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think you want the Australian Slack"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U0422MY07K4",
        "type": "message",
        "ts": "1663324185.569229",
        "client_msg_id": "4ecaa50a-2a4c-4424-9806-5b2d5eab2515",
        "text": "Ahh, thank you. Any chance you could share an invite link or add me there?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g35026ba093f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/35026ba093f9eb71e8ca2b5ae6a27924.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-72.png",
            "first_name": "Zenith",
            "real_name": "Zenith",
            "display_name": "Zenith",
            "team": "T4G9NBD2M",
            "name": "zenith",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663323038.960899",
        "parent_user_id": "U0422MY07K4",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "dJ9w",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Ahh, thank you. Any chance you could share an invite link or add me there?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UBS7QANF3",
        "type": "message",
        "ts": "1663324352.144999",
        "client_msg_id": "70D4C4FC-2BA3-4378-806D-88C1EFFE8194",
        "text": "This page <https:\/\/betfair-datascientists.github.io\/#|https:\/\/betfair-datascientists.github.io\/#> says you just need to email <mailto:automation@betfair.com.au|automation@betfair.com.au> for access",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gaaf844a4a90",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/eaaf844a4a905431d83430e563b077aa.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png",
            "first_name": "",
            "real_name": "Maurice Berk",
            "display_name": "Mo",
            "team": "T4G9NBD2M",
            "name": "maurice",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663323038.960899",
        "parent_user_id": "U0422MY07K4",
        "attachments": [
            {
                "from_url": "https:\/\/betfair-datascientists.github.io\/",
                "service_icon": "https:\/\/betfair-datascientists.github.io\/img\/BetfairFavicon.ico",
                "id": 1,
                "original_url": "https:\/\/betfair-datascientists.github.io\/#",
                "fallback": "The Automation Hub",
                "text": "Documentation, guides and articles on creating, developing and implementing automated betting strategies, using data analysis to inform betting models and how to interact with the Betfair API.",
                "title": "The Automation Hub",
                "title_link": "https:\/\/betfair-datascientists.github.io\/",
                "service_name": "betfair-datascientists.github.io"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HrE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "This page "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/betfair-datascientists.github.io\/#",
                                "text": "https:\/\/betfair-datascientists.github.io\/#"
                            },
                            {
                                "type": "text",
                                "text": " says you just need to email "
                            },
                            {
                                "type": "link",
                                "url": "mailto:automation@betfair.com.au",
                                "text": "automation@betfair.com.au",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": " for access"
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U0422MY07K4"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "U0422MY07K4",
        "type": "message",
        "ts": "1663324981.663149",
        "client_msg_id": "4ad691dd-cdba-4f3b-9c65-dfd9ce971edb",
        "text": "Thanks Mo, appreciate the help.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g35026ba093f",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/35026ba093f9eb71e8ca2b5ae6a27924.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-72.png",
            "first_name": "Zenith",
            "real_name": "Zenith",
            "display_name": "Zenith",
            "team": "T4G9NBD2M",
            "name": "zenith",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663323038.960899",
        "parent_user_id": "U0422MY07K4",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "wOu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thanks Mo, appreciate the help."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1663336932.130679",
        "client_msg_id": "6af111f3-c122-42d7-bb6a-653ade4e7675",
        "text": "<@U4H19D1D2> I'm getting in a muddle with Event Processing. I could have sworn I had it working previously, but either I somehow imagined that or I've done something wrong.\n\nIf I have a series of self recorded markets, presumably I need to self create an event file, so is the a correct way to go about this, i.e. is there some kind of template I can copy?\n\nOnce I have created the event files, presumably I just pass them as I would a standard market file, but ensure the event_processing flag is set to True?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "=VIn",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " I'm getting in a muddle with Event Processing. I could have sworn I had it working previously, but either I somehow imagined that or I've done something wrong.\n\nIf I have a series of self recorded markets, presumably I need to self create an event file, so is the a correct way to go about this, i.e. is there some kind of template I can copy?\n\nOnce I have created the event files, presumably I just pass them as I would a standard market file, but ensure the event_processing flag is set to True?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1663337541.419679",
        "client_msg_id": "cc4ce694-facb-4e6f-845e-b68209743198",
        "text": "Just pass the files in and set event_processing to True, it does it all",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ENkV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Just pass the files in and set event_processing to True, it does it all"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1663337685.510009",
        "client_msg_id": "bf36466b-58f6-4b76-9377-7c1bffd37756",
        "text": "IIRK There are some edge cases where it won't work, e.g. if not all the markets for a race share an event_id such as happens for GB greyhounds.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "fXj",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "IIRK There are some edge cases where it won't work, e.g. if not all the markets for a race share an event_id such as happens for GB greyhounds."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1663337760.758119",
        "client_msg_id": "22FC69BD-D424-4ABC-8A2E-29C1B65DC795",
        "text": "Yeah it uses the eventId, tbh would be easy to add a flag to just event process everything you give it (will come at a CPU cost)",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kYVUW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah it uses the eventId, tbh would be easy to add a flag to just event process everything you give it (will come at a CPU cost)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1663337954.518079",
        "client_msg_id": "b0ceb9d7-441c-4ce0-8e15-f6c91e148a0a",
        "text": "I used to create event files myself (pretty much the same way flumine does, not sure if it didnt exist back then or if i overlooked it), but now as i m getting some weird results (vaidation failed due to some negative numbers as <@U4H19D1D2> probs remembers <https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1663231320648429> ), i wanted to switch to using the method implemented in flumine. Is there anything more it does than creating those event_files that maybe my current code didnt do?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "attachments": [
            {
                "from_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1663231320648429",
                "ts": "1663231320.648429",
                "author_id": "U01DVUAE2G1",
                "channel_team": "T4G9NBD2M",
                "channel_id": "C4H05ML2E",
                "is_msg_unfurl": true,
                "message_blocks": [
                    {
                        "team": "T4G9NBD2M",
                        "channel": "C4H05ML2E",
                        "ts": "1663231320.648429",
                        "message": {
                            "blocks": [
                                {
                                    "type": "rich_text",
                                    "block_id": "OCU\/",
                                    "elements": [
                                        {
                                            "type": "rich_text_section",
                                            "elements": [
                                                {
                                                    "type": "text",
                                                    "text": "Hey ppl,\nI am currently implementing the transaction class for placing orders (instead of market.place_order).\nAfter the change, during simulation i get a lot of these errors:\n"
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "\"Order has violated: STRATEGY_EXPOSURE Error: strategy.validate_order failed: reset_elapsed_seconds (-0.188) < reset_seconds (0.0)\"",
                                                    "style": {
                                                        "code": true
                                                    }
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "\nAnyone have a clue on how that negative number comes to be?"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                ],
                "id": 1,
                "original_url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1663231320648429",
                "fallback": "[September 15th, 2022 1:42 AM] smiffyaaron: Hey ppl,\nI am currently implementing the transaction class for placing orders (instead of market.place_order).\nAfter the change, during simulation i get a lot of these errors:\n`\"Order has violated: STRATEGY_EXPOSURE Error: strategy.validate_order failed: reset_elapsed_seconds (-0.188) &lt; reset_seconds (0.0)\"`\nAnyone have a clue on how that negative number comes to be?",
                "text": "Hey ppl,\nI am currently implementing the transaction class for placing orders (instead of market.place_order).\nAfter the change, during simulation i get a lot of these errors:\n`\"Order has violated: STRATEGY_EXPOSURE Error: strategy.validate_order failed: reset_elapsed_seconds (-0.188) &lt; reset_seconds (0.0)\"`\nAnyone have a clue on how that negative number comes to be?",
                "author_name": "Aaron Smith",
                "author_link": "https:\/\/betcode-org.slack.com\/team\/U01DVUAE2G1",
                "author_icon": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-48.png",
                "author_subname": "Aaron Smith",
                "mrkdwn_in": [
                    "text"
                ],
                "footer": "Slack conversation"
            }
        ],
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "tSDz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I used to create event files myself (pretty much the same way flumine does, not sure if it didnt exist back then or if i overlooked it), but now as i m getting some weird results (vaidation failed due to some negative numbers as "
                            },
                            {
                                "type": "user",
                                "user_id": "U4H19D1D2"
                            },
                            {
                                "type": "text",
                                "text": " probs remembers "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/betcode-org.slack.com\/archives\/C4H05ML2E\/p1663231320648429"
                            },
                            {
                                "type": "text",
                                "text": " ), i wanted to switch to using the method implemented in flumine. Is there anything more it does than creating those event_files that maybe my current code didnt do?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1663338000.101109",
        "client_msg_id": "44b9d8b4-7a8d-42df-a969-4628ccb34eff",
        "text": "I ll probs switch anyway, but i m still curious on what goes wrong on my end :smile:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XyyA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I ll probs switch anyway, but i m still curious on what goes wrong on my end "
                            },
                            {
                                "type": "emoji",
                                "name": "smile",
                                "unicode": "1f604"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1663338003.461259",
        "client_msg_id": "5FCD7301-7D1D-4BA5-B242-C946A8C01D1F",
        "text": "Method?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663338003.461259",
        "reply_count": 4,
        "reply_users_count": 2,
        "latest_reply": "1663338217.789459",
        "reply_users": [
            "U01DVUAE2G1",
            "U4H19D1D2"
        ],
        "replies": [
            {
                "user": "U01DVUAE2G1",
                "ts": "1663338054.890729"
            },
            {
                "user": "U01DVUAE2G1",
                "ts": "1663338079.714089"
            },
            {
                "user": "U4H19D1D2",
                "ts": "1663338147.183989"
            },
            {
                "user": "U01DVUAE2G1",
                "ts": "1663338217.789459"
            }
        ],
        "is_locked": false,
        "subscribed": true,
        "last_read": "1663338217.789459",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rR4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Method?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1663338054.890729",
        "client_msg_id": "14902f94-6e06-4ef7-ba28-e1a0574ba1c4",
        "text": "```    def merge_markets(self, market_id_to_market_paths):\n        market_paths = list(market_id_to_market_paths.values())\n\n        market_updates = []\n        for path in market_paths:\n            with open(path, 'r') as f:\n                for line in f:\n                    market_updates.append(json.loads(line))\n\n        market_updates.sort(key=lambda x: int(x['pt']))\n\n        file_name = ''\n        for market_id in market_id_to_market_paths.keys():\n            file_name += str(market_id) + '_'\n        file_name += '.json'\n\n        merged_markets_path = os.path.join(self.data_dir_path, file_name)\n\n        if file_name not in os.listdir(self.data_dir_path):\n            with open(merged_markets_path, 'a') as f:\n                for update in market_updates:\n                    json.dump(update, f)\n                    f.write(\"\\n\")\n\n        return merged_markets_path```",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663338003.461259",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "CaKra",
                "elements": [
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "    def merge_markets(self, market_id_to_market_paths):\n        market_paths = list(market_id_to_market_paths.values())\n\n        market_updates = []\n        for path in market_paths:\n            with open(path, 'r') as f:\n                for line in f:\n                    market_updates.append(json.loads(line))\n\n        market_updates.sort(key=lambda x: int(x['pt']))\n\n        file_name = ''\n        for market_id in market_id_to_market_paths.keys():\n            file_name += str(market_id) + '_'\n        file_name += '.json'\n\n        merged_markets_path = os.path.join(self.data_dir_path, file_name)\n\n        if file_name not in os.listdir(self.data_dir_path):\n            with open(merged_markets_path, 'a') as f:\n                for update in market_updates:\n                    json.dump(update, f)\n                    f.write(\"\\n\")\n\n        return merged_markets_path"
                            }
                        ],
                        "border": 0
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1663338079.714089",
        "client_msg_id": "dde68439-7c99-4f03-b53d-3f6f1041e216",
        "text": "not as efficient, but it sorts be publish time, which should be all that is needed?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663338003.461259",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "2ti",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "not as efficient, but it sorts be publish time, which should be all that is needed?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U4H19D1D2",
        "type": "message",
        "ts": "1663338147.183989",
        "client_msg_id": "5CE5C08D-7DF6-468D-B55C-AAA9B6D9A51C",
        "text": "I believe so but something is wrong if you are getting negative values ",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "137c5a3ef323",
            "image_72": "https:\/\/avatars.slack-edge.com\/2024-03-15\/6819395173841_137c5a3ef323f1944a1a_72.png",
            "first_name": "liam",
            "real_name": "liam",
            "display_name": "liam",
            "team": "T4G9NBD2M",
            "name": "liam",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663338003.461259",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SIFvQ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I believe so but something is wrong if you are getting negative values "
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U01DVUAE2G1",
        "type": "message",
        "ts": "1663338217.789459",
        "client_msg_id": "963c5aba-bc32-4197-834f-efe109f309c2",
        "text": "indeed :smile: though its been working for pretty long, and the new code (using transaction class) looks like it could never produce such error. Well, i ll see once i use flumines internal method :slightly_smiling_face:",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "gd87aca58eae",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/d87aca58eaeabd0a953b4bc4204bbbaf.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Aaron Smith",
            "display_name": "Aaron Smith",
            "team": "T4G9NBD2M",
            "name": "smiffyaaron",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663338003.461259",
        "parent_user_id": "U4H19D1D2",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TI4s",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "indeed "
                            },
                            {
                                "type": "emoji",
                                "name": "smile",
                                "unicode": "1f604"
                            },
                            {
                                "type": "text",
                                "text": " though its been working for pretty long, and the new code (using transaction class) looks like it could never produce such error. Well, i ll see once i use flumines internal method "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1663338373.869509",
        "client_msg_id": "b3b4e02b-b5b9-456d-bc83-64cffdedb00d",
        "text": "Its interesting, as I was convinced I had it working before as I have previous results sets where it looks fine, having just passed the markets, however now it doesn't work (the event_id's match so there shouldn't be any issue there).\n\nHave tried with GB \/ IRE horses and football, yet it doesn't work, code is fine as it works when paper trading.\n\nWill try and run a single event and see if I can figure what's going on here...",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "V1q+B",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Its interesting, as I was convinced I had it working before as I have previous results sets where it looks fine, having just passed the markets, however now it doesn't work (the event_id's match so there shouldn't be any issue there).\n\nHave tried with GB \/ IRE horses and football, yet it doesn't work, code is fine as it works when paper trading.\n\nWill try and run a single event and see if I can figure what's going on here..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1663340136.299989",
        "client_msg_id": "7b41e0cb-cf8e-463d-bb8a-cd158f5a1d9c",
        "text": "Interestingly it appears to be because I'm using multi-processing.\n\nI typically have 8 markets per process, so just as a test I loaded 596 markets and set markets_per_process = 596 and it worked.\n\nPresumably this is logical as I guess the markets within an event can get split up across different processes and then when calling market.event.get(MARKET_TYPE) there would be None returned.\n\nSo...is there a solution to use event processing and multi-proc at the same time?",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "EoEq=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Interestingly it appears to be because I'm using multi-processing.\n\nI typically have 8 markets per process, so just as a test I loaded 596 markets and set markets_per_process = 596 and it worked.\n\nPresumably this is logical as I guess the markets within an event can get split up across different processes and then when calling market.event.get(MARKET_TYPE) there would be None returned.\n\nSo...is there a solution to use event processing and multi-proc at the same time?"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "U9JHLMZB4",
        "type": "message",
        "ts": "1663340593.295379",
        "edited": {
            "user": "U9JHLMZB4",
            "ts": "1663341074.000000"
        },
        "client_msg_id": "b8803d66-f386-4f2f-bccd-60cbd09ac627",
        "text": "I do it by extracting groups of event-related markets from my DB records and passing each group into the process function that I pass into multi-processing.\n```races = [\n    (win_mkt_id_1, place_mkt_id_1, each_way_mkt_id_1),\n    ...\n    (win_mkt_id_n, place_mkt_id_n, each_way_mkt_id_n),\n]\nwith futures.ProcessPoolExecutor() as executor:\n    results = executor.map(run_backtest, races)```\nwhere run_backtest expands the market_ids into filepaths and delivers them to the market filter and event processing manages the merging.",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g951ddcb43e7",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/3951ddcb43e788a387d6daf330dad5ca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0018-72.png",
            "first_name": "",
            "real_name": "Peter Coles",
            "display_name": "Peter",
            "team": "T4G9NBD2M",
            "name": "peter",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "thread_ts": "1663340593.295379",
        "reply_count": 6,
        "reply_users_count": 2,
        "latest_reply": "1663513330.604599",
        "reply_users": [
            "UFTBRB3F1",
            "U9JHLMZB4"
        ],
        "replies": [
            {
                "user": "UFTBRB3F1",
                "ts": "1663418423.863989"
            },
            {
                "user": "UFTBRB3F1",
                "ts": "1663418697.331339"
            },
            {
                "user": "UFTBRB3F1",
                "ts": "1663418842.981809"
            },
            {
                "user": "UFTBRB3F1",
                "ts": "1663420686.698479"
            },
            {
                "user": "U9JHLMZB4",
                "ts": "1663510587.621649"
            },
            {
                "user": "UFTBRB3F1",
                "ts": "1663513330.604599"
            }
        ],
        "is_locked": false,
        "subscribed": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gzDI\/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I do it by extracting groups of event-related markets from my DB records and passing each group into the process function that I pass into multi-processing.\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "races = [\n    (win_mkt_id_1, place_mkt_id_1, each_way_mkt_id_1),\n    ...\n    (win_mkt_id_n, place_mkt_id_n, each_way_mkt_id_n),\n]\nwith futures.ProcessPoolExecutor() as executor:\n    results = executor.map(run_backtest, races)"
                            }
                        ],
                        "border": 0
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "where run_backtest expands the market_ids into filepaths and delivers them to the market filter and event processing manages the merging."
                            }
                        ]
                    }
                ]
            }
        ],
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U4H19D1D2"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1663340810.466719",
        "client_msg_id": "300640b5-405b-4533-8fd7-5dd7f3224792",
        "text": "Yep, that makes sense, think I may copy that approach!",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "pridE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yep, that makes sense, think I may copy that approach!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "user": "UFTBRB3F1",
        "type": "message",
        "ts": "1663340816.814719",
        "client_msg_id": "f94f8216-197c-4ea4-871c-1c9b16cf06f5",
        "text": "Thank you for the suggestion",
        "team": "T4G9NBD2M",
        "user_team": "T4G9NBD2M",
        "source_team": "T4G9NBD2M",
        "user_profile": {
            "avatar_hash": "g771e110be94",
            "image_72": "https:\/\/secure.gravatar.com\/avatar\/a771e110be945b86bede9d5c1bb551e3.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png",
            "first_name": "",
            "real_name": "Newbie99",
            "display_name": "",
            "team": "T4G9NBD2M",
            "name": "vjmehra",
            "is_restricted": false,
            "is_ultra_restricted": false
        },
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Sur",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Thank you for the suggestion"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "What sort of CPU utilisations do people have on their servers? This is mine. I'm wondering if it's likely to be a problem or not.\n\nIt's a machine with 2 CPU cores and 4GB RAM.",
        "files": [
            {
                "id": "F042LAXMQRL",
                "mode": "hidden_by_limit"
            }
        ],
        "upload": false,
        "user": "UPMUFSGCR",
        "display_as_bot": false,
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+PH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "What sort of CPU utilisations do people have on their servers? This is mine. I'm wondering if it's likely to be a problem or not.\n\nIt's a machine with 2 CPU cores and 4GB RAM."
                            }
                        ]
                    }
                ]
            }
        ],
        "type": "message",
        "ts": "1663358755.351969",
        "client_msg_id": "4b44ec1c-0450-4ed9-89e8-13dd4d761b8c"
    }
]